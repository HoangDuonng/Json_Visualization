{"version":3,"file":"static/chunks/31110.b4b35c02473cbbc9.js","mappings":"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","sources":["webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/PublishLibrary.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ConfirmDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/FixedSideContainer.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/IconPicker.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ElementLinkDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/HelpDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Toast.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/ColorPicker.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/TextField.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ButtonIcon.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/Sidebar.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/UnlockPopup.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Popover.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/FilledButton.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Island.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/OverwriteConfirm/OverwriteConfirm.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/data/image.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/DragInput.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/Toolbar.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/css/app.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/search/SearchMenu.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/icons.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Spinner.scss?1fc6","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Spinner.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/ToolIcon.scss?4156","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/ToolButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/register.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionDeleteSelected.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/shortcut.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionZindex.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionSelectAll.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionDuplicateSelection.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/analytics.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useTextEditorFocus.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/context/ui-appState.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useCreatePortalContainer.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useOutsideClick.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useStable.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/EyeDropper.scss?0736","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/EyeDropper.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ButtonSeparator.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Island.scss?a3b6","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Island.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/PropertiesPopover.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/colorPickerUtils.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/ColorInput.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/ColorPicker.scss?4c09","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/HotkeyLabel.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/CustomColorList.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/PickerColorList.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/PickerHeading.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/ShadeList.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/keyboardNavHandlers.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/Picker.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/TopPicks.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ColorPicker/ColorPicker.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ButtonIcon.scss?8a1e","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ButtonIcon.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/RadioSelection.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FontPicker/FontPicker.scss?c925","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuGroup.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/common.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Ellipsify.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuItemContent.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuItem.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/search/QuickSearch.scss?d9e0","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/search/QuickSearch.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ScrollableList.scss?1769","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ScrollableList.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FontPicker/keyboardNavHandlers.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FontPicker/FontPickerList.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FontPicker/FontPickerTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FontPicker/FontPicker.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/InlineIcon.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/Collapsible.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/IconPicker.scss?d161","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/IconPicker.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Range.scss?e6fc","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Range.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionProperties.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Tooltip.scss?f4f2","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Tooltip.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/cursor.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/scene/zoom.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionCanvas.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionEmbeddable.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionFinalize.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/TextInput.scss?844f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/branding/ProjectName.scss?7afa","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/branding/ProjectName.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/CheckboxItem.scss?2e03","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/CheckboxItem.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/DarkModeToggle.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/data/resave.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionExport.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionStyles.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionGroup.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/renderer/roundRect.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/clients.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/user/Avatar.scss?bf7f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/user/Avatar.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionNavigate.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionAddToLibrary.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionAlign.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionDistribute.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionFlip.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionClipboard.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleGridMode.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleZenMode.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleObjectsSnapMode.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleStats.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionBoundText.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/hyperlink/Hyperlink.scss?da1e","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/hyperlink/Hyperlink.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionLink.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionElementLock.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/ConvertElementTypePopup.scss?2be0","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/ConvertElementTypePopup.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleShapeSwitch.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionElementLink.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/shortcuts.ts","webpack://_N_E/./src/jsondraw/packages/utils/export.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useLibraryItemSvg.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/data/library.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/deburr.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useStableCallback.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ConfirmDialog.scss?d48f","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useCallbackRefState.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/Dialog.scss?a542","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/Modal.scss?7650","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/Modal.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenu.scss?af6f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuBrowseButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuControlButtons.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useScrollPosition.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Stack.scss?385d","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Stack.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Button.scss?df6b","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Button.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/TextField.scss?986a","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/TextField.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuContent.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuItemCustom.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuItemLink.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuSeparator.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuSubContent.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuSubTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/dropdownMenuUtils.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuSub.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuItemCheckbox.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenu.scss?561a","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Trans.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/data/EditorLocalStorage.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/DialogActionButton.scss?ff2c","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/DialogActionButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/PublishLibrary.scss?ed67","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/PublishLibrary.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuHeaderContent.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuItems.scss?b647","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useTransition.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryUnit.scss?0d64","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryUnit.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuSection.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuItems.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/Dialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ConfirmDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ActiveConfirmDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/shapes.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleViewMode.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/context/tunnels.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/Actions.scss?5b26","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/ToolPopover.scss?fa0a","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/ToolPopover.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/Actions.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/CommandPalette/CommandPalette.scss?d634","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/CommandPalette/defaultCommandPaletteItems.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/CommandPalette/CommandPalette.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionLinearEditor.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionToggleSearchMenu.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionCropEditor.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/index.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionFrame.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/history.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useEmitter.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionHistory.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/actionTextAutoResize.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/actions/manager.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/animation-frame-handler.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/animated-trail.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/eraser/index.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/gesture.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/laser-trails.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/lasso/utils.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/lasso/index.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/mermaid.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/reactUtils.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/scene/Renderer.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/scene/scrollbars.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/snapping.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/wysiwyg/textWysiwyg.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/BraveMeasureTextError.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ContextMenu.scss?9c38","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Popover.scss?b001","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Popover.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ContextMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FollowMode/FollowMode.scss?1a6e","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FollowMode/FollowMode.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/common.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarHeader.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTabTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTabTriggers.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTrigger.scss?69f8","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTabs.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTab.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/Sidebar.scss?6895","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/Sidebar.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/renderer/animation.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/renderer/renderSnaps.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/renderer/interactiveScene.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/InteractiveCanvas.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/StaticCanvas.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/index.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/ElementCanvasButtons.scss?24c8","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/ElementCanvasButtons.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/renderer/renderNewElementScene.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/NewElementCanvas.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/SVGLayer.scss?4238","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/SVGLayer.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/hoc/withInternalFallback.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/FilledButton.scss?437f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/FilledButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/OverwriteConfirm/OverwriteConfirm.scss?9e88","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/OverwriteConfirm/OverwriteConfirmActions.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/OverwriteConfirm/OverwriteConfirmState.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/OverwriteConfirm/OverwriteConfirm.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/DragInput.scss?85b7","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/utils.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/DragInput.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/Angle.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/CanvasGrid.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/Dimension.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/FontSize.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/MultiAngle.tsx","webpack://_N_E/./src/jsondraw/packages/utils/index.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/MultiDimension.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/MultiFontSize.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/MultiPosition.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/Position.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/Stats.scss?fd36","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/index.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/MermaidToJsonDraw.scss?d934","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogInput.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogOutput.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogPanel.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogPanels.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogSubmitShortcut.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/common.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/MermaidToJsonDraw.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDWelcomeMessage.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/ChatMessage.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/ChatInterface.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDContext.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/utils/chat.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/useChatAgent.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/index.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/useTTDChatStorage.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/utils/mermaidValidation.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/hooks/useMermaidRenderer.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/hooks/useTextGeneration.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/hooks/useChatManagement.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/ChatHistoryMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/TTDChatPanel.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDPreviewPanel.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TextToDiagram.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogTabs.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogTabTriggers.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogTabTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogTab.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialog.scss?313f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ElementLinkDialog.scss?4e53","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ElementLinkDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/ErrorDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/HelpDialog.scss?ffac","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/HelpDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/PasteChartDialog.scss?b57f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/PasteChartDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/hooks/useCopiedIndicator.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/RadioGroup.scss?3d52","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/RadioGroup.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Switch.scss?cb63","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Switch.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/export/ImageExportDialog.scss?51c5","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/export/ImageExportDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Card.scss?5a5b","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Card.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/export/ExportDialog.scss?ddbb","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/export/JSONExportDialog.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/HelpButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Section.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/footer/Footer.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/user/UserList.scss?15f0","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/user/UserList.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenuItemContentRadio.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/main-menu/DefaultItems.scss?0f5c","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/main-menu/DefaultItems.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/main-menu/MainMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/HintViewer.scss?ee76","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/HintViewer.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/HandButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/LaserPointerButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/LockButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/PenModeButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/Toolbar.scss?46ad","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/LoadingMessage.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/search/SearchMenu.scss?2477","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/search/SearchMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/DefaultSidebar.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/FixedSideContainer.scss?f282","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/FixedSideContainer.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/LayerUI.scss?ec0e","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/MobileToolBar.scss?3b55","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/MobileToolBar.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/MobileMenu.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/LayerUI.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/UnlockPopup.scss?fe37","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/UnlockPopup.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/MagicButton.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Toast.scss?9d6e","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Toast.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/App.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/InitializeApp.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/footer/FooterCenter.scss?d70f","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/footer/FooterCenter.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/live-collaboration/LiveCollaborationTrigger.scss?9b69","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/live-collaboration/LiveCollaborationTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/branding/JsonDrawLogo.scss?de8d","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/branding/JsonDrawLogo.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/welcome-screen/WelcomeScreen.Center.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/welcome-screen/WelcomeScreen.Hints.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/welcome-screen/WelcomeScreen.scss?6cb6","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/welcome-screen/WelcomeScreen.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/css/app.scss?f4ee","webpack://_N_E/./src/jsondraw/packages/jsondraw/css/styles.scss?4860","webpack://_N_E/./src/jsondraw/packages/jsondraw/fonts/fonts.css?771d","webpack://_N_E/./src/jsondraw/packages/jsondraw/polyfill.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/data/reconcile.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialogTrigger.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/utils/TTDStreamFetch.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/DiagramToCodePlugin/DiagramToCodePlugin.tsx","webpack://_N_E/./src/jsondraw/packages/jsondraw/index.tsx","webpack://_N_E/./src/jsondraw/index.ts","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/ConvertElementTypePopup.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/user/UserList.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryUnit.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Range.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/RadioGroup.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenu.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/css/styles.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/TextInput.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Card.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ContextMenu.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Tooltip.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/Modal.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/Dialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/branding/ProjectName.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/LayerUI.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/user/Avatar.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Button.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/MobileToolBar.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FollowMode/FollowMode.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/live-collaboration/LiveCollaborationTrigger.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/layout/Stack.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Switch.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/export/ImageExportDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTrigger.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/search/QuickSearch.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/footer/FooterCenter.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/TTDDialog/MermaidToJsonDraw.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenu.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/FontPicker/FontPicker.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/popups/HintViewer.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/PasteChartDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/Actions.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/dialogs/DialogActionButton.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/library/LibraryMenuItems.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/ToolPopover.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/branding/JsonDrawLogo.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/ElementCanvasButtons.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/export/ExportDialog.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/fonts/fonts.css","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/SVGLayer.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/Spinner.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/Stats/Stats.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/CommandPalette/CommandPalette.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/welcome-screen/WelcomeScreen.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/canvases/EyeDropper.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/CheckboxItem.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/ScrollableList.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/main-menu/DefaultItems.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/toolbar/ToolIcon.scss","webpack://_N_E/./src/jsondraw/packages/jsondraw/components/hyperlink/Hyperlink.scss"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .publish-library__fields{display:flex;flex-direction:column}.jsondraw .publish-library__fields label{padding:1em 0;display:flex;justify-content:space-between;align-items:center}.jsondraw .publish-library__fields label span{font-weight:500;font-size:1rem;color:#868e96}.jsondraw .publish-library__fields label input,.jsondraw .publish-library__fields label textarea{width:70%;padding:.6em;font-family:var(--ui-font)}.jsondraw .publish-library__fields label .required{color:#e03131;margin:.2rem}.jsondraw .publish-library__buttons{display:flex;padding:.2rem 0;justify-content:flex-end;gap:.5rem}.jsondraw .publish-library__buttons .ToolIcon__icon{min-width:2.5rem;width:auto;font-size:1rem}.jsondraw .publish-library__buttons .ToolIcon_type_button{margin-left:1rem;padding:0 .5rem}.jsondraw .publish-library__buttons--confirm.ToolIcon_type_button{background-color:#228be6}.jsondraw .publish-library__buttons--confirm.ToolIcon_type_button:hover{background-color:#1971c2}.jsondraw .publish-library__buttons--cancel.ToolIcon_type_button{background-color:#adb5bd}.jsondraw .publish-library__buttons--cancel.ToolIcon_type_button:hover{background-color:#868e96}.jsondraw .publish-library__buttons .ToolIcon__icon{color:#fff}.jsondraw .publish-library__buttons .ToolIcon__icon .Spinner{--spinner-color: #fff}.jsondraw .publish-library__buttons .ToolIcon__icon .Spinner svg{padding:.5rem}.jsondraw .publish-library .selected-library-items{display:flex;flex-wrap:wrap}.jsondraw .publish-library .selected-library-items .single-library-item-wrapper{width:9rem}.jsondraw .publish-library-warning{color:#fa5252}.jsondraw .publish-library-note{padding:1em 0;font-style:italic;font-size:14px;display:block}.jsondraw .single-library-item{position:relative}.jsondraw .single-library-item-status{position:absolute;top:.3rem;left:.3rem;font-size:.7rem;color:#f03e3e;background:hsla(0,0%,100%,.9);padding:.1rem .2rem;border-radius:.2rem}.jsondraw .single-library-item__svg{background-color:#fff;padding:.3rem;width:7.5rem;height:7.5rem;border:1px solid var(--button-gray-2)}.jsondraw .single-library-item__svg svg{width:100%;height:100%}.jsondraw .single-library-item .ToolIcon__icon{background-color:#fff;width:auto;height:auto;margin:0 .5rem}.jsondraw .single-library-item .ToolIcon,.jsondraw .single-library-item .ToolIcon_type_button:hover{background-color:#fff}.jsondraw .single-library-item .required,.jsondraw .single-library-item .error{color:#e03131;font-weight:700;font-size:1rem;margin:.2rem}.jsondraw .single-library-item .error{font-weight:500;margin:0;padding:.3em 0}.jsondraw .single-library-item--remove{position:absolute;top:.2rem;right:1rem}.jsondraw .single-library-item--remove .ToolIcon__icon{margin:0}.jsondraw .single-library-item--remove .ToolIcon__icon{background-color:#fa5252}.jsondraw .single-library-item--remove .ToolIcon__icon:hover{background-color:#f03e3e}.jsondraw .single-library-item--remove .ToolIcon__icon:active{background-color:#e03131}.jsondraw .single-library-item--remove svg{color:#fff;padding:.26rem;border-radius:.3em;width:1rem;height:1rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/library/PublishLibrary.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAII,mCACE,YAAA,CACA,qBAAA,CAEA,yCACE,aAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,8CACE,eAAA,CACA,cAAA,CACA,aCNK,CDQP,iGAEE,SAAA,CACA,YAAA,CACA,0BAAA,CAGF,mDACE,aCtBI,CDuBJ,YAAA,CAKN,oCACE,YAAA,CACA,eAAA,CACA,wBAAA,CACA,SAAA,CAEA,oDACE,gBAAA,CACA,UAAA,CACA,cAAA,CAGF,0DACE,gBAAA,CACA,eAAA,CAGF,kEACE,wBC7BO,CD+BP,wEACE,wBC9BK,CDkCT,iEACE,wBCjDO,CDkDP,uEACE,wBClDK,CDsDT,oDACE,UAAA,CACA,6DACE,qBAAA,CACA,iEACE,aAAA,CAMR,mDACE,YAAA,CACA,cAAA,CAEA,gFACE,UAAA,CAIJ,mCACE,aCnFQ,CDsFV,gCACE,aAAA,CACA,iBAAA,CACA,cAAA,CACA,aAAA,CAIJ,+BACE,iBAAA,CAEA,sCACE,iBAAA,CACA,SAAA,CACA,UAAA,CACA,eAAA,CACA,aCrGQ,CDsGR,6BAAA,CACA,mBAAA,CACA,mBAAA,CAGF,oCACE,qBAAA,CACA,aAAA,CACA,YAAA,CACA,aAAA,CACA,qCAAA,CACA,wCACE,UAAA,CACA,WAAA,CAIJ,+CACE,qBAAA,CACA,UAAA,CACA,WAAA,CACA,cAAA,CAEF,oGAEE,qBAAA,CAEF,+EAEE,aClIQ,CDmIR,eAAA,CACA,cAAA,CACA,YAAA,CAEF,sCACE,eAAA,CACA,QAAA,CACA,cAAA,CAGF,uCACE,iBAAA,CACA,SAAA,CACA,UAAA,CAEA,uDACE,QAAA,CAEF,uDACE,wBCxJM,CDyJN,6DACE,wBCzJI,CD2JN,8DACE,wBC3JI,CD8JR,2CACE,UAAA,CACA,cAAA,CACA,kBAAA,CACA,UAAA,CACA,WAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .publish-library {\\n    &__fields {\\n      display: flex;\\n      flex-direction: column;\\n\\n      label {\\n        padding: 1em 0;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        span {\\n          font-weight: 500;\\n          font-size: 1rem;\\n          color: $color-gray-6;\\n        }\\n        input,\\n        textarea {\\n          width: 70%;\\n          padding: 0.6em;\\n          font-family: var(--ui-font);\\n        }\\n\\n        .required {\\n          color: $color-red-8;\\n          margin: 0.2rem;\\n        }\\n      }\\n    }\\n\\n    &__buttons {\\n      display: flex;\\n      padding: 0.2rem 0;\\n      justify-content: flex-end;\\n      gap: 0.5rem;\\n\\n      .ToolIcon__icon {\\n        min-width: 2.5rem;\\n        width: auto;\\n        font-size: 1rem;\\n      }\\n\\n      .ToolIcon_type_button {\\n        margin-left: 1rem;\\n        padding: 0 0.5rem;\\n      }\\n\\n      &--confirm.ToolIcon_type_button {\\n        background-color: $color-blue-6;\\n\\n        &:hover {\\n          background-color: $color-blue-8;\\n        }\\n      }\\n\\n      &--cancel.ToolIcon_type_button {\\n        background-color: $color-gray-5;\\n        &:hover {\\n          background-color: $color-gray-6;\\n        }\\n      }\\n\\n      .ToolIcon__icon {\\n        color: #fff;\\n        .Spinner {\\n          --spinner-color: #fff;\\n          svg {\\n            padding: 0.5rem;\\n          }\\n        }\\n      }\\n    }\\n\\n    .selected-library-items {\\n      display: flex;\\n      flex-wrap: wrap;\\n\\n      .single-library-item-wrapper {\\n        width: 9rem;\\n      }\\n    }\\n\\n    &-warning {\\n      color: $color-red-6;\\n    }\\n\\n    &-note {\\n      padding: 1em 0;\\n      font-style: italic;\\n      font-size: 14px;\\n      display: block;\\n    }\\n  }\\n\\n  .single-library-item {\\n    position: relative;\\n\\n    &-status {\\n      position: absolute;\\n      top: 0.3rem;\\n      left: 0.3rem;\\n      font-size: 0.7rem;\\n      color: $color-red-7;\\n      background: rgba(255, 255, 255, 0.9);\\n      padding: 0.1rem 0.2rem;\\n      border-radius: 0.2rem;\\n    }\\n\\n    &__svg {\\n      background-color: #fff;\\n      padding: 0.3rem;\\n      width: 7.5rem;\\n      height: 7.5rem;\\n      border: 1px solid var(--button-gray-2);\\n      svg {\\n        width: 100%;\\n        height: 100%;\\n      }\\n    }\\n\\n    .ToolIcon__icon {\\n      background-color: #fff;\\n      width: auto;\\n      height: auto;\\n      margin: 0 0.5rem;\\n    }\\n    .ToolIcon,\\n    .ToolIcon_type_button:hover {\\n      background-color: white;\\n    }\\n    .required,\\n    .error {\\n      color: $color-red-8;\\n      font-weight: 700;\\n      font-size: 1rem;\\n      margin: 0.2rem;\\n    }\\n    .error {\\n      font-weight: 500;\\n      margin: 0;\\n      padding: 0.3em 0;\\n    }\\n\\n    &--remove {\\n      position: absolute;\\n      top: 0.2rem;\\n      right: 1rem;\\n\\n      .ToolIcon__icon {\\n        margin: 0;\\n      }\\n      .ToolIcon__icon {\\n        background-color: $color-red-6;\\n        &:hover {\\n          background-color: $color-red-7;\\n        }\\n        &:active {\\n          background-color: $color-red-8;\\n        }\\n      }\\n      svg {\\n        color: #fff;\\n        padding: 0.26rem;\\n        border-radius: 0.3em;\\n        width: 1rem;\\n        height: 1rem;\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .confirm-dialog-buttons{display:flex;column-gap:.5rem;justify-content:flex-end}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/ConfirmDialog.scss\"],\"names\":[],\"mappings\":\"AAII,kCACE,YAAA,CACA,gBAAA,CACA,wBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .confirm-dialog {\\n    &-buttons {\\n      display: flex;\\n      column-gap: 0.5rem;\\n      justify-content: flex-end;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .FixedSideContainer{position:absolute;pointer-events:none}.jsondraw .FixedSideContainer>*{pointer-events:var(--ui-pointerEvents)}.jsondraw .FixedSideContainer_side_top{left:var(--editor-container-padding);top:var(--editor-container-padding);right:var(--editor-container-padding);bottom:var(--editor-container-padding)}.jsondraw .FixedSideContainer_side_top.zen-mode{right:42px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/layout/FixedSideContainer.scss\"],\"names\":[],\"mappings\":\"AAGE,8BACE,iBAAA,CACA,mBAAA,CAGF,gCACE,sCAAA,CAGF,uCACE,oCAAA,CACA,mCAAA,CACA,qCAAA,CACA,sCAAA,CAGF,gDACE,UAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .FixedSideContainer {\\n    position: absolute;\\n    pointer-events: none;\\n  }\\n\\n  .FixedSideContainer > * {\\n    pointer-events: var(--ui-pointerEvents);\\n  }\\n\\n  .FixedSideContainer_side_top {\\n    left: var(--editor-container-padding);\\n    top: var(--editor-container-padding);\\n    right: var(--editor-container-padding);\\n    bottom: var(--editor-container-padding);\\n  }\\n\\n  .FixedSideContainer_side_top.zen-mode {\\n    right: 42px;\\n  }\\n}\\n\\n/* TODO: if these are used, make sure to implement RTL support\\n.FixedSideContainer_side_left {\\n  left: var(--space-factor);\\n  top: var(--space-factor);\\n  bottom: var(--space-factor);\\n  z-index: 1;\\n}\\n\\n.FixedSideContainer_side_right {\\n  right: var(--space-factor);\\n  top: var(--space-factor);\\n  bottom: var(--space-factor);\\n  z-index: 3;\\n}\\n*/\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .picker{padding:.5rem;background:var(--popup-bg-color);border:0 solid hsla(0,0%,100%,.25);box-shadow:var(--shadow-island);border-radius:4px;position:absolute}:root[dir=rtl] .jsondraw .picker{padding:.4rem}.jsondraw .picker-container button,.jsondraw .picker button{position:relative;display:flex;align-items:center;justify-content:center}.jsondraw .picker-container button:focus-visible,.jsondraw .picker button:focus-visible{outline:rgba(0,0,0,0);background-color:var(--button-gray-2)}.jsondraw .picker-container button:focus-visible svg,.jsondraw .picker button:focus-visible svg{opacity:1}.jsondraw .picker-container button:hover,.jsondraw .picker button:hover{background-color:var(--button-gray-2)}.jsondraw .picker-container button:active,.jsondraw .picker button:active{background-color:var(--button-gray-3)}.jsondraw .picker-container button:disabled,.jsondraw .picker button:disabled{cursor:not-allowed}.jsondraw .picker-container button svg,.jsondraw .picker button svg{margin:0;width:36px;height:18px;pointer-events:none}.jsondraw .picker button{padding:.25rem .28rem .35rem .25rem}.jsondraw .picker-content{display:grid;grid-template-columns:repeat(4, auto);grid-gap:.5rem;border-radius:4px}.jsondraw .picker-collapsible{font-size:.75rem;padding:.5rem 0}.jsondraw .picker-keybinding{position:absolute;bottom:2px;font-size:.7em;color:var(--keybinding-color)}:root[dir=ltr] .jsondraw .picker-keybinding{right:2px}:root[dir=rtl] .jsondraw .picker-keybinding{left:2px}.jsondraw--mobile.jsondraw .picker-keybinding{display:none}.jsondraw .picker-type-canvasBackground .picker-keybinding{color:#aaa}.jsondraw .picker-type-elementBackground .picker-keybinding{color:#fff}.jsondraw .picker-swatch[aria-label=transparent] .picker-keybinding{color:#aaa}.jsondraw .picker-type-elementStroke .picker-keybinding{color:#d4d4d4}.jsondraw.theme--dark .picker-type-elementBackground .picker-keybinding{color:#000}.jsondraw.theme--dark .picker-swatch[aria-label=transparent] .picker-keybinding{color:#000}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/IconPicker.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAIE,kBACE,aAAA,CACA,gCAAA,CACA,kCAAA,CACA,+BAAA,CACA,iBAAA,CACA,iBAAA,CACA,iCACE,aAAA,CAIJ,4DAEE,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,wFACE,qBAAA,CACA,qCAAA,CACA,gGACE,SAAA,CAIJ,wEACE,qCAAA,CAGF,0EACE,qCAAA,CAGF,8EACE,kBAAA,CAGF,oEACE,QAAA,CACA,UAAA,CACA,WAAA,CACA,mBAAA,CAIJ,yBACE,mCAAA,CAGF,0BACE,YAAA,CACA,qCAAA,CACA,cAAA,CACA,iBAAA,CAGF,8BACE,gBAAA,CACA,eAAA,CAGF,6BACE,iBAAA,CACA,UAAA,CACA,cAAA,CACA,6BAAA,CAEA,4CACE,SAAA,CAGF,4CACE,QAAA,CCpDK,8CDuDL,YAAA,CAIJ,2DACE,UAAA,CAGF,4DACE,UAAA,CAGF,oEACE,UAAA,CAGF,wDACE,aAAA,CAIA,wEACE,UAAA,CAEF,gFACE,UAAA\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .picker {\\n    padding: 0.5rem;\\n    background: var(--popup-bg-color);\\n    border: 0 solid color.adjust(#fff, $alpha: -0.75);\\n    box-shadow: var(--shadow-island);\\n    border-radius: 4px;\\n    position: absolute;\\n    :root[dir=\\\"rtl\\\"] & {\\n      padding: 0.4rem;\\n    }\\n  }\\n\\n  .picker-container button,\\n  .picker button {\\n    position: relative;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n\\n    &:focus-visible {\\n      outline: transparent;\\n      background-color: var(--button-gray-2);\\n      & svg {\\n        opacity: 1;\\n      }\\n    }\\n\\n    &:hover {\\n      background-color: var(--button-gray-2);\\n    }\\n\\n    &:active {\\n      background-color: var(--button-gray-3);\\n    }\\n\\n    &:disabled {\\n      cursor: not-allowed;\\n    }\\n\\n    svg {\\n      margin: 0;\\n      width: 36px;\\n      height: 18px;\\n      pointer-events: none;\\n    }\\n  }\\n\\n  .picker button {\\n    padding: 0.25rem 0.28rem 0.35rem 0.25rem;\\n  }\\n\\n  .picker-content {\\n    display: grid;\\n    grid-template-columns: repeat(4, auto);\\n    grid-gap: 0.5rem;\\n    border-radius: 4px;\\n  }\\n\\n  .picker-collapsible {\\n    font-size: 0.75rem;\\n    padding: 0.5rem 0;\\n  }\\n\\n  .picker-keybinding {\\n    position: absolute;\\n    bottom: 2px;\\n    font-size: 0.7em;\\n    color: var(--keybinding-color);\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      right: 2px;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      left: 2px;\\n    }\\n    @include isMobile {\\n      display: none;\\n    }\\n  }\\n\\n  .picker-type-canvasBackground .picker-keybinding {\\n    color: #aaa;\\n  }\\n\\n  .picker-type-elementBackground .picker-keybinding {\\n    color: #fff;\\n  }\\n\\n  .picker-swatch[aria-label=\\\"transparent\\\"] .picker-keybinding {\\n    color: #aaa;\\n  }\\n\\n  .picker-type-elementStroke .picker-keybinding {\\n    color: #d4d4d4;\\n  }\\n\\n  &.theme--dark {\\n    .picker-type-elementBackground .picker-keybinding {\\n      color: #000;\\n    }\\n    .picker-swatch[aria-label=\\\"transparent\\\"] .picker-keybinding {\\n      color: #000;\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .ElementLinkDialog{position:absolute;top:var(--editor-container-padding);left:var(--editor-container-padding);z-index:var(--zIndex-modal);border-radius:10px;padding:1.5rem;display:flex;flex-direction:column;justify-content:space-between;box-shadow:var(--shadow-island);background-color:var(--island-bg-color)}.jsondraw--mobile.jsondraw .ElementLinkDialog{left:0;margin-left:.5rem;margin-right:.5rem;width:calc(100% - 1rem);box-sizing:border-box;z-index:5}.jsondraw .ElementLinkDialog .ElementLinkDialog__header h2{margin-top:0;margin-bottom:.5rem}.jsondraw--mobile.jsondraw .ElementLinkDialog .ElementLinkDialog__header h2{font-size:1.25rem}.jsondraw .ElementLinkDialog .ElementLinkDialog__header p{margin:0}.jsondraw--mobile.jsondraw .ElementLinkDialog .ElementLinkDialog__header p{font-size:.875rem}.jsondraw .ElementLinkDialog .ElementLinkDialog__header{margin-bottom:1.5rem}.jsondraw--mobile.jsondraw .ElementLinkDialog .ElementLinkDialog__header{margin-bottom:1rem}.jsondraw .ElementLinkDialog .ElementLinkDialog__input{display:flex}.jsondraw .ElementLinkDialog .ElementLinkDialog__input .ElementLinkDialog__input-field{flex:1}.jsondraw .ElementLinkDialog .ElementLinkDialog__input .ElementLinkDialog__remove{color:#c92a2a;margin-left:1rem}.jsondraw .ElementLinkDialog .ElementLinkDialog__input .ElementLinkDialog__remove .ToolIcon__icon{width:2rem;height:2rem}.jsondraw .ElementLinkDialog .ElementLinkDialog__input .ElementLinkDialog__remove .ToolIcon__icon svg{color:#fa5252}.jsondraw .ElementLinkDialog .ElementLinkDialog__actions{display:flex;justify-content:flex-end;margin-top:1.5rem}.jsondraw--mobile.jsondraw .ElementLinkDialog .ElementLinkDialog__actions{font-size:.875rem;margin-top:1rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/ElementLinkDialog.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,6BACE,iBAAA,CACA,mCAAA,CACA,oCAAA,CAEA,2BAAA,CAEA,kBAAA,CACA,cAAA,CAEA,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,+BAAA,CACA,uCAAA,CCSO,8CDNL,MAAA,CACA,iBAAA,CACA,kBAAA,CACA,uBAAA,CACA,qBAAA,CACA,SAAA,CAIA,2DACE,YAAA,CACA,mBAAA,CCLG,4EDQD,iBAAA,CAIJ,0DACE,QAAA,CCbG,2EDgBD,iBAAA,CAdN,wDAkBE,oBAAA,CCpBK,yEDuBH,kBAAA,CAIJ,uDACE,YAAA,CAEA,uFACE,MAAA,CAGF,kFACE,aCxDM,CDyDN,gBAAA,CAEA,kGACE,UAAA,CACA,WAAA,CAGF,sGACE,aCpEI,CDyEV,yDACE,YAAA,CACA,wBAAA,CACA,iBAAA,CCpDK,0EDuDH,iBAAA,CACA,eAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .ElementLinkDialog {\\n    position: absolute;\\n    top: var(--editor-container-padding);\\n    left: var(--editor-container-padding);\\n\\n    z-index: var(--zIndex-modal);\\n\\n    border-radius: 10px;\\n    padding: 1.5rem;\\n\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-between;\\n    box-shadow: var(--shadow-island);\\n    background-color: var(--island-bg-color);\\n\\n    @include isMobile {\\n      left: 0;\\n      margin-left: 0.5rem;\\n      margin-right: 0.5rem;\\n      width: calc(100% - 1rem);\\n      box-sizing: border-box;\\n      z-index: 5;\\n    }\\n\\n    .ElementLinkDialog__header {\\n      h2 {\\n        margin-top: 0;\\n        margin-bottom: 0.5rem;\\n\\n        @include isMobile {\\n          font-size: 1.25rem;\\n        }\\n      }\\n\\n      p {\\n        margin: 0;\\n\\n        @include isMobile {\\n          font-size: 0.875rem;\\n        }\\n      }\\n\\n      margin-bottom: 1.5rem;\\n\\n      @include isMobile {\\n        margin-bottom: 1rem;\\n      }\\n    }\\n\\n    .ElementLinkDialog__input {\\n      display: flex;\\n\\n      .ElementLinkDialog__input-field {\\n        flex: 1;\\n      }\\n\\n      .ElementLinkDialog__remove {\\n        color: $color-red-9;\\n        margin-left: 1rem;\\n\\n        .ToolIcon__icon {\\n          width: 2rem;\\n          height: 2rem;\\n        }\\n\\n        .ToolIcon__icon svg {\\n          color: $color-red-6;\\n        }\\n      }\\n    }\\n\\n    .ElementLinkDialog__actions {\\n      display: flex;\\n      justify-content: flex-end;\\n      margin-top: 1.5rem;\\n\\n      @include isMobile {\\n        font-size: 0.875rem;\\n        margin-top: 1rem;\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .HelpDialog .Dialog__title .Dialog__titleContent{display:block;width:100%}.jsondraw .HelpDialog__title-row{display:flex;align-items:center;justify-content:space-between;gap:1rem}.jsondraw .HelpDialog__language{display:flex;align-items:center;gap:.5rem;font-size:.75rem;font-weight:600;color:var(--text-primary-color);margin:0}.jsondraw .HelpDialog__language-label{white-space:nowrap}.jsondraw .HelpDialog__language-select{appearance:none;background-color:var(--color-surface-mid);border:1px solid var(--dialog-border-color);border-radius:var(--border-radius-md);color:var(--text-primary-color);font-size:.75rem;font-weight:600;padding:.35rem .65rem;cursor:pointer;font-family:inherit}.jsondraw.theme--dark.jsondraw .HelpDialog__language-select{background-color:var(--color-surface-high)}.jsondraw .HelpDialog .Modal__content{max-width:960px}.jsondraw .HelpDialog h3{margin:1.5rem 0;font-weight:700;font-size:1.125rem}.jsondraw .HelpDialog__header{display:flex;flex-wrap:wrap;gap:.75rem}.jsondraw .HelpDialog__btn{--background: var(--color-surface-mid);display:flex;column-gap:.5rem;align-items:center;background-color:var(--background);padding:.625rem 1rem;border:1px solid var(--background);border-radius:var(--border-radius-lg);color:var(--text-primary-color);font-weight:600;font-size:.75rem;letter-spacing:.4px}.jsondraw.theme--dark.jsondraw .HelpDialog__btn{--background: var(--color-surface-high)}.jsondraw.theme--dark.jsondraw .HelpDialog__btn:hover{--background: #363541}.jsondraw .HelpDialog__btn:hover{--background: var(--color-surface-high);text-decoration:none}.jsondraw .HelpDialog__btn:active{border-color:var(--color-primary)}.jsondraw .HelpDialog__link-icon{line-height:0}.jsondraw .HelpDialog__link-icon svg{width:1rem;height:1rem}.jsondraw .HelpDialog__islands-container{display:grid;grid-column-gap:1.5rem;grid-row-gap:2rem}@media screen and (min-width: 1024px){.jsondraw .HelpDialog__islands-container{grid-template-columns:1fr 1fr}}@media screen and (min-width: 1024px){.jsondraw .HelpDialog__island--tools{grid-area:1/1/2/2}.jsondraw .HelpDialog__island--view{grid-area:2/1/3/2}.jsondraw .HelpDialog__island--editor{grid-area:1/2/3/3}}.jsondraw .HelpDialog__island h4{font-size:1rem;font-weight:700;margin:0;margin-bottom:.625rem}.jsondraw .HelpDialog__island-content{border:1px solid var(--dialog-border-color);border-radius:var(--border-radius-lg)}.jsondraw .HelpDialog__shortcut{border-bottom:1px solid var(--dialog-border-color);padding:.375rem .75rem;display:flex;justify-content:space-between;align-items:center;font-size:.875rem;column-gap:.5rem}.jsondraw .HelpDialog__shortcut:last-child{border-bottom:none}.jsondraw .HelpDialog__key-container{display:flex;align-items:center;column-gap:.25rem;flex-shrink:0}.jsondraw .HelpDialog__key{display:flex;box-sizing:border-box;font-size:.625rem;background-color:var(--color-primary-light);border-radius:var(--border-radius-md);padding:.5rem;word-break:keep-all;align-items:center;font-family:inherit;line-height:1}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/HelpDialog.scss\"],\"names\":[],\"mappings\":\"AAII,2DACE,aAAA,CACA,UAAA,CAGF,iCACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,QAAA,CAGF,gCACE,YAAA,CACA,kBAAA,CACA,SAAA,CACA,gBAAA,CACA,eAAA,CACA,+BAAA,CACA,QAAA,CAGF,sCACE,kBAAA,CAGF,uCACE,eAAA,CACA,yCAAA,CACA,2CAAA,CACA,qCAAA,CACA,+BAAA,CACA,gBAAA,CACA,eAAA,CACA,qBAAA,CACA,cAAA,CACA,mBAAA,CAES,4DACP,0CAAA,CAIJ,sCACE,eAAA,CAGF,yBACE,eAAA,CACA,eAAA,CACA,kBAAA,CAGF,8BACE,YAAA,CACA,cAAA,CACA,UAAA,CAGF,2BACE,sCAAA,CAEA,YAAA,CACA,gBAAA,CACA,kBAAA,CACA,kCAAA,CACA,oBAAA,CACA,kCAAA,CACA,qCAAA,CACA,+BAAA,CACA,eAAA,CACA,gBAAA,CACA,mBAAA,CAES,gDACP,uCAAA,CACA,sDACE,qBAAA,CAIJ,iCACE,uCAAA,CACA,oBAAA,CAGF,kCACE,iCAAA,CAIJ,iCACE,aAAA,CACA,qCACE,UAAA,CACA,WAAA,CAIJ,yCACE,YAAA,CACA,sBAAA,CACA,iBAAA,CAEA,sCALF,yCAMI,6BAAA,CAAA,CAIJ,sCACE,qCACE,iBAAA,CAEF,oCACE,iBAAA,CAEF,sCACE,iBAAA,CAAA,CAKF,iCACE,cAAA,CACA,eAAA,CACA,QAAA,CACA,qBAAA,CAGF,sCACE,2CAAA,CACA,qCAAA,CAIJ,gCACE,kDAAA,CACA,sBAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,iBAAA,CACA,gBAAA,CAEA,2CACE,kBAAA,CAIJ,qCACE,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,aAAA,CAGF,2BACE,YAAA,CACA,qBAAA,CACA,iBAAA,CACA,2CAAA,CACA,qCAAA,CACA,aAAA,CACA,mBAAA,CACA,kBAAA,CACA,mBAAA,CACA,aAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .HelpDialog {\\n    .Dialog__title .Dialog__titleContent {\\n      display: block;\\n      width: 100%;\\n    }\\n\\n    &__title-row {\\n      display: flex;\\n      align-items: center;\\n      justify-content: space-between;\\n      gap: 1rem;\\n    }\\n\\n    &__language {\\n      display: flex;\\n      align-items: center;\\n      gap: 0.5rem;\\n      font-size: 0.75rem;\\n      font-weight: 600;\\n      color: var(--text-primary-color);\\n      margin: 0;\\n    }\\n\\n    &__language-label {\\n      white-space: nowrap;\\n    }\\n\\n    &__language-select {\\n      appearance: none;\\n      background-color: var(--color-surface-mid);\\n      border: 1px solid var(--dialog-border-color);\\n      border-radius: var(--border-radius-md);\\n      color: var(--text-primary-color);\\n      font-size: 0.75rem;\\n      font-weight: 600;\\n      padding: 0.35rem 0.65rem;\\n      cursor: pointer;\\n      font-family: inherit;\\n\\n      @at-root .jsondraw.theme--dark#{&} {\\n        background-color: var(--color-surface-high);\\n      }\\n    }\\n\\n    .Modal__content {\\n      max-width: 960px;\\n    }\\n\\n    h3 {\\n      margin: 1.5rem 0;\\n      font-weight: 700;\\n      font-size: 1.125rem;\\n    }\\n\\n    &__header {\\n      display: flex;\\n      flex-wrap: wrap;\\n      gap: 0.75rem;\\n    }\\n\\n    &__btn {\\n      --background: var(--color-surface-mid);\\n\\n      display: flex;\\n      column-gap: 0.5rem;\\n      align-items: center;\\n      background-color: var(--background);\\n      padding: 0.625rem 1rem;\\n      border: 1px solid var(--background);\\n      border-radius: var(--border-radius-lg);\\n      color: var(--text-primary-color);\\n      font-weight: 600;\\n      font-size: 0.75rem;\\n      letter-spacing: 0.4px;\\n\\n      @at-root .jsondraw.theme--dark#{&} {\\n        --background: var(--color-surface-high);\\n        &:hover {\\n          --background: #363541;\\n        }\\n      }\\n\\n      &:hover {\\n        --background: var(--color-surface-high);\\n        text-decoration: none;\\n      }\\n\\n      &:active {\\n        border-color: var(--color-primary);\\n      }\\n    }\\n\\n    &__link-icon {\\n      line-height: 0;\\n      svg {\\n        width: 1rem;\\n        height: 1rem;\\n      }\\n    }\\n\\n    &__islands-container {\\n      display: grid;\\n      grid-column-gap: 1.5rem;\\n      grid-row-gap: 2rem;\\n\\n      @media screen and (min-width: 1024px) {\\n        grid-template-columns: 1fr 1fr;\\n      }\\n    }\\n\\n    @media screen and (min-width: 1024px) {\\n      &__island--tools {\\n        grid-area: 1 / 1 / 2 / 2;\\n      }\\n      &__island--view {\\n        grid-area: 2 / 1 / 3 / 2;\\n      }\\n      &__island--editor {\\n        grid-area: 1 / 2 / 3 / 3;\\n      }\\n    }\\n\\n    &__island {\\n      h4 {\\n        font-size: 1rem;\\n        font-weight: 700;\\n        margin: 0;\\n        margin-bottom: 0.625rem;\\n      }\\n\\n      &-content {\\n        border: 1px solid var(--dialog-border-color);\\n        border-radius: var(--border-radius-lg);\\n      }\\n    }\\n\\n    &__shortcut {\\n      border-bottom: 1px solid var(--dialog-border-color);\\n      padding: 0.375rem 0.75rem;\\n      display: flex;\\n      justify-content: space-between;\\n      align-items: center;\\n      font-size: 0.875rem;\\n      column-gap: 0.5rem;\\n\\n      &:last-child {\\n        border-bottom: none;\\n      }\\n    }\\n\\n    &__key-container {\\n      display: flex;\\n      align-items: center;\\n      column-gap: 0.25rem;\\n      flex-shrink: 0;\\n    }\\n\\n    &__key {\\n      display: flex;\\n      box-sizing: border-box;\\n      font-size: 0.625rem;\\n      background-color: var(--color-primary-light);\\n      border-radius: var(--border-radius-md);\\n      padding: 0.5rem;\\n      word-break: keep-all;\\n      align-items: center;\\n      font-family: inherit;\\n      line-height: 1;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Toast{animation:fade-in .5s;background-color:var(--button-gray-1);border-radius:4px;bottom:10px;box-sizing:border-box;cursor:default;left:50%;margin-left:-150px;padding:4px 0;position:absolute;text-align:center;width:300px;z-index:999999}.jsondraw .Toast .Toast__message{padding:0 1.6rem;color:var(--popup-text-color);white-space:pre-wrap}.jsondraw .Toast .close{position:absolute;top:0;right:0;padding:.4rem}.jsondraw .Toast .close .ToolIcon__icon{width:1.2rem;height:1.2rem}@keyframes fade-in{from{opacity:0}to{opacity:1}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Toast.scss\"],\"names\":[],\"mappings\":\"AAGE,iBAIE,qBAAA,CACA,qCAAA,CACA,iBAAA,CACA,WAAA,CACA,qBAAA,CACA,cAAA,CACA,QAAA,CACA,kBAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CACA,WAAA,CACA,cAAA,CAEA,iCACE,gBAAA,CACA,6BAAA,CACA,oBAAA,CAGF,wBACE,iBAAA,CACA,KAAA,CACA,OAAA,CACA,aA1BmB,CA4BnB,wCACE,YA9Bc,CA+Bd,aA/Bc,CAoCpB,mBACE,KACE,SAAA,CAEF,GACE,SAAA,CAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .Toast {\\n    $closeButtonSize: 1.2rem;\\n    $closeButtonPadding: 0.4rem;\\n\\n    animation: fade-in 0.5s;\\n    background-color: var(--button-gray-1);\\n    border-radius: 4px;\\n    bottom: 10px;\\n    box-sizing: border-box;\\n    cursor: default;\\n    left: 50%;\\n    margin-left: -150px;\\n    padding: 4px 0;\\n    position: absolute;\\n    text-align: center;\\n    width: 300px;\\n    z-index: 999999;\\n\\n    .Toast__message {\\n      padding: 0 $closeButtonSize + ($closeButtonPadding);\\n      color: var(--popup-text-color);\\n      white-space: pre-wrap;\\n    }\\n\\n    .close {\\n      position: absolute;\\n      top: 0;\\n      right: 0;\\n      padding: $closeButtonPadding;\\n\\n      .ToolIcon__icon {\\n        width: $closeButtonSize;\\n        height: $closeButtonSize;\\n      }\\n    }\\n  }\\n\\n  @keyframes fade-in {\\n    from {\\n      opacity: 0;\\n    }\\n    to {\\n      opacity: 1;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .focus-visible-none:focus-visible{outline:none !important}.jsondraw .color-picker__title{padding:0 .5rem;font-size:.875rem;text-align:left}.jsondraw .color-picker__heading{padding:0 .5rem;font-size:.75rem;text-align:left}.jsondraw .color-picker-container{display:grid;grid-template-columns:1fr 20px 1.625rem;padding:.25rem 0px;align-items:center}.jsondraw--mobile.jsondraw .color-picker-container{max-width:11rem}.jsondraw .color-picker-container.color-picker-container--no-top-picks{display:flex;justify-content:center;grid-template-columns:unset}.jsondraw .color-picker__top-picks{display:flex;justify-content:space-between;align-items:center}.jsondraw .color-picker__button{--radius: 4px;--size: 1.375rem}.jsondraw .color-picker__button.has-outline{box-shadow:inset 0 0 0 1px #d9d9d9}.jsondraw .color-picker__button{padding:0;margin:0;width:var(--size);height:var(--size);border:0;border-radius:var(--radius);filter:var(--theme-filter);background-color:var(--swatch-color);background-position:left center;position:relative;font-family:inherit;box-sizing:border-box}.jsondraw .color-picker__button:hover:not(.active):not(.color-picker__button--large){transform:scale(1.075)}.jsondraw .color-picker__button:hover:not(.active).color-picker__button--large::after{content:\"\";position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;box-shadow:0 0 0 1px var(--color-gray-30);border-radius:var(--radius);filter:var(--theme-filter)}.jsondraw .color-picker__button .color-picker__button-outline{display:flex;align-items:center;justify-content:center}.jsondraw .color-picker__button .color-picker__button-outline svg{color:var(--color-gray-60);width:1.25rem;height:1.25rem}.jsondraw .color-picker__button .color-picker__button-background{display:flex;align-items:center;justify-content:center}.jsondraw .color-picker__button .color-picker__button-background svg{width:100%;height:100%}.jsondraw .color-picker__button.active .color-picker__button-outline{position:absolute;--offset: -1px;top:var(--offset);left:var(--offset);right:var(--offset);bottom:var(--offset);box-shadow:0 0 0 1px var(--color-primary-darkest);z-index:1;border-radius:var(--radius);filter:var(--theme-filter)}.jsondraw .color-picker__button:focus-visible{outline:none}.jsondraw .color-picker__button:focus-visible::after{content:\"\";position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border:3px solid var(--focus-highlight-color);border-radius:calc(var(--radius) + 1px)}.jsondraw .color-picker__button:focus-visible.active .color-picker__button-outline{display:none}.jsondraw .color-picker__button--large{--radius: 0.5rem;width:1.875rem;height:1.875rem}.jsondraw .color-picker__button.is-transparent{background-image:url(${___CSS_LOADER_URL_REPLACEMENT_0___})}.jsondraw .color-picker__button--no-focus-visible{border:0}.jsondraw .color-picker__button--no-focus-visible::after{display:none}.jsondraw .color-picker__button--no-focus-visible:focus-visible{outline:none !important}.jsondraw .color-picker__button.active-color{border-radius:calc(var(--radius) + 1px);width:1.625rem;height:1.625rem}.jsondraw .color-picker__button.compact-sizing{width:var(--mobile-action-button-size);height:var(--mobile-action-button-size)}.jsondraw .color-picker__button.mobile-border{border:1px solid var(--mobile-color-border)}.jsondraw .color-picker__button__hotkey-label{position:absolute;right:5px;bottom:3px;filter:none;font-size:11px;font-weight:500}.jsondraw .color-picker{background:var(--popup-bg-color);border:0 solid hsla(0,0%,100%,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}:root[dir=ltr] .jsondraw .color-picker{left:-5.5px}:root[dir=rtl] .jsondraw .color-picker{right:-5.5px}.jsondraw .color-picker-control-container{display:grid;grid-template-columns:auto 1fr;align-items:center;column-gap:.5rem}.jsondraw .color-picker-control-container+.popover{position:static}.jsondraw .color-picker-popover-container{margin-top:-0.25rem}:root[dir=ltr] .jsondraw .color-picker-popover-container{margin-left:.5rem}:root[dir=rtl] .jsondraw .color-picker-popover-container{margin-left:-3rem}.jsondraw .color-picker-triangle{width:0;height:0;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--popup-bg-color);position:absolute;top:10px}:root[dir=ltr] .jsondraw .color-picker-triangle{transform:rotate(270deg);left:-14px}:root[dir=rtl] .jsondraw .color-picker-triangle{transform:rotate(90deg);right:-14px}.jsondraw .color-picker-triangle-shadow{border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,.1)}:root[dir=ltr] .jsondraw .color-picker-triangle-shadow{left:-14px}:root[dir=rtl] .jsondraw .color-picker-triangle-shadow{right:-16px}.jsondraw .color-picker-content{display:flex;flex-direction:column;gap:.75rem;outline:none}.jsondraw .color-picker-content--default{padding:.5rem;display:grid;grid-template-columns:repeat(5, 1.875rem);grid-gap:.25rem;border-radius:4px}.jsondraw .color-picker-content--default:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}.jsondraw .color-picker-content--canvas{display:flex;flex-direction:column;padding:.25rem}.jsondraw .color-picker-content--canvas-title{color:#868e96;font-size:12px;padding:0 .25rem}.jsondraw .color-picker-content--canvas-colors{padding:.5rem 0}.jsondraw .color-picker-content--canvas-colors .color-picker-swatch{margin:0 .25rem}.jsondraw .color-picker-content .color-input-container{grid-column:1/span 5}.jsondraw .color-picker-swatch{position:relative;height:1.875rem;width:1.875rem;cursor:pointer;border-radius:4px;margin:0;box-sizing:border-box;border:1px solid #ddd;background-color:currentColor !important;filter:var(--theme-filter)}.jsondraw .color-picker-swatch:focus{box-shadow:0 0 4px 1px currentColor;border-color:var(--select-highlight-color)}.jsondraw .color-picker-transparent{border-radius:4px;box-shadow:rgba(0,0,0,.1) 0 0 0 1px inset;position:absolute;top:0;right:0;bottom:0;left:0}.jsondraw .color-picker-transparent,.jsondraw .color-picker-label-swatch{background:url(${___CSS_LOADER_URL_REPLACEMENT_0___}) left center}.jsondraw .color-picker-hash{height:var(--default-button-size);flex-shrink:0;padding:.5rem .5rem .5rem .75rem;border:1px solid var(--default-border-color);border-right:0;box-sizing:border-box}:root[dir=ltr] .jsondraw .color-picker-hash{border-radius:var(--border-radius-lg) 0 0 var(--border-radius-lg)}:root[dir=rtl] .jsondraw .color-picker-hash{border-radius:0 var(--border-radius-lg) var(--border-radius-lg) 0;border-right:1px solid var(--default-border-color);border-left:0}.jsondraw .color-picker-hash{color:var(--input-label-color);display:flex;align-items:center;justify-content:center;position:relative}.jsondraw .color-input-container{display:flex}.jsondraw .color-input-container:focus-within{box-shadow:0 0 0 1px var(--color-primary-darkest);border-radius:var(--border-radius-lg)}.jsondraw .color-picker__input-label{display:grid;grid-template-columns:auto 1fr auto auto;gap:8px;align-items:center;border:1px solid var(--default-border-color);border-radius:8px;padding:0 12px;margin:8px;box-sizing:border-box}.jsondraw .color-picker__input-label:focus-within{box-shadow:0 0 0 1px var(--color-primary-darkest);border-radius:var(--border-radius-lg)}.jsondraw .color-picker__input-hash{padding:0 .25rem}.jsondraw .color-picker-input{box-sizing:border-box;width:100%;margin:0;font-size:.875rem;font-family:inherit;background-color:rgba(0,0,0,0);color:var(--text-primary-color);border:0;outline:none;height:var(--default-button-size);border:1px solid var(--default-border-color);border-left:0;letter-spacing:.4px}:root[dir=ltr] .jsondraw .color-picker-input{border-radius:0 var(--border-radius-lg) var(--border-radius-lg) 0}:root[dir=rtl] .jsondraw .color-picker-input{border-radius:var(--border-radius-lg) 0 0 var(--border-radius-lg);border-left:1px solid var(--default-border-color);border-right:0}.jsondraw .color-picker-input{padding:.5rem;padding-left:.25rem;appearance:none}.jsondraw .color-picker-input:focus-visible{box-shadow:none}.jsondraw .color-picker-label-swatch-container{border:1px solid var(--default-border-color);border-radius:var(--border-radius-lg);width:var(--default-button-size);height:var(--default-button-size);box-sizing:border-box;overflow:hidden}.jsondraw .color-picker-label-swatch{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .color-picker-label-swatch svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .color-picker-label-swatch:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .color-picker-label-swatch:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .color-picker-label-swatch.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .color-picker-label-swatch.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .color-picker-label-swatch.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .color-picker-label-swatch{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw .color-picker-label-swatch{background-color:var(--swatch-color) !important;overflow:hidden;position:relative;filter:var(--theme-filter);border:0 !important}.jsondraw .color-picker-label-swatch:after{content:\"\";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--swatch-color)}.jsondraw .color-picker-keybinding{position:absolute;bottom:2px;font-size:.7em}:root[dir=ltr] .jsondraw .color-picker-keybinding{right:2px}:root[dir=rtl] .jsondraw .color-picker-keybinding{left:2px}.jsondraw--mobile.jsondraw .color-picker-keybinding{display:none}.jsondraw .color-picker-type-canvasBackground .color-picker-keybinding{color:#aaa}.jsondraw .color-picker-type-elementBackground .color-picker-keybinding{color:#fff}.jsondraw .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#aaa}.jsondraw .color-picker-type-elementStroke .color-picker-keybinding{color:#d4d4d4}.jsondraw.theme--dark .color-picker-type-elementBackground .color-picker-keybinding{color:#000}.jsondraw.theme--dark .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#000}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ColorPicker/ColorPicker.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .focus-visible-none {\\n    &:focus-visible {\\n      outline: none !important;\\n    }\\n  }\\n\\n  .color-picker__title {\\n    padding: 0 0.5rem;\\n    font-size: 0.875rem;\\n    text-align: left;\\n  }\\n\\n  .color-picker__heading {\\n    padding: 0 0.5rem;\\n    font-size: 0.75rem;\\n    text-align: left;\\n  }\\n\\n  .color-picker-container {\\n    display: grid;\\n    grid-template-columns: 1fr 20px 1.625rem;\\n    padding: 0.25rem 0px;\\n    align-items: center;\\n\\n    @include isMobile {\\n      max-width: 11rem;\\n    }\\n\\n    &.color-picker-container--no-top-picks {\\n      display: flex;\\n      justify-content: center;\\n      grid-template-columns: unset;\\n    }\\n  }\\n\\n  .color-picker__top-picks {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n  }\\n\\n  .color-picker__button {\\n    --radius: 4px;\\n    --size: 1.375rem;\\n\\n    &.has-outline {\\n      box-shadow: inset 0 0 0 1px #d9d9d9;\\n    }\\n\\n    padding: 0;\\n    margin: 0;\\n    width: var(--size);\\n    height: var(--size);\\n    border: 0;\\n    border-radius: var(--radius);\\n    filter: var(--theme-filter);\\n    background-color: var(--swatch-color);\\n    background-position: left center;\\n    position: relative;\\n    font-family: inherit;\\n    box-sizing: border-box;\\n\\n    &:hover:not(.active):not(.color-picker__button--large) {\\n      transform: scale(1.075);\\n    }\\n\\n    &:hover:not(.active).color-picker__button--large {\\n      &::after {\\n        content: \\\"\\\";\\n        position: absolute;\\n        top: -1px;\\n        left: -1px;\\n        right: -1px;\\n        bottom: -1px;\\n        box-shadow: 0 0 0 1px var(--color-gray-30);\\n        border-radius: var(--radius);\\n        filter: var(--theme-filter);\\n      }\\n    }\\n\\n    .color-picker__button-outline {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      svg {\\n        color: var(--color-gray-60);\\n        width: 1.25rem;\\n        height: 1.25rem;\\n      }\\n    }\\n\\n    .color-picker__button-background {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      svg {\\n        width: 100%;\\n        height: 100%;\\n      }\\n    }\\n\\n    &.active {\\n      .color-picker__button-outline {\\n        position: absolute;\\n        --offset: -1px;\\n        top: var(--offset);\\n        left: var(--offset);\\n        right: var(--offset);\\n        bottom: var(--offset);\\n        box-shadow: 0 0 0 1px var(--color-primary-darkest);\\n        z-index: 1; // due hover state so this has preference\\n        border-radius: var(--radius);\\n        filter: var(--theme-filter);\\n      }\\n    }\\n\\n    &:focus-visible {\\n      outline: none;\\n\\n      &::after {\\n        content: \\\"\\\";\\n        position: absolute;\\n        top: -4px;\\n        right: -4px;\\n        bottom: -4px;\\n        left: -4px;\\n        border: 3px solid var(--focus-highlight-color);\\n        border-radius: calc(var(--radius) + 1px);\\n      }\\n\\n      &.active {\\n        .color-picker__button-outline {\\n          display: none;\\n        }\\n      }\\n    }\\n\\n    &--large {\\n      --radius: 0.5rem;\\n      width: 1.875rem;\\n      height: 1.875rem;\\n    }\\n\\n    &.is-transparent {\\n      background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\\\");\\n    }\\n\\n    &--no-focus-visible {\\n      border: 0;\\n      &::after {\\n        display: none;\\n      }\\n      &:focus-visible {\\n        outline: none !important;\\n      }\\n    }\\n\\n    &.active-color {\\n      border-radius: calc(var(--radius) + 1px);\\n      width: 1.625rem;\\n      height: 1.625rem;\\n    }\\n\\n    &.compact-sizing {\\n      width: var(--mobile-action-button-size);\\n      height: var(--mobile-action-button-size);\\n    }\\n\\n    &.mobile-border {\\n      border: 1px solid var(--mobile-color-border);\\n    }\\n  }\\n\\n  .color-picker__button__hotkey-label {\\n    position: absolute;\\n    right: 5px;\\n    bottom: 3px;\\n    filter: none;\\n    font-size: 11px;\\n    font-weight: 500;\\n  }\\n\\n  .color-picker {\\n    background: var(--popup-bg-color);\\n    border: 0 solid color.adjust(#fff, $alpha: -0.75);\\n    box-shadow: color.adjust(#000, $alpha: -0.75) 0 1px 4px;\\n    border-radius: 4px;\\n    position: absolute;\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      left: -5.5px;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      right: -5.5px;\\n    }\\n  }\\n\\n  .color-picker-control-container {\\n    display: grid;\\n    grid-template-columns: auto 1fr;\\n    align-items: center;\\n    column-gap: 0.5rem;\\n  }\\n\\n  .color-picker-control-container + .popover {\\n    position: static;\\n  }\\n\\n  .color-picker-popover-container {\\n    margin-top: -0.25rem;\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      margin-left: 0.5rem;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      margin-left: -3rem;\\n    }\\n  }\\n\\n  .color-picker-triangle {\\n    width: 0;\\n    height: 0;\\n    border-style: solid;\\n    border-width: 0 9px 10px;\\n    border-color: transparent transparent var(--popup-bg-color);\\n    position: absolute;\\n    top: 10px;\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      transform: rotate(270deg);\\n      left: -14px;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      transform: rotate(90deg);\\n      right: -14px;\\n    }\\n  }\\n\\n  .color-picker-triangle-shadow {\\n    border-color: transparent transparent color.adjust(#000, $alpha: -0.9);\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      left: -14px;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      right: -16px;\\n    }\\n  }\\n\\n  .color-picker-content {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.75rem;\\n    outline: none;\\n  }\\n\\n  .color-picker-content--default {\\n    padding: 0.5rem;\\n    display: grid;\\n    grid-template-columns: repeat(5, 1.875rem);\\n    grid-gap: 0.25rem;\\n    border-radius: 4px;\\n\\n    &:focus {\\n      outline: none;\\n      box-shadow: 0 0 0 2px var(--focus-highlight-color);\\n    }\\n  }\\n\\n  .color-picker-content--canvas {\\n    display: flex;\\n    flex-direction: column;\\n    padding: 0.25rem;\\n\\n    &-title {\\n      color: $color-gray-6;\\n      font-size: 12px;\\n      padding: 0 0.25rem;\\n    }\\n\\n    &-colors {\\n      padding: 0.5rem 0;\\n\\n      .color-picker-swatch {\\n        margin: 0 0.25rem;\\n      }\\n    }\\n  }\\n\\n  .color-picker-content .color-input-container {\\n    grid-column: 1 / span 5;\\n  }\\n\\n  .color-picker-swatch {\\n    position: relative;\\n    height: 1.875rem;\\n    width: 1.875rem;\\n    cursor: pointer;\\n    border-radius: 4px;\\n    margin: 0;\\n    box-sizing: border-box;\\n    border: 1px solid #ddd;\\n    background-color: currentColor !important;\\n    filter: var(--theme-filter);\\n\\n    &:focus {\\n      /* TODO: only show the border when the color is too light to see as a shadow */\\n      box-shadow: 0 0 4px 1px currentColor;\\n      border-color: var(--select-highlight-color);\\n    }\\n  }\\n\\n  .color-picker-transparent {\\n    border-radius: 4px;\\n    box-shadow: color.adjust(#000, $alpha: -0.9) 0 0 0 1px inset;\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n  }\\n\\n  .color-picker-transparent,\\n  .color-picker-label-swatch {\\n    background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\\\")\\n      left center;\\n  }\\n\\n  .color-picker-hash {\\n    height: var(--default-button-size);\\n    flex-shrink: 0;\\n    padding: 0.5rem 0.5rem 0.5rem 0.75rem;\\n    border: 1px solid var(--default-border-color);\\n    border-right: 0;\\n    box-sizing: border-box;\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      border-radius: var(--border-radius-lg) 0 0 var(--border-radius-lg);\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      border-radius: 0 var(--border-radius-lg) var(--border-radius-lg) 0;\\n      border-right: 1px solid var(--default-border-color);\\n      border-left: 0;\\n    }\\n\\n    color: var(--input-label-color);\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    position: relative;\\n  }\\n\\n  .color-input-container {\\n    display: flex;\\n\\n    &:focus-within {\\n      box-shadow: 0 0 0 1px var(--color-primary-darkest);\\n      border-radius: var(--border-radius-lg);\\n    }\\n  }\\n\\n  .color-picker__input-label {\\n    display: grid;\\n    grid-template-columns: auto 1fr auto auto;\\n    gap: 8px;\\n    align-items: center;\\n    border: 1px solid var(--default-border-color);\\n    border-radius: 8px;\\n    padding: 0 12px;\\n    margin: 8px;\\n    box-sizing: border-box;\\n\\n    &:focus-within {\\n      box-shadow: 0 0 0 1px var(--color-primary-darkest);\\n      border-radius: var(--border-radius-lg);\\n    }\\n  }\\n\\n  .color-picker__input-hash {\\n    padding: 0 0.25rem;\\n  }\\n\\n  .color-picker-input {\\n    box-sizing: border-box;\\n    width: 100%;\\n    margin: 0;\\n    font-size: 0.875rem;\\n    font-family: inherit;\\n    background-color: transparent;\\n    color: var(--text-primary-color);\\n    border: 0;\\n    outline: none;\\n    height: var(--default-button-size);\\n    border: 1px solid var(--default-border-color);\\n    border-left: 0;\\n    letter-spacing: 0.4px;\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      border-radius: 0 var(--border-radius-lg) var(--border-radius-lg) 0;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      border-radius: var(--border-radius-lg) 0 0 var(--border-radius-lg);\\n      border-left: 1px solid var(--default-border-color);\\n      border-right: 0;\\n    }\\n\\n    padding: 0.5rem;\\n    padding-left: 0.25rem;\\n    appearance: none;\\n\\n    &:focus-visible {\\n      box-shadow: none;\\n    }\\n  }\\n\\n  .color-picker-label-swatch-container {\\n    border: 1px solid var(--default-border-color);\\n    border-radius: var(--border-radius-lg);\\n    width: var(--default-button-size);\\n    height: var(--default-button-size);\\n    box-sizing: border-box;\\n    overflow: hidden;\\n  }\\n\\n  .color-picker-label-swatch {\\n    @include outlineButtonStyles;\\n    background-color: var(--swatch-color) !important;\\n    overflow: hidden;\\n    position: relative;\\n    filter: var(--theme-filter);\\n    border: 0 !important;\\n\\n    &:after {\\n      content: \\\"\\\";\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background: var(--swatch-color);\\n    }\\n  }\\n\\n  .color-picker-keybinding {\\n    position: absolute;\\n    bottom: 2px;\\n    font-size: 0.7em;\\n\\n    :root[dir=\\\"ltr\\\"] & {\\n      right: 2px;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      left: 2px;\\n    }\\n\\n    @include isMobile {\\n      display: none;\\n    }\\n  }\\n\\n  .color-picker-type-canvasBackground .color-picker-keybinding {\\n    color: #aaa;\\n  }\\n\\n  .color-picker-type-elementBackground .color-picker-keybinding {\\n    color: #fff;\\n  }\\n\\n  .color-picker-swatch[aria-label=\\\"transparent\\\"] .color-picker-keybinding {\\n    color: #aaa;\\n  }\\n\\n  .color-picker-type-elementStroke .color-picker-keybinding {\\n    color: #d4d4d4;\\n  }\\n\\n  &.theme--dark {\\n    .color-picker-type-elementBackground .color-picker-keybinding {\\n      color: #000;\\n    }\\n    .color-picker-swatch[aria-label=\\\"transparent\\\"] .color-picker-keybinding {\\n      color: #000;\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--ExcTextField--color: var(--color-on-surface);--ExcTextField--label-color: var(--color-on-surface);--ExcTextField--background: var(--color-surface-low);--ExcTextField--readonly--background: var(--color-surface-high);--ExcTextField--readonly--color: var(--color-on-surface);--ExcTextField--border: var(--color-gray-20);--ExcTextField--readonly--border: var(--color-border-outline-variant);--ExcTextField--border-hover: var(--color-brand-hover);--ExcTextField--border-active: var(--color-brand-active);--ExcTextField--placeholder: var(--color-border-outline-variant)}.jsondraw.theme--dark{--ExcTextField--border: var(--color-border-outline-variant)}.jsondraw .ExcTextField{position:relative}.jsondraw .ExcTextField svg{position:absolute;top:50%;transform:translateY(-50%);left:.75rem;width:1.25rem;height:1.25rem;color:var(--color-gray-40);z-index:1}.jsondraw .ExcTextField--fullWidth{width:100%;flex-grow:1}.jsondraw .ExcTextField__label{font-family:\"Assistant\";font-style:normal;font-weight:600;font-size:.875rem;line-height:150%;color:var(--ExcTextField--label-color);margin-bottom:.25rem;user-select:none}.jsondraw .ExcTextField__input{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;height:3rem;background:var(--ExcTextField--background);border:1px solid var(--ExcTextField--border);border-radius:.5rem;padding:0 .75rem}.jsondraw .ExcTextField__input:not(.jsondraw .ExcTextField__input--readonly):hover{border-color:var(--ExcTextField--border-hover)}.jsondraw .ExcTextField__input:not(.jsondraw .ExcTextField__input--readonly):active,.jsondraw .ExcTextField__input:not(.jsondraw .ExcTextField__input--readonly):focus-within{border-color:var(--ExcTextField--border-active)}.jsondraw .ExcTextField__input input{display:flex;align-items:center;border:none;outline:none;padding:0;margin:0;height:1.5rem;color:var(--ExcTextField--color);font-family:\"Assistant\";font-style:normal;font-weight:400;font-size:1rem;line-height:150%;text-overflow:ellipsis;background:rgba(0,0,0,0);width:100%}.jsondraw .ExcTextField__input input:not(:focus):hover{background-color:initial}.jsondraw .ExcTextField__input input:focus{outline:initial;box-shadow:initial}.jsondraw .ExcTextField__input--readonly{background:var(--ExcTextField--readonly--background);border-color:var(--ExcTextField--readonly--border)}.jsondraw .ExcTextField__input--readonly input{color:var(--ExcTextField--readonly--color)}.jsondraw .ExcTextField--hasIcon .ExcTextField__input{padding-left:2.5rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/TextField.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,8CAAA,CACA,oDAAA,CACA,oDAAA,CACA,+DAAA,CACA,wDAAA,CACA,4CAAA,CACA,qEAAA,CACA,sDAAA,CACA,wDAAA,CACA,gEAAA,CAEA,sBACE,2DAAA,CAGF,wBACE,iBAAA,CAEA,4BACE,iBAAA,CACA,OAAA,CACA,0BAAA,CACA,WAAA,CACA,aAAA,CACA,cAAA,CACA,0BAAA,CACA,SAAA,CAGF,mCACE,UAAA,CACA,WAAA,CAGF,+BACE,uBAAA,CACA,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,gBAAA,CAEA,sCAAA,CAEA,oBAAA,CACA,gBAAA,CAGF,+BACE,qBAAA,CAEA,YAAA,CACA,kBAAA,CACA,kBAAA,CAEA,WAAA,CAEA,0CAAA,CACA,4CAAA,CACA,mBAAA,CAEA,gBAAA,CAGE,mFACE,8CAAA,CAGF,8KAEE,+CAAA,CAIJ,qCACE,YAAA,CACA,kBAAA,CAEA,WAAA,CACA,YAAA,CACA,SAAA,CACA,QAAA,CAEA,aAAA,CAEA,gCAAA,CAEA,uBAAA,CACA,iBAAA,CACA,eAAA,CACA,cAAA,CACA,gBAAA,CACA,sBAAA,CAEA,wBAAA,CAEA,UAAA,CAGE,uDACE,wBAAA,CAIJ,2CACE,eAAA,CACA,kBAAA,CAIJ,yCACE,oDAAA,CACA,kDAAA,CAEA,+CACE,0CAAA,CAKN,sDACE,mBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --ExcTextField--color: var(--color-on-surface);\\n  --ExcTextField--label-color: var(--color-on-surface);\\n  --ExcTextField--background: var(--color-surface-low);\\n  --ExcTextField--readonly--background: var(--color-surface-high);\\n  --ExcTextField--readonly--color: var(--color-on-surface);\\n  --ExcTextField--border: var(--color-gray-20);\\n  --ExcTextField--readonly--border: var(--color-border-outline-variant);\\n  --ExcTextField--border-hover: var(--color-brand-hover);\\n  --ExcTextField--border-active: var(--color-brand-active);\\n  --ExcTextField--placeholder: var(--color-border-outline-variant);\\n\\n  &.theme--dark {\\n    --ExcTextField--border: var(--color-border-outline-variant);\\n  }\\n\\n  .ExcTextField {\\n    position: relative;\\n\\n    svg {\\n      position: absolute;\\n      top: 50%; // 50% is not exactly in the center of the input\\n      transform: translateY(-50%);\\n      left: 0.75rem;\\n      width: 1.25rem;\\n      height: 1.25rem;\\n      color: var(--color-gray-40);\\n      z-index: 1;\\n    }\\n\\n    &--fullWidth {\\n      width: 100%;\\n      flex-grow: 1;\\n    }\\n\\n    &__label {\\n      font-family: \\\"Assistant\\\";\\n      font-style: normal;\\n      font-weight: 600;\\n      font-size: 0.875rem;\\n      line-height: 150%;\\n\\n      color: var(--ExcTextField--label-color);\\n\\n      margin-bottom: 0.25rem;\\n      user-select: none;\\n    }\\n\\n    &__input {\\n      box-sizing: border-box;\\n\\n      display: flex;\\n      flex-direction: row;\\n      align-items: center;\\n\\n      height: 3rem;\\n\\n      background: var(--ExcTextField--background);\\n      border: 1px solid var(--ExcTextField--border);\\n      border-radius: 0.5rem;\\n\\n      padding: 0 0.75rem;\\n\\n      &:not(&--readonly) {\\n        &:hover {\\n          border-color: var(--ExcTextField--border-hover);\\n        }\\n\\n        &:active,\\n        &:focus-within {\\n          border-color: var(--ExcTextField--border-active);\\n        }\\n      }\\n\\n      & input {\\n        display: flex;\\n        align-items: center;\\n\\n        border: none;\\n        outline: none;\\n        padding: 0;\\n        margin: 0;\\n\\n        height: 1.5rem;\\n\\n        color: var(--ExcTextField--color);\\n\\n        font-family: \\\"Assistant\\\";\\n        font-style: normal;\\n        font-weight: 400;\\n        font-size: 1rem;\\n        line-height: 150%;\\n        text-overflow: ellipsis;\\n\\n        background: transparent;\\n\\n        width: 100%;\\n\\n        &:not(:focus) {\\n          &:hover {\\n            background-color: initial;\\n          }\\n        }\\n\\n        &:focus {\\n          outline: initial;\\n          box-shadow: initial;\\n        }\\n      }\\n\\n      &--readonly {\\n        background: var(--ExcTextField--readonly--background);\\n        border-color: var(--ExcTextField--readonly--border);\\n\\n        & input {\\n          color: var(--ExcTextField--readonly--color);\\n        }\\n      }\\n    }\\n\\n    &--hasIcon .ExcTextField__input {\\n      padding-left: 2.5rem;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path fill=\\\"%23ced4da\\\" d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--mobile-action-button-bg: rgba(255, 255, 255, 0.35);--mobile-color-border: var(--default-border-color);--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url(${___CSS_LOADER_URL_REPLACEMENT_0___});--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-on-surface);--icon-green-fill-color: #2b8a3e;--default-bg-color: #fff;--input-bg-color: #fff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: #ffffff;--island-bg-color-alt: #fff;--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--link-color-hover: #1971c2;--link-color-active: #a5d8ff;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: var(--island-bg-color);--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000;--popup-text-inverted-color: #fff;--select-highlight-color: #339af0;--shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17), 0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08), 0px 7px 14px 0px rgba(0, 0, 0, 0.05);--button-hover-bg: var(--color-surface-high);--button-active-bg: var(--color-surface-high);--button-active-border: var(--color-brand-active);--default-border-color: var(--color-surface-high);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--mobile-action-button-size: 2rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--color-slider-track: hsl(240, 100%, 90%);--color-slider-thumb: var(--color-gray-80);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-surface-high);--sidebar-bg-color: var(--island-bg-color);--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--chat-msg-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-on-surface);--color-selection: #6965db;--color-icon-white: #fff;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-primary-light-darker: #d7d5ff;--color-primary-hover: #5753d0;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-disabled: var(--color-gray-40);--color-warning: #fceeca;--color-warning-dark: #f5c354;--color-warning-darker: #f3ab2c;--color-warning-darkest: #ec8b14;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-danger-dark: #db6965;--color-danger-darker: #d65550;--color-danger-darkest: #d1413c;--color-danger-text: black;--color-danger-background: #fff0f0;--color-danger-icon-background: #ffdad6;--color-danger-color: #700000;--color-danger-icon-color: #700000;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--text-primary-color);--color-warning-icon-color: var(--text-primary-color);--color-muted: var(--color-gray-30);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-100);--color-muted-background: var(--color-gray-80);--color-muted-background-darker: var(--color-gray-100);--color-promo: var(--color-primary);--color-success: #cafccc;--color-success-darker: #bafabc;--color-success-darkest: #a5eba8;--color-success-text: #268029;--color-success-contrast: #65bb6a;--color-success-contrast-hover: #6bcf70;--color-success-contrast-active: #6edf74;--color-logo-icon: var(--color-primary);--color-logo-text: #190064;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem;--color-surface-high: #f1f0ff;--color-surface-mid: #f6f6f9;--color-surface-low: #ececf4;--color-surface-lowest: #ffffff;--color-on-surface: #1b1b1f;--color-brand-hover: #5753d0;--color-on-primary-container: #030064;--color-surface-primary-container: #e0dfff;--color-brand-active: #4440bf;--color-border-outline: #767680;--color-border-outline-variant: #c5c5d0;--color-surface-primary-container: #e0dfff;--color-badge: #0b6513;--background-color-badge: #d3ffd2}.jsondraw--mobile.jsondraw{--editor-container-padding: 0.75rem}@media screen and (min-device-width: 1921px){.jsondraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.jsondraw.theme--dark.theme--dark-background-none{background:none}.jsondraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--mobile-action-button-bg: var(--island-bg-color);--mobile-color-border: rgba(255, 255, 255, 0.85);--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url(${___CSS_LOADER_URL_REPLACEMENT_1___});--focus-highlight-color: #228be6;--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #232329;--island-bg-color-alt: hsl(240, 12%, 12%);--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17), 0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08), 0px 7px 14px 0px rgba(0, 0, 0, 0.05);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-slider-track: hsl(244, 23%, 39%);--color-selection: #3530c4;--color-icon-white: var(--color-gray-90);--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-primary-light-darker: #43415e;--color-primary-hover: #bbb8ff;--color-disabled: var(--color-gray-70);--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-danger-dark: #672120;--color-danger-darker: #8f2625;--color-danger-darkest: #ac2b29;--color-danger-text: #fbcbcc;--color-danger-background: #fbcbcc;--color-danger-icon-background: #672120;--color-danger-color: #261919;--color-danger-icon-color: #fbcbcc;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--color-gray-80);--color-warning-icon-color: var(--color-gray-80);--color-muted: var(--color-gray-80);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-20);--color-muted-background: var(--color-gray-40);--color-muted-background-darker: var(--color-gray-20);--color-logo-text: #e2dfff;--color-surface-high: #2e2d39;--color-surface-low: hsl(240, 8%, 15%);--color-surface-mid: hsl(240 6% 10%);--color-surface-lowest: hsl(0, 0%, 7%);--color-on-surface: #e3e3e8;--color-brand-hover: #bbb8ff;--color-on-primary-container: #e0dfff;--color-surface-primary-container: #403e6a;--color-brand-active: #d0ccff;--color-border-outline: #8e8d9c;--color-border-outline-variant: #46464f;--color-surface-primary-container: #403e6a}.jsondraw button.standalone{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw button.standalone svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw button.standalone:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw button.standalone:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw button.standalone.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw button.standalone.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw button.standalone.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw button.standalone{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw button.standalone{padding:0}.jsondraw button.standalone svg{width:var(--default-icon-size);height:var(--default-icon-size)}.jsondraw button.standalone>*{pointer-events:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/css/theme.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\",\"webpack://./src/jsondraw/packages/jsondraw/components/ui/ButtonIcon.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"./variables.module\\\" as *;\\n@forward \\\"./variables.module\\\";\\n\\n.jsondraw {\\n  --theme-filter: none;\\n  --button-destructive-bg-color: #{$color-red-1};\\n  --button-destructive-color: #{$color-red-9};\\n  --button-gray-1: #{$color-gray-2};\\n  --button-gray-2: #{$color-gray-4};\\n  --button-gray-3: #{$color-gray-5};\\n  --mobile-action-button-bg: rgba(255, 255, 255, 0.35);\\n  --mobile-color-border: var(--default-border-color);\\n  --button-special-active-bg-color: #{$color-green-0};\\n  --dialog-border-color: var(--color-gray-20);\\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>');\\n  --focus-highlight-color: #{$color-blue-2};\\n  --icon-fill-color: var(--color-on-surface);\\n  --icon-green-fill-color: #{$color-green-9};\\n  --default-bg-color: #fff;\\n  --input-bg-color: #fff;\\n  --input-border-color: #{$color-gray-4};\\n  --input-hover-bg-color: #{$color-gray-1};\\n  --input-label-color: #{$color-gray-7};\\n  --island-bg-color: #ffffff;\\n  --island-bg-color-alt: #fff;\\n  --keybinding-color: var(--color-gray-40);\\n  --link-color: #{$color-blue-7};\\n  --link-color-hover: #{$color-blue-8};\\n  --link-color-active: #{$color-blue-2};\\n  --overlay-bg-color: #{color.adjust(#fff, $alpha: -0.12)};\\n  --popup-bg-color: var(--island-bg-color);\\n  --popup-secondary-bg-color: #{$color-gray-1};\\n  --popup-text-color: #000;\\n  --popup-text-inverted-color: #fff;\\n  --select-highlight-color: #{$color-blue-5};\\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\\n\\n  --button-hover-bg: var(--color-surface-high);\\n  --button-active-bg: var(--color-surface-high);\\n  --button-active-border: var(--color-brand-active);\\n  --default-border-color: var(--color-surface-high);\\n\\n  --default-button-size: 2rem;\\n  --default-icon-size: 1rem;\\n  --lg-button-size: 2.25rem;\\n  --lg-icon-size: 1rem;\\n  --editor-container-padding: 1rem;\\n  --mobile-action-button-size: 2rem;\\n\\n  --scrollbar-thumb: var(--button-gray-2);\\n  --scrollbar-thumb-hover: var(--button-gray-3);\\n\\n  --color-slider-track: hsl(240, 100%, 90%);\\n  --color-slider-thumb: var(--color-gray-80);\\n\\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n  --avatar-border-color: var(--color-gray-20);\\n  --sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n  --sidebar-border-color: var(--color-surface-high);\\n  --sidebar-bg-color: var(--island-bg-color);\\n  --library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01),\\n    0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09),\\n    0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);\\n  --chat-msg-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\\n\\n  --space-factor: 0.25rem;\\n  --text-primary-color: var(--color-on-surface);\\n\\n  --color-selection: #6965db;\\n\\n  --color-icon-white: #fff;\\n\\n  --color-primary: #6965db;\\n  --color-primary-darker: #5b57d1;\\n  --color-primary-darkest: #4a47b1;\\n  --color-primary-light: #e3e2fe;\\n  --color-primary-light-darker: #d7d5ff;\\n  --color-primary-hover: #5753d0;\\n\\n  --color-gray-10: #f5f5f5;\\n  --color-gray-20: #ebebeb;\\n  --color-gray-30: #d6d6d6;\\n  --color-gray-40: #b8b8b8;\\n  --color-gray-50: #999999;\\n  --color-gray-60: #7a7a7a;\\n  --color-gray-70: #5c5c5c;\\n  --color-gray-80: #3d3d3d;\\n  --color-gray-85: #242424;\\n  --color-gray-90: #1e1e1e;\\n  --color-gray-100: #121212;\\n\\n  --color-disabled: var(--color-gray-40);\\n\\n  --color-warning: #fceeca;\\n  --color-warning-dark: #f5c354;\\n  --color-warning-darker: #f3ab2c;\\n  --color-warning-darkest: #ec8b14;\\n  --color-text-warning: var(--text-primary-color);\\n\\n  --color-danger: #db6965;\\n  --color-danger-dark: #db6965;\\n  --color-danger-darker: #d65550;\\n  --color-danger-darkest: #d1413c;\\n  --color-danger-text: black;\\n\\n  --color-danger-background: #fff0f0;\\n  --color-danger-icon-background: #ffdad6;\\n  --color-danger-color: #700000;\\n  --color-danger-icon-color: #700000;\\n\\n  --color-warning-background: var(--color-warning);\\n  --color-warning-icon-background: var(--color-warning-dark);\\n  --color-warning-color: var(--text-primary-color);\\n  --color-warning-icon-color: var(--text-primary-color);\\n\\n  --color-muted: var(--color-gray-30);\\n  --color-muted-darker: var(--color-gray-60);\\n  --color-muted-darkest: var(--color-gray-100);\\n  --color-muted-background: var(--color-gray-80);\\n  --color-muted-background-darker: var(--color-gray-100);\\n\\n  --color-promo: var(--color-primary);\\n\\n  --color-success: #cafccc;\\n  --color-success-darker: #bafabc;\\n  --color-success-darkest: #a5eba8;\\n  --color-success-text: #268029;\\n  --color-success-contrast: #65bb6a;\\n  --color-success-contrast-hover: #6bcf70;\\n  --color-success-contrast-active: #6edf74;\\n\\n  --color-logo-icon: var(--color-primary);\\n  --color-logo-text: #190064;\\n\\n  --border-radius-md: 0.375rem;\\n  --border-radius-lg: 0.5rem;\\n\\n  --color-surface-high: #f1f0ff;\\n  --color-surface-mid: #f6f6f9;\\n  --color-surface-low: #ececf4;\\n  --color-surface-lowest: #ffffff;\\n  --color-on-surface: #1b1b1f;\\n  --color-brand-hover: #5753d0;\\n  --color-on-primary-container: #030064;\\n  --color-surface-primary-container: #e0dfff;\\n  --color-brand-active: #4440bf;\\n  --color-border-outline: #767680;\\n  --color-border-outline-variant: #c5c5d0;\\n  --color-surface-primary-container: #e0dfff;\\n\\n  --color-badge: #0b6513;\\n  --background-color-badge: #d3ffd2;\\n\\n  @include isMobile {\\n    --editor-container-padding: 0.75rem;\\n  }\\n\\n  @media screen and (min-device-width: 1921px) {\\n    --lg-button-size: 2.5rem;\\n    --lg-icon-size: 1.25rem;\\n    --default-button-size: 2.25rem;\\n    --default-icon-size: 1.25rem;\\n  }\\n\\n  &.theme--dark {\\n    &.theme--dark-background-none {\\n      background: none;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    --theme-filter: invert(93%) hue-rotate(180deg);\\n    --button-destructive-bg-color: #5a0000;\\n    --button-destructive-color: #{$color-red-3};\\n\\n    --button-gray-1: #363636;\\n    --button-gray-2: #272727;\\n    --button-gray-3: #222;\\n    --mobile-action-button-bg: var(--island-bg-color);\\n    --mobile-color-border: rgba(255, 255, 255, 0.85);\\n    --button-special-active-bg-color: #204624;\\n    --dialog-border-color: var(--color-gray-80);\\n    --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path fill=\\\"%23ced4da\\\" d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>');\\n    --focus-highlight-color: #{$color-blue-6};\\n    --icon-green-fill-color: #{$color-green-4};\\n    --default-bg-color: #121212;\\n    --input-bg-color: #121212;\\n    --input-border-color: #2e2e2e;\\n    --input-hover-bg-color: #181818;\\n    --input-label-color: #{$color-gray-2};\\n    --island-bg-color: #232329;\\n    --island-bg-color-alt: hsl(240, 12%, 12%);\\n    --keybinding-color: var(--color-gray-60);\\n    --link-color: #{$color-blue-4};\\n    --overlay-bg-color: #{color.adjust($color-gray-8, $alpha: -0.88)};\\n    --popup-secondary-bg-color: #222;\\n    --popup-text-color: #{$color-gray-4};\\n    --popup-text-inverted-color: #2c2c2c;\\n    --select-highlight-color: #{$color-blue-4};\\n    --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\\n      0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\\n      0px 7px 14px 0px rgba(0, 0, 0, 0.05);\\n\\n    --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n      0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n      0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n      0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n      0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n      0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n    --avatar-border-color: var(--color-gray-85);\\n\\n    --scrollbar-thumb: #{$color-gray-8};\\n    --scrollbar-thumb-hover: #{$color-gray-7};\\n\\n    --color-slider-track: hsl(244, 23%, 39%);\\n\\n    // will be inverted to a lighter color.\\n    --color-selection: #3530c4;\\n\\n    --color-icon-white: var(--color-gray-90);\\n\\n    --color-primary: #a8a5ff;\\n    --color-primary-darker: #b2aeff;\\n    --color-primary-darkest: #beb9ff;\\n    --color-primary-light: #4f4d6f;\\n    --color-primary-light-darker: #43415e;\\n    --color-primary-hover: #bbb8ff;\\n\\n    --color-disabled: var(--color-gray-70);\\n\\n    --color-text-warning: var(--color-gray-80);\\n\\n    --color-danger: #ffa8a5;\\n    --color-danger-dark: #672120;\\n    --color-danger-darker: #8f2625;\\n    --color-danger-darkest: #ac2b29;\\n    --color-danger-text: #fbcbcc;\\n\\n    --color-danger-background: #fbcbcc;\\n    --color-danger-icon-background: #672120;\\n    --color-danger-color: #261919;\\n    --color-danger-icon-color: #fbcbcc;\\n\\n    --color-warning-background: var(--color-warning);\\n    --color-warning-icon-background: var(--color-warning-dark);\\n    --color-warning-color: var(--color-gray-80);\\n    --color-warning-icon-color: var(--color-gray-80);\\n\\n    --color-muted: var(--color-gray-80);\\n    --color-muted-darker: var(--color-gray-60);\\n    --color-muted-darkest: var(--color-gray-20);\\n    --color-muted-background: var(--color-gray-40);\\n    --color-muted-background-darker: var(--color-gray-20);\\n\\n    --color-logo-text: #e2dfff;\\n\\n    --color-surface-high: #2e2d39;\\n    --color-surface-low: hsl(240, 8%, 15%);\\n    --color-surface-mid: hsl(240 6% 10%);\\n    --color-surface-lowest: hsl(0, 0%, 7%);\\n    --color-on-surface: #e3e3e8;\\n    --color-brand-hover: #bbb8ff;\\n    --color-on-primary-container: #e0dfff;\\n    --color-surface-primary-container: #403e6a;\\n    --color-brand-active: #d0ccff;\\n    --color-border-outline: #8e8d9c;\\n    --color-border-outline-variant: #46464f;\\n    --color-surface-primary-container: #403e6a;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\",\"@use \\\"../../css/theme\\\" as *;\\n\\n.jsondraw {\\n  button.standalone {\\n    @include outlineButtonIconStyles;\\n\\n    & > * {\\n      // dissalow pointer events on children, so we always have event.target on the button itself\\n      pointer-events: none;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .sidebar{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;right:0;z-index:var(--zIndex-ui-library);margin:0;padding:0;box-sizing:border-box;background-color:var(--sidebar-bg-color);box-shadow:var(--sidebar-shadow);pointer-events:var(--ui-pointerEvents);overflow:hidden;border-radius:0;width:calc(var(--right-sidebar-width) - var(--space-factor)*2);border-left:1px solid var(--sidebar-border-color)}:root[dir=rtl] .jsondraw .sidebar{left:0;right:auto}.jsondraw .sidebar--docked{box-shadow:none}:root[dir=rtl] .jsondraw .sidebar{border-right:1px solid var(--sidebar-border-color);border-left:0}.jsondraw .sidebar__header{box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;width:100%;padding:1rem .75rem;position:relative}.jsondraw .sidebar__header::after{content:\"\";width:calc(100% - 1.5rem);height:1px;background:var(--sidebar-border-color);position:absolute;bottom:-1px}.jsondraw .sidebar__header__buttons{gap:0;display:flex;align-items:center;margin-left:auto}.jsondraw .sidebar__header__buttons button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .sidebar__header__buttons button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .sidebar__header__buttons button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .sidebar__header__buttons button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .sidebar__header__buttons button.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .sidebar__header__buttons button.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .sidebar__header__buttons button.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .sidebar__header__buttons button{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw .sidebar__header__buttons button{--button-bg: transparent;border:0 !important;width:var(--lg-button-size);height:var(--lg-button-size);padding:0}.jsondraw .sidebar__header__buttons button svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.jsondraw .sidebar__header__buttons button:hover{background:var(--button-hover-bg, var(--island-bg-color))}.jsondraw .sidebar__header__buttons .sidebar__dock.selected svg{stroke:var(--color-primary);fill:var(--color-primary)}.jsondraw .sidebar-tabs-root{display:flex;flex-direction:column;flex:1 1 auto;padding:1rem 0}.jsondraw .sidebar-tabs-root [role=tabpanel]{flex:1;outline:none;flex:1 1 auto;display:flex;flex-direction:column;outline:none}.jsondraw .sidebar-tabs-root [role=tabpanel][data-state=inactive]{display:none !important}.jsondraw .sidebar-tabs-root [role=tablist]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit, minmax(0, 1fr))}.jsondraw .sidebar-tabs-root>.sidebar__header{padding-top:0;padding-bottom:1rem}.jsondraw .sidebar-tab-trigger{--button-width: auto;--button-bg: transparent;--button-hover-bg: transparent;--button-active-bg: var(--color-primary);--button-hover-color: var(--color-primary);--button-hover-border: var(--color-primary)}.jsondraw .sidebar-tab-trigger[data-state=active]{--button-bg: var(--color-primary);--button-hover-bg: var(--color-primary-darker);--button-hover-color: var(--color-icon-white);--button-border: var(--color-primary);color:var(--color-icon-white)}.jsondraw .default-sidebar{display:flex;flex-direction:column}.jsondraw .default-sidebar .sidebar-triggers{display:flex;gap:0;padding:2px;margin-top:-3px;margin-bottom:-3px;border:1px solid var(--sidebar-border-color);background:var(--default-bg-color);border-radius:.625rem}.jsondraw .default-sidebar .sidebar-triggers .sidebar-tab-trigger{height:var(--lg-button-size);width:var(--lg-button-size);border:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/Sidebar/Sidebar.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,mBACE,YAAA,CACA,qBAAA,CACA,iBAAA,CACA,KAAA,CACA,QAAA,CACA,OAAA,CACA,gCAAA,CACA,QAAA,CACA,SAAA,CACA,qBAAA,CAEA,wCAAA,CACA,gCAAA,CAEA,sCAAA,CAEA,eAAA,CACA,eAAA,CACA,8DAAA,CAEA,iDAAA,CAEA,kCACE,MAAA,CACA,UAAA,CAGF,2BACE,eAAA,CAGF,kCACE,kDAAA,CACA,aAAA,CAMJ,2BACE,qBAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,UAAA,CACA,mBAAA,CACA,iBAAA,CAEA,kCACE,UAAA,CACA,yBAAA,CACA,UAAA,CACA,sCAAA,CACA,iBAAA,CACA,WAAA,CAIJ,oCACE,KAAA,CACA,YAAA,CACA,kBAAA,CACA,gBAAA,CAEA,2CCoBF,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,qDAAA,CACA,uDAAA,CACA,qBAAA,CACA,gBAAA,CACA,kBAAA,CACA,8DAAA,CACA,qCAAA,CACA,cAAA,CACA,yDAAA,CACA,kDAAA,CACA,0BAAA,CAEA,+CACE,8CAAA,CACA,gDAAA,CAGF,iDACE,+DAAA,CACA,0FAAA,CAIA,wFAAA,CAMF,kDACE,gEAAA,CACA,sEAAA,CAGF,kDACE,kFAAA,CAIA,kFAAA,CAKA,wDACE,wFAAA,CAMF,sDACE,4DAAA,CAtHK,4DA2HP,kEAAA,CACA,mEAAA,CDlFA,2CAEE,wBAAA,CACA,mBAAA,CAEA,2BAAA,CACA,4BAAA,CACA,SAAA,CAEA,+CACE,yBAAA,CACA,0BAAA,CAGF,iDACE,yDAAA,CAKF,gEACE,2BAAA,CACA,yBAAA,CAON,6BACE,YAAA,CACA,qBAAA,CACA,aAAA,CACA,cAAA,CAEA,6CACE,MAAA,CACA,YAAA,CAEA,aAAA,CACA,YAAA,CACA,qBAAA,CACA,YAAA,CAGF,kEACE,uBAAA,CAGF,4CACE,YAAA,CACA,QAAA,CACA,sDAAA,CAIJ,8CACE,aAAA,CACA,mBAAA,CAGF,+BACE,oBAAA,CACA,wBAAA,CACA,8BAAA,CACA,wCAAA,CACA,0CAAA,CACA,2CAAA,CAEA,kDACE,iCAAA,CACA,8CAAA,CACA,6CAAA,CACA,qCAAA,CACA,6BAAA,CAMJ,2BACE,YAAA,CACA,qBAAA,CAEA,6CAGE,YAAA,CACA,KAAA,CACA,WAJU,CAOV,eAAA,CACA,kBAAA,CACA,4CAAA,CACA,kCAAA,CACA,qBAAA,CAEA,kEACE,4BAAA,CACA,2BAAA,CAEA,WAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .sidebar {\\n    display: flex;\\n    flex-direction: column;\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    right: 0;\\n    z-index: var(--zIndex-ui-library);\\n    margin: 0;\\n    padding: 0;\\n    box-sizing: border-box;\\n\\n    background-color: var(--sidebar-bg-color);\\n    box-shadow: var(--sidebar-shadow);\\n\\n    pointer-events: var(--ui-pointerEvents);\\n\\n    overflow: hidden;\\n    border-radius: 0;\\n    width: calc(var(--right-sidebar-width) - var(--space-factor) * 2);\\n\\n    border-left: 1px solid var(--sidebar-border-color);\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      left: 0;\\n      right: auto;\\n    }\\n\\n    &--docked {\\n      box-shadow: none;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      border-right: 1px solid var(--sidebar-border-color);\\n      border-left: 0;\\n    }\\n  }\\n\\n  // ---------------------------- sidebar header ------------------------------\\n\\n  .sidebar__header {\\n    box-sizing: border-box;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    width: 100%;\\n    padding: 1rem 0.75rem;\\n    position: relative;\\n\\n    &::after {\\n      content: \\\"\\\";\\n      width: calc(100% - 1.5rem);\\n      height: 1px;\\n      background: var(--sidebar-border-color);\\n      position: absolute;\\n      bottom: -1px;\\n    }\\n  }\\n\\n  .sidebar__header__buttons {\\n    gap: 0;\\n    display: flex;\\n    align-items: center;\\n    margin-left: auto;\\n\\n    button {\\n      @include outlineButtonStyles;\\n      --button-bg: transparent;\\n      border: 0 !important;\\n\\n      width: var(--lg-button-size);\\n      height: var(--lg-button-size);\\n      padding: 0;\\n\\n      svg {\\n        width: var(--lg-icon-size);\\n        height: var(--lg-icon-size);\\n      }\\n\\n      &:hover {\\n        background: var(--button-hover-bg, var(--island-bg-color));\\n      }\\n    }\\n\\n    .sidebar__dock.selected {\\n      svg {\\n        stroke: var(--color-primary);\\n        fill: var(--color-primary);\\n      }\\n    }\\n  }\\n\\n  // ---------------------------- sidebar tabs ------------------------------\\n\\n  .sidebar-tabs-root {\\n    display: flex;\\n    flex-direction: column;\\n    flex: 1 1 auto;\\n    padding: 1rem 0;\\n\\n    [role=\\\"tabpanel\\\"] {\\n      flex: 1;\\n      outline: none;\\n\\n      flex: 1 1 auto;\\n      display: flex;\\n      flex-direction: column;\\n      outline: none;\\n    }\\n\\n    [role=\\\"tabpanel\\\"][data-state=\\\"inactive\\\"] {\\n      display: none !important;\\n    }\\n\\n    [role=\\\"tablist\\\"] {\\n      display: grid;\\n      gap: 1rem;\\n      grid-template-columns: repeat(auto-fit, minmax(0, 1fr));\\n    }\\n  }\\n\\n  .sidebar-tabs-root > .sidebar__header {\\n    padding-top: 0;\\n    padding-bottom: 1rem;\\n  }\\n\\n  .sidebar-tab-trigger {\\n    --button-width: auto;\\n    --button-bg: transparent;\\n    --button-hover-bg: transparent;\\n    --button-active-bg: var(--color-primary);\\n    --button-hover-color: var(--color-primary);\\n    --button-hover-border: var(--color-primary);\\n\\n    &[data-state=\\\"active\\\"] {\\n      --button-bg: var(--color-primary);\\n      --button-hover-bg: var(--color-primary-darker);\\n      --button-hover-color: var(--color-icon-white);\\n      --button-border: var(--color-primary);\\n      color: var(--color-icon-white);\\n    }\\n  }\\n\\n  // ---------------------------- default sidebar ------------------------------\\n\\n  .default-sidebar {\\n    display: flex;\\n    flex-direction: column;\\n\\n    .sidebar-triggers {\\n      $padding: 2px;\\n      $border: 1px;\\n      display: flex;\\n      gap: 0;\\n      padding: $padding;\\n      // offset by padding + border to vertically center the list with sibling\\n      // buttons (both from top and bototm, due to flex layout)\\n      margin-top: -#{$padding + $border};\\n      margin-bottom: -#{$padding + $border};\\n      border: $border solid var(--sidebar-border-color);\\n      background: var(--default-bg-color);\\n      border-radius: 0.625rem;\\n\\n      .sidebar-tab-trigger {\\n        height: var(--lg-button-size);\\n        width: var(--lg-button-size);\\n\\n        border: none;\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw.theme--dark .chat-message--assistant .chat-message__content{background:var(--color-surface-lowest)}.jsondraw.theme--dark .chat-message--system .chat-message__content{color:var(--color-surface-low)}.jsondraw .chat-interface{display:flex;flex-direction:column;height:100%;min-height:0;position:relative}@media screen and (max-width: 861px){.jsondraw .chat-interface{min-height:200px}}.jsondraw .chat-interface__messages{flex:1 1 0;overflow-y:auto;margin-bottom:.5rem;padding:1rem .5rem 0 .5rem;display:flex;flex-direction:column;gap:2rem;min-height:0;border-top-left-radius:var(--border-radius-lg);border-top-right-radius:var(--border-radius-lg)}@media screen and (max-width: 861px){.jsondraw .chat-interface__messages{min-height:100px;padding:.75rem}}.jsondraw .chat-interface__welcome-screen{display:flex;align-items:center;justify-content:center;height:100%;min-height:200px}.jsondraw .chat-interface__welcome-screen__welcome-message{text-align:center}.jsondraw .chat-interface__welcome-screen__welcome-message h3{margin:0 0 .5rem 0;font-size:1.25rem;font-weight:600}.jsondraw .chat-interface__welcome-screen__welcome-message p{margin:0 0 .2rem 0;font-size:.875rem;color:var(--color-on-surface)}@media screen and (max-width: 861px){.jsondraw .chat-interface__welcome-screen{min-height:100px}}.jsondraw .chat-interface__input-outer{position:relative;min-height:71px}.jsondraw .chat-interface__input-container{display:flex;flex-direction:column;justify-content:flex-end}.jsondraw .chat-interface__input-wrapper{position:absolute;bottom:0;left:0;right:0;display:flex;align-items:flex-end;gap:.5rem;border:1px solid var(--dialog-border-color);border-radius:var(--border-radius-lg);padding:.75rem;background:var(--color-surface-lowest);transition:border-color .2s ease}.jsondraw .chat-interface__input-wrapper:focus-within{border-color:var(--color-primary)}@media screen and (max-width: 861px){.jsondraw .chat-interface__input-wrapper{padding:.5rem .75rem}}.jsondraw .chat-interface__input{flex:1;border:none;outline:none;font-size:.875rem;line-height:1.5;min-height:24px;max-height:120px;overflow-x:hidden;border:none !important;background:rgba(0,0,0,0) !important;color:var(--color-on-surface)}.jsondraw .chat-interface__input::placeholder{color:var(--color-gray-40)}@media screen and (max-width: 861px){.jsondraw .chat-interface__input{line-height:1.4;min-height:20px;max-height:100px;resize:none;padding:0}.jsondraw .chat-interface__input::placeholder{opacity:.6}}.jsondraw .chat-interface__send-button{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;border-radius:50%;background:var(--color-primary);color:var(--color-surface-lowest);cursor:pointer;margin-bottom:8px}.jsondraw .chat-interface__send-button:disabled{opacity:.5;cursor:not-allowed;transform:none}.jsondraw .chat-interface__send-button:hover{background-color:var(--color-primary-darker)}.jsondraw .chat-interface__send-button svg{transform:rotate(-90deg)}.jsondraw .chat-message{display:flex;align-items:center;gap:.5rem}.jsondraw .chat-message--user{justify-content:flex-end}.jsondraw .chat-message--user .chat-message__content{background:var(--color-primary-light);color:var(--text-primary-color);border-radius:var(--border-radius-md);min-width:6rem}.jsondraw .chat-message--assistant{flex-direction:column;justify-content:flex-start;align-items:flex-start}.jsondraw .chat-message--assistant .chat-message__content{background:var(--color-surface-low);color:var(--color-on-surface);border-radius:var(--border-radius-md);min-width:6rem}.jsondraw .chat-message--assistant .chat-message__content .chat-message__body{font-family:monospace}.jsondraw .chat-message--system{justify-content:flex-start;margin-bottom:0}.jsondraw .chat-message--system .chat-message__content{background:var(--color-warning);color:var(--color-on-surface);border-radius:var(--border-radius-md);min-width:6rem}.jsondraw .chat-message--system .chat-message__content .chat-message__body{font-family:monospace}.jsondraw .chat-message__content{max-width:80%;padding:.75rem 1rem;box-shadow:var(--chat-msg-shadow)}.jsondraw .chat-message__header{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:.5rem;font-size:.75rem}.jsondraw .chat-message__role{font-weight:600}.jsondraw .chat-message__timestamp{font-size:.625rem}.jsondraw .chat-message__actions{display:flex;align-items:center;gap:.5rem}.jsondraw .chat-message__action{display:inline-flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer;padding:.25rem 0;color:var(--color-gray-60);transition:color .2s ease;flex-shrink:0}.jsondraw .chat-message__action.invisible{visibility:hidden;pointer-events:none}.jsondraw .chat-message__action:hover{color:var(--color-primary)}.jsondraw .chat-message__action svg{width:14px;height:14px}.jsondraw .chat-message__action--danger:hover{color:var(--color-danger)}.jsondraw .chat-message__body{line-height:1.5}.jsondraw .chat-message__text{white-space:pre-wrap;word-wrap:break-word}.jsondraw .chat-message__cursor{display:inline-block;margin-left:2px;color:currentColor;animation:blink 1s infinite}.jsondraw .chat-message__loading{display:flex;align-items:center;gap:.5rem}.jsondraw .chat-message__typing-indicator{display:flex;gap:.25rem}.jsondraw .chat-message__typing-indicator span{width:6px;height:6px;border-radius:50%;background:currentColor;opacity:.4;animation:typing 1.4s infinite ease-in-out}.jsondraw .chat-message__typing-indicator span:nth-child(1){animation-delay:-0.32s}.jsondraw .chat-message__typing-indicator span:nth-child(2){animation-delay:-0.16s}.jsondraw .chat-message__typing-indicator span:nth-child(3){animation-delay:0s}.jsondraw .chat-message__error{color:var(--color-danger);font-weight:500;white-space:pre-wrap;word-wrap:break-word;display:flex;flex-direction:column;gap:.5rem}.jsondraw .chat-message__error_message{background:var(--color-warning-background);color:var(--color-warning-color);padding:.5rem .75rem;border-radius:var(--border-radius-md);margin-top:1rem;font-size:.875rem}.jsondraw .chat-message__error-link{display:flex;align-items:center;background:none;border:none;cursor:pointer;font-size:.875rem;font-weight:500;padding:0;margin-top:1rem;text-decoration:underline;font-family:inherit;color:var(--link-color)}.jsondraw .chat-message__error-link:hover{color:var(--link-color-hover)}.jsondraw .chat-message__error-link:active{color:var(--link-color-active)}.jsondraw .chat-message__error-link:disabled{cursor:not-allowed;text-decoration:none}@keyframes typing{0%,80%,100%{transform:scale(0.8);opacity:.4}40%{transform:scale(1);opacity:1}}@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}.jsondraw .Modal.Dialog.ttd-dialog{padding:1.25rem}.jsondraw .Modal.Dialog.ttd-dialog.Dialog--fullscreen{margin-top:0}.jsondraw .Modal.Dialog.ttd-dialog .Island{padding-inline:0 !important;height:100%;display:flex;flex-direction:column;flex:1 1 auto}.jsondraw .Modal.Dialog.ttd-dialog .Modal__content{max-height:100%;min-height:95vh;height:100%}@media screen and (min-width: 861px){.jsondraw .Modal.Dialog.ttd-dialog .Modal__content{max-height:min(950px,100vh - 4rem);height:100%;min-height:unset}}.jsondraw .Modal.Dialog.ttd-dialog .Dialog__content{flex:1 1 auto}@media screen and (max-width: 861px){.jsondraw .Modal.Dialog.ttd-dialog .Dialog__content{margin-top:0 !important}}.jsondraw .ttd-dialog-desc{font-size:15px;font-style:italic;font-weight:500;margin:.5rem 0 1.5rem 0}.jsondraw .ttd-dialog-tabs-root{width:100%;height:100%;display:flex;flex-direction:column}.jsondraw .ttd-dialog-tab-trigger{color:var(--color-on-surface);font-size:.875rem;margin:0;padding:0 1rem;background-color:rgba(0,0,0,0);border:0;height:2.875rem;font-weight:600;font-family:inherit;letter-spacing:.4px}.jsondraw .ttd-dialog-tab-trigger[data-state=active]{border-bottom:2px solid var(--color-primary)}.jsondraw .ttd-dialog-tab-trigger__content{display:flex;align-items:center}.jsondraw .ttd-dialog-tab-trigger__badge{display:flex;align-items:center;justify-content:center;padding:1px 6px;margin-left:10px;font-size:10px;border-radius:12px;background:var(--color-promo);color:var(--color-surface-lowest)}.jsondraw .ttd-dialog-triggers{border-bottom:1px solid var(--color-surface-high);margin-bottom:1rem;padding-inline:2.5rem}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-triggers{margin-bottom:1rem}}.jsondraw .ttd-dialog-content{padding-inline:2.5rem;height:100%;display:flex;flex-direction:column;overflow:visible;outline:none}.jsondraw .ttd-dialog-content[hidden]{display:none}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-content{padding-inline:1rem;flex-grow:1}}.jsondraw .ttd-dialog-panel__header .dropdown-menu{z-index:2;margin:0;right:0;left:auto;min-width:280px}.jsondraw .ttd-dialog-panel__header .dropdown-menu .dropdown-menu-container.dropdown-menu-container{padding-inline:.5rem !important;padding-top:.5rem;padding-bottom:.5rem;max-height:min(400px,70vh);height:fit-content;overflow-y:auto;box-shadow:var(--shadow-island);border-radius:var(--border-radius-lg);background-color:var(--island-bg-color-alt)}.jsondraw .ttd-dialog-layout{display:grid;grid-template-columns:1fr 1fr;height:100%}.jsondraw .ttd-dialog-layout--split{gap:2rem;min-width:0}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-layout--split{grid-template-columns:1fr;grid-template-rows:1fr auto;grid-row-gap:0}}.jsondraw .ttd-dialog-layout--split .ttd-dialog-chat-panel{min-width:0}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-layout--split .ttd-dialog-chat-panel{width:100%;flex:0 0 auto;height:auto;min-height:250px}}.jsondraw .ttd-dialog-layout--split .ttd-dialog-preview-panel{min-width:0;overflow:hidden}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-layout--split .ttd-dialog-preview-panel{width:100%;flex:0 0 auto;max-width:100%;min-height:280px;height:unset}}.jsondraw .ttd-dialog-layout--chat-only{grid-template-columns:1fr}.jsondraw .ttd-dialog-layout--chat-only .invisible{display:none}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-layout--chat-only .ttd-dialog-chat-panel{height:unset}}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-layout--chat-only .chat-interface{max-height:100%}.jsondraw .ttd-dialog-layout--chat-only .chat-interface__messages{max-height:unset}}.jsondraw .ttd-dialog-input{width:auto;height:10rem;resize:none;border-radius:var(--border-radius-lg);border:1px solid var(--dialog-border-color);white-space:pre-wrap;padding:.85rem;box-sizing:border-box;font-family:monospace}@media screen and (min-width: 861px){.jsondraw .ttd-dialog-input{width:100%;height:100%}}.jsondraw .ttd-dialog-output-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;flex-grow:1;position:relative;overflow:hidden;max-width:100%;max-height:100%;background:url(${___CSS_LOADER_URL_REPLACEMENT_0___}) left center;border-radius:var(--border-radius-lg);border:1px solid var(--dialog-border-color);height:400px;width:auto;max-width:100%}@media screen and (max-width: 600px){.jsondraw .ttd-dialog-output-wrapper{height:200px}}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-output-wrapper{width:100%;max-width:100%}}.jsondraw .ttd-dialog-output-wrapper--error{background:none;border:1px solid var(--dialog-border-color);border-radius:var(--border-radius-lg)}.jsondraw .ttd-dialog-output-wrapper canvas{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain}.jsondraw .ttd-dialog-output-canvas-container{display:flex;width:100%;height:100%;align-items:center;justify-content:center;flex-grow:1;position:relative;user-select:none}.jsondraw .ttd-dialog-output-canvas-container.invisible{visibility:hidden;pointer-events:none}.jsondraw .ttd-dialog-output-canvas-content{display:flex;width:100%;height:100%;align-items:center;justify-content:center;flex-grow:1}.jsondraw .ttd-dialog-output-canvas-content canvas{image-rendering:auto}.jsondraw .ttd-dialog-output-error{position:absolute;z-index:10;display:flex;align-items:center;justify-content:center;padding:2rem}.jsondraw .ttd-dialog-output-error .ttd-dialog-output-error-content{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2.5rem 2rem;background:var(--color-surface-primary)}.jsondraw .ttd-dialog-output-error .ttd-dialog-output-error-icon{color:var(--color-danger);display:flex;align-items:center;justify-content:center}.jsondraw .ttd-dialog-output-error .ttd-dialog-output-error-icon svg{width:52px;height:52px;stroke-width:1.5}.jsondraw .ttd-dialog-output-error .ttd-dialog-output-error-title{font-size:1.25rem;font-weight:600;color:var(--color-danger);text-align:center;margin-top:.25rem}.jsondraw .ttd-dialog-output-error .ttd-dialog-output-error-message{text-align:left;font-weight:400;color:var(--color-gray-50);word-break:break-word;white-space:pre-wrap;max-width:100%;font-family:monospace}.jsondraw .ttd-dialog-panels{height:100%}@media screen and (min-width: 861px){.jsondraw .ttd-dialog-panels{display:grid;grid-template-columns:1fr 1fr;gap:2rem}}.jsondraw .ttd-dialog-chat-panel,.jsondraw .ttd-dialog-preview-panel{display:flex;flex-direction:column;width:100%;height:100%;min-width:0;align-items:stretch}.jsondraw .ttd-dialog-panel{display:flex;flex-direction:column;width:100%;height:100%}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-panel{height:50%}}.jsondraw .ttd-dialog-panel__header{display:flex;align-items:center;gap:.3rem;height:36px;margin-top:.2rem;margin-bottom:.5rem;flex-shrink:0}.jsondraw .ttd-dialog-panel__header label{font-size:14px;line-height:22px;font-style:normal;font-weight:600}.jsondraw .ttd-dialog-panel__label-wrapper{display:flex;justify-content:space-between;align-items:center;width:100%}.jsondraw .ttd-dialog-panel__label-group{display:flex;gap:5px}.jsondraw .ttd-dialog-panel__header-right{display:flex;align-items:center;gap:.75rem}.jsondraw .ttd-dialog-panel__rate-limit{font-size:.75rem;font-weight:500;white-space:nowrap}.jsondraw .ttd-dialog-panel__rate-limit--danger{color:var(--color-danger)}.jsondraw .ttd-dialog-panel__menu-wrapper{position:relative}.jsondraw .ttd-dialog-panel__menu-wrapper .ttd-dialog-menu-trigger{height:40px;width:40px}.jsondraw .ttd-dialog-panel__menu-wrapper .dropdown-menu{margin-top:.375rem;right:0}.jsondraw .ttd-dialog-panel textarea{height:100%;resize:none;border-radius:var(--border-radius-lg);border:1px solid var(--dialog-border-color);white-space:pre-wrap;padding:.85rem;box-sizing:border-box;width:100%;font-family:monospace}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-panel textarea{width:auto}}.jsondraw .ttd-dialog-panel-button-container{display:flex;align-items:center;flex-grow:0;height:40px;flex-shrink:0;margin-top:1rem;margin-bottom:.5rem}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-panel-button-container{margin-top:.5rem}}.jsondraw .ttd-dialog-panel-button-container.invisible{visibility:hidden}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-panel-button-container.invisible{display:none}}.jsondraw .ttd-dialog-panel-button.jsondraw-button{font-family:inherit;font-weight:600;height:2.5rem;font-size:12px;color:#fff;background-color:var(--color-primary);width:100%}.jsondraw .ttd-dialog-panel-button.jsondraw-button:hover{background-color:var(--color-primary-darker)}.jsondraw .ttd-dialog-panel-button.jsondraw-button:active{background-color:var(--color-primary-darkest)}.jsondraw .ttd-dialog-panel-button.jsondraw-button:disabled{opacity:.5;cursor:not-allowed}.jsondraw .ttd-dialog-panel-button.jsondraw-button:disabled:hover{background-color:var(--color-primary)}@media screen and (min-width: 861px){.jsondraw .ttd-dialog-panel-button.jsondraw-button{width:auto;min-width:7.5rem}}.jsondraw.theme--dark.jsondraw .ttd-dialog-panel-button.jsondraw-button{color:var(--color-gray-100)}.jsondraw .ttd-dialog-panel-button{position:relative}.jsondraw .ttd-dialog-panel-button div{display:contents}.jsondraw .ttd-dialog-panel-button div.invisible{visibility:hidden}.jsondraw .ttd-dialog-panel-button div.Spinner{display:flex !important;position:absolute;inset:0;--spinner-color: white}.jsondraw.theme--dark.jsondraw .ttd-dialog-panel-button div.Spinner{--spinner-color: var(--color-gray-100)}.jsondraw .ttd-dialog-panel-button div span{padding-left:.5rem;display:flex}.jsondraw .ttd-dialog-submit-shortcut{margin-inline-start:.5rem;font-size:.625rem;opacity:.6;display:flex;gap:.125rem}.jsondraw .ttd-dialog-submit-shortcut__key{border:1px solid gray;padding:2px 3px;border-radius:4px}.jsondraw .ttd-dialog-panel-action-link{display:flex;align-items:center;gap:.25rem;background:none;border:none;color:var(--color-primary);font-weight:500;font-family:inherit;height:40px}.jsondraw .ttd-dialog-panel-action-link__icon{display:inline-flex;align-items:center}.jsondraw .ttd-dialog-panel-action-link__icon svg{width:12px;height:12px}@media screen and (max-width: 861px){.jsondraw .ttd-dialog-panel-action-link{height:unset}}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item{display:flex;width:unset;align-items:center;justify-content:space-between;padding:.25rem .5rem;cursor:pointer;position:relative;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-md);margin-top:1px}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item:hover{background-color:var(--button-hover-bg)}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item:active{border:1px solid var(--button-active-border)}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item--active{background-color:var(--color-surface-primary-container)}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item .ttd-chat-menu-item__title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item:hover .ttd-chat-menu-item__delete{visibility:visible}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item .ttd-chat-menu-item__delete{border:none;padding:.25rem;cursor:pointer;flex-shrink:0;margin-left:.5rem;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0);visibility:hidden}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item .ttd-chat-menu-item__delete:hover{color:var(--color-danger)}.jsondraw.theme--dark.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item .ttd-chat-menu-item__delete svg{color:var(--color-on-surface)}.jsondraw.theme--dark.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item .ttd-chat-menu-item__delete:hover svg{color:var(--color-danger)}.jsondraw .dropdown-menu-item-custom.ttd-chat-menu-item .ttd-chat-menu-item__delete svg{width:16px;height:16px}.jsondraw .ttd-dialog-preview-panel--hidden{display:none}.jsondraw .ttd-chat-history-menu{display:flex;gap:1rem;align-items:center}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/TTDDialog/Chat/Chat.scss\",\"webpack://./src/jsondraw/packages/jsondraw/components/TTDDialog/TTDDialog.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@use \\\"../../../css/variables.module.scss\\\" as *;\\n\\n$verticalBreakpoint: 861px;\\n\\n.jsondraw {\\n  &.theme--dark {\\n    .chat-message {\\n      &--assistant {\\n        .chat-message__content {\\n          background: var(--color-surface-lowest);\\n        }\\n      }\\n\\n      &--system {\\n        .chat-message__content {\\n          color: var(--color-surface-low);\\n        }\\n      }\\n    }\\n  }\\n\\n  .chat-interface {\\n    display: flex;\\n    flex-direction: column;\\n    height: 100%;\\n    min-height: 0;\\n    position: relative;\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      min-height: 200px;\\n    }\\n\\n    &__messages {\\n      flex: 1 1 0;\\n      overflow-y: auto;\\n      margin-bottom: 0.5rem;\\n      padding: 1rem 0.5rem 0 0.5rem;\\n      display: flex;\\n      flex-direction: column;\\n      gap: 2rem;\\n      min-height: 0;\\n      border-top-left-radius: var(--border-radius-lg);\\n      border-top-right-radius: var(--border-radius-lg);\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        min-height: 100px;\\n        padding: 0.75rem;\\n      }\\n    }\\n\\n    &__welcome-screen {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      height: 100%;\\n      min-height: 200px;\\n\\n      &__welcome-message {\\n        text-align: center;\\n\\n        h3 {\\n          margin: 0 0 0.5rem 0;\\n          font-size: 1.25rem;\\n          font-weight: 600;\\n        }\\n\\n        p {\\n          margin: 0 0 0.2rem 0;\\n          font-size: 0.875rem;\\n          color: var(--color-on-surface);\\n        }\\n      }\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        min-height: 100px;\\n      }\\n    }\\n\\n    &__input-outer {\\n      position: relative;\\n      min-height: 71px;\\n    }\\n\\n    &__input-container {\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: flex-end;\\n    }\\n\\n    &__input-wrapper {\\n      position: absolute;\\n      bottom: 0;\\n      left: 0;\\n      right: 0;\\n\\n      display: flex;\\n      align-items: flex-end;\\n      gap: 0.5rem;\\n\\n      border: 1px solid var(--dialog-border-color);\\n      border-radius: var(--border-radius-lg);\\n\\n      padding: 0.75rem;\\n      background: var(--color-surface-lowest);\\n      transition: border-color 0.2s ease;\\n\\n      &:focus-within {\\n        border-color: var(--color-primary);\\n      }\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        padding: 0.5rem 0.75rem;\\n      }\\n    }\\n\\n    &__input {\\n      flex: 1;\\n      border: none;\\n      outline: none;\\n      font-size: 0.875rem;\\n      line-height: 1.5;\\n      min-height: 24px;\\n      max-height: 120px;\\n      overflow-x: hidden;\\n      border: none !important;\\n      background: transparent !important;\\n      color: var(--color-on-surface);\\n\\n      &::placeholder {\\n        color: var(--color-gray-40);\\n      }\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        line-height: 1.4;\\n        min-height: 20px;\\n        max-height: 100px;\\n        resize: none;\\n        padding: 0;\\n\\n        &::placeholder {\\n          opacity: 0.6;\\n        }\\n      }\\n    }\\n\\n    &__send-button {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      width: 32px;\\n      height: 32px;\\n      border: none;\\n      border-radius: 50%;\\n      background: var(--color-primary);\\n      color: var(--color-surface-lowest);\\n      cursor: pointer;\\n      margin-bottom: 8px;\\n\\n      &:disabled {\\n        opacity: 0.5;\\n        cursor: not-allowed;\\n        transform: none;\\n      }\\n\\n      &:hover {\\n        background-color: var(--color-primary-darker);\\n      }\\n\\n      svg {\\n        transform: rotate(-90deg);\\n      }\\n    }\\n  }\\n\\n  .chat-message {\\n    display: flex;\\n    align-items: center;\\n    gap: 0.5rem;\\n\\n    &--user {\\n      justify-content: flex-end;\\n\\n      .chat-message__content {\\n        background: var(--color-primary-light);\\n        color: var(--text-primary-color);\\n        border-radius: var(--border-radius-md);\\n        min-width: 6rem;\\n      }\\n    }\\n\\n    &--assistant {\\n      flex-direction: column;\\n      justify-content: flex-start;\\n      align-items: flex-start;\\n\\n      .chat-message__content {\\n        background: var(--color-surface-low);\\n        color: var(--color-on-surface);\\n        border-radius: var(--border-radius-md);\\n        min-width: 6rem;\\n\\n        .chat-message__body {\\n          font-family: monospace;\\n        }\\n      }\\n    }\\n\\n    &--system {\\n      justify-content: flex-start;\\n      margin-bottom: 0;\\n\\n      .chat-message__content {\\n        background: var(--color-warning);\\n        color: var(--color-on-surface);\\n        border-radius: var(--border-radius-md);\\n        min-width: 6rem;\\n\\n        .chat-message__body {\\n          font-family: monospace;\\n        }\\n      }\\n    }\\n\\n    &__content {\\n      max-width: 80%;\\n      padding: 0.75rem 1rem;\\n      box-shadow: var(--chat-msg-shadow);\\n    }\\n\\n    &__header {\\n      display: flex;\\n      justify-content: space-between;\\n      align-items: center;\\n      gap: 1rem;\\n      margin-bottom: 0.5rem;\\n      font-size: 0.75rem;\\n    }\\n\\n    &__role {\\n      font-weight: 600;\\n    }\\n\\n    &__timestamp {\\n      font-size: 0.625rem;\\n    }\\n\\n    &__actions {\\n      display: flex;\\n      align-items: center;\\n      gap: 0.5rem;\\n    }\\n\\n    &__action {\\n      display: inline-flex;\\n      align-items: center;\\n      justify-content: center;\\n      background: none;\\n      border: none;\\n      cursor: pointer;\\n      padding: 0.25rem 0;\\n      color: var(--color-gray-60);\\n      transition: color 0.2s ease;\\n      flex-shrink: 0;\\n\\n      &.invisible {\\n        visibility: hidden;\\n        pointer-events: none;\\n      }\\n\\n      &:hover {\\n        color: var(--color-primary);\\n      }\\n\\n      svg {\\n        width: 14px;\\n        height: 14px;\\n      }\\n    }\\n\\n    &__action--danger {\\n      &:hover {\\n        color: var(--color-danger);\\n      }\\n    }\\n\\n    &__body {\\n      line-height: 1.5;\\n    }\\n\\n    &__text {\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n    }\\n\\n    &__cursor {\\n      display: inline-block;\\n      margin-left: 2px;\\n      color: currentColor;\\n      animation: blink 1s infinite;\\n    }\\n\\n    &__loading {\\n      display: flex;\\n      align-items: center;\\n      gap: 0.5rem;\\n    }\\n\\n    &__typing-indicator {\\n      display: flex;\\n      gap: 0.25rem;\\n\\n      span {\\n        width: 6px;\\n        height: 6px;\\n        border-radius: 50%;\\n        background: currentColor;\\n        opacity: 0.4;\\n        animation: typing 1.4s infinite ease-in-out;\\n\\n        &:nth-child(1) {\\n          animation-delay: -0.32s;\\n        }\\n        &:nth-child(2) {\\n          animation-delay: -0.16s;\\n        }\\n        &:nth-child(3) {\\n          animation-delay: 0s;\\n        }\\n      }\\n    }\\n\\n    &__error {\\n      color: var(--color-danger);\\n      font-weight: 500;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      display: flex;\\n      flex-direction: column;\\n      gap: 0.5rem;\\n    }\\n\\n    &__error_message {\\n      background: var(--color-warning-background);\\n      color: var(--color-warning-color);\\n\\n      padding: 0.5rem 0.75rem;\\n      border-radius: var(--border-radius-md);\\n      margin-top: 1rem;\\n      font-size: 0.875rem;\\n    }\\n\\n    &__error-link {\\n      display: flex;\\n      align-items: center;\\n      background: none;\\n      border: none;\\n      cursor: pointer;\\n      font-size: 0.875rem;\\n      font-weight: 500;\\n      padding: 0;\\n      margin-top: 1rem;\\n      text-decoration: underline;\\n      font-family: inherit;\\n      color: var(--link-color);\\n\\n      &:hover {\\n        color: var(--link-color-hover);\\n      }\\n      &:active {\\n        color: var(--link-color-active);\\n      }\\n\\n      &:disabled {\\n        cursor: not-allowed;\\n        text-decoration: none;\\n      }\\n    }\\n  }\\n\\n  @keyframes typing {\\n    0%,\\n    80%,\\n    100% {\\n      transform: scale(0.8);\\n      opacity: 0.4;\\n    }\\n    40% {\\n      transform: scale(1);\\n      opacity: 1;\\n    }\\n  }\\n\\n  @keyframes blink {\\n    0%,\\n    50% {\\n      opacity: 1;\\n    }\\n    51%,\\n    100% {\\n      opacity: 0;\\n    }\\n  }\\n}\\n\",\"@use \\\"../../css/variables.module.scss\\\" as *;\\n@use \\\"./Chat/Chat.scss\\\";\\n\\n$verticalBreakpoint: 861px;\\n$fullScreenModalBreakpoint: 600px;\\n\\n.jsondraw {\\n  .Modal.Dialog.ttd-dialog {\\n    padding: 1.25rem;\\n\\n    &.Dialog--fullscreen {\\n      margin-top: 0;\\n    }\\n\\n    .Island {\\n      padding-inline: 0 !important;\\n      height: 100%;\\n      display: flex;\\n      flex-direction: column;\\n      flex: 1 1 auto;\\n    }\\n\\n    .Modal__content {\\n      max-height: 100%;\\n      min-height: 95vh;\\n      height: 100%;\\n\\n      @media screen and (min-width: $verticalBreakpoint) {\\n        max-height: min(950px, calc(100vh - 4rem));\\n        height: 100%;\\n        min-height: unset;\\n      }\\n    }\\n\\n    .Dialog__content {\\n      flex: 1 1 auto;\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        margin-top: 0 !important;\\n      }\\n    }\\n  }\\n\\n  .ttd-dialog-desc {\\n    font-size: 15px;\\n    font-style: italic;\\n    font-weight: 500;\\n    margin: 0.5rem 0 1.5rem 0;\\n  }\\n\\n  .ttd-dialog-tabs-root {\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\\n  .ttd-dialog-tab-trigger {\\n    color: var(--color-on-surface);\\n    font-size: 0.875rem;\\n    margin: 0;\\n    padding: 0 1rem;\\n    background-color: transparent;\\n    border: 0;\\n    height: 2.875rem;\\n    font-weight: 600;\\n    font-family: inherit;\\n    letter-spacing: 0.4px;\\n\\n    &[data-state=\\\"active\\\"] {\\n      border-bottom: 2px solid var(--color-primary);\\n    }\\n\\n    &__content {\\n      display: flex;\\n      align-items: center;\\n    }\\n\\n    &__badge {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 1px 6px;\\n      margin-left: 10px;\\n      font-size: 10px;\\n      border-radius: 12px;\\n      background: var(--color-promo);\\n      color: var(--color-surface-lowest);\\n    }\\n  }\\n\\n  .ttd-dialog-triggers {\\n    border-bottom: 1px solid var(--color-surface-high);\\n    margin-bottom: 1rem;\\n    padding-inline: 2.5rem;\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      margin-bottom: 1rem;\\n    }\\n  }\\n\\n  .ttd-dialog-content {\\n    padding-inline: 2.5rem;\\n    height: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    overflow: visible;\\n    outline: none;\\n\\n    &[hidden] {\\n      display: none;\\n    }\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      padding-inline: 1rem;\\n      flex-grow: 1;\\n    }\\n  }\\n\\n  .ttd-dialog-panel__header .dropdown-menu {\\n    z-index: 2;\\n    margin: 0;\\n    right: 0;\\n    left: auto;\\n    min-width: 280px;\\n\\n    .dropdown-menu-container.dropdown-menu-container {\\n      padding-inline: 0.5rem !important;\\n      padding-top: 0.5rem;\\n      padding-bottom: 0.5rem;\\n      max-height: min(400px, 70vh);\\n      height: fit-content;\\n      overflow-y: auto;\\n      box-shadow: var(--shadow-island);\\n      border-radius: var(--border-radius-lg);\\n      background-color: var(--island-bg-color-alt);\\n    }\\n  }\\n\\n  .ttd-dialog-layout {\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n    height: 100%;\\n\\n    &--split {\\n      gap: 2rem;\\n      min-width: 0;\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        grid-template-columns: 1fr;\\n        grid-template-rows: 1fr auto;\\n        grid-row-gap: 0;\\n      }\\n\\n      .ttd-dialog-chat-panel {\\n        min-width: 0;\\n\\n        @media screen and (max-width: $verticalBreakpoint) {\\n          width: 100%;\\n          flex: 0 0 auto;\\n          height: auto;\\n          min-height: 250px;\\n        }\\n      }\\n\\n      .ttd-dialog-preview-panel {\\n        min-width: 0;\\n        overflow: hidden;\\n\\n        @media screen and (max-width: $verticalBreakpoint) {\\n          width: 100%;\\n          flex: 0 0 auto;\\n          max-width: 100%;\\n          min-height: 280px;\\n          height: unset;\\n        }\\n      }\\n    }\\n\\n    &--chat-only {\\n      grid-template-columns: 1fr;\\n\\n      .invisible {\\n        display: none;\\n      }\\n\\n      .ttd-dialog-chat-panel {\\n        @media screen and (max-width: $verticalBreakpoint) {\\n          height: unset;\\n        }\\n      }\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        .chat-interface {\\n          max-height: 100%;\\n\\n          &__messages {\\n            max-height: unset;\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n  .ttd-dialog-input {\\n    width: auto;\\n    height: 10rem;\\n    resize: none;\\n    border-radius: var(--border-radius-lg);\\n    border: 1px solid var(--dialog-border-color);\\n    white-space: pre-wrap;\\n    padding: 0.85rem;\\n    box-sizing: border-box;\\n    font-family: monospace;\\n\\n    @media screen and (min-width: $verticalBreakpoint) {\\n      width: 100%;\\n      height: 100%;\\n    }\\n  }\\n\\n  .ttd-dialog-output-wrapper {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    justify-content: center;\\n    box-sizing: border-box;\\n    flex-grow: 1;\\n    position: relative;\\n    overflow: hidden;\\n    max-width: 100%;\\n    max-height: 100%;\\n\\n    background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\\\")\\n      left center;\\n    border-radius: var(--border-radius-lg);\\n    border: 1px solid var(--dialog-border-color);\\n\\n    height: 400px;\\n    width: auto;\\n    max-width: 100%;\\n\\n    @media screen and (max-width: $fullScreenModalBreakpoint) {\\n      height: 200px;\\n    }\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      width: 100%;\\n      max-width: 100%;\\n    }\\n\\n    &--error {\\n      background: none;\\n      border: 1px solid var(--dialog-border-color);\\n      border-radius: var(--border-radius-lg);\\n    }\\n\\n    canvas {\\n      max-width: 100%;\\n      max-height: 100%;\\n      width: auto;\\n      height: auto;\\n      object-fit: contain;\\n    }\\n  }\\n\\n  .ttd-dialog-output-canvas-container {\\n    display: flex;\\n    width: 100%;\\n    height: 100%;\\n    align-items: center;\\n    justify-content: center;\\n    flex-grow: 1;\\n    position: relative;\\n    user-select: none;\\n\\n    &.invisible {\\n      visibility: hidden;\\n      pointer-events: none;\\n    }\\n  }\\n\\n  .ttd-dialog-output-canvas-content {\\n    display: flex;\\n    width: 100%;\\n    height: 100%;\\n    align-items: center;\\n    justify-content: center;\\n    flex-grow: 1;\\n\\n    canvas {\\n      image-rendering: auto;\\n    }\\n  }\\n\\n  .ttd-dialog-output-error {\\n    position: absolute;\\n    z-index: 10;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    padding: 2rem;\\n\\n    .ttd-dialog-output-error-content {\\n      display: flex;\\n      flex-direction: column;\\n      align-items: center;\\n      gap: 1rem;\\n      padding: 2.5rem 2rem;\\n      background: var(--color-surface-primary);\\n    }\\n\\n    .ttd-dialog-output-error-icon {\\n      color: var(--color-danger);\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n\\n      svg {\\n        width: 52px;\\n        height: 52px;\\n        stroke-width: 1.5;\\n      }\\n    }\\n\\n    .ttd-dialog-output-error-title {\\n      font-size: 1.25rem;\\n      font-weight: 600;\\n      color: var(--color-danger);\\n      text-align: center;\\n      margin-top: 0.25rem;\\n    }\\n\\n    .ttd-dialog-output-error-message {\\n      text-align: left;\\n      font-weight: 400;\\n      color: var(--color-gray-50);\\n      word-break: break-word;\\n      white-space: pre-wrap;\\n      max-width: 100%;\\n      font-family: monospace;\\n    }\\n  }\\n\\n  .ttd-dialog-panels {\\n    height: 100%;\\n\\n    @media screen and (min-width: $verticalBreakpoint) {\\n      display: grid;\\n      grid-template-columns: 1fr 1fr;\\n      gap: 2rem;\\n    }\\n  }\\n\\n  .ttd-dialog-chat-panel,\\n  .ttd-dialog-preview-panel {\\n    display: flex;\\n    flex-direction: column;\\n    width: 100%;\\n    height: 100%;\\n    min-width: 0;\\n    align-items: stretch;\\n  }\\n\\n  .ttd-dialog-panel {\\n    display: flex;\\n    flex-direction: column;\\n    width: 100%;\\n    height: 100%;\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      height: 50%;\\n    }\\n\\n    &__header {\\n      display: flex;\\n      align-items: center;\\n      gap: 0.3rem;\\n      height: 36px;\\n      margin-top: 0.2rem;\\n      margin-bottom: 0.5rem;\\n      flex-shrink: 0;\\n\\n      label {\\n        font-size: 14px;\\n        line-height: 22px;\\n        font-style: normal;\\n        font-weight: 600;\\n      }\\n    }\\n\\n    &__label-wrapper {\\n      display: flex;\\n      justify-content: space-between;\\n      align-items: center;\\n      width: 100%;\\n    }\\n\\n    &__label-group {\\n      display: flex;\\n      gap: 5px;\\n    }\\n\\n    &__header-right {\\n      display: flex;\\n      align-items: center;\\n      gap: 0.75rem;\\n    }\\n\\n    &__rate-limit {\\n      font-size: 0.75rem;\\n      font-weight: 500;\\n      white-space: nowrap;\\n\\n      &--danger {\\n        color: var(--color-danger);\\n      }\\n    }\\n\\n    &__menu-wrapper {\\n      position: relative;\\n\\n      .ttd-dialog-menu-trigger {\\n        height: 40px;\\n        width: 40px;\\n      }\\n\\n      .dropdown-menu {\\n        margin-top: 0.375rem;\\n        right: 0;\\n      }\\n    }\\n\\n    textarea {\\n      height: 100%;\\n      resize: none;\\n      border-radius: var(--border-radius-lg);\\n      border: 1px solid var(--dialog-border-color);\\n      white-space: pre-wrap;\\n      padding: 0.85rem;\\n      box-sizing: border-box;\\n      width: 100%;\\n      font-family: monospace;\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        width: auto;\\n      }\\n    }\\n  }\\n\\n  .ttd-dialog-panel-button-container {\\n    display: flex;\\n    align-items: center;\\n    flex-grow: 0;\\n    height: 40px;\\n    flex-shrink: 0;\\n    margin-top: 1rem;\\n    margin-bottom: 0.5rem;\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      margin-top: 0.5rem;\\n    }\\n\\n    &.invisible {\\n      visibility: hidden;\\n\\n      @media screen and (max-width: $verticalBreakpoint) {\\n        display: none;\\n      }\\n    }\\n  }\\n\\n  .ttd-dialog-panel-button {\\n    &.jsondraw-button {\\n      font-family: inherit;\\n      font-weight: 600;\\n      height: 2.5rem;\\n\\n      font-size: 12px;\\n      color: #fff;\\n      background-color: var(--color-primary);\\n      width: 100%;\\n\\n      &:hover {\\n        background-color: var(--color-primary-darker);\\n      }\\n      &:active {\\n        background-color: var(--color-primary-darkest);\\n      }\\n\\n      &:disabled {\\n        opacity: 0.5;\\n        cursor: not-allowed;\\n\\n        &:hover {\\n          background-color: var(--color-primary);\\n        }\\n      }\\n\\n      @media screen and (min-width: $verticalBreakpoint) {\\n        width: auto;\\n        min-width: 7.5rem;\\n      }\\n\\n      @at-root .jsondraw.theme--dark#{&} {\\n        color: var(--color-gray-100);\\n      }\\n    }\\n\\n    & {\\n      position: relative;\\n    }\\n\\n    div {\\n      display: contents;\\n\\n      &.invisible {\\n        visibility: hidden;\\n      }\\n\\n      &.Spinner {\\n        display: flex !important;\\n        position: absolute;\\n        inset: 0;\\n\\n        --spinner-color: white;\\n\\n        @at-root .jsondraw.theme--dark#{&} {\\n          --spinner-color: var(--color-gray-100);\\n        }\\n      }\\n\\n      span {\\n        padding-left: 0.5rem;\\n        display: flex;\\n      }\\n    }\\n  }\\n\\n  .ttd-dialog-submit-shortcut {\\n    margin-inline-start: 0.5rem;\\n    font-size: 0.625rem;\\n    opacity: 0.6;\\n    display: flex;\\n    gap: 0.125rem;\\n\\n    &__key {\\n      border: 1px solid gray;\\n      padding: 2px 3px;\\n      border-radius: 4px;\\n    }\\n  }\\n\\n  .ttd-dialog-panel-action-link {\\n    display: flex;\\n    align-items: center;\\n    gap: 0.25rem;\\n    background: none;\\n    border: none;\\n    color: var(--color-primary);\\n    font-weight: 500;\\n    font-family: inherit;\\n    height: 40px;\\n\\n    &__icon {\\n      display: inline-flex;\\n      align-items: center;\\n\\n      svg {\\n        width: 12px;\\n        height: 12px;\\n      }\\n    }\\n\\n    @media screen and (max-width: $verticalBreakpoint) {\\n      height: unset;\\n    }\\n  }\\n\\n  .dropdown-menu-item-custom.ttd-chat-menu-item {\\n    display: flex;\\n    width: unset;\\n    align-items: center;\\n    justify-content: space-between;\\n    padding: 0.25rem 0.5rem;\\n    cursor: pointer;\\n    position: relative;\\n    border: 1px solid transparent;\\n    border-radius: var(--border-radius-md);\\n    margin-top: 1px;\\n\\n    &:hover {\\n      background-color: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      border: 1px solid var(--button-active-border);\\n    }\\n\\n    &--active {\\n      background-color: var(--color-surface-primary-container);\\n    }\\n\\n    .ttd-chat-menu-item__title {\\n      flex: 1;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      white-space: nowrap;\\n    }\\n\\n    &:hover {\\n      .ttd-chat-menu-item__delete {\\n        visibility: visible;\\n      }\\n    }\\n\\n    .ttd-chat-menu-item__delete {\\n      border: none;\\n      padding: 0.25rem;\\n      cursor: pointer;\\n      flex-shrink: 0;\\n      margin-left: 0.5rem;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      background: transparent;\\n      visibility: hidden;\\n\\n      &:hover {\\n        color: var(--color-danger);\\n      }\\n\\n      @at-root .jsondraw.theme--dark#{&} {\\n        svg {\\n          color: var(--color-on-surface);\\n        }\\n        &:hover svg {\\n          color: var(--color-danger);\\n        }\\n      }\\n\\n      svg {\\n        width: 16px;\\n        height: 16px;\\n      }\\n    }\\n  }\\n\\n  .ttd-dialog-preview-panel--hidden {\\n    display: none;\\n  }\\n\\n  .ttd-chat-history-menu {\\n    display: flex;\\n    gap: 1rem;\\n    align-items: center;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .UnlockPopup{position:absolute;z-index:var(--zIndex-interactiveCanvas);display:flex;justify-content:center;align-items:center;gap:.5rem;border-radius:.5rem;background:var(--island-bg-color);box-shadow:var(--shadow-island);padding:.8rem;cursor:pointer;color:var(--color-gray-60)}.jsondraw .UnlockPopup:focus{outline:none}.jsondraw .UnlockPopup svg{display:block;width:1.25rem;height:1.25rem;color:var(--color-gray-60)}.jsondraw .UnlockPopup:hover svg{color:var(--color-primary)}.jsondraw .UnlockPopup:active svg{transform:scale(0.95)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/popups/UnlockPopup.scss\"],\"names\":[],\"mappings\":\"AAGE,uBACE,iBAAA,CACA,uCAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,SAAA,CACA,mBAAA,CACA,iCAAA,CACA,+BAAA,CACA,aAAA,CACA,cAAA,CACA,0BAAA,CAEA,6BACE,YAAA,CAGF,2BACE,aAAA,CACA,aAAA,CACA,cAAA,CACA,0BAAA,CAIA,iCACE,0BAAA,CAIF,kCACE,qBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .UnlockPopup {\\n    position: absolute;\\n    z-index: var(--zIndex-interactiveCanvas);\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    gap: 0.5rem;\\n    border-radius: 0.5rem;\\n    background: var(--island-bg-color);\\n    box-shadow: var(--shadow-island);\\n    padding: 0.8rem;\\n    cursor: pointer;\\n    color: var(--color-gray-60);\\n\\n    &:focus {\\n      outline: none;\\n    }\\n\\n    svg {\\n      display: block;\\n      width: 1.25rem;\\n      height: 1.25rem;\\n      color: var(--color-gray-60);\\n    }\\n\\n    &:hover {\\n      svg {\\n        color: var(--color-primary);\\n      }\\n    }\\n    &:active {\\n      svg {\\n        transform: scale(0.95);\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .popover{position:absolute;z-index:10;padding:5px 0 5px;outline:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Popover.scss\"],\"names\":[],\"mappings\":\"AACE,mBACE,iBAAA,CACA,UAAA,CACA,iBAAA,CACA,YAAA\",\"sourcesContent\":[\".jsondraw {\\n  .popover {\\n    position: absolute;\\n    z-index: 10;\\n    padding: 5px 0 5px;\\n    outline: none;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes successStatusAnimation{0%{transform:scale(0.35)}50%{transform:scale(1.25)}100%{transform:scale(1)}}.jsondraw .ExcButton{--text-color: transparent;--border-color: transparent;--back-color: transparent;color:var(--text-color);background-color:var(--back-color);border-color:var(--border-color);border-radius:.5rem;border-width:1px;border-style:solid;font-family:var(--font-family);user-select:none}.jsondraw .ExcButton:hover{transition:all 150ms ease-out}.jsondraw .ExcButton .Spinner{--spinner-color: var(--color-surface-lowest)}.jsondraw .ExcButton .ExcButton__statusIcon{visibility:visible;position:absolute;width:1.2rem;height:1.2rem;animation:successStatusAnimation .5s cubic-bezier(0.3, 1, 0.6, 1)}.jsondraw .ExcButton.ExcButton--status-loading,.jsondraw .ExcButton.ExcButton--status-success{pointer-events:none;background-color:var(--color-success)}.jsondraw .ExcButton.ExcButton--status-loading .ExcButton__contents,.jsondraw .ExcButton.ExcButton--status-success .ExcButton__contents{visibility:hidden}.jsondraw .ExcButton[disabled]{cursor:not-allowed}.jsondraw .ExcButton[disabled].ExcButton--variant-filled,.jsondraw .ExcButton[disabled]:hover{--back-color: var(--color-surface-low) !important;--text-color: var(--color-on-surface-variant) !important}.jsondraw .ExcButton[disabled].ExcButton--variant-outlined,.jsondraw .ExcButton[disabled].ExcButton--variant-icon{--text-color: var(--color-on-surface-variant);--border-color: var(--color-surface-high)}.jsondraw .ExcButton,.jsondraw .ExcButton__contents{display:flex;justify-content:center;align-items:center;flex-shrink:0;flex-wrap:nowrap;position:relative}.jsondraw .ExcButton--color-primary.ExcButton--variant-filled{--text-color: var(--color-surface-lowest);--back-color: var(--color-primary)}.jsondraw .ExcButton--color-primary.ExcButton--variant-filled .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-primary.ExcButton--variant-filled:hover{--back-color: var(--color-brand-hover)}.jsondraw .ExcButton--color-primary.ExcButton--variant-filled:active{--back-color: var(--color-brand-active)}.jsondraw .ExcButton--color-primary.ExcButton--variant-outlined,.jsondraw .ExcButton--color-primary.ExcButton--variant-icon{--text-color: var(--color-primary);--border-color: var(--color-primary);--back-color: transparent}.jsondraw .ExcButton--color-primary.ExcButton--variant-outlined .Spinner,.jsondraw .ExcButton--color-primary.ExcButton--variant-icon .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-primary.ExcButton--variant-outlined:hover,.jsondraw .ExcButton--color-primary.ExcButton--variant-icon:hover{--text-color: var(--color-brand-hover);--border-color: var(--color-brand-hover)}.jsondraw .ExcButton--color-primary.ExcButton--variant-outlined:active,.jsondraw .ExcButton--color-primary.ExcButton--variant-icon:active{--text-color: var(--color-brand-active);--border-color: var(--color-brand-active)}.jsondraw .ExcButton--color-danger.ExcButton--variant-filled{--text-color: var(--color-danger-text);--back-color: var(--color-danger-dark)}.jsondraw .ExcButton--color-danger.ExcButton--variant-filled .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-danger.ExcButton--variant-filled:hover{--back-color: var(--color-danger-darker)}.jsondraw .ExcButton--color-danger.ExcButton--variant-filled:active{--back-color: var(--color-danger-darkest)}.jsondraw .ExcButton--color-danger.ExcButton--variant-outlined,.jsondraw .ExcButton--color-danger.ExcButton--variant-icon{--text-color: var(--color-danger);--border-color: var(--color-danger);--back-color: transparent}.jsondraw .ExcButton--color-danger.ExcButton--variant-outlined .Spinner,.jsondraw .ExcButton--color-danger.ExcButton--variant-icon .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-danger.ExcButton--variant-outlined:hover,.jsondraw .ExcButton--color-danger.ExcButton--variant-icon:hover{--text-color: var(--color-danger-darkest);--border-color: var(--color-danger-darkest)}.jsondraw .ExcButton--color-danger.ExcButton--variant-outlined:active,.jsondraw .ExcButton--color-danger.ExcButton--variant-icon:active{--text-color: var(--color-danger-darker);--border-color: var(--color-danger-darker)}.jsondraw .ExcButton--color-success.ExcButton--variant-filled{--text-color: var(--color-success-text);--back-color: var(--color-success)}.jsondraw .ExcButton--color-success.ExcButton--variant-filled .Spinner{--spinner-color: var(--color-success)}.jsondraw .ExcButton--color-success.ExcButton--variant-filled:hover{--back-color: var(--color-success-darker)}.jsondraw .ExcButton--color-success.ExcButton--variant-filled:active{--back-color: var(--color-success-darkest)}.jsondraw .ExcButton--color-success.ExcButton--variant-outlined,.jsondraw .ExcButton--color-success.ExcButton--variant-icon{--text-color: var(--color-success-contrast);--border-color: var(--color-success-contrast);--back-color: transparent}.jsondraw .ExcButton--color-success.ExcButton--variant-outlined .Spinner,.jsondraw .ExcButton--color-success.ExcButton--variant-icon .Spinner{--spinner-color: var(--color-success-contrast)}.jsondraw .ExcButton--color-success.ExcButton--variant-outlined:hover,.jsondraw .ExcButton--color-success.ExcButton--variant-icon:hover{--text-color: var(--color-success-contrast-hover);--border-color: var(--color-success-contrast-hover)}.jsondraw .ExcButton--color-success.ExcButton--variant-outlined:active,.jsondraw .ExcButton--color-success.ExcButton--variant-icon:active{--text-color: var(--color-success-contrast-active);--border-color: var(--color-success-contrast-active)}.jsondraw .ExcButton--color-muted.ExcButton--variant-filled{--text-color: var(--island-bg-color);--back-color: var(--color-gray-50)}.jsondraw .ExcButton--color-muted.ExcButton--variant-filled .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-muted.ExcButton--variant-filled:hover{--back-color: var(--color-gray-60)}.jsondraw .ExcButton--color-muted.ExcButton--variant-filled:active{--back-color: var(--color-gray-80)}.jsondraw .ExcButton--color-muted.ExcButton--variant-outlined,.jsondraw .ExcButton--color-muted.ExcButton--variant-icon{--text-color: var(--color-muted-background);--border-color: var(--color-muted);--back-color: var(--island-bg-color)}.jsondraw .ExcButton--color-muted.ExcButton--variant-outlined .Spinner,.jsondraw .ExcButton--color-muted.ExcButton--variant-icon .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-muted.ExcButton--variant-outlined:hover,.jsondraw .ExcButton--color-muted.ExcButton--variant-icon:hover{--text-color: var(--color-muted-background-darker);--border-color: var(--color-muted-darker)}.jsondraw .ExcButton--color-muted.ExcButton--variant-outlined:active,.jsondraw .ExcButton--color-muted.ExcButton--variant-icon:active{--text-color: var(--color-muted-background-darker);--border-color: var(--color-muted-darkest)}.jsondraw .ExcButton--color-warning.ExcButton--variant-filled{--text-color: black;--back-color: var(--color-warning-dark)}.jsondraw .ExcButton--color-warning.ExcButton--variant-filled .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-warning.ExcButton--variant-filled:hover{--back-color: var(--color-warning-darker)}.jsondraw .ExcButton--color-warning.ExcButton--variant-filled:active{--back-color: var(--color-warning-darkest)}.jsondraw .ExcButton--color-warning.ExcButton--variant-outlined,.jsondraw .ExcButton--color-warning.ExcButton--variant-icon{--text-color: var(--color-warning-dark);--border-color: var(--color-warning-dark);--back-color: var(--input-bg-color)}.jsondraw .ExcButton--color-warning.ExcButton--variant-outlined .Spinner,.jsondraw .ExcButton--color-warning.ExcButton--variant-icon .Spinner{--spinner-color: var(--text-color)}.jsondraw .ExcButton--color-warning.ExcButton--variant-outlined:hover,.jsondraw .ExcButton--color-warning.ExcButton--variant-icon:hover{--text-color: var(--color-warning-darker);--border-color: var(--color-warning-darker)}.jsondraw .ExcButton--color-warning.ExcButton--variant-outlined:active,.jsondraw .ExcButton--color-warning.ExcButton--variant-icon:active{--text-color: var(--color-warning-darkest);--border-color: var(--color-warning-darkest)}.jsondraw .ExcButton--size-large{font-weight:600;font-size:.875rem;min-height:3rem;padding:.5rem 1.5rem;letter-spacing:.4px}.jsondraw .ExcButton--size-large .ExcButton__contents{gap:.75rem}.jsondraw .ExcButton--size-medium{font-weight:600;font-size:.75rem;min-height:2.5rem;padding:.5rem 1rem;letter-spacing:normal}.jsondraw .ExcButton--size-medium .ExcButton__contents{gap:.5rem}.jsondraw .ExcButton--variant-icon{padding:.5rem .75rem;width:3rem}.jsondraw .ExcButton--fullWidth{width:100%}.jsondraw .ExcButton__icon{width:1.25rem;height:1.25rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/FilledButton.scss\"],\"names\":[],\"mappings\":\"AAEA,kCACE,GACE,qBAAA,CAGF,IACE,qBAAA,CAGF,KACE,kBAAA,CAAA,CAKF,qBACE,yBAAA,CACA,2BAAA,CACA,yBAAA,CAEA,uBAAA,CACA,kCAAA,CACA,gCAAA,CAEA,mBAAA,CACA,gBAAA,CACA,kBAAA,CAEA,8BAAA,CAEA,gBAAA,CAEA,2BACE,6BAAA,CAGF,8BACE,4CAAA,CAGF,4CACE,kBAAA,CACA,iBAAA,CAEA,YAAA,CACA,aAAA,CAEA,iEAAA,CAGF,8FAEE,mBAAA,CACA,qCAAA,CAEA,wIACE,iBAAA,CAIJ,+BACE,kBAAA,CAEA,8FAEE,iDAAA,CACA,wDAAA,CAGF,kHAEE,6CAAA,CACA,yCAAA,CAIJ,oDAEE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,aAAA,CACA,gBAAA,CAEA,iBAAA,CAIA,8DACE,yCAAA,CACA,kCAAA,CAEA,uEACE,kCAAA,CAGF,oEACE,sCAAA,CAGF,qEACE,uCAAA,CAIJ,4HAEE,kCAAA,CACA,oCAAA,CACA,yBAAA,CAEA,8IACE,kCAAA,CAGF,wIACE,sCAAA,CACA,wCAAA,CAGF,0IACE,uCAAA,CACA,yCAAA,CAMJ,6DACE,sCAAA,CACA,sCAAA,CAEA,sEACE,kCAAA,CAGF,mEACE,wCAAA,CAGF,oEACE,yCAAA,CAIJ,0HAEE,iCAAA,CACA,mCAAA,CACA,yBAAA,CAEA,4IACE,kCAAA,CAGF,sIACE,yCAAA,CACA,2CAAA,CAGF,wIACE,wCAAA,CACA,0CAAA,CAMJ,8DACE,uCAAA,CACA,kCAAA,CAEA,uEACE,qCAAA,CAGF,oEACE,yCAAA,CAGF,qEACE,0CAAA,CAIJ,4HAEE,2CAAA,CACA,6CAAA,CACA,yBAAA,CAEA,8IACE,8CAAA,CAGF,wIACE,iDAAA,CACA,mDAAA,CAGF,0IACE,kDAAA,CACA,oDAAA,CAMJ,4DACE,oCAAA,CACA,kCAAA,CAEA,qEACE,kCAAA,CAGF,kEACE,kCAAA,CAGF,mEACE,kCAAA,CAIJ,wHAEE,2CAAA,CACA,kCAAA,CACA,oCAAA,CAEA,0IACE,kCAAA,CAGF,oIACE,kDAAA,CACA,yCAAA,CAGF,sIACE,kDAAA,CACA,0CAAA,CAMJ,8DACE,mBAAA,CACA,uCAAA,CAEA,uEACE,kCAAA,CAGF,oEACE,yCAAA,CAGF,qEACE,0CAAA,CAIJ,4HAEE,uCAAA,CACA,yCAAA,CACA,mCAAA,CAEA,8IACE,kCAAA,CAGF,wIACE,yCAAA,CACA,2CAAA,CAGF,0IACE,0CAAA,CACA,4CAAA,CAKN,iCACE,eAAA,CACA,iBAAA,CACA,eAAA,CACA,oBAAA,CAEA,mBAAA,CAEA,sDACE,UAAA,CAIJ,kCACE,eAAA,CACA,gBAAA,CACA,iBAAA,CACA,kBAAA,CAEA,qBAAA,CAEA,uDACE,SAAA,CAIJ,mCACE,oBAAA,CACA,UAAA,CAGF,gCACE,UAAA,CAGF,2BACE,aAAA,CACA,cAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n@keyframes successStatusAnimation {\\n  0% {\\n    transform: scale(0.35);\\n  }\\n\\n  50% {\\n    transform: scale(1.25);\\n  }\\n\\n  100% {\\n    transform: scale(1);\\n  }\\n}\\n\\n.jsondraw {\\n  .ExcButton {\\n    --text-color: transparent;\\n    --border-color: transparent;\\n    --back-color: transparent;\\n\\n    color: var(--text-color);\\n    background-color: var(--back-color);\\n    border-color: var(--border-color);\\n\\n    border-radius: 0.5rem;\\n    border-width: 1px;\\n    border-style: solid;\\n\\n    font-family: var(--font-family);\\n\\n    user-select: none;\\n\\n    &:hover {\\n      transition: all 150ms ease-out;\\n    }\\n\\n    .Spinner {\\n      --spinner-color: var(--color-surface-lowest);\\n    }\\n\\n    .ExcButton__statusIcon {\\n      visibility: visible;\\n      position: absolute;\\n\\n      width: 1.2rem;\\n      height: 1.2rem;\\n\\n      animation: successStatusAnimation 0.5s cubic-bezier(0.3, 1, 0.6, 1);\\n    }\\n\\n    &.ExcButton--status-loading,\\n    &.ExcButton--status-success {\\n      pointer-events: none;\\n      background-color: var(--color-success);\\n\\n      .ExcButton__contents {\\n        visibility: hidden;\\n      }\\n    }\\n\\n    &[disabled] {\\n      cursor: not-allowed;\\n\\n      &.ExcButton--variant-filled,\\n      &:hover {\\n        --back-color: var(--color-surface-low) !important;\\n        --text-color: var(--color-on-surface-variant) !important;\\n      }\\n\\n      &.ExcButton--variant-outlined,\\n      &.ExcButton--variant-icon {\\n        --text-color: var(--color-on-surface-variant);\\n        --border-color: var(--color-surface-high);\\n      }\\n    }\\n\\n    &,\\n    &__contents {\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      flex-shrink: 0;\\n      flex-wrap: nowrap;\\n      // needed because of .Spinner\\n      position: relative;\\n    }\\n\\n    &--color-primary {\\n      &.ExcButton--variant-filled {\\n        --text-color: var(--color-surface-lowest);\\n        --back-color: var(--color-primary);\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --back-color: var(--color-brand-hover);\\n        }\\n\\n        &:active {\\n          --back-color: var(--color-brand-active);\\n        }\\n      }\\n\\n      &.ExcButton--variant-outlined,\\n      &.ExcButton--variant-icon {\\n        --text-color: var(--color-primary);\\n        --border-color: var(--color-primary);\\n        --back-color: transparent;\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --text-color: var(--color-brand-hover);\\n          --border-color: var(--color-brand-hover);\\n        }\\n\\n        &:active {\\n          --text-color: var(--color-brand-active);\\n          --border-color: var(--color-brand-active);\\n        }\\n      }\\n    }\\n\\n    &--color-danger {\\n      &.ExcButton--variant-filled {\\n        --text-color: var(--color-danger-text);\\n        --back-color: var(--color-danger-dark);\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --back-color: var(--color-danger-darker);\\n        }\\n\\n        &:active {\\n          --back-color: var(--color-danger-darkest);\\n        }\\n      }\\n\\n      &.ExcButton--variant-outlined,\\n      &.ExcButton--variant-icon {\\n        --text-color: var(--color-danger);\\n        --border-color: var(--color-danger);\\n        --back-color: transparent;\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --text-color: var(--color-danger-darkest);\\n          --border-color: var(--color-danger-darkest);\\n        }\\n\\n        &:active {\\n          --text-color: var(--color-danger-darker);\\n          --border-color: var(--color-danger-darker);\\n        }\\n      }\\n    }\\n\\n    &--color-success {\\n      &.ExcButton--variant-filled {\\n        --text-color: var(--color-success-text);\\n        --back-color: var(--color-success);\\n\\n        .Spinner {\\n          --spinner-color: var(--color-success);\\n        }\\n\\n        &:hover {\\n          --back-color: var(--color-success-darker);\\n        }\\n\\n        &:active {\\n          --back-color: var(--color-success-darkest);\\n        }\\n      }\\n\\n      &.ExcButton--variant-outlined,\\n      &.ExcButton--variant-icon {\\n        --text-color: var(--color-success-contrast);\\n        --border-color: var(--color-success-contrast);\\n        --back-color: transparent;\\n\\n        .Spinner {\\n          --spinner-color: var(--color-success-contrast);\\n        }\\n\\n        &:hover {\\n          --text-color: var(--color-success-contrast-hover);\\n          --border-color: var(--color-success-contrast-hover);\\n        }\\n\\n        &:active {\\n          --text-color: var(--color-success-contrast-active);\\n          --border-color: var(--color-success-contrast-active);\\n        }\\n      }\\n    }\\n\\n    &--color-muted {\\n      &.ExcButton--variant-filled {\\n        --text-color: var(--island-bg-color);\\n        --back-color: var(--color-gray-50);\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --back-color: var(--color-gray-60);\\n        }\\n\\n        &:active {\\n          --back-color: var(--color-gray-80);\\n        }\\n      }\\n\\n      &.ExcButton--variant-outlined,\\n      &.ExcButton--variant-icon {\\n        --text-color: var(--color-muted-background);\\n        --border-color: var(--color-muted);\\n        --back-color: var(--island-bg-color);\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --text-color: var(--color-muted-background-darker);\\n          --border-color: var(--color-muted-darker);\\n        }\\n\\n        &:active {\\n          --text-color: var(--color-muted-background-darker);\\n          --border-color: var(--color-muted-darkest);\\n        }\\n      }\\n    }\\n\\n    &--color-warning {\\n      &.ExcButton--variant-filled {\\n        --text-color: black;\\n        --back-color: var(--color-warning-dark);\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --back-color: var(--color-warning-darker);\\n        }\\n\\n        &:active {\\n          --back-color: var(--color-warning-darkest);\\n        }\\n      }\\n\\n      &.ExcButton--variant-outlined,\\n      &.ExcButton--variant-icon {\\n        --text-color: var(--color-warning-dark);\\n        --border-color: var(--color-warning-dark);\\n        --back-color: var(--input-bg-color);\\n\\n        .Spinner {\\n          --spinner-color: var(--text-color);\\n        }\\n\\n        &:hover {\\n          --text-color: var(--color-warning-darker);\\n          --border-color: var(--color-warning-darker);\\n        }\\n\\n        &:active {\\n          --text-color: var(--color-warning-darkest);\\n          --border-color: var(--color-warning-darkest);\\n        }\\n      }\\n    }\\n\\n    &--size-large {\\n      font-weight: 600;\\n      font-size: 0.875rem;\\n      min-height: 3rem;\\n      padding: 0.5rem 1.5rem;\\n\\n      letter-spacing: 0.4px;\\n\\n      .ExcButton__contents {\\n        gap: 0.75rem;\\n      }\\n    }\\n\\n    &--size-medium {\\n      font-weight: 600;\\n      font-size: 0.75rem;\\n      min-height: 2.5rem;\\n      padding: 0.5rem 1rem;\\n\\n      letter-spacing: normal;\\n\\n      .ExcButton__contents {\\n        gap: 0.5rem;\\n      }\\n    }\\n\\n    &--variant-icon {\\n      padding: 0.5rem 0.75rem;\\n      width: 3rem;\\n    }\\n\\n    &--fullWidth {\\n      width: 100%;\\n    }\\n\\n    &__icon {\\n      width: 1.25rem;\\n      height: 1.25rem;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Island{--padding: 0;box-sizing:border-box;background-color:var(--island-bg-color);box-shadow:var(--shadow-island);border-radius:var(--border-radius-lg);padding:calc(var(--padding)*var(--space-factor));position:relative;transition:box-shadow .5s ease-in-out}.jsondraw .Island.zen-mode{box-shadow:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/layout/Island.scss\"],\"names\":[],\"mappings\":\"AACE,kBACE,YAAA,CACA,qBAAA,CACA,uCAAA,CACA,+BAAA,CACA,qCAAA,CACA,gDAAA,CACA,iBAAA,CACA,qCAAA,CAEA,2BACE,eAAA\",\"sourcesContent\":[\".jsondraw {\\n  .Island {\\n    --padding: 0;\\n    box-sizing: border-box;\\n    background-color: var(--island-bg-color);\\n    box-shadow: var(--shadow-island);\\n    border-radius: var(--border-radius-lg);\\n    padding: calc(var(--padding) * var(--space-factor));\\n    position: relative;\\n    transition: box-shadow 0.5s ease-in-out;\\n\\n    &.zen-mode {\\n      box-shadow: none;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .OverwriteConfirm{display:flex;flex-direction:column;align-items:center;gap:.75rem;isolation:isolate}.jsondraw .OverwriteConfirm h3{margin:0;font-weight:700;font-size:1.3125rem;line-height:130%;align-self:flex-start;color:var(--text-primary-color)}.jsondraw .OverwriteConfirm__Description{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;width:100%;gap:1rem}.jsondraw--mobile.jsondraw .OverwriteConfirm__Description{flex-direction:column;text-align:center}.jsondraw .OverwriteConfirm__Description{padding:2.5rem;background:var(--color-danger-background);border-radius:.5rem;font-family:\"Assistant\";font-style:normal;font-weight:400;font-size:1rem;line-height:150%;color:var(--color-danger-color)}.jsondraw .OverwriteConfirm__Description__spacer{flex-grow:1}.jsondraw .OverwriteConfirm__Description__icon{box-sizing:border-box;display:flex;align-items:center;justify-content:center;border-radius:2.5rem;background:var(--color-danger-icon-background);width:3.5rem;height:3.5rem;padding:.75rem}.jsondraw .OverwriteConfirm__Description__icon svg{color:var(--color-danger-icon-color);width:1.5rem;height:1.5rem}.jsondraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning{background:var(--color-warning-background);color:var(--color-warning-color)}.jsondraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning .OverwriteConfirm__Description__icon{background:var(--color-warning-icon-background);flex:0 0 auto}.jsondraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning .OverwriteConfirm__Description__icon svg{color:var(--color-warning-icon-color)}.jsondraw .OverwriteConfirm__Actions{display:flex;flex-direction:row;align-items:stretch;justify-items:stretch;justify-content:center;gap:1.5rem}.jsondraw--mobile.jsondraw .OverwriteConfirm__Actions{flex-direction:column}.jsondraw .OverwriteConfirm__Actions__Action{display:flex;flex-direction:column;align-items:center;padding:1.5rem;gap:.75rem;flex-basis:50%;flex-grow:0}.jsondraw .OverwriteConfirm__Actions__Action__content{height:100%;font-size:.875rem;text-align:center}.jsondraw .OverwriteConfirm__Actions__Action h4{font-weight:700;font-size:1.125rem;line-height:130%;margin:0;color:var(--text-primary-color)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/OverwriteConfirm/OverwriteConfirm.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,4BACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,UAAA,CACA,iBAAA,CAEA,+BACE,QAAA,CAEA,eAAA,CACA,mBAAA,CACA,gBAAA,CACA,qBAAA,CAEA,+BAAA,CAGF,yCACE,qBAAA,CAEA,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,UAAA,CACA,QAAA,CCFK,0DDKH,qBAAA,CACA,iBAAA,CAXJ,yCAcE,cAAA,CAEA,yCAAA,CACA,mBAAA,CAEA,uBAAA,CACA,iBAAA,CACA,eAAA,CACA,cAAA,CACA,gBAAA,CAEA,+BAAA,CAEA,iDACE,WAAA,CAGF,+CACE,qBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,oBAAA,CACA,8CAAA,CACA,YAAA,CACA,aAAA,CAEA,cAAA,CAEA,mDACE,oCAAA,CACA,YAAA,CACA,aAAA,CAIJ,sFACE,0CAAA,CACA,gCAAA,CAEA,2HACE,+CAAA,CACA,aAAA,CAEA,+HACE,qCAAA,CAMR,qCACE,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,qBAAA,CACA,sBAAA,CACA,UAAA,CClEK,sDDqEH,qBAAA,CAGF,6CACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,cAAA,CACA,UAAA,CACA,cAAA,CACA,WAAA,CAEA,sDACE,WAAA,CACA,iBAAA,CACA,iBAAA,CAGF,gDACE,eAAA,CACA,kBAAA,CACA,gBAAA,CAEA,QAAA,CAEA,+BAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .OverwriteConfirm {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    gap: 0.75rem;\\n    isolation: isolate;\\n\\n    h3 {\\n      margin: 0;\\n\\n      font-weight: 700;\\n      font-size: 1.3125rem;\\n      line-height: 130%;\\n      align-self: flex-start;\\n\\n      color: var(--text-primary-color);\\n    }\\n\\n    &__Description {\\n      box-sizing: border-box;\\n\\n      display: flex;\\n      flex-direction: row;\\n      align-items: center;\\n      width: 100%;\\n      gap: 1rem;\\n\\n      @include isMobile {\\n        flex-direction: column;\\n        text-align: center;\\n      }\\n\\n      padding: 2.5rem;\\n\\n      background: var(--color-danger-background);\\n      border-radius: 0.5rem;\\n\\n      font-family: \\\"Assistant\\\";\\n      font-style: normal;\\n      font-weight: 400;\\n      font-size: 1rem;\\n      line-height: 150%;\\n\\n      color: var(--color-danger-color);\\n\\n      &__spacer {\\n        flex-grow: 1;\\n      }\\n\\n      &__icon {\\n        box-sizing: border-box;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        border-radius: 2.5rem;\\n        background: var(--color-danger-icon-background);\\n        width: 3.5rem;\\n        height: 3.5rem;\\n\\n        padding: 0.75rem;\\n\\n        svg {\\n          color: var(--color-danger-icon-color);\\n          width: 1.5rem;\\n          height: 1.5rem;\\n        }\\n      }\\n\\n      &.OverwriteConfirm__Description--color-warning {\\n        background: var(--color-warning-background);\\n        color: var(--color-warning-color);\\n\\n        .OverwriteConfirm__Description__icon {\\n          background: var(--color-warning-icon-background);\\n          flex: 0 0 auto;\\n\\n          svg {\\n            color: var(--color-warning-icon-color);\\n          }\\n        }\\n      }\\n    }\\n\\n    &__Actions {\\n      display: flex;\\n      flex-direction: row;\\n      align-items: stretch;\\n      justify-items: stretch;\\n      justify-content: center;\\n      gap: 1.5rem;\\n\\n      @include isMobile {\\n        flex-direction: column;\\n      }\\n\\n      &__Action {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: center;\\n        padding: 1.5rem;\\n        gap: 0.75rem;\\n        flex-basis: 50%;\\n        flex-grow: 0;\\n\\n        &__content {\\n          height: 100%;\\n          font-size: 0.875rem;\\n          text-align: center;\\n        }\\n\\n        h4 {\\n          font-weight: 700;\\n          font-size: 1.125rem;\\n          line-height: 130%;\\n\\n          margin: 0;\\n\\n          color: var(--text-primary-color);\\n        }\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import tEXt from \"png-chunk-text\";\nimport encodePng from \"png-chunks-encode\";\nimport decodePng from \"png-chunks-extract\";\n\nimport { EXPORT_DATA_TYPES, MIME_TYPES } from \"@jsondraw/common\";\n\nimport { blobToArrayBuffer } from \"./blob\";\nimport { encode, decode } from \"./encode\";\n\n// -----------------------------------------------------------------------------\n// PNG\n// -----------------------------------------------------------------------------\n\nexport const getTEXtChunk = async (\n  blob: Blob,\n): Promise<{ keyword: string; text: string } | null> => {\n  const chunks = decodePng(new Uint8Array(await blobToArrayBuffer(blob)));\n  const metadataChunk = chunks.find((chunk) => chunk.name === \"tEXt\");\n  if (metadataChunk) {\n    return tEXt.decode(metadataChunk.data);\n  }\n  return null;\n};\n\nexport const encodePngMetadata = async ({\n  blob,\n  metadata,\n}: {\n  blob: Blob;\n  metadata: string;\n}) => {\n  const chunks = decodePng(new Uint8Array(await blobToArrayBuffer(blob)));\n\n  const metadataChunk = tEXt.encode(\n    MIME_TYPES.jsondraw,\n    JSON.stringify(\n      encode({\n        text: metadata,\n        compress: true,\n      }),\n    ),\n  );\n  // insert metadata before last chunk (iEND)\n  chunks.splice(-1, 0, metadataChunk);\n\n  return new Blob([encodePng(chunks)], { type: MIME_TYPES.png });\n};\n\nexport const decodePngMetadata = async (blob: Blob) => {\n  const metadata = await getTEXtChunk(blob);\n  if (metadata?.keyword === MIME_TYPES.jsondraw) {\n    try {\n      const encodedData = JSON.parse(metadata.text);\n      if (!(\"encoded\" in encodedData)) {\n        // legacy, un-encoded scene JSON\n        if (\n          \"type\" in encodedData &&\n          encodedData.type === EXPORT_DATA_TYPES.jsondraw\n        ) {\n          return metadata.text;\n        }\n        throw new Error(\"FAILED\");\n      }\n      return decode(encodedData);\n    } catch (error: any) {\n      console.error(error);\n      throw new Error(\"FAILED\");\n    }\n  }\n  throw new Error(\"INVALID\");\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .drag-input-container{display:flex;width:100%;border-radius:var(--border-radius-lg)}.jsondraw .drag-input-container:focus-within{box-shadow:0 0 0 1px var(--color-primary-darkest);border-radius:var(--border-radius-md);background:rgba(0,0,0,0)}.jsondraw .disabled{opacity:.5;pointer-events:none}.jsondraw .drag-input-label{flex-shrink:0;border:0;padding:0 .5rem 0 .25rem;min-width:1rem;width:1.5rem;height:2rem;box-sizing:content-box;color:var(--popup-text-color);display:flex;align-items:center;justify-content:center;position:relative}.jsondraw .drag-input{box-sizing:border-box;width:100%;margin:0;font-size:.875rem;font-family:inherit;background-color:rgba(0,0,0,0);color:var(--text-primary-color);border:0;outline:none;height:2rem;letter-spacing:.4px;padding:.5rem;padding-left:.25rem;appearance:none}.jsondraw .drag-input:focus-visible{box-shadow:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/Stats/DragInput.scss\"],\"names\":[],\"mappings\":\"AACE,gCACE,YAAA,CACA,UAAA,CACA,qCAAA,CAEA,6CACE,iDAAA,CACA,qCAAA,CACA,wBAAA,CAIJ,oBACE,UAAA,CACA,mBAAA,CAGF,4BACE,aAAA,CACA,QAAA,CACA,wBAAA,CACA,cAAA,CACA,YAAA,CACA,WAAA,CACA,sBAAA,CACA,6BAAA,CAEA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CAGF,sBACE,qBAAA,CACA,UAAA,CACA,QAAA,CACA,iBAAA,CACA,mBAAA,CACA,8BAAA,CACA,+BAAA,CACA,QAAA,CACA,YAAA,CACA,WAAA,CACA,mBAAA,CAEA,aAAA,CACA,mBAAA,CACA,eAAA,CAEA,oCACE,eAAA\",\"sourcesContent\":[\".jsondraw {\\n  .drag-input-container {\\n    display: flex;\\n    width: 100%;\\n    border-radius: var(--border-radius-lg);\\n\\n    &:focus-within {\\n      box-shadow: 0 0 0 1px var(--color-primary-darkest);\\n      border-radius: var(--border-radius-md);\\n      background: transparent;\\n    }\\n  }\\n\\n  .disabled {\\n    opacity: 0.5;\\n    pointer-events: none;\\n  }\\n\\n  .drag-input-label {\\n    flex-shrink: 0;\\n    border: 0;\\n    padding: 0 0.5rem 0 0.25rem;\\n    min-width: 1rem;\\n    width: 1.5rem;\\n    height: 2rem;\\n    box-sizing: content-box;\\n    color: var(--popup-text-color);\\n\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    position: relative;\\n  }\\n\\n  .drag-input {\\n    box-sizing: border-box;\\n    width: 100%;\\n    margin: 0;\\n    font-size: 0.875rem;\\n    font-family: inherit;\\n    background-color: transparent;\\n    color: var(--text-primary-color);\\n    border: 0;\\n    outline: none;\\n    height: 2rem;\\n    letter-spacing: 0.4px;\\n\\n    padding: 0.5rem;\\n    padding-left: 0.25rem;\\n    appearance: none;\\n\\n    &:focus-visible {\\n      box-shadow: none;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .App-toolbar.zen-mode .ToolIcon__keybinding,.jsondraw .App-toolbar.zen-mode .HintViewer{display:none}.jsondraw .App-toolbar--compact .ToolIcon__keybinding{display:none}.jsondraw .App-toolbar--compact .App-toolbar__divider{margin:0}.jsondraw .App-toolbar__divider{width:1px;height:1.5rem;align-self:center;background-color:var(--default-border-color);margin:0 .25rem}.jsondraw--mobile.jsondraw .App-toolbar__divider{margin:0}.jsondraw .App-toolbar__extra-tools-trigger{box-shadow:none;border:0;background-color:rgba(0,0,0,0)}.jsondraw .App-toolbar__extra-tools-trigger:active{background-color:var(--button-hover-bg);box-shadow:0 0 0 1px var(--button-active-border, var(--color-primary-darkest)) inset}.jsondraw .App-toolbar__extra-tools-trigger:hover{background-color:rgba(0,0,0,0)}.jsondraw .App-toolbar__extra-tools-trigger--selected,.jsondraw .App-toolbar__extra-tools-trigger--selected:hover{background:var(--color-primary-light);color:var(--color-primary)}.jsondraw .App-toolbar__extra-tools-dropdown{margin-top:.375rem;right:0;min-width:11.875rem;z-index:1}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/toolbar/Toolbar.scss\"],\"names\":[],\"mappings\":\"AAKM,kGAEE,YAAA,CAKF,sDACE,YAAA,CAGF,sDACE,QAAA,CAIJ,gCACE,SAAA,CACA,aAAA,CACA,iBAAA,CACA,4CAAA,CACA,eAAA,CAAA,iDAGE,QAAA,CAKN,4CACE,eAAA,CACA,QAAA,CACA,8BAAA,CAEA,mDACE,uCAAA,CACA,oFAAA,CAGF,kDACE,8BAAA,CAGF,kHAEE,qCAAA,CACA,0BAAA,CAIJ,6CACE,kBAAA,CACA,OAAA,CACA,mBAAA,CACA,SAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .App-toolbar {\\n    &.zen-mode {\\n      .ToolIcon__keybinding,\\n      .HintViewer {\\n        display: none;\\n      }\\n    }\\n\\n    &--compact {\\n      .ToolIcon__keybinding {\\n        display: none;\\n      }\\n\\n      .App-toolbar__divider {\\n        margin: 0;\\n      }\\n    }\\n\\n    &__divider {\\n      width: 1px;\\n      height: 1.5rem;\\n      align-self: center;\\n      background-color: var(--default-border-color);\\n      margin: 0 0.25rem;\\n\\n      @include isMobile {\\n        margin: 0;\\n      }\\n    }\\n  }\\n\\n  .App-toolbar__extra-tools-trigger {\\n    box-shadow: none;\\n    border: 0;\\n    background-color: transparent;\\n\\n    &:active {\\n      background-color: var(--button-hover-bg);\\n      box-shadow: 0 0 0 1px var(--button-active-border, var(--color-primary-darkest)) inset;\\n    }\\n\\n    &:hover {\\n      background-color: transparent;\\n    }\\n\\n    &--selected,\\n    &--selected:hover {\\n      background: var(--color-primary-light);\\n      color: var(--color-primary);\\n    }\\n  }\\n\\n  .App-toolbar__extra-tools-dropdown {\\n    margin-top: 0.375rem;\\n    right: 0;\\n    min-width: 11.875rem;\\n    z-index: 1;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.visually-hidden{position:absolute !important;height:1px;width:1px;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);white-space:nowrap;user-select:none}.LoadingMessage{position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none}.LoadingMessage .Spinner{font-size:2.8em}.LoadingMessage .LoadingMessage-text{margin-top:1em;font-size:.8em}.LoadingMessage--dark{background-color:#121212;color:#ced4da}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/css/app.scss\"],\"names\":[],\"mappings\":\"AAAA,iBACE,4BAAA,CACA,UAAA,CACA,SAAA,CACA,eAAA,CACA,6BAAA,CACA,kBAAA,CACA,gBAAA,CAGF,gBACE,iBAAA,CACA,KAAA,CACA,OAAA,CACA,QAAA,CACA,MAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,mBAAA,CAEA,yBACE,eAAA,CAGF,qCACE,cAAA,CACA,cAAA,CAIJ,sBACE,wBAAA,CACA,aAAA\",\"sourcesContent\":[\".visually-hidden {\\n  position: absolute !important;\\n  height: 1px;\\n  width: 1px;\\n  overflow: hidden;\\n  clip: rect(1px, 1px, 1px, 1px);\\n  white-space: nowrap; /* added line */\\n  user-select: none;\\n}\\n\\n.LoadingMessage {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  z-index: 999;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  pointer-events: none;\\n\\n  .Spinner {\\n    font-size: 2.8em;\\n  }\\n\\n  .LoadingMessage-text {\\n    margin-top: 1em;\\n    font-size: 0.8em;\\n  }\\n}\\n\\n.LoadingMessage--dark {\\n  background-color: #121212;\\n  color: #ced4da;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .layer-ui__search{flex:1 0 auto;display:flex;flex-direction:column;padding:8px 0 0 0}.jsondraw .layer-ui__search-header{display:flex;justify-content:space-between;align-items:center;padding:0 .75rem}.jsondraw .layer-ui__search-header .ExcTextField{flex:1 0 auto}.jsondraw .layer-ui__search-header .ExcTextField__input{background-color:#f5f5f9}.jsondraw.theme--dark.jsondraw .layer-ui__search-header .ExcTextField__input{background-color:#31303b}.jsondraw .layer-ui__search-header .ExcTextField__input{border-radius:var(--border-radius-md);border:0}.jsondraw .layer-ui__search-header .ExcTextField__input input::placeholder{font-size:.9rem}.jsondraw .layer-ui__search-count{display:flex;justify-content:space-between;align-items:center;padding:8px 8px 0 8px;margin:0 .75rem .25rem .75rem;font-size:.8em}.jsondraw .layer-ui__search-count .result-nav{display:flex}.jsondraw .layer-ui__search-count .result-nav .result-nav-btn{width:36px;height:36px;--button-border: transparent}.jsondraw .layer-ui__search-count .result-nav .result-nav-btn:active{background-color:var(--color-surface-high)}.jsondraw .layer-ui__search-count .result-nav .result-nav-btn:first-child{margin-right:4px}.jsondraw .layer-ui__search-result-container{overflow-y:auto;flex:1 1 0;display:flex;flex-direction:column;padding:0 .75rem;gap:.125rem}.jsondraw .layer-ui__search .collapsible-items{gap:2px}.jsondraw .layer-ui__search-result-title{font-size:.875rem;margin-bottom:.25rem;display:flex;align-items:center;gap:.25rem;font-weight:700}.jsondraw .layer-ui__search-result-title .title-icon{width:.875rem;height:.875rem;margin-right:.25rem}.jsondraw .layer-ui__search-result-title .title-icon svg g{stroke-width:1.25}.jsondraw .layer-ui__divider{width:100%;margin-top:.25rem;margin-bottom:1rem;position:relative}.jsondraw .layer-ui__result-item{display:flex;align-items:center;min-height:1.875rem;flex:0 0 auto;padding:.25rem .75rem;cursor:pointer;border:1px solid rgba(0,0,0,0);outline:none;font-size:16px;border-radius:var(--border-radius-md)}.jsondraw .layer-ui__result-item .text-icon{width:1rem;height:1rem;margin-right:.75rem}.jsondraw .layer-ui__result-item .preview-text{flex:1;max-height:48px;line-height:24px;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.jsondraw .layer-ui__result-item:hover{background-color:var(--color-surface-high)}.jsondraw .layer-ui__result-item:active{border-color:var(--color-primary)}.jsondraw .layer-ui__result-item.active{background-color:var(--color-surface-high)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/search/SearchMenu.scss\"],\"names\":[],\"mappings\":\"AAGE,4BACE,aAAA,CACA,YAAA,CACA,qBAAA,CACA,iBAAA,CAGF,mCACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,gBAAA,CACA,iDACE,aAAA,CAGF,wDACE,wBAAA,CACS,6EACP,wBAAA,CAHJ,wDAME,qCAAA,CACA,QAAA,CAEA,2EACE,eAAA,CAKN,kCACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,qBAAA,CACA,6BAAA,CACA,cAAA,CAEA,8CACE,YAAA,CAEA,8DACE,UAAA,CACA,WAAA,CACA,4BAAA,CAEA,qEACE,0CAAA,CAGF,0EACE,gBAAA,CAMR,6CACE,eAAA,CACA,UAAA,CACA,YAAA,CACA,qBAAA,CACA,gBAAA,CAEA,WAAA,CAGF,+CACE,OAAA,CAGF,yCACE,iBAAA,CACA,oBAAA,CACA,YAAA,CACA,kBAAA,CACA,UAAA,CACA,eAAA,CAEA,qDACE,aAAA,CACA,cAAA,CACA,mBAAA,CACA,2DACE,iBAAA,CAKN,6BACE,UAAA,CACA,iBAAA,CACA,kBAAA,CACA,iBAAA,CAGF,iCACE,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,aAAA,CACA,qBAAA,CACA,cAAA,CACA,8BAAA,CACA,YAAA,CACA,cAAA,CAEA,qCAAA,CAEA,4CACE,UAAA,CACA,WAAA,CACA,mBAAA,CAGF,+CACE,MAAA,CACA,eAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CACA,oBAAA,CAGF,uCACE,0CAAA,CAEF,wCACE,iCAAA,CAGF,wCACE,0CAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .layer-ui__search {\\n    flex: 1 0 auto;\\n    display: flex;\\n    flex-direction: column;\\n    padding: 8px 0 0 0;\\n  }\\n\\n  .layer-ui__search-header {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    padding: 0 0.75rem;\\n    .ExcTextField {\\n      flex: 1 0 auto;\\n    }\\n\\n    .ExcTextField__input {\\n      background-color: #f5f5f9;\\n      @at-root .jsondraw.theme--dark#{&} {\\n        background-color: #31303b;\\n      }\\n\\n      border-radius: var(--border-radius-md);\\n      border: 0;\\n\\n      input::placeholder {\\n        font-size: 0.9rem;\\n      }\\n    }\\n  }\\n\\n  .layer-ui__search-count {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    padding: 8px 8px 0 8px;\\n    margin: 0 0.75rem 0.25rem 0.75rem;\\n    font-size: 0.8em;\\n\\n    .result-nav {\\n      display: flex;\\n\\n      .result-nav-btn {\\n        width: 36px;\\n        height: 36px;\\n        --button-border: transparent;\\n\\n        &:active {\\n          background-color: var(--color-surface-high);\\n        }\\n\\n        &:first-child {\\n          margin-right: 4px;\\n        }\\n      }\\n    }\\n  }\\n\\n  .layer-ui__search-result-container {\\n    overflow-y: auto;\\n    flex: 1 1 0;\\n    display: flex;\\n    flex-direction: column;\\n    padding: 0 0.75rem;\\n\\n    gap: 0.125rem;\\n  }\\n\\n  .layer-ui__search .collapsible-items {\\n    gap: 2px;\\n  }\\n\\n  .layer-ui__search-result-title {\\n    font-size: 0.875rem;\\n    margin-bottom: 0.25rem;\\n    display: flex;\\n    align-items: center;\\n    gap: 0.25rem;\\n    font-weight: 700;\\n\\n    .title-icon {\\n      width: 0.875rem;\\n      height: 0.875rem;\\n      margin-right: 0.25rem;\\n      svg g {\\n        stroke-width: 1.25;\\n      }\\n    }\\n  }\\n\\n  .layer-ui__divider {\\n    width: 100%;\\n    margin-top: 0.25rem;\\n    margin-bottom: 1rem;\\n    position: relative;\\n  }\\n\\n  .layer-ui__result-item {\\n    display: flex;\\n    align-items: center;\\n    min-height: 1.875rem;\\n    flex: 0 0 auto;\\n    padding: 0.25rem 0.75rem;\\n    cursor: pointer;\\n    border: 1px solid transparent;\\n    outline: none;\\n    font-size: 16px;\\n\\n    border-radius: var(--border-radius-md);\\n\\n    .text-icon {\\n      width: 1rem;\\n      height: 1rem;\\n      margin-right: 0.75rem;\\n    }\\n\\n    .preview-text {\\n      flex: 1;\\n      max-height: 48px;\\n      line-height: 24px;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      word-break: break-all;\\n    }\\n\\n    &:hover {\\n      background-color: var(--color-surface-high);\\n    }\\n    &:active {\\n      border-color: var(--color-primary);\\n    }\\n\\n    &.active {\\n      background-color: var(--color-surface-high);\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","//\n// All icons are imported from https://fontawesome.com/icons?d=gallery\n// Icons are under the license https://fontawesome.com/license\n//\n\n// Note: when adding new icons, review https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/RTL_Guidelines\n// to determine whether or not the icons should be mirrored in right-to-left languages.\n\nimport clsx from \"clsx\";\nimport React from \"react\";\n\nimport { THEME } from \"@jsondraw/common\";\n\nimport type { Theme } from \"@jsondraw/element/types\";\n\nexport const iconFillColor = (theme: Theme) => \"var(--icon-fill-color)\";\n\nconst handlerColor = (theme: Theme) =>\n  theme === THEME.LIGHT ? \"#fff\" : \"#1e1e1e\";\n\ntype Opts = {\n  width?: number;\n  height?: number;\n  mirror?: true;\n} & React.SVGProps<SVGSVGElement>;\n\nexport const createIcon = (\n  d: string | React.ReactNode,\n  opts: number | Opts = 512,\n) => {\n  const {\n    width = 512,\n    height = width,\n    mirror,\n    style,\n    ...rest\n  } = typeof opts === \"number\" ? ({ width: opts } as Opts) : opts;\n  return (\n    <svg\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      role=\"img\"\n      viewBox={`0 0 ${width} ${height}`}\n      className={clsx({ \"rtl-mirror\": mirror })}\n      style={style}\n      {...rest}\n    >\n      {typeof d === \"string\" ? <path fill=\"currentColor\" d={d} /> : d}\n    </svg>\n  );\n};\n\nconst tablerIconProps: Opts = {\n  width: 24,\n  height: 24,\n  fill: \"none\",\n  strokeWidth: 2,\n  stroke: \"currentColor\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n} as const;\n\nconst modifiedTablerIconProps: Opts = {\n  width: 20,\n  height: 20,\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n} as const;\n\n// -----------------------------------------------------------------------------\n\n// tabler-icons: present\nexport const PlusPromoIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <rect x={3} y={8} width={18} height={4} rx={1} />\n    <line x1={12} y1={8} x2={12} y2={21} />\n    <path d=\"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7\" />\n    <path d=\"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: book\nexport const LibraryIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0\" />\n    <path d=\"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0\" />\n    <line x1=\"3\" y1=\"6\" x2=\"3\" y2=\"19\" />\n    <line x1=\"12\" y1=\"6\" x2=\"12\" y2=\"19\" />\n    <line x1=\"21\" y1=\"6\" x2=\"21\" y2=\"19\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: plus\nexport const PlusIcon = createIcon(\n  <svg strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n  </svg>,\n  tablerIconProps,\n);\n\n// tabler-icons: dots-vertical\nexport const DotsIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n    <circle cx=\"12\" cy=\"19\" r=\"1\"></circle>\n    <circle cx=\"12\" cy=\"5\" r=\"1\"></circle>\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: dots-horizontal (horizontal equivalent of dots-vertical)\nexport const DotsHorizontalIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0\" />\n    <path d=\"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0\" />\n    <path d=\"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: pinned\nexport const PinIcon = createIcon(\n  <svg strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M9 4v6l-2 4v2h10v-2l-2 -4v-6\"></path>\n    <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"21\"></line>\n    <line x1=\"8\" y1=\"4\" x2=\"16\" y2=\"4\"></line>\n  </svg>,\n  tablerIconProps,\n);\n\nexport const polygonIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M6.5 9.5l3.5 -3\" />\n    <path d=\"M14 5.5l3 1.5\" />\n    <path d=\"M18.5 10l-2.5 7\" />\n    <path d=\"M13.5 17.5l-7 -5\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: lock-open (via Figma)\nexport const UnlockedIcon = createIcon(\n  <g>\n    <path\n      d=\"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n    />\n    <path\n      d=\"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n    />\n    <mask\n      id=\"UnlockedIcon\"\n      style={{ maskType: \"alpha\" }}\n      maskUnits=\"userSpaceOnUse\"\n      x={6}\n      y={1}\n      width={9}\n      height={9}\n    >\n      <path\n        stroke=\"none\"\n        d=\"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481\"\n        fill=\"#fff\"\n      />\n    </mask>\n    <g mask=\"url(#UnlockedIcon)\">\n      <path\n        stroke=\"none\"\n        d=\"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n  </g>,\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: lock (via Figma)\nexport const LockedIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z\" />\n    <path d=\"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z\" />\n    <path d=\"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const LockedIconFilled = createIcon(\n  <g fill=\"currentColor\">\n    <path d=\"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-6a3 3 0 0 1 3 -3v-3a5 5 0 0 1 5 -5m0 12a2 2 0 0 0 -1.995 1.85l-.005 .15a2 2 0 1 0 2 -2m0 -10a3 3 0 0 0 -3 3v3h6v-3a3 3 0 0 0 -3 -3\" />\n  </g>,\n  {\n    width: 24,\n    height: 24,\n  },\n);\n\n// custom\nexport const WelcomeScreenMenuArrow = createIcon(\n  <>\n    <path\n      d=\"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n  </>,\n  { width: 41, height: 94, fill: \"none\" },\n);\n\n// custom\nexport const WelcomeScreenHelpArrow = createIcon(\n  <>\n    <path\n      d=\"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n  </>,\n  { width: 85, height: 71, fill: \"none\" },\n);\n\n// custom\nexport const WelcomeScreenTopToolbarArrow = createIcon(\n  <>\n    <path\n      d=\"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n  </>,\n  { width: 38, height: 78, fill: \"none\" },\n);\n\n// custom\nexport const ExcalLogo = createIcon(\n  <g fill=\"currentColor\">\n    <path\n      d=\"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z\"\n      fill=\"currentColor\"\n    />\n  </g>,\n  { width: 40, height: 40, fill: \"none\" },\n);\n\n// custom\nexport const SelectionIcon = createIcon(\n  <g stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z\" />\n    <path d=\"M13.5 13.5l4.5 4.5\" />\n  </g>,\n  { fill: \"none\", width: 22, height: 22, strokeWidth: 1.25 },\n);\n\nexport const LassoIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    strokeWidth={1.5}\n  >\n    <path d=\"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255\" />\n    <path d=\"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M5 17c0 1.42 .316 2.805 1 4\" />\n  </g>,\n\n  { fill: \"none\", width: 22, height: 22, strokeWidth: 1.25 },\n);\n\n// tabler-icons: square\nexport const RectangleIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"></rect>\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: square-rotated\nexport const DiamondIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z\" />\n  </g>,\n\n  tablerIconProps,\n);\n\n// tabler-icons: circle\nexport const EllipseIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <circle cx=\"12\" cy=\"12\" r=\"9\"></circle>\n  </g>,\n\n  tablerIconProps,\n);\n\n// tabler-icons: arrow-narrow-right\nexport const ArrowIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n    <line x1=\"15\" y1=\"16\" x2=\"19\" y2=\"12\" />\n    <line x1=\"15\" y1=\"8\" x2=\"19\" y2=\"12\" />\n  </g>,\n  tablerIconProps,\n);\n\n// custom?\nexport const LineIcon = createIcon(\n  <path d=\"M4.167 10h11.666\" strokeWidth=\"1.5\" />,\n  modifiedTablerIconProps,\n);\n\nexport const PenModeIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z\"></path>\n    <path d=\"M16 7h4\"></path>\n    <path d=\"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3\"></path>\n  </g>,\n  tablerIconProps,\n);\n\n// modified tabler-icons: pencil\nexport const FreedrawIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path\n      clipRule=\"evenodd\"\n      d=\"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z\"\n    />\n    <path d=\"m11.25 5.417 3.333 3.333\" />\n  </g>,\n\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: typography\nexport const TextIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"20\" x2=\"7\" y2=\"20\" />\n    <line x1=\"14\" y1=\"20\" x2=\"21\" y2=\"20\" />\n    <line x1=\"6.9\" y1=\"15\" x2=\"13.8\" y2=\"15\" />\n    <line x1=\"10.2\" y1=\"6.3\" x2=\"16\" y2=\"20\" />\n    <polyline points=\"5 20 11 4 13 4 20 20\"></polyline>\n  </g>,\n  tablerIconProps,\n);\n\nexport const TextSizeIcon = createIcon(\n  <g stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 7v-2h13v2\" />\n    <path d=\"M10 5v14\" />\n    <path d=\"M12 19h-4\" />\n    <path d=\"M15 13v-1h6v1\" />\n    <path d=\"M18 12v7\" />\n    <path d=\"M17 19h2\" />\n  </g>,\n  tablerIconProps,\n);\n\n// modified tabler-icons: photo\nexport const ImageIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M12.5 6.667h.01\" />\n    <path d=\"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z\" />\n    <path d=\"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166\" />\n    <path d=\"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: eraser\nexport const EraserIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3\" />\n    <path d=\"M18 13.3l-6.3 -6.3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ZoomInIcon = createIcon(\n  <path strokeWidth=\"1.25\" d=\"M10 4.167v11.666M4.167 10h11.666\" />,\n  modifiedTablerIconProps,\n);\n\nexport const ZoomOutIcon = createIcon(\n  <path d=\"M5 10h10\" strokeWidth=\"1.25\" />,\n  modifiedTablerIconProps,\n);\n\nexport const ZoomResetIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M21 21l-6 -6\" />\n    <path d=\"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403\" />\n    <path d=\"M3 4v4h4\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const TrashIcon = createIcon(\n  <path\n    strokeWidth=\"1.25\"\n    d=\"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const EmbedIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <polyline points=\"12 16 18 10 12 4\" />\n    <polyline points=\"8 4 2 10 8 16\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const DuplicateIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z\" />\n    <path\n      clipRule=\"evenodd\"\n      d=\"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z\"\n    />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const MoonIcon = createIcon(\n  <path\n    clipRule=\"evenodd\"\n    d=\"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z\"\n    stroke=\"currentColor\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const SunIcon = createIcon(\n  <g stroke=\"currentColor\" strokeLinejoin=\"round\">\n    <path d=\"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667\" />\n  </g>,\n  { ...modifiedTablerIconProps, strokeWidth: 1.5 },\n);\n\nexport const HamburgerMenuIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <line x1=\"4\" y1=\"6\" x2=\"20\" y2=\"6\"></line>\n    <line x1=\"4\" y1=\"12\" x2=\"20\" y2=\"12\"></line>\n    <line x1=\"4\" y1=\"18\" x2=\"20\" y2=\"18\"></line>\n  </g>,\n  tablerIconProps,\n);\n\nexport const ExportIcon = createIcon(\n  <path\n    strokeWidth=\"1.25\"\n    d=\"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const HelpIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"12\" cy=\"12\" r=\"9\"></circle>\n    <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"17.01\"></line>\n    <path d=\"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const HelpIconThin = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"12\" cy=\"12\" r=\"9\"></circle>\n    <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"17.01\"></line>\n    <path d=\"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const ExternalLinkIcon = createIcon(\n  <path\n    strokeWidth=\"1.25\"\n    d=\"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const GithubIcon = createIcon(\n  <path\n    d=\"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const DiscordIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0\" />\n    <path d=\"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const XBrandIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 4l11.733 16h4.267l-11.733 -16z\" />\n    <path d=\"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const checkIcon = createIcon(\n  <polyline fill=\"none\" stroke=\"currentColor\" points=\"20 6 9 17 4 12\" />,\n  {\n    width: 24,\n    height: 24,\n  },\n);\n\nexport const LinkIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416\" />\n    <path d=\"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const save = createIcon(\n  \"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z\",\n  { width: 448, height: 512 },\n);\n\nexport const saveAs = createIcon(\n  \"M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z\",\n  { width: 448, height: 512 },\n);\n\n// tabler-icon: folder\nexport const LoadIcon = createIcon(\n  <path\n    d=\"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const clipboard = createIcon(\n  \"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z\",\n  { width: 384, height: 512 },\n);\n\nexport const palette = createIcon(\n  \"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\",\n);\n\nexport const bucketFillIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z\" />\n    <path d=\"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z\" />\n    <path d=\"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208\" />\n  </g>,\n  tablerIconProps,\n);\n\n// simple / icon\nexport const slashIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path d=\"M6 18l12 -12\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ExportImageIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M15 8h.01\"></path>\n    <path d=\"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5\"></path>\n    <path d=\"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4\"></path>\n    <path d=\"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598\"></path>\n    <path d=\"M19 16v6\"></path>\n    <path d=\"M22 19l-3 3l-3 -3\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const exportToFileIcon = createIcon(\n  \"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\",\n  { width: 512, height: 512 },\n);\n\nexport const zoomIn = createIcon(\n  \"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\",\n  { width: 448, height: 512 },\n);\n\nexport const zoomOut = createIcon(\n  \"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\",\n  { width: 448, height: 512 },\n);\n\nexport const done = createIcon(\n  \"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\",\n);\n\nexport const menu = createIcon(\n  \"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\",\n);\n\nexport const UndoIcon = createIcon(\n  <path\n    d=\"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const RedoIcon = createIcon(\n  <path\n    d=\"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const questionCircle = createIcon(\n  \"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z\",\n  { mirror: true },\n);\n\nexport const share = createIcon(\n  <path\n    d=\"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834\"\n    strokeWidth=\"1.5\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const warning = createIcon(\n  \"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z\",\n);\n\nexport const shareIOS = createIcon(\n  \"M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z\",\n  { width: 24, height: 24 },\n);\n\nexport const exportToPlus = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1\" />\n    <path d=\"M12 14v-11\" />\n    <path d=\"M9 6l3 -3l3 3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const shareWindows = createIcon(\n  <>\n    <path\n      fill=\"currentColor\"\n      d=\"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z\"\n    />\n    <path\n      stroke=\"currentColor\"\n      fill=\"currentColor\"\n      d=\"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z\"\n    />\n  </>,\n  { width: 64, height: 64 },\n);\n\n// Icon imported form Storybook\n// Storybook is licensed under MIT https://github.com/storybookjs/storybook/blob/next/LICENSE\nexport const resetZoom = createIcon(\n  <path\n    stroke=\"currentColor\"\n    strokeWidth=\"40\"\n    fill=\"currentColor\"\n    d=\"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z\"\n  />,\n  { width: 1024 },\n);\n\nconst arrowBarToTopJSX = (\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M12 10l0 10\" />\n    <path d=\"M12 10l4 4\" />\n    <path d=\"M12 10l-4 4\" />\n    <path d=\"M4 4l16 0\" />\n  </g>\n);\n\nconst arrownNarrowUpJSX = (\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M12 5l0 14\" />\n    <path d=\"M16 9l-4 -4\" />\n    <path d=\"M8 9l4 -4\" />\n  </g>\n);\n\nexport const BringForwardIcon = createIcon(arrownNarrowUpJSX, tablerIconProps);\n\nexport const SendBackwardIcon = createIcon(arrownNarrowUpJSX, {\n  ...tablerIconProps,\n  style: {\n    transform: \"rotate(180deg)\",\n  },\n});\n\nexport const BringToFrontIcon = createIcon(arrowBarToTopJSX, tablerIconProps);\n\nexport const SendToBackIcon = createIcon(arrowBarToTopJSX, {\n  ...tablerIconProps,\n  style: {\n    transform: \"rotate(180deg)\",\n  },\n});\n\n//\n// Align action icons created from scratch to match those of z-index actions\n// Note: vertical align icons are flipped so the larger item is always the\n// first one the user sees. Horizontal align icons should not be flipped since\n// that would make them lie about their function.\n//\nexport const AlignTopIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 3.333h13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const AlignBottomIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 16.667h13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const AlignLeftIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 3.333v13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const AlignRightIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M16.667 3.333v13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const DistributeHorizontallyIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M16.667 3.333v13.334M3.333 3.333v13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const DistributeVerticallyIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 3.333h13.334M3.333 16.667h13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const CenterVerticallyIcon = createIcon(\n  <g stroke=\"currentColor\" strokeWidth=\"1.25\">\n    <path d=\"M1.667 10h2.916\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M8.333 10h3.334\" strokeLinejoin=\"round\" />\n    <path d=\"M15.417 10h2.916\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const CenterHorizontallyIcon = createIcon(\n  <g stroke=\"currentColor\" strokeWidth=\"1.25\">\n    <path d=\"M10 18.333v-2.916\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M10 11.667V8.333\" strokeLinejoin=\"round\" />\n    <path d=\"M10 4.583V1.667\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const usersIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n    <path d=\"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2\"></path>\n    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\n    <path d=\"M21 21v-2a4 4 0 0 0 -3 -3.85\"></path>\n  </g>,\n  tablerIconProps,\n);\n\n// not mirrored because it's inspired by a playback control, which is always RTL\nexport const start = createIcon(\n  \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z\",\n);\n\nexport const stop = createIcon(\n  \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z\",\n);\n\nexport const CloseIcon = createIcon(\n  <>\n    <g\n      clipPath=\"url(#a)\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M15 5 5 15M5 5l10 10\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const clone = createIcon(\n  \"M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z\",\n  { mirror: true },\n);\n\n// modified https://feathericons.com/?query=shield\nexport const shield = createIcon(\n  \"M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z\",\n  { width: 24 },\n);\n\nexport const file = createIcon(\n  \"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z\",\n  { width: 384, height: 512 },\n);\n\n// TODO barnabasmolnar/editor-redesign\n// couldn't find a new icon for this\nexport const GroupIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <>\n      <path d=\"M25 26H111V111H25\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <path d=\"M100 100H160V160H100\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <g\n        fill={handlerColor(theme)}\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"6\"\n      >\n        <rect x=\"2.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n        <rect x=\"2.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n      </g>\n    </>,\n    { width: 182, height: 182, mirror: true },\n  ),\n);\n\nexport const UngroupIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <>\n      <path d=\"M25 26H111V111H25\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <path d=\"M100 100H160V160H100\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <g\n        fill={handlerColor(theme)}\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"6\"\n      >\n        <rect x=\"2.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n        <rect x=\"78.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"78.5\" width=\"30\" height=\"30\" />\n        <rect x=\"105.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n        <rect x=\"2.5\" y=\"102.5\" width=\"30\" height=\"30\" />\n      </g>\n    </>,\n    { width: 182, height: 182, mirror: true },\n  ),\n);\n\nexport const FillZigZagIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path d=\"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const FillHachureIcon = createIcon(\n  <>\n    <path\n      d=\"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n    />\n    <mask\n      id=\"FillHachureIcon\"\n      style={{ maskType: \"alpha\" }}\n      maskUnits=\"userSpaceOnUse\"\n      x={2}\n      y={2}\n      width={16}\n      height={16}\n    >\n      <path\n        d=\"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z\"\n        fill=\"currentColor\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n    </mask>\n    <g mask=\"url(#FillHachureIcon)\">\n      <path\n        d=\"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FillCrossHatchIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n      <mask\n        id=\"FillCrossHatchIcon\"\n        style={{ maskType: \"alpha\" }}\n        maskUnits=\"userSpaceOnUse\"\n        x={-1}\n        y={-1}\n        width={22}\n        height={22}\n      >\n        <path\n          d=\"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1.25\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </mask>\n      <g mask=\"url(#FillCrossHatchIcon)\">\n        <path\n          d=\"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z\"\n          fill=\"currentColor\"\n        />\n      </g>\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FillSolidIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  { ...modifiedTablerIconProps, fill: \"currentColor\" },\n);\n\nexport const StrokeWidthBaseIcon = createIcon(\n  <>\n    <path\n      d=\"M4.167 10h11.666\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const StrokeWidthBoldIcon = createIcon(\n  <path\n    d=\"M5 10h10\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2.5\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const StrokeWidthExtraBoldIcon = createIcon(\n  <path\n    d=\"M5 10h10\"\n    stroke=\"currentColor\"\n    strokeWidth=\"3.75\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const StrokeStyleSolidIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <path\n      d=\"M6 10H34\"\n      stroke={iconFillColor(theme)}\n      strokeWidth={2}\n      fill=\"none\"\n      strokeLinecap=\"round\"\n    />,\n    {\n      width: 40,\n      height: 20,\n    },\n  ),\n);\n\nexport const StrokeStyleDashedIcon = createIcon(\n  <g strokeWidth=\"2\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 12h2\" />\n    <path d=\"M17 12h2\" />\n    <path d=\"M11 12h2\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: line-dotted\nexport const StrokeStyleDottedIcon = createIcon(\n  <g strokeWidth=\"2\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 12v.01\" />\n    <path d=\"M8 12v.01\" />\n    <path d=\"M12 12v.01\" />\n    <path d=\"M16 12v.01\" />\n    <path d=\"M20 12v.01\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const SloppinessArchitectIcon = createIcon(\n  <path\n    d=\"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const SloppinessArtistIcon = createIcon(\n  <path\n    d=\"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const SloppinessCartoonistIcon = createIcon(\n  <path\n    d=\"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const EdgeSharpIcon = createIcon(\n  <svg strokeWidth=\"1.5\">\n    <path d=\"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10\" />\n    <path d=\"M13.3333 3.33331V3.34331\" />\n    <path d=\"M16.6667 3.33331V3.34331\" />\n    <path d=\"M16.6667 6.66669V6.67669\" />\n    <path d=\"M16.6667 10V10.01\" />\n    <path d=\"M3.33334 13.3333V13.3433\" />\n    <path d=\"M16.6667 13.3333V13.3433\" />\n    <path d=\"M3.33334 16.6667V16.6767\" />\n    <path d=\"M6.66666 16.6667V16.6767\" />\n    <path d=\"M10 16.6667V16.6767\" />\n    <path d=\"M13.3333 16.6667V16.6767\" />\n    <path d=\"M16.6667 16.6667V16.6767\" />\n  </svg>,\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: border-radius\nexport const EdgeRoundIcon = createIcon(\n  <g\n    strokeWidth=\"1.5\"\n    stroke=\"currentColor\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 12v-4a4 4 0 0 1 4 -4h4\" />\n    <line x1=\"16\" y1=\"4\" x2=\"16\" y2=\"4.01\" />\n    <line x1=\"20\" y1=\"4\" x2=\"20\" y2=\"4.01\" />\n    <line x1=\"20\" y1=\"8\" x2=\"20\" y2=\"8.01\" />\n    <line x1=\"20\" y1=\"12\" x2=\"20\" y2=\"12.01\" />\n    <line x1=\"4\" y1=\"16\" x2=\"4\" y2=\"16.01\" />\n    <line x1=\"20\" y1=\"16\" x2=\"20\" y2=\"16.01\" />\n    <line x1=\"4\" y1=\"20\" x2=\"4\" y2=\"20.01\" />\n    <line x1=\"8\" y1=\"20\" x2=\"8\" y2=\"20.01\" />\n    <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"20.01\" />\n    <line x1=\"16\" y1=\"20\" x2=\"16\" y2=\"20.01\" />\n    <line x1=\"20\" y1=\"20\" x2=\"20\" y2=\"20.01\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ArrowheadNoneIcon = createIcon(\n  <g stroke=\"currentColor\" opacity={0.3} strokeWidth={2}>\n    <path d=\"M12 12l9 0\" />\n    <path d=\"M3 9l6 6\" />\n    <path d=\"M3 15l6 -6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ArrowheadArrowIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        stroke=\"currentColor\"\n        strokeWidth={2}\n        fill=\"none\"\n      >\n        <path d=\"M34 10H6M34 10L27 5M34 10L27 15\" />\n        <path d=\"M27.5 5L34.5 10L27.5 15\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCircleIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"currentColor\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n      >\n        <path d=\"M32 10L6 10\" strokeWidth={2} />\n        <circle r=\"4\" transform=\"matrix(-1 0 0 1 30 10)\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCircleOutlineIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeWidth={2}\n      >\n        <path d=\"M26 10L6 10\" />\n        <circle r=\"4\" transform=\"matrix(-1 0 0 1 30 10)\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadBarIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}>\n        <path\n          d=\"M34 10H5.99996M34 10L34 5M34 10L34 15\"\n          stroke=\"currentColor\"\n          strokeWidth={2}\n          fill=\"none\"\n        />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadTriangleIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"currentColor\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n      >\n        <path d=\"M32 10L6 10\" strokeWidth={2} />\n        <path d=\"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadTriangleOutlineIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeWidth={2}\n        strokeLinejoin=\"round\"\n      >\n        <path d=\"M6,9.5H27\" />\n        <path d=\"M27,5L34,10L27,14Z\" fill=\"none\" />\n      </g>,\n\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadDiamondIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"currentColor\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M6,9.5H20\" />\n        <path d=\"M27,5L34,10L27,14L20,9.5Z\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadDiamondOutlineIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M6,9.5H20\" />\n        <path d=\"M27,5L34,10L27,14L20,9.5Z\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCrowfootIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"\" : \"translate(40, 0) scale(-1, 1)\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M34,10 H6 M15,10 L7,5 M15,10 L7,15\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCrowfootOneIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"\" : \"translate(40, 0) scale(-1, 1)\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M34,10 H6 M15,10 L15,15 L15,5\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCrowfootOneOrManyIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"\" : \"translate(40, 0) scale(-1, 1)\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const FontSizeSmallIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontSizeMediumIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5 16.667V3.333L10 15l5-11.667v13.334\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontSizeLargeIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5.833 3.333v13.334h8.334\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontSizeExtraLargeIcon = createIcon(\n  <>\n    <path\n      d=\"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const fontSizeIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 7v-2h13v2\" />\n    <path d=\"M10 5v14\" />\n    <path d=\"M12 19h-4\" />\n    <path d=\"M15 13v-1h6v1\" />\n    <path d=\"M18 12v7\" />\n    <path d=\"M17 19h2\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const FontFamilyHeadingIcon = createIcon(\n  <>\n    <g\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <path d=\"M7 12h10\" />\n      <path d=\"M7 5v14\" />\n      <path d=\"M17 5v14\" />\n      <path d=\"M15 19h4\" />\n      <path d=\"M15 5h4\" />\n      <path d=\"M5 19h4\" />\n      <path d=\"M5 5h4\" />\n    </g>\n  </>,\n  tablerIconProps,\n);\n\nexport const FontFamilyNormalIcon = createIcon(\n  <>\n    <g\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334\" />\n    </g>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const codeIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M7 8l-4 4l4 4\" />\n    <path d=\"M17 8l4 4l-4 4\" />\n    <path d=\"M14 4l-4 16\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const FontFamilyCodeIcon = codeIcon;\n\nexport const TextAlignLeftIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    strokeWidth={2}\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"8\" x2=\"20\" y2=\"8\" />\n    <line x1=\"4\" y1=\"12\" x2=\"12\" y2=\"12\" />\n    <line x1=\"4\" y1=\"16\" x2=\"16\" y2=\"16\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const TextAlignCenterIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"8\" x2=\"20\" y2=\"8\" />\n    <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" />\n    <line x1=\"6\" y1=\"16\" x2=\"18\" y2=\"16\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const TextAlignRightIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"8\" x2=\"20\" y2=\"8\" />\n    <line x1=\"10\" y1=\"12\" x2=\"20\" y2=\"12\" />\n    <line x1=\"8\" y1=\"16\" x2=\"20\" y2=\"16\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: layout-align-top\nexport const TextAlignTopIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <g\n      strokeWidth=\"1.5\"\n      stroke=\"currentColor\"\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <line x1=\"4\" y1=\"4\" x2=\"20\" y2=\"4\" />\n      <rect x=\"9\" y=\"8\" width=\"6\" height=\"12\" rx=\"2\" />\n    </g>,\n    tablerIconProps,\n  ),\n);\n\n// tabler-icons: layout-align-bottom\nexport const TextAlignBottomIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <g\n      strokeWidth=\"2\"\n      stroke=\"currentColor\"\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <line x1=\"4\" y1=\"20\" x2=\"20\" y2=\"20\" />\n      <rect x=\"9\" y=\"4\" width=\"6\" height=\"12\" rx=\"2\"></rect>\n    </g>,\n    tablerIconProps,\n  ),\n);\n\n// tabler-icons: layout-align-middle\nexport const TextAlignMiddleIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <g\n      strokeWidth=\"1.5\"\n      stroke=\"currentColor\"\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <line x1=\"4\" y1=\"12\" x2=\"9\" y2=\"12\" />\n      <line x1=\"15\" y1=\"12\" x2=\"20\" y2=\"12\" />\n      <rect x=\"9\" y=\"6\" width=\"6\" height=\"12\" rx=\"2\" />\n    </g>,\n    tablerIconProps,\n  ),\n);\n\nexport const angleIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M21 19h-18l9 -15\" />\n    <path d=\"M20.615 15.171h.015\" />\n    <path d=\"M19.515 11.771h.015\" />\n    <path d=\"M17.715 8.671h.015\" />\n    <path d=\"M15.415 5.971h.015\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const publishIcon = createIcon(\n  <path\n    d=\"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z\"\n    fill=\"currentColor\"\n  />,\n  { width: 640, height: 512 },\n);\n\nexport const eraser = createIcon(\n  <path d=\"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z\" />,\n);\n\nexport const handIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5\"></path>\n    <path d=\"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5\"></path>\n    <path d=\"M14 5.5a1.5 1.5 0 0 1 3 0v6.5\"></path>\n    <path d=\"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const downloadIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2\"></path>\n    <path d=\"M7 11l5 5l5 -5\"></path>\n    <path d=\"M12 4l0 12\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const copyIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z\"></path>\n    <path d=\"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const cutIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0\" />\n    <path d=\"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0\" />\n    <path d=\"M9.15 14.85l8.85 -10.85\" />\n    <path d=\"M6 4l8.85 10.85\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const helpIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0\"></path>\n    <path d=\"M12 17l0 .01\"></path>\n    <path d=\"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const playerPlayIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M7 4v16l13 -8z\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const playerStopFilledIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path\n      d=\"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z\"\n      strokeWidth=\"0\"\n      fill=\"currentColor\"\n    ></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const tablerCheckIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M5 12l5 5l10 -10\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const alertTriangleIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z\" />\n    <path d=\"M12 9v4\" />\n    <path d=\"M12 17h.01\" />\n  </>,\n  tablerIconProps,\n);\n\nexport const eyeDropperIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M11 7l6 6\"></path>\n    <path d=\"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const extraToolsIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M12 3l-4 7h8z\"></path>\n    <path d=\"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0\"></path>\n    <path d=\"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const frameToolIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M4 7l16 0\"></path>\n    <path d=\"M4 17l16 0\"></path>\n    <path d=\"M7 4l0 16\"></path>\n    <path d=\"M17 4l0 16\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const mermaidLogoIcon = createIcon(\n  <path\n    fill=\"currentColor\"\n    d=\"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z\"\n  />,\n);\n\n// tabler-icons: refresh\nexport const RetryIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4\" />\n    <path d=\"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const stackPushIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 10l-2 1l8 4l8 -4l-2 -1\" />\n    <path d=\"M4 15l8 4l8 -4\" />\n    <path d=\"M12 4v7\" />\n    <path d=\"M15 8l-3 3l-3 -3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ArrowRightIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M4.16602 10H15.8327\" />\n    <path d=\"M12.5 13.3333L15.8333 10\" />\n    <path d=\"M12.5 6.66666L15.8333 9.99999\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const laserPointerToolIcon = createIcon(\n  <g\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"1.25\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    transform=\"rotate(90 10 10)\"\n  >\n    <path\n      clipRule=\"evenodd\"\n      d=\"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z\"\n    />\n    <path d=\"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13\" />\n  </g>,\n\n  20,\n);\n\nexport const MagicIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M6 21l15 -15l-3 -3l-15 15l3 3\" />\n    <path d=\"M15 6l3 3\" />\n    <path d=\"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" />\n    <path d=\"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const MagicIconThin = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M6 21l15 -15l-3 -3l-15 15l3 3\" />\n    <path d=\"M15 6l3 3\" />\n    <path d=\"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" />\n    <path d=\"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const OpenAIIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35\" />\n    <path d=\"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946\" />\n    <path d=\"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348\" />\n    <path d=\"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45\" />\n    <path d=\"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946\" />\n    <path d=\"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const fullscreenIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 8v-2a2 2 0 0 1 2 -2h2\" />\n    <path d=\"M4 16v2a2 2 0 0 0 2 2h2\" />\n    <path d=\"M16 4h2a2 2 0 0 1 2 2v2\" />\n    <path d=\"M16 20h2a2 2 0 0 0 2 -2v-2\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const eyeIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\" strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0\" />\n    <path d=\"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const eyeClosedIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10.585 10.587a2 2 0 0 0 2.829 2.828\" />\n    <path d=\"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87\" />\n    <path d=\"M3 3l18 18\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const brainIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8\" />\n    <path d=\"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8\" />\n    <path d=\"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5\" />\n    <path d=\"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0\" />\n    <path d=\"M6.5 16a3.5 3.5 0 0 1 0 -7h.5\" />\n    <path d=\"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const brainIconThin = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8\" />\n    <path d=\"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8\" />\n    <path d=\"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5\" />\n    <path d=\"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0\" />\n    <path d=\"M6.5 16a3.5 3.5 0 0 1 0 -7h.5\" />\n    <path d=\"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const searchIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0\" />\n    <path d=\"M21 21l-6 -6\" />\n  </g>,\n  tablerIconProps,\n);\n\n// clock-bolt\nexport const historyCommandIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M20.984 12.53a9 9 0 1 0 -7.552 8.355\" />\n    <path d=\"M12 7v5l3 3\" />\n    <path d=\"M19 16l-2 3h4l-2 3\" />\n  </g>,\n  tablerIconProps,\n);\n\n// history\nexport const historyIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M12 8l0 4l2 2\" />\n    <path d=\"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const microphoneIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z\" />\n    <path d=\"M5 10a7 7 0 0 0 14 0\" />\n    <path d=\"M8 21l8 0\" />\n    <path d=\"M12 17l0 4\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const microphoneMutedIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 3l18 18\" />\n    <path d=\"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1\" />\n    <path d=\"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85\" />\n    <path d=\"M8 21l8 0\" />\n    <path d=\"M12 17l0 4\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const boltIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11\" />\n  </g>,\n  tablerIconProps,\n);\nexport const selectAllIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z\" />\n    <path d=\"M12 20v.01\" />\n    <path d=\"M16 20v.01\" />\n    <path d=\"M8 20v.01\" />\n    <path d=\"M4 20v.01\" />\n    <path d=\"M4 16v.01\" />\n    <path d=\"M4 12v.01\" />\n    <path d=\"M4 8v.01\" />\n    <path d=\"M4 4v.01\" />\n    <path d=\"M8 4v.01\" />\n    <path d=\"M12 4v.01\" />\n    <path d=\"M16 4v.01\" />\n    <path d=\"M20 4v.01\" />\n    <path d=\"M20 8v.01\" />\n    <path d=\"M20 12v.01\" />\n    <path d=\"M20 16v.01\" />\n    <path d=\"M20 20v.01\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const abacusIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 3v18\" />\n    <path d=\"M19 21v-18\" />\n    <path d=\"M5 7h14\" />\n    <path d=\"M5 15h14\" />\n    <path d=\"M8 13v4\" />\n    <path d=\"M11 13v4\" />\n    <path d=\"M16 13v4\" />\n    <path d=\"M14 5v4\" />\n    <path d=\"M11 5v4\" />\n    <path d=\"M8 5v4\" />\n    <path d=\"M3 21h18\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const flipVertical = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 12l18 0\" />\n    <path d=\"M7 16l10 0l-10 5l0 -5\" />\n    <path d=\"M7 8l10 0l-10 -5l0 5\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const flipHorizontal = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M12 3l0 18\" />\n    <path d=\"M16 7l0 10l5 0l-5 -10\" />\n    <path d=\"M8 7l0 10l-5 0l5 -10\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const paintIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z\" />\n    <path d=\"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2\" />\n    <path d=\"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const zoomAreaIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0\" />\n    <path d=\"M22 22l-3 -3\" />\n    <path d=\"M6 18h-1a2 2 0 0 1 -2 -2v-1\" />\n    <path d=\"M3 11v-1\" />\n    <path d=\"M3 6v-1a2 2 0 0 1 2 -2h1\" />\n    <path d=\"M10 3h1\" />\n    <path d=\"M15 3h1a2 2 0 0 1 2 2v1\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const svgIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M14 3v4a1 1 0 0 0 1 1h4\" />\n    <path d=\"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4\" />\n    <path d=\"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75\" />\n    <path d=\"M10 15l2 6l2 -6\" />\n    <path d=\"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const pngIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M14 3v4a1 1 0 0 0 1 1h4\" />\n    <path d=\"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4\" />\n    <path d=\"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3\" />\n    <path d=\"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6\" />\n    <path d=\"M11 21v-6l3 6v-6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const magnetIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0\" />\n    <path d=\"M4 8l5 0\" />\n    <path d=\"M15 8l4 0\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const coffeeIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1\" />\n    <path d=\"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2\" />\n    <path d=\"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2\" />\n    <path d=\"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z\" />\n    <path d=\"M16.746 16.726a3 3 0 1 0 .252 -5.555\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const DeviceDesktopIcon = createIcon(\n  <g stroke=\"currentColor\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4\" />\n  </g>,\n  { ...tablerIconProps, strokeWidth: 1.5 },\n);\n\n// login\nexport const loginIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2\" />\n    <path d=\"M21 12h-13l3 -3\" />\n    <path d=\"M11 15l-3 -3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const youtubeIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z\" />\n    <path d=\"M10 9l5 3l-5 3z\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const gridIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 6h18\" />\n    <path d=\"M3 12h18\" />\n    <path d=\"M3 18h18\" />\n    <path d=\"M6 3v18\" />\n    <path d=\"M12 3v18\" />\n    <path d=\"M18 3v18\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const lineEditorIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z\" />\n    <path d=\"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z\" />\n    <path d=\"M17 5c-6.627 0 -12 5.373 -12 12\" />\n  </g>,\n  tablerIconProps,\n);\n\n// arrow-up-right (modified)\nexport const sharpArrowIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 18l12 -12\" />\n    <path d=\"M18 10v-4h-4\" />\n  </g>,\n  tablerIconProps,\n);\n\n// arrow-guide (modified)\nexport const elbowArrowIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7\" />\n    <path d=\"M18 4l3 3l-3 3\" />\n  </g>,\n  tablerIconProps,\n);\n\n// arrow-ramp-right-2 (heavily modified)\nexport const roundArrowIcon = createIcon(\n  <g>\n    <path d=\"M16,12L20,9L16,6\" />\n    <path d=\"M6 20c0 -6.075 4.925 -11 11 -11h3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const collapseDownIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 9l6 6l6 -6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const collapseUpIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 15l6 -6l6 6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const upIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 15l6 -6l6 6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const cropIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M8 5v10a1 1 0 0 0 1 1h10\" />\n    <path d=\"M5 8h10a1 1 0 0 1 1 1v10\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const elementLinkIcon = createIcon(\n  <g>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M5 7l0 10\" />\n    <path d=\"M7 5l10 0\" />\n    <path d=\"M7 19l10 0\" />\n    <path d=\"M19 7l0 10\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const resizeIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 11v8a1 1 0 0 0 1 1h8m-9 -14v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1\" />\n    <path d=\"M4 12h7a1 1 0 0 1 1 1v7\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const adjustmentsIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M4 6l8 0\" />\n    <path d=\"M16 6l4 0\" />\n    <path d=\"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M4 12l2 0\" />\n    <path d=\"M10 12l10 0\" />\n    <path d=\"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M4 18l11 0\" />\n    <path d=\"M19 18l1 0\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const strokeIcon = createIcon(\n  <g strokeWidth={1}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 10l4 -4 L6 14l8 -8 L6 18l12 -12 L10 18l8 -8 L14 18l4 -4\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const pencilIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4\" />\n    <path d=\"M13.5 6.5l4 4\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const chevronLeftIcon = createIcon(\n  <g strokeWidth={1}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M11 7l-5 5l5 5\" />\n    <path d=\"M17 7l-5 5l5 5\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const sidebarRightIcon = createIcon(\n  <g strokeWidth=\"1.75\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z\" />\n    <path d=\"M15 4l0 16\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const messageCircleIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const presentationIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 4l18 0\" />\n    <path d=\"M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10\" />\n    <path d=\"M12 16l0 4\" />\n    <path d=\"M9 20l6 0\" />\n    <path d=\"M8 12l3 -3l2 2l3 -3\" />\n  </g>,\n  tablerIconProps,\n);\n\n// empty placeholder icon (used for alignment in menus)\nexport const emptyIcon = <div style={{ width: \"1rem\", height: \"1rem\" }} />;\n\n//tabler-icons: chevron-right\nexport const chevronRight = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <polyline points=\"9 6 15 12 9 18\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: adjustments-horizontal\nexport const settingsIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M4 6l8 0\" />\n    <path d=\"M16 6l4 0\" />\n    <path d=\"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M4 12l2 0\" />\n    <path d=\"M10 12l10 0\" />\n    <path d=\"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" />\n    <path d=\"M4 18l11 0\" />\n    <path d=\"M19 18l1 0\" />\n  </g>,\n  tablerIconProps,\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Spinner.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Spinner.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport \"./Spinner.scss\";\n\nconst Spinner = ({\n  size = \"1em\",\n  circleWidth = 8,\n  synchronized = false,\n  className = \"\",\n}: {\n  size?: string | number;\n  circleWidth?: number;\n  synchronized?: boolean;\n  className?: string;\n}) => {\n  const mountTime = React.useRef(Date.now());\n  const mountDelay = -(mountTime.current % 1600);\n\n  return (\n    <div className={`Spinner ${className}`}>\n      <svg\n        viewBox=\"0 0 100 100\"\n        style={{\n          width: size,\n          height: size,\n          // fix for remounting causing spinner flicker\n          [\"--spinner-delay\" as any]: synchronized ? `${mountDelay}ms` : 0,\n        }}\n      >\n        <circle\n          cx=\"50\"\n          cy=\"50\"\n          r={50 - circleWidth / 2}\n          strokeWidth={circleWidth}\n          fill=\"none\"\n          strokeMiterlimit=\"10\"\n        />\n      </svg>\n    </div>\n  );\n};\n\nexport default Spinner;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ToolIcon.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ToolIcon.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport type { CSSProperties } from \"react\";\nimport { isPromiseLike } from \"@jsondraw/common\";\nimport type { PointerType } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport { AbortError } from \"../../errors\";\nimport { useJsonDrawContainer } from \"../App\";\nimport Spinner from \"../ui/Spinner\";\nimport \"./ToolIcon.scss\";\n\nexport type ToolButtonSize = \"small\" | \"medium\";\n\ntype ToolButtonBaseProps = {\n  icon?: React.ReactNode;\n  \"aria-label\": string;\n  \"aria-keyshortcuts\"?: string;\n  \"data-testid\"?: string;\n  label?: string;\n  title?: string;\n  name?: string;\n  id?: string;\n  size?: ToolButtonSize;\n  keyBindingLabel?: string | null;\n  showAriaLabel?: boolean;\n  hidden?: boolean;\n  visible?: boolean;\n  selected?: boolean;\n  disabled?: boolean;\n  className?: string;\n  style?: CSSProperties;\n  isLoading?: boolean;\n};\n\ntype ToolButtonProps =\n  | (ToolButtonBaseProps & {\n      type: \"button\";\n      children?: React.ReactNode;\n      onClick?(event: React.MouseEvent): void;\n    })\n  | (ToolButtonBaseProps & {\n      type: \"submit\";\n      children?: React.ReactNode;\n      onClick?(event: React.MouseEvent): void;\n    })\n  | (ToolButtonBaseProps & {\n      type: \"icon\";\n      children?: React.ReactNode;\n      onClick?(): void;\n    })\n  | (ToolButtonBaseProps & {\n      type: \"radio\";\n      checked: boolean;\n      onChange?(data: { pointerType: PointerType | null }): void;\n      onPointerDown?(data: { pointerType: PointerType }): void;\n    });\n\nexport const ToolButton = React.forwardRef(\n  ({ size = \"medium\", visible = true, className = \"\", ...props }: ToolButtonProps, ref) => {\n    const { id: excalId } = useJsonDrawContainer();\n    const innerRef = React.useRef(null);\n    React.useImperativeHandle(ref, () => innerRef.current);\n    const sizeCn = `ToolIcon_size_${size}`;\n\n    const [isLoading, setIsLoading] = useState(false);\n\n    const isMountedRef = useRef(true);\n\n    const onClick = async (event: React.MouseEvent) => {\n      const ret = \"onClick\" in props && props.onClick?.(event);\n\n      if (isPromiseLike(ret)) {\n        try {\n          setIsLoading(true);\n          await ret;\n        } catch (error: any) {\n          if (!(error instanceof AbortError)) {\n            throw error;\n          } else {\n            console.warn(error);\n          }\n        } finally {\n          if (isMountedRef.current) {\n            setIsLoading(false);\n          }\n        }\n      }\n    };\n\n    useEffect(() => {\n      isMountedRef.current = true;\n      return () => {\n        isMountedRef.current = false;\n      };\n    }, []);\n\n    const lastPointerTypeRef = useRef<PointerType | null>(null);\n\n    if (props.type === \"button\" || props.type === \"icon\" || props.type === \"submit\") {\n      const type = (props.type === \"icon\" ? \"button\" : props.type) as \"button\" | \"submit\";\n      return (\n        <button\n          className={clsx(\n            \"ToolIcon_type_button\",\n            sizeCn,\n            className,\n            visible && !props.hidden ? \"ToolIcon_type_button--show\" : \"ToolIcon_type_button--hide\",\n            {\n              ToolIcon: !props.hidden,\n              \"ToolIcon--selected\": props.selected,\n              \"ToolIcon--plain\": props.type === \"icon\",\n            }\n          )}\n          style={props.style}\n          data-testid={props[\"data-testid\"]}\n          hidden={props.hidden}\n          title={props.title}\n          aria-label={props[\"aria-label\"]}\n          type={type}\n          onClick={onClick}\n          ref={innerRef}\n          disabled={isLoading || props.isLoading || !!props.disabled}\n        >\n          {(props.icon || props.label) && (\n            <div className=\"ToolIcon__icon\" aria-hidden=\"true\" aria-disabled={!!props.disabled}>\n              {props.icon || props.label}\n              {props.keyBindingLabel && (\n                <span className=\"ToolIcon__keybinding\">{props.keyBindingLabel}</span>\n              )}\n              {props.isLoading && <Spinner />}\n            </div>\n          )}\n          {props.showAriaLabel && (\n            <div className=\"ToolIcon__label\">\n              {props[\"aria-label\"]} {isLoading && <Spinner />}\n            </div>\n          )}\n          {props.children}\n        </button>\n      );\n    }\n\n    return (\n      <label\n        className={clsx(\"ToolIcon\", className)}\n        title={props.title}\n        onPointerDown={event => {\n          lastPointerTypeRef.current = event.pointerType || null;\n          props.onPointerDown?.({ pointerType: event.pointerType || null });\n        }}\n        onPointerUp={() => {\n          requestAnimationFrame(() => {\n            lastPointerTypeRef.current = null;\n          });\n        }}\n      >\n        <input\n          className={`ToolIcon_type_radio ${sizeCn}`}\n          type=\"radio\"\n          name={props.name}\n          aria-label={props[\"aria-label\"]}\n          aria-keyshortcuts={props[\"aria-keyshortcuts\"]}\n          data-testid={props[\"data-testid\"]}\n          id={`${excalId}-${props.id}`}\n          onChange={() => {\n            props.onChange?.({ pointerType: lastPointerTypeRef.current });\n          }}\n          checked={props.checked}\n          ref={innerRef}\n        />\n        <div className=\"ToolIcon__icon\">\n          {props.icon}\n          {props.keyBindingLabel && (\n            <span className=\"ToolIcon__keybinding\">{props.keyBindingLabel}</span>\n          )}\n        </div>\n      </label>\n    );\n  }\n);\n\nToolButton.displayName = \"ToolButton\";\n","import type { Action } from \"./types\";\n\nexport let actions: readonly Action[] = [];\n\nexport const register = <\n  TData extends any,\n  T extends Action<TData> = Action<TData>,\n>(\n  action: T,\n) => {\n  actions = actions.concat(action);\n  return action as T & {\n    keyTest?: unknown extends T[\"keyTest\"] ? never : T[\"keyTest\"];\n  };\n};\n","import { KEYS, MOBILE_ACTION_BUTTON_BG, updateActiveTool } from \"@jsondraw/common\";\nimport { getNonDeletedElements } from \"@jsondraw/element\";\nimport { fixBindingsAfterDeletion } from \"@jsondraw/element\";\nimport { LinearElementEditor } from \"@jsondraw/element\";\nimport { newElementWith } from \"@jsondraw/element\";\nimport { getContainerElement } from \"@jsondraw/element\";\nimport { isBoundToContainer, isElbowArrow, isFrameLikeElement } from \"@jsondraw/element\";\nimport { getFrameChildren } from \"@jsondraw/element\";\nimport { getElementsInGroup, selectGroupsForSelectedElements } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\nimport { useStylesPanelMode } from \"..\";\nimport { TrashIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { t } from \"../i18n\";\nimport { getSelectedElements, isSomeElementSelected } from \"../scene\";\nimport type { AppClassProperties, AppState } from \"../types\";\nimport { register } from \"./register\";\n\nconst deleteSelectedElements = (\n  elements: readonly JsonDrawElement[],\n  appState: AppState,\n  app: AppClassProperties\n) => {\n  const framesToBeDeleted = new Set(\n    getSelectedElements(\n      elements.filter(el => isFrameLikeElement(el)),\n      appState\n    ).map(el => el.id)\n  );\n\n  const selectedElementIds: Record<JsonDrawElement[\"id\"], true> = {};\n\n  const elementsMap = app.scene.getNonDeletedElementsMap();\n\n  const processedElements = new Set<JsonDrawElement[\"id\"]>();\n\n  for (const frameId of framesToBeDeleted) {\n    const frameChildren = getFrameChildren(elements, frameId);\n    for (const el of frameChildren) {\n      if (processedElements.has(el.id)) {\n        continue;\n      }\n\n      if (isBoundToContainer(el)) {\n        const containerElement = getContainerElement(el, elementsMap);\n        if (containerElement) {\n          selectedElementIds[containerElement.id] = true;\n        }\n      } else {\n        selectedElementIds[el.id] = true;\n      }\n      processedElements.add(el.id);\n    }\n  }\n\n  let shouldSelectEditingGroup = true;\n\n  const nextElements = elements.map(el => {\n    if (appState.selectedElementIds[el.id]) {\n      const boundElement = isBoundToContainer(el) ? getContainerElement(el, elementsMap) : null;\n\n      if (el.frameId && framesToBeDeleted.has(el.frameId)) {\n        shouldSelectEditingGroup = false;\n        selectedElementIds[el.id] = true;\n        return el;\n      }\n\n      if (boundElement?.frameId && framesToBeDeleted.has(boundElement?.frameId)) {\n        return el;\n      }\n\n      if (el.boundElements) {\n        el.boundElements.forEach(candidate => {\n          const bound = app.scene.getNonDeletedElementsMap().get(candidate.id);\n          if (bound && isElbowArrow(bound)) {\n            app.scene.mutateElement(bound, {\n              startBinding: el.id === bound.startBinding?.elementId ? null : bound.startBinding,\n              endBinding: el.id === bound.endBinding?.elementId ? null : bound.endBinding,\n            });\n          }\n        });\n      }\n      return newElementWith(el, { isDeleted: true });\n    }\n\n    // if deleting a frame, remove the children from it and select them\n    if (el.frameId && framesToBeDeleted.has(el.frameId)) {\n      shouldSelectEditingGroup = false;\n      if (!isBoundToContainer(el)) {\n        selectedElementIds[el.id] = true;\n      }\n      return newElementWith(el, { frameId: null });\n    }\n\n    if (isBoundToContainer(el) && appState.selectedElementIds[el.containerId]) {\n      return newElementWith(el, { isDeleted: true });\n    }\n    return el;\n  });\n\n  let nextEditingGroupId = appState.editingGroupId;\n\n  // select next eligible element in currently editing group or supergroup\n  if (shouldSelectEditingGroup && appState.editingGroupId) {\n    const elems = getElementsInGroup(nextElements, appState.editingGroupId).filter(\n      el => !el.isDeleted\n    );\n    if (elems.length > 1) {\n      if (elems[0]) {\n        selectedElementIds[elems[0].id] = true;\n      }\n    } else {\n      nextEditingGroupId = null;\n      if (elems[0]) {\n        selectedElementIds[elems[0].id] = true;\n      }\n\n      const lastElementInGroup = elems[0];\n      if (lastElementInGroup) {\n        const editingGroupIdx = lastElementInGroup.groupIds.findIndex(groupId => {\n          return groupId === appState.editingGroupId;\n        });\n        const superGroupId = lastElementInGroup.groupIds[editingGroupIdx + 1];\n        if (superGroupId) {\n          const elems = getElementsInGroup(nextElements, superGroupId).filter(el => !el.isDeleted);\n          if (elems.length > 1) {\n            nextEditingGroupId = superGroupId;\n\n            elems.forEach(el => {\n              selectedElementIds[el.id] = true;\n            });\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    elements: nextElements,\n    appState: {\n      ...appState,\n      ...selectGroupsForSelectedElements(\n        {\n          selectedElementIds,\n          editingGroupId: nextEditingGroupId,\n        },\n        nextElements,\n        appState,\n        null\n      ),\n    },\n  };\n};\n\nconst handleGroupEditingState = (\n  appState: AppState,\n  elements: readonly JsonDrawElement[]\n): AppState => {\n  if (appState.editingGroupId) {\n    const siblingElements = getElementsInGroup(\n      getNonDeletedElements(elements),\n      appState.editingGroupId!\n    );\n    if (siblingElements.length) {\n      return {\n        ...appState,\n        selectedElementIds: { [siblingElements[0].id]: true },\n      };\n    }\n  }\n  return appState;\n};\n\nexport const actionDeleteSelected = register({\n  name: \"deleteSelectedElements\",\n  label: \"labels.delete\",\n  icon: TrashIcon,\n  trackEvent: { category: \"element\", action: \"delete\" },\n  perform: (elements, appState, formData, app) => {\n    if (appState.selectedLinearElement?.isEditing) {\n      const { elementId, selectedPointsIndices } = appState.selectedLinearElement;\n      const elementsMap = app.scene.getNonDeletedElementsMap();\n      const linearElement = LinearElementEditor.getElement(elementId, elementsMap);\n      if (!linearElement) {\n        return false;\n      }\n      // case: no point selected  do nothing, as deleting the whole element\n      // is most likely a mistake, where you wanted to delete a specific point\n      // but failed to select it (or you thought it's selected, while it was\n      // only in a hover state)\n      if (selectedPointsIndices == null) {\n        return false;\n      }\n\n      // case: deleting all points\n      if (selectedPointsIndices.length >= linearElement.points.length) {\n        const nextElements = elements.map(el => {\n          if (el.id === linearElement.id) {\n            return newElementWith(el, { isDeleted: true });\n          }\n          return el;\n        });\n        const nextAppState = handleGroupEditingState(appState, nextElements);\n\n        return {\n          elements: nextElements,\n          appState: {\n            ...nextAppState,\n            selectedLinearElement: null,\n          },\n          captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n        };\n      }\n\n      LinearElementEditor.deletePoints(linearElement, app, selectedPointsIndices);\n\n      return {\n        elements,\n        appState: {\n          ...appState,\n          selectedLinearElement: {\n            ...appState.selectedLinearElement,\n            selectedPointsIndices:\n              selectedPointsIndices?.[0] > 0 ? [selectedPointsIndices[0] - 1] : [0],\n          },\n        },\n        captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n      };\n    }\n\n    let { elements: nextElements, appState: nextAppState } = deleteSelectedElements(\n      elements,\n      appState,\n      app\n    );\n\n    fixBindingsAfterDeletion(\n      nextElements,\n      nextElements.filter(el => el.isDeleted)\n    );\n\n    nextAppState = handleGroupEditingState(nextAppState, nextElements);\n\n    return {\n      elements: nextElements,\n      appState: {\n        ...nextAppState,\n        activeTool: updateActiveTool(appState, {\n          type: app.state.preferredSelectionTool.type,\n        }),\n        multiElement: null,\n        newElement: null,\n        activeEmbeddable: null,\n        selectedLinearElement: null,\n      },\n      captureUpdate: isSomeElementSelected(getNonDeletedElements(elements), appState)\n        ? CaptureUpdateAction.IMMEDIATELY\n        : CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  keyTest: (event, appState, elements) =>\n    (event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE) && !event[KEYS.CTRL_OR_CMD],\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    const isMobile = useStylesPanelMode() === \"mobile\";\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={TrashIcon}\n        title={t(\"labels.delete\")}\n        aria-label={t(\"labels.delete\")}\n        onClick={() => updateData(null)}\n        disabled={!isSomeElementSelected(getNonDeletedElements(elements), appState)}\n        style={{\n          ...(isMobile && appState.openPopup !== \"compactOtherProperties\"\n            ? MOBILE_ACTION_BUTTON_BG\n            : {}),\n        }}\n      />\n    );\n  },\n});\n","import { isDarwin } from \"@jsondraw/common\";\n\nimport { t } from \"./i18n\";\n\nexport const getShortcutKey = (shortcut: string): string =>\n  shortcut\n    .replace(\n      /\\b(Opt(?:ion)?|Alt)\\b/i,\n      isDarwin ? t(\"keys.option\") : t(\"keys.alt\"),\n    )\n    .replace(/\\bShift\\b/i, t(\"keys.shift\"))\n    .replace(/\\b(Enter|Return)\\b/i, t(\"keys.enter\"))\n    .replace(\n      /\\b(Ctrl|Cmd|Command|CtrlOrCmd)\\b/gi,\n      isDarwin ? t(\"keys.cmd\") : t(\"keys.ctrl\"),\n    )\n    .replace(/\\b(Esc(?:ape)?)\\b/i, t(\"keys.escape\"))\n    .replace(/\\b(Space(?:bar)?)\\b/i, t(\"keys.spacebar\"))\n    .replace(/\\b(Del(?:ete)?)\\b/i, t(\"keys.delete\"));\n","import { KEYS, CODES, isDarwin } from \"@jsondraw/common\";\n\nimport {\n  moveOneLeft,\n  moveOneRight,\n  moveAllLeft,\n  moveAllRight,\n} from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport {\n  BringForwardIcon,\n  BringToFrontIcon,\n  SendBackwardIcon,\n  SendToBackIcon,\n} from \"../components/icons\";\nimport { t } from \"../i18n\";\nimport { getShortcutKey } from \"../shortcut\";\n\nimport { register } from \"./register\";\n\nexport const actionSendBackward = register({\n  name: \"sendBackward\",\n  label: \"labels.sendBackward\",\n  keywords: [\"move down\", \"zindex\", \"layer\"],\n  icon: SendBackwardIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: moveOneLeft(elements, appState, app.scene),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyPriority: 40,\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] &&\n    !event.shiftKey &&\n    event.code === CODES.BRACKET_LEFT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.sendBackward\")}  ${getShortcutKey(\"CtrlOrCmd+[\")}`}\n    >\n      {SendBackwardIcon}\n    </button>\n  ),\n});\n\nexport const actionBringForward = register({\n  name: \"bringForward\",\n  label: \"labels.bringForward\",\n  keywords: [\"move up\", \"zindex\", \"layer\"],\n  icon: BringForwardIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: moveOneRight(elements, appState, app.scene),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyPriority: 40,\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] &&\n    !event.shiftKey &&\n    event.code === CODES.BRACKET_RIGHT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.bringForward\")}  ${getShortcutKey(\"CtrlOrCmd+]\")}`}\n    >\n      {BringForwardIcon}\n    </button>\n  ),\n});\n\nexport const actionSendToBack = register({\n  name: \"sendToBack\",\n  label: \"labels.sendToBack\",\n  keywords: [\"move down\", \"zindex\", \"layer\"],\n  icon: SendToBackIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState) => {\n    return {\n      elements: moveAllLeft(elements, appState),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    isDarwin\n      ? event[KEYS.CTRL_OR_CMD] &&\n        event.altKey &&\n        event.code === CODES.BRACKET_LEFT\n      : event[KEYS.CTRL_OR_CMD] &&\n        event.shiftKey &&\n        event.code === CODES.BRACKET_LEFT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.sendToBack\")}  ${\n        isDarwin\n          ? getShortcutKey(\"CtrlOrCmd+Alt+[\")\n          : getShortcutKey(\"CtrlOrCmd+Shift+[\")\n      }`}\n    >\n      {SendToBackIcon}\n    </button>\n  ),\n});\n\nexport const actionBringToFront = register({\n  name: \"bringToFront\",\n  label: \"labels.bringToFront\",\n  keywords: [\"move up\", \"zindex\", \"layer\"],\n  icon: BringToFrontIcon,\n  trackEvent: { category: \"element\" },\n\n  perform: (elements, appState) => {\n    return {\n      elements: moveAllRight(elements, appState),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    isDarwin\n      ? event[KEYS.CTRL_OR_CMD] &&\n        event.altKey &&\n        event.code === CODES.BRACKET_RIGHT\n      : event[KEYS.CTRL_OR_CMD] &&\n        event.shiftKey &&\n        event.code === CODES.BRACKET_RIGHT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={(event) => updateData(null)}\n      title={`${t(\"labels.bringToFront\")}  ${\n        isDarwin\n          ? getShortcutKey(\"CtrlOrCmd+Alt+]\")\n          : getShortcutKey(\"CtrlOrCmd+Shift+]\")\n      }`}\n    >\n      {BringToFrontIcon}\n    </button>\n  ),\n});\n","import { getNonDeletedElements } from \"@jsondraw/element\";\nimport { LinearElementEditor } from \"@jsondraw/element\";\nimport { isLinearElement, isTextElement } from \"@jsondraw/element\";\n\nimport { arrayToMap, KEYS } from \"@jsondraw/common\";\n\nimport { selectGroupsForSelectedElements } from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { selectAllIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nexport const actionSelectAll = register({\n  name: \"selectAll\",\n  label: \"labels.selectAll\",\n  icon: selectAllIcon,\n  trackEvent: { category: \"canvas\" },\n  viewMode: false,\n  perform: (elements, appState, value, app) => {\n    if (appState.selectedLinearElement?.isEditing) {\n      return false;\n    }\n\n    const selectedElementIds = elements\n      .filter(\n        (element) =>\n          !element.isDeleted &&\n          !(isTextElement(element) && element.containerId) &&\n          !element.locked,\n      )\n      .reduce((map: Record<JsonDrawElement[\"id\"], true>, element) => {\n        map[element.id] = true;\n        return map;\n      }, {});\n\n    return {\n      appState: {\n        ...appState,\n        ...selectGroupsForSelectedElements(\n          {\n            editingGroupId: null,\n            selectedElementIds,\n          },\n          getNonDeletedElements(elements),\n          appState,\n          app,\n        ),\n        selectedLinearElement:\n          // single linear element selected\n          Object.keys(selectedElementIds).length === 1 &&\n          isLinearElement(elements[0])\n            ? new LinearElementEditor(elements[0], arrayToMap(elements))\n            : null,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.A,\n});\n","import { DEFAULT_GRID_SIZE, KEYS, MOBILE_ACTION_BUTTON_BG, arrayToMap } from \"@jsondraw/common\";\nimport { getNonDeletedElements } from \"@jsondraw/element\";\nimport { LinearElementEditor } from \"@jsondraw/element\";\nimport { getSelectedElements, getSelectionStateForElements } from \"@jsondraw/element\";\nimport { syncMovedIndices } from \"@jsondraw/element\";\nimport { duplicateElements } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport { useStylesPanelMode } from \"..\";\nimport { DuplicateIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { t } from \"../i18n\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { getShortcutKey } from \"../shortcut\";\nimport { register } from \"./register\";\n\nexport const actionDuplicateSelection = register({\n  name: \"duplicateSelection\",\n  label: \"labels.duplicateSelection\",\n  icon: DuplicateIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, formData, app) => {\n    if (appState.selectedElementsAreBeingDragged) {\n      return false;\n    }\n\n    // duplicate selected point(s) if editing a line\n    if (appState.selectedLinearElement?.isEditing) {\n      // TODO: Invariants should be checked here instead of duplicateSelectedPoints()\n      try {\n        const newAppState = LinearElementEditor.duplicateSelectedPoints(appState, app.scene);\n\n        return {\n          elements,\n          appState: newAppState,\n          captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n        };\n      } catch {\n        return false;\n      }\n    }\n\n    let { duplicatedElements, elementsWithDuplicates } = duplicateElements({\n      type: \"in-place\",\n      elements,\n      idsOfElementsToDuplicate: arrayToMap(\n        getSelectedElements(elements, appState, {\n          includeBoundTextElement: true,\n          includeElementsInFrames: true,\n        })\n      ),\n      appState,\n      randomizeSeed: true,\n      overrides: ({ origElement, origIdToDuplicateId }) => {\n        const duplicateFrameId =\n          origElement.frameId && origIdToDuplicateId.get(origElement.frameId);\n        return {\n          x: origElement.x + DEFAULT_GRID_SIZE / 2,\n          y: origElement.y + DEFAULT_GRID_SIZE / 2,\n          frameId: duplicateFrameId ?? origElement.frameId,\n        };\n      },\n    });\n\n    if (app.props.onDuplicate && elementsWithDuplicates) {\n      const mappedElements = app.props.onDuplicate(elementsWithDuplicates, elements);\n      if (mappedElements) {\n        elementsWithDuplicates = mappedElements;\n      }\n    }\n\n    return {\n      elements: syncMovedIndices(elementsWithDuplicates, arrayToMap(duplicatedElements)),\n      appState: {\n        ...appState,\n        ...getSelectionStateForElements(\n          duplicatedElements,\n          getNonDeletedElements(elementsWithDuplicates),\n          appState\n        ),\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: event => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.D,\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    const isMobile = useStylesPanelMode() === \"mobile\";\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={DuplicateIcon}\n        title={`${t(\"labels.duplicateSelection\")}  ${getShortcutKey(\"CtrlOrCmd+D\")}`}\n        aria-label={t(\"labels.duplicateSelection\")}\n        onClick={() => updateData(null)}\n        disabled={!isSomeElementSelected(getNonDeletedElements(elements), appState)}\n        style={{\n          ...(isMobile && appState.openPopup !== \"compactOtherProperties\"\n            ? MOBILE_ACTION_BUTTON_BG\n            : {}),\n        }}\n      />\n    );\n  },\n});\n","// place here categories that you want to track. We want to track just a\n\nimport { isDevEnv } from \"@jsondraw/common\";\n\n// small subset of categories at a given time.\nconst ALLOWED_CATEGORIES_TO_TRACK = new Set([\"command_palette\", \"export\"]);\n\nexport const trackEvent = (\n  category: string,\n  action: string,\n  label?: string,\n  value?: number,\n) => {\n  try {\n    if (\n      typeof window === \"undefined\" ||\n      import.meta.env.VITE_WORKER_ID ||\n      import.meta.env.VITE_APP_ENABLE_TRACKING !== \"true\"\n    ) {\n      return;\n    }\n\n    if (!ALLOWED_CATEGORIES_TO_TRACK.has(category)) {\n      return;\n    }\n\n    if (isDevEnv()) {\n      // comment out to debug in dev\n      return;\n    }\n\n    if (!import.meta.env.PROD) {\n      console.info(\"trackEvent\", { category, action, label, value });\n    }\n\n    if (window.sa_event) {\n      window.sa_event(action, {\n        category,\n        label,\n        value,\n      });\n    }\n  } catch (error) {\n    console.error(\"error during analytics\", error);\n  }\n};\n","import { useState, useCallback } from \"react\";\n\n// Utility type for caret position\nexport type CaretPosition = {\n  start: number;\n  end: number;\n};\n\n// Utility function to get text editor element\nconst getTextEditor = (): HTMLTextAreaElement | null => {\n  return document.querySelector(\".jsondraw-wysiwyg\") as HTMLTextAreaElement;\n};\n\n// Utility functions for caret position management\nexport const saveCaretPosition = (): CaretPosition | null => {\n  const textEditor = getTextEditor();\n  if (textEditor) {\n    return {\n      start: textEditor.selectionStart,\n      end: textEditor.selectionEnd,\n    };\n  }\n  return null;\n};\n\nexport const restoreCaretPosition = (position: CaretPosition | null): void => {\n  setTimeout(() => {\n    const textEditor = getTextEditor();\n    if (textEditor) {\n      textEditor.focus();\n      if (position) {\n        textEditor.selectionStart = position.start;\n        textEditor.selectionEnd = position.end;\n      }\n    }\n  }, 0);\n};\n\nexport const withCaretPositionPreservation = (\n  callback: () => void,\n  isCompactMode: boolean,\n  isEditingText: boolean,\n  onPreventClose?: () => void,\n): void => {\n  // Prevent popover from closing in compact mode\n  if (isCompactMode && onPreventClose) {\n    onPreventClose();\n  }\n\n  // Save caret position if editing text\n  const savedPosition =\n    isCompactMode && isEditingText ? saveCaretPosition() : null;\n\n  // Execute the callback\n  callback();\n\n  // Restore caret position if needed\n  if (isCompactMode && isEditingText) {\n    restoreCaretPosition(savedPosition);\n  }\n};\n\n// Hook for managing text editor caret position with state\nexport const useTextEditorFocus = () => {\n  const [savedCaretPosition, setSavedCaretPosition] =\n    useState<CaretPosition | null>(null);\n\n  const saveCaretPositionToState = useCallback(() => {\n    const position = saveCaretPosition();\n    setSavedCaretPosition(position);\n  }, []);\n\n  const restoreCaretPositionFromState = useCallback(() => {\n    setTimeout(() => {\n      const textEditor = getTextEditor();\n      if (textEditor) {\n        textEditor.focus();\n        if (savedCaretPosition) {\n          textEditor.selectionStart = savedCaretPosition.start;\n          textEditor.selectionEnd = savedCaretPosition.end;\n          setSavedCaretPosition(null);\n        }\n      }\n    }, 0);\n  }, [savedCaretPosition]);\n\n  const clearSavedPosition = useCallback(() => {\n    setSavedCaretPosition(null);\n  }, []);\n\n  return {\n    saveCaretPosition: saveCaretPositionToState,\n    restoreCaretPosition: restoreCaretPositionFromState,\n    clearSavedPosition,\n    hasSavedPosition: !!savedCaretPosition,\n  };\n};\n\n// Utility function to temporarily disable text editor blur\nexport const temporarilyDisableTextEditorBlur = (\n  duration: number = 100,\n): void => {\n  const textEditor = getTextEditor();\n  if (textEditor) {\n    const originalOnBlur = textEditor.onblur;\n    textEditor.onblur = null;\n\n    setTimeout(() => {\n      textEditor.onblur = originalOnBlur;\n    }, duration);\n  }\n};\n","import React from \"react\";\n\nimport type { UIAppState } from \"../types\";\n\nexport const UIAppStateContext = React.createContext<UIAppState>(null!);\nexport const useUIAppState = () => React.useContext(UIAppStateContext);\n","import { useState, useLayoutEffect } from \"react\";\n\nimport { THEME } from \"@jsondraw/common\";\n\nimport { useEditorInterface, useJsonDrawContainer } from \"../components/App\";\nimport { useUIAppState } from \"../context/ui-appState\";\n\nexport const useCreatePortalContainer = (opts?: {\n  className?: string;\n  parentSelector?: string;\n}) => {\n  const [div, setDiv] = useState<HTMLDivElement | null>(null);\n\n  const editorInterface = useEditorInterface();\n  const { theme } = useUIAppState();\n\n  const { container: jsondrawContainer } = useJsonDrawContainer();\n\n  useLayoutEffect(() => {\n    if (div) {\n      div.className = \"\";\n      div.classList.add(\"jsondraw\", ...(opts?.className?.split(/\\s+/) || []));\n      div.classList.toggle(\n        \"jsondraw--mobile\",\n        editorInterface.formFactor === \"phone\",\n      );\n      div.classList.toggle(\"theme--dark\", theme === THEME.DARK);\n    }\n  }, [div, theme, editorInterface.formFactor, opts?.className]);\n\n  useLayoutEffect(() => {\n    const container = opts?.parentSelector\n      ? jsondrawContainer?.querySelector(opts.parentSelector)\n      : document.body;\n\n    if (!container) {\n      return;\n    }\n\n    const div = document.createElement(\"div\");\n\n    container.appendChild(div);\n\n    setDiv(div);\n\n    return () => {\n      container.removeChild(div);\n    };\n  }, [jsondrawContainer, opts?.parentSelector]);\n\n  return div;\n};\n","import { useEffect } from \"react\";\n\nimport { EVENT } from \"@jsondraw/common\";\n\nexport function useOutsideClick<T extends HTMLElement>(\n  ref: React.RefObject<T | null>,\n  /** if performance is of concern, memoize the callback */\n  callback: (event: Event & { target: T }) => void,\n  /**\n   * Optional callback which is called on every click.\n   *\n   * Should return `true` if click should be considered as inside the container,\n   * and `false` if it falls outside and should call the `callback`.\n   *\n   * Returning `true` overrides the default behavior and `callback` won't be\n   * called.\n   *\n   * Returning `undefined` will fallback to the default behavior.\n   */\n  isInside?: (\n    event: Event & { target: T },\n    /** the element of the passed ref */\n    container: T,\n  ) => boolean | undefined,\n) {\n  useEffect(() => {\n    function onOutsideClick(event: Event) {\n      const _event = event as Event & { target: T };\n\n      if (!ref.current) {\n        return;\n      }\n\n      const isInsideOverride = isInside?.(_event, ref.current);\n\n      if (isInsideOverride === true) {\n        return;\n      } else if (isInsideOverride === false) {\n        return callback(_event);\n      }\n\n      // clicked element is in the descenendant of the target container\n      if (\n        ref.current.contains(_event.target) ||\n        // target is detached from DOM (happens when the element is removed\n        // on a pointerup event fired *before* this handler's pointerup is\n        // dispatched)\n        !document.documentElement.contains(_event.target)\n      ) {\n        return;\n      }\n\n      const isClickOnRadixPortal =\n        _event.target.closest(\"[data-radix-portal]\") ||\n        // when radix popup is in \"modal\" mode, it disables pointer events on\n        // the `body` element, so the target element is going to be the `html`\n        // (note: this won't work if we selectively re-enable pointer events on\n        // specific elements as we do with navbar or jsondraw UI elements)\n        (_event.target === document.documentElement &&\n          document.body.style.pointerEvents === \"none\");\n\n      // if clicking on radix portal, assume it's a popup that\n      // should be considered as part of the UI. Obviously this is a terrible\n      // hack you can end up click on radix popups that outside the tree,\n      // but it works for most cases and the downside is minimal for now\n      if (isClickOnRadixPortal) {\n        return;\n      }\n\n      // clicking on a container that ignores outside clicks\n      if (_event.target.closest(\"[data-prevent-outside-click]\")) {\n        return;\n      }\n\n      callback(_event);\n    }\n\n    // note: don't use `click` because it often reports incorrect `event.target`\n    document.addEventListener(EVENT.POINTER_DOWN, onOutsideClick);\n    document.addEventListener(EVENT.TOUCH_START, onOutsideClick);\n\n    return () => {\n      document.removeEventListener(EVENT.POINTER_DOWN, onOutsideClick);\n      document.removeEventListener(EVENT.TOUCH_START, onOutsideClick);\n    };\n  }, [ref, callback, isInside]);\n}\n","import { useRef } from \"react\";\n\nexport const useStable = <T extends Record<string, any>>(value: T) => {\n  const ref = useRef<T>(value);\n  Object.assign(ref.current, value);\n  return ref.current;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./EyeDropper.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./EyeDropper.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport { EVENT, KEYS, rgbToHex } from \"@jsondraw/common\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { atom } from \"../../editor-jotai\";\nimport { useCreatePortalContainer } from \"../../hooks/useCreatePortalContainer\";\nimport { useOutsideClick } from \"../../hooks/useOutsideClick\";\nimport { useStable } from \"../../hooks/useStable\";\nimport { getSelectedElements } from \"../../scene\";\n\nimport { useApp, useJsonDrawContainer, useJsonDrawElements } from \"../App\";\n\nimport \"./EyeDropper.scss\";\n\nimport type { ColorPickerType } from \"../ColorPicker/colorPickerUtils\";\n\nexport type EyeDropperProperties = {\n  keepOpenOnAlt: boolean;\n  swapPreviewOnAlt?: boolean;\n  /** called when user picks color (on pointerup) */\n  onSelect: (color: string, event: PointerEvent) => void;\n  /**\n   * property of selected elements to update live when alt-dragging.\n   * Supply `null` if not applicable (e.g. updating the canvas bg instead of\n   * elements)\n   **/\n  colorPickerType: ColorPickerType;\n};\n\nexport const activeEyeDropperAtom = atom<null | EyeDropperProperties>(null);\n\nexport const EyeDropper: React.FC<{\n  onCancel: () => void;\n  onSelect: EyeDropperProperties[\"onSelect\"];\n  /** called when color changes, on pointerdown for preview */\n  onChange: (\n    type: ColorPickerType,\n    color: string,\n    selectedElements: JsonDrawElement[],\n    event: { altKey: boolean },\n  ) => void;\n  colorPickerType: EyeDropperProperties[\"colorPickerType\"];\n}> = ({ onCancel, onChange, onSelect, colorPickerType }) => {\n  const eyeDropperContainer = useCreatePortalContainer({\n    className: \"jsondraw-eye-dropper-backdrop\",\n    parentSelector: \".jsondraw-eye-dropper-container\",\n  });\n  const appState = useUIAppState();\n  const elements = useJsonDrawElements();\n  const app = useApp();\n\n  const selectedElements = getSelectedElements(elements, appState);\n\n  const stableProps = useStable({\n    app,\n    onCancel,\n    onChange,\n    onSelect,\n    selectedElements,\n  });\n\n  const { container: jsondrawContainer } = useJsonDrawContainer();\n\n  useEffect(() => {\n    const colorPreviewDiv = ref.current;\n\n    if (!colorPreviewDiv || !app.canvas || !eyeDropperContainer) {\n      return;\n    }\n\n    let isHoldingPointerDown = false;\n\n    const ctx = app.canvas.getContext(\"2d\")!;\n\n    const getCurrentColor = ({\n      clientX,\n      clientY,\n    }: {\n      clientX: number;\n      clientY: number;\n    }) => {\n      const pixel = ctx.getImageData(\n        (clientX - appState.offsetLeft) * window.devicePixelRatio,\n        (clientY - appState.offsetTop) * window.devicePixelRatio,\n        1,\n        1,\n      ).data;\n\n      return rgbToHex(pixel[0], pixel[1], pixel[2]);\n    };\n\n    const mouseMoveListener = ({\n      clientX,\n      clientY,\n      altKey,\n    }: {\n      clientX: number;\n      clientY: number;\n      altKey: boolean;\n    }) => {\n      // FIXME swap offset when the preview gets outside viewport\n      colorPreviewDiv.style.top = `${clientY + 20}px`;\n      colorPreviewDiv.style.left = `${clientX + 20}px`;\n\n      const currentColor = getCurrentColor({ clientX, clientY });\n\n      if (isHoldingPointerDown) {\n        stableProps.onChange(\n          colorPickerType,\n          currentColor,\n          stableProps.selectedElements,\n          { altKey },\n        );\n      }\n\n      colorPreviewDiv.style.background = currentColor;\n    };\n\n    const onCancel = () => {\n      stableProps.onCancel();\n    };\n\n    const onSelect: Required<EyeDropperProperties>[\"onSelect\"] = (\n      color,\n      event,\n    ) => {\n      stableProps.onSelect(color, event);\n    };\n\n    const pointerDownListener = (event: PointerEvent) => {\n      isHoldingPointerDown = true;\n      // NOTE we can't event.preventDefault() as that would stop\n      // pointermove events\n      event.stopImmediatePropagation();\n    };\n\n    const pointerUpListener = (event: PointerEvent) => {\n      isHoldingPointerDown = false;\n\n      // since we're not preventing default on pointerdown, the focus would\n      // goes back to `body` so we want to refocus the editor container instead\n      jsondrawContainer?.focus();\n\n      event.stopImmediatePropagation();\n      event.preventDefault();\n\n      onSelect(getCurrentColor(event), event);\n    };\n\n    const keyDownListener = (event: KeyboardEvent) => {\n      if (event.key === KEYS.ESCAPE) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        onCancel();\n      }\n    };\n\n    // -------------------------------------------------------------------------\n\n    eyeDropperContainer.tabIndex = -1;\n    // focus container so we can listen on keydown events\n    eyeDropperContainer.focus();\n\n    // init color preview else it would show only after the first mouse move\n    mouseMoveListener({\n      clientX: stableProps.app.lastViewportPosition.x,\n      clientY: stableProps.app.lastViewportPosition.y,\n      altKey: false,\n    });\n\n    eyeDropperContainer.addEventListener(EVENT.KEYDOWN, keyDownListener);\n    eyeDropperContainer.addEventListener(\n      EVENT.POINTER_DOWN,\n      pointerDownListener,\n    );\n    eyeDropperContainer.addEventListener(EVENT.POINTER_UP, pointerUpListener);\n    window.addEventListener(\"pointermove\", mouseMoveListener, {\n      passive: true,\n    });\n    window.addEventListener(EVENT.BLUR, onCancel);\n\n    return () => {\n      isHoldingPointerDown = false;\n      eyeDropperContainer.removeEventListener(EVENT.KEYDOWN, keyDownListener);\n      eyeDropperContainer.removeEventListener(\n        EVENT.POINTER_DOWN,\n        pointerDownListener,\n      );\n      eyeDropperContainer.removeEventListener(\n        EVENT.POINTER_UP,\n        pointerUpListener,\n      );\n      window.removeEventListener(\"pointermove\", mouseMoveListener);\n      window.removeEventListener(EVENT.BLUR, onCancel);\n    };\n  }, [\n    stableProps,\n    app.canvas,\n    eyeDropperContainer,\n    colorPickerType,\n    jsondrawContainer,\n    appState.offsetLeft,\n    appState.offsetTop,\n  ]);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useOutsideClick(\n    ref,\n    () => {\n      onCancel();\n    },\n    (event) => {\n      if (\n        event.target.closest(\n          \".jsondraw-eye-dropper-trigger, .jsondraw-eye-dropper-backdrop\",\n        )\n      ) {\n        return true;\n      }\n      // consider all other clicks as outside\n      return false;\n    },\n  );\n\n  if (!eyeDropperContainer) {\n    return null;\n  }\n\n  return createPortal(\n    <div ref={ref} className=\"jsondraw-eye-dropper-preview\" />,\n    eyeDropperContainer,\n  );\n};\n","export const ButtonSeparator = () => (\n  <div\n    style={{\n      width: 1,\n      height: \"1rem\",\n      backgroundColor: \"var(--default-border-color)\",\n      margin: \"0 auto\",\n    }}\n  />\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Island.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Island.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport clsx from \"clsx\";\n\nimport \"./Island.scss\";\n\ntype IslandProps = {\n  children: React.ReactNode;\n  padding?: number;\n  className?: string | boolean;\n  style?: object;\n};\n\nexport const Island = React.forwardRef<HTMLDivElement, IslandProps>(\n  ({ children, padding, className, style }, ref) => (\n    <div\n      className={clsx(\"Island\", className)}\n      style={{ \"--padding\": padding, ...style }}\n      ref={ref}\n    >\n      {children}\n    </div>\n  ),\n);\n","import React, { type ReactNode } from \"react\";\nimport { isInteractive } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { Popover } from \"radix-ui\";\nimport { useEditorInterface } from \"../App\";\nimport { Island } from \"../layout/Island\";\n\ninterface PropertiesPopoverProps {\n  className?: string;\n  container: HTMLDivElement | null;\n  children: ReactNode;\n  style?: object;\n  onClose: () => void;\n  onKeyDown?: React.KeyboardEventHandler<HTMLDivElement>;\n  onPointerLeave?: React.PointerEventHandler<HTMLDivElement>;\n  onFocusOutside?: Popover.PopoverContentProps[\"onFocusOutside\"];\n  onPointerDownOutside?: Popover.PopoverContentProps[\"onPointerDownOutside\"];\n  preventAutoFocusOnTouch?: boolean;\n}\n\nexport const PropertiesPopover = React.forwardRef<HTMLDivElement, PropertiesPopoverProps>(\n  (\n    {\n      className,\n      container,\n      children,\n      style,\n      onClose,\n      onKeyDown,\n      onFocusOutside,\n      onPointerLeave,\n      onPointerDownOutside,\n      preventAutoFocusOnTouch = false,\n    },\n    ref\n  ) => {\n    const editorInterface = useEditorInterface();\n    const isMobilePortrait = editorInterface.formFactor === \"phone\" && !editorInterface.isLandscape;\n\n    return (\n      <Popover.Portal container={container}>\n        <Popover.Content\n          ref={ref}\n          className={clsx(\"focus-visible-none\", className)}\n          data-prevent-outside-click\n          side={isMobilePortrait ? \"bottom\" : \"right\"}\n          align={isMobilePortrait ? \"center\" : \"start\"}\n          alignOffset={-16}\n          sideOffset={20}\n          collisionBoundary={container ?? undefined}\n          style={{\n            zIndex: \"var(--zIndex-ui-styles-popup)\",\n            marginLeft: editorInterface.formFactor === \"phone\" ? \"0.5rem\" : undefined,\n          }}\n          onPointerLeave={onPointerLeave}\n          onKeyDown={onKeyDown}\n          onFocusOutside={onFocusOutside}\n          onPointerDownOutside={onPointerDownOutside}\n          onOpenAutoFocus={e => {\n            // prevent auto-focus on touch devices to avoid keyboard popup\n            if (preventAutoFocusOnTouch && editorInterface.isTouchScreen) {\n              e.preventDefault();\n            }\n          }}\n          onCloseAutoFocus={e => {\n            e.stopPropagation();\n            // prevents focusing the trigger\n            e.preventDefault();\n\n            // return focus to jsondraw container unless\n            // user focuses an interactive element, such as a button, or\n            // enters the text editor by clicking on canvas with the text tool\n            if (container && !isInteractive(document.activeElement)) {\n              container.focus();\n            }\n\n            onClose();\n          }}\n        >\n          <Island padding={3} style={style}>\n            {children}\n          </Island>\n          <Popover.Arrow\n            width={20}\n            height={10}\n            style={{\n              fill: \"var(--popup-bg-color)\",\n              filter: \"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)\",\n            }}\n          />\n        </Popover.Content>\n      </Popover.Portal>\n    );\n  }\n);\n","import { MAX_CUSTOM_COLORS_USED_IN_CANVAS } from \"@jsondraw/common\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { ColorPickerColor, ColorPaletteCustom } from \"@jsondraw/common\";\n\nimport { atom } from \"../../editor-jotai\";\n\nexport const getColorNameAndShadeFromColor = ({\n  palette,\n  color,\n}: {\n  palette: ColorPaletteCustom;\n  color: string | null;\n}): {\n  colorName: ColorPickerColor;\n  shade: number | null;\n} | null => {\n  if (!color) {\n    return null;\n  }\n  for (const [colorName, colorVal] of Object.entries(palette)) {\n    if (Array.isArray(colorVal)) {\n      const shade = colorVal.indexOf(color);\n      if (shade > -1) {\n        return { colorName: colorName as ColorPickerColor, shade };\n      }\n    } else if (colorVal === color) {\n      return { colorName: colorName as ColorPickerColor, shade: null };\n    }\n  }\n  return null;\n};\n\nexport const colorPickerHotkeyBindings = [\n  [\"q\", \"w\", \"e\", \"r\", \"t\"],\n  [\"a\", \"s\", \"d\", \"f\", \"g\"],\n  [\"z\", \"x\", \"c\", \"v\", \"b\"],\n].flat();\n\nexport const isCustomColor = ({\n  color,\n  palette,\n}: {\n  color: string;\n  palette: ColorPaletteCustom;\n}) => {\n  const paletteValues = Object.values(palette).flat();\n  return !paletteValues.includes(color);\n};\n\nexport const getMostUsedCustomColors = (\n  elements: readonly JsonDrawElement[],\n  type: \"elementBackground\" | \"elementStroke\",\n  palette: ColorPaletteCustom,\n) => {\n  const elementColorTypeMap = {\n    elementBackground: \"backgroundColor\",\n    elementStroke: \"strokeColor\",\n  };\n\n  const colors = elements.filter((element) => {\n    if (element.isDeleted) {\n      return false;\n    }\n\n    const color =\n      element[elementColorTypeMap[type] as \"backgroundColor\" | \"strokeColor\"];\n\n    return isCustomColor({ color, palette });\n  });\n\n  const colorCountMap = new Map<string, number>();\n  colors.forEach((element) => {\n    const color =\n      element[elementColorTypeMap[type] as \"backgroundColor\" | \"strokeColor\"];\n    if (colorCountMap.has(color)) {\n      colorCountMap.set(color, colorCountMap.get(color)! + 1);\n    } else {\n      colorCountMap.set(color, 1);\n    }\n  });\n\n  return [...colorCountMap.entries()]\n    .sort((a, b) => b[1] - a[1])\n    .map((c) => c[0])\n    .slice(0, MAX_CUSTOM_COLORS_USED_IN_CANVAS);\n};\n\nexport type ActiveColorPickerSectionAtomType =\n  | \"custom\"\n  | \"baseColors\"\n  | \"shades\"\n  | \"hex\"\n  | null;\nexport const activeColorPickerSectionAtom =\n  atom<ActiveColorPickerSectionAtomType>(null);\n\nexport type ColorPickerType =\n  | \"canvasBackground\"\n  | \"elementBackground\"\n  | \"elementStroke\";\n","import clsx from \"clsx\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport { KEYS, normalizeInputColor } from \"@jsondraw/common\";\n\nimport { getShortcutKey } from \"../..//shortcut\";\nimport { useAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\nimport { useEditorInterface } from \"../App\";\nimport { activeEyeDropperAtom } from \"../canvases/EyeDropper\";\nimport { eyeDropperIcon } from \"../icons\";\n\nimport { activeColorPickerSectionAtom } from \"./colorPickerUtils\";\n\nimport type { ColorPickerType } from \"./colorPickerUtils\";\n\nexport const ColorInput = ({\n  color,\n  onChange,\n  label,\n  colorPickerType,\n  placeholder,\n}: {\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  colorPickerType: ColorPickerType;\n  placeholder?: string;\n}) => {\n  const editorInterface = useEditorInterface();\n  const [innerValue, setInnerValue] = useState(color);\n  const [activeSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  useEffect(() => {\n    setInnerValue(color);\n  }, [color]);\n\n  const changeColor = useCallback(\n    (inputValue: string) => {\n      const value = inputValue.toLowerCase();\n      const color = normalizeInputColor(value);\n\n      if (color) {\n        onChange(color);\n      }\n      setInnerValue(value);\n    },\n    [onChange],\n  );\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const eyeDropperTriggerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [activeSection]);\n\n  const [eyeDropperState, setEyeDropperState] = useAtom(activeEyeDropperAtom);\n\n  useEffect(() => {\n    return () => {\n      setEyeDropperState(null);\n    };\n  }, [setEyeDropperState]);\n\n  return (\n    <div className=\"color-picker__input-label\">\n      <div className=\"color-picker__input-hash\">#</div>\n      <input\n        ref={activeSection === \"hex\" ? inputRef : undefined}\n        style={{ border: 0, padding: 0 }}\n        spellCheck={false}\n        className=\"color-picker-input\"\n        aria-label={label}\n        onChange={(event) => {\n          changeColor(event.target.value);\n        }}\n        value={(innerValue || \"\").replace(/^#/, \"\")}\n        onBlur={() => {\n          setInnerValue(color);\n        }}\n        tabIndex={-1}\n        onFocus={() => setActiveColorPickerSection(\"hex\")}\n        onKeyDown={(event) => {\n          if (event.key === KEYS.TAB) {\n            return;\n          } else if (event.key === KEYS.ESCAPE) {\n            eyeDropperTriggerRef.current?.focus();\n          }\n          event.stopPropagation();\n        }}\n        placeholder={placeholder}\n      />\n      {/* TODO reenable on mobile with a better UX */}\n      {editorInterface.formFactor !== \"phone\" && (\n        <>\n          <div\n            style={{\n              width: \"1px\",\n              height: \"1.25rem\",\n              backgroundColor: \"var(--default-border-color)\",\n            }}\n          />\n          <div\n            ref={eyeDropperTriggerRef}\n            className={clsx(\"jsondraw-eye-dropper-trigger\", {\n              selected: eyeDropperState,\n            })}\n            onClick={() =>\n              setEyeDropperState((s) =>\n                s\n                  ? null\n                  : {\n                      keepOpenOnAlt: false,\n                      onSelect: (color) => onChange(color),\n                      colorPickerType,\n                    },\n              )\n            }\n            title={`${t(\n              \"labels.eyeDropper\",\n            )}  ${KEYS.I.toLocaleUpperCase()} or ${getShortcutKey(\"Alt\")} `}\n          >\n            {eyeDropperIcon}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ColorPicker.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ColorPicker.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport { isColorDark } from \"@jsondraw/common\";\n\ninterface HotkeyLabelProps {\n  color: string;\n  keyLabel: string | number;\n  isShade?: boolean;\n}\nconst HotkeyLabel = ({\n  color,\n  keyLabel,\n  isShade = false,\n}: HotkeyLabelProps) => {\n  return (\n    <div\n      className=\"color-picker__button__hotkey-label\"\n      style={{\n        color: isColorDark(color) ? \"#fff\" : \"#000\",\n      }}\n    >\n      {isShade && \"\"}\n      {keyLabel}\n    </div>\n  );\n};\n\nexport default HotkeyLabel;\n","import clsx from \"clsx\";\nimport { useEffect, useRef } from \"react\";\n\nimport { useAtom } from \"../../editor-jotai\";\n\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { activeColorPickerSectionAtom } from \"./colorPickerUtils\";\n\ninterface CustomColorListProps {\n  colors: string[];\n  color: string | null;\n  onChange: (color: string) => void;\n  label: string;\n}\n\nexport const CustomColorList = ({\n  colors,\n  color,\n  onChange,\n  label,\n}: CustomColorListProps) => {\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current) {\n      btnRef.current.focus();\n    }\n  }, [color, activeColorPickerSection]);\n\n  return (\n    <div className=\"color-picker-content--default\">\n      {colors.map((c, i) => {\n        return (\n          <button\n            ref={color === c ? btnRef : undefined}\n            tabIndex={-1}\n            type=\"button\"\n            className={clsx(\n              \"color-picker__button color-picker__button--large has-outline\",\n              {\n                active: color === c,\n                \"is-transparent\": c === \"transparent\" || !c,\n              },\n            )}\n            onClick={() => {\n              onChange(c);\n              setActiveColorPickerSection(\"custom\");\n            }}\n            title={c}\n            aria-label={label}\n            style={{ \"--swatch-color\": c }}\n            key={i}\n          >\n            <div className=\"color-picker__button-outline\" />\n            <HotkeyLabel color={c} keyLabel={i + 1} />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n","import clsx from \"clsx\";\nimport { useEffect, useRef } from \"react\";\n\nimport type { ColorPaletteCustom } from \"@jsondraw/common\";\n\nimport { useAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\n\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport {\n  activeColorPickerSectionAtom,\n  colorPickerHotkeyBindings,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\n\nimport type { TranslationKeys } from \"../../i18n\";\n\ninterface PickerColorListProps {\n  palette: ColorPaletteCustom;\n  color: string | null;\n  onChange: (color: string) => void;\n  activeShade: number;\n  showHotKey?: boolean;\n}\n\nconst PickerColorList = ({\n  palette,\n  color,\n  onChange,\n  activeShade,\n  showHotKey = true,\n}: PickerColorListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color,\n    palette,\n  });\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"baseColors\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj?.colorName, activeColorPickerSection]);\n\n  return (\n    <div className=\"color-picker-content--default\">\n      {Object.entries(palette).map(([key, value], index) => {\n        const color =\n          (Array.isArray(value) ? value[activeShade] : value) || \"transparent\";\n\n        const keybinding = colorPickerHotkeyBindings[index];\n        const label = t(\n          `colors.${key.replace(/\\d+/, \"\")}` as unknown as TranslationKeys,\n          null,\n          \"\",\n        );\n\n        return (\n          <button\n            ref={colorObj?.colorName === key ? btnRef : undefined}\n            tabIndex={-1}\n            type=\"button\"\n            className={clsx(\n              \"color-picker__button color-picker__button--large has-outline\",\n              {\n                active: colorObj?.colorName === key,\n                \"is-transparent\": color === \"transparent\" || !color,\n              },\n            )}\n            onClick={() => {\n              onChange(color);\n              setActiveColorPickerSection(\"baseColors\");\n            }}\n            title={`${label}${\n              color.startsWith(\"#\") ? ` ${color}` : \"\"\n            }  ${keybinding}`}\n            aria-label={`${label}  ${keybinding}`}\n            style={color ? { \"--swatch-color\": color } : undefined}\n            data-testid={`color-${key}`}\n            key={key}\n          >\n            <div className=\"color-picker__button-outline\" />\n            {showHotKey && <HotkeyLabel color={color} keyLabel={keybinding} />}\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PickerColorList;\n","import type { ReactNode } from \"react\";\n\nconst PickerHeading = ({ children }: { children: ReactNode }) => (\n  <div className=\"color-picker__heading\">{children}</div>\n);\n\nexport default PickerHeading;\n","import clsx from \"clsx\";\nimport { useEffect, useRef } from \"react\";\n\nimport type { ColorPaletteCustom } from \"@jsondraw/common\";\n\nimport { useAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\n\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport {\n  activeColorPickerSectionAtom,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\n\ninterface ShadeListProps {\n  color: string | null;\n  onChange: (color: string) => void;\n  palette: ColorPaletteCustom;\n  showHotKey?: boolean;\n}\n\nexport const ShadeList = ({\n  color,\n  onChange,\n  palette,\n  showHotKey,\n}: ShadeListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color: color || \"transparent\",\n    palette,\n  });\n\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"shades\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj, activeColorPickerSection]);\n\n  if (colorObj) {\n    const { colorName, shade } = colorObj;\n\n    const shades = palette[colorName];\n\n    if (Array.isArray(shades)) {\n      return (\n        <div className=\"color-picker-content--default shades\">\n          {shades.map((color, i) => (\n            <button\n              ref={\n                i === shade && activeColorPickerSection === \"shades\"\n                  ? btnRef\n                  : undefined\n              }\n              tabIndex={-1}\n              key={i}\n              type=\"button\"\n              className={clsx(\n                \"color-picker__button color-picker__button--large has-outline\",\n                { active: i === shade },\n              )}\n              aria-label=\"Shade\"\n              title={`${colorName} - ${i + 1}`}\n              style={color ? { \"--swatch-color\": color } : undefined}\n              onClick={() => {\n                onChange(color);\n                setActiveColorPickerSection(\"shades\");\n              }}\n            >\n              <div className=\"color-picker__button-outline\" />\n              {showHotKey && (\n                <HotkeyLabel color={color} keyLabel={i + 1} isShade />\n              )}\n            </button>\n          ))}\n        </div>\n      );\n    }\n  }\n\n  return (\n    <div\n      className=\"color-picker-content--default\"\n      style={{ position: \"relative\" }}\n      tabIndex={-1}\n    >\n      <button\n        type=\"button\"\n        tabIndex={-1}\n        className=\"color-picker__button color-picker__button--large color-picker__button--no-focus-visible\"\n      />\n      <div\n        tabIndex={-1}\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          fontSize: \"0.75rem\",\n        }}\n      >\n        {t(\"colorPicker.noShades\")}\n      </div>\n    </div>\n  );\n};\n","import { COLORS_PER_ROW, COLOR_PALETTE, KEYS } from \"@jsondraw/common\";\n\nimport type {\n  ColorPickerColor,\n  ColorPalette,\n  ColorPaletteCustom,\n} from \"@jsondraw/common\";\n\nimport type { ValueOf } from \"@jsondraw/common/utility-types\";\n\nimport {\n  colorPickerHotkeyBindings,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\n\nimport type { ActiveColorPickerSectionAtomType } from \"./colorPickerUtils\";\n\nconst arrowHandler = (\n  eventKey: string,\n  currentIndex: number | null,\n  length: number,\n) => {\n  const rows = Math.ceil(length / COLORS_PER_ROW);\n\n  currentIndex = currentIndex ?? -1;\n\n  switch (eventKey) {\n    case \"ArrowLeft\": {\n      const prevIndex = currentIndex - 1;\n      return prevIndex < 0 ? length - 1 : prevIndex;\n    }\n    case \"ArrowRight\": {\n      return (currentIndex + 1) % length;\n    }\n    case \"ArrowDown\": {\n      const nextIndex = currentIndex + COLORS_PER_ROW;\n      return nextIndex >= length ? currentIndex % COLORS_PER_ROW : nextIndex;\n    }\n    case \"ArrowUp\": {\n      const prevIndex = currentIndex - COLORS_PER_ROW;\n      const newIndex =\n        prevIndex < 0 ? COLORS_PER_ROW * rows + prevIndex : prevIndex;\n      return newIndex >= length ? undefined : newIndex;\n    }\n  }\n};\n\ninterface HotkeyHandlerProps {\n  e: React.KeyboardEvent;\n  colorObj: { colorName: ColorPickerColor; shade: number | null } | null;\n  onChange: (color: string) => void;\n  palette: ColorPaletteCustom;\n  customColors: string[];\n  setActiveColorPickerSection: (\n    update: React.SetStateAction<ActiveColorPickerSectionAtomType>,\n  ) => void;\n  activeShade: number;\n}\n\n/**\n * @returns true if the event was handled\n */\nconst hotkeyHandler = ({\n  e,\n  colorObj,\n  onChange,\n  palette,\n  customColors,\n  setActiveColorPickerSection,\n  activeShade,\n}: HotkeyHandlerProps): boolean => {\n  if (colorObj?.shade != null) {\n    // shift + numpad is extremely messed up on windows apparently\n    if (\n      [\"Digit1\", \"Digit2\", \"Digit3\", \"Digit4\", \"Digit5\"].includes(e.code) &&\n      e.shiftKey\n    ) {\n      const newShade = Number(e.code.slice(-1)) - 1;\n      onChange(palette[colorObj.colorName][newShade]);\n      setActiveColorPickerSection(\"shades\");\n      return true;\n    }\n  }\n\n  if ([\"1\", \"2\", \"3\", \"4\", \"5\"].includes(e.key)) {\n    const c = customColors[Number(e.key) - 1];\n    if (c) {\n      onChange(customColors[Number(e.key) - 1]);\n      setActiveColorPickerSection(\"custom\");\n      return true;\n    }\n  }\n\n  if (colorPickerHotkeyBindings.includes(e.key)) {\n    const index = colorPickerHotkeyBindings.indexOf(e.key);\n    const paletteKey = Object.keys(palette)[index] as keyof ColorPalette;\n    const paletteValue = palette[paletteKey];\n    const r = Array.isArray(paletteValue)\n      ? paletteValue[activeShade]\n      : paletteValue;\n    onChange(r);\n    setActiveColorPickerSection(\"baseColors\");\n    return true;\n  }\n  return false;\n};\n\ninterface ColorPickerKeyNavHandlerProps {\n  event: React.KeyboardEvent;\n  activeColorPickerSection: ActiveColorPickerSectionAtomType;\n  palette: ColorPaletteCustom;\n  color: string | null;\n  onChange: (color: string) => void;\n  customColors: string[];\n  setActiveColorPickerSection: (\n    update: React.SetStateAction<ActiveColorPickerSectionAtomType>,\n  ) => void;\n  updateData: (formData?: any) => void;\n  activeShade: number;\n  onEyeDropperToggle: (force?: boolean) => void;\n  onEscape: (event: React.KeyboardEvent | KeyboardEvent) => void;\n}\n\n/**\n * @returns true if the event was handled\n */\nexport const colorPickerKeyNavHandler = ({\n  event,\n  activeColorPickerSection,\n  palette,\n  color,\n  onChange,\n  customColors,\n  setActiveColorPickerSection,\n  updateData,\n  activeShade,\n  onEyeDropperToggle,\n  onEscape,\n}: ColorPickerKeyNavHandlerProps): boolean => {\n  if (event[KEYS.CTRL_OR_CMD]) {\n    return false;\n  }\n\n  if (event.key === KEYS.ESCAPE) {\n    onEscape(event);\n    return true;\n  }\n\n  // checkt using `key` to ignore combos with Alt modifier\n  if (event.key === KEYS.ALT) {\n    onEyeDropperToggle(true);\n    return true;\n  }\n\n  if (event.key === KEYS.I) {\n    onEyeDropperToggle();\n    return true;\n  }\n\n  const colorObj = getColorNameAndShadeFromColor({ color, palette });\n\n  if (event.key === KEYS.TAB) {\n    const sectionsMap: Record<\n      NonNullable<ActiveColorPickerSectionAtomType>,\n      boolean\n    > = {\n      custom: !!customColors.length,\n      baseColors: true,\n      shades: colorObj?.shade != null,\n      hex: true,\n    };\n\n    const sections = Object.entries(sectionsMap).reduce((acc, [key, value]) => {\n      if (value) {\n        acc.push(key as ActiveColorPickerSectionAtomType);\n      }\n      return acc;\n    }, [] as ActiveColorPickerSectionAtomType[]);\n\n    const activeSectionIndex = sections.indexOf(activeColorPickerSection);\n    const indexOffset = event.shiftKey ? -1 : 1;\n    const nextSectionIndex =\n      activeSectionIndex + indexOffset > sections.length - 1\n        ? 0\n        : activeSectionIndex + indexOffset < 0\n        ? sections.length - 1\n        : activeSectionIndex + indexOffset;\n\n    const nextSection = sections[nextSectionIndex];\n\n    if (nextSection) {\n      setActiveColorPickerSection(nextSection);\n    }\n\n    if (nextSection === \"custom\") {\n      onChange(customColors[0]);\n    } else if (nextSection === \"baseColors\") {\n      const baseColorName = (\n        Object.entries(palette) as [string, ValueOf<ColorPalette>][]\n      ).find(([name, shades]) => {\n        if (Array.isArray(shades)) {\n          return shades.includes(color);\n        } else if (shades === color) {\n          return name;\n        }\n        return null;\n      });\n\n      if (!baseColorName) {\n        onChange(COLOR_PALETTE.black);\n      }\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    return true;\n  }\n\n  if (\n    hotkeyHandler({\n      e: event,\n      colorObj,\n      onChange,\n      palette,\n      customColors,\n      setActiveColorPickerSection,\n      activeShade,\n    })\n  ) {\n    return true;\n  }\n\n  if (activeColorPickerSection === \"shades\") {\n    if (colorObj) {\n      const { shade } = colorObj;\n      const newShade = arrowHandler(event.key, shade, COLORS_PER_ROW);\n\n      if (newShade !== undefined) {\n        onChange(palette[colorObj.colorName][newShade]);\n        return true;\n      }\n    }\n  }\n\n  if (activeColorPickerSection === \"baseColors\") {\n    if (colorObj) {\n      const { colorName } = colorObj;\n      const colorNames = Object.keys(palette) as (keyof ColorPalette)[];\n      const indexOfColorName = colorNames.indexOf(colorName);\n\n      const newColorIndex = arrowHandler(\n        event.key,\n        indexOfColorName,\n        colorNames.length,\n      );\n\n      if (newColorIndex !== undefined) {\n        const newColorName = colorNames[newColorIndex];\n        const newColorNameValue = palette[newColorName];\n\n        onChange(\n          Array.isArray(newColorNameValue)\n            ? newColorNameValue[activeShade]\n            : newColorNameValue,\n        );\n        return true;\n      }\n    }\n  }\n\n  if (activeColorPickerSection === \"custom\") {\n    const indexOfColor = color != null ? customColors.indexOf(color) : 0;\n\n    const newColorIndex = arrowHandler(\n      event.key,\n      indexOfColor,\n      customColors.length,\n    );\n\n    if (newColorIndex !== undefined) {\n      const newColor = customColors[newColorIndex];\n      onChange(newColor);\n      return true;\n    }\n  }\n\n  return false;\n};\n","import React, { useEffect, useImperativeHandle, useState } from \"react\";\n\nimport { EVENT } from \"@jsondraw/common\";\n\nimport {\n  DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX,\n  DEFAULT_ELEMENT_STROKE_COLOR_INDEX,\n  KEYS,\n} from \"@jsondraw/common\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { ColorPaletteCustom } from \"@jsondraw/common\";\n\nimport { useAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\n\nimport { CustomColorList } from \"./CustomColorList\";\nimport PickerColorList from \"./PickerColorList\";\nimport PickerHeading from \"./PickerHeading\";\nimport { ShadeList } from \"./ShadeList\";\nimport {\n  activeColorPickerSectionAtom,\n  getColorNameAndShadeFromColor,\n  getMostUsedCustomColors,\n  isCustomColor,\n} from \"./colorPickerUtils\";\nimport { colorPickerKeyNavHandler } from \"./keyboardNavHandlers\";\n\nimport type { ColorPickerType } from \"./colorPickerUtils\";\n\ninterface PickerProps {\n  color: string | null;\n  onChange: (color: string) => void;\n  type: ColorPickerType;\n  elements: readonly JsonDrawElement[];\n  palette: ColorPaletteCustom;\n  updateData: (formData?: any) => void;\n  children?: React.ReactNode;\n  showTitle?: boolean;\n  onEyeDropperToggle: (force?: boolean) => void;\n  onEscape: (event: React.KeyboardEvent | KeyboardEvent) => void;\n  showHotKey?: boolean;\n}\n\nexport const Picker = React.forwardRef(\n  (\n    {\n      color,\n      onChange,\n      type,\n      elements,\n      palette,\n      updateData,\n      children,\n      showTitle,\n      onEyeDropperToggle,\n      onEscape,\n      showHotKey = true,\n    }: PickerProps,\n    ref,\n  ) => {\n    const title = showTitle\n      ? type === \"elementStroke\"\n        ? t(\"labels.stroke\")\n        : type === \"elementBackground\"\n        ? t(\"labels.background\")\n        : null\n      : null;\n\n    const [customColors] = React.useState(() => {\n      if (type === \"canvasBackground\") {\n        return [];\n      }\n      return getMostUsedCustomColors(elements, type, palette);\n    });\n\n    const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n      activeColorPickerSectionAtom,\n    );\n\n    const colorObj = getColorNameAndShadeFromColor({\n      color,\n      palette,\n    });\n\n    useEffect(() => {\n      if (!activeColorPickerSection) {\n        const isCustom = !!color && isCustomColor({ color, palette });\n        const isCustomButNotInList = isCustom && !customColors.includes(color);\n\n        setActiveColorPickerSection(\n          isCustomButNotInList\n            ? null\n            : isCustom\n            ? \"custom\"\n            : colorObj?.shade != null\n            ? \"shades\"\n            : \"baseColors\",\n        );\n      }\n    }, [\n      activeColorPickerSection,\n      color,\n      palette,\n      setActiveColorPickerSection,\n      colorObj,\n      customColors,\n    ]);\n\n    const [activeShade, setActiveShade] = useState(\n      colorObj?.shade ??\n        (type === \"elementBackground\"\n          ? DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX\n          : DEFAULT_ELEMENT_STROKE_COLOR_INDEX),\n    );\n\n    useEffect(() => {\n      if (colorObj?.shade != null) {\n        setActiveShade(colorObj.shade);\n      }\n\n      const keyup = (event: KeyboardEvent) => {\n        if (event.key === KEYS.ALT) {\n          onEyeDropperToggle(false);\n        }\n      };\n      document.addEventListener(EVENT.KEYUP, keyup, { capture: true });\n      return () => {\n        document.removeEventListener(EVENT.KEYUP, keyup, { capture: true });\n      };\n    }, [colorObj, onEyeDropperToggle]);\n    const pickerRef = React.useRef<HTMLDivElement>(null);\n\n    useImperativeHandle(ref, () => pickerRef.current!);\n\n    useEffect(() => {\n      pickerRef?.current?.focus();\n    }, []);\n\n    return (\n      <div role=\"dialog\" aria-modal=\"true\" aria-label={t(\"labels.colorPicker\")}>\n        <div\n          ref={pickerRef}\n          onKeyDown={(event) => {\n            const handled = colorPickerKeyNavHandler({\n              event,\n              activeColorPickerSection,\n              palette,\n              color,\n              onChange,\n              onEyeDropperToggle,\n              customColors,\n              setActiveColorPickerSection,\n              updateData,\n              activeShade,\n              onEscape,\n            });\n\n            if (handled) {\n              event.preventDefault();\n              event.stopPropagation();\n            }\n          }}\n          className=\"color-picker-content properties-content\"\n          // to allow focusing by clicking but not by tabbing\n          tabIndex={-1}\n        >\n          {title && <div className=\"color-picker__title\">{title}</div>}\n\n          {!!customColors.length && (\n            <div>\n              <PickerHeading>\n                {t(\"colorPicker.mostUsedCustomColors\")}\n              </PickerHeading>\n              <CustomColorList\n                colors={customColors}\n                color={color}\n                label={t(\"colorPicker.mostUsedCustomColors\")}\n                onChange={onChange}\n              />\n            </div>\n          )}\n\n          <div>\n            <PickerHeading>{t(\"colorPicker.colors\")}</PickerHeading>\n            <PickerColorList\n              color={color}\n              palette={palette}\n              onChange={onChange}\n              activeShade={activeShade}\n              showHotKey={showHotKey}\n            />\n          </div>\n\n          <div>\n            <PickerHeading>{t(\"colorPicker.shades\")}</PickerHeading>\n            <ShadeList\n              color={color}\n              onChange={onChange}\n              palette={palette}\n              showHotKey={showHotKey}\n            />\n          </div>\n          {children}\n        </div>\n      </div>\n    );\n  },\n);\n","import clsx from \"clsx\";\n\nimport {\n  COLOR_OUTLINE_CONTRAST_THRESHOLD,\n  DEFAULT_CANVAS_BACKGROUND_PICKS,\n  DEFAULT_ELEMENT_BACKGROUND_PICKS,\n  DEFAULT_ELEMENT_STROKE_PICKS,\n  isColorDark,\n} from \"@jsondraw/common\";\n\nimport type { ColorPickerType } from \"./colorPickerUtils\";\n\ninterface TopPicksProps {\n  onChange: (color: string) => void;\n  type: ColorPickerType;\n  activeColor: string | null;\n  topPicks?: readonly string[];\n}\n\nexport const TopPicks = ({\n  onChange,\n  type,\n  activeColor,\n  topPicks,\n}: TopPicksProps) => {\n  let colors;\n  if (type === \"elementStroke\") {\n    colors = DEFAULT_ELEMENT_STROKE_PICKS;\n  }\n\n  if (type === \"elementBackground\") {\n    colors = DEFAULT_ELEMENT_BACKGROUND_PICKS;\n  }\n\n  if (type === \"canvasBackground\") {\n    colors = DEFAULT_CANVAS_BACKGROUND_PICKS;\n  }\n\n  // this one can overwrite defaults\n  if (topPicks) {\n    colors = topPicks;\n  }\n\n  if (!colors) {\n    console.error(\"Invalid type for TopPicks\");\n    return null;\n  }\n\n  return (\n    <div className=\"color-picker__top-picks\">\n      {colors.map((color: string) => (\n        <button\n          className={clsx(\"color-picker__button\", {\n            active: color === activeColor,\n            \"is-transparent\": color === \"transparent\" || !color,\n            \"has-outline\": !isColorDark(\n              color,\n              COLOR_OUTLINE_CONTRAST_THRESHOLD,\n            ),\n          })}\n          style={{ \"--swatch-color\": color }}\n          key={color}\n          type=\"button\"\n          title={color}\n          onClick={() => onChange(color)}\n          data-testid={`color-top-pick-${color}`}\n        >\n          <div className=\"color-picker__button-outline\" />\n        </button>\n      ))}\n    </div>\n  );\n};\n","import { useRef, useEffect } from \"react\";\nimport {\n  COLOR_OUTLINE_CONTRAST_THRESHOLD,\n  COLOR_PALETTE,\n  isColorDark,\n  isWritableElement,\n} from \"@jsondraw/common\";\nimport type { ColorTuple, ColorPaletteCustom } from \"@jsondraw/common\";\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport { Popover } from \"radix-ui\";\nimport { useAtom } from \"../../editor-jotai\";\nimport {\n  saveCaretPosition,\n  restoreCaretPosition,\n  temporarilyDisableTextEditorBlur,\n} from \"../../hooks/useTextEditorFocus\";\nimport { t } from \"../../i18n\";\nimport type { AppState } from \"../../types\";\nimport { useJsonDrawContainer, useStylesPanelMode } from \"../App\";\nimport { activeEyeDropperAtom } from \"../canvases/EyeDropper\";\nimport { slashIcon, strokeIcon } from \"../icons\";\nimport { ButtonSeparator } from \"../ui/ButtonSeparator\";\nimport { PropertiesPopover } from \"../ui/PropertiesPopover\";\nimport { ColorInput } from \"./ColorInput\";\nimport \"./ColorPicker.scss\";\nimport { Picker } from \"./Picker\";\nimport PickerHeading from \"./PickerHeading\";\nimport { TopPicks } from \"./TopPicks\";\nimport { activeColorPickerSectionAtom } from \"./colorPickerUtils\";\nimport type { ColorPickerType } from \"./colorPickerUtils\";\n\ninterface ColorPickerProps {\n  type: ColorPickerType;\n  /**\n   * null indicates no color should be displayed as active\n   * (e.g. when multiple shapes selected with different colors)\n   */\n  color: string | null;\n  onChange: (color: string) => void;\n  label: string;\n  elements: readonly JsonDrawElement[];\n  appState: AppState;\n  palette?: ColorPaletteCustom | null;\n  topPicks?: ColorTuple;\n  updateData: (formData?: any) => void;\n}\n\nconst ColorPickerPopupContent = ({\n  type,\n  color,\n  onChange,\n  label,\n  elements,\n  palette = COLOR_PALETTE,\n  updateData,\n  getOpenPopup,\n  appState,\n}: Pick<\n  ColorPickerProps,\n  \"type\" | \"color\" | \"onChange\" | \"label\" | \"elements\" | \"palette\" | \"updateData\" | \"appState\"\n> & {\n  getOpenPopup: () => AppState[\"openPopup\"];\n}) => {\n  const { container } = useJsonDrawContainer();\n  const stylesPanelMode = useStylesPanelMode();\n  const isCompactMode = stylesPanelMode !== \"full\";\n  const isMobileMode = stylesPanelMode === \"mobile\";\n  const [, setActiveColorPickerSection] = useAtom(activeColorPickerSectionAtom);\n\n  const [eyeDropperState, setEyeDropperState] = useAtom(activeEyeDropperAtom);\n\n  const colorInputJSX = (\n    <div>\n      <PickerHeading>{t(\"colorPicker.hexCode\")}</PickerHeading>\n      <ColorInput\n        color={color || \"\"}\n        label={label}\n        onChange={color => {\n          onChange(color);\n        }}\n        colorPickerType={type}\n        placeholder={t(\"colorPicker.color\")}\n      />\n    </div>\n  );\n\n  const colorPickerContentRef = useRef<HTMLDivElement>(null);\n\n  const focusPickerContent = () => {\n    colorPickerContentRef.current?.focus();\n  };\n\n  return (\n    <PropertiesPopover\n      container={container}\n      style={{ maxWidth: \"13rem\" }}\n      // Improve focus handling for text editing scenarios\n      preventAutoFocusOnTouch={!!appState.editingTextElement}\n      onFocusOutside={event => {\n        // refocus due to eye dropper\n        if (!isWritableElement(event.target)) {\n          focusPickerContent();\n        }\n        event.preventDefault();\n      }}\n      onPointerDownOutside={event => {\n        if (eyeDropperState) {\n          // prevent from closing if we click outside the popover\n          // while eyedropping (e.g. click when clicking the sidebar;\n          // the eye-dropper-backdrop is prevented downstream)\n          event.preventDefault();\n        }\n      }}\n      onClose={() => {\n        // only clear if we're still the active popup (avoid racing with switch)\n        if (getOpenPopup() === type) {\n          updateData({ openPopup: null });\n        }\n        setActiveColorPickerSection(null);\n\n        // Refocus text editor when popover closes if we were editing text\n        if (appState.editingTextElement) {\n          setTimeout(() => {\n            const textEditor = document.querySelector(\".jsondraw-wysiwyg\") as HTMLTextAreaElement;\n            if (textEditor) {\n              textEditor.focus();\n            }\n          }, 0);\n        }\n      }}\n    >\n      {palette ? (\n        <Picker\n          ref={colorPickerContentRef}\n          palette={palette}\n          color={color}\n          onChange={changedColor => {\n            // Save caret position before color change if editing text\n            const savedSelection = appState.editingTextElement ? saveCaretPosition() : null;\n\n            onChange(changedColor);\n\n            // Restore caret position after color change if editing text\n            if (appState.editingTextElement && savedSelection) {\n              restoreCaretPosition(savedSelection);\n            }\n          }}\n          onEyeDropperToggle={force => {\n            setEyeDropperState(state => {\n              if (force) {\n                state = state || {\n                  keepOpenOnAlt: true,\n                  onSelect: onChange,\n                  colorPickerType: type,\n                };\n                state.keepOpenOnAlt = true;\n                return state;\n              }\n\n              return force === false || state\n                ? null\n                : {\n                    keepOpenOnAlt: false,\n                    onSelect: onChange,\n                    colorPickerType: type,\n                  };\n            });\n          }}\n          onEscape={event => {\n            if (eyeDropperState) {\n              setEyeDropperState(null);\n            } else {\n              // close explicitly on Escape\n              updateData({ openPopup: null });\n            }\n          }}\n          type={type}\n          elements={elements}\n          updateData={updateData}\n          showTitle={isCompactMode}\n          showHotKey={!isMobileMode}\n        >\n          {colorInputJSX}\n        </Picker>\n      ) : (\n        colorInputJSX\n      )}\n    </PropertiesPopover>\n  );\n};\n\nconst ColorPickerTrigger = ({\n  label,\n  color,\n  type,\n  mode = \"background\",\n  onToggle,\n  editingTextElement,\n}: {\n  color: string | null;\n  label: string;\n  type: ColorPickerType;\n  mode?: \"background\" | \"stroke\";\n  onToggle: () => void;\n  editingTextElement?: boolean;\n}) => {\n  const stylesPanelMode = useStylesPanelMode();\n  const isCompactMode = stylesPanelMode !== \"full\";\n  const isMobileMode = stylesPanelMode === \"mobile\";\n  const handleClick = (e: React.MouseEvent) => {\n    // use pointerdown so we run before outside-close logic\n    e.preventDefault();\n    e.stopPropagation();\n\n    // If editing text, temporarily disable the wysiwyg blur event\n    if (editingTextElement) {\n      temporarilyDisableTextEditorBlur();\n    }\n\n    onToggle();\n  };\n\n  return (\n    <Popover.Trigger\n      type=\"button\"\n      className={clsx(\"color-picker__button active-color properties-trigger\", {\n        \"is-transparent\": !color || color === \"transparent\",\n        \"has-outline\": !color || !isColorDark(color, COLOR_OUTLINE_CONTRAST_THRESHOLD),\n        \"compact-sizing\": isCompactMode,\n        \"mobile-border\": isMobileMode,\n      })}\n      aria-label={label}\n      style={color ? { \"--swatch-color\": color } : undefined}\n      title={type === \"elementStroke\" ? t(\"labels.showStroke\") : t(\"labels.showBackground\")}\n      data-openpopup={type}\n      onClick={handleClick}\n    >\n      <div className=\"color-picker__button-outline\">{!color && slashIcon}</div>\n      {isCompactMode && color && mode === \"stroke\" && (\n        <div className=\"color-picker__button-background\">\n          <span\n            style={{\n              color:\n                color && isColorDark(color, COLOR_OUTLINE_CONTRAST_THRESHOLD) ? \"#fff\" : \"#111\",\n            }}\n          >\n            {strokeIcon}\n          </span>\n        </div>\n      )}\n    </Popover.Trigger>\n  );\n};\n\nexport const ColorPicker = ({\n  type,\n  color,\n  onChange,\n  label,\n  elements,\n  palette = COLOR_PALETTE,\n  topPicks,\n  updateData,\n  appState,\n}: ColorPickerProps) => {\n  const openRef = useRef(appState.openPopup);\n  useEffect(() => {\n    openRef.current = appState.openPopup;\n  }, [appState.openPopup]);\n  const stylesPanelMode = useStylesPanelMode();\n  const isCompactMode = stylesPanelMode !== \"full\";\n\n  return (\n    <div>\n      <div\n        role=\"dialog\"\n        aria-modal=\"true\"\n        className={clsx(\"color-picker-container\", {\n          \"color-picker-container--no-top-picks\": isCompactMode,\n        })}\n      >\n        {!isCompactMode && (\n          <TopPicks activeColor={color} onChange={onChange} type={type} topPicks={topPicks} />\n        )}\n        {!isCompactMode && <ButtonSeparator />}\n        <Popover.Root\n          open={appState.openPopup === type}\n          onOpenChange={open => {\n            if (open) {\n              updateData({ openPopup: type });\n            }\n          }}\n        >\n          {/* serves as an active color indicator as well */}\n          <ColorPickerTrigger\n            color={color}\n            label={label}\n            type={type}\n            mode={type === \"elementStroke\" ? \"stroke\" : \"background\"}\n            editingTextElement={!!appState.editingTextElement}\n            onToggle={() => {\n              // atomic switch: if another popup is open, close it first, then open this one next tick\n              if (appState.openPopup === type) {\n                // toggle off on same trigger\n                updateData({ openPopup: null });\n              } else if (appState.openPopup) {\n                updateData({ openPopup: type });\n              } else {\n                // open this one\n                updateData({ openPopup: type });\n              }\n            }}\n          />\n          {/* popup content */}\n          {appState.openPopup === type && (\n            <ColorPickerPopupContent\n              type={type}\n              color={color}\n              onChange={onChange}\n              label={label}\n              elements={elements}\n              palette={palette}\n              updateData={updateData}\n              getOpenPopup={() => openRef.current}\n              appState={appState}\n            />\n          )}\n        </Popover.Root>\n      </div>\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ButtonIcon.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ButtonIcon.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { forwardRef } from \"react\";\nimport type { JSX } from \"react\";\nimport clsx from \"clsx\";\nimport \"./ButtonIcon.scss\";\n\ninterface ButtonIconProps {\n  icon: JSX.Element;\n  title: string;\n  className?: string;\n  testId?: string;\n  /** if not supplied, defaults to value identity check */\n  active?: boolean;\n  /** include standalone style (could interfere with parent styles) */\n  standalone?: boolean;\n  onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  style?: React.CSSProperties;\n}\n\nexport const ButtonIcon = forwardRef<HTMLButtonElement, ButtonIconProps>((props, ref) => {\n  const { title, className, testId, active, standalone, icon, onClick } = props;\n  return (\n    <button\n      type=\"button\"\n      ref={ref}\n      key={title}\n      title={title}\n      data-testid={testId}\n      className={clsx(className, { standalone, active })}\n      onClick={onClick}\n      style={props.style}\n    >\n      {icon}\n    </button>\n  );\n});\n","import type { JSX } from \"react\";\nimport clsx from \"clsx\";\nimport { ButtonIcon } from \"./ButtonIcon\";\n\nexport const RadioSelection = <T extends Object>(\n  props: {\n    options: {\n      value: T;\n      text: string;\n      icon: JSX.Element;\n      testId?: string;\n      /** if not supplied, defaults to value identity check */\n      active?: boolean;\n    }[];\n    value: T | null;\n    type?: \"radio\" | \"button\";\n  } & (\n    | { type?: \"radio\"; group: string; onChange: (value: T) => void }\n    | {\n        type: \"button\";\n        onClick: (value: T, event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n      }\n  )\n) => (\n  <>\n    {props.options.map(option =>\n      props.type === \"button\" ? (\n        <ButtonIcon\n          key={option.text}\n          icon={option.icon}\n          title={option.text}\n          testId={option.testId}\n          active={option.active ?? props.value === option.value}\n          onClick={event => props.onClick(option.value, event)}\n        />\n      ) : (\n        <label\n          key={option.text}\n          className={clsx({ active: props.value === option.value })}\n          title={option.text}\n        >\n          <input\n            type=\"radio\"\n            name={props.group}\n            onChange={() => props.onChange(option.value)}\n            checked={props.value === option.value}\n            data-testid={option.testId}\n          />\n          {option.icon}\n        </label>\n      )\n    )}\n  </>\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FontPicker.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FontPicker.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\n\nconst MenuGroup = ({\n  children,\n  className = \"\",\n  style,\n  title,\n}: {\n  children: React.ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n  title?: string;\n}) => {\n  return (\n    <div className={`dropdown-menu-group ${className}`} style={style}>\n      {title && <p className=\"dropdown-menu-group-title\">{title}</p>}\n      {children}\n    </div>\n  );\n};\n\nexport default MenuGroup;\nMenuGroup.displayName = \"DropdownMenuGroup\";\n","import React, { useContext } from \"react\";\n\nimport { composeEventHandlers } from \"@jsondraw/common\";\n\nexport const DropdownMenuContentPropsContext = React.createContext<{\n  onSelect?: (event: Event) => void;\n}>({});\n\nexport const getDropdownMenuItemClassName = (\n  className = \"\",\n  selected = false,\n  hovered = false,\n) => {\n  return `dropdown-menu-item dropdown-menu-item-base ${className} ${\n    selected ? \"dropdown-menu-item--selected\" : \"\"\n  } ${hovered ? \"dropdown-menu-item--hovered\" : \"\"}`.trim();\n};\n\nexport const useHandleDropdownMenuItemSelect = (\n  onSelect: ((event: Event) => void) | undefined,\n) => {\n  const DropdownMenuContentProps = useContext(DropdownMenuContentPropsContext);\n\n  return composeEventHandlers(onSelect, (event) => {\n    DropdownMenuContentProps.onSelect?.(event);\n  });\n};\n","export const Ellipsify = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      {...rest}\n      style={{\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n        ...rest.style,\n      }}\n    >\n      {children}\n    </span>\n  );\n};\n","import type { JSX } from \"react\";\nimport { useEditorInterface } from \"../App\";\nimport { Ellipsify } from \"../ui/Ellipsify\";\n\nconst MenuItemContent = ({\n  textStyle,\n  icon,\n  shortcut,\n  children,\n  badge,\n}: {\n  icon?: JSX.Element;\n  shortcut?: string;\n  textStyle?: React.CSSProperties;\n  children: React.ReactNode;\n  badge?: React.ReactNode;\n}) => {\n  const editorInterface = useEditorInterface();\n  return (\n    <>\n      {icon && <div className=\"dropdown-menu-item__icon\">{icon}</div>}\n      <div style={textStyle} className=\"dropdown-menu-item__text\">\n        <Ellipsify>{children}</Ellipsify>\n      </div>\n      {badge && <div className=\"dropdown-menu-item__badge\">{badge}</div>}\n      {shortcut && editorInterface.formFactor !== \"phone\" && (\n        <div className=\"dropdown-menu-item__shortcut\">{shortcut}</div>\n      )}\n    </>\n  );\n};\nexport default MenuItemContent;\n","import React from \"react\";\n\nimport { THEME } from \"@jsondraw/common\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport type { ValueOf } from \"@jsondraw/common/utility-types\";\n\nimport { useJsonDrawAppState } from \"../App\";\n\nimport {\n  getDropdownMenuItemClassName,\n  useHandleDropdownMenuItemSelect,\n} from \"./common\";\nimport MenuItemContent from \"./DropdownMenuItemContent\";\n\nimport type { JSX } from \"react\";\n\nexport type DropdownMenuItemProps = {\n  icon?: JSX.Element;\n  badge?: React.ReactNode;\n  value?: string | number | undefined;\n  onSelect?: (event: Event) => void;\n  children: React.ReactNode;\n  shortcut?: string;\n  selected?: boolean;\n  className?: string;\n} & Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"onSelect\">;\n\nconst DropdownMenuItem = ({\n  icon,\n  badge,\n  value,\n  children,\n  shortcut,\n  className,\n  selected,\n  onSelect,\n  ...rest\n}: DropdownMenuItemProps) => {\n  const handleSelect = useHandleDropdownMenuItemSelect(onSelect);\n\n  return (\n    <DropdownMenuPrimitive.Item\n      className=\"radix-menu-item\"\n      onSelect={handleSelect}\n      asChild\n    >\n      <button\n        {...rest}\n        value={value}\n        className={getDropdownMenuItemClassName(className, selected)}\n        title={rest.title ?? rest[\"aria-label\"]}\n      >\n        <MenuItemContent icon={icon} shortcut={shortcut} badge={badge}>\n          {children}\n        </MenuItemContent>\n      </button>\n    </DropdownMenuPrimitive.Item>\n  );\n};\nDropdownMenuItem.displayName = \"DropdownMenuItem\";\n\nexport const DropDownMenuItemBadgeType = {\n  GREEN: \"green\",\n  RED: \"red\",\n  BLUE: \"blue\",\n} as const;\n\nexport const DropDownMenuItemBadge = ({\n  type = DropDownMenuItemBadgeType.BLUE,\n  children,\n}: {\n  type?: ValueOf<typeof DropDownMenuItemBadgeType>;\n  children: React.ReactNode;\n}) => {\n  const { theme } = useJsonDrawAppState();\n  const style = {\n    display: \"inline-flex\",\n    marginLeft: \"auto\",\n    padding: \"2px 4px\",\n    borderRadius: 6,\n    fontSize: 9,\n    fontFamily: \"Cascadia, monospace\",\n    border: theme === THEME.LIGHT ? \"1.5px solid white\" : \"none\",\n  };\n\n  switch (type) {\n    case DropDownMenuItemBadgeType.GREEN:\n      Object.assign(style, {\n        backgroundColor: \"var(--background-color-badge)\",\n        color: \"var(--color-badge)\",\n      });\n      break;\n    case DropDownMenuItemBadgeType.RED:\n      Object.assign(style, {\n        backgroundColor: \"pink\",\n        color: \"darkred\",\n      });\n      break;\n    case DropDownMenuItemBadgeType.BLUE:\n    default:\n      Object.assign(style, {\n        background: \"var(--color-promo)\",\n        color: \"var(--color-surface-lowest)\",\n      });\n  }\n\n  return (\n    <div className=\"DropDownMenuItemBadge\" style={style}>\n      {children}\n    </div>\n  );\n};\nDropDownMenuItemBadge.displayName = \"DropdownMenuItemBadge\";\n\nDropdownMenuItem.Badge = DropDownMenuItemBadge;\n\nexport default DropdownMenuItem;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./QuickSearch.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./QuickSearch.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport clsx from \"clsx\";\nimport { searchIcon } from \"../icons\";\nimport \"./QuickSearch.scss\";\n\ninterface QuickSearchProps {\n  className?: string;\n  placeholder: string;\n  onChange: (term: string) => void;\n}\n\nexport const QuickSearch = React.forwardRef<HTMLInputElement, QuickSearchProps>(\n  ({ className, placeholder, onChange }, ref) => {\n    return (\n      <div className={clsx(\"QuickSearch__wrapper\", className)}>\n        {searchIcon}\n        <input\n          ref={ref}\n          className=\"QuickSearch__input\"\n          type=\"text\"\n          placeholder={placeholder}\n          onChange={e => onChange(e.target.value.trim().toLowerCase())}\n        />\n      </div>\n    );\n  }\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ScrollableList.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ScrollableList.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Children } from \"react\";\nimport clsx from \"clsx\";\nimport \"./ScrollableList.scss\";\n\ninterface ScrollableListProps {\n  className?: string;\n  placeholder: string;\n  children: React.ReactNode;\n}\n\nexport const ScrollableList = ({ className, placeholder, children }: ScrollableListProps) => {\n  const isEmpty = !Children.count(children);\n\n  return (\n    <div className={clsx(\"ScrollableList__wrapper\", className)} role=\"menu\">\n      {isEmpty ? <div className=\"empty\">{placeholder}</div> : children}\n    </div>\n  );\n};\n","import { KEYS } from \"@jsondraw/common\";\n\nimport type { Node } from \"@jsondraw/common\";\n\nimport { type FontDescriptor } from \"./FontPickerList\";\n\ninterface FontPickerKeyNavHandlerProps {\n  event: React.KeyboardEvent<HTMLDivElement>;\n  inputRef: React.RefObject<HTMLInputElement | null>;\n  hoveredFont: Node<FontDescriptor> | undefined;\n  filteredFonts: Node<FontDescriptor>[];\n  onClose: () => void;\n  onSelect: (value: number) => void;\n  onHover: (value: number) => void;\n}\n\nexport const fontPickerKeyHandler = ({\n  event,\n  inputRef,\n  hoveredFont,\n  filteredFonts,\n  onClose,\n  onSelect,\n  onHover,\n}: FontPickerKeyNavHandlerProps) => {\n  if (\n    !event[KEYS.CTRL_OR_CMD] &&\n    event.shiftKey &&\n    event.key.toLowerCase() === KEYS.F\n  ) {\n    // refocus input on the popup trigger shortcut\n    inputRef.current?.focus();\n    return true;\n  }\n\n  if (event.key === KEYS.ESCAPE) {\n    onClose();\n    return true;\n  }\n\n  if (event.key === KEYS.ENTER) {\n    if (hoveredFont?.value) {\n      onSelect(hoveredFont.value);\n    }\n\n    return true;\n  }\n\n  if (event.key === KEYS.ARROW_DOWN) {\n    if (hoveredFont?.next) {\n      onHover(hoveredFont.next.value);\n    } else if (filteredFonts[0]?.value) {\n      onHover(filteredFonts[0].value);\n    }\n\n    return true;\n  }\n\n  if (event.key === KEYS.ARROW_UP) {\n    if (hoveredFont?.prev) {\n      onHover(hoveredFont.prev.value);\n    } else if (filteredFonts[filteredFonts.length - 1]?.value) {\n      onHover(filteredFonts[filteredFonts.length - 1].value);\n    }\n\n    return true;\n  }\n};\n","import React, {\n  useMemo,\n  useState,\n  useRef,\n  useEffect,\n  useCallback,\n  type KeyboardEventHandler,\n} from \"react\";\nimport type { JSX } from \"react\";\nimport { arrayToList, debounce, FONT_FAMILY, getFontFamilyString } from \"@jsondraw/common\";\nimport type { ValueOf } from \"@jsondraw/common/utility-types\";\nimport { type FontFamilyValues } from \"@jsondraw/element/types\";\nimport { Fonts } from \"../../fonts\";\nimport { t } from \"../../i18n\";\nimport { useApp, useAppProps, useJsonDrawContainer, useStylesPanelMode } from \"../App\";\nimport DropdownMenuGroup from \"../dropdownMenu/DropdownMenuGroup\";\nimport { DropDownMenuItemBadgeType, DropDownMenuItemBadge } from \"../dropdownMenu/DropdownMenuItem\";\nimport MenuItemContent from \"../dropdownMenu/DropdownMenuItemContent\";\nimport { getDropdownMenuItemClassName } from \"../dropdownMenu/common\";\nimport {\n  FontFamilyCodeIcon,\n  FontFamilyHeadingIcon,\n  FontFamilyNormalIcon,\n  FreedrawIcon,\n} from \"../icons\";\nimport { QuickSearch } from \"../search/QuickSearch\";\nimport { PropertiesPopover } from \"../ui/PropertiesPopover\";\nimport { ScrollableList } from \"../ui/ScrollableList\";\nimport { fontPickerKeyHandler } from \"./keyboardNavHandlers\";\n\nexport interface FontDescriptor {\n  value: number;\n  icon: JSX.Element;\n  text: string;\n  deprecated?: true;\n  badge?: {\n    type: ValueOf<typeof DropDownMenuItemBadgeType>;\n    placeholder: string;\n  };\n}\n\ninterface FontPickerListProps {\n  selectedFontFamily: FontFamilyValues | null;\n  hoveredFontFamily: FontFamilyValues | null;\n  onSelect: (value: number) => void;\n  onHover: (value: number) => void;\n  onLeave: () => void;\n  onOpen: () => void;\n  onClose: () => void;\n}\n\nconst getFontFamilyIcon = (fontFamily: FontFamilyValues): JSX.Element => {\n  switch (fontFamily) {\n    case FONT_FAMILY.Excalifont:\n    case FONT_FAMILY.Virgil:\n      return FreedrawIcon;\n    case FONT_FAMILY.Nunito:\n    case FONT_FAMILY.Helvetica:\n      return FontFamilyNormalIcon;\n    case FONT_FAMILY[\"Lilita One\"]:\n      return FontFamilyHeadingIcon;\n    case FONT_FAMILY[\"Comic Shanns\"]:\n    case FONT_FAMILY.Cascadia:\n      return FontFamilyCodeIcon;\n    default:\n      return FontFamilyNormalIcon;\n  }\n};\n\nexport const FontPickerList = React.memo(\n  ({\n    selectedFontFamily,\n    hoveredFontFamily,\n    onSelect,\n    onHover,\n    onLeave,\n    onOpen,\n    onClose,\n  }: FontPickerListProps) => {\n    const { container } = useJsonDrawContainer();\n    const app = useApp();\n    const { fonts } = app;\n    const { showDeprecatedFonts } = useAppProps();\n    const stylesPanelMode = useStylesPanelMode();\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const inputRef = useRef<HTMLInputElement>(null);\n    const allFonts = useMemo(\n      () =>\n        Array.from(Fonts.registered.entries())\n          .filter(([_, { metadata }]) => !metadata.private && !metadata.fallback)\n          .map(([familyId, { metadata, fontFaces }]) => {\n            const fontDescriptor = {\n              value: familyId,\n              icon: getFontFamilyIcon(familyId),\n              text: fontFaces[0]?.fontFace?.family ?? \"Unknown\",\n            };\n\n            if (metadata.deprecated) {\n              Object.assign(fontDescriptor, {\n                deprecated: metadata.deprecated,\n                badge: {\n                  type: DropDownMenuItemBadgeType.RED,\n                  placeholder: t(\"fontList.badge.old\"),\n                },\n              });\n            }\n\n            return fontDescriptor as FontDescriptor;\n          })\n          .sort((a, b) => (a.text.toLowerCase() > b.text.toLowerCase() ? 1 : -1)),\n      []\n    );\n\n    const sceneFamilies = useMemo(\n      () => new Set(fonts.getSceneFamilies()),\n      // cache per selected font family, so hover re-render won't mess it up\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [selectedFontFamily]\n    );\n\n    const sceneFonts = useMemo(\n      () => allFonts.filter(font => sceneFamilies.has(font.value)), // always show all the fonts in the scene, even those that were deprecated\n      [allFonts, sceneFamilies]\n    );\n\n    const availableFonts = useMemo(\n      () =>\n        allFonts.filter(\n          font => !sceneFamilies.has(font.value) && (showDeprecatedFonts || !font.deprecated) // skip deprecated fonts\n        ),\n      [allFonts, sceneFamilies, showDeprecatedFonts]\n    );\n\n    const filteredFonts = useMemo(\n      () =>\n        arrayToList(\n          [...sceneFonts, ...availableFonts].filter(font =>\n            font.text?.toLowerCase().includes(searchTerm)\n          )\n        ),\n      [sceneFonts, availableFonts, searchTerm]\n    );\n\n    const hoveredFont = useMemo(() => {\n      let font;\n\n      if (hoveredFontFamily) {\n        font = filteredFonts.find(font => font.value === hoveredFontFamily);\n      } else if (selectedFontFamily) {\n        font = filteredFonts.find(font => font.value === selectedFontFamily);\n      }\n\n      if (!font && searchTerm) {\n        if (filteredFonts[0]?.value) {\n          // hover first element on search\n          onHover(filteredFonts[0].value);\n        } else {\n          // re-render cache on no results\n          onLeave();\n        }\n      }\n\n      return font;\n    }, [hoveredFontFamily, selectedFontFamily, searchTerm, filteredFonts, onHover, onLeave]);\n\n    // Create a wrapped onSelect function that preserves caret position\n    const wrappedOnSelect = useCallback(\n      (fontFamily: FontFamilyValues) => {\n        // Save caret position before font selection if editing text\n        let savedSelection: { start: number; end: number } | null = null;\n        if (app.state.editingTextElement) {\n          const textEditor = document.querySelector(\".jsondraw-wysiwyg\") as HTMLTextAreaElement;\n          if (textEditor) {\n            savedSelection = {\n              start: textEditor.selectionStart,\n              end: textEditor.selectionEnd,\n            };\n          }\n        }\n\n        onSelect(fontFamily);\n\n        // Restore caret position after font selection if editing text\n        if (app.state.editingTextElement && savedSelection) {\n          setTimeout(() => {\n            const textEditor = document.querySelector(\".jsondraw-wysiwyg\") as HTMLTextAreaElement;\n            if (textEditor && savedSelection) {\n              textEditor.focus();\n              textEditor.selectionStart = savedSelection.start;\n              textEditor.selectionEnd = savedSelection.end;\n            }\n          }, 0);\n        }\n      },\n      [onSelect, app.state.editingTextElement]\n    );\n\n    const onKeyDown = useCallback<KeyboardEventHandler<HTMLDivElement>>(\n      event => {\n        const handled = fontPickerKeyHandler({\n          event,\n          inputRef,\n          hoveredFont,\n          filteredFonts,\n          onSelect: wrappedOnSelect,\n          onHover,\n          onClose,\n        });\n\n        if (handled) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      },\n      [hoveredFont, filteredFonts, wrappedOnSelect, onHover, onClose]\n    );\n\n    useEffect(() => {\n      onOpen();\n\n      return () => {\n        onClose();\n      };\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const sceneFilteredFonts = useMemo(\n      () => filteredFonts.filter(font => sceneFamilies.has(font.value)),\n      [filteredFonts, sceneFamilies]\n    );\n\n    const availableFilteredFonts = useMemo(\n      () => filteredFonts.filter(font => !sceneFamilies.has(font.value)),\n      [filteredFonts, sceneFamilies]\n    );\n\n    const FontPickerListItem = ({ font, order }: { font: FontDescriptor; order: number }) => {\n      const ref = useRef<HTMLButtonElement>(null);\n      const isHovered = font.value === hoveredFont?.value;\n      const isSelected = font.value === selectedFontFamily;\n\n      useEffect(() => {\n        if (!isHovered) {\n          return;\n        }\n        if (order === 0) {\n          // scroll into the first item differently, so it's visible what is above (i.e. group title)\n          ref.current?.scrollIntoView?.({ block: \"end\" });\n        } else {\n          ref.current?.scrollIntoView?.({ block: \"nearest\" });\n        }\n      }, [isHovered, order]);\n\n      return (\n        <button\n          ref={ref}\n          type=\"button\"\n          value={font.value}\n          className={getDropdownMenuItemClassName(\"\", isSelected, isHovered)}\n          title={font.text}\n          // allow to tab between search and selected font\n          tabIndex={isSelected ? 0 : -1}\n          onClick={e => {\n            wrappedOnSelect(Number(e.currentTarget.value));\n          }}\n          onMouseMove={() => {\n            if (hoveredFont?.value !== font.value) {\n              onHover(font.value);\n            }\n          }}\n        >\n          <MenuItemContent\n            icon={font.icon}\n            badge={\n              font.badge && (\n                <DropDownMenuItemBadge type={font.badge.type}>\n                  {font.badge.placeholder}\n                </DropDownMenuItemBadge>\n              )\n            }\n            textStyle={{\n              fontFamily: getFontFamilyString({ fontFamily: font.value }),\n            }}\n          >\n            {font.text}\n          </MenuItemContent>\n        </button>\n      );\n    };\n\n    const groups = [];\n\n    if (sceneFilteredFonts.length) {\n      groups.push(\n        <DropdownMenuGroup title={t(\"fontList.sceneFonts\")} key=\"group_1\">\n          {sceneFilteredFonts.map((font, index) => (\n            <FontPickerListItem key={font.value} font={font} order={index} />\n          ))}\n        </DropdownMenuGroup>\n      );\n    }\n\n    if (availableFilteredFonts.length) {\n      groups.push(\n        <DropdownMenuGroup title={t(\"fontList.availableFonts\")} key=\"group_2\">\n          {availableFilteredFonts.map((font, index) => (\n            <FontPickerListItem\n              key={font.value}\n              font={font}\n              order={index + sceneFilteredFonts.length}\n            />\n          ))}\n        </DropdownMenuGroup>\n      );\n    }\n\n    return (\n      <PropertiesPopover\n        className=\"properties-content\"\n        container={container}\n        style={{ width: \"15rem\" }}\n        onClose={() => {\n          onClose();\n\n          // Refocus text editor when font picker closes if we were editing text\n          if (app.state.editingTextElement) {\n            setTimeout(() => {\n              const textEditor = document.querySelector(\".jsondraw-wysiwyg\") as HTMLTextAreaElement;\n              if (textEditor) {\n                textEditor.focus();\n              }\n            }, 0);\n          }\n        }}\n        onPointerLeave={onLeave}\n        onKeyDown={onKeyDown}\n        preventAutoFocusOnTouch={!!app.state.editingTextElement}\n      >\n        {stylesPanelMode === \"full\" && (\n          <QuickSearch\n            ref={inputRef}\n            placeholder={t(\"quickSearch.placeholder\")}\n            onChange={debounce(setSearchTerm, 20)}\n          />\n        )}\n        <ScrollableList\n          className=\"dropdown-menu fonts manual-hover\"\n          placeholder={t(\"fontList.empty\")}\n        >\n          {groups.length ? groups : null}\n        </ScrollableList>\n      </PropertiesPopover>\n    );\n  },\n  (prev, next) =>\n    prev.selectedFontFamily === next.selectedFontFamily &&\n    prev.hoveredFontFamily === next.hoveredFontFamily\n);\n","import { MOBILE_ACTION_BUTTON_BG } from \"@jsondraw/common\";\nimport type { FontFamilyValues } from \"@jsondraw/element/types\";\nimport { Popover } from \"radix-ui\";\nimport { t } from \"../../i18n\";\nimport { useJsonDrawSetAppState } from \"../App\";\nimport { TextIcon } from \"../icons\";\nimport { ButtonIcon } from \"../ui/ButtonIcon\";\n\ninterface FontPickerTriggerProps {\n  selectedFontFamily: FontFamilyValues | null;\n  isOpened?: boolean;\n  compactMode?: boolean;\n}\n\nexport const FontPickerTrigger = ({\n  selectedFontFamily,\n  isOpened = false,\n  compactMode = false,\n}: FontPickerTriggerProps) => {\n  const setAppState = useJsonDrawSetAppState();\n\n  const compactStyle = compactMode\n    ? {\n        ...MOBILE_ACTION_BUTTON_BG,\n        width: \"2rem\",\n        height: \"2rem\",\n      }\n    : {};\n\n  return (\n    <Popover.Trigger asChild>\n      <div data-openpopup=\"fontFamily\" className=\"properties-trigger\">\n        <ButtonIcon\n          standalone\n          icon={TextIcon}\n          title={t(\"labels.showFonts\")}\n          className=\"properties-trigger\"\n          testId={\"font-family-show-fonts\"}\n          active={isOpened}\n          onClick={() => {\n            setAppState(appState => ({\n              openPopup: appState.openPopup === \"fontFamily\" ? null : appState.openPopup,\n            }));\n          }}\n          style={{\n            border: \"none\",\n            ...compactStyle,\n          }}\n        />\n      </div>\n    </Popover.Trigger>\n  );\n};\n","import React, { useCallback, useMemo } from \"react\";\nimport { FONT_FAMILY } from \"@jsondraw/common\";\nimport type { FontFamilyValues } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport { Popover } from \"radix-ui\";\nimport { t } from \"../../i18n\";\nimport { FontFamilyCodeIcon, FontFamilyNormalIcon, FreedrawIcon } from \"../icons\";\nimport { ButtonSeparator } from \"../ui/ButtonSeparator\";\nimport { RadioSelection } from \"../ui/RadioSelection\";\nimport \"./FontPicker.scss\";\nimport { FontPickerList } from \"./FontPickerList\";\nimport { FontPickerTrigger } from \"./FontPickerTrigger\";\n\nexport const DEFAULT_FONTS = [\n  {\n    value: FONT_FAMILY.Excalifont,\n    icon: FreedrawIcon,\n    text: t(\"labels.handDrawn\"),\n    testId: \"font-family-hand-drawn\",\n  },\n  {\n    value: FONT_FAMILY.Nunito,\n    icon: FontFamilyNormalIcon,\n    text: t(\"labels.normal\"),\n    testId: \"font-family-normal\",\n  },\n  {\n    value: FONT_FAMILY[\"Comic Shanns\"],\n    icon: FontFamilyCodeIcon,\n    text: t(\"labels.code\"),\n    testId: \"font-family-code\",\n  },\n];\n\nconst defaultFontFamilies = new Set(DEFAULT_FONTS.map(x => x.value));\n\nexport const isDefaultFont = (fontFamily: number | null) => {\n  if (!fontFamily) {\n    return false;\n  }\n\n  return defaultFontFamilies.has(fontFamily);\n};\n\ninterface FontPickerProps {\n  isOpened: boolean;\n  selectedFontFamily: FontFamilyValues | null;\n  hoveredFontFamily: FontFamilyValues | null;\n  onSelect: (fontFamily: FontFamilyValues) => void;\n  onHover: (fontFamily: FontFamilyValues) => void;\n  onLeave: () => void;\n  onPopupChange: (open: boolean) => void;\n  compactMode?: boolean;\n}\n\nexport const FontPicker = React.memo(\n  ({\n    isOpened,\n    selectedFontFamily,\n    hoveredFontFamily,\n    onSelect,\n    onHover,\n    onLeave,\n    onPopupChange,\n    compactMode = false,\n  }: FontPickerProps) => {\n    const defaultFonts = useMemo(() => DEFAULT_FONTS, []);\n    const onSelectCallback = useCallback(\n      (value: number | false) => {\n        if (value) {\n          onSelect(value);\n        }\n      },\n      [onSelect]\n    );\n\n    return (\n      <div\n        role=\"dialog\"\n        aria-modal=\"true\"\n        className={clsx(\"FontPicker__container\", {\n          \"FontPicker__container--compact\": compactMode,\n        })}\n      >\n        {!compactMode && (\n          <div className=\"buttonList\">\n            <RadioSelection<FontFamilyValues | false>\n              type=\"button\"\n              options={defaultFonts}\n              value={selectedFontFamily}\n              onClick={onSelectCallback}\n            />\n          </div>\n        )}\n        {!compactMode && <ButtonSeparator />}\n        <Popover.Root open={isOpened} onOpenChange={onPopupChange}>\n          <FontPickerTrigger\n            selectedFontFamily={selectedFontFamily}\n            isOpened={isOpened}\n            compactMode={compactMode}\n          />\n          {isOpened && (\n            <FontPickerList\n              selectedFontFamily={selectedFontFamily}\n              hoveredFontFamily={hoveredFontFamily}\n              onSelect={onSelectCallback}\n              onHover={onHover}\n              onLeave={onLeave}\n              onOpen={() => onPopupChange(true)}\n              onClose={() => onPopupChange(false)}\n            />\n          )}\n        </Popover.Root>\n      </div>\n    );\n  },\n  (prev, next) =>\n    prev.isOpened === next.isOpened &&\n    prev.selectedFontFamily === next.selectedFontFamily &&\n    prev.hoveredFontFamily === next.hoveredFontFamily\n);\n","export const InlineIcon = ({\n  className,\n  icon,\n  size = \"1em\",\n}: {\n  className?: string;\n  icon: React.ReactNode;\n  size?: string;\n}) => {\n  return (\n    <span\n      className={className}\n      style={{\n        width: size,\n        height: \"100%\",\n        margin: \"0 0.5ex 0 0.5ex\",\n        display: \"inline-flex\",\n        lineHeight: 0,\n        verticalAlign: \"middle\",\n        flex: \"0 0 auto\",\n      }}\n    >\n      {icon}\n    </span>\n  );\n};\n","import { collapseDownIcon, collapseUpIcon } from \"../icons\";\nimport { InlineIcon } from \"../ui/InlineIcon\";\n\ninterface CollapsibleProps {\n  label: React.ReactNode;\n  // having it controlled so that the state is managed outside\n  // this is to keep the user's previous choice even when the\n  // Collapsible is unmounted\n  open: boolean;\n  openTrigger: () => void;\n  children: React.ReactNode;\n  className?: string;\n  showCollapsedIcon?: boolean;\n}\n\nconst Collapsible = ({\n  label,\n  open,\n  openTrigger,\n  children,\n  className,\n  showCollapsedIcon = true,\n}: CollapsibleProps) => {\n  return (\n    <>\n      <div\n        style={{\n          cursor: \"pointer\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n        }}\n        className={className}\n        onClick={openTrigger}\n      >\n        {label}\n        {showCollapsedIcon && <InlineIcon icon={open ? collapseUpIcon : collapseDownIcon} />}\n      </div>\n      {open && <div style={{ display: \"flex\", flexDirection: \"column\" }}>{children}</div>}\n    </>\n  );\n};\n\nexport default Collapsible;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./IconPicker.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./IconPicker.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect } from \"react\";\nimport type { JSX } from \"react\";\nimport { isArrowKey, KEYS } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { Popover } from \"radix-ui\";\nimport { atom, useAtom } from \"../../editor-jotai\";\nimport { getLanguage, t } from \"../../i18n\";\nimport { useEditorInterface, useJsonDrawContainer } from \"../App\";\nimport Collapsible from \"../Stats/Collapsible\";\nimport \"./IconPicker.scss\";\n\nconst moreOptionsAtom = atom(false);\n\ntype Option<T> = {\n  value: T;\n  text: string;\n  icon: JSX.Element;\n  keyBinding: string | null;\n};\n\nfunction Picker<T>({\n  options,\n  value,\n  label,\n  onChange,\n  onClose,\n  numberOfOptionsToAlwaysShow = options.length,\n}: {\n  label: string;\n  value: T;\n  options: readonly Option<T>[];\n  onChange: (value: T) => void;\n  onClose: () => void;\n  numberOfOptionsToAlwaysShow?: number;\n}) {\n  const editorInterface = useEditorInterface();\n  const { container } = useJsonDrawContainer();\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    const pressedOption = options.find(option => option.keyBinding === event.key.toLowerCase())!;\n\n    if (!(event.metaKey || event.altKey || event.ctrlKey) && pressedOption) {\n      // Keybinding navigation\n      onChange(pressedOption.value);\n\n      event.preventDefault();\n    } else if (event.key === KEYS.TAB) {\n      const index = options.findIndex(option => option.value === value);\n      const nextIndex = event.shiftKey\n        ? (options.length + index - 1) % options.length\n        : (index + 1) % options.length;\n      onChange(options[nextIndex].value);\n    } else if (isArrowKey(event.key)) {\n      // Arrow navigation\n      const isRTL = getLanguage().rtl;\n      const index = options.findIndex(option => option.value === value);\n      if (index !== -1) {\n        const length = options.length;\n        let nextIndex = index;\n\n        switch (event.key) {\n          // Select the next option\n          case isRTL ? KEYS.ARROW_LEFT : KEYS.ARROW_RIGHT:\n            nextIndex = (index + 1) % length;\n            break;\n          // Select the previous option\n          case isRTL ? KEYS.ARROW_RIGHT : KEYS.ARROW_LEFT:\n            nextIndex = (length + index - 1) % length;\n            break;\n          // Go the next row\n          case KEYS.ARROW_DOWN: {\n            nextIndex = (index + (numberOfOptionsToAlwaysShow ?? 1)) % length;\n            break;\n          }\n          // Go the previous row\n          case KEYS.ARROW_UP: {\n            nextIndex = (length + index - (numberOfOptionsToAlwaysShow ?? 1)) % length;\n            break;\n          }\n        }\n\n        onChange(options[nextIndex].value);\n      }\n      event.preventDefault();\n    } else if (event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) {\n      // Close on escape or enter\n      event.preventDefault();\n      onClose();\n    }\n    event.nativeEvent.stopImmediatePropagation();\n    event.stopPropagation();\n  };\n\n  const [showMoreOptions, setShowMoreOptions] = useAtom(moreOptionsAtom);\n\n  const alwaysVisibleOptions = React.useMemo(\n    () => options.slice(0, numberOfOptionsToAlwaysShow),\n    [options, numberOfOptionsToAlwaysShow]\n  );\n  const moreOptions = React.useMemo(\n    () => options.slice(numberOfOptionsToAlwaysShow),\n    [options, numberOfOptionsToAlwaysShow]\n  );\n\n  useEffect(() => {\n    if (!alwaysVisibleOptions.some(option => option.value === value)) {\n      setShowMoreOptions(true);\n    }\n  }, [value, alwaysVisibleOptions, setShowMoreOptions]);\n\n  const renderOptions = (options: Option<T>[]) => {\n    return (\n      <div className=\"picker-content\">\n        {options.map((option, i) => (\n          <button\n            type=\"button\"\n            className={clsx(\"picker-option\", {\n              active: value === option.value,\n            })}\n            onClick={event => {\n              onChange(option.value);\n            }}\n            title={`${option.text} ${option.keyBinding && ` ${option.keyBinding.toUpperCase()}`}`}\n            aria-label={option.text || \"none\"}\n            aria-keyshortcuts={option.keyBinding || undefined}\n            key={option.text}\n            ref={ref => {\n              if (value === option.value) {\n                // Use a timeout here to render focus properly\n                setTimeout(() => {\n                  ref?.focus();\n                }, 0);\n              }\n            }}\n          >\n            {option.icon}\n            {option.keyBinding && <span className=\"picker-keybinding\">{option.keyBinding}</span>}\n          </button>\n        ))}\n      </div>\n    );\n  };\n\n  const isMobile = editorInterface.formFactor === \"phone\";\n\n  return (\n    <Popover.Content\n      side={isMobile ? \"right\" : \"bottom\"}\n      align=\"start\"\n      sideOffset={isMobile ? 8 : 12}\n      style={{ zIndex: \"var(--zIndex-ui-styles-popup)\" }}\n      onKeyDown={handleKeyDown}\n      collisionBoundary={container ?? undefined}\n    >\n      <div className={`picker`} role=\"dialog\" aria-modal=\"true\" aria-label={label}>\n        {renderOptions(alwaysVisibleOptions)}\n\n        {moreOptions.length > 0 && (\n          <Collapsible\n            label={t(\"labels.more_options\")}\n            open={showMoreOptions}\n            openTrigger={() => {\n              setShowMoreOptions(value => !value);\n            }}\n            className=\"picker-collapsible\"\n          >\n            {renderOptions(moreOptions)}\n          </Collapsible>\n        )}\n      </div>\n    </Popover.Content>\n  );\n}\n\nexport function IconPicker<T>({\n  value,\n  label,\n  options,\n  onChange,\n  group = \"\",\n  numberOfOptionsToAlwaysShow,\n}: {\n  label: string;\n  value: T;\n  options: readonly {\n    value: T;\n    text: string;\n    icon: JSX.Element;\n    keyBinding: string | null;\n  }[];\n  onChange: (value: T) => void;\n  numberOfOptionsToAlwaysShow?: number;\n  group?: string;\n}) {\n  const [isActive, setActive] = React.useState(false);\n  const rPickerButton = React.useRef<any>(null);\n\n  return (\n    <div>\n      <Popover.Root open={isActive} onOpenChange={open => setActive(open)}>\n        <Popover.Trigger\n          name={group}\n          type=\"button\"\n          aria-label={label}\n          onClick={() => setActive(!isActive)}\n          ref={rPickerButton}\n          className={isActive ? \"active\" : \"\"}\n        >\n          {options.find(option => option.value === value)?.icon}\n        </Popover.Trigger>\n        {isActive && (\n          <Picker\n            options={options}\n            value={value}\n            label={label}\n            onChange={onChange}\n            onClose={() => {\n              setActive(false);\n            }}\n            numberOfOptionsToAlwaysShow={numberOfOptionsToAlwaysShow}\n          />\n        )}\n      </Popover.Root>\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Range.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Range.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect } from \"react\";\nimport { t } from \"../../i18n\";\nimport type { AppClassProperties } from \"../../types\";\nimport \"./Range.scss\";\n\nexport type RangeProps = {\n  updateData: (value: number) => void;\n  app: AppClassProperties;\n  testId?: string;\n};\n\nexport const Range = ({ updateData, app, testId }: RangeProps) => {\n  const rangeRef = React.useRef<HTMLInputElement>(null);\n  const valueRef = React.useRef<HTMLDivElement>(null);\n  const selectedElements = app.scene.getSelectedElements(app.state);\n  let hasCommonOpacity = true;\n  const firstElement = selectedElements.at(0);\n  const leastCommonOpacity = selectedElements.reduce((acc, element) => {\n    if (acc != null && acc !== element.opacity) {\n      hasCommonOpacity = false;\n    }\n    if (acc == null || acc > element.opacity) {\n      return element.opacity;\n    }\n    return acc;\n  }, firstElement?.opacity ?? null);\n\n  const value = leastCommonOpacity ?? app.state.currentItemOpacity;\n\n  useEffect(() => {\n    if (rangeRef.current && valueRef.current) {\n      const rangeElement = rangeRef.current;\n      const valueElement = valueRef.current;\n      const inputWidth = rangeElement.offsetWidth;\n      const thumbWidth = 15; // 15 is the width of the thumb\n      const position = (value / 100) * (inputWidth - thumbWidth) + thumbWidth / 2;\n      valueElement.style.left = `${position}px`;\n      rangeElement.style.background = `linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${value}%, var(--button-bg) ${value}%, var(--button-bg) 100%)`;\n    }\n  }, [value]);\n\n  return (\n    <label className=\"control-label\">\n      {t(\"labels.opacity\")}\n      <div className=\"range-wrapper\">\n        <input\n          style={{\n            [\"--color-slider-track\" as string]: hasCommonOpacity ? undefined : \"var(--button-bg)\",\n          }}\n          ref={rangeRef}\n          type=\"range\"\n          min=\"0\"\n          max=\"100\"\n          step=\"10\"\n          onChange={event => {\n            updateData(+event.target.value);\n          }}\n          value={value}\n          className=\"range-input\"\n          data-testid={testId}\n        />\n        <div className=\"value-bubble\" ref={valueRef}>\n          {value !== 0 ? value : null}\n        </div>\n        <div className=\"zero-label\">0</div>\n      </div>\n    </label>\n  );\n};\n","import { useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE,\n  DEFAULT_ELEMENT_BACKGROUND_PICKS,\n  DEFAULT_ELEMENT_STROKE_COLOR_PALETTE,\n  DEFAULT_ELEMENT_STROKE_PICKS,\n  ARROW_TYPE,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  FONT_FAMILY,\n  ROUNDNESS,\n  STROKE_WIDTH,\n  VERTICAL_ALIGN,\n  KEYS,\n  randomInteger,\n  arrayToMap,\n  getFontFamilyString,\n  getLineHeight,\n  isTransparent,\n  reduceToCommonValue,\n  invariant,\n  FONT_SIZES,\n} from \"@jsondraw/common\";\nimport { deriveStylesPanelMode } from \"@jsondraw/common\";\nimport { canBecomePolygon, getNonDeletedElements } from \"@jsondraw/element\";\nimport {\n  bindBindingElement,\n  calculateFixedPointForElbowArrowBinding,\n  updateBoundElements,\n} from \"@jsondraw/element\";\nimport { LinearElementEditor } from \"@jsondraw/element\";\nimport { newElementWith } from \"@jsondraw/element\";\nimport { getBoundTextElement, redrawTextBoundingBox } from \"@jsondraw/element\";\nimport {\n  isArrowElement,\n  isBoundToContainer,\n  isElbowArrow,\n  isLinearElement,\n  isLineElement,\n  isTextElement,\n  isUsingAdaptiveRadius,\n} from \"@jsondraw/element\";\nimport { hasStrokeColor } from \"@jsondraw/element\";\nimport {\n  updateElbowArrowPoints,\n  CaptureUpdateAction,\n  toggleLinePolygonState,\n} from \"@jsondraw/element\";\nimport type { Scene } from \"@jsondraw/element\";\nimport type { CaptureUpdateActionType } from \"@jsondraw/element\";\nimport type {\n  Arrowhead,\n  ElementsMap,\n  JsonDrawBindableElement,\n  JsonDrawElement,\n  JsonDrawLinearElement,\n  JsonDrawTextElement,\n  FontFamilyValues,\n  TextAlign,\n  VerticalAlign,\n} from \"@jsondraw/element/types\";\nimport { pointFrom } from \"@jsondraw/math\";\nimport type { LocalPoint, Radians } from \"@jsondraw/math\";\nimport { trackEvent } from \"../analytics\";\nimport { ColorPicker } from \"../components/ColorPicker/ColorPicker\";\nimport { FontPicker } from \"../components/FontPicker/FontPicker\";\nimport {\n  ArrowheadArrowIcon,\n  ArrowheadBarIcon,\n  ArrowheadCircleIcon,\n  ArrowheadTriangleIcon,\n  ArrowheadNoneIcon,\n  StrokeStyleDashedIcon,\n  StrokeStyleDottedIcon,\n  TextAlignTopIcon,\n  TextAlignBottomIcon,\n  TextAlignMiddleIcon,\n  FillHachureIcon,\n  FillCrossHatchIcon,\n  FillSolidIcon,\n  SloppinessArchitectIcon,\n  SloppinessArtistIcon,\n  SloppinessCartoonistIcon,\n  StrokeWidthBaseIcon,\n  StrokeWidthBoldIcon,\n  StrokeWidthExtraBoldIcon,\n  FontSizeSmallIcon,\n  FontSizeMediumIcon,\n  FontSizeLargeIcon,\n  FontSizeExtraLargeIcon,\n  EdgeSharpIcon,\n  EdgeRoundIcon,\n  TextAlignLeftIcon,\n  TextAlignCenterIcon,\n  TextAlignRightIcon,\n  FillZigZagIcon,\n  ArrowheadTriangleOutlineIcon,\n  ArrowheadCircleOutlineIcon,\n  ArrowheadDiamondIcon,\n  ArrowheadDiamondOutlineIcon,\n  fontSizeIcon,\n  sharpArrowIcon,\n  roundArrowIcon,\n  elbowArrowIcon,\n  ArrowheadCrowfootIcon,\n  ArrowheadCrowfootOneIcon,\n  ArrowheadCrowfootOneOrManyIcon,\n} from \"../components/icons\";\nimport { IconPicker } from \"../components/ui/IconPicker\";\nimport { RadioSelection } from \"../components/ui/RadioSelection\";\nimport { Range } from \"../components/ui/Range\";\nimport { Fonts } from \"../fonts\";\nimport { withCaretPositionPreservation, restoreCaretPosition } from \"../hooks/useTextEditorFocus\";\nimport { getLanguage, t } from \"../i18n\";\nimport {\n  canHaveArrowheads,\n  getSelectedElements,\n  getTargetElements,\n  isSomeElementSelected,\n} from \"../scene\";\nimport { getShortcutKey } from \"../shortcut\";\nimport type { AppClassProperties, AppState, Primitive } from \"../types\";\nimport { register } from \"./register\";\n\nconst FONT_SIZE_RELATIVE_INCREASE_STEP = 0.1;\n\nconst getStylesPanelInfo = (app: AppClassProperties) => {\n  const stylesPanelMode = deriveStylesPanelMode(app.editorInterface);\n  return {\n    stylesPanelMode,\n    isCompact: stylesPanelMode !== \"full\",\n    isMobile: stylesPanelMode === \"mobile\",\n  } as const;\n};\n\nexport const changeProperty = (\n  elements: readonly JsonDrawElement[],\n  appState: AppState,\n  callback: (element: JsonDrawElement) => JsonDrawElement,\n  includeBoundText = false\n) => {\n  const selectedElementIds = arrayToMap(\n    getSelectedElements(elements, appState, {\n      includeBoundTextElement: includeBoundText,\n    })\n  );\n\n  return elements.map(element => {\n    if (selectedElementIds.get(element.id) || element.id === appState.editingTextElement?.id) {\n      return callback(element);\n    }\n    return element;\n  });\n};\n\nexport const getFormValue = function <T extends Primitive>(\n  elements: readonly JsonDrawElement[],\n  app: AppClassProperties,\n  getAttribute: (element: JsonDrawElement) => T,\n  isRelevantElement: true | ((element: JsonDrawElement) => boolean),\n  defaultValue: T | ((isSomeElementSelected: boolean) => T)\n): T {\n  const editingTextElement = app.state.editingTextElement;\n  const nonDeletedElements = getNonDeletedElements(elements);\n\n  let ret: T | null = null;\n\n  if (editingTextElement) {\n    ret = getAttribute(editingTextElement);\n  }\n\n  if (!ret) {\n    const hasSelection = isSomeElementSelected(nonDeletedElements, app.state);\n\n    if (hasSelection) {\n      const selectedElements = app.scene.getSelectedElements(app.state);\n      const targetElements =\n        isRelevantElement === true\n          ? selectedElements\n          : selectedElements.filter(el => isRelevantElement(el));\n\n      ret =\n        reduceToCommonValue(targetElements, getAttribute) ??\n        (typeof defaultValue === \"function\" ? defaultValue(true) : defaultValue);\n    } else {\n      ret = typeof defaultValue === \"function\" ? defaultValue(false) : defaultValue;\n    }\n  }\n\n  return ret;\n};\n\nconst offsetElementAfterFontResize = (\n  prevElement: JsonDrawTextElement,\n  nextElement: JsonDrawTextElement,\n  scene: Scene\n) => {\n  if (isBoundToContainer(nextElement) || !nextElement.autoResize) {\n    return nextElement;\n  }\n  return scene.mutateElement(nextElement, {\n    x:\n      prevElement.textAlign === \"left\"\n        ? prevElement.x\n        : prevElement.x +\n          (prevElement.width - nextElement.width) / (prevElement.textAlign === \"center\" ? 2 : 1),\n    // centering vertically is non-standard, but for JsonDraw I think\n    // it makes sense\n    y: prevElement.y + (prevElement.height - nextElement.height) / 2,\n  });\n};\n\nconst changeFontSize = (\n  elements: readonly JsonDrawElement[],\n  appState: AppState,\n  app: AppClassProperties,\n  getNewFontSize: (element: JsonDrawTextElement) => number,\n  fallbackValue?: JsonDrawTextElement[\"fontSize\"]\n) => {\n  const newFontSizes = new Set<number>();\n\n  const updatedElements = changeProperty(\n    elements,\n    appState,\n    oldElement => {\n      if (isTextElement(oldElement)) {\n        const newFontSize = getNewFontSize(oldElement);\n        newFontSizes.add(newFontSize);\n\n        let newElement: JsonDrawTextElement = newElementWith(oldElement, {\n          fontSize: newFontSize,\n        });\n        redrawTextBoundingBox(newElement, app.scene.getContainerElement(oldElement), app.scene);\n\n        newElement = offsetElementAfterFontResize(oldElement, newElement, app.scene);\n\n        return newElement;\n      }\n      return oldElement;\n    },\n    true\n  );\n\n  // Update arrow elements after text elements have been updated\n  getSelectedElements(elements, appState, {\n    includeBoundTextElement: true,\n  }).forEach(element => {\n    if (isTextElement(element)) {\n      updateBoundElements(element, app.scene);\n    }\n  });\n\n  return {\n    elements: updatedElements,\n    appState: {\n      ...appState,\n      // update state only if we've set all select text elements to\n      // the same font size\n      currentItemFontSize:\n        newFontSizes.size === 1\n          ? [...newFontSizes][0]\n          : (fallbackValue ?? appState.currentItemFontSize),\n    },\n    captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n  };\n};\n\n// -----------------------------------------------------------------------------\n\nexport const actionChangeStrokeColor = register<Pick<AppState, \"currentItemStrokeColor\">>({\n  name: \"changeStrokeColor\",\n  label: \"labels.stroke\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      ...(value?.currentItemStrokeColor && {\n        elements: changeProperty(\n          elements,\n          appState,\n          el => {\n            return hasStrokeColor(el.type)\n              ? newElementWith(el, {\n                  strokeColor: value.currentItemStrokeColor,\n                })\n              : el;\n          },\n          true\n        ),\n      }),\n      appState: {\n        ...appState,\n        ...value,\n      },\n      captureUpdate: !!value?.currentItemStrokeColor\n        ? CaptureUpdateAction.IMMEDIATELY\n        : CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => {\n    const { stylesPanelMode } = getStylesPanelInfo(app);\n\n    return (\n      <>\n        {stylesPanelMode === \"full\" && <h3 aria-hidden=\"true\">{t(\"labels.stroke\")}</h3>}\n        <ColorPicker\n          topPicks={DEFAULT_ELEMENT_STROKE_PICKS}\n          palette={DEFAULT_ELEMENT_STROKE_COLOR_PALETTE}\n          type=\"elementStroke\"\n          label={t(\"labels.stroke\")}\n          color={getFormValue(\n            elements,\n            app,\n            element => element.strokeColor,\n            true,\n            hasSelection => (!hasSelection ? appState.currentItemStrokeColor : null)\n          )}\n          onChange={color => updateData({ currentItemStrokeColor: color })}\n          elements={elements}\n          appState={appState}\n          updateData={updateData}\n        />\n      </>\n    );\n  },\n});\n\nexport const actionChangeBackgroundColor = register<\n  Pick<AppState, \"currentItemBackgroundColor\" | \"viewBackgroundColor\">\n>({\n  name: \"changeBackgroundColor\",\n  label: \"labels.changeBackground\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    if (!value?.currentItemBackgroundColor) {\n      return {\n        appState: {\n          ...appState,\n          ...value,\n        },\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n\n    let nextElements;\n\n    const selectedElements = app.scene.getSelectedElements(appState);\n    const shouldEnablePolygon =\n      !isTransparent(value.currentItemBackgroundColor) &&\n      selectedElements.every(el => isLineElement(el) && canBecomePolygon(el.points));\n\n    if (shouldEnablePolygon) {\n      const selectedElementsMap = arrayToMap(selectedElements);\n      nextElements = elements.map(el => {\n        if (selectedElementsMap.has(el.id) && isLineElement(el)) {\n          return newElementWith(el, {\n            backgroundColor: value.currentItemBackgroundColor,\n            ...toggleLinePolygonState(el, true),\n          });\n        }\n        return el;\n      });\n    } else {\n      nextElements = changeProperty(elements, appState, el =>\n        newElementWith(el, {\n          backgroundColor: value.currentItemBackgroundColor,\n        })\n      );\n    }\n\n    return {\n      elements: nextElements,\n      appState: {\n        ...appState,\n        ...value,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => {\n    const { stylesPanelMode } = getStylesPanelInfo(app);\n\n    return (\n      <>\n        {stylesPanelMode === \"full\" && <h3 aria-hidden=\"true\">{t(\"labels.background\")}</h3>}\n        <ColorPicker\n          topPicks={DEFAULT_ELEMENT_BACKGROUND_PICKS}\n          palette={DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE}\n          type=\"elementBackground\"\n          label={t(\"labels.background\")}\n          color={getFormValue(\n            elements,\n            app,\n            element => element.backgroundColor,\n            true,\n            hasSelection => (!hasSelection ? appState.currentItemBackgroundColor : null)\n          )}\n          onChange={color => updateData({ currentItemBackgroundColor: color })}\n          elements={elements}\n          appState={appState}\n          updateData={updateData}\n        />\n      </>\n    );\n  },\n});\n\nexport const actionChangeFillStyle = register<JsonDrawElement[\"fillStyle\"]>({\n  name: \"changeFillStyle\",\n  label: \"labels.fill\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    trackEvent(\n      \"element\",\n      \"changeFillStyle\",\n      `${value} (${app.editorInterface.formFactor === \"phone\" ? \"mobile\" : \"desktop\"})`\n    );\n    return {\n      elements: changeProperty(elements, appState, el =>\n        newElementWith(el, {\n          fillStyle: value,\n        })\n      ),\n      appState: { ...appState, currentItemFillStyle: value },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    const allElementsZigZag =\n      selectedElements.length > 0 && selectedElements.every(el => el.fillStyle === \"zigzag\");\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.fill\")}</legend>\n        <div className=\"buttonList\">\n          <RadioSelection\n            type=\"button\"\n            options={[\n              {\n                value: \"hachure\",\n                text: `${\n                  allElementsZigZag ? t(\"labels.zigzag\") : t(\"labels.hachure\")\n                } (${getShortcutKey(\"Alt-Click\")})`,\n                icon: allElementsZigZag ? FillZigZagIcon : FillHachureIcon,\n                active: allElementsZigZag ? true : undefined,\n                testId: `fill-hachure`,\n              },\n              {\n                value: \"cross-hatch\",\n                text: t(\"labels.crossHatch\"),\n                icon: FillCrossHatchIcon,\n                testId: `fill-cross-hatch`,\n              },\n              {\n                value: \"solid\",\n                text: t(\"labels.solid\"),\n                icon: FillSolidIcon,\n                testId: `fill-solid`,\n              },\n            ]}\n            value={getFormValue(\n              elements,\n              app,\n              element => element.fillStyle,\n              element => element.hasOwnProperty(\"fillStyle\"),\n              hasSelection => (hasSelection ? null : appState.currentItemFillStyle)\n            )}\n            onClick={(value, event) => {\n              const nextValue =\n                event.altKey &&\n                value === \"hachure\" &&\n                selectedElements.every(el => el.fillStyle === \"hachure\")\n                  ? \"zigzag\"\n                  : value;\n\n              updateData(nextValue);\n            }}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeStrokeWidth = register<JsonDrawElement[\"strokeWidth\"]>({\n  name: \"changeStrokeWidth\",\n  label: \"labels.strokeWidth\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, el =>\n        newElementWith(el, {\n          strokeWidth: value,\n        })\n      ),\n      appState: { ...appState, currentItemStrokeWidth: value },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => (\n    <fieldset>\n      <legend>{t(\"labels.strokeWidth\")}</legend>\n      <div className=\"buttonList\">\n        <RadioSelection\n          group=\"stroke-width\"\n          options={[\n            {\n              value: STROKE_WIDTH.thin,\n              text: t(\"labels.thin\"),\n              icon: StrokeWidthBaseIcon,\n              testId: \"strokeWidth-thin\",\n            },\n            {\n              value: STROKE_WIDTH.bold,\n              text: t(\"labels.bold\"),\n              icon: StrokeWidthBoldIcon,\n              testId: \"strokeWidth-bold\",\n            },\n            {\n              value: STROKE_WIDTH.extraBold,\n              text: t(\"labels.extraBold\"),\n              icon: StrokeWidthExtraBoldIcon,\n              testId: \"strokeWidth-extraBold\",\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            app,\n            element => element.strokeWidth,\n            element => element.hasOwnProperty(\"strokeWidth\"),\n            hasSelection => (hasSelection ? null : appState.currentItemStrokeWidth)\n          )}\n          onChange={value => updateData(value)}\n        />\n      </div>\n    </fieldset>\n  ),\n});\n\nexport const actionChangeSloppiness = register<JsonDrawElement[\"roughness\"]>({\n  name: \"changeSloppiness\",\n  label: \"labels.sloppiness\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, el =>\n        newElementWith(el, {\n          seed: randomInteger(),\n          roughness: value,\n        })\n      ),\n      appState: { ...appState, currentItemRoughness: value },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => (\n    <fieldset>\n      <legend>{t(\"labels.sloppiness\")}</legend>\n      <div className=\"buttonList\">\n        <RadioSelection\n          group=\"sloppiness\"\n          options={[\n            {\n              value: 0,\n              text: t(\"labels.architect\"),\n              icon: SloppinessArchitectIcon,\n            },\n            {\n              value: 1,\n              text: t(\"labels.artist\"),\n              icon: SloppinessArtistIcon,\n            },\n            {\n              value: 2,\n              text: t(\"labels.cartoonist\"),\n              icon: SloppinessCartoonistIcon,\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            app,\n            element => element.roughness,\n            element => element.hasOwnProperty(\"roughness\"),\n            hasSelection => (hasSelection ? null : appState.currentItemRoughness)\n          )}\n          onChange={value => updateData(value)}\n        />\n      </div>\n    </fieldset>\n  ),\n});\n\nexport const actionChangeStrokeStyle = register<JsonDrawElement[\"strokeStyle\"]>({\n  name: \"changeStrokeStyle\",\n  label: \"labels.strokeStyle\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, el =>\n        newElementWith(el, {\n          strokeStyle: value,\n        })\n      ),\n      appState: { ...appState, currentItemStrokeStyle: value },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => (\n    <fieldset>\n      <legend>{t(\"labels.strokeStyle\")}</legend>\n      <div className=\"buttonList\">\n        <RadioSelection\n          group=\"strokeStyle\"\n          options={[\n            {\n              value: \"solid\",\n              text: t(\"labels.strokeStyle_solid\"),\n              icon: StrokeWidthBaseIcon,\n            },\n            {\n              value: \"dashed\",\n              text: t(\"labels.strokeStyle_dashed\"),\n              icon: StrokeStyleDashedIcon,\n            },\n            {\n              value: \"dotted\",\n              text: t(\"labels.strokeStyle_dotted\"),\n              icon: StrokeStyleDottedIcon,\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            app,\n            element => element.strokeStyle,\n            element => element.hasOwnProperty(\"strokeStyle\"),\n            hasSelection => (hasSelection ? null : appState.currentItemStrokeStyle)\n          )}\n          onChange={value => updateData(value)}\n        />\n      </div>\n    </fieldset>\n  ),\n});\n\nexport const actionChangeOpacity = register<JsonDrawElement[\"opacity\"]>({\n  name: \"changeOpacity\",\n  label: \"labels.opacity\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        el =>\n          newElementWith(el, {\n            opacity: value,\n          }),\n        true\n      ),\n      appState: { ...appState, currentItemOpacity: value },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ app, updateData }) => (\n    <Range updateData={updateData} app={app} testId=\"opacity\" />\n  ),\n});\n\nexport const actionChangeFontSize = register<JsonDrawTextElement[\"fontSize\"]>({\n  name: \"changeFontSize\",\n  label: \"labels.fontSize\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return changeFontSize(\n      elements,\n      appState,\n      app,\n      () => {\n        invariant(value, \"actionChangeFontSize: Expected a font size value\");\n        return value;\n      },\n      value\n    );\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => {\n    const { isCompact } = getStylesPanelInfo(app);\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.fontSize\")}</legend>\n        <div className=\"buttonList\">\n          <RadioSelection\n            group=\"font-size\"\n            options={[\n              {\n                value: FONT_SIZES.sm,\n                text: t(\"labels.small\"),\n                icon: FontSizeSmallIcon,\n                testId: \"fontSize-small\",\n              },\n              {\n                value: FONT_SIZES.md,\n                text: t(\"labels.medium\"),\n                icon: FontSizeMediumIcon,\n                testId: \"fontSize-medium\",\n              },\n              {\n                value: FONT_SIZES.lg,\n                text: t(\"labels.large\"),\n                icon: FontSizeLargeIcon,\n                testId: \"fontSize-large\",\n              },\n              {\n                value: FONT_SIZES.xl,\n                text: t(\"labels.veryLarge\"),\n                icon: FontSizeExtraLargeIcon,\n                testId: \"fontSize-veryLarge\",\n              },\n            ]}\n            value={getFormValue(\n              elements,\n              app,\n              element => {\n                if (isTextElement(element)) {\n                  return element.fontSize;\n                }\n                const boundTextElement = getBoundTextElement(\n                  element,\n                  app.scene.getNonDeletedElementsMap()\n                );\n                if (boundTextElement) {\n                  return boundTextElement.fontSize;\n                }\n                return null;\n              },\n              element =>\n                isTextElement(element) ||\n                getBoundTextElement(element, app.scene.getNonDeletedElementsMap()) !== null,\n              hasSelection =>\n                hasSelection ? null : appState.currentItemFontSize || DEFAULT_FONT_SIZE\n            )}\n            onChange={value => {\n              withCaretPositionPreservation(\n                () => updateData(value),\n                isCompact,\n                !!appState.editingTextElement,\n                data?.onPreventClose\n              );\n            }}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n\nexport const actionDecreaseFontSize = register({\n  name: \"decreaseFontSize\",\n  label: \"labels.decreaseFontSize\",\n  icon: fontSizeIcon,\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return changeFontSize(elements, appState, app, element =>\n      Math.round(\n        // get previous value before relative increase (doesn't work fully\n        // due to rounding and float precision issues)\n        (1 / (1 + FONT_SIZE_RELATIVE_INCREASE_STEP)) * element.fontSize\n      )\n    );\n  },\n  keyTest: event => {\n    return (\n      event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      // KEYS.COMMA needed for MacOS\n      (event.key === KEYS.CHEVRON_LEFT || event.key === KEYS.COMMA)\n    );\n  },\n});\n\nexport const actionIncreaseFontSize = register({\n  name: \"increaseFontSize\",\n  label: \"labels.increaseFontSize\",\n  icon: fontSizeIcon,\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return changeFontSize(elements, appState, app, element =>\n      Math.round(element.fontSize * (1 + FONT_SIZE_RELATIVE_INCREASE_STEP))\n    );\n  },\n  keyTest: event => {\n    return (\n      event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      // KEYS.PERIOD needed for MacOS\n      (event.key === KEYS.CHEVRON_RIGHT || event.key === KEYS.PERIOD)\n    );\n  },\n});\n\ntype ChangeFontFamilyData = Partial<\n  Pick<AppState, \"openPopup\" | \"currentItemFontFamily\" | \"currentHoveredFontFamily\">\n> & {\n  /** cache of selected & editing elements populated on opened popup */\n  cachedElements?: ElementsMap;\n  /** flag to reset all elements to their cached versions  */\n  resetAll?: true;\n  /** flag to reset all containers to their cached versions */\n  resetContainers?: true;\n};\n\nexport const actionChangeFontFamily = register<{\n  currentItemFontFamily: any;\n  currentHoveredFontFamily: any;\n}>({\n  name: \"changeFontFamily\",\n  label: \"labels.fontFamily\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    const { cachedElements, resetAll, resetContainers, ...nextAppState } =\n      value as ChangeFontFamilyData;\n\n    if (resetAll) {\n      const nextElements = changeProperty(\n        elements,\n        appState,\n        element => {\n          const cachedElement = cachedElements?.get(element.id);\n          if (cachedElement) {\n            const newElement = newElementWith(element, {\n              ...cachedElement,\n            });\n\n            return newElement;\n          }\n\n          return element;\n        },\n        true\n      );\n\n      return {\n        elements: nextElements,\n        appState: {\n          ...appState,\n          ...nextAppState,\n        },\n        captureUpdate: CaptureUpdateAction.NEVER,\n      };\n    }\n\n    invariant(value, \"actionChangeFontFamily: value must be defined\");\n\n    const { currentItemFontFamily, currentHoveredFontFamily } = value;\n\n    let nextCaptureUpdateAction: CaptureUpdateActionType = CaptureUpdateAction.EVENTUALLY;\n    let nextFontFamily: FontFamilyValues | undefined;\n    let skipOnHoverRender = false;\n\n    if (currentItemFontFamily) {\n      nextFontFamily = currentItemFontFamily;\n      nextCaptureUpdateAction = CaptureUpdateAction.IMMEDIATELY;\n    } else if (currentHoveredFontFamily) {\n      nextFontFamily = currentHoveredFontFamily;\n      nextCaptureUpdateAction = CaptureUpdateAction.EVENTUALLY;\n\n      const selectedTextElements = getSelectedElements(elements, appState, {\n        includeBoundTextElement: true,\n      }).filter(element => isTextElement(element));\n\n      // skip on hover re-render for more than 200 text elements or for text element with more than 5000 chars combined\n      if (selectedTextElements.length > 200) {\n        skipOnHoverRender = true;\n      } else {\n        let i = 0;\n        let textLengthAccumulator = 0;\n\n        while (i < selectedTextElements.length && textLengthAccumulator < 5000) {\n          const textElement = selectedTextElements[i] as JsonDrawTextElement;\n          textLengthAccumulator += textElement?.originalText.length || 0;\n          i++;\n        }\n\n        if (textLengthAccumulator > 5000) {\n          skipOnHoverRender = true;\n        }\n      }\n    }\n\n    const result = {\n      appState: {\n        ...appState,\n        ...nextAppState,\n      },\n      captureUpdate: nextCaptureUpdateAction,\n    };\n\n    if (nextFontFamily && !skipOnHoverRender) {\n      const elementContainerMapping = new Map<JsonDrawTextElement, JsonDrawElement | null>();\n      let uniqueChars = new Set<string>();\n      let skipFontFaceCheck = false;\n\n      const fontsCache = Array.from(Fonts.loadedFontsCache.values());\n      const fontFamily = Object.entries(FONT_FAMILY).find(\n        ([_, value]) => value === nextFontFamily\n      )?.[0];\n\n      // skip `document.font.check` check on hover, if at least one font family has loaded as it's super slow (could result in slightly different bbox, which is fine)\n      if (\n        currentHoveredFontFamily &&\n        fontFamily &&\n        fontsCache.some(sig => sig.startsWith(fontFamily))\n      ) {\n        skipFontFaceCheck = true;\n      }\n\n      // following causes re-render so make sure we changed the family\n      // otherwise it could cause unexpected issues, such as preventing opening the popover when in wysiwyg\n      Object.assign(result, {\n        elements: changeProperty(\n          elements,\n          appState,\n          oldElement => {\n            if (\n              isTextElement(oldElement) &&\n              (oldElement.fontFamily !== nextFontFamily || currentItemFontFamily) // force update on selection\n            ) {\n              const newElement: JsonDrawTextElement = newElementWith(oldElement, {\n                fontFamily: nextFontFamily,\n                lineHeight: getLineHeight(nextFontFamily!),\n              });\n\n              const cachedContainer = cachedElements?.get(oldElement.containerId || \"\") || {};\n\n              const container = app.scene.getContainerElement(oldElement);\n\n              if (resetContainers && container && cachedContainer) {\n                // reset the container back to it's cached version\n                app.scene.mutateElement(container, { ...cachedContainer });\n              }\n\n              if (!skipFontFaceCheck) {\n                uniqueChars = new Set([...uniqueChars, ...Array.from(newElement.originalText)]);\n              }\n\n              elementContainerMapping.set(newElement, container);\n\n              return newElement;\n            }\n\n            return oldElement;\n          },\n          true\n        ),\n      });\n\n      // size is irrelevant, but necessary\n      const fontString = `10px ${getFontFamilyString({\n        fontFamily: nextFontFamily,\n      })}`;\n      const chars = Array.from(uniqueChars.values()).join();\n\n      if (skipFontFaceCheck || window.document.fonts.check(fontString, chars)) {\n        // we either skip the check (have at least one font face loaded) or do the check and find out all the font faces have loaded\n        for (const [element, container] of elementContainerMapping) {\n          // trigger synchronous redraw\n          redrawTextBoundingBox(element, container, app.scene);\n        }\n      } else {\n        // otherwise try to load all font faces for the given chars and redraw elements once our font faces loaded\n        window.document.fonts.load(fontString, chars).then(fontFaces => {\n          for (const [element, container] of elementContainerMapping) {\n            // use latest element state to ensure we don't have closure over an old instance in order to avoid possible race conditions (i.e. font faces load out-of-order while rapidly switching fonts)\n            const latestElement = app.scene.getElement(element.id);\n            const latestContainer = container ? app.scene.getElement(container.id) : null;\n\n            if (latestElement) {\n              // trigger async redraw\n              redrawTextBoundingBox(\n                latestElement as JsonDrawTextElement,\n                latestContainer,\n                app.scene\n              );\n            }\n          }\n\n          // trigger update once we've mutated all the elements, which also updates our cache\n          app.fonts.onLoaded(fontFaces);\n        });\n      }\n    }\n\n    return result;\n  },\n  PanelComponent: ({ elements, appState, app, updateData }) => {\n    const cachedElementsRef = useRef<ElementsMap>(new Map());\n    const prevSelectedFontFamilyRef = useRef<number | null>(null);\n    // relying on state batching as multiple `FontPicker` handlers could be called in rapid succession and we want to combine them\n    const [batchedData, setBatchedData] = useState<ChangeFontFamilyData>({});\n    const isUnmounted = useRef(true);\n    const { stylesPanelMode, isCompact } = getStylesPanelInfo(app);\n\n    const selectedFontFamily = useMemo(() => {\n      const getFontFamily = (elementsArray: readonly JsonDrawElement[], elementsMap: ElementsMap) =>\n        getFormValue(\n          elementsArray,\n          app,\n          element => {\n            if (isTextElement(element)) {\n              return element.fontFamily;\n            }\n            const boundTextElement = getBoundTextElement(element, elementsMap);\n            if (boundTextElement) {\n              return boundTextElement.fontFamily;\n            }\n            return null;\n          },\n          element => isTextElement(element) || getBoundTextElement(element, elementsMap) !== null,\n          hasSelection =>\n            hasSelection ? null : appState.currentItemFontFamily || DEFAULT_FONT_FAMILY\n        );\n\n      // popup opened, use cached elements\n      if (batchedData.openPopup === \"fontFamily\" && appState.openPopup === \"fontFamily\") {\n        return getFontFamily(\n          Array.from(cachedElementsRef.current?.values() ?? []),\n          cachedElementsRef.current\n        );\n      }\n\n      // popup closed, use all elements\n      if (!batchedData.openPopup && appState.openPopup !== \"fontFamily\") {\n        return getFontFamily(elements, app.scene.getNonDeletedElementsMap());\n      }\n\n      // popup props are not in sync, hence we are in the middle of an update, so keeping the previous value we've had\n      return prevSelectedFontFamilyRef.current;\n    }, [batchedData.openPopup, appState, elements, app]);\n\n    useEffect(() => {\n      prevSelectedFontFamilyRef.current = selectedFontFamily;\n    }, [selectedFontFamily]);\n\n    useEffect(() => {\n      if (Object.keys(batchedData).length) {\n        updateData(batchedData);\n        // reset the data after we've used the data\n        setBatchedData({});\n      }\n      // call update only on internal state changes\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [batchedData]);\n\n    useEffect(() => {\n      isUnmounted.current = false;\n\n      return () => {\n        isUnmounted.current = true;\n      };\n    }, []);\n\n    return (\n      <>\n        {stylesPanelMode === \"full\" && <legend>{t(\"labels.fontFamily\")}</legend>}\n        <FontPicker\n          isOpened={appState.openPopup === \"fontFamily\"}\n          selectedFontFamily={selectedFontFamily}\n          hoveredFontFamily={appState.currentHoveredFontFamily}\n          compactMode={stylesPanelMode !== \"full\"}\n          onSelect={fontFamily => {\n            withCaretPositionPreservation(\n              () => {\n                setBatchedData({\n                  openPopup: null,\n                  currentHoveredFontFamily: null,\n                  currentItemFontFamily: fontFamily,\n                });\n                // defensive clear so immediate close won't abuse the cached elements\n                cachedElementsRef.current.clear();\n              },\n              isCompact,\n              !!appState.editingTextElement\n            );\n          }}\n          onHover={fontFamily => {\n            setBatchedData({\n              currentHoveredFontFamily: fontFamily,\n              cachedElements: new Map(cachedElementsRef.current),\n              resetContainers: true,\n            });\n          }}\n          onLeave={() => {\n            setBatchedData({\n              currentHoveredFontFamily: null,\n              cachedElements: new Map(cachedElementsRef.current),\n              resetAll: true,\n            });\n          }}\n          onPopupChange={open => {\n            if (open) {\n              // open, populate the cache from scratch\n              cachedElementsRef.current.clear();\n\n              const { editingTextElement } = appState;\n\n              // still check type to be safe\n              if (editingTextElement?.type === \"text\") {\n                // retrieve the latest version from the scene, as `editingTextElement` isn't mutated\n                const latesteditingTextElement = app.scene.getElement(editingTextElement.id);\n\n                // inside the wysiwyg editor\n                cachedElementsRef.current.set(\n                  editingTextElement.id,\n                  newElementWith(latesteditingTextElement || editingTextElement, {}, true)\n                );\n              } else {\n                const selectedElements = getSelectedElements(elements, appState, {\n                  includeBoundTextElement: true,\n                });\n\n                for (const element of selectedElements) {\n                  cachedElementsRef.current.set(element.id, newElementWith(element, {}, true));\n                }\n              }\n\n              setBatchedData({\n                ...batchedData,\n                openPopup: \"fontFamily\",\n              });\n            } else {\n              const fontFamilyData = {\n                currentHoveredFontFamily: null,\n                cachedElements: new Map(cachedElementsRef.current),\n                resetAll: true,\n              } as ChangeFontFamilyData;\n\n              setBatchedData({\n                ...fontFamilyData,\n              });\n              cachedElementsRef.current.clear();\n\n              // Refocus text editor when font picker closes if we were editing text\n              if (isCompact && appState.editingTextElement) {\n                restoreCaretPosition(null); // Just refocus without saved position\n              }\n            }\n          }}\n        />\n      </>\n    );\n  },\n});\n\nexport const actionChangeTextAlign = register<TextAlign>({\n  name: \"changeTextAlign\",\n  label: \"Change text alignment\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        oldElement => {\n          if (isTextElement(oldElement)) {\n            const newElement: JsonDrawTextElement = newElementWith(oldElement, {\n              textAlign: value,\n            });\n            redrawTextBoundingBox(newElement, app.scene.getContainerElement(oldElement), app.scene);\n            return newElement;\n          }\n\n          return oldElement;\n        },\n        true\n      ),\n      appState: {\n        ...appState,\n        currentItemTextAlign: value,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => {\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    const { isCompact } = getStylesPanelInfo(app);\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.textAlign\")}</legend>\n        <div className=\"buttonList\">\n          <RadioSelection<TextAlign | false>\n            group=\"text-align\"\n            options={[\n              {\n                value: \"left\",\n                text: t(\"labels.left\"),\n                icon: TextAlignLeftIcon,\n                testId: \"align-left\",\n              },\n              {\n                value: \"center\",\n                text: t(\"labels.center\"),\n                icon: TextAlignCenterIcon,\n                testId: \"align-horizontal-center\",\n              },\n              {\n                value: \"right\",\n                text: t(\"labels.right\"),\n                icon: TextAlignRightIcon,\n                testId: \"align-right\",\n              },\n            ]}\n            value={getFormValue(\n              elements,\n              app,\n              element => {\n                if (isTextElement(element)) {\n                  return element.textAlign;\n                }\n                const boundTextElement = getBoundTextElement(element, elementsMap);\n                if (boundTextElement) {\n                  return boundTextElement.textAlign;\n                }\n                return null;\n              },\n              element =>\n                isTextElement(element) || getBoundTextElement(element, elementsMap) !== null,\n              hasSelection => (hasSelection ? null : appState.currentItemTextAlign)\n            )}\n            onChange={value => {\n              withCaretPositionPreservation(\n                () => updateData(value),\n                isCompact,\n                !!appState.editingTextElement,\n                data?.onPreventClose\n              );\n            }}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeVerticalAlign = register<VerticalAlign>({\n  name: \"changeVerticalAlign\",\n  label: \"Change vertical alignment\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        oldElement => {\n          if (isTextElement(oldElement)) {\n            const newElement: JsonDrawTextElement = newElementWith(oldElement, {\n              verticalAlign: value,\n            });\n\n            redrawTextBoundingBox(newElement, app.scene.getContainerElement(oldElement), app.scene);\n            return newElement;\n          }\n\n          return oldElement;\n        },\n        true\n      ),\n      appState: {\n        ...appState,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, data }) => {\n    const { isCompact } = getStylesPanelInfo(app);\n    return (\n      <fieldset>\n        <div className=\"buttonList\">\n          <RadioSelection<VerticalAlign | false>\n            group=\"text-align\"\n            options={[\n              {\n                value: VERTICAL_ALIGN.TOP,\n                text: t(\"labels.alignTop\"),\n                icon: <TextAlignTopIcon theme={appState.theme} />,\n                testId: \"align-top\",\n              },\n              {\n                value: VERTICAL_ALIGN.MIDDLE,\n                text: t(\"labels.centerVertically\"),\n                icon: <TextAlignMiddleIcon theme={appState.theme} />,\n                testId: \"align-middle\",\n              },\n              {\n                value: VERTICAL_ALIGN.BOTTOM,\n                text: t(\"labels.alignBottom\"),\n                icon: <TextAlignBottomIcon theme={appState.theme} />,\n                testId: \"align-bottom\",\n              },\n            ]}\n            value={getFormValue(\n              elements,\n              app,\n              element => {\n                if (isTextElement(element) && element.containerId) {\n                  return element.verticalAlign;\n                }\n                const boundTextElement = getBoundTextElement(\n                  element,\n                  app.scene.getNonDeletedElementsMap()\n                );\n                if (boundTextElement) {\n                  return boundTextElement.verticalAlign;\n                }\n                return null;\n              },\n              element =>\n                isTextElement(element) ||\n                getBoundTextElement(element, app.scene.getNonDeletedElementsMap()) !== null,\n              hasSelection => (hasSelection ? null : VERTICAL_ALIGN.MIDDLE)\n            )}\n            onChange={value => {\n              withCaretPositionPreservation(\n                () => updateData(value),\n                isCompact,\n                !!appState.editingTextElement,\n                data?.onPreventClose\n              );\n            }}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeRoundness = register<\"sharp\" | \"round\">({\n  name: \"changeRoundness\",\n  label: \"Change edge roundness\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, el => {\n        if (isElbowArrow(el)) {\n          return el;\n        }\n\n        return newElementWith(el, {\n          roundness:\n            value === \"round\"\n              ? {\n                  type: isUsingAdaptiveRadius(el.type)\n                    ? ROUNDNESS.ADAPTIVE_RADIUS\n                    : ROUNDNESS.PROPORTIONAL_RADIUS,\n                }\n              : null,\n        });\n      }),\n      appState: {\n        ...appState,\n        currentItemRoundness: value,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app, renderAction }) => {\n    const targetElements = getTargetElements(getNonDeletedElements(elements), appState);\n\n    const hasLegacyRoundness = targetElements.some(el => el.roundness?.type === ROUNDNESS.LEGACY);\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.edges\")}</legend>\n        <div className=\"buttonList\">\n          <RadioSelection\n            group=\"edges\"\n            options={[\n              {\n                value: \"sharp\",\n                text: t(\"labels.sharp\"),\n                icon: EdgeSharpIcon,\n              },\n              {\n                value: \"round\",\n                text: t(\"labels.round\"),\n                icon: EdgeRoundIcon,\n              },\n            ]}\n            value={getFormValue(\n              elements,\n              app,\n              element => (hasLegacyRoundness ? null : element.roundness ? \"round\" : \"sharp\"),\n              element => !isArrowElement(element) && element.hasOwnProperty(\"roundness\"),\n              hasSelection => (hasSelection ? null : appState.currentItemRoundness)\n            )}\n            onChange={value => updateData(value)}\n          />\n          {renderAction(\"togglePolygon\")}\n        </div>\n      </fieldset>\n    );\n  },\n});\n\nconst getArrowheadOptions = (flip: boolean) => {\n  return [\n    {\n      value: null,\n      text: t(\"labels.arrowhead_none\"),\n      keyBinding: \"q\",\n      icon: ArrowheadNoneIcon,\n    },\n    {\n      value: \"arrow\",\n      text: t(\"labels.arrowhead_arrow\"),\n      keyBinding: \"w\",\n      icon: <ArrowheadArrowIcon flip={flip} />,\n    },\n    {\n      value: \"triangle\",\n      text: t(\"labels.arrowhead_triangle\"),\n      icon: <ArrowheadTriangleIcon flip={flip} />,\n      keyBinding: \"e\",\n    },\n    {\n      value: \"triangle_outline\",\n      text: t(\"labels.arrowhead_triangle_outline\"),\n      icon: <ArrowheadTriangleOutlineIcon flip={flip} />,\n      keyBinding: \"r\",\n    },\n    {\n      value: \"circle\",\n      text: t(\"labels.arrowhead_circle\"),\n      keyBinding: \"a\",\n      icon: <ArrowheadCircleIcon flip={flip} />,\n    },\n    {\n      value: \"circle_outline\",\n      text: t(\"labels.arrowhead_circle_outline\"),\n      keyBinding: \"s\",\n      icon: <ArrowheadCircleOutlineIcon flip={flip} />,\n    },\n    {\n      value: \"diamond\",\n      text: t(\"labels.arrowhead_diamond\"),\n      icon: <ArrowheadDiamondIcon flip={flip} />,\n      keyBinding: \"d\",\n    },\n    {\n      value: \"diamond_outline\",\n      text: t(\"labels.arrowhead_diamond_outline\"),\n      icon: <ArrowheadDiamondOutlineIcon flip={flip} />,\n      keyBinding: \"f\",\n    },\n    {\n      value: \"bar\",\n      text: t(\"labels.arrowhead_bar\"),\n      keyBinding: \"z\",\n      icon: <ArrowheadBarIcon flip={flip} />,\n    },\n    {\n      value: \"crowfoot_one\",\n      text: t(\"labels.arrowhead_crowfoot_one\"),\n      icon: <ArrowheadCrowfootOneIcon flip={flip} />,\n      keyBinding: \"x\",\n    },\n    {\n      value: \"crowfoot_many\",\n      text: t(\"labels.arrowhead_crowfoot_many\"),\n      icon: <ArrowheadCrowfootIcon flip={flip} />,\n      keyBinding: \"c\",\n    },\n    {\n      value: \"crowfoot_one_or_many\",\n      text: t(\"labels.arrowhead_crowfoot_one_or_many\"),\n      icon: <ArrowheadCrowfootOneOrManyIcon flip={flip} />,\n      keyBinding: \"v\",\n    },\n  ] as const;\n};\n\nexport const actionChangeArrowhead = register<{\n  position: \"start\" | \"end\";\n  type: Arrowhead;\n}>({\n  name: \"changeArrowhead\",\n  label: \"Change arrowheads\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    invariant(value, \"actionChangeArrowhead: value must be defined\");\n\n    return {\n      elements: changeProperty(elements, appState, el => {\n        if (isLinearElement(el)) {\n          const { position, type } = value;\n\n          if (position === \"start\") {\n            const element: JsonDrawLinearElement = newElementWith(el, {\n              startArrowhead: type,\n            });\n            return element;\n          } else if (position === \"end\") {\n            const element: JsonDrawLinearElement = newElementWith(el, {\n              endArrowhead: type,\n            });\n            return element;\n          }\n        }\n\n        return el;\n      }),\n      appState: {\n        ...appState,\n        [value.position === \"start\" ? \"currentItemStartArrowhead\" : \"currentItemEndArrowhead\"]:\n          value.type,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    const isRTL = getLanguage().rtl;\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.arrowheads\")}</legend>\n        <div className=\"iconSelectList buttonList\">\n          <IconPicker\n            label=\"arrowhead_start\"\n            options={getArrowheadOptions(!isRTL)}\n            value={getFormValue<Arrowhead | null>(\n              elements,\n              app,\n              element =>\n                isLinearElement(element) && canHaveArrowheads(element.type)\n                  ? element.startArrowhead\n                  : appState.currentItemStartArrowhead,\n              true,\n              appState.currentItemStartArrowhead\n            )}\n            onChange={value => updateData({ position: \"start\", type: value })}\n            numberOfOptionsToAlwaysShow={4}\n          />\n          <IconPicker\n            label=\"arrowhead_end\"\n            group=\"arrowheads\"\n            options={getArrowheadOptions(!!isRTL)}\n            value={getFormValue<Arrowhead | null>(\n              elements,\n              app,\n              element =>\n                isLinearElement(element) && canHaveArrowheads(element.type)\n                  ? element.endArrowhead\n                  : appState.currentItemEndArrowhead,\n              true,\n              appState.currentItemEndArrowhead\n            )}\n            onChange={value => updateData({ position: \"end\", type: value })}\n            numberOfOptionsToAlwaysShow={4}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeArrowProperties = register({\n  name: \"changeArrowProperties\",\n  label: \"Change arrow properties\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    // This action doesn't perform any changes directly\n    // It's just a container for the arrow type and arrowhead actions\n    return false;\n  },\n  PanelComponent: ({ elements, appState, updateData, app, renderAction }) => {\n    return (\n      <div className=\"selected-shape-actions\">\n        {renderAction(\"changeArrowhead\")}\n        {renderAction(\"changeArrowType\")}\n      </div>\n    );\n  },\n});\n\nexport const actionChangeArrowType = register<keyof typeof ARROW_TYPE>({\n  name: \"changeArrowType\",\n  label: \"Change arrow types\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    const newElements = changeProperty(elements, appState, el => {\n      if (!isArrowElement(el)) {\n        return el;\n      }\n      const elementsMap = app.scene.getNonDeletedElementsMap();\n      const startPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(el, 0, elementsMap);\n      const endPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(el, -1, elementsMap);\n      let newElement = newElementWith(el, {\n        x: value === ARROW_TYPE.elbow ? startPoint[0] : el.x,\n        y: value === ARROW_TYPE.elbow ? startPoint[1] : el.y,\n        roundness:\n          value === ARROW_TYPE.round\n            ? {\n                type: ROUNDNESS.PROPORTIONAL_RADIUS,\n              }\n            : null,\n        elbowed: value === ARROW_TYPE.elbow,\n        angle: value === ARROW_TYPE.elbow ? (0 as Radians) : el.angle,\n        points:\n          value === ARROW_TYPE.elbow || el.elbowed\n            ? [\n                LinearElementEditor.pointFromAbsoluteCoords(\n                  {\n                    ...el,\n                    x: startPoint[0],\n                    y: startPoint[1],\n                    angle: 0 as Radians,\n                  },\n                  startPoint,\n                  elementsMap\n                ),\n                LinearElementEditor.pointFromAbsoluteCoords(\n                  {\n                    ...el,\n                    x: startPoint[0],\n                    y: startPoint[1],\n                    angle: 0 as Radians,\n                  },\n                  endPoint,\n                  elementsMap\n                ),\n              ]\n            : el.points,\n      });\n\n      if (isElbowArrow(newElement)) {\n        newElement.fixedSegments = null;\n\n        const elementsMap = app.scene.getNonDeletedElementsMap();\n\n        app.dismissLinearEditor();\n\n        const startGlobalPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n          newElement,\n          0,\n          elementsMap\n        );\n        const endGlobalPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n          newElement,\n          -1,\n          elementsMap\n        );\n        const startElement =\n          newElement.startBinding &&\n          (elementsMap.get(newElement.startBinding.elementId) as JsonDrawBindableElement);\n        const endElement =\n          newElement.endBinding &&\n          (elementsMap.get(newElement.endBinding.elementId) as JsonDrawBindableElement);\n\n        const startBinding =\n          startElement && newElement.startBinding\n            ? {\n                // @ts-ignore TS cannot discern check above\n                ...newElement.startBinding!,\n                ...calculateFixedPointForElbowArrowBinding(\n                  newElement,\n                  startElement,\n                  \"start\",\n                  elementsMap\n                ),\n              }\n            : null;\n        const endBinding =\n          endElement && newElement.endBinding\n            ? {\n                // @ts-ignore TS cannot discern check above\n                ...newElement.endBinding,\n                ...calculateFixedPointForElbowArrowBinding(\n                  newElement,\n                  endElement,\n                  \"end\",\n                  elementsMap\n                ),\n              }\n            : null;\n\n        newElement = {\n          ...newElement,\n          startBinding,\n          endBinding,\n          ...updateElbowArrowPoints(newElement, elementsMap, {\n            points: [startGlobalPoint, endGlobalPoint].map(\n              (p): LocalPoint => pointFrom(p[0] - newElement.x, p[1] - newElement.y)\n            ),\n            startBinding,\n            endBinding,\n            fixedSegments: null,\n          }),\n        };\n      } else {\n        const elementsMap = app.scene.getNonDeletedElementsMap();\n        if (newElement.startBinding) {\n          const startElement = elementsMap.get(\n            newElement.startBinding.elementId\n          ) as JsonDrawBindableElement;\n          if (startElement) {\n            bindBindingElement(\n              newElement,\n              startElement,\n              appState.bindMode === \"inside\" ? \"inside\" : \"orbit\",\n              \"start\",\n              app.scene\n            );\n          }\n        }\n        if (newElement.endBinding) {\n          const endElement = elementsMap.get(\n            newElement.endBinding.elementId\n          ) as JsonDrawBindableElement;\n          if (endElement) {\n            bindBindingElement(\n              newElement,\n              endElement,\n              appState.bindMode === \"inside\" ? \"inside\" : \"orbit\",\n              \"end\",\n              app.scene\n            );\n          }\n        }\n      }\n\n      return newElement;\n    });\n\n    const newState = {\n      ...appState,\n      currentItemArrowType: value,\n    };\n\n    // Change the arrow type and update any other state settings for\n    // the arrow.\n    const selectedId = appState.selectedLinearElement?.elementId;\n    if (selectedId) {\n      const selected = newElements.find(el => el.id === selectedId);\n      if (selected) {\n        newState.selectedLinearElement = new LinearElementEditor(\n          selected as JsonDrawLinearElement,\n          arrayToMap(elements)\n        );\n      }\n    }\n\n    return {\n      elements: newElements,\n      appState: newState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    return (\n      <fieldset>\n        <legend>{t(\"labels.arrowtypes\")}</legend>\n        <div className=\"buttonList\">\n          <RadioSelection\n            group=\"arrowtypes\"\n            options={[\n              {\n                value: ARROW_TYPE.sharp,\n                text: t(\"labels.arrowtype_sharp\"),\n                icon: sharpArrowIcon,\n                testId: \"sharp-arrow\",\n              },\n              {\n                value: ARROW_TYPE.round,\n                text: t(\"labels.arrowtype_round\"),\n                icon: roundArrowIcon,\n                testId: \"round-arrow\",\n              },\n              {\n                value: ARROW_TYPE.elbow,\n                text: t(\"labels.arrowtype_elbowed\"),\n                icon: elbowArrowIcon,\n                testId: \"elbow-arrow\",\n              },\n            ]}\n            value={getFormValue(\n              elements,\n              app,\n              element => {\n                if (isArrowElement(element)) {\n                  return element.elbowed\n                    ? ARROW_TYPE.elbow\n                    : element.roundness\n                      ? ARROW_TYPE.round\n                      : ARROW_TYPE.sharp;\n                }\n\n                return null;\n              },\n              element => isArrowElement(element),\n              hasSelection => (hasSelection ? null : appState.currentItemArrowType)\n            )}\n            onChange={value => updateData(value)}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Tooltip.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Tooltip.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect } from \"react\";\nimport \"./Tooltip.scss\";\n\nexport const getTooltipDiv = () => {\n  const existingDiv = document.querySelector<HTMLDivElement>(\".jsondraw-tooltip\");\n  if (existingDiv) {\n    return existingDiv;\n  }\n  const div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  div.classList.add(\"jsondraw-tooltip\");\n  return div;\n};\n\nexport const updateTooltipPosition = (\n  tooltip: HTMLDivElement,\n  item: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  },\n  position: \"bottom\" | \"top\" = \"bottom\"\n) => {\n  const tooltipRect = tooltip.getBoundingClientRect();\n\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const margin = 5;\n\n  let left = item.left + item.width / 2 - tooltipRect.width / 2;\n  if (left < 0) {\n    left = margin;\n  } else if (left + tooltipRect.width >= viewportWidth) {\n    left = viewportWidth - tooltipRect.width - margin;\n  }\n\n  let top: number;\n\n  if (position === \"bottom\") {\n    top = item.top + item.height + margin;\n    if (top + tooltipRect.height >= viewportHeight) {\n      top = item.top - tooltipRect.height - margin;\n    }\n  } else {\n    top = item.top - tooltipRect.height - margin;\n    if (top < 0) {\n      top = item.top + item.height + margin;\n    }\n  }\n\n  Object.assign(tooltip.style, {\n    top: `${top}px`,\n    left: `${left}px`,\n  });\n};\n\nconst updateTooltip = (\n  item: HTMLDivElement,\n  tooltip: HTMLDivElement,\n  label: string,\n  long: boolean\n) => {\n  tooltip.classList.add(\"jsondraw-tooltip--visible\");\n  tooltip.style.minWidth = long ? \"50ch\" : \"10ch\";\n  tooltip.style.maxWidth = long ? \"50ch\" : \"15ch\";\n\n  tooltip.textContent = label;\n\n  const itemRect = item.getBoundingClientRect();\n  updateTooltipPosition(tooltip, itemRect);\n};\n\ntype TooltipProps = {\n  children: React.ReactNode;\n  label: string;\n  long?: boolean;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n};\n\nexport const Tooltip = ({ children, label, long = false, style, disabled }: TooltipProps) => {\n  useEffect(() => {\n    return () => getTooltipDiv().classList.remove(\"jsondraw-tooltip--visible\");\n  }, []);\n  if (disabled) {\n    return null;\n  }\n  return (\n    <div\n      className=\"jsondraw-tooltip-wrapper\"\n      onPointerEnter={event =>\n        updateTooltip(event.currentTarget as HTMLDivElement, getTooltipDiv(), label, long)\n      }\n      onPointerLeave={() => getTooltipDiv().classList.remove(\"jsondraw-tooltip--visible\")}\n      style={style}\n    >\n      {children}\n    </div>\n  );\n};\n","import { CURSOR_TYPE, MIME_TYPES, THEME } from \"@jsondraw/common\";\n\nimport { isHandToolActive, isEraserActive } from \"./appState\";\n\nimport type { AppState, DataURL } from \"./types\";\n\nconst laserPointerCursorSVG_tag = `<svg viewBox=\"0 0 24 24\" stroke-width=\"1\" width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">`;\nconst laserPointerCursorBackgroundSVG = `<path d=\"M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z\" style=\"fill:#fff\"/>`;\nconst laserPointerCursorIconSVG = `<path stroke=\"#1b1b1f\" fill=\"#fff\" d=\"m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408\"/>`;\n\nconst laserPointerCursorDataURL_lightMode = `data:${\n  MIME_TYPES.svg\n},${encodeURIComponent(\n  `${laserPointerCursorSVG_tag}${laserPointerCursorIconSVG}</svg>`,\n)}`;\nconst laserPointerCursorDataURL_darkMode = `data:${\n  MIME_TYPES.svg\n},${encodeURIComponent(\n  `${laserPointerCursorSVG_tag}${laserPointerCursorBackgroundSVG}${laserPointerCursorIconSVG}</svg>`,\n)}`;\n\nexport const resetCursor = (interactiveCanvas: HTMLCanvasElement | null) => {\n  if (interactiveCanvas) {\n    interactiveCanvas.style.cursor = \"\";\n  }\n};\n\nexport const setCursor = (\n  interactiveCanvas: HTMLCanvasElement | null,\n  cursor: string,\n) => {\n  if (interactiveCanvas) {\n    interactiveCanvas.style.cursor = cursor;\n  }\n};\n\nlet eraserCanvasCache: any;\nlet previewDataURL: string;\nexport const setEraserCursor = (\n  interactiveCanvas: HTMLCanvasElement | null,\n  theme: AppState[\"theme\"],\n) => {\n  const cursorImageSizePx = 20;\n\n  const drawCanvas = () => {\n    const isDarkTheme = theme === THEME.DARK;\n    eraserCanvasCache = document.createElement(\"canvas\");\n    eraserCanvasCache.theme = theme;\n    eraserCanvasCache.height = cursorImageSizePx;\n    eraserCanvasCache.width = cursorImageSizePx;\n    const context = eraserCanvasCache.getContext(\"2d\")!;\n    context.lineWidth = 1;\n    context.beginPath();\n    context.arc(\n      eraserCanvasCache.width / 2,\n      eraserCanvasCache.height / 2,\n      5,\n      0,\n      2 * Math.PI,\n    );\n    context.fillStyle = isDarkTheme ? \"#000\" : \"#fff\";\n    context.fill();\n    context.strokeStyle = isDarkTheme ? \"#fff\" : \"#000\";\n    context.stroke();\n    previewDataURL = eraserCanvasCache.toDataURL(MIME_TYPES.svg) as DataURL;\n  };\n  if (!eraserCanvasCache || eraserCanvasCache.theme !== theme) {\n    drawCanvas();\n  }\n\n  setCursor(\n    interactiveCanvas,\n    `url(${previewDataURL}) ${cursorImageSizePx / 2} ${\n      cursorImageSizePx / 2\n    }, auto`,\n  );\n};\n\nexport const setCursorForShape = (\n  interactiveCanvas: HTMLCanvasElement | null,\n  appState: Pick<AppState, \"activeTool\" | \"theme\">,\n) => {\n  if (!interactiveCanvas) {\n    return;\n  }\n  if (appState.activeTool.type === \"selection\") {\n    resetCursor(interactiveCanvas);\n  } else if (isHandToolActive(appState)) {\n    interactiveCanvas.style.cursor = CURSOR_TYPE.GRAB;\n  } else if (isEraserActive(appState)) {\n    setEraserCursor(interactiveCanvas, appState.theme);\n    // do nothing if image tool is selected which suggests there's\n    // a image-preview set as the cursor\n    // Ignore custom type as well and let host decide\n  } else if (appState.activeTool.type === \"laser\") {\n    const url =\n      appState.theme === THEME.LIGHT\n        ? laserPointerCursorDataURL_lightMode\n        : laserPointerCursorDataURL_darkMode;\n    interactiveCanvas.style.cursor = `url(${url}), auto`;\n  } else if (![\"image\", \"custom\"].includes(appState.activeTool.type)) {\n    interactiveCanvas.style.cursor = CURSOR_TYPE.CROSSHAIR;\n  } else if (appState.activeTool.type !== \"image\") {\n    interactiveCanvas.style.cursor = CURSOR_TYPE.AUTO;\n  }\n};\n","import type { AppState, NormalizedZoomValue } from \"../types\";\n\nexport const getStateForZoom = (\n  {\n    viewportX,\n    viewportY,\n    nextZoom,\n  }: {\n    viewportX: number;\n    viewportY: number;\n    nextZoom: NormalizedZoomValue;\n  },\n  appState: AppState,\n) => {\n  const appLayerX = viewportX - appState.offsetLeft;\n  const appLayerY = viewportY - appState.offsetTop;\n\n  const currentZoom = appState.zoom.value;\n\n  // get original scroll position without zoom\n  const baseScrollX = appState.scrollX + (appLayerX - appLayerX / currentZoom);\n  const baseScrollY = appState.scrollY + (appLayerY - appLayerY / currentZoom);\n\n  // get scroll offsets for target zoom level\n  const zoomOffsetScrollX = -(appLayerX - appLayerX / nextZoom);\n  const zoomOffsetScrollY = -(appLayerY - appLayerY / nextZoom);\n\n  return {\n    scrollX: baseScrollX + zoomOffsetScrollX,\n    scrollY: baseScrollY + zoomOffsetScrollY,\n    zoom: {\n      value: nextZoom,\n    },\n  };\n};\n","import {\n  DEFAULT_CANVAS_BACKGROUND_PICKS,\n  CURSOR_TYPE,\n  MAX_ZOOM,\n  MIN_ZOOM,\n  THEME,\n  ZOOM_STEP,\n  updateActiveTool,\n  CODES,\n  KEYS,\n} from \"@jsondraw/common\";\nimport { getNonDeletedElements } from \"@jsondraw/element\";\nimport { newElementWith } from \"@jsondraw/element\";\nimport { getCommonBounds, type SceneBounds } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\nimport { clamp, roundToStep } from \"@jsondraw/math\";\nimport { getDefaultAppState, isEraserActive, isHandToolActive } from \"../appState\";\nimport { ColorPicker } from \"../components/ColorPicker/ColorPicker\";\nimport {\n  handIcon,\n  LassoIcon,\n  MoonIcon,\n  SunIcon,\n  TrashIcon,\n  zoomAreaIcon,\n  ZoomInIcon,\n  ZoomOutIcon,\n  ZoomResetIcon,\n} from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { Tooltip } from \"../components/ui/Tooltip\";\nimport { setCursor } from \"../cursor\";\nimport { t } from \"../i18n\";\nimport { getNormalizedZoom } from \"../scene\";\nimport { centerScrollOn } from \"../scene/scroll\";\nimport { getStateForZoom } from \"../scene/zoom\";\nimport { getShortcutKey } from \"../shortcut\";\nimport type { AppState, Offsets } from \"../types\";\nimport { register } from \"./register\";\n\nexport const actionChangeViewBackgroundColor = register<Partial<AppState>>({\n  name: \"changeViewBackgroundColor\",\n  label: \"labels.canvasBackground\",\n  trackEvent: false,\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.changeViewBackgroundColor && !appState.viewModeEnabled\n    );\n  },\n  perform: (_, appState, value) => {\n    return {\n      appState: { ...appState, ...value },\n      captureUpdate: !!value?.viewBackgroundColor\n        ? CaptureUpdateAction.IMMEDIATELY\n        : CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, appProps, data }) => {\n    // FIXME move me to src/components/mainMenu/DefaultItems.tsx\n    return (\n      <ColorPicker\n        palette={null}\n        topPicks={DEFAULT_CANVAS_BACKGROUND_PICKS}\n        label={t(\"labels.canvasBackground\")}\n        type=\"canvasBackground\"\n        color={appState.viewBackgroundColor}\n        onChange={color => updateData({ viewBackgroundColor: color })}\n        data-testid=\"canvas-background-picker\"\n        elements={elements}\n        appState={appState}\n        updateData={updateData}\n      />\n    );\n  },\n});\n\nexport const actionClearCanvas = register({\n  name: \"clearCanvas\",\n  label: \"labels.clearCanvas\",\n  icon: TrashIcon,\n  trackEvent: { category: \"canvas\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.clearCanvas &&\n      !appState.viewModeEnabled &&\n      appState.openDialog?.name !== \"elementLinkSelector\"\n    );\n  },\n  perform: (elements, appState, _, app) => {\n    app.imageCache.clear();\n    return {\n      elements: elements.map(element => newElementWith(element, { isDeleted: true })),\n      appState: {\n        ...getDefaultAppState(),\n        files: {},\n        theme: appState.theme,\n        penMode: appState.penMode,\n        penDetected: appState.penDetected,\n        exportBackground: appState.exportBackground,\n        exportEmbedScene: appState.exportEmbedScene,\n        gridSize: appState.gridSize,\n        gridStep: appState.gridStep,\n        gridModeEnabled: appState.gridModeEnabled,\n        stats: appState.stats,\n        pasteDialog: appState.pasteDialog,\n        activeTool:\n          appState.activeTool.type === \"image\"\n            ? {\n                ...appState.activeTool,\n                type: app.state.preferredSelectionTool.type,\n              }\n            : appState.activeTool,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n});\n\nexport const actionZoomIn = register({\n  name: \"zoomIn\",\n  label: \"buttons.zoomIn\",\n  viewMode: true,\n  icon: ZoomInIcon,\n  trackEvent: { category: \"canvas\" },\n  perform: (_elements, appState, _, app) => {\n    return {\n      appState: {\n        ...appState,\n        ...getStateForZoom(\n          {\n            viewportX: appState.width / 2 + appState.offsetLeft,\n            viewportY: appState.height / 2 + appState.offsetTop,\n            nextZoom: getNormalizedZoom(appState.zoom.value + ZOOM_STEP),\n          },\n          appState\n        ),\n        userToFollow: null,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ updateData, appState }) => (\n    <ToolButton\n      type=\"button\"\n      className=\"zoom-in-button zoom-button\"\n      icon={ZoomInIcon}\n      title={`${t(\"buttons.zoomIn\")}  ${getShortcutKey(\"CtrlOrCmd++\")}`}\n      aria-label={t(\"buttons.zoomIn\")}\n      disabled={appState.zoom.value >= MAX_ZOOM}\n      onClick={() => {\n        updateData(null);\n      }}\n    />\n  ),\n  keyTest: event =>\n    (event.code === CODES.EQUAL || event.code === CODES.NUM_ADD) &&\n    (event[KEYS.CTRL_OR_CMD] || event.shiftKey),\n});\n\nexport const actionZoomOut = register({\n  name: \"zoomOut\",\n  label: \"buttons.zoomOut\",\n  icon: ZoomOutIcon,\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_elements, appState, _, app) => {\n    return {\n      appState: {\n        ...appState,\n        ...getStateForZoom(\n          {\n            viewportX: appState.width / 2 + appState.offsetLeft,\n            viewportY: appState.height / 2 + appState.offsetTop,\n            nextZoom: getNormalizedZoom(appState.zoom.value - ZOOM_STEP),\n          },\n          appState\n        ),\n        userToFollow: null,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ updateData, appState }) => (\n    <ToolButton\n      type=\"button\"\n      className=\"zoom-out-button zoom-button\"\n      icon={ZoomOutIcon}\n      title={`${t(\"buttons.zoomOut\")}  ${getShortcutKey(\"CtrlOrCmd+-\")}`}\n      aria-label={t(\"buttons.zoomOut\")}\n      disabled={appState.zoom.value <= MIN_ZOOM}\n      onClick={() => {\n        updateData(null);\n      }}\n    />\n  ),\n  keyTest: event =>\n    (event.code === CODES.MINUS || event.code === CODES.NUM_SUBTRACT) &&\n    (event[KEYS.CTRL_OR_CMD] || event.shiftKey),\n});\n\nexport const actionResetZoom = register({\n  name: \"resetZoom\",\n  label: \"buttons.resetZoom\",\n  icon: ZoomResetIcon,\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_elements, appState, _, app) => {\n    return {\n      appState: {\n        ...appState,\n        ...getStateForZoom(\n          {\n            viewportX: appState.width / 2 + appState.offsetLeft,\n            viewportY: appState.height / 2 + appState.offsetTop,\n            nextZoom: getNormalizedZoom(1),\n          },\n          appState\n        ),\n        userToFollow: null,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ updateData, appState }) => (\n    <Tooltip label={t(\"buttons.resetZoom\")} style={{ height: \"100%\" }}>\n      <ToolButton\n        type=\"button\"\n        className=\"reset-zoom-button zoom-button\"\n        title={t(\"buttons.resetZoom\")}\n        aria-label={t(\"buttons.resetZoom\")}\n        onClick={() => {\n          updateData(null);\n        }}\n      >\n        {(appState.zoom.value * 100).toFixed(0)}%\n      </ToolButton>\n    </Tooltip>\n  ),\n  keyTest: event =>\n    (event.code === CODES.ZERO || event.code === CODES.NUM_ZERO) &&\n    (event[KEYS.CTRL_OR_CMD] || event.shiftKey),\n});\n\nconst zoomValueToFitBoundsOnViewport = (\n  bounds: SceneBounds,\n  viewportDimensions: { width: number; height: number },\n  viewportZoomFactor: number = 1 // default to 1 if not provided\n) => {\n  const [x1, y1, x2, y2] = bounds;\n  const commonBoundsWidth = x2 - x1;\n  const zoomValueForWidth = viewportDimensions.width / commonBoundsWidth;\n  const commonBoundsHeight = y2 - y1;\n  const zoomValueForHeight = viewportDimensions.height / commonBoundsHeight;\n  const smallestZoomValue = Math.min(zoomValueForWidth, zoomValueForHeight);\n\n  const adjustedZoomValue = smallestZoomValue * clamp(viewportZoomFactor, 0.1, 1);\n\n  return Math.min(adjustedZoomValue, 1);\n};\n\nexport const zoomToFitBounds = ({\n  bounds,\n  appState,\n  canvasOffsets,\n  fitToViewport = false,\n  viewportZoomFactor = 1,\n  minZoom = -Infinity,\n  maxZoom = Infinity,\n}: {\n  bounds: SceneBounds;\n  canvasOffsets?: Offsets;\n  appState: Readonly<AppState>;\n  /** whether to fit content to viewport (beyond >100%) */\n  fitToViewport: boolean;\n  /** zoom content to cover X of the viewport, when fitToViewport=true */\n  viewportZoomFactor?: number;\n  minZoom?: number;\n  maxZoom?: number;\n}) => {\n  viewportZoomFactor = clamp(viewportZoomFactor, MIN_ZOOM, MAX_ZOOM);\n\n  const [x1, y1, x2, y2] = bounds;\n  const centerX = (x1 + x2) / 2;\n  const centerY = (y1 + y2) / 2;\n\n  const canvasOffsetLeft = canvasOffsets?.left ?? 0;\n  const canvasOffsetTop = canvasOffsets?.top ?? 0;\n  const canvasOffsetRight = canvasOffsets?.right ?? 0;\n  const canvasOffsetBottom = canvasOffsets?.bottom ?? 0;\n\n  const effectiveCanvasWidth = appState.width - canvasOffsetLeft - canvasOffsetRight;\n  const effectiveCanvasHeight = appState.height - canvasOffsetTop - canvasOffsetBottom;\n\n  let adjustedZoomValue;\n\n  if (fitToViewport) {\n    const commonBoundsWidth = x2 - x1;\n    const commonBoundsHeight = y2 - y1;\n\n    adjustedZoomValue =\n      Math.min(\n        effectiveCanvasWidth / commonBoundsWidth,\n        effectiveCanvasHeight / commonBoundsHeight\n      ) * viewportZoomFactor;\n  } else {\n    adjustedZoomValue = zoomValueToFitBoundsOnViewport(\n      bounds,\n      {\n        width: effectiveCanvasWidth,\n        height: effectiveCanvasHeight,\n      },\n      viewportZoomFactor\n    );\n  }\n\n  const newZoomValue = getNormalizedZoom(\n    clamp(roundToStep(adjustedZoomValue, ZOOM_STEP, \"floor\"), minZoom, maxZoom)\n  );\n\n  const centerScroll = centerScrollOn({\n    scenePoint: { x: centerX, y: centerY },\n    viewportDimensions: {\n      width: appState.width,\n      height: appState.height,\n    },\n    offsets: canvasOffsets,\n    zoom: { value: newZoomValue },\n  });\n\n  return {\n    appState: {\n      ...appState,\n      scrollX: centerScroll.scrollX,\n      scrollY: centerScroll.scrollY,\n      zoom: { value: newZoomValue },\n    },\n    captureUpdate: CaptureUpdateAction.EVENTUALLY,\n  };\n};\n\nexport const zoomToFit = ({\n  canvasOffsets,\n  targetElements,\n  appState,\n  fitToViewport,\n  viewportZoomFactor,\n  minZoom,\n  maxZoom,\n}: {\n  canvasOffsets?: Offsets;\n  targetElements: readonly JsonDrawElement[];\n  appState: Readonly<AppState>;\n  /** whether to fit content to viewport (beyond >100%) */\n  fitToViewport: boolean;\n  /** zoom content to cover X of the viewport, when fitToViewport=true */\n  viewportZoomFactor?: number;\n  minZoom?: number;\n  maxZoom?: number;\n}) => {\n  const commonBounds = getCommonBounds(getNonDeletedElements(targetElements));\n\n  return zoomToFitBounds({\n    canvasOffsets,\n    bounds: commonBounds,\n    appState,\n    fitToViewport,\n    viewportZoomFactor,\n    minZoom,\n    maxZoom,\n  });\n};\n\n// Note, this action differs from actionZoomToFitSelection in that it doesn't\n// zoom beyond 100%. In other words, if the content is smaller than viewport\n// size, it won't be zoomed in.\nexport const actionZoomToFitSelectionInViewport = register({\n  name: \"zoomToFitSelectionInViewport\",\n  label: \"labels.zoomToFitViewport\",\n  icon: zoomAreaIcon,\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    return zoomToFit({\n      targetElements: selectedElements.length ? selectedElements : elements,\n      appState: {\n        ...appState,\n        userToFollow: null,\n      },\n      fitToViewport: false,\n      canvasOffsets: app.getEditorUIOffsets(),\n    });\n  },\n  // NOTE shift-2 should have been assigned actionZoomToFitSelection.\n  // TBD on how proceed\n  keyTest: event =>\n    event.code === CODES.TWO && event.shiftKey && !event.altKey && !event[KEYS.CTRL_OR_CMD],\n});\n\nexport const actionZoomToFitSelection = register({\n  name: \"zoomToFitSelection\",\n  label: \"helpDialog.zoomToSelection\",\n  icon: zoomAreaIcon,\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    return zoomToFit({\n      targetElements: selectedElements.length ? selectedElements : elements,\n      appState: {\n        ...appState,\n        userToFollow: null,\n      },\n      fitToViewport: true,\n      canvasOffsets: app.getEditorUIOffsets(),\n    });\n  },\n  // NOTE this action should use shift-2 per figma, alas\n  keyTest: event =>\n    event.code === CODES.THREE && event.shiftKey && !event.altKey && !event[KEYS.CTRL_OR_CMD],\n});\n\nexport const actionZoomToFit = register({\n  name: \"zoomToFit\",\n  label: \"helpDialog.zoomToFit\",\n  icon: zoomAreaIcon,\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) =>\n    zoomToFit({\n      targetElements: elements,\n      appState: {\n        ...appState,\n        userToFollow: null,\n      },\n      fitToViewport: false,\n      canvasOffsets: app.getEditorUIOffsets(),\n    }),\n  keyTest: event =>\n    event.code === CODES.ONE && event.shiftKey && !event.altKey && !event[KEYS.CTRL_OR_CMD],\n});\n\nexport const actionToggleTheme = register<AppState[\"theme\"]>({\n  name: \"toggleTheme\",\n  label: (_, appState) => {\n    return appState.theme === THEME.DARK ? \"buttons.lightMode\" : \"buttons.darkMode\";\n  },\n  keywords: [\"toggle\", \"dark\", \"light\", \"mode\", \"theme\"],\n  icon: (appState, elements) => (appState.theme === THEME.LIGHT ? MoonIcon : SunIcon),\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_, appState, value) => {\n    return {\n      appState: {\n        ...appState,\n        theme: value || (appState.theme === THEME.LIGHT ? THEME.DARK : THEME.LIGHT),\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  keyTest: event => event.altKey && event.shiftKey && event.code === CODES.D,\n  predicate: (elements, appState, props, app) => {\n    return !!app.props.UIOptions.canvasActions.toggleTheme;\n  },\n});\n\nexport const actionToggleEraserTool = register({\n  name: \"toggleEraserTool\",\n  label: \"toolBar.eraser\",\n  trackEvent: { category: \"toolbar\" },\n  perform: (elements, appState, _, app) => {\n    let activeTool: AppState[\"activeTool\"];\n\n    if (isEraserActive(appState)) {\n      activeTool = updateActiveTool(appState, {\n        ...(appState.activeTool.lastActiveTool || {\n          type: app.state.preferredSelectionTool.type,\n        }),\n        lastActiveToolBeforeEraser: null,\n      });\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: \"eraser\",\n        lastActiveToolBeforeEraser: appState.activeTool,\n      });\n    }\n\n    return {\n      appState: {\n        ...appState,\n        selectedElementIds: {},\n        selectedGroupIds: {},\n        activeEmbeddable: null,\n        activeTool,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: event => event.key === KEYS.E,\n});\n\nexport const actionToggleLassoTool = register({\n  name: \"toggleLassoTool\",\n  label: \"toolBar.lasso\",\n  icon: LassoIcon,\n  trackEvent: { category: \"toolbar\" },\n  predicate: (elements, appState, props, app) => {\n    return app.state.preferredSelectionTool.type !== \"lasso\";\n  },\n  perform: (elements, appState, _, app) => {\n    let activeTool: AppState[\"activeTool\"];\n\n    if (appState.activeTool.type !== \"lasso\") {\n      activeTool = updateActiveTool(appState, {\n        type: \"lasso\",\n        fromSelection: false,\n      });\n      setCursor(app.interactiveCanvas, CURSOR_TYPE.CROSSHAIR);\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: \"selection\",\n      });\n    }\n\n    return {\n      appState: {\n        ...appState,\n        selectedElementIds: {},\n        selectedGroupIds: {},\n        activeEmbeddable: null,\n        activeTool,\n      },\n      captureUpdate: CaptureUpdateAction.NEVER,\n    };\n  },\n});\n\nexport const actionToggleHandTool = register({\n  name: \"toggleHandTool\",\n  label: \"toolBar.hand\",\n  trackEvent: { category: \"toolbar\" },\n  icon: handIcon,\n  viewMode: false,\n  perform: (elements, appState, _, app) => {\n    let activeTool: AppState[\"activeTool\"];\n\n    if (isHandToolActive(appState)) {\n      activeTool = updateActiveTool(appState, {\n        ...(appState.activeTool.lastActiveTool || {\n          type: \"selection\",\n        }),\n        lastActiveToolBeforeEraser: null,\n      });\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: \"hand\",\n        lastActiveToolBeforeEraser: appState.activeTool,\n      });\n      setCursor(app.interactiveCanvas, CURSOR_TYPE.GRAB);\n    }\n\n    return {\n      appState: {\n        ...appState,\n        selectedElementIds: {},\n        selectedGroupIds: {},\n        activeEmbeddable: null,\n        activeTool,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: event => !event.altKey && !event[KEYS.CTRL_OR_CMD] && event.key === KEYS.H,\n});\n","import { updateActiveTool } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { setCursorForShape } from \"../cursor\";\n\nimport { register } from \"./register\";\n\nexport const actionSetEmbeddableAsActiveTool = register({\n  name: \"setEmbeddableAsActiveTool\",\n  trackEvent: { category: \"toolbar\" },\n  target: \"Tool\",\n  label: \"toolBar.embeddable\",\n  perform: (elements, appState, _, app) => {\n    const nextActiveTool = updateActiveTool(appState, {\n      type: \"embeddable\",\n    });\n\n    setCursorForShape(app.canvas, {\n      ...appState,\n      activeTool: nextActiveTool,\n    });\n\n    return {\n      elements,\n      appState: {\n        ...appState,\n        activeTool: updateActiveTool(appState, {\n          type: \"embeddable\",\n        }),\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n});\n","import {\n  KEYS,\n  arrayToMap,\n  invariant,\n  shouldRotateWithDiscreteAngle,\n  updateActiveTool,\n} from \"@jsondraw/common\";\nimport { isValidPolygon, LinearElementEditor, newElementWith } from \"@jsondraw/element\";\nimport {\n  isBindingElement,\n  isFreeDrawElement,\n  isLinearElement,\n  isLineElement,\n} from \"@jsondraw/element\";\nimport { isPathALoop } from \"@jsondraw/element\";\nimport { isInvisiblySmallElement } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport { bindOrUnbindBindingElement } from \"@jsondraw/element/binding\";\nimport type {\n  JsonDrawElement,\n  JsonDrawLinearElement,\n  NonDeleted,\n  PointsPositionUpdates,\n} from \"@jsondraw/element/types\";\nimport { pointFrom } from \"@jsondraw/math\";\nimport type { GlobalPoint, LocalPoint } from \"@jsondraw/math\";\nimport { done } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { resetCursor } from \"../cursor\";\nimport { t } from \"../i18n\";\nimport type { AppState } from \"../types\";\nimport { register } from \"./register\";\n\ntype FormData = {\n  event: PointerEvent;\n  sceneCoords: { x: number; y: number };\n};\n\nexport const actionFinalize = register<FormData>({\n  name: \"finalize\",\n  label: \"\",\n  trackEvent: false,\n  perform: (elements, appState, data, app) => {\n    let newElements = elements;\n    const { interactiveCanvas, focusContainer, scene } = app;\n    const elementsMap = scene.getNonDeletedElementsMap();\n\n    if (data && appState.selectedLinearElement) {\n      const { event, sceneCoords } = data;\n      const element = LinearElementEditor.getElement(\n        appState.selectedLinearElement.elementId,\n        elementsMap\n      );\n\n      invariant(element, \"Arrow element should exist if selectedLinearElement is set\");\n\n      invariant(\n        sceneCoords,\n        \"sceneCoords should be defined if actionFinalize is called with event\"\n      );\n\n      const linearElementEditor = LinearElementEditor.handlePointerUp(\n        event,\n        appState.selectedLinearElement,\n        appState,\n        app.scene\n      );\n\n      if (\n        isBindingElement(element) &&\n        !appState.selectedLinearElement.segmentMidPointHoveredCoords\n      ) {\n        const newArrow = !!appState.newElement;\n\n        const selectedPointsIndices =\n          newArrow || !appState.selectedLinearElement.selectedPointsIndices\n            ? [element.points.length - 1] // New arrow creation\n            : appState.selectedLinearElement.selectedPointsIndices;\n\n        const draggedPoints: PointsPositionUpdates =\n          selectedPointsIndices.reduce((map, index) => {\n            map.set(index, {\n              point: LinearElementEditor.pointFromAbsoluteCoords(\n                element,\n                pointFrom<GlobalPoint>(\n                  sceneCoords.x - linearElementEditor.pointerOffset.x,\n                  sceneCoords.y - linearElementEditor.pointerOffset.y\n                ),\n                elementsMap\n              ),\n            });\n\n            return map;\n          }, new Map()) ?? new Map();\n        bindOrUnbindBindingElement(\n          element,\n          draggedPoints,\n          sceneCoords.x - linearElementEditor.pointerOffset.x,\n          sceneCoords.y - linearElementEditor.pointerOffset.y,\n          scene,\n          appState,\n          {\n            newArrow,\n            altKey: event.altKey,\n            angleLocked: shouldRotateWithDiscreteAngle(event),\n          }\n        );\n      } else if (isLineElement(element)) {\n        if (\n          appState.selectedLinearElement?.isEditing &&\n          !appState.newElement &&\n          !isValidPolygon(element.points)\n        ) {\n          scene.mutateElement(element, {\n            polygon: false,\n          });\n        }\n      }\n\n      if (linearElementEditor !== appState.selectedLinearElement) {\n        // `handlePointerUp()` updated the linear element instance,\n        // so filter out this element if it is too small,\n        // but do an update to all new elements anyway for undo/redo purposes.\n\n        if (element && isInvisiblySmallElement(element)) {\n          // TODO: #7348 in theory this gets recorded by the store, so the invisible elements could be restored by the undo/redo, which might be not what we would want\n          newElements = newElements.map(el => {\n            if (el.id === element.id) {\n              return newElementWith(el, {\n                isDeleted: true,\n              });\n            }\n            return el;\n          });\n        }\n\n        const activeToolLocked = appState.activeTool?.locked;\n\n        return {\n          elements:\n            element.points.length < 2 || isInvisiblySmallElement(element)\n              ? elements.map(el => {\n                  if (el.id === element.id) {\n                    return newElementWith(el, { isDeleted: true });\n                  }\n                  return el;\n                })\n              : newElements,\n          appState: {\n            ...appState,\n            cursorButton: \"up\",\n            selectedLinearElement: activeToolLocked\n              ? null\n              : {\n                  ...linearElementEditor,\n                  selectedPointsIndices: null,\n                  isEditing: false,\n                  initialState: {\n                    ...linearElementEditor.initialState,\n                    lastClickedPoint: -1,\n                  },\n                  pointerOffset: { x: 0, y: 0 },\n                },\n            selectionElement: null,\n            suggestedBinding: null,\n            newElement: null,\n            multiElement: null,\n          },\n          captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n        };\n      }\n    }\n\n    if (window.document.activeElement instanceof HTMLElement) {\n      focusContainer();\n    }\n\n    let element: NonDeleted<JsonDrawElement> | null = null;\n    if (appState.multiElement) {\n      element = appState.multiElement;\n    } else if (appState.newElement?.type === \"freedraw\" || isBindingElement(appState.newElement)) {\n      element = appState.newElement;\n    } else if (Object.keys(appState.selectedElementIds).length === 1) {\n      const candidate = elementsMap.get(Object.keys(appState.selectedElementIds)[0]) as\n        | NonDeleted<JsonDrawLinearElement>\n        | undefined;\n      if (candidate) {\n        element = candidate;\n      }\n    }\n\n    if (element) {\n      // pen and mouse have hover\n      if (\n        appState.selectedLinearElement &&\n        appState.multiElement &&\n        element.type !== \"freedraw\" &&\n        appState.lastPointerDownWith !== \"touch\"\n      ) {\n        const { points } = element;\n        const { lastCommittedPoint } = appState.selectedLinearElement;\n        if (!lastCommittedPoint || points[points.length - 1] !== lastCommittedPoint) {\n          scene.mutateElement(element, {\n            points: element.points.slice(0, -1),\n          });\n        }\n      }\n\n      if (element && isInvisiblySmallElement(element)) {\n        // TODO: #7348 in theory this gets recorded by the store, so the invisible elements could be restored by the undo/redo, which might be not what we would want\n        newElements = newElements.map(el => {\n          if (el.id === element?.id) {\n            return newElementWith(el, { isDeleted: true });\n          }\n          return el;\n        });\n      }\n\n      if (isLinearElement(element) || isFreeDrawElement(element)) {\n        // If the multi point line closes the loop,\n        // set the last point to first point.\n        // This ensures that loop remains closed at different scales.\n        const isLoop = isPathALoop(element.points, appState.zoom.value);\n\n        if (isLoop && (isLineElement(element) || isFreeDrawElement(element))) {\n          const linePoints = element.points;\n          const firstPoint = linePoints[0];\n          const points: LocalPoint[] = linePoints.map((p, index) =>\n            index === linePoints.length - 1 ? pointFrom(firstPoint[0], firstPoint[1]) : p\n          );\n          if (isLineElement(element)) {\n            scene.mutateElement(element, {\n              points,\n              polygon: true,\n            });\n          } else {\n            scene.mutateElement(element, {\n              points,\n            });\n          }\n        }\n\n        if (isLineElement(element) && !isValidPolygon(element.points)) {\n          scene.mutateElement(element, {\n            polygon: false,\n          });\n        }\n      }\n    }\n\n    if ((!appState.activeTool.locked && appState.activeTool.type !== \"freedraw\") || !element) {\n      resetCursor(interactiveCanvas);\n    }\n\n    let activeTool: AppState[\"activeTool\"];\n    if (appState.activeTool.type === \"eraser\") {\n      activeTool = updateActiveTool(appState, {\n        ...(appState.activeTool.lastActiveTool || {\n          type: app.state.preferredSelectionTool.type,\n        }),\n        lastActiveToolBeforeEraser: null,\n      });\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: app.state.preferredSelectionTool.type,\n      });\n    }\n\n    let selectedLinearElement =\n      element && isLinearElement(element)\n        ? new LinearElementEditor(element, arrayToMap(newElements)) // To select the linear element when user has finished mutipoint editing\n        : appState.selectedLinearElement;\n\n    selectedLinearElement = selectedLinearElement\n      ? {\n          ...selectedLinearElement,\n          isEditing: appState.newElement ? false : selectedLinearElement.isEditing,\n          initialState: {\n            ...selectedLinearElement.initialState,\n            lastClickedPoint: -1,\n            origin: null,\n          },\n        }\n      : selectedLinearElement;\n\n    return {\n      elements: newElements,\n      appState: {\n        ...appState,\n        cursorButton: \"up\",\n        activeTool:\n          (appState.activeTool.locked || appState.activeTool.type === \"freedraw\") && element\n            ? appState.activeTool\n            : activeTool,\n        activeEmbeddable: null,\n        newElement: null,\n        selectionElement: null,\n        multiElement: null,\n        editingTextElement: null,\n        startBoundElement: null,\n        suggestedBinding: null,\n        selectedElementIds:\n          element && !appState.activeTool.locked && appState.activeTool.type !== \"freedraw\"\n            ? {\n                ...appState.selectedElementIds,\n                [element.id]: true,\n              }\n            : appState.selectedElementIds,\n\n        selectedLinearElement,\n      },\n      // TODO: #7348 we should not capture everything, but if we don't, it leads to incosistencies -> revisit\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event, appState) =>\n    (event.key === KEYS.ESCAPE &&\n      (appState.selectedLinearElement?.isEditing ||\n        (!appState.newElement && appState.multiElement === null))) ||\n    ((event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) && appState.multiElement !== null),\n  PanelComponent: ({ appState, updateData, data }) => (\n    <ToolButton\n      type=\"button\"\n      icon={done}\n      title={t(\"buttons.done\")}\n      aria-label={t(\"buttons.done\")}\n      onClick={updateData}\n      visible={appState.multiElement != null}\n      size={data?.size || \"medium\"}\n      style={{ pointerEvents: \"all\" }}\n    />\n  ),\n});\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./TextInput.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./TextInput.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ProjectName.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ProjectName.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useState } from \"react\";\nimport { focusNearestParent, KEYS } from \"@jsondraw/common\";\nimport { useJsonDrawContainer } from \"../App\";\nimport \"../ui/TextInput.scss\";\nimport \"./ProjectName.scss\";\n\ntype Props = {\n  value: string;\n  onChange: (value: string) => void;\n  label: string;\n  ignoreFocus?: boolean;\n};\n\nexport const ProjectName = (props: Props) => {\n  const { id } = useJsonDrawContainer();\n  const [fileName, setFileName] = useState<string>(props.value);\n\n  const handleBlur = (event: any) => {\n    if (!props.ignoreFocus) {\n      focusNearestParent(event.target);\n    }\n    const value = event.target.value;\n    if (value !== props.value) {\n      props.onChange(value);\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLElement>) => {\n    if (event.key === KEYS.ENTER) {\n      event.preventDefault();\n      if (event.nativeEvent.isComposing || event.keyCode === 229) {\n        return;\n      }\n      event.currentTarget.blur();\n    }\n  };\n\n  return (\n    <div className=\"ProjectName\">\n      <label className=\"ProjectName-label\" htmlFor=\"filename\">\n        {`${props.label}:`}\n      </label>\n      <input\n        type=\"text\"\n        className=\"TextInput\"\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n        id={`${id}-filename`}\n        value={fileName}\n        onChange={event => setFileName(event.target.value)}\n      />\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./CheckboxItem.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./CheckboxItem.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport clsx from \"clsx\";\nimport { checkIcon } from \"../icons\";\nimport \"./CheckboxItem.scss\";\n\nexport const CheckboxItem: React.FC<{\n  checked: boolean;\n  onChange: (checked: boolean, event: React.MouseEvent) => void;\n  className?: string;\n  children?: React.ReactNode;\n}> = ({ children, checked, onChange, className }) => {\n  return (\n    <div\n      className={clsx(\"Checkbox\", className, { \"is-checked\": checked })}\n      onClick={event => {\n        onChange(!checked, event);\n        (\n          (event.currentTarget as HTMLDivElement).querySelector(\n            \".Checkbox-box\"\n          ) as HTMLButtonElement\n        ).focus();\n      }}\n    >\n      <button type=\"button\" className=\"Checkbox-box\" role=\"checkbox\" aria-checked={checked}>\n        {checkIcon}\n      </button>\n      <div className=\"Checkbox-label\">{children}</div>\n    </div>\n  );\n};\n","import { THEME } from \"@jsondraw/common\";\nimport type { Theme } from \"@jsondraw/element/types\";\nimport { t } from \"../../i18n\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport \"../toolbar/ToolIcon.scss\";\n\n// We chose to use only explicit toggle and not a third option for system value,\n// but this could be added in the future.\nexport const DarkModeToggle = (props: {\n  value: Theme;\n  onChange: (value: Theme) => void;\n  title?: string;\n}) => {\n  const title =\n    props.title || (props.value === THEME.DARK ? t(\"buttons.lightMode\") : t(\"buttons.darkMode\"));\n\n  return (\n    <ToolButton\n      type=\"icon\"\n      icon={props.value === THEME.LIGHT ? ICONS.MOON : ICONS.SUN}\n      title={title}\n      aria-label={title}\n      onClick={() => props.onChange(props.value === THEME.DARK ? THEME.LIGHT : THEME.DARK)}\n      data-testid=\"toggle-dark-mode\"\n    />\n  );\n};\n\nconst ICONS = {\n  SUN: (\n    <svg width=\"512\" height=\"512\" className=\"rtl-mirror\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z\"\n      ></path>\n    </svg>\n  ),\n  MOON: (\n    <svg width=\"512\" height=\"512\" className=\"rtl-mirror\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z\"\n      ></path>\n    </svg>\n  ),\n};\n","import type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { getFileHandleType, isImageFileHandleType } from \"./blob\";\n\nimport { exportCanvas, prepareElementsForExport } from \".\";\n\nimport type { AppState, BinaryFiles } from \"../types\";\n\nexport const resaveAsImageWithScene = async (\n  elements: readonly JsonDrawElement[],\n  appState: AppState,\n  files: BinaryFiles,\n  name: string,\n) => {\n  const { exportBackground, viewBackgroundColor, fileHandle } = appState;\n\n  const fileHandleType = getFileHandleType(fileHandle);\n\n  if (!fileHandle || !isImageFileHandleType(fileHandleType)) {\n    throw new Error(\n      \"fileHandle should exist and should be of type svg or png when resaving\",\n    );\n  }\n  appState = {\n    ...appState,\n    exportEmbedScene: true,\n  };\n\n  const { exportedElements, exportingFrame } = prepareElementsForExport(\n    elements,\n    appState,\n    false,\n  );\n\n  await exportCanvas(fileHandleType, exportedElements, appState, files, {\n    exportBackground,\n    viewBackgroundColor,\n    name,\n    fileHandle,\n    exportingFrame,\n  });\n\n  return { fileHandle };\n};\n","import { KEYS, DEFAULT_EXPORT_PADDING, EXPORT_SCALES, THEME } from \"@jsondraw/common\";\nimport { getNonDeletedElements } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport type { Theme } from \"@jsondraw/element/types\";\nimport { useEditorInterface } from \"../components/App\";\nimport { ProjectName } from \"../components/branding/ProjectName\";\nimport { ExportIcon, questionCircle, saveAs } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport \"../components/toolbar/ToolIcon.scss\";\nimport { CheckboxItem } from \"../components/ui/CheckboxItem\";\nimport { DarkModeToggle } from \"../components/ui/DarkModeToggle\";\nimport { Tooltip } from \"../components/ui/Tooltip\";\nimport { loadFromJSON, saveAsJSON } from \"../data\";\nimport { isImageFileHandle } from \"../data/blob\";\nimport { nativeFileSystemSupported } from \"../data/filesystem\";\nimport { resaveAsImageWithScene } from \"../data/resave\";\nimport { t } from \"../i18n\";\nimport { getSelectedElements, isSomeElementSelected } from \"../scene\";\nimport { getExportSize } from \"../scene/export\";\nimport type { AppState } from \"../types\";\nimport { register } from \"./register\";\n\nexport const actionChangeProjectName = register<AppState[\"name\"]>({\n  name: \"changeProjectName\",\n  label: \"labels.fileTitle\",\n  trackEvent: false,\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, name: value },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ appState, updateData, appProps, data, app }) => (\n    <ProjectName\n      label={t(\"labels.fileTitle\")}\n      value={app.getName()}\n      onChange={(name: string) => updateData(name)}\n      ignoreFocus={data?.ignoreFocus ?? false}\n    />\n  ),\n});\n\nexport const actionChangeExportScale = register<AppState[\"exportScale\"]>({\n  name: \"changeExportScale\",\n  label: \"imageExportDialog.scale\",\n  trackEvent: { category: \"export\", action: \"scale\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportScale: value },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ elements: allElements, appState, updateData }) => {\n    const elements = getNonDeletedElements(allElements);\n    const exportSelected = isSomeElementSelected(elements, appState);\n    const exportedElements = exportSelected ? getSelectedElements(elements, appState) : elements;\n\n    return (\n      <>\n        {EXPORT_SCALES.map(s => {\n          const [width, height] = getExportSize(exportedElements, DEFAULT_EXPORT_PADDING, s);\n\n          const scaleButtonTitle = `${t(\n            \"imageExportDialog.label.scale\"\n          )} ${s}x (${width}x${height})`;\n\n          return (\n            <ToolButton\n              key={s}\n              size=\"small\"\n              type=\"radio\"\n              icon={`${s}x`}\n              name=\"export-canvas-scale\"\n              title={scaleButtonTitle}\n              aria-label={scaleButtonTitle}\n              id=\"export-canvas-scale\"\n              checked={s === appState.exportScale}\n              onChange={() => updateData(s)}\n            />\n          );\n        })}\n      </>\n    );\n  },\n});\n\nexport const actionChangeExportBackground = register<AppState[\"exportBackground\"]>({\n  name: \"changeExportBackground\",\n  label: \"imageExportDialog.label.withBackground\",\n  trackEvent: { category: \"export\", action: \"toggleBackground\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportBackground: value },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <CheckboxItem checked={appState.exportBackground} onChange={checked => updateData(checked)}>\n      {t(\"imageExportDialog.label.withBackground\")}\n    </CheckboxItem>\n  ),\n});\n\nexport const actionChangeExportEmbedScene = register<AppState[\"exportEmbedScene\"]>({\n  name: \"changeExportEmbedScene\",\n  label: \"imageExportDialog.tooltip.embedScene\",\n  trackEvent: { category: \"export\", action: \"embedScene\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportEmbedScene: value },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <CheckboxItem checked={appState.exportEmbedScene} onChange={checked => updateData(checked)}>\n      {t(\"imageExportDialog.label.embedScene\")}\n      <Tooltip label={t(\"imageExportDialog.tooltip.embedScene\")} long={true}>\n        <div className=\"jsondraw-tooltip-icon\">{questionCircle}</div>\n      </Tooltip>\n    </CheckboxItem>\n  ),\n});\n\nexport const actionSaveToActiveFile = register({\n  name: \"saveToActiveFile\",\n  label: \"buttons.save\",\n  icon: ExportIcon,\n  trackEvent: { category: \"export\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.saveToActiveFile &&\n      !!appState.fileHandle &&\n      !appState.viewModeEnabled\n    );\n  },\n  perform: async (elements, appState, value, app) => {\n    const fileHandleExists = !!appState.fileHandle;\n\n    try {\n      const { fileHandle } = isImageFileHandle(appState.fileHandle)\n        ? await resaveAsImageWithScene(elements, appState, app.files, app.getName())\n        : await saveAsJSON(elements, appState, app.files, app.getName());\n\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        appState: {\n          ...appState,\n          fileHandle,\n          toast: fileHandleExists\n            ? {\n                message: fileHandle?.name\n                  ? t(\"toast.fileSavedToFilename\").replace(\"{filename}\", `\"${fileHandle.name}\"`)\n                  : t(\"toast.fileSaved\"),\n              }\n            : null,\n        },\n      };\n    } catch (error: any) {\n      if (error?.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      return { captureUpdate: CaptureUpdateAction.EVENTUALLY };\n    }\n  },\n  keyTest: event => event.key === KEYS.S && event[KEYS.CTRL_OR_CMD] && !event.shiftKey,\n});\n\nexport const actionSaveFileToDisk = register({\n  name: \"saveFileToDisk\",\n  label: \"exportDialog.disk_title\",\n  icon: ExportIcon,\n  viewMode: true,\n  trackEvent: { category: \"export\" },\n  perform: async (elements, appState, value, app) => {\n    try {\n      const { fileHandle } = await saveAsJSON(\n        elements,\n        {\n          ...appState,\n          fileHandle: null,\n        },\n        app.files,\n        app.getName()\n      );\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        appState: {\n          ...appState,\n          openDialog: null,\n          fileHandle,\n          toast: { message: t(\"toast.fileSaved\") },\n        },\n      };\n    } catch (error: any) {\n      if (error?.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      return { captureUpdate: CaptureUpdateAction.EVENTUALLY };\n    }\n  },\n  keyTest: event => event.key === KEYS.S && event.shiftKey && event[KEYS.CTRL_OR_CMD],\n  PanelComponent: ({ updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={saveAs}\n      title={t(\"buttons.saveAs\")}\n      aria-label={t(\"buttons.saveAs\")}\n      showAriaLabel={useEditorInterface().formFactor === \"phone\"}\n      hidden={!nativeFileSystemSupported}\n      onClick={() => updateData(null)}\n      data-testid=\"save-as-button\"\n    />\n  ),\n});\n\nexport const actionLoadScene = register({\n  name: \"loadScene\",\n  label: \"buttons.load\",\n  trackEvent: { category: \"export\" },\n  predicate: (elements, appState, props, app) => {\n    return !!app.props.UIOptions.canvasActions.loadScene && !appState.viewModeEnabled;\n  },\n  perform: async (elements, appState, _, app) => {\n    try {\n      const {\n        elements: loadedElements,\n        appState: loadedAppState,\n        files,\n      } = await loadFromJSON(appState, elements);\n      return {\n        elements: loadedElements,\n        appState: loadedAppState,\n        files,\n        captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n      };\n    } catch (error: any) {\n      if (error?.name === \"AbortError\") {\n        console.warn(error);\n        return false;\n      }\n      return {\n        elements,\n        appState: { ...appState, errorMessage: error.message },\n        files: app.files,\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n  },\n  keyTest: event => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.O,\n});\n\nexport const actionExportWithDarkMode = register<AppState[\"exportWithDarkMode\"]>({\n  name: \"exportWithDarkMode\",\n  label: \"imageExportDialog.label.darkMode\",\n  trackEvent: { category: \"export\", action: \"toggleTheme\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportWithDarkMode: value },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        marginTop: \"-45px\",\n        marginBottom: \"10px\",\n      }}\n    >\n      <DarkModeToggle\n        value={appState.exportWithDarkMode ? THEME.DARK : THEME.LIGHT}\n        onChange={(theme: Theme) => {\n          updateData(theme === THEME.DARK);\n        }}\n        title={t(\"imageExportDialog.label.darkMode\")}\n      />\n    </div>\n  ),\n});\n","import {\n  DEFAULT_FONT_SIZE,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_TEXT_ALIGN,\n  CODES,\n  KEYS,\n  getLineHeight,\n} from \"@jsondraw/common\";\n\nimport { newElementWith } from \"@jsondraw/element\";\n\nimport {\n  hasBoundTextElement,\n  canApplyRoundnessTypeToElement,\n  getDefaultRoundnessTypeForElement,\n  isFrameLikeElement,\n  isArrowElement,\n  isJsonDrawElement,\n  isTextElement,\n} from \"@jsondraw/element\";\n\nimport {\n  getBoundTextElement,\n  redrawTextBoundingBox,\n} from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type { JsonDrawTextElement } from \"@jsondraw/element/types\";\n\nimport { paintIcon } from \"../components/icons\";\n\nimport { t } from \"../i18n\";\nimport { getSelectedElements } from \"../scene\";\n\nimport { register } from \"./register\";\n\n// `copiedStyles` is exported only for tests.\nexport let copiedStyles: string = \"{}\";\n\nexport const actionCopyStyles = register({\n  name: \"copyStyles\",\n  label: \"labels.copyStyles\",\n  icon: paintIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, formData, app) => {\n    const elementsCopied = [];\n    const element = elements.find((el) => appState.selectedElementIds[el.id]);\n    elementsCopied.push(element);\n    if (element && hasBoundTextElement(element)) {\n      const boundTextElement = getBoundTextElement(\n        element,\n        app.scene.getNonDeletedElementsMap(),\n      );\n      elementsCopied.push(boundTextElement);\n    }\n    if (element) {\n      copiedStyles = JSON.stringify(elementsCopied);\n    }\n    return {\n      appState: {\n        ...appState,\n        toast: { message: t(\"toast.copyStyles\") },\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.C,\n});\n\nexport const actionPasteStyles = register({\n  name: \"pasteStyles\",\n  label: \"labels.pasteStyles\",\n  icon: paintIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, formData, app) => {\n    const elementsCopied = JSON.parse(copiedStyles);\n    const pastedElement = elementsCopied[0];\n    const boundTextElement = elementsCopied[1];\n    if (!isJsonDrawElement(pastedElement)) {\n      return { elements, captureUpdate: CaptureUpdateAction.EVENTUALLY };\n    }\n\n    const selectedElements = getSelectedElements(elements, appState, {\n      includeBoundTextElement: true,\n    });\n    const selectedElementIds = selectedElements.map((element) => element.id);\n    return {\n      elements: elements.map((element) => {\n        if (selectedElementIds.includes(element.id)) {\n          let elementStylesToCopyFrom = pastedElement;\n          if (isTextElement(element) && element.containerId) {\n            elementStylesToCopyFrom = boundTextElement;\n          }\n          if (!elementStylesToCopyFrom) {\n            return element;\n          }\n          let newElement = newElementWith(element, {\n            backgroundColor: elementStylesToCopyFrom?.backgroundColor,\n            strokeWidth: elementStylesToCopyFrom?.strokeWidth,\n            strokeColor: elementStylesToCopyFrom?.strokeColor,\n            strokeStyle: elementStylesToCopyFrom?.strokeStyle,\n            fillStyle: elementStylesToCopyFrom?.fillStyle,\n            opacity: elementStylesToCopyFrom?.opacity,\n            roughness: elementStylesToCopyFrom?.roughness,\n            roundness: elementStylesToCopyFrom.roundness\n              ? canApplyRoundnessTypeToElement(\n                  elementStylesToCopyFrom.roundness.type,\n                  element,\n                )\n                ? elementStylesToCopyFrom.roundness\n                : getDefaultRoundnessTypeForElement(element)\n              : null,\n          });\n\n          if (isTextElement(newElement)) {\n            const fontSize =\n              (elementStylesToCopyFrom as JsonDrawTextElement).fontSize ||\n              DEFAULT_FONT_SIZE;\n            const fontFamily =\n              (elementStylesToCopyFrom as JsonDrawTextElement).fontFamily ||\n              DEFAULT_FONT_FAMILY;\n            newElement = newElementWith(newElement, {\n              fontSize,\n              fontFamily,\n              textAlign:\n                (elementStylesToCopyFrom as JsonDrawTextElement).textAlign ||\n                DEFAULT_TEXT_ALIGN,\n              lineHeight:\n                (elementStylesToCopyFrom as JsonDrawTextElement).lineHeight ||\n                getLineHeight(fontFamily),\n            });\n            let container = null;\n            if (newElement.containerId) {\n              container =\n                selectedElements.find(\n                  (element) =>\n                    isTextElement(newElement) &&\n                    element.id === newElement.containerId,\n                ) || null;\n            }\n\n            redrawTextBoundingBox(newElement, container, app.scene);\n          }\n\n          if (\n            newElement.type === \"arrow\" &&\n            isArrowElement(elementStylesToCopyFrom)\n          ) {\n            newElement = newElementWith(newElement, {\n              startArrowhead: elementStylesToCopyFrom.startArrowhead,\n              endArrowhead: elementStylesToCopyFrom.endArrowhead,\n            });\n          }\n\n          if (isFrameLikeElement(element)) {\n            newElement = newElementWith(newElement, {\n              roundness: null,\n              backgroundColor: \"transparent\",\n            });\n          }\n\n          return newElement;\n        }\n        return element;\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.V,\n});\n","import { KEYS } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { HelpIconThin } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nexport const actionShortcuts = register({\n  name: \"toggleShortcuts\",\n  label: \"welcomeScreen.defaults.helpHint\",\n  icon: HelpIconThin,\n  viewMode: true,\n  trackEvent: { category: \"menu\", action: \"toggleHelpDialog\" },\n  perform: (_elements, appState, _, { focusContainer }) => {\n    if (appState.openDialog?.name === \"help\") {\n      focusContainer();\n    }\n    return {\n      appState: {\n        ...appState,\n        openDialog:\n          appState.openDialog?.name === \"help\"\n            ? null\n            : {\n                name: \"help\",\n              },\n        openMenu: null,\n        openPopup: null,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  keyTest: (event) => event.key === KEYS.QUESTION_MARK,\n});\n","import { KEYS, randomId, arrayToMap } from \"@jsondraw/common\";\nimport { getNonDeletedElements } from \"@jsondraw/element\";\nimport { newElementWith } from \"@jsondraw/element\";\nimport { isBoundToContainer } from \"@jsondraw/element\";\nimport {\n  frameAndChildrenSelectedTogether,\n  getElementsInResizingFrame,\n  getFrameLikeElements,\n  getRootElements,\n  groupByFrameLikes,\n  removeElementsFromFrame,\n  replaceAllElementsInFrame,\n} from \"@jsondraw/element\";\nimport {\n  getSelectedGroupIds,\n  selectGroup,\n  selectGroupsForSelectedElements,\n  getElementsInGroup,\n  addToGroup,\n  removeFromSelectedGroups,\n  isElementInGroup,\n} from \"@jsondraw/element\";\nimport { syncMovedIndices } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport type {\n  JsonDrawElement,\n  JsonDrawTextElement,\n  OrderedJsonDrawElement,\n} from \"@jsondraw/element/types\";\nimport { UngroupIcon, GroupIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { t } from \"../i18n\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { getShortcutKey } from \"../shortcut\";\nimport type { AppClassProperties, AppState } from \"../types\";\nimport { register } from \"./register\";\n\nconst allElementsInSameGroup = (elements: readonly JsonDrawElement[]) => {\n  if (elements.length >= 2) {\n    const groupIds = elements[0].groupIds;\n    for (const groupId of groupIds) {\n      if (elements.reduce((acc, element) => acc && isElementInGroup(element, groupId), true)) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nconst enableActionGroup = (\n  elements: readonly JsonDrawElement[],\n  appState: AppState,\n  app: AppClassProperties\n) => {\n  const selectedElements = app.scene.getSelectedElements({\n    selectedElementIds: appState.selectedElementIds,\n    includeBoundTextElement: true,\n  });\n\n  return (\n    selectedElements.length >= 2 &&\n    !allElementsInSameGroup(selectedElements) &&\n    !frameAndChildrenSelectedTogether(selectedElements)\n  );\n};\n\nexport const actionGroup = register({\n  name: \"group\",\n  label: \"labels.group\",\n  icon: appState => <GroupIcon theme={appState.theme} />,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = getRootElements(\n      app.scene.getSelectedElements({\n        selectedElementIds: appState.selectedElementIds,\n        includeBoundTextElement: true,\n      })\n    );\n    if (selectedElements.length < 2) {\n      // nothing to group\n      return {\n        appState,\n        elements,\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n    // if everything is already grouped into 1 group, there is nothing to do\n    const selectedGroupIds = getSelectedGroupIds(appState);\n    if (selectedGroupIds.length === 1) {\n      const selectedGroupId = selectedGroupIds[0];\n      const elementIdsInGroup = new Set(\n        getElementsInGroup(elements, selectedGroupId).map(element => element.id)\n      );\n      const selectedElementIds = new Set(selectedElements.map(element => element.id));\n      const combinedSet = new Set([\n        ...Array.from(elementIdsInGroup),\n        ...Array.from(selectedElementIds),\n      ]);\n      if (combinedSet.size === elementIdsInGroup.size) {\n        // no incremental ids in the selected ids\n        return {\n          appState,\n          elements,\n          captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        };\n      }\n    }\n\n    let nextElements = [...elements];\n\n    // this includes the case where we are grouping elements inside a frame\n    // and elements outside that frame\n    const groupingElementsFromDifferentFrames =\n      new Set(selectedElements.map(element => element.frameId)).size > 1;\n    // when it happens, we want to remove elements that are in the frame\n    // and are going to be grouped from the frame (mouthful, I know)\n    if (groupingElementsFromDifferentFrames) {\n      const frameElementsMap = groupByFrameLikes(selectedElements);\n\n      frameElementsMap.forEach((elementsInFrame, frameId) => {\n        removeElementsFromFrame(elementsInFrame, app.scene.getNonDeletedElementsMap());\n      });\n    }\n\n    const newGroupId = randomId();\n    const selectElementIds = arrayToMap(selectedElements);\n\n    nextElements = nextElements.map(element => {\n      if (!selectElementIds.get(element.id)) {\n        return element;\n      }\n      return newElementWith(element, {\n        groupIds: addToGroup(element.groupIds, newGroupId, appState.editingGroupId),\n      });\n    });\n    // keep the z order within the group the same, but move them\n    // to the z order of the highest element in the layer stack\n    const elementsInGroup = getElementsInGroup(nextElements, newGroupId);\n    const lastElementInGroup = elementsInGroup[elementsInGroup.length - 1];\n    const lastGroupElementIndex = nextElements.lastIndexOf(\n      lastElementInGroup as OrderedJsonDrawElement\n    );\n    const elementsAfterGroup = nextElements.slice(lastGroupElementIndex + 1);\n    const elementsBeforeGroup = nextElements\n      .slice(0, lastGroupElementIndex)\n      .filter(updatedElement => !isElementInGroup(updatedElement, newGroupId));\n    const reorderedElements = syncMovedIndices(\n      [...elementsBeforeGroup, ...elementsInGroup, ...elementsAfterGroup],\n      arrayToMap(elementsInGroup)\n    );\n\n    return {\n      appState: {\n        ...appState,\n        ...selectGroup(\n          newGroupId,\n          { ...appState, selectedGroupIds: {} },\n          getNonDeletedElements(nextElements)\n        ),\n      },\n      elements: reorderedElements,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  predicate: (elements, appState, _, app) => enableActionGroup(elements, appState, app),\n  keyTest: event => !event.shiftKey && event[KEYS.CTRL_OR_CMD] && event.key === KEYS.G,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(elements, appState, app)}\n      type=\"button\"\n      icon={<GroupIcon theme={appState.theme} />}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.group\")}  ${getShortcutKey(\"CtrlOrCmd+G\")}`}\n      aria-label={t(\"labels.group\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    ></ToolButton>\n  ),\n});\n\nexport const actionUngroup = register({\n  name: \"ungroup\",\n  label: \"labels.ungroup\",\n  icon: appState => <UngroupIcon theme={appState.theme} />,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const groupIds = getSelectedGroupIds(appState);\n    const elementsMap = arrayToMap(elements);\n\n    if (groupIds.length === 0) {\n      return {\n        appState,\n        elements,\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n\n    let nextElements = [...elements];\n\n    const boundTextElementIds: JsonDrawTextElement[\"id\"][] = [];\n    nextElements = nextElements.map(element => {\n      if (isBoundToContainer(element)) {\n        boundTextElementIds.push(element.id);\n      }\n      const nextGroupIds = removeFromSelectedGroups(element.groupIds, appState.selectedGroupIds);\n      if (nextGroupIds.length === element.groupIds.length) {\n        return element;\n      }\n      return newElementWith(element, {\n        groupIds: nextGroupIds,\n      });\n    });\n\n    const updateAppState = selectGroupsForSelectedElements(\n      appState,\n      getNonDeletedElements(nextElements),\n      appState,\n      null\n    );\n\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    const selectedElementFrameIds = new Set(\n      selectedElements.filter(element => element.frameId).map(element => element.frameId!)\n    );\n\n    const targetFrames = getFrameLikeElements(elements).filter(frame =>\n      selectedElementFrameIds.has(frame.id)\n    );\n\n    targetFrames.forEach(frame => {\n      if (frame) {\n        nextElements = replaceAllElementsInFrame(\n          nextElements,\n          getElementsInResizingFrame(nextElements, frame, appState, elementsMap),\n          frame,\n          app\n        );\n      }\n    });\n\n    // remove binded text elements from selection\n    updateAppState.selectedElementIds = Object.entries(updateAppState.selectedElementIds).reduce(\n      (acc: { [key: JsonDrawElement[\"id\"]]: true }, [id, selected]) => {\n        if (selected && !boundTextElementIds.includes(id)) {\n          acc[id] = true;\n        }\n        return acc;\n      },\n      {}\n    );\n\n    return {\n      appState: { ...appState, ...updateAppState },\n      elements: nextElements,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: event => event.shiftKey && event[KEYS.CTRL_OR_CMD] && event.key === KEYS.G.toUpperCase(),\n  predicate: (elements, appState) => getSelectedGroupIds(appState).length > 0,\n\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <ToolButton\n      type=\"button\"\n      hidden={getSelectedGroupIds(appState).length === 0}\n      icon={<UngroupIcon theme={appState.theme} />}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.ungroup\")}  ${getShortcutKey(\"CtrlOrCmd+Shift+G\")}`}\n      aria-label={t(\"labels.ungroup\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    ></ToolButton>\n  ),\n});\n","/**\n * https://stackoverflow.com/a/3368118\n * Draws a rounded rectangle using the current state of the canvas.\n * @param {CanvasRenderingContext2D} context\n * @param {Number} x The top left x coordinate\n * @param {Number} y The top left y coordinate\n * @param {Number} width The width of the rectangle\n * @param {Number} height The height of the rectangle\n * @param {Number} radius The corner radius\n */\nexport const roundRect = (\n  context: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number,\n  strokeColor?: string,\n) => {\n  context.beginPath();\n  context.moveTo(x + radius, y);\n  context.lineTo(x + width - radius, y);\n  context.quadraticCurveTo(x + width, y, x + width, y + radius);\n  context.lineTo(x + width, y + height - radius);\n  context.quadraticCurveTo(\n    x + width,\n    y + height,\n    x + width - radius,\n    y + height,\n  );\n  context.lineTo(x + radius, y + height);\n  context.quadraticCurveTo(x, y + height, x, y + height - radius);\n  context.lineTo(x, y + radius);\n  context.quadraticCurveTo(x, y, x + radius, y);\n  context.closePath();\n  context.fill();\n  if (strokeColor) {\n    context.strokeStyle = strokeColor;\n  }\n  context.stroke();\n};\n","import {\n  COLOR_CHARCOAL_BLACK,\n  COLOR_VOICE_CALL,\n  COLOR_WHITE,\n  THEME,\n  UserIdleState,\n} from \"@jsondraw/common\";\n\nimport { roundRect } from \"./renderer/roundRect\";\n\nimport type { InteractiveCanvasRenderConfig } from \"./scene/types\";\nimport type {\n  Collaborator,\n  InteractiveCanvasAppState,\n  SocketId,\n} from \"./types\";\n\nfunction hashToInteger(id: string) {\n  let hash = 0;\n  if (id.length === 0) {\n    return hash;\n  }\n  for (let i = 0; i < id.length; i++) {\n    const char = id.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n  }\n  return hash;\n}\n\nexport const getClientColor = (\n  socketId: SocketId,\n  collaborator: Collaborator | undefined,\n) => {\n  // to get more even distribution in case `id` is not uniformly distributed to\n  // begin with, we hash it\n  const hash = Math.abs(hashToInteger(collaborator?.id || socketId));\n  // we want to get a multiple of 10 number in the range of 0-360 (in other\n  // words a hue value of step size 10). There are 37 such values including 0.\n  const hue = (hash % 37) * 10;\n  const saturation = 100;\n  const lightness = 83;\n\n  return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\n};\n\n/**\n * returns first char, capitalized\n */\nexport const getNameInitial = (name?: string | null) => {\n  // first char can be a surrogate pair, hence using codePointAt\n  const firstCodePoint = name?.trim()?.codePointAt(0);\n  return (\n    firstCodePoint ? String.fromCodePoint(firstCodePoint) : \"?\"\n  ).toUpperCase();\n};\n\nexport const renderRemoteCursors = ({\n  context,\n  renderConfig,\n  appState,\n  normalizedWidth,\n  normalizedHeight,\n}: {\n  context: CanvasRenderingContext2D;\n  renderConfig: InteractiveCanvasRenderConfig;\n  appState: InteractiveCanvasAppState;\n  normalizedWidth: number;\n  normalizedHeight: number;\n}) => {\n  // Paint remote pointers\n  for (const [socketId, pointer] of renderConfig.remotePointerViewportCoords) {\n    let { x, y } = pointer;\n\n    const collaborator = appState.collaborators.get(socketId);\n\n    x -= appState.offsetLeft;\n    y -= appState.offsetTop;\n\n    const width = 11;\n    const height = 14;\n\n    const isOutOfBounds =\n      x < 0 ||\n      x > normalizedWidth - width ||\n      y < 0 ||\n      y > normalizedHeight - height;\n\n    x = Math.max(x, 0);\n    x = Math.min(x, normalizedWidth - width);\n    y = Math.max(y, 0);\n    y = Math.min(y, normalizedHeight - height);\n\n    const background = getClientColor(socketId, collaborator);\n\n    context.save();\n    context.strokeStyle = background;\n    context.fillStyle = background;\n\n    const userState = renderConfig.remotePointerUserStates.get(socketId);\n    const isInactive =\n      isOutOfBounds ||\n      userState === UserIdleState.IDLE ||\n      userState === UserIdleState.AWAY;\n\n    if (isInactive) {\n      context.globalAlpha = 0.3;\n    }\n\n    if (renderConfig.remotePointerButton.get(socketId) === \"down\") {\n      context.beginPath();\n      context.arc(x, y, 15, 0, 2 * Math.PI, false);\n      context.lineWidth = 3;\n      context.strokeStyle = \"#ffffff88\";\n      context.stroke();\n      context.closePath();\n\n      context.beginPath();\n      context.arc(x, y, 15, 0, 2 * Math.PI, false);\n      context.lineWidth = 1;\n      context.strokeStyle = background;\n      context.stroke();\n      context.closePath();\n    }\n\n    // TODO remove the dark theme color after we stop inverting canvas colors\n    const IS_SPEAKING_COLOR =\n      appState.theme === THEME.DARK ? \"#2f6330\" : COLOR_VOICE_CALL;\n\n    const isSpeaking = collaborator?.isSpeaking;\n\n    if (isSpeaking) {\n      // cursor outline for currently speaking user\n      context.fillStyle = IS_SPEAKING_COLOR;\n      context.strokeStyle = IS_SPEAKING_COLOR;\n      context.lineWidth = 10;\n      context.lineJoin = \"round\";\n      context.beginPath();\n      context.moveTo(x, y);\n      context.lineTo(x + 0, y + 14);\n      context.lineTo(x + 4, y + 9);\n      context.lineTo(x + 11, y + 8);\n      context.closePath();\n      context.stroke();\n      context.fill();\n    }\n\n    // Background (white outline) for arrow\n    context.fillStyle = COLOR_WHITE;\n    context.strokeStyle = COLOR_WHITE;\n    context.lineWidth = 6;\n    context.lineJoin = \"round\";\n    context.beginPath();\n    context.moveTo(x, y);\n    context.lineTo(x + 0, y + 14);\n    context.lineTo(x + 4, y + 9);\n    context.lineTo(x + 11, y + 8);\n    context.closePath();\n    context.stroke();\n    context.fill();\n\n    // Arrow\n    context.fillStyle = background;\n    context.strokeStyle = background;\n    context.lineWidth = 2;\n    context.lineJoin = \"round\";\n    context.beginPath();\n    if (isInactive) {\n      context.moveTo(x - 1, y - 1);\n      context.lineTo(x - 1, y + 15);\n      context.lineTo(x + 5, y + 10);\n      context.lineTo(x + 12, y + 9);\n      context.closePath();\n      context.fill();\n    } else {\n      context.moveTo(x, y);\n      context.lineTo(x + 0, y + 14);\n      context.lineTo(x + 4, y + 9);\n      context.lineTo(x + 11, y + 8);\n      context.closePath();\n      context.fill();\n      context.stroke();\n    }\n\n    const username = renderConfig.remotePointerUsernames.get(socketId) || \"\";\n\n    if (!isOutOfBounds && username) {\n      context.font = \"600 12px sans-serif\"; // font has to be set before context.measureText()\n\n      const offsetX = (isSpeaking ? x + 0 : x) + width / 2;\n      const offsetY = (isSpeaking ? y + 0 : y) + height + 2;\n      const paddingHorizontal = 5;\n      const paddingVertical = 3;\n      const measure = context.measureText(username);\n      const measureHeight =\n        measure.actualBoundingBoxDescent + measure.actualBoundingBoxAscent;\n      const finalHeight = Math.max(measureHeight, 12);\n\n      const boxX = offsetX - 1;\n      const boxY = offsetY - 1;\n      const boxWidth = measure.width + 2 + paddingHorizontal * 2 + 2;\n      const boxHeight = finalHeight + 2 + paddingVertical * 2 + 2;\n      if (context.roundRect) {\n        context.beginPath();\n        context.roundRect(boxX, boxY, boxWidth, boxHeight, 8);\n        context.fillStyle = background;\n        context.fill();\n        context.strokeStyle = COLOR_WHITE;\n        context.stroke();\n\n        if (isSpeaking) {\n          context.beginPath();\n          context.roundRect(boxX - 2, boxY - 2, boxWidth + 4, boxHeight + 4, 8);\n          context.strokeStyle = IS_SPEAKING_COLOR;\n          context.stroke();\n        }\n      } else {\n        roundRect(context, boxX, boxY, boxWidth, boxHeight, 8, COLOR_WHITE);\n      }\n      context.fillStyle = COLOR_CHARCOAL_BLACK;\n\n      context.fillText(\n        username,\n        offsetX + paddingHorizontal + 1,\n        offsetY +\n          paddingVertical +\n          measure.actualBoundingBoxAscent +\n          Math.floor((finalHeight - measureHeight) / 2) +\n          2,\n      );\n\n      // draw three vertical bars signalling someone is speaking\n      if (isSpeaking) {\n        context.fillStyle = IS_SPEAKING_COLOR;\n        const barheight = 8;\n        const margin = 8;\n        const gap = 5;\n        context.fillRect(\n          boxX + boxWidth + margin,\n          boxY + (boxHeight / 2 - barheight / 2),\n          2,\n          barheight,\n        );\n        context.fillRect(\n          boxX + boxWidth + margin + gap,\n          boxY + (boxHeight / 2 - (barheight * 2) / 2),\n          2,\n          barheight * 2,\n        );\n        context.fillRect(\n          boxX + boxWidth + margin + gap * 2,\n          boxY + (boxHeight / 2 - barheight / 2),\n          2,\n          barheight,\n        );\n      }\n    }\n\n    context.restore();\n    context.closePath();\n  }\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Avatar.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Avatar.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useState } from \"react\";\nimport clsx from \"clsx\";\nimport { getNameInitial } from \"../../clients\";\nimport \"./Avatar.scss\";\n\ntype AvatarProps = {\n  onClick: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  color: string;\n  name: string;\n  src?: string;\n  className?: string;\n};\n\nexport const Avatar = ({ color, onClick, name, src, className }: AvatarProps) => {\n  const shortName = getNameInitial(name);\n  const [error, setError] = useState(false);\n  const loadImg = !error && src;\n  const style = loadImg ? undefined : { background: color };\n  return (\n    <div className={clsx(\"Avatar\", className)} style={style} onClick={onClick}>\n      {loadImg ? (\n        <img\n          className=\"Avatar-img\"\n          src={src}\n          alt={shortName}\n          referrerPolicy=\"no-referrer\"\n          onError={() => setError(true)}\n        />\n      ) : (\n        shortName\n      )}\n    </div>\n  );\n};\n","import { invariant } from \"@jsondraw/common\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport clsx from \"clsx\";\nimport { getClientColor } from \"../clients\";\nimport { eyeIcon, microphoneIcon, microphoneMutedIcon } from \"../components/icons\";\nimport { Avatar } from \"../components/user/Avatar\";\nimport type { GoToCollaboratorComponentProps } from \"../components/user/UserList\";\nimport { t } from \"../i18n\";\nimport type { Collaborator } from \"../types\";\nimport { register } from \"./register\";\n\nexport const actionGoToCollaborator = register<Collaborator>({\n  name: \"goToCollaborator\",\n  label: \"Go to a collaborator\",\n  viewMode: true,\n  trackEvent: { category: \"collab\" },\n  perform: (_elements, appState, collaborator) => {\n    invariant(\n      collaborator,\n      \"actionGoToCollaborator: collaborator should be defined when actionGoToCollaborator is called\"\n    );\n\n    if (\n      !collaborator.socketId ||\n      appState.userToFollow?.socketId === collaborator.socketId ||\n      collaborator.isCurrentUser\n    ) {\n      return {\n        appState: {\n          ...appState,\n          userToFollow: null,\n        },\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n\n    return {\n      appState: {\n        ...appState,\n        userToFollow: {\n          socketId: collaborator.socketId,\n          username: collaborator.username || \"\",\n        },\n        // Close mobile menu\n        openMenu: appState.openMenu === \"canvas\" ? null : appState.openMenu,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  PanelComponent: ({ updateData, data, appState }) => {\n    const { socketId, collaborator, withName, isBeingFollowed } =\n      data as GoToCollaboratorComponentProps;\n\n    const background = getClientColor(socketId, collaborator);\n\n    const statusClassNames = clsx({\n      \"is-followed\": isBeingFollowed,\n      \"is-current-user\": collaborator.isCurrentUser === true,\n      \"is-speaking\": collaborator.isSpeaking,\n      \"is-in-call\": collaborator.isInCall,\n      \"is-muted\": collaborator.isMuted,\n    });\n\n    const statusIconJSX = collaborator.isInCall ? (\n      collaborator.isSpeaking ? (\n        <div\n          className=\"UserList__collaborator-status-icon-speaking-indicator\"\n          title={t(\"userList.hint.isSpeaking\")}\n        >\n          <div />\n          <div />\n          <div />\n        </div>\n      ) : collaborator.isMuted ? (\n        <div\n          className=\"UserList__collaborator-status-icon-microphone-muted\"\n          title={t(\"userList.hint.micMuted\")}\n        >\n          {microphoneMutedIcon}\n        </div>\n      ) : (\n        <div title={t(\"userList.hint.inCall\")}>{microphoneIcon}</div>\n      )\n    ) : null;\n\n    return withName ? (\n      <div\n        className={`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${statusClassNames}`}\n        style={{ [`--avatar-size` as any]: \"1.5rem\" }}\n        onClick={() => updateData<Collaborator>(collaborator)}\n      >\n        <Avatar\n          color={background}\n          onClick={() => {}}\n          name={collaborator.username || \"\"}\n          src={collaborator.avatarUrl}\n          className={statusClassNames}\n        />\n        <div className=\"UserList__collaborator-name\">{collaborator.username}</div>\n        <div className=\"UserList__collaborator-status-icons\" aria-hidden>\n          {isBeingFollowed && (\n            <div\n              className=\"UserList__collaborator-status-icon-is-followed\"\n              title={t(\"userList.hint.followStatus\")}\n            >\n              {eyeIcon}\n            </div>\n          )}\n          {statusIconJSX}\n        </div>\n      </div>\n    ) : (\n      <div\n        className={`UserList__collaborator UserList__collaborator--avatar-only ${statusClassNames}`}\n      >\n        <Avatar\n          color={background}\n          onClick={() => {\n            updateData(collaborator);\n          }}\n          name={collaborator.username || \"\"}\n          src={collaborator.avatarUrl}\n          className={statusClassNames}\n        />\n        {statusIconJSX && <div className=\"UserList__collaborator-status-icon\">{statusIconJSX}</div>}\n      </div>\n    );\n  },\n});\n","import { LIBRARY_DISABLED_TYPES, randomId } from \"@jsondraw/common\";\nimport { deepCopyElement } from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { t } from \"../i18n\";\n\nimport { register } from \"./register\";\n\nexport const actionAddToLibrary = register({\n  name: \"addToLibrary\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    for (const type of LIBRARY_DISABLED_TYPES) {\n      if (selectedElements.some((element) => element.type === type)) {\n        return {\n          captureUpdate: CaptureUpdateAction.EVENTUALLY,\n          appState: {\n            ...appState,\n            errorMessage: t(`errors.libraryElementTypeError.${type}`),\n          },\n        };\n      }\n    }\n\n    return app.library\n      .getLatestLibrary()\n      .then((items) => {\n        return app.library.setLibrary([\n          {\n            id: randomId(),\n            status: \"unpublished\",\n            elements: selectedElements.map(deepCopyElement),\n            created: Date.now(),\n          },\n          ...items,\n        ]);\n      })\n      .then(() => {\n        return {\n          captureUpdate: CaptureUpdateAction.EVENTUALLY,\n          appState: {\n            ...appState,\n            toast: { message: t(\"toast.addedToLibrary\") },\n          },\n        };\n      })\n      .catch((error) => {\n        return {\n          captureUpdate: CaptureUpdateAction.EVENTUALLY,\n          appState: {\n            ...appState,\n            errorMessage: error.message,\n          },\n        };\n      });\n  },\n  label: \"labels.addToLibrary\",\n});\n","import { getNonDeletedElements } from \"@jsondraw/element\";\n\nimport { isFrameLikeElement } from \"@jsondraw/element\";\n\nimport { updateFrameMembershipOfSelectedElements } from \"@jsondraw/element\";\n\nimport { KEYS, arrayToMap } from \"@jsondraw/common\";\n\nimport { alignElements } from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { getSelectedElementsByGroup } from \"@jsondraw/element\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { Alignment } from \"@jsondraw/element\";\n\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport {\n  AlignBottomIcon,\n  AlignLeftIcon,\n  AlignRightIcon,\n  AlignTopIcon,\n  CenterHorizontallyIcon,\n  CenterVerticallyIcon,\n} from \"../components/icons\";\n\nimport { t } from \"../i18n\";\n\nimport { isSomeElementSelected } from \"../scene\";\n\nimport { getShortcutKey } from \"../shortcut\";\n\nimport { register } from \"./register\";\n\nimport type { AppClassProperties, AppState, UIAppState } from \"../types\";\n\nexport const alignActionsPredicate = (\n  appState: UIAppState,\n  app: AppClassProperties,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n  return (\n    getSelectedElementsByGroup(\n      selectedElements,\n      app.scene.getNonDeletedElementsMap(),\n      appState as Readonly<AppState>,\n    ).length > 1 &&\n    // TODO enable aligning frames when implemented properly\n    !selectedElements.some((el) => isFrameLikeElement(el))\n  );\n};\n\nconst alignSelectedElements = (\n  elements: readonly JsonDrawElement[],\n  appState: Readonly<AppState>,\n  app: AppClassProperties,\n  alignment: Alignment,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  const updatedElements = alignElements(\n    selectedElements,\n    alignment,\n    app.scene,\n    appState,\n  );\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return updateFrameMembershipOfSelectedElements(\n    elements.map((element) => updatedElementsMap.get(element.id) || element),\n    appState,\n    app,\n  );\n};\n\nexport const actionAlignTop = register({\n  name: \"alignTop\",\n  label: \"labels.alignTop\",\n  icon: AlignTopIcon,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, appProps, app) =>\n    alignActionsPredicate(appState, app),\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"start\",\n        axis: \"y\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_UP,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(appState, app)}\n      type=\"button\"\n      icon={AlignTopIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignTop\")}  ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Up\",\n      )}`}\n      aria-label={t(\"labels.alignTop\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignBottom = register({\n  name: \"alignBottom\",\n  label: \"labels.alignBottom\",\n  icon: AlignBottomIcon,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, appProps, app) =>\n    alignActionsPredicate(appState, app),\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"end\",\n        axis: \"y\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_DOWN,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(appState, app)}\n      type=\"button\"\n      icon={AlignBottomIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignBottom\")}  ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Down\",\n      )}`}\n      aria-label={t(\"labels.alignBottom\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignLeft = register({\n  name: \"alignLeft\",\n  label: \"labels.alignLeft\",\n  icon: AlignLeftIcon,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, appProps, app) =>\n    alignActionsPredicate(appState, app),\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"start\",\n        axis: \"x\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_LEFT,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(appState, app)}\n      type=\"button\"\n      icon={AlignLeftIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignLeft\")}  ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Left\",\n      )}`}\n      aria-label={t(\"labels.alignLeft\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignRight = register({\n  name: \"alignRight\",\n  label: \"labels.alignRight\",\n  icon: AlignRightIcon,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, appProps, app) =>\n    alignActionsPredicate(appState, app),\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"end\",\n        axis: \"x\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_RIGHT,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(appState, app)}\n      type=\"button\"\n      icon={AlignRightIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignRight\")}  ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Right\",\n      )}`}\n      aria-label={t(\"labels.alignRight\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignVerticallyCentered = register({\n  name: \"alignVerticallyCentered\",\n  label: \"labels.centerVertically\",\n  icon: CenterVerticallyIcon,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, appProps, app) =>\n    alignActionsPredicate(appState, app),\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"center\",\n        axis: \"y\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(appState, app)}\n      type=\"button\"\n      icon={CenterVerticallyIcon}\n      onClick={() => updateData(null)}\n      title={t(\"labels.centerVertically\")}\n      aria-label={t(\"labels.centerVertically\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignHorizontallyCentered = register({\n  name: \"alignHorizontallyCentered\",\n  label: \"labels.centerHorizontally\",\n  icon: CenterHorizontallyIcon,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, appProps, app) =>\n    alignActionsPredicate(appState, app),\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"center\",\n        axis: \"x\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(appState, app)}\n      type=\"button\"\n      icon={CenterHorizontallyIcon}\n      onClick={() => updateData(null)}\n      title={t(\"labels.centerHorizontally\")}\n      aria-label={t(\"labels.centerHorizontally\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n","import { CODES, KEYS, arrayToMap } from \"@jsondraw/common\";\nimport { getNonDeletedElements } from \"@jsondraw/element\";\nimport { isFrameLikeElement } from \"@jsondraw/element\";\nimport { updateFrameMembershipOfSelectedElements } from \"@jsondraw/element\";\nimport { distributeElements } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport { getSelectedElementsByGroup } from \"@jsondraw/element\";\nimport type { Distribution } from \"@jsondraw/element\";\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\nimport { DistributeHorizontallyIcon, DistributeVerticallyIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { t } from \"../i18n\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { getShortcutKey } from \"../shortcut\";\nimport type { AppClassProperties, AppState } from \"../types\";\nimport { register } from \"./register\";\n\nconst enableActionGroup = (appState: AppState, app: AppClassProperties) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n  return (\n    getSelectedElementsByGroup(\n      selectedElements,\n      app.scene.getNonDeletedElementsMap(),\n      appState as Readonly<AppState>\n    ).length > 2 &&\n    // TODO enable distributing frames when implemented properly\n    !selectedElements.some(el => isFrameLikeElement(el))\n  );\n};\n\nconst distributeSelectedElements = (\n  elements: readonly JsonDrawElement[],\n  appState: Readonly<AppState>,\n  app: AppClassProperties,\n  distribution: Distribution\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  const updatedElements = distributeElements(\n    selectedElements,\n    app.scene.getNonDeletedElementsMap(),\n    distribution,\n    appState,\n    app.scene\n  );\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return updateFrameMembershipOfSelectedElements(\n    elements.map(element => updatedElementsMap.get(element.id) || element),\n    appState,\n    app\n  );\n};\n\nexport const distributeHorizontally = register({\n  name: \"distributeHorizontally\",\n  label: \"labels.distributeHorizontally\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: distributeSelectedElements(elements, appState, app, {\n        space: \"between\",\n        axis: \"x\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: event => !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.H,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(appState, app)}\n      type=\"button\"\n      icon={DistributeHorizontallyIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.distributeHorizontally\")}  ${getShortcutKey(\"Alt+H\")}`}\n      aria-label={t(\"labels.distributeHorizontally\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const distributeVertically = register({\n  name: \"distributeVertically\",\n  label: \"labels.distributeVertically\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: distributeSelectedElements(elements, appState, app, {\n        space: \"between\",\n        axis: \"y\",\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: event => !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.V,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(appState, app)}\n      type=\"button\"\n      icon={DistributeVerticallyIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.distributeVertically\")}  ${getShortcutKey(\"Alt+V\")}`}\n      aria-label={t(\"labels.distributeVertically\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n","import { getNonDeletedElements } from \"@jsondraw/element\";\nimport { bindOrUnbindBindingElements } from \"@jsondraw/element\";\nimport { getCommonBoundingBox } from \"@jsondraw/element\";\nimport { newElementWith } from \"@jsondraw/element\";\nimport { deepCopyElement } from \"@jsondraw/element\";\nimport { resizeMultipleElements } from \"@jsondraw/element\";\nimport { isArrowElement, isElbowArrow } from \"@jsondraw/element\";\nimport { updateFrameMembershipOfSelectedElements } from \"@jsondraw/element\";\nimport { CODES, KEYS, arrayToMap } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type {\n  JsonDrawArrowElement,\n  JsonDrawElbowArrowElement,\n  JsonDrawElement,\n  NonDeleted,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\n\nimport { getSelectedElements } from \"../scene\";\n\nimport { flipHorizontal, flipVertical } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nimport type { AppClassProperties, AppState } from \"../types\";\n\nexport const actionFlipHorizontal = register({\n  name: \"flipHorizontal\",\n  label: \"labels.flipHorizontal\",\n  icon: flipHorizontal,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      elements: updateFrameMembershipOfSelectedElements(\n        flipSelectedElements(\n          elements,\n          app.scene.getNonDeletedElementsMap(),\n          appState,\n          \"horizontal\",\n          app,\n        ),\n        appState,\n        app,\n      ),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) => event.shiftKey && event.code === CODES.H,\n});\n\nexport const actionFlipVertical = register({\n  name: \"flipVertical\",\n  label: \"labels.flipVertical\",\n  icon: flipVertical,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      elements: updateFrameMembershipOfSelectedElements(\n        flipSelectedElements(\n          elements,\n          app.scene.getNonDeletedElementsMap(),\n          appState,\n          \"vertical\",\n          app,\n        ),\n        appState,\n        app,\n      ),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event) =>\n    event.shiftKey && event.code === CODES.V && !event[KEYS.CTRL_OR_CMD],\n});\n\nconst flipSelectedElements = (\n  elements: readonly JsonDrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n  appState: Readonly<AppState>,\n  flipDirection: \"horizontal\" | \"vertical\",\n  app: AppClassProperties,\n) => {\n  const selectedElements = getSelectedElements(\n    getNonDeletedElements(elements),\n    appState,\n    {\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    },\n  );\n\n  const updatedElements = flipElements(\n    selectedElements,\n    elementsMap,\n    flipDirection,\n    app,\n  );\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return elements.map(\n    (element) => updatedElementsMap.get(element.id) || element,\n  );\n};\n\nconst flipElements = (\n  selectedElements: NonDeleted<JsonDrawElement>[],\n  elementsMap: NonDeletedSceneElementsMap,\n  flipDirection: \"horizontal\" | \"vertical\",\n  app: AppClassProperties,\n): JsonDrawElement[] => {\n  if (\n    selectedElements.every(\n      (element) =>\n        isArrowElement(element) && (element.startBinding || element.endBinding),\n    )\n  ) {\n    return selectedElements.map((element) => {\n      const _element = element as JsonDrawArrowElement;\n      return newElementWith(_element, {\n        startArrowhead: _element.endArrowhead,\n        endArrowhead: _element.startArrowhead,\n      });\n    });\n  }\n\n  const { midX, midY } = getCommonBoundingBox(selectedElements);\n\n  resizeMultipleElements(\n    selectedElements,\n    elementsMap,\n    \"nw\",\n    app.scene,\n    new Map(\n      Array.from(elementsMap.values()).map((element) => [\n        element.id,\n        deepCopyElement(element),\n      ]),\n    ),\n    {\n      flipByX: flipDirection === \"horizontal\",\n      flipByY: flipDirection === \"vertical\",\n      shouldResizeFromCenter: true,\n      shouldMaintainAspectRatio: true,\n    },\n  );\n\n  bindOrUnbindBindingElements(\n    selectedElements.filter(isArrowElement),\n    app.scene,\n    app.state,\n  );\n\n  // ---------------------------------------------------------------------------\n  // flipping arrow elements (and potentially other) makes the selection group\n  // \"move\" across the canvas because of how arrows can bump against the \"wall\"\n  // of the selection, so we need to center the group back to the original\n  // position so that repeated flips don't accumulate the offset\n\n  const { elbowArrows, otherElements } = selectedElements.reduce(\n    (\n      acc: {\n        elbowArrows: JsonDrawElbowArrowElement[];\n        otherElements: JsonDrawElement[];\n      },\n      element,\n    ) =>\n      isElbowArrow(element)\n        ? { ...acc, elbowArrows: acc.elbowArrows.concat(element) }\n        : { ...acc, otherElements: acc.otherElements.concat(element) },\n    { elbowArrows: [], otherElements: [] },\n  );\n\n  const { midX: newMidX, midY: newMidY } =\n    getCommonBoundingBox(selectedElements);\n  const [diffX, diffY] = [midX - newMidX, midY - newMidY];\n  otherElements.forEach((element) =>\n    app.scene.mutateElement(element, {\n      x: element.x + diffX,\n      y: element.y + diffY,\n    }),\n  );\n  elbowArrows.forEach((element) =>\n    app.scene.mutateElement(element, {\n      x: element.x + diffX,\n      y: element.y + diffY,\n    }),\n  );\n  // ---------------------------------------------------------------------------\n\n  return selectedElements;\n};\n","import { isTextElement } from \"@jsondraw/element\";\nimport { getTextFromElements } from \"@jsondraw/element\";\n\nimport { CODES, KEYS, isFirefox } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport {\n  copyTextToSystemClipboard,\n  copyToClipboard,\n  createPasteEvent,\n  probablySupportsClipboardBlob,\n  probablySupportsClipboardWriteText,\n  readSystemClipboard,\n} from \"../clipboard\";\nimport { DuplicateIcon, cutIcon, pngIcon, svgIcon } from \"../components/icons\";\nimport { exportCanvas, prepareElementsForExport } from \"../data/index\";\nimport { t } from \"../i18n\";\n\nimport { actionDeleteSelected } from \"./actionDeleteSelected\";\nimport { register } from \"./register\";\n\nexport const actionCopy = register<ClipboardEvent | null>({\n  name: \"copy\",\n  label: \"labels.copy\",\n  icon: DuplicateIcon,\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, event, app) => {\n    const elementsToCopy = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    try {\n      await copyToClipboard(elementsToCopy, app.files, event);\n    } catch (error: any) {\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        appState: {\n          ...appState,\n          errorMessage: error.message,\n        },\n      };\n    }\n\n    return {\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  // don't supply a shortcut since we handle this conditionally via onCopy event\n  keyTest: undefined,\n});\n\nexport const actionPaste = register({\n  name: \"paste\",\n  label: \"labels.paste\",\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, data, app) => {\n    let types;\n    try {\n      types = await readSystemClipboard();\n    } catch (error: any) {\n      if (error.name === \"AbortError\" || error.name === \"NotAllowedError\") {\n        // user probably aborted the action. Though not 100% sure, it's best\n        // to not annoy them with an error message.\n        return false;\n      }\n\n      console.error(`actionPaste ${error.name}: ${error.message}`);\n\n      if (isFirefox) {\n        return {\n          captureUpdate: CaptureUpdateAction.EVENTUALLY,\n          appState: {\n            ...appState,\n            errorMessage: t(\"hints.firefox_clipboard_write\"),\n          },\n        };\n      }\n\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        appState: {\n          ...appState,\n          errorMessage: t(\"errors.asyncPasteFailedOnRead\"),\n        },\n      };\n    }\n\n    try {\n      app.pasteFromClipboard(createPasteEvent({ types }));\n    } catch (error: any) {\n      console.error(error);\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        appState: {\n          ...appState,\n          errorMessage: t(\"errors.asyncPasteFailedOnParse\"),\n        },\n      };\n    }\n\n    return {\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  // don't supply a shortcut since we handle this conditionally via onCopy event\n  keyTest: undefined,\n});\n\nexport const actionCut = register<ClipboardEvent | null>({\n  name: \"cut\",\n  label: \"labels.cut\",\n  icon: cutIcon,\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, event, app) => {\n    actionCopy.perform(elements, appState, event, app);\n    return actionDeleteSelected.perform(elements, appState, null, app);\n  },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.X,\n});\n\nexport const actionCopyAsSvg = register({\n  name: \"copyAsSvg\",\n  label: \"labels.copyAsSvg\",\n  icon: svgIcon,\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, _data, app) => {\n    if (!app.canvas) {\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n\n    const { exportedElements, exportingFrame } = prepareElementsForExport(\n      elements,\n      appState,\n      true,\n    );\n\n    try {\n      await exportCanvas(\n        \"clipboard-svg\",\n        exportedElements,\n        appState,\n        app.files,\n        {\n          ...appState,\n          exportingFrame,\n          name: app.getName(),\n        },\n      );\n\n      const selectedElements = app.scene.getSelectedElements({\n        selectedElementIds: appState.selectedElementIds,\n        includeBoundTextElement: true,\n        includeElementsInFrames: true,\n      });\n\n      return {\n        appState: {\n          toast: {\n            message: t(\"toast.copyToClipboardAsSvg\", {\n              exportSelection: selectedElements.length\n                ? t(\"toast.selection\")\n                : t(\"toast.canvas\"),\n              exportColorScheme: appState.exportWithDarkMode\n                ? t(\"buttons.darkMode\")\n                : t(\"buttons.lightMode\"),\n            }),\n          },\n        },\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    } catch (error: any) {\n      console.error(error);\n      return {\n        appState: {\n          errorMessage: error.message,\n        },\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n  },\n  predicate: (elements) => {\n    return probablySupportsClipboardWriteText && elements.length > 0;\n  },\n  keywords: [\"svg\", \"clipboard\", \"copy\"],\n});\n\nexport const actionCopyAsPng = register({\n  name: \"copyAsPng\",\n  label: \"labels.copyAsPng\",\n  icon: pngIcon,\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, _data, app) => {\n    if (!app.canvas) {\n      return {\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    const { exportedElements, exportingFrame } = prepareElementsForExport(\n      elements,\n      appState,\n      true,\n    );\n    try {\n      await exportCanvas(\"clipboard\", exportedElements, appState, app.files, {\n        ...appState,\n        exportingFrame,\n        name: app.getName(),\n      });\n      return {\n        appState: {\n          ...appState,\n          toast: {\n            message: t(\"toast.copyToClipboardAsPng\", {\n              exportSelection: selectedElements.length\n                ? t(\"toast.selection\")\n                : t(\"toast.canvas\"),\n              exportColorScheme: appState.exportWithDarkMode\n                ? t(\"buttons.darkMode\")\n                : t(\"buttons.lightMode\"),\n            }),\n          },\n        },\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    } catch (error: any) {\n      console.error(error);\n      return {\n        appState: {\n          ...appState,\n          errorMessage: error.message,\n        },\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n  },\n  predicate: (elements) => {\n    return probablySupportsClipboardBlob && elements.length > 0;\n  },\n  keyTest: (event) => event.code === CODES.C && event.altKey && event.shiftKey,\n  keywords: [\"png\", \"clipboard\", \"copy\"],\n});\n\nexport const copyText = register({\n  name: \"copyText\",\n  label: \"labels.copyText\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    });\n\n    try {\n      copyTextToSystemClipboard(getTextFromElements(selectedElements));\n    } catch (e) {\n      throw new Error(t(\"errors.copyToSystemClipboardFailed\"));\n    }\n    return {\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  predicate: (elements, appState, _, app) => {\n    return (\n      probablySupportsClipboardWriteText &&\n      app.scene\n        .getSelectedElements({\n          selectedElementIds: appState.selectedElementIds,\n          includeBoundTextElement: true,\n        })\n        .some(isTextElement)\n    );\n  },\n  keywords: [\"text\", \"clipboard\", \"copy\"],\n});\n","import { CODES, KEYS } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { gridIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nimport type { AppState } from \"../types\";\n\nexport const actionToggleGridMode = register({\n  name: \"gridMode\",\n  icon: gridIcon,\n  keywords: [\"snap\"],\n  label: \"labels.toggleGrid\",\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => appState.gridModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        gridModeEnabled: !this.checked!(appState),\n        objectsSnapModeEnabled: false,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState: AppState) => appState.gridModeEnabled,\n  predicate: (element, appState, props) => {\n    return props.gridModeEnabled === undefined;\n  },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.code === CODES.QUOTE,\n});\n","import { CODES, KEYS } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { coffeeIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nexport const actionToggleZenMode = register({\n  name: \"zenMode\",\n  label: \"buttons.zenMode\",\n  icon: coffeeIcon,\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.zenModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        zenModeEnabled: !this.checked!(appState),\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState) => appState.zenModeEnabled,\n  predicate: (elements, appState, appProps, app) => {\n    return (\n      app.editorInterface.formFactor !== \"phone\" &&\n      typeof appProps.zenModeEnabled === \"undefined\"\n    );\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.Z,\n});\n","import { CODES, KEYS } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { magnetIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nexport const actionToggleObjectsSnapMode = register({\n  name: \"objectsSnapMode\",\n  label: \"buttons.objectsSnapMode\",\n  icon: magnetIcon,\n  viewMode: false,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.objectsSnapModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        objectsSnapModeEnabled: !this.checked!(appState),\n        gridModeEnabled: false,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState) => appState.objectsSnapModeEnabled,\n  predicate: (elements, appState, appProps) => {\n    return typeof appProps.objectsSnapModeEnabled === \"undefined\";\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.S,\n});\n","import { CODES, KEYS } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { abacusIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nexport const actionToggleStats = register({\n  name: \"stats\",\n  label: \"stats.fullTitle\",\n  icon: abacusIcon,\n  viewMode: true,\n  trackEvent: { category: \"menu\" },\n  keywords: [\"edit\", \"attributes\", \"customize\"],\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        stats: { ...appState.stats, open: !this.checked!(appState) },\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState) => appState.stats.open,\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.SLASH,\n});\n","import {\n  BOUND_TEXT_PADDING,\n  ROUNDNESS,\n  TEXT_ALIGN,\n  VERTICAL_ALIGN,\n  arrayToMap,\n  getFontString,\n} from \"@jsondraw/common\";\nimport {\n  getOriginalContainerHeightFromCache,\n  isBoundToContainer,\n  resetOriginalContainerCache,\n  updateOriginalContainerCache,\n} from \"@jsondraw/element\";\n\nimport {\n  computeBoundTextPosition,\n  computeContainerDimensionForBoundText,\n  getBoundTextElement,\n  redrawTextBoundingBox,\n} from \"@jsondraw/element\";\n\nimport {\n  hasBoundTextElement,\n  isArrowElement,\n  isTextBindableContainer,\n  isTextElement,\n  isUsingAdaptiveRadius,\n} from \"@jsondraw/element\";\n\nimport { measureText } from \"@jsondraw/element\";\n\nimport { syncMovedIndices } from \"@jsondraw/element\";\n\nimport { newElement } from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type {\n  JsonDrawElement,\n  JsonDrawLinearElement,\n  JsonDrawTextContainer,\n  JsonDrawTextElement,\n} from \"@jsondraw/element/types\";\n\nimport type { Mutable } from \"@jsondraw/common/utility-types\";\n\nimport type { Radians } from \"@jsondraw/math\";\n\nimport { register } from \"./register\";\n\nimport type { AppState } from \"../types\";\n\nexport const actionUnbindText = register({\n  name: \"unbindText\",\n  label: \"labels.unbindText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    return selectedElements.some((element) => hasBoundTextElement(element));\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    selectedElements.forEach((element) => {\n      const boundTextElement = getBoundTextElement(element, elementsMap);\n      if (boundTextElement) {\n        const { width, height } = measureText(\n          boundTextElement.originalText,\n          getFontString(boundTextElement),\n          boundTextElement.lineHeight,\n        );\n        const originalContainerHeight = getOriginalContainerHeightFromCache(\n          element.id,\n        );\n        resetOriginalContainerCache(element.id);\n        const { x, y } = computeBoundTextPosition(\n          element,\n          boundTextElement,\n          elementsMap,\n        );\n        app.scene.mutateElement(boundTextElement as JsonDrawTextElement, {\n          containerId: null,\n          width,\n          height,\n          text: boundTextElement.originalText,\n          x,\n          y,\n        });\n        app.scene.mutateElement(element, {\n          boundElements: element.boundElements?.filter(\n            (ele) => ele.id !== boundTextElement.id,\n          ),\n          height: originalContainerHeight\n            ? originalContainerHeight\n            : element.height,\n        });\n      }\n    });\n    return {\n      elements,\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n});\n\nexport const actionBindText = register({\n  name: \"bindText\",\n  label: \"labels.bindText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    if (selectedElements.length === 2) {\n      const textElement =\n        isTextElement(selectedElements[0]) ||\n        isTextElement(selectedElements[1]);\n\n      let bindingContainer;\n      if (isTextBindableContainer(selectedElements[0])) {\n        bindingContainer = selectedElements[0];\n      } else if (isTextBindableContainer(selectedElements[1])) {\n        bindingContainer = selectedElements[1];\n      }\n      if (\n        textElement &&\n        bindingContainer &&\n        getBoundTextElement(\n          bindingContainer,\n          app.scene.getNonDeletedElementsMap(),\n        ) === null\n      ) {\n        return true;\n      }\n    }\n    return false;\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    let textElement: JsonDrawTextElement;\n    let container: JsonDrawTextContainer;\n\n    if (\n      isTextElement(selectedElements[0]) &&\n      isTextBindableContainer(selectedElements[1])\n    ) {\n      textElement = selectedElements[0];\n      container = selectedElements[1];\n    } else {\n      textElement = selectedElements[1] as JsonDrawTextElement;\n      container = selectedElements[0] as JsonDrawTextContainer;\n    }\n    app.scene.mutateElement(textElement, {\n      containerId: container.id,\n      verticalAlign: VERTICAL_ALIGN.MIDDLE,\n      textAlign: TEXT_ALIGN.CENTER,\n      autoResize: true,\n      angle: (isArrowElement(container) ? 0 : container?.angle ?? 0) as Radians,\n    });\n    app.scene.mutateElement(container, {\n      boundElements: (container.boundElements || []).concat({\n        type: \"text\",\n        id: textElement.id,\n      }),\n    });\n    const originalContainerHeight = container.height;\n    redrawTextBoundingBox(textElement, container, app.scene);\n    // overwritting the cache with original container height so\n    // it can be restored when unbind\n    updateOriginalContainerCache(container.id, originalContainerHeight);\n\n    return {\n      elements: pushTextAboveContainer(elements, container, textElement),\n      appState: { ...appState, selectedElementIds: { [container.id]: true } },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n});\n\nconst pushTextAboveContainer = (\n  elements: readonly JsonDrawElement[],\n  container: JsonDrawElement,\n  textElement: JsonDrawTextElement,\n) => {\n  const updatedElements = elements.slice();\n  const textElementIndex = updatedElements.findIndex(\n    (ele) => ele.id === textElement.id,\n  );\n  updatedElements.splice(textElementIndex, 1);\n\n  const containerIndex = updatedElements.findIndex(\n    (ele) => ele.id === container.id,\n  );\n  updatedElements.splice(containerIndex + 1, 0, textElement);\n  syncMovedIndices(updatedElements, arrayToMap([container, textElement]));\n\n  return updatedElements;\n};\n\nconst pushContainerBelowText = (\n  elements: readonly JsonDrawElement[],\n  container: JsonDrawElement,\n  textElement: JsonDrawTextElement,\n) => {\n  const updatedElements = elements.slice();\n  const containerIndex = updatedElements.findIndex(\n    (ele) => ele.id === container.id,\n  );\n  updatedElements.splice(containerIndex, 1);\n\n  const textElementIndex = updatedElements.findIndex(\n    (ele) => ele.id === textElement.id,\n  );\n  updatedElements.splice(textElementIndex, 0, container);\n  syncMovedIndices(updatedElements, arrayToMap([container, textElement]));\n\n  return updatedElements;\n};\n\nexport const actionWrapTextInContainer = register({\n  name: \"wrapTextInContainer\",\n  label: \"labels.createContainerFromText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    const someTextElements = selectedElements.some(\n      (el) => isTextElement(el) && !isBoundToContainer(el),\n    );\n    return selectedElements.length > 0 && someTextElements;\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    let updatedElements: readonly JsonDrawElement[] = elements.slice();\n    const containerIds: Mutable<AppState[\"selectedElementIds\"]> = {};\n\n    for (const textElement of selectedElements) {\n      if (isTextElement(textElement) && !isBoundToContainer(textElement)) {\n        const container = newElement({\n          type: \"rectangle\",\n          backgroundColor: appState.currentItemBackgroundColor,\n          boundElements: [\n            ...(textElement.boundElements || []),\n            { id: textElement.id, type: \"text\" },\n          ],\n          angle: textElement.angle,\n          fillStyle: appState.currentItemFillStyle,\n          strokeColor: appState.currentItemStrokeColor,\n          roughness: appState.currentItemRoughness,\n          strokeWidth: appState.currentItemStrokeWidth,\n          strokeStyle: appState.currentItemStrokeStyle,\n          roundness:\n            appState.currentItemRoundness === \"round\"\n              ? {\n                  type: isUsingAdaptiveRadius(\"rectangle\")\n                    ? ROUNDNESS.ADAPTIVE_RADIUS\n                    : ROUNDNESS.PROPORTIONAL_RADIUS,\n                }\n              : null,\n          opacity: 100,\n          locked: false,\n          x: textElement.x - BOUND_TEXT_PADDING,\n          y: textElement.y - BOUND_TEXT_PADDING,\n          width: computeContainerDimensionForBoundText(\n            textElement.width,\n            \"rectangle\",\n          ),\n          height: computeContainerDimensionForBoundText(\n            textElement.height,\n            \"rectangle\",\n          ),\n          groupIds: textElement.groupIds,\n          frameId: textElement.frameId,\n        });\n\n        // update bindings\n        if (textElement.boundElements?.length) {\n          const linearElementIds = textElement.boundElements\n            .filter((ele) => ele.type === \"arrow\")\n            .map((el) => el.id);\n          const linearElements = updatedElements.filter((ele) =>\n            linearElementIds.includes(ele.id),\n          ) as JsonDrawLinearElement[];\n          linearElements.forEach((ele) => {\n            let startBinding = ele.startBinding;\n            let endBinding = ele.endBinding;\n\n            if (startBinding?.elementId === textElement.id) {\n              startBinding = {\n                ...startBinding,\n                elementId: container.id,\n              };\n            }\n\n            if (endBinding?.elementId === textElement.id) {\n              endBinding = { ...endBinding, elementId: container.id };\n            }\n\n            if (startBinding || endBinding) {\n              app.scene.mutateElement(ele, {\n                startBinding,\n                endBinding,\n              });\n            }\n          });\n        }\n\n        app.scene.mutateElement(textElement, {\n          containerId: container.id,\n          verticalAlign: VERTICAL_ALIGN.MIDDLE,\n          boundElements: null,\n          textAlign: TEXT_ALIGN.CENTER,\n          autoResize: true,\n        });\n\n        redrawTextBoundingBox(textElement, container, app.scene);\n\n        updatedElements = pushContainerBelowText(\n          [...updatedElements, container],\n          container,\n          textElement,\n        );\n\n        containerIds[container.id] = true;\n      }\n    }\n\n    return {\n      elements: updatedElements,\n      appState: {\n        ...appState,\n        selectedElementIds: containerIds,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n});\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Hyperlink.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Hyperlink.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useCallback, useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport { EVENT, HYPERLINK_TOOLTIP_DELAY, KEYS } from \"@jsondraw/common\";\nimport {\n  sceneCoordsToViewportCoords,\n  viewportCoordsToSceneCoords,\n  wrapEvent,\n  isLocalLink,\n  normalizeLink,\n} from \"@jsondraw/common\";\nimport { getElementAbsoluteCoords } from \"@jsondraw/element\";\nimport { hitElementBoundingBox } from \"@jsondraw/element\";\nimport { isElementLink } from \"@jsondraw/element\";\nimport { getEmbedLink, embeddableURLValidator } from \"@jsondraw/element\";\nimport { isEmbeddableElement } from \"@jsondraw/element\";\nimport type { Scene } from \"@jsondraw/element\";\nimport type {\n  ElementsMap,\n  JsonDrawEmbeddableElement,\n  NonDeletedJsonDrawElement,\n} from \"@jsondraw/element/types\";\nimport { pointFrom, type GlobalPoint } from \"@jsondraw/math\";\nimport clsx from \"clsx\";\nimport { trackEvent } from \"../../analytics\";\nimport { getTooltipDiv, updateTooltipPosition } from \"../../components/ui/Tooltip\";\nimport { t } from \"../../i18n\";\nimport { getSelectedElements } from \"../../scene\";\nimport type { AppState, JsonDrawProps, UIAppState } from \"../../types\";\nimport { useAppProps, useEditorInterface, useJsonDrawAppState } from \"../App\";\nimport { FreedrawIcon, TrashIcon, elementLinkIcon } from \"../icons\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport \"./Hyperlink.scss\";\nimport { getLinkHandleFromCoords } from \"./helpers\";\n\nconst POPUP_WIDTH = 380;\nconst POPUP_HEIGHT = 42;\nconst POPUP_PADDING = 5;\nconst SPACE_BOTTOM = 85;\nconst AUTO_HIDE_TIMEOUT = 500;\n\nlet IS_HYPERLINK_TOOLTIP_VISIBLE = false;\n\nconst embeddableLinkCache = new Map<JsonDrawEmbeddableElement[\"id\"], string>();\n\nexport const Hyperlink = ({\n  element,\n  scene,\n  setAppState,\n  onLinkOpen,\n  setToast,\n  updateEmbedValidationStatus,\n}: {\n  element: NonDeletedJsonDrawElement;\n  scene: Scene;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  onLinkOpen: JsonDrawProps[\"onLinkOpen\"];\n  setToast: (toast: { message: string; closable?: boolean; duration?: number } | null) => void;\n  updateEmbedValidationStatus: (element: JsonDrawEmbeddableElement, status: boolean) => void;\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const appState = useJsonDrawAppState();\n  const appProps = useAppProps();\n  const editorInterface = useEditorInterface();\n\n  const linkVal = element.link || \"\";\n\n  const [inputVal, setInputVal] = useState(linkVal);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const isEditing = appState.showHyperlinkPopup === \"editor\";\n\n  const handleSubmit = useCallback(() => {\n    if (!inputRef.current) {\n      return;\n    }\n\n    const link = normalizeLink(inputRef.current.value) || null;\n\n    if (!element.link && link) {\n      trackEvent(\"hyperlink\", \"create\");\n    }\n\n    if (isEmbeddableElement(element)) {\n      if (appState.activeEmbeddable?.element === element) {\n        setAppState({ activeEmbeddable: null });\n      }\n      if (!link) {\n        scene.mutateElement(element, {\n          link: null,\n        });\n        updateEmbedValidationStatus(element, false);\n        return;\n      }\n\n      if (!embeddableURLValidator(link, appProps.validateEmbeddable)) {\n        if (link) {\n          setToast({ message: t(\"toast.unableToEmbed\"), closable: true });\n        }\n        element.link && embeddableLinkCache.set(element.id, element.link);\n        scene.mutateElement(element, {\n          link,\n        });\n        updateEmbedValidationStatus(element, false);\n      } else {\n        const { width, height } = element;\n        const embedLink = getEmbedLink(link);\n        if (embedLink?.error instanceof URIError) {\n          setToast({\n            message: t(\"toast.unrecognizedLinkFormat\"),\n            closable: true,\n          });\n        }\n        const ar = embedLink ? embedLink.intrinsicSize.w / embedLink.intrinsicSize.h : 1;\n        const hasLinkChanged = embeddableLinkCache.get(element.id) !== element.link;\n        scene.mutateElement(element, {\n          ...(hasLinkChanged\n            ? {\n                width: embedLink?.type === \"video\" ? (width > height ? width : height * ar) : width,\n                height:\n                  embedLink?.type === \"video\" ? (width > height ? width / ar : height) : height,\n              }\n            : {}),\n          link,\n        });\n        updateEmbedValidationStatus(element, true);\n        if (embeddableLinkCache.has(element.id)) {\n          embeddableLinkCache.delete(element.id);\n        }\n      }\n    } else {\n      scene.mutateElement(element, { link });\n    }\n  }, [\n    element,\n    scene,\n    setToast,\n    appProps.validateEmbeddable,\n    appState.activeEmbeddable,\n    setAppState,\n    updateEmbedValidationStatus,\n  ]);\n\n  useLayoutEffect(() => {\n    return () => {\n      handleSubmit();\n    };\n  }, [handleSubmit]);\n\n  useEffect(() => {\n    if (\n      isEditing &&\n      inputRef?.current &&\n      !(editorInterface.formFactor === \"phone\" || editorInterface.isTouchScreen)\n    ) {\n      inputRef.current.select();\n    }\n  }, [isEditing, editorInterface.formFactor, editorInterface.isTouchScreen]);\n\n  useEffect(() => {\n    let timeoutId: number | null = null;\n\n    const handlePointerMove = (event: PointerEvent) => {\n      if (isEditing) {\n        return;\n      }\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      const shouldHide = shouldHideLinkPopup(\n        element,\n        elementsMap,\n        appState,\n        pointFrom(event.clientX, event.clientY)\n      ) as boolean;\n      if (shouldHide) {\n        timeoutId = window.setTimeout(() => {\n          setAppState({ showHyperlinkPopup: false });\n        }, AUTO_HIDE_TIMEOUT);\n      }\n    };\n    window.addEventListener(EVENT.POINTER_MOVE, handlePointerMove, false);\n    return () => {\n      window.removeEventListener(EVENT.POINTER_MOVE, handlePointerMove, false);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [appState, element, isEditing, setAppState, elementsMap]);\n\n  const handleRemove = useCallback(() => {\n    trackEvent(\"hyperlink\", \"delete\");\n    scene.mutateElement(element, { link: null });\n    setAppState({ showHyperlinkPopup: false });\n  }, [setAppState, element, scene]);\n\n  const onEdit = () => {\n    trackEvent(\"hyperlink\", \"edit\", \"popup-ui\");\n    setAppState({ showHyperlinkPopup: \"editor\" });\n  };\n  const { x, y } = getCoordsForPopover(element, appState, elementsMap);\n  if (\n    appState.contextMenu ||\n    appState.selectedElementsAreBeingDragged ||\n    appState.resizingElement ||\n    appState.isRotating ||\n    appState.openMenu ||\n    appState.viewModeEnabled\n  ) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"jsondraw-hyperlinkContainer\"\n      style={{\n        top: `${y}px`,\n        left: `${x}px`,\n        width: POPUP_WIDTH,\n        padding: POPUP_PADDING,\n      }}\n    >\n      {isEditing ? (\n        <input\n          className={clsx(\"jsondraw-hyperlinkContainer-input\")}\n          placeholder={t(\"labels.link.hint\")}\n          ref={inputRef}\n          value={inputVal}\n          onChange={event => setInputVal(event.target.value)}\n          autoFocus\n          onKeyDown={event => {\n            event.stopPropagation();\n            // prevent cmd/ctrl+k shortcut when editing link\n            if (event[KEYS.CTRL_OR_CMD] && event.key === KEYS.K) {\n              event.preventDefault();\n            }\n            if (event.key === KEYS.ENTER || event.key === KEYS.ESCAPE) {\n              handleSubmit();\n              setAppState({ showHyperlinkPopup: \"info\" });\n            }\n          }}\n        />\n      ) : element.link ? (\n        <a\n          href={normalizeLink(element.link || \"\")}\n          className=\"jsondraw-hyperlinkContainer-link\"\n          target={isLocalLink(element.link) ? \"_self\" : \"_blank\"}\n          onClick={event => {\n            if (element.link && onLinkOpen) {\n              const customEvent = wrapEvent(EVENT.JSONDRAW_LINK, event.nativeEvent);\n              onLinkOpen(\n                {\n                  ...element,\n                  link: normalizeLink(element.link),\n                },\n                customEvent\n              );\n              if (customEvent.defaultPrevented) {\n                event.preventDefault();\n              }\n            }\n          }}\n          rel=\"noopener noreferrer\"\n        >\n          {element.link}\n        </a>\n      ) : (\n        <div className=\"jsondraw-hyperlinkContainer-link\">{t(\"labels.link.empty\")}</div>\n      )}\n      <div className=\"jsondraw-hyperlinkContainer__buttons\">\n        {!isEditing && (\n          <ToolButton\n            type=\"button\"\n            title={t(\"buttons.edit\")}\n            aria-label={t(\"buttons.edit\")}\n            label={t(\"buttons.edit\")}\n            onClick={onEdit}\n            className=\"jsondraw-hyperlinkContainer--edit\"\n            icon={FreedrawIcon}\n          />\n        )}\n        <ToolButton\n          type=\"button\"\n          title={t(\"labels.linkToElement\")}\n          aria-label={t(\"labels.linkToElement\")}\n          label={t(\"labels.linkToElement\")}\n          onClick={() => {\n            setAppState({\n              openDialog: {\n                name: \"elementLinkSelector\",\n                sourceElementId: element.id,\n              },\n            });\n          }}\n          icon={elementLinkIcon}\n        />\n        {linkVal && !isEmbeddableElement(element) && (\n          <ToolButton\n            type=\"button\"\n            title={t(\"buttons.remove\")}\n            aria-label={t(\"buttons.remove\")}\n            label={t(\"buttons.remove\")}\n            onClick={handleRemove}\n            className=\"jsondraw-hyperlinkContainer--remove\"\n            icon={TrashIcon}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst getCoordsForPopover = (\n  element: NonDeletedJsonDrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap\n) => {\n  const [x1, y1] = getElementAbsoluteCoords(element, elementsMap);\n  const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n    { sceneX: x1 + element.width / 2, sceneY: y1 },\n    appState\n  );\n  const x = viewportX - appState.offsetLeft - POPUP_WIDTH / 2;\n  const y = viewportY - appState.offsetTop - SPACE_BOTTOM;\n  return { x, y };\n};\n\nexport const getContextMenuLabel = (\n  elements: readonly NonDeletedJsonDrawElement[],\n  appState: UIAppState\n) => {\n  const selectedElements = getSelectedElements(elements, appState);\n  const label = isEmbeddableElement(selectedElements[0])\n    ? \"labels.link.editEmbed\"\n    : selectedElements[0]?.link\n      ? \"labels.link.edit\"\n      : \"labels.link.create\";\n  return label;\n};\n\nlet HYPERLINK_TOOLTIP_TIMEOUT_ID: number | null = null;\nexport const showHyperlinkTooltip = (\n  element: NonDeletedJsonDrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap\n) => {\n  if (HYPERLINK_TOOLTIP_TIMEOUT_ID) {\n    clearTimeout(HYPERLINK_TOOLTIP_TIMEOUT_ID);\n  }\n  HYPERLINK_TOOLTIP_TIMEOUT_ID = window.setTimeout(\n    () => renderTooltip(element, appState, elementsMap),\n    HYPERLINK_TOOLTIP_DELAY\n  );\n};\n\nconst renderTooltip = (\n  element: NonDeletedJsonDrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap\n) => {\n  if (!element.link) {\n    return;\n  }\n\n  const tooltipDiv = getTooltipDiv();\n\n  tooltipDiv.classList.add(\"jsondraw-tooltip--visible\");\n  tooltipDiv.style.maxWidth = \"20rem\";\n  tooltipDiv.textContent = isElementLink(element.link)\n    ? t(\"labels.link.goToElement\")\n    : element.link;\n\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n\n  const [linkX, linkY, linkWidth, linkHeight] = getLinkHandleFromCoords(\n    [x1, y1, x2, y2],\n    element.angle,\n    appState\n  );\n\n  const linkViewportCoords = sceneCoordsToViewportCoords(\n    { sceneX: linkX, sceneY: linkY },\n    appState\n  );\n\n  updateTooltipPosition(\n    tooltipDiv,\n    {\n      left: linkViewportCoords.x,\n      top: linkViewportCoords.y,\n      width: linkWidth,\n      height: linkHeight,\n    },\n    \"top\"\n  );\n  trackEvent(\"hyperlink\", \"tooltip\", \"link-icon\");\n\n  IS_HYPERLINK_TOOLTIP_VISIBLE = true;\n};\nexport const hideHyperlinkToolip = () => {\n  if (HYPERLINK_TOOLTIP_TIMEOUT_ID) {\n    clearTimeout(HYPERLINK_TOOLTIP_TIMEOUT_ID);\n  }\n  if (IS_HYPERLINK_TOOLTIP_VISIBLE) {\n    IS_HYPERLINK_TOOLTIP_VISIBLE = false;\n    getTooltipDiv().classList.remove(\"jsondraw-tooltip--visible\");\n  }\n};\n\nconst shouldHideLinkPopup = (\n  element: NonDeletedJsonDrawElement,\n  elementsMap: ElementsMap,\n  appState: AppState,\n  [clientX, clientY]: GlobalPoint\n): Boolean => {\n  const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords({ clientX, clientY }, appState);\n\n  const threshold = 15 / appState.zoom.value;\n  // hitbox to prevent hiding when hovered in element bounding box\n  if (hitElementBoundingBox(pointFrom(sceneX, sceneY), element, elementsMap)) {\n    return false;\n  }\n  const [x1, y1, x2] = getElementAbsoluteCoords(element, elementsMap);\n  // hit box to prevent hiding when hovered in the vertical area between element and popover\n  if (sceneX >= x1 && sceneX <= x2 && sceneY >= y1 - SPACE_BOTTOM && sceneY <= y1) {\n    return false;\n  }\n  // hit box to prevent hiding when hovered around popover within threshold\n  const { x: popoverX, y: popoverY } = getCoordsForPopover(element, appState, elementsMap);\n\n  if (\n    clientX >= popoverX - threshold &&\n    clientX <= popoverX + POPUP_WIDTH + POPUP_PADDING * 2 + threshold &&\n    clientY >= popoverY - threshold &&\n    clientY <= popoverY + threshold + POPUP_PADDING * 2 + POPUP_HEIGHT\n  ) {\n    return false;\n  }\n  return true;\n};\n","import { KEYS } from \"@jsondraw/common\";\nimport { isEmbeddableElement } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport { getContextMenuLabel } from \"../components/hyperlink/Hyperlink\";\nimport { LinkIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { t } from \"../i18n\";\nimport { getSelectedElements } from \"../scene\";\nimport { getShortcutKey } from \"../shortcut\";\nimport { register } from \"./register\";\n\nexport const actionLink = register({\n  name: \"hyperlink\",\n  label: (elements, appState) => getContextMenuLabel(elements, appState),\n  icon: LinkIcon,\n  perform: (elements, appState) => {\n    if (appState.showHyperlinkPopup === \"editor\") {\n      return false;\n    }\n\n    return {\n      elements,\n      appState: {\n        ...appState,\n        showHyperlinkPopup: \"editor\",\n        openMenu: null,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  trackEvent: { category: \"hyperlink\", action: \"click\" },\n  keyTest: event => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.K,\n  predicate: (elements, appState) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    return selectedElements.length === 1;\n  },\n  PanelComponent: ({ elements, appState, updateData }) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={LinkIcon}\n        aria-label={t(getContextMenuLabel(elements, appState))}\n        title={`${\n          isEmbeddableElement(elements[0]) ? t(\"labels.link.labelEmbed\") : t(\"labels.link.label\")\n        } - ${getShortcutKey(\"CtrlOrCmd+K\")}`}\n        onClick={() => updateData(null)}\n        selected={selectedElements.length === 1 && !!selectedElements[0].link}\n      />\n    );\n  },\n});\n","import { KEYS, arrayToMap, randomId } from \"@jsondraw/common\";\n\nimport {\n  elementsAreInSameGroup,\n  newElementWith,\n  selectGroupsFromGivenElements,\n} from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { LockedIcon, UnlockedIcon } from \"../components/icons\";\n\nimport { getSelectedElements } from \"../scene\";\n\nimport { register } from \"./register\";\n\nimport type { AppState } from \"../types\";\n\nconst shouldLock = (elements: readonly JsonDrawElement[]) =>\n  elements.every((el) => !el.locked);\n\nexport const actionToggleElementLock = register({\n  name: \"toggleElementLock\",\n  label: (elements, appState, app) => {\n    const selected = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: false,\n    });\n\n    return shouldLock(selected)\n      ? \"labels.elementLock.lock\"\n      : \"labels.elementLock.unlock\";\n  },\n  icon: (appState, elements) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    return shouldLock(selectedElements) ? LockedIcon : UnlockedIcon;\n  },\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    return (\n      selectedElements.length > 0 &&\n      !selectedElements.some((element) => element.locked && element.frameId)\n    );\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    if (!selectedElements.length) {\n      return false;\n    }\n\n    const nextLockState = shouldLock(selectedElements);\n    const selectedElementsMap = arrayToMap(selectedElements);\n\n    const isAGroup =\n      selectedElements.length > 1 && elementsAreInSameGroup(selectedElements);\n    const isASingleUnit = selectedElements.length === 1 || isAGroup;\n    const newGroupId = isASingleUnit ? null : randomId();\n\n    let nextLockedMultiSelections = { ...appState.lockedMultiSelections };\n\n    if (nextLockState) {\n      nextLockedMultiSelections = {\n        ...appState.lockedMultiSelections,\n        ...(newGroupId ? { [newGroupId]: true } : {}),\n      };\n    } else if (isAGroup) {\n      const groupId = selectedElements[0].groupIds.at(-1)!;\n      delete nextLockedMultiSelections[groupId];\n    }\n\n    const nextElements = elements.map((element) => {\n      if (!selectedElementsMap.has(element.id)) {\n        return element;\n      }\n\n      let nextGroupIds = element.groupIds;\n\n      // if locking together, add to group\n      // if unlocking, remove the temporary group\n      if (nextLockState) {\n        if (newGroupId) {\n          nextGroupIds = [...nextGroupIds, newGroupId];\n        }\n      } else {\n        nextGroupIds = nextGroupIds.filter(\n          (groupId) => !appState.lockedMultiSelections[groupId],\n        );\n      }\n\n      return newElementWith(element, {\n        locked: nextLockState,\n        // do not recreate the array unncessarily\n        groupIds:\n          nextGroupIds.length !== element.groupIds.length\n            ? nextGroupIds\n            : element.groupIds,\n      });\n    });\n\n    const nextElementsMap = arrayToMap(nextElements);\n    const nextSelectedElementIds: AppState[\"selectedElementIds\"] = nextLockState\n      ? {}\n      : Object.fromEntries(selectedElements.map((el) => [el.id, true]));\n    const unlockedSelectedElements = selectedElements.map(\n      (el) => nextElementsMap.get(el.id) || el,\n    );\n    const nextSelectedGroupIds = nextLockState\n      ? {}\n      : selectGroupsFromGivenElements(unlockedSelectedElements, appState);\n\n    const activeLockedId = nextLockState\n      ? newGroupId\n        ? newGroupId\n        : isAGroup\n        ? selectedElements[0].groupIds.at(-1)!\n        : selectedElements[0].id\n      : null;\n\n    return {\n      elements: nextElements,\n\n      appState: {\n        ...appState,\n        selectedElementIds: nextSelectedElementIds,\n        selectedGroupIds: nextSelectedGroupIds,\n        selectedLinearElement: nextLockState\n          ? null\n          : appState.selectedLinearElement,\n        lockedMultiSelections: nextLockedMultiSelections,\n        activeLockedId,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  keyTest: (event, appState, elements, app) => {\n    return (\n      event.key.toLocaleLowerCase() === KEYS.L &&\n      event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      app.scene.getSelectedElements({\n        selectedElementIds: appState.selectedElementIds,\n        includeBoundTextElement: false,\n      }).length > 0\n    );\n  },\n});\n\nexport const actionUnlockAllElements = register({\n  name: \"unlockAllElements\",\n  trackEvent: { category: \"canvas\" },\n  viewMode: false,\n  icon: UnlockedIcon,\n  predicate: (elements, appState) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    return (\n      selectedElements.length === 0 &&\n      elements.some((element) => element.locked)\n    );\n  },\n  perform: (elements, appState) => {\n    const lockedElements = elements.filter((el) => el.locked);\n\n    const nextElements = elements.map((element) => {\n      if (element.locked) {\n        // remove the temporary groupId if it exists\n        const nextGroupIds = element.groupIds.filter(\n          (gid) => !appState.lockedMultiSelections[gid],\n        );\n\n        return newElementWith(element, {\n          locked: false,\n          groupIds:\n            // do not recreate the array unncessarily\n            element.groupIds.length !== nextGroupIds.length\n              ? nextGroupIds\n              : element.groupIds,\n        });\n      }\n      return element;\n    });\n\n    const nextElementsMap = arrayToMap(nextElements);\n\n    const unlockedElements = lockedElements.map(\n      (el) => nextElementsMap.get(el.id) || el,\n    );\n\n    return {\n      elements: nextElements,\n      appState: {\n        ...appState,\n        selectedElementIds: Object.fromEntries(\n          lockedElements.map((el) => [el.id, true]),\n        ),\n        selectedGroupIds: selectGroupsFromGivenElements(\n          unlockedElements,\n          appState,\n        ),\n        lockedMultiSelections: {},\n        activeLockedId: null,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  label: \"labels.elementLock.unlockAll\",\n});\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ConvertElementTypePopup.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ConvertElementTypePopup.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { type ReactNode, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport {\n  getLinearElementSubType,\n  updateElbowArrowPoints,\n} from \"@jsondraw/element\";\n\nimport { pointFrom, pointRotateRads, type LocalPoint } from \"@jsondraw/math\";\n\nimport {\n  hasBoundTextElement,\n  isArrowBoundToElement,\n  isArrowElement,\n  isElbowArrow,\n  isLinearElement,\n  isUsingAdaptiveRadius,\n} from \"@jsondraw/element\";\n\nimport {\n  getCommonBoundingBox,\n  getElementAbsoluteCoords,\n} from \"@jsondraw/element\";\n\nimport {\n  getBoundTextElement,\n  getBoundTextMaxHeight,\n  getBoundTextMaxWidth,\n  redrawTextBoundingBox,\n} from \"@jsondraw/element\";\n\nimport { wrapText } from \"@jsondraw/element\";\n\nimport {\n  assertNever,\n  CLASSES,\n  getFontString,\n  isProdEnv,\n  mapFind,\n  reduceToCommonValue,\n  updateActiveTool,\n} from \"@jsondraw/common\";\n\nimport { measureText } from \"@jsondraw/element\";\n\nimport { LinearElementEditor } from \"@jsondraw/element\";\n\nimport {\n  newArrowElement,\n  newElement,\n  newLinearElement,\n} from \"@jsondraw/element\";\n\nimport { ShapeCache } from \"@jsondraw/element\";\n\nimport { updateBindings } from \"@jsondraw/element\";\n\nimport type {\n  ConvertibleGenericTypes,\n  ConvertibleLinearTypes,\n  ConvertibleTypes,\n  JsonDrawDiamondElement,\n  JsonDrawElement,\n  JsonDrawEllipseElement,\n  JsonDrawLinearElement,\n  JsonDrawRectangleElement,\n  JsonDrawSelectionElement,\n  JsonDrawTextContainer,\n  JsonDrawTextElementWithContainer,\n  FixedSegment,\n} from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport {\n  bumpVersion,\n  mutateElement,\n  ROUNDNESS,\n  sceneCoordsToViewportCoords,\n} from \"../..\";\nimport { trackEvent } from \"../../analytics\";\nimport { atom } from \"../../editor-jotai\";\n\nimport \"./ConvertElementTypePopup.scss\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport {\n  DiamondIcon,\n  elbowArrowIcon,\n  EllipseIcon,\n  LineIcon,\n  RectangleIcon,\n  roundArrowIcon,\n  sharpArrowIcon,\n} from \"../icons\";\n\nimport type App from \"../App\";\n\nimport type { AppClassProperties } from \"../../types\";\n\nconst GAP_HORIZONTAL = 8;\nconst GAP_VERTICAL = 10;\n\ntype JsonDrawConvertibleElement =\n  | JsonDrawRectangleElement\n  | JsonDrawDiamondElement\n  | JsonDrawEllipseElement\n  | JsonDrawLinearElement;\n\n// indicates order of switching\nconst GENERIC_TYPES = [\"rectangle\", \"diamond\", \"ellipse\"] as const;\n// indicates order of switching\nconst LINEAR_TYPES = [\n  \"line\",\n  \"sharpArrow\",\n  \"curvedArrow\",\n  \"elbowArrow\",\n] as const;\n\nconst CONVERTIBLE_GENERIC_TYPES: ReadonlySet<ConvertibleGenericTypes> = new Set(\n  GENERIC_TYPES,\n);\n\nconst CONVERTIBLE_LINEAR_TYPES: ReadonlySet<ConvertibleLinearTypes> = new Set(\n  LINEAR_TYPES,\n);\n\nconst isConvertibleGenericType = (\n  elementType: string,\n): elementType is ConvertibleGenericTypes =>\n  CONVERTIBLE_GENERIC_TYPES.has(elementType as ConvertibleGenericTypes);\n\nconst isConvertibleLinearType = (\n  elementType: string,\n): elementType is ConvertibleLinearTypes =>\n  elementType === \"arrow\" ||\n  CONVERTIBLE_LINEAR_TYPES.has(elementType as ConvertibleLinearTypes);\n\nexport const convertElementTypePopupAtom = atom<{\n  type: \"panel\";\n} | null>(null);\n\ntype CacheKey = string & { _brand: \"CacheKey\" };\n\nconst FONT_SIZE_CONVERSION_CACHE = new Map<\n  JsonDrawElement[\"id\"],\n  {\n    fontSize: number;\n  }\n>();\n\nconst LINEAR_ELEMENT_CONVERSION_CACHE = new Map<\n  CacheKey,\n  JsonDrawLinearElement\n>();\n\nconst ConvertElementTypePopup = ({ app }: { app: App }) => {\n  const selectedElements = app.scene.getSelectedElements(app.state);\n  const elementsCategoryRef = useRef<ConversionType>(null);\n\n  // close shape switch panel if selecting different \"types\" of elements\n  useEffect(() => {\n    if (selectedElements.length === 0) {\n      app.updateEditorAtom(convertElementTypePopupAtom, null);\n      return;\n    }\n\n    const conversionType = getConversionTypeFromElements(selectedElements);\n\n    if (conversionType && !elementsCategoryRef.current) {\n      elementsCategoryRef.current = conversionType;\n    } else if (\n      (elementsCategoryRef.current && !conversionType) ||\n      (elementsCategoryRef.current &&\n        conversionType !== elementsCategoryRef.current)\n    ) {\n      app.updateEditorAtom(convertElementTypePopupAtom, null);\n      elementsCategoryRef.current = null;\n    }\n  }, [selectedElements, app]);\n\n  useEffect(() => {\n    return () => {\n      FONT_SIZE_CONVERSION_CACHE.clear();\n      LINEAR_ELEMENT_CONVERSION_CACHE.clear();\n    };\n  }, []);\n\n  return <Panel app={app} elements={selectedElements} />;\n};\n\nconst Panel = ({\n  app,\n  elements,\n}: {\n  app: App;\n  elements: JsonDrawElement[];\n}) => {\n  const conversionType = getConversionTypeFromElements(elements);\n\n  const genericElements = useMemo(() => {\n    return conversionType === \"generic\"\n      ? filterGenericConvetibleElements(elements)\n      : [];\n  }, [conversionType, elements]);\n  const linearElements = useMemo(() => {\n    return conversionType === \"linear\"\n      ? filterLinearConvertibleElements(elements)\n      : [];\n  }, [conversionType, elements]);\n\n  const sameType =\n    conversionType === \"generic\"\n      ? genericElements.every(\n          (element) => element.type === genericElements[0].type,\n        )\n      : conversionType === \"linear\"\n      ? linearElements.every(\n          (element) =>\n            getLinearElementSubType(element) ===\n            getLinearElementSubType(linearElements[0]),\n        )\n      : false;\n\n  const [panelPosition, setPanelPosition] = useState({ x: 0, y: 0 });\n  const positionRef = useRef(\"\");\n  const panelRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const elements = [...genericElements, ...linearElements].sort((a, b) =>\n      a.id.localeCompare(b.id),\n    );\n    const newPositionRef = `\n      ${app.state.scrollX}${app.state.scrollY}${app.state.offsetTop}${\n      app.state.offsetLeft\n    }${app.state.zoom.value}${elements.map((el) => el.id).join(\",\")}`;\n\n    if (newPositionRef === positionRef.current) {\n      return;\n    }\n\n    positionRef.current = newPositionRef;\n\n    let bottomLeft;\n\n    if (elements.length === 1) {\n      const [x1, , , y2, cx, cy] = getElementAbsoluteCoords(\n        elements[0],\n        app.scene.getNonDeletedElementsMap(),\n      );\n      bottomLeft = pointRotateRads(\n        pointFrom(x1, y2),\n        pointFrom(cx, cy),\n        elements[0].angle,\n      );\n    } else {\n      const { minX, maxY } = getCommonBoundingBox(elements);\n      bottomLeft = pointFrom(minX, maxY);\n    }\n\n    const { x, y } = sceneCoordsToViewportCoords(\n      { sceneX: bottomLeft[0], sceneY: bottomLeft[1] },\n      app.state,\n    );\n\n    setPanelPosition({ x, y });\n  }, [genericElements, linearElements, app.scene, app.state]);\n\n  useEffect(() => {\n    for (const linearElement of linearElements) {\n      const cacheKey = toCacheKey(\n        linearElement.id,\n        getConvertibleType(linearElement),\n      );\n      if (!LINEAR_ELEMENT_CONVERSION_CACHE.has(cacheKey)) {\n        LINEAR_ELEMENT_CONVERSION_CACHE.set(cacheKey, linearElement);\n      }\n    }\n  }, [linearElements]);\n\n  useEffect(() => {\n    for (const element of genericElements) {\n      if (!FONT_SIZE_CONVERSION_CACHE.has(element.id)) {\n        const boundText = getBoundTextElement(\n          element,\n          app.scene.getNonDeletedElementsMap(),\n        );\n        if (boundText) {\n          FONT_SIZE_CONVERSION_CACHE.set(element.id, {\n            fontSize: boundText.fontSize,\n          });\n        }\n      }\n    }\n  }, [genericElements, app.scene]);\n\n  const SHAPES: [string, ReactNode][] =\n    conversionType === \"linear\"\n      ? [\n          [\"line\", LineIcon],\n          [\"sharpArrow\", sharpArrowIcon],\n          [\"curvedArrow\", roundArrowIcon],\n          [\"elbowArrow\", elbowArrowIcon],\n        ]\n      : conversionType === \"generic\"\n      ? [\n          [\"rectangle\", RectangleIcon],\n          [\"diamond\", DiamondIcon],\n          [\"ellipse\", EllipseIcon],\n        ]\n      : [];\n\n  return (\n    <div\n      ref={panelRef}\n      tabIndex={-1}\n      style={{\n        position: \"absolute\",\n        top: `${\n          panelPosition.y +\n          (GAP_VERTICAL + 8) * app.state.zoom.value -\n          app.state.offsetTop\n        }px`,\n        left: `${panelPosition.x - app.state.offsetLeft - GAP_HORIZONTAL}px`,\n        zIndex: 2,\n      }}\n      className={CLASSES.CONVERT_ELEMENT_TYPE_POPUP}\n    >\n      {SHAPES.map(([type, icon]) => {\n        const isSelected =\n          sameType &&\n          ((conversionType === \"generic\" && genericElements[0].type === type) ||\n            (conversionType === \"linear\" &&\n              getLinearElementSubType(linearElements[0]) === type));\n\n        return (\n          <ToolButton\n            className=\"Shape\"\n            key={`${elements[0].id}${elements[0].version}_${type}`}\n            type=\"radio\"\n            icon={icon}\n            checked={isSelected}\n            name=\"convertElementType-option\"\n            title={type}\n            keyBindingLabel={\"\"}\n            aria-label={type}\n            data-testid={`toolbar-${type}`}\n            onChange={() => {\n              if (app.state.activeTool.type !== type) {\n                trackEvent(\"convertElementType\", type, \"ui\");\n              }\n              convertElementTypes(app, {\n                conversionType,\n                nextType: type as\n                  | ConvertibleGenericTypes\n                  | ConvertibleLinearTypes,\n              });\n              panelRef.current?.focus();\n            }}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport const adjustBoundTextSize = (\n  container: JsonDrawTextContainer,\n  boundText: JsonDrawTextElementWithContainer,\n  scene: Scene,\n) => {\n  const maxWidth = getBoundTextMaxWidth(container, boundText);\n  const maxHeight = getBoundTextMaxHeight(container, boundText);\n\n  const wrappedText = wrapText(\n    boundText.text,\n    getFontString(boundText),\n    maxWidth,\n  );\n\n  let metrics = measureText(\n    wrappedText,\n    getFontString(boundText),\n    boundText.lineHeight,\n  );\n\n  let nextFontSize = boundText.fontSize;\n  while (\n    (metrics.width > maxWidth || metrics.height > maxHeight) &&\n    nextFontSize > 0\n  ) {\n    nextFontSize -= 1;\n    const _updatedTextElement = {\n      ...boundText,\n      fontSize: nextFontSize,\n    };\n    metrics = measureText(\n      boundText.text,\n      getFontString(_updatedTextElement),\n      boundText.lineHeight,\n    );\n  }\n\n  mutateElement(boundText, scene.getNonDeletedElementsMap(), {\n    fontSize: nextFontSize,\n    width: metrics.width,\n    height: metrics.height,\n  });\n\n  redrawTextBoundingBox(boundText, container, scene);\n};\n\ntype ConversionType = \"generic\" | \"linear\" | null;\n\nexport const convertElementTypes = (\n  app: App,\n  {\n    conversionType,\n    nextType,\n    direction = \"right\",\n  }: {\n    conversionType: ConversionType;\n    nextType?: ConvertibleTypes;\n    direction?: \"left\" | \"right\";\n  },\n): boolean => {\n  if (!conversionType) {\n    return false;\n  }\n\n  const selectedElements = app.scene.getSelectedElements(app.state);\n\n  const selectedElementIds = selectedElements.reduce(\n    (acc, element) => ({ ...acc, [element.id]: true }),\n    {},\n  );\n\n  const advancement = direction === \"right\" ? 1 : -1;\n\n  if (conversionType === \"generic\") {\n    const convertibleGenericElements =\n      filterGenericConvetibleElements(selectedElements);\n\n    const sameType = convertibleGenericElements.every(\n      (element) => element.type === convertibleGenericElements[0].type,\n    );\n\n    const index = sameType\n      ? GENERIC_TYPES.indexOf(convertibleGenericElements[0].type)\n      : -1;\n\n    nextType =\n      nextType ??\n      GENERIC_TYPES[\n        (index + GENERIC_TYPES.length + advancement) % GENERIC_TYPES.length\n      ];\n\n    if (nextType && isConvertibleGenericType(nextType)) {\n      const convertedElements: Record<string, JsonDrawElement> = {};\n\n      for (const element of convertibleGenericElements) {\n        const convertedElement = convertElementType(element, nextType, app);\n        convertedElements[convertedElement.id] = convertedElement;\n      }\n\n      const nextElements = [];\n\n      for (const element of app.scene.getElementsIncludingDeleted()) {\n        if (convertedElements[element.id]) {\n          nextElements.push(convertedElements[element.id]);\n        } else {\n          nextElements.push(element);\n        }\n      }\n\n      app.scene.replaceAllElements(nextElements);\n\n      for (const element of Object.values(convertedElements)) {\n        const boundText = getBoundTextElement(\n          element,\n          app.scene.getNonDeletedElementsMap(),\n        );\n        if (boundText) {\n          if (FONT_SIZE_CONVERSION_CACHE.get(element.id)) {\n            mutateElement(boundText, app.scene.getNonDeletedElementsMap(), {\n              fontSize:\n                FONT_SIZE_CONVERSION_CACHE.get(element.id)?.fontSize ??\n                boundText.fontSize,\n            });\n          }\n\n          adjustBoundTextSize(\n            element as JsonDrawTextContainer,\n            boundText,\n            app.scene,\n          );\n        }\n      }\n\n      app.setState((prevState) => {\n        return {\n          selectedElementIds,\n          activeTool: updateActiveTool(prevState, {\n            type: \"selection\",\n          }),\n        };\n      });\n    }\n  }\n\n  if (conversionType === \"linear\") {\n    const convertibleLinearElements = filterLinearConvertibleElements(\n      selectedElements,\n    ) as JsonDrawLinearElement[];\n\n    if (!nextType) {\n      const commonSubType = reduceToCommonValue(\n        convertibleLinearElements,\n        getLinearElementSubType,\n      );\n\n      const index = commonSubType ? LINEAR_TYPES.indexOf(commonSubType) : -1;\n      nextType =\n        LINEAR_TYPES[\n          (index + LINEAR_TYPES.length + advancement) % LINEAR_TYPES.length\n        ];\n    }\n\n    if (isConvertibleLinearType(nextType)) {\n      const convertedElements: JsonDrawElement[] = [];\n\n      const nextElementsMap: Map<JsonDrawElement[\"id\"], JsonDrawElement> =\n        app.scene.getElementsMapIncludingDeleted();\n\n      for (const element of convertibleLinearElements) {\n        const cachedElement = LINEAR_ELEMENT_CONVERSION_CACHE.get(\n          toCacheKey(element.id, nextType),\n        );\n\n        // if switching to the original subType or a subType we've already\n        // converted to, reuse the cached element to get the original properties\n        // (needed for simple->elbow->simple conversions or between line\n        // and arrows)\n        if (\n          cachedElement &&\n          getLinearElementSubType(cachedElement) === nextType\n        ) {\n          nextElementsMap.set(cachedElement.id, cachedElement);\n          convertedElements.push(cachedElement);\n        } else {\n          const converted = convertElementType(element, nextType, app);\n          nextElementsMap.set(converted.id, converted);\n          convertedElements.push(converted);\n        }\n      }\n\n      app.scene.replaceAllElements(nextElementsMap);\n\n      // post normalization\n      for (const element of convertedElements) {\n        if (isLinearElement(element)) {\n          if (isElbowArrow(element)) {\n            const nextPoints = convertLineToElbow(element);\n            if (nextPoints.length < 2) {\n              // skip if not enough points to form valid segments\n              continue;\n            }\n            const fixedSegments: FixedSegment[] = [];\n            for (let i = 1; i < nextPoints.length - 2; i++) {\n              fixedSegments.push({\n                start: nextPoints[i],\n                end: nextPoints[i + 1],\n                index: i + 1,\n              });\n            }\n            const updates = updateElbowArrowPoints(\n              element,\n              app.scene.getNonDeletedElementsMap(),\n              {\n                points: nextPoints,\n                fixedSegments,\n              },\n            );\n            mutateElement(element, app.scene.getNonDeletedElementsMap(), {\n              ...updates,\n              endArrowhead: \"arrow\",\n            });\n          } else {\n            // if we're converting to non-elbow linear element, check if\n            // we've already cached one of these linear elements so we can\n            // reuse the points (case: curved->elbow->line and similar)\n\n            const similarCachedLinearElement = mapFind(\n              [\"line\", \"sharpArrow\", \"curvedArrow\"] as const,\n              (type) =>\n                LINEAR_ELEMENT_CONVERSION_CACHE.get(\n                  toCacheKey(element.id, type),\n                ),\n            );\n\n            if (similarCachedLinearElement) {\n              const points = similarCachedLinearElement.points;\n              app.scene.mutateElement(element, {\n                points,\n              });\n            }\n          }\n        }\n      }\n    }\n\n    const convertedSelectedLinearElements = filterLinearConvertibleElements(\n      app.scene.getSelectedElements(app.state),\n    );\n\n    app.setState((prevState) => ({\n      selectedElementIds,\n      selectedLinearElement:\n        convertedSelectedLinearElements.length === 1\n          ? new LinearElementEditor(\n              convertedSelectedLinearElements[0],\n              app.scene.getNonDeletedElementsMap(),\n            )\n          : null,\n      activeTool: updateActiveTool(prevState, {\n        type: \"selection\",\n      }),\n    }));\n  }\n\n  return true;\n};\n\nexport const getConversionTypeFromElements = (\n  elements: JsonDrawElement[],\n): ConversionType => {\n  if (elements.length === 0) {\n    return null;\n  }\n\n  let canBeLinear = false;\n  for (const element of elements) {\n    if (isConvertibleGenericType(element.type)) {\n      // generic type conversion have preference\n      return \"generic\";\n    }\n    if (isEligibleLinearElement(element)) {\n      canBeLinear = true;\n    }\n  }\n\n  if (canBeLinear) {\n    return \"linear\";\n  }\n\n  return null;\n};\n\nconst isEligibleLinearElement = (element: JsonDrawElement) => {\n  return (\n    isLinearElement(element) &&\n    (!isArrowElement(element) ||\n      (!isArrowBoundToElement(element) && !hasBoundTextElement(element)))\n  );\n};\n\nconst toCacheKey = (\n  elementId: JsonDrawElement[\"id\"],\n  convertitleType: ConvertibleTypes,\n) => {\n  return `${elementId}:${convertitleType}` as CacheKey;\n};\n\nconst filterGenericConvetibleElements = (elements: JsonDrawElement[]) =>\n  elements.filter((element) => isConvertibleGenericType(element.type)) as Array<\n    | JsonDrawRectangleElement\n    | JsonDrawDiamondElement\n    | JsonDrawEllipseElement\n  >;\n\nconst filterLinearConvertibleElements = (elements: JsonDrawElement[]) =>\n  elements.filter((element) =>\n    isEligibleLinearElement(element),\n  ) as JsonDrawLinearElement[];\n\nconst THRESHOLD = 20;\nconst isVert = (a: LocalPoint, b: LocalPoint) => a[0] === b[0];\nconst isHorz = (a: LocalPoint, b: LocalPoint) => a[1] === b[1];\nconst dist = (a: LocalPoint, b: LocalPoint) =>\n  isVert(a, b) ? Math.abs(a[1] - b[1]) : Math.abs(a[0] - b[0]);\n\nconst convertLineToElbow = (line: JsonDrawLinearElement): LocalPoint[] => {\n  // 1. build an *orthogonal* route, snapping offsets < SNAP\n  const ortho: LocalPoint[] = [line.points[0]];\n  const src = sanitizePoints(line.points);\n\n  for (let i = 1; i < src.length; ++i) {\n    const start = ortho[ortho.length - 1];\n    const end = [...src[i]] as LocalPoint; // clone\n\n    // snap tiny offsets onto the current axis\n    if (Math.abs(end[0] - start[0]) < THRESHOLD) {\n      end[0] = start[0];\n    } else if (Math.abs(end[1] - start[1]) < THRESHOLD) {\n      end[1] = start[1];\n    }\n\n    // straight or needs a 90  bend?\n    if (isVert(start, end) || isHorz(start, end)) {\n      ortho.push(end);\n    } else {\n      ortho.push(pointFrom<LocalPoint>(start[0], end[1]));\n      ortho.push(end);\n    }\n  }\n\n  // 2. drop obviously colinear middle points\n  const trimmed: LocalPoint[] = [ortho[0]];\n  for (let i = 1; i < ortho.length - 1; ++i) {\n    if (\n      !(\n        (isVert(ortho[i - 1], ortho[i]) && isVert(ortho[i], ortho[i + 1])) ||\n        (isHorz(ortho[i - 1], ortho[i]) && isHorz(ortho[i], ortho[i + 1]))\n      )\n    ) {\n      trimmed.push(ortho[i]);\n    }\n  }\n  trimmed.push(ortho[ortho.length - 1]);\n\n  // 3. collapse micro jogs (V-H-V / H-V-H whose short leg < SNAP)\n  const clean: LocalPoint[] = [trimmed[0]];\n  for (let i = 1; i < trimmed.length - 1; ++i) {\n    const a = clean[clean.length - 1];\n    const b = trimmed[i];\n    const c = trimmed[i + 1];\n\n    const v1 = isVert(a, b);\n    const v2 = isVert(b, c);\n    if (v1 !== v2) {\n      const d1 = dist(a, b);\n      const d2 = dist(b, c);\n\n      if (d1 < THRESHOLD || d2 < THRESHOLD) {\n        // pick the shorter leg to remove\n        if (d2 < d1) {\n          //  absorb leg 2  pull *c* onto axis of *a-b*\n          if (v1) {\n            c[0] = a[0];\n          } else {\n            c[1] = a[1];\n          }\n        } else {\n          //  absorb leg 1  slide the whole first leg onto *b-c* axis\n          // eslint-disable-next-line no-lonely-if\n          if (v2) {\n            for (\n              let k = clean.length - 1;\n              k >= 0 && clean[k][0] === a[0];\n              --k\n            ) {\n              clean[k][0] = b[0];\n            }\n          } else {\n            for (\n              let k = clean.length - 1;\n              k >= 0 && clean[k][1] === a[1];\n              --k\n            ) {\n              clean[k][1] = b[1];\n            }\n          }\n        }\n        // *b* is gone, dont add it\n        continue;\n      }\n    }\n    clean.push(b);\n  }\n  clean.push(trimmed[trimmed.length - 1]);\n  return clean;\n};\n\nconst sanitizePoints = (points: readonly LocalPoint[]): LocalPoint[] => {\n  if (points.length === 0) {\n    return [];\n  }\n\n  const sanitized: LocalPoint[] = [points[0]];\n\n  for (let i = 1; i < points.length; i++) {\n    const [x1, y1] = sanitized[sanitized.length - 1];\n    const [x2, y2] = points[i];\n\n    if (x1 !== x2 || y1 !== y2) {\n      sanitized.push(points[i]);\n    }\n  }\n\n  return sanitized;\n};\n\n/**\n * Converts an element to a new type, adding or removing properties as needed\n * so that the element object is always valid.\n *\n * Valid conversions at this point:\n * - switching between generic elements\n *   e.g. rectangle -> diamond\n * - switching between linear elements\n *   e.g. elbow arrow -> line\n */\nconst convertElementType = <\n  TElement extends Exclude<JsonDrawElement, JsonDrawSelectionElement>,\n>(\n  element: TElement,\n  targetType: ConvertibleTypes,\n  app: AppClassProperties,\n): JsonDrawElement => {\n  if (!isValidConversion(element.type, targetType)) {\n    if (!isProdEnv()) {\n      throw Error(`Invalid conversion from ${element.type} to ${targetType}.`);\n    }\n    return element;\n  }\n\n  if (element.type === targetType) {\n    return element;\n  }\n\n  ShapeCache.delete(element);\n\n  if (isConvertibleGenericType(targetType)) {\n    const nextElement = bumpVersion(\n      newElement({\n        ...element,\n        type: targetType,\n        roundness:\n          targetType === \"diamond\" && element.roundness\n            ? {\n                type: isUsingAdaptiveRadius(targetType)\n                  ? ROUNDNESS.ADAPTIVE_RADIUS\n                  : ROUNDNESS.PROPORTIONAL_RADIUS,\n              }\n            : element.roundness,\n      }),\n    ) as typeof element;\n\n    updateBindings(nextElement, app.scene, app.state);\n\n    return nextElement;\n  }\n\n  if (isConvertibleLinearType(targetType)) {\n    switch (targetType) {\n      case \"line\": {\n        return bumpVersion(\n          newLinearElement({\n            ...element,\n            type: \"line\",\n          }),\n        );\n      }\n      case \"sharpArrow\": {\n        return bumpVersion(\n          newArrowElement({\n            ...element,\n            type: \"arrow\",\n            elbowed: false,\n            roundness: null,\n            startArrowhead: app.state.currentItemStartArrowhead,\n            endArrowhead: app.state.currentItemEndArrowhead,\n          }),\n        );\n      }\n      case \"curvedArrow\": {\n        return bumpVersion(\n          newArrowElement({\n            ...element,\n            type: \"arrow\",\n            elbowed: false,\n            roundness: {\n              type: ROUNDNESS.PROPORTIONAL_RADIUS,\n            },\n            startArrowhead: app.state.currentItemStartArrowhead,\n            endArrowhead: app.state.currentItemEndArrowhead,\n          }),\n        );\n      }\n      case \"elbowArrow\": {\n        return bumpVersion(\n          newArrowElement({\n            ...element,\n            type: \"arrow\",\n            elbowed: true,\n            fixedSegments: null,\n            roundness: null,\n          }),\n        );\n      }\n    }\n  }\n\n  assertNever(targetType, `unhandled conversion type: ${targetType}`);\n\n  return element;\n};\n\nconst isValidConversion = (\n  startType: string,\n  targetType: ConvertibleTypes,\n): startType is ConvertibleTypes => {\n  if (\n    isConvertibleGenericType(startType) &&\n    isConvertibleGenericType(targetType)\n  ) {\n    return true;\n  }\n\n  if (\n    isConvertibleLinearType(startType) &&\n    isConvertibleLinearType(targetType)\n  ) {\n    return true;\n  }\n\n  // NOTE: add more conversions when needed\n\n  return false;\n};\n\nconst getConvertibleType = (\n  element: JsonDrawConvertibleElement,\n): ConvertibleTypes => {\n  if (isLinearElement(element)) {\n    return getLinearElementSubType(element);\n  }\n  return element.type;\n};\n\nexport default ConvertElementTypePopup;\n","import { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport {\n  getConversionTypeFromElements,\n  convertElementTypePopupAtom,\n} from \"../components/popups/ConvertElementTypePopup\";\nimport { editorJotaiStore } from \"../editor-jotai\";\n\nimport { register } from \"./register\";\n\nexport const actionToggleShapeSwitch = register({\n  name: \"toggleShapeSwitch\",\n  label: \"labels.shapeSwitch\",\n  icon: () => null,\n  viewMode: true,\n  trackEvent: {\n    category: \"shape_switch\",\n    action: \"toggle\",\n  },\n  keywords: [\"change\", \"switch\", \"swap\"],\n  perform(elements, appState, _, app) {\n    editorJotaiStore.set(convertElementTypePopupAtom, {\n      type: \"panel\",\n    });\n\n    return {\n      captureUpdate: CaptureUpdateAction.NEVER,\n    };\n  },\n  checked: (appState) => appState.gridModeEnabled,\n  predicate: (elements, appState, props) =>\n    getConversionTypeFromElements(elements as JsonDrawElement[]) !== null,\n});\n","import {\n  canCreateLinkFromElements,\n  defaultGetElementLinkFromSelection,\n  getLinkIdAndTypeFromSelection,\n} from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { copyTextToSystemClipboard } from \"../clipboard\";\nimport { copyIcon, elementLinkIcon } from \"../components/icons\";\nimport { t } from \"../i18n\";\nimport { getSelectedElements } from \"../scene\";\n\nimport { register } from \"./register\";\n\nexport const actionCopyElementLink = register({\n  name: \"copyElementLink\",\n  label: \"labels.copyElementLink\",\n  icon: copyIcon,\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, _, app) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    try {\n      if (window.location) {\n        const idAndType = getLinkIdAndTypeFromSelection(\n          selectedElements,\n          appState,\n        );\n\n        if (idAndType) {\n          await copyTextToSystemClipboard(\n            app.props.generateLinkForSelection\n              ? app.props.generateLinkForSelection(idAndType.id, idAndType.type)\n              : defaultGetElementLinkFromSelection(\n                  idAndType.id,\n                  idAndType.type,\n                ),\n          );\n\n          return {\n            appState: {\n              toast: {\n                message: t(\"toast.elementLinkCopied\"),\n                closable: true,\n              },\n            },\n            captureUpdate: CaptureUpdateAction.EVENTUALLY,\n          };\n        }\n        return {\n          appState,\n          elements,\n          app,\n          captureUpdate: CaptureUpdateAction.EVENTUALLY,\n        };\n      }\n    } catch (error: any) {\n      console.error(error);\n    }\n\n    return {\n      appState,\n      elements,\n      app,\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  predicate: (elements, appState) =>\n    canCreateLinkFromElements(getSelectedElements(elements, appState)),\n});\n\nexport const actionLinkToElement = register({\n  name: \"linkToElement\",\n  label: \"labels.linkToElement\",\n  icon: elementLinkIcon,\n  perform: (elements, appState, _, app) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    if (\n      selectedElements.length !== 1 ||\n      !canCreateLinkFromElements(selectedElements)\n    ) {\n      return {\n        elements,\n        appState,\n        app,\n        captureUpdate: CaptureUpdateAction.EVENTUALLY,\n      };\n    }\n\n    return {\n      appState: {\n        ...appState,\n        openDialog: {\n          name: \"elementLinkSelector\",\n          sourceElementId: getSelectedElements(elements, appState)[0].id,\n        },\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  predicate: (elements, appState, appProps, app) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    return (\n      appState.openDialog?.name !== \"elementLinkSelector\" &&\n      selectedElements.length === 1 &&\n      canCreateLinkFromElements(selectedElements)\n    );\n  },\n  trackEvent: false,\n});\n","import { isDarwin } from \"@jsondraw/common\";\n\nimport type { SubtypeOf } from \"@jsondraw/common/utility-types\";\n\nimport { t } from \"../i18n\";\nimport { getShortcutKey } from \"../shortcut\";\n\nimport type { ActionName } from \"./types\";\n\nexport type ShortcutName =\n  | SubtypeOf<\n      ActionName,\n      | \"toggleTheme\"\n      | \"loadScene\"\n      | \"clearCanvas\"\n      | \"cut\"\n      | \"copy\"\n      | \"paste\"\n      | \"copyStyles\"\n      | \"pasteStyles\"\n      | \"selectAll\"\n      | \"deleteSelectedElements\"\n      | \"duplicateSelection\"\n      | \"sendBackward\"\n      | \"bringForward\"\n      | \"sendToBack\"\n      | \"bringToFront\"\n      | \"copyAsPng\"\n      | \"group\"\n      | \"ungroup\"\n      | \"gridMode\"\n      | \"zenMode\"\n      | \"objectsSnapMode\"\n      | \"stats\"\n      | \"addToLibrary\"\n      | \"viewMode\"\n      | \"flipHorizontal\"\n      | \"flipVertical\"\n      | \"hyperlink\"\n      | \"toggleElementLock\"\n      | \"resetZoom\"\n      | \"zoomOut\"\n      | \"zoomIn\"\n      | \"zoomToFit\"\n      | \"zoomToFitSelectionInViewport\"\n      | \"zoomToFitSelection\"\n      | \"toggleEraserTool\"\n      | \"toggleHandTool\"\n      | \"setFrameAsActiveTool\"\n      | \"saveFileToDisk\"\n      | \"saveToActiveFile\"\n      | \"toggleShortcuts\"\n      | \"wrapSelectionInFrame\"\n    >\n  | \"saveScene\"\n  | \"imageExport\"\n  | \"commandPalette\"\n  | \"searchMenu\"\n  | \"toolLock\";\n\nconst shortcutMap: Record<ShortcutName, string[]> = {\n  toggleTheme: [getShortcutKey(\"Shift+Alt+D\")],\n  saveScene: [getShortcutKey(\"CtrlOrCmd+S\")],\n  loadScene: [getShortcutKey(\"CtrlOrCmd+O\")],\n  clearCanvas: [getShortcutKey(\"CtrlOrCmd+Delete\")],\n  imageExport: [getShortcutKey(\"CtrlOrCmd+Shift+E\")],\n  commandPalette: [\n    getShortcutKey(\"CtrlOrCmd+/\"),\n    getShortcutKey(\"CtrlOrCmd+Shift+P\"),\n  ],\n  cut: [getShortcutKey(\"CtrlOrCmd+X\")],\n  copy: [getShortcutKey(\"CtrlOrCmd+C\")],\n  paste: [getShortcutKey(\"CtrlOrCmd+V\")],\n  copyStyles: [getShortcutKey(\"CtrlOrCmd+Alt+C\")],\n  pasteStyles: [getShortcutKey(\"CtrlOrCmd+Alt+V\")],\n  selectAll: [getShortcutKey(\"CtrlOrCmd+A\")],\n  deleteSelectedElements: [getShortcutKey(\"Delete\")],\n  duplicateSelection: [\n    getShortcutKey(\"CtrlOrCmd+D\"),\n    getShortcutKey(`Alt+${t(\"helpDialog.drag\")}`),\n  ],\n  sendBackward: [getShortcutKey(\"CtrlOrCmd+[\")],\n  bringForward: [getShortcutKey(\"CtrlOrCmd+]\")],\n  sendToBack: [\n    isDarwin\n      ? getShortcutKey(\"CtrlOrCmd+Alt+[\")\n      : getShortcutKey(\"CtrlOrCmd+Shift+[\"),\n  ],\n  bringToFront: [\n    isDarwin\n      ? getShortcutKey(\"CtrlOrCmd+Alt+]\")\n      : getShortcutKey(\"CtrlOrCmd+Shift+]\"),\n  ],\n  copyAsPng: [getShortcutKey(\"Shift+Alt+C\")],\n  group: [getShortcutKey(\"CtrlOrCmd+G\")],\n  ungroup: [getShortcutKey(\"CtrlOrCmd+Shift+G\")],\n  gridMode: [getShortcutKey(\"CtrlOrCmd+'\")],\n  zenMode: [getShortcutKey(\"Alt+Z\")],\n  objectsSnapMode: [getShortcutKey(\"Alt+S\")],\n  stats: [getShortcutKey(\"Alt+/\")],\n  addToLibrary: [],\n  flipHorizontal: [getShortcutKey(\"Shift+H\")],\n  flipVertical: [getShortcutKey(\"Shift+V\")],\n  viewMode: [getShortcutKey(\"Alt+R\")],\n  hyperlink: [getShortcutKey(\"CtrlOrCmd+K\")],\n  toggleElementLock: [getShortcutKey(\"CtrlOrCmd+Shift+L\")],\n  resetZoom: [getShortcutKey(\"CtrlOrCmd+0\")],\n  zoomOut: [getShortcutKey(\"CtrlOrCmd+-\")],\n  zoomIn: [getShortcutKey(\"CtrlOrCmd++\")],\n  zoomToFitSelection: [getShortcutKey(\"Shift+3\")],\n  zoomToFit: [getShortcutKey(\"Shift+1\")],\n  zoomToFitSelectionInViewport: [getShortcutKey(\"Shift+2\")],\n  toggleEraserTool: [getShortcutKey(\"E\")],\n  toggleHandTool: [getShortcutKey(\"H\")],\n  setFrameAsActiveTool: [getShortcutKey(\"F\")],\n  saveFileToDisk: [getShortcutKey(\"CtrlOrCmd+S\")],\n  saveToActiveFile: [getShortcutKey(\"CtrlOrCmd+S\")],\n  toggleShortcuts: [getShortcutKey(\"?\")],\n  searchMenu: [getShortcutKey(\"CtrlOrCmd+F\")],\n  wrapSelectionInFrame: [],\n  toolLock: [getShortcutKey(\"Q\")],\n};\n\nexport const getShortcutFromShortcutName = (name: ShortcutName, idx = 0) => {\n  const shortcuts = shortcutMap[name];\n  // if multiple shortcuts available, take the first one\n  return shortcuts && shortcuts.length > 0\n    ? shortcuts[idx] || shortcuts[0]\n    : \"\";\n};\n","import { MIME_TYPES } from \"@jsondraw/common\";\nimport { getDefaultAppState } from \"@jsondraw/jsondraw/appState\";\nimport {\n  copyBlobToClipboardAsPng,\n  copyTextToSystemClipboard,\n  copyToClipboard,\n} from \"@jsondraw/jsondraw/clipboard\";\nimport { encodePngMetadata } from \"@jsondraw/jsondraw/data/image\";\nimport { serializeAsJSON } from \"@jsondraw/jsondraw/data/json\";\nimport {\n  restoreAppState,\n  restoreElements,\n} from \"@jsondraw/jsondraw/data/restore\";\nimport {\n  exportToCanvas as _exportToCanvas,\n  exportToSvg as _exportToSvg,\n} from \"@jsondraw/jsondraw/scene/export\";\n\nimport type {\n  JsonDrawElement,\n  JsonDrawFrameLikeElement,\n  NonDeleted,\n} from \"@jsondraw/element/types\";\nimport type { AppState, BinaryFiles } from \"@jsondraw/jsondraw/types\";\n\nexport { MIME_TYPES };\n\ntype ExportOpts = {\n  elements: readonly NonDeleted<JsonDrawElement>[];\n  appState?: Partial<Omit<AppState, \"offsetTop\" | \"offsetLeft\">>;\n  files: BinaryFiles | null;\n  maxWidthOrHeight?: number;\n  exportingFrame?: JsonDrawFrameLikeElement | null;\n  getDimensions?: (\n    width: number,\n    height: number,\n  ) => { width: number; height: number; scale?: number };\n};\n\nexport const exportToCanvas = ({\n  elements,\n  appState,\n  files,\n  maxWidthOrHeight,\n  getDimensions,\n  exportPadding,\n  exportingFrame,\n}: ExportOpts & {\n  exportPadding?: number;\n}) => {\n  const restoredElements = restoreElements(elements, null, {\n    deleteInvisibleElements: true,\n  });\n  const restoredAppState = restoreAppState(appState, null);\n\n  const { exportBackground, viewBackgroundColor } = restoredAppState;\n  return _exportToCanvas(\n    restoredElements,\n    { ...restoredAppState, offsetTop: 0, offsetLeft: 0, width: 0, height: 0 },\n    files || {},\n    { exportBackground, exportPadding, viewBackgroundColor, exportingFrame },\n    (width: number, height: number) => {\n      const canvas = document.createElement(\"canvas\");\n\n      if (maxWidthOrHeight) {\n        if (typeof getDimensions === \"function\") {\n          console.warn(\n            \"`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.\",\n          );\n        }\n\n        const max = Math.max(width, height);\n\n        // if content is less then maxWidthOrHeight, fallback on supplied scale\n        const scale =\n          maxWidthOrHeight < max\n            ? maxWidthOrHeight / max\n            : appState?.exportScale ?? 1;\n\n        canvas.width = width * scale;\n        canvas.height = height * scale;\n\n        return {\n          canvas,\n          scale,\n        };\n      }\n\n      const ret = getDimensions?.(width, height) || { width, height };\n\n      canvas.width = ret.width;\n      canvas.height = ret.height;\n\n      return {\n        canvas,\n        scale: ret.scale ?? 1,\n      };\n    },\n  );\n};\n\nexport const exportToBlob = async (\n  opts: ExportOpts & {\n    mimeType?: string;\n    quality?: number;\n    exportPadding?: number;\n  },\n): Promise<Blob> => {\n  let { mimeType = MIME_TYPES.png, quality } = opts;\n\n  if (mimeType === MIME_TYPES.png && typeof quality === \"number\") {\n    console.warn(`\"quality\" will be ignored for \"${MIME_TYPES.png}\" mimeType`);\n  }\n\n  // typo in MIME type (should be \"jpeg\")\n  if (mimeType === \"image/jpg\") {\n    mimeType = MIME_TYPES.jpg;\n  }\n\n  if (mimeType === MIME_TYPES.jpg && !opts.appState?.exportBackground) {\n    console.warn(\n      `Defaulting \"exportBackground\" to \"true\" for \"${MIME_TYPES.jpg}\" mimeType`,\n    );\n    opts = {\n      ...opts,\n      appState: { ...opts.appState, exportBackground: true },\n    };\n  }\n\n  const canvas = await exportToCanvas(opts);\n\n  quality = quality ? quality : /image\\/jpe?g/.test(mimeType) ? 0.92 : 0.8;\n\n  return new Promise((resolve, reject) => {\n    canvas.toBlob(\n      async (blob) => {\n        if (!blob) {\n          return reject(new Error(\"couldn't export to blob\"));\n        }\n        if (\n          blob &&\n          mimeType === MIME_TYPES.png &&\n          opts.appState?.exportEmbedScene\n        ) {\n          blob = await encodePngMetadata({\n            blob,\n            metadata: serializeAsJSON(\n              // NOTE as long as we're using the Scene hack, we need to ensure\n              // we pass the original, uncloned elements when serializing\n              // so that we keep ids stable\n              opts.elements,\n              opts.appState,\n              opts.files || {},\n              \"local\",\n            ),\n          });\n        }\n        resolve(blob);\n      },\n      mimeType,\n      quality,\n    );\n  });\n};\n\nexport const exportToSvg = async ({\n  elements,\n  appState = getDefaultAppState(),\n  files = {},\n  exportPadding,\n  renderEmbeddables,\n  exportingFrame,\n  skipInliningFonts,\n  reuseImages,\n}: Omit<ExportOpts, \"getDimensions\"> & {\n  exportPadding?: number;\n  renderEmbeddables?: boolean;\n  skipInliningFonts?: true;\n  reuseImages?: boolean;\n}): Promise<SVGSVGElement> => {\n  const restoredElements = restoreElements(elements, null, {\n    deleteInvisibleElements: true,\n  });\n  const restoredAppState = restoreAppState(appState, null);\n\n  const exportAppState = {\n    ...restoredAppState,\n    exportPadding,\n  };\n\n  return _exportToSvg(restoredElements, exportAppState, files, {\n    exportingFrame,\n    renderEmbeddables,\n    skipInliningFonts,\n    reuseImages,\n  });\n};\n\nexport const exportToClipboard = async (\n  opts: ExportOpts & {\n    mimeType?: string;\n    quality?: number;\n    type: \"png\" | \"svg\" | \"json\";\n  },\n) => {\n  if (opts.type === \"svg\") {\n    const svg = await exportToSvg(opts);\n    await copyTextToSystemClipboard(svg.outerHTML);\n  } else if (opts.type === \"png\") {\n    await copyBlobToClipboardAsPng(exportToBlob(opts));\n  } else if (opts.type === \"json\") {\n    await copyToClipboard(opts.elements, opts.files);\n  } else {\n    throw new Error(\"Invalid export type\");\n  }\n};\n","import { exportToSvg } from \"@jsondraw/utils/export\";\nimport { useEffect, useState } from \"react\";\n\nimport { COLOR_PALETTE } from \"@jsondraw/common\";\n\nimport { atom, useAtom } from \"../editor-jotai\";\n\nimport type { LibraryItem } from \"../types\";\n\nexport type SvgCache = Map<LibraryItem[\"id\"], SVGSVGElement>;\n\nexport const libraryItemSvgsCache = atom<SvgCache>(new Map());\n\nconst exportLibraryItemToSvg = async (elements: LibraryItem[\"elements\"]) => {\n  // TODO should pass theme (appState.exportWithDark) - we're still using\n  // CSS filter here\n  return await exportToSvg({\n    elements,\n    appState: {\n      exportBackground: false,\n      viewBackgroundColor: COLOR_PALETTE.white,\n    },\n    files: null,\n    renderEmbeddables: false,\n    skipInliningFonts: true,\n  });\n};\n\nexport const useLibraryItemSvg = (\n  id: LibraryItem[\"id\"] | null,\n  elements: LibraryItem[\"elements\"] | undefined,\n  svgCache: SvgCache,\n  ref: React.RefObject<HTMLDivElement | null>,\n): SVGSVGElement | undefined => {\n  const [svg, setSvg] = useState<SVGSVGElement>();\n\n  useEffect(() => {\n    if (elements) {\n      if (id) {\n        // Try to load cached svg\n        const cachedSvg = svgCache.get(id);\n\n        if (cachedSvg) {\n          setSvg(cachedSvg);\n        } else {\n          // When there is no svg in cache export it and save to cache\n          (async () => {\n            const exportedSvg = await exportLibraryItemToSvg(elements);\n            // TODO: should likely be removed for custom fonts\n            exportedSvg.querySelector(\".style-fonts\")?.remove();\n\n            if (exportedSvg) {\n              svgCache.set(id, exportedSvg);\n              setSvg(exportedSvg);\n            }\n          })();\n        }\n      } else {\n        // When we have no id (usualy selected items from canvas) just export the svg\n        (async () => {\n          const exportedSvg = await exportLibraryItemToSvg(elements);\n          setSvg(exportedSvg);\n        })();\n      }\n    }\n  }, [id, elements, svgCache, setSvg]);\n\n  useEffect(() => {\n    const node = ref.current;\n\n    if (!node) {\n      return;\n    }\n\n    if (svg) {\n      node.innerHTML = svg.outerHTML;\n    }\n\n    return () => {\n      node.innerHTML = \"\";\n    };\n  }, [svg, ref]);\n\n  return svg;\n};\n\nexport const useLibraryCache = () => {\n  const [svgCache] = useAtom(libraryItemSvgsCache);\n\n  const clearLibraryCache = () => svgCache.clear();\n\n  const deleteItemsFromLibraryCache = (items: LibraryItem[\"id\"][]) => {\n    items.forEach((item) => svgCache.delete(item));\n  };\n\n  return {\n    clearLibraryCache,\n    deleteItemsFromLibraryCache,\n    svgCache,\n  };\n};\n","import { useEffect, useRef } from \"react\";\nimport {\n  URL_HASH_KEYS,\n  URL_QUERY_KEYS,\n  APP_NAME,\n  EVENT,\n  DEFAULT_SIDEBAR,\n  LIBRARY_SIDEBAR_TAB,\n  arrayToMap,\n  cloneJSON,\n  preventUnload,\n  promiseTry,\n  resolvablePromise,\n  toValidURL,\n  Queue,\n  Emitter,\n} from \"@jsondraw/common\";\nimport type { MaybePromise } from \"@jsondraw/common/utility-types\";\nimport { hashElementsVersion, hashString } from \"@jsondraw/element\";\nimport { getCommonBoundingBox } from \"@jsondraw/element\";\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\nimport type App from \"../components/App\";\nimport { atom, editorJotaiStore } from \"../editor-jotai\";\nimport { AbortError } from \"../errors\";\nimport { libraryItemSvgsCache } from \"../hooks/useLibraryItemSvg\";\nimport { t } from \"../i18n\";\nimport type {\n  LibraryItems,\n  LibraryItem,\n  JsonDrawImperativeAPI,\n  LibraryItemsSource,\n  LibraryItems_anyVersion,\n} from \"../types\";\nimport { loadLibraryFromBlob } from \"./blob\";\nimport { restoreLibraryItems } from \"./restore\";\n\n/**\n * format: hostname or hostname/pathname\n *\n * Both hostname and pathname are matched partially,\n * hostname from the end, pathname from the start, with subdomain/path\n * boundaries\n **/\nconst ALLOWED_LIBRARY_URLS = [\n  \"jsonviz.online\",\n  // when installing from github PRs\n  \"raw.githubusercontent.com/jsondraw/jsondraw-libraries\",\n];\n\ntype LibraryUpdate = {\n  /** deleted library items since last onLibraryChange event */\n  deletedItems: Map<LibraryItem[\"id\"], LibraryItem>;\n  /** newly added items in the library */\n  addedItems: Map<LibraryItem[\"id\"], LibraryItem>;\n  updatedItems: Map<LibraryItem[\"id\"], LibraryItem>;\n};\n\n// an object so that we can later add more properties to it without breaking,\n// such as schema version\nexport type LibraryPersistedData = { libraryItems: LibraryItems };\n\nconst onLibraryUpdateEmitter = new Emitter<[update: LibraryUpdate, libraryItems: LibraryItems]>();\n\nexport type LibraryAdatapterSource = \"load\" | \"save\";\n\nexport interface LibraryPersistenceAdapter {\n  /**\n   * Should load data that were previously saved into the database using the\n   * `save` method. Should throw if saving fails.\n   *\n   * Will be used internally in multiple places, such as during save to\n   * in order to reconcile changes with latest store data.\n   */\n  load(metadata: {\n    /**\n     * Indicates whether we're loading data for save purposes, or reading\n     * purposes, in which case host app can implement more aggressive caching.\n     */\n    source: LibraryAdatapterSource;\n  }): MaybePromise<{ libraryItems: LibraryItems_anyVersion } | null>;\n  /** Should persist to the database as is (do no change the data structure). */\n  save(libraryData: LibraryPersistedData): MaybePromise<void>;\n}\n\nexport interface LibraryMigrationAdapter {\n  /**\n   * loads data from legacy data source. Returns `null` if no data is\n   * to be migrated.\n   */\n  load(): MaybePromise<{ libraryItems: LibraryItems_anyVersion } | null>;\n\n  /** clears entire storage afterwards */\n  clear(): MaybePromise<void>;\n}\n\nexport const libraryItemsAtom = atom<{\n  status: \"loading\" | \"loaded\";\n  /** indicates whether library is initialized with library items (has gone\n   * through at least one update). Used in UI. Specific to this atom only. */\n  isInitialized: boolean;\n  libraryItems: LibraryItems;\n}>({ status: \"loaded\", isInitialized: false, libraryItems: [] });\n\nconst cloneLibraryItems = (libraryItems: LibraryItems): LibraryItems => cloneJSON(libraryItems);\n\n/**\n * checks if library item does not exist already in current library\n */\nconst isUniqueItem = (existingLibraryItems: LibraryItems, targetLibraryItem: LibraryItem) => {\n  return !existingLibraryItems.find(libraryItem => {\n    if (libraryItem.elements.length !== targetLibraryItem.elements.length) {\n      return false;\n    }\n\n    // detect z-index difference by checking the jsondraw elements\n    // are in order\n    return libraryItem.elements.every((libItemJsonDrawItem, idx) => {\n      return (\n        libItemJsonDrawItem.id === targetLibraryItem.elements[idx].id &&\n        libItemJsonDrawItem.versionNonce === targetLibraryItem.elements[idx].versionNonce\n      );\n    });\n  });\n};\n\n/** Merges otherItems into localItems. Unique items in otherItems array are\n    sorted first. */\nexport const mergeLibraryItems = (\n  localItems: LibraryItems,\n  otherItems: LibraryItems\n): LibraryItems => {\n  const newItems = [];\n  for (const item of otherItems) {\n    if (isUniqueItem(localItems, item)) {\n      newItems.push(item);\n    }\n  }\n\n  return [...newItems, ...localItems];\n};\n\n/**\n * Returns { deletedItems, addedItems } maps of all added and deleted items\n * since last onLibraryChange event.\n *\n * Host apps are recommended to diff with the latest state they have.\n */\nconst createLibraryUpdate = (\n  prevLibraryItems: LibraryItems,\n  nextLibraryItems: LibraryItems\n): LibraryUpdate => {\n  const nextItemsMap = arrayToMap(nextLibraryItems);\n\n  const update: LibraryUpdate = {\n    deletedItems: new Map<LibraryItem[\"id\"], LibraryItem>(),\n    addedItems: new Map<LibraryItem[\"id\"], LibraryItem>(),\n    updatedItems: new Map<LibraryItem[\"id\"], LibraryItem>(),\n  };\n\n  for (const item of prevLibraryItems) {\n    if (!nextItemsMap.has(item.id)) {\n      update.deletedItems.set(item.id, item);\n    }\n  }\n\n  const prevItemsMap = arrayToMap(prevLibraryItems);\n\n  for (const item of nextLibraryItems) {\n    const prevItem = prevItemsMap.get(item.id);\n    if (!prevItem) {\n      update.addedItems.set(item.id, item);\n    } else if (getLibraryItemHash(prevItem) !== getLibraryItemHash(item)) {\n      update.updatedItems.set(item.id, item);\n    }\n  }\n\n  return update;\n};\n\nclass Library {\n  /** latest libraryItems */\n  private currLibraryItems: LibraryItems = [];\n\n  /** snapshot of library items since last onLibraryChange call */\n  private prevLibraryItems = cloneLibraryItems(this.currLibraryItems);\n\n  private app: App;\n\n  constructor(app: App) {\n    this.app = app;\n  }\n\n  private updateQueue: Promise<LibraryItems>[] = [];\n\n  private getLastUpdateTask = (): Promise<LibraryItems> | undefined => {\n    return this.updateQueue[this.updateQueue.length - 1];\n  };\n\n  private notifyListeners = () => {\n    if (this.updateQueue.length > 0) {\n      editorJotaiStore.set(libraryItemsAtom, s => ({\n        status: \"loading\",\n        libraryItems: this.currLibraryItems,\n        isInitialized: s.isInitialized,\n      }));\n    } else {\n      editorJotaiStore.set(libraryItemsAtom, {\n        status: \"loaded\",\n        libraryItems: this.currLibraryItems,\n        isInitialized: true,\n      });\n      try {\n        const prevLibraryItems = this.prevLibraryItems;\n        this.prevLibraryItems = cloneLibraryItems(this.currLibraryItems);\n\n        const nextLibraryItems = cloneLibraryItems(this.currLibraryItems);\n\n        this.app.props.onLibraryChange?.(nextLibraryItems);\n\n        // for internal use in `useHandleLibrary` hook\n        onLibraryUpdateEmitter.trigger(\n          createLibraryUpdate(prevLibraryItems, nextLibraryItems),\n          nextLibraryItems\n        );\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  /** call on jsondraw instance unmount */\n  destroy = () => {\n    this.updateQueue = [];\n    this.currLibraryItems = [];\n    editorJotaiStore.set(libraryItemSvgsCache, new Map());\n    // TODO uncomment after/if we make jotai store scoped to each excal instance\n    // jotaiStore.set(libraryItemsAtom, {\n    //   status: \"loading\",\n    //   isInitialized: false,\n    //   libraryItems: [],\n    // });\n  };\n\n  resetLibrary = () => {\n    return this.setLibrary([]);\n  };\n\n  /**\n   * @returns latest cloned libraryItems. Awaits all in-progress updates first.\n   */\n  getLatestLibrary = (): Promise<LibraryItems> => {\n    return new Promise(async resolve => {\n      try {\n        const libraryItems = await (this.getLastUpdateTask() || this.currLibraryItems);\n        if (this.updateQueue.length > 0) {\n          resolve(this.getLatestLibrary());\n        } else {\n          resolve(cloneLibraryItems(libraryItems));\n        }\n      } catch (error) {\n        return resolve(this.currLibraryItems);\n      }\n    });\n  };\n\n  // NOTE this is a high-level public API (exposed on JsonDrawAPI) with\n  // a slight overhead (always restoring library items). For internal use\n  // where merging isn't needed, use `library.setLibrary()` directly.\n  updateLibrary = async ({\n    libraryItems,\n    prompt = false,\n    merge = false,\n    openLibraryMenu = false,\n    defaultStatus = \"unpublished\",\n  }: {\n    libraryItems: LibraryItemsSource;\n    merge?: boolean;\n    prompt?: boolean;\n    openLibraryMenu?: boolean;\n    defaultStatus?: \"unpublished\" | \"published\";\n  }): Promise<LibraryItems> => {\n    if (openLibraryMenu) {\n      this.app.setState({\n        openSidebar: { name: DEFAULT_SIDEBAR.name, tab: LIBRARY_SIDEBAR_TAB },\n      });\n    }\n\n    return this.setLibrary(() => {\n      return new Promise<LibraryItems>(async (resolve, reject) => {\n        try {\n          const source = await (typeof libraryItems === \"function\" &&\n          !(libraryItems instanceof Blob)\n            ? libraryItems(this.currLibraryItems)\n            : libraryItems);\n\n          let nextItems;\n\n          if (source instanceof Blob) {\n            nextItems = await loadLibraryFromBlob(source, defaultStatus);\n          } else {\n            nextItems = restoreLibraryItems(source, defaultStatus);\n          }\n          if (\n            !prompt ||\n            window.confirm(\n              t(\"alerts.confirmAddLibrary\", {\n                numShapes: nextItems.length,\n              })\n            )\n          ) {\n            if (prompt) {\n              // focus container if we've prompted. We focus conditionally\n              // lest `props.autoFocus` is disabled (in which case we should\n              // focus only on user action such as prompt confirm)\n              this.app.focusContainer();\n            }\n\n            if (merge) {\n              resolve(mergeLibraryItems(this.currLibraryItems, nextItems));\n            } else {\n              resolve(nextItems);\n            }\n          } else {\n            reject(new AbortError());\n          }\n        } catch (error: any) {\n          reject(error);\n        }\n      });\n    });\n  };\n\n  setLibrary = (\n    /**\n     * LibraryItems that will replace current items. Can be a function which\n     * will be invoked after all previous tasks are resolved\n     * (this is the prefered way to update the library to avoid race conditions,\n     * but you'll want to manually merge the library items in the callback\n     *  - which is what we're doing in Library.importLibrary()).\n     *\n     * If supplied promise is rejected with AbortError, we swallow it and\n     * do not update the library.\n     */\n    libraryItems:\n      | LibraryItems\n      | Promise<LibraryItems>\n      | ((latestLibraryItems: LibraryItems) => LibraryItems | Promise<LibraryItems>)\n  ): Promise<LibraryItems> => {\n    const task = new Promise<LibraryItems>(async (resolve, reject) => {\n      try {\n        await this.getLastUpdateTask();\n\n        if (typeof libraryItems === \"function\") {\n          libraryItems = libraryItems(this.currLibraryItems);\n        }\n\n        this.currLibraryItems = cloneLibraryItems(await libraryItems);\n\n        resolve(this.currLibraryItems);\n      } catch (error: any) {\n        reject(error);\n      }\n    })\n      .catch(error => {\n        if (error.name === \"AbortError\") {\n          console.warn(\"Library update aborted by user\");\n          return this.currLibraryItems;\n        }\n        throw error;\n      })\n      .finally(() => {\n        this.updateQueue = this.updateQueue.filter(_task => _task !== task);\n        this.notifyListeners();\n      });\n\n    this.updateQueue.push(task);\n    this.notifyListeners();\n\n    return task;\n  };\n}\n\nexport default Library;\n\nexport const distributeLibraryItemsOnSquareGrid = (libraryItems: LibraryItems) => {\n  const PADDING = 50;\n  const ITEMS_PER_ROW = Math.ceil(Math.sqrt(libraryItems.length));\n\n  const resElements: JsonDrawElement[] = [];\n\n  const getMaxHeightPerRow = (row: number) => {\n    const maxHeight = libraryItems\n      .slice(row * ITEMS_PER_ROW, row * ITEMS_PER_ROW + ITEMS_PER_ROW)\n      .reduce((acc, item) => {\n        const { height } = getCommonBoundingBox(item.elements);\n        return Math.max(acc, height);\n      }, 0);\n    return maxHeight;\n  };\n\n  const getMaxWidthPerCol = (targetCol: number) => {\n    let index = 0;\n    let currCol = 0;\n    let maxWidth = 0;\n    for (const item of libraryItems) {\n      if (index % ITEMS_PER_ROW === 0) {\n        currCol = 0;\n      }\n      if (currCol === targetCol) {\n        const { width } = getCommonBoundingBox(item.elements);\n        maxWidth = Math.max(maxWidth, width);\n      }\n      index++;\n      currCol++;\n    }\n    return maxWidth;\n  };\n\n  let colOffsetX = 0;\n  let rowOffsetY = 0;\n\n  let maxHeightCurrRow = 0;\n  let maxWidthCurrCol = 0;\n\n  let index = 0;\n  let col = 0;\n  let row = 0;\n\n  for (const item of libraryItems) {\n    if (index && index % ITEMS_PER_ROW === 0) {\n      rowOffsetY += maxHeightCurrRow + PADDING;\n      colOffsetX = 0;\n      col = 0;\n      row++;\n    }\n\n    if (col === 0) {\n      maxHeightCurrRow = getMaxHeightPerRow(row);\n    }\n    maxWidthCurrCol = getMaxWidthPerCol(col);\n\n    const { minX, minY, width, height } = getCommonBoundingBox(item.elements);\n    const offsetCenterX = (maxWidthCurrCol - width) / 2;\n    const offsetCenterY = (maxHeightCurrRow - height) / 2;\n    resElements.push(\n      // eslint-disable-next-line no-loop-func\n      ...item.elements.map(element => ({\n        ...element,\n        x:\n          element.x +\n          // offset for column\n          colOffsetX +\n          // offset to center in given square grid\n          offsetCenterX -\n          // subtract minX so that given item starts at 0 coord\n          minX,\n        y:\n          element.y +\n          // offset for row\n          rowOffsetY +\n          // offset to center in given square grid\n          offsetCenterY -\n          // subtract minY so that given item starts at 0 coord\n          minY,\n      }))\n    );\n    colOffsetX += maxWidthCurrCol + PADDING;\n    index++;\n    col++;\n  }\n\n  return resElements;\n};\n\nexport const validateLibraryUrl = (\n  libraryUrl: string,\n  /**\n   * @returns `true` if the URL is valid, throws otherwise.\n   */\n  validator: ((libraryUrl: string) => boolean) | string[] = ALLOWED_LIBRARY_URLS\n): true => {\n  if (\n    typeof validator === \"function\"\n      ? validator(libraryUrl)\n      : validator.some(allowedUrlDef => {\n          const allowedUrl = new URL(`https://${allowedUrlDef.replace(/^https?:\\/\\//, \"\")}`);\n\n          const { hostname, pathname } = new URL(libraryUrl);\n\n          return (\n            new RegExp(`(^|\\\\.)${allowedUrl.hostname}$`).test(hostname) &&\n            new RegExp(`^${allowedUrl.pathname.replace(/\\/+$/, \"\")}(/+|$)`).test(pathname)\n          );\n        })\n  ) {\n    return true;\n  }\n\n  throw new Error(`Invalid or disallowed library URL: \"${libraryUrl}\"`);\n};\n\nexport const parseLibraryTokensFromUrl = () => {\n  const libraryUrl =\n    // current\n    new URLSearchParams(window.location.hash.slice(1)).get(URL_HASH_KEYS.addLibrary) ||\n    // legacy, kept for compat reasons\n    new URLSearchParams(window.location.search).get(URL_QUERY_KEYS.addLibrary);\n  const idToken = libraryUrl\n    ? new URLSearchParams(window.location.hash.slice(1)).get(\"token\")\n    : null;\n\n  return libraryUrl ? { libraryUrl, idToken } : null;\n};\n\nclass AdapterTransaction {\n  static queue = new Queue();\n\n  static async getLibraryItems(\n    adapter: LibraryPersistenceAdapter,\n    source: LibraryAdatapterSource,\n    _queue = true\n  ): Promise<LibraryItems> {\n    const task = () =>\n      new Promise<LibraryItems>(async (resolve, reject) => {\n        try {\n          const data = await adapter.load({ source });\n          resolve(restoreLibraryItems(data?.libraryItems || [], \"published\"));\n        } catch (error: any) {\n          reject(error);\n        }\n      });\n\n    if (_queue) {\n      return AdapterTransaction.queue.push(task);\n    }\n\n    return task();\n  }\n\n  static run = async <T>(\n    adapter: LibraryPersistenceAdapter,\n    fn: (transaction: AdapterTransaction) => Promise<T>\n  ) => {\n    const transaction = new AdapterTransaction(adapter);\n    return AdapterTransaction.queue.push(() => fn(transaction));\n  };\n\n  // ------------------\n\n  private adapter: LibraryPersistenceAdapter;\n\n  constructor(adapter: LibraryPersistenceAdapter) {\n    this.adapter = adapter;\n  }\n\n  getLibraryItems(source: LibraryAdatapterSource) {\n    return AdapterTransaction.getLibraryItems(this.adapter, source, false);\n  }\n}\n\nlet lastSavedLibraryItemsHash = 0;\nlet librarySaveCounter = 0;\n\nconst getLibraryItemHash = (item: LibraryItem) => {\n  return `${item.id}:${item.name || \"\"}:${hashElementsVersion(item.elements)}`;\n};\n\nexport const getLibraryItemsHash = (items: LibraryItems) => {\n  return hashString(\n    items\n      .map(item => getLibraryItemHash(item))\n      .sort()\n      .join()\n  );\n};\n\nconst persistLibraryUpdate = async (\n  adapter: LibraryPersistenceAdapter,\n  update: LibraryUpdate\n): Promise<LibraryItems> => {\n  try {\n    librarySaveCounter++;\n\n    return await AdapterTransaction.run(adapter, async transaction => {\n      const nextLibraryItemsMap = arrayToMap(await transaction.getLibraryItems(\"save\"));\n\n      for (const [id] of update.deletedItems) {\n        nextLibraryItemsMap.delete(id);\n      }\n\n      const addedItems: LibraryItem[] = [];\n\n      // we want to merge current library items with the ones stored in the\n      // DB so that we don't lose any elements that for some reason aren't\n      // in the current editor library, which could happen when:\n      //\n      // 1. we haven't received an update deleting some elements\n      //    (in which case it's still better to keep them in the DB lest\n      //     it was due to a different reason)\n      // 2. we keep a single DB for all active editors, but the editors'\n      //    libraries aren't synced or there's a race conditions during\n      //    syncing\n      // 3. some other race condition, e.g. during init where emit updates\n      //    for partial updates (e.g. you install a 3rd party library and\n      //    init from DB only after  we emit events for both updates)\n      for (const [id, item] of update.addedItems) {\n        if (nextLibraryItemsMap.has(id)) {\n          // replace item with latest version\n          // TODO we could prefer the newer item instead\n          nextLibraryItemsMap.set(id, item);\n        } else {\n          // we want to prepend the new items with the ones that are already\n          // in DB to preserve the ordering we do in editor (newly added\n          // items are added to the beginning)\n          addedItems.push(item);\n        }\n      }\n\n      // replace existing items with their updated versions\n      if (update.updatedItems) {\n        for (const [id, item] of update.updatedItems) {\n          nextLibraryItemsMap.set(id, item);\n        }\n      }\n\n      const nextLibraryItems = addedItems.concat(Array.from(nextLibraryItemsMap.values()));\n\n      const version = getLibraryItemsHash(nextLibraryItems);\n\n      if (version !== lastSavedLibraryItemsHash) {\n        await adapter.save({ libraryItems: nextLibraryItems });\n      }\n\n      lastSavedLibraryItemsHash = version;\n\n      return nextLibraryItems;\n    });\n  } finally {\n    librarySaveCounter--;\n  }\n};\n\nexport const useHandleLibrary = (\n  opts: {\n    jsondrawAPI: JsonDrawImperativeAPI | null;\n    /**\n     * Return `true` if the library install url should be allowed.\n     * If not supplied, only the jsonviz.online base domain is allowed.\n     */\n    validateLibraryUrl?: (libraryUrl: string) => boolean;\n  } & (\n    | {\n        /** @deprecated we recommend using `opts.adapter` instead */\n        getInitialLibraryItems?: () => MaybePromise<LibraryItemsSource>;\n      }\n    | {\n        adapter: LibraryPersistenceAdapter;\n        /**\n         * Adapter that takes care of loading data from legacy data store.\n         * Supply this if you want to migrate data on initial load from legacy\n         * data store.\n         *\n         * Can be a different LibraryPersistenceAdapter.\n         */\n        migrationAdapter?: LibraryMigrationAdapter;\n      }\n  )\n) => {\n  const { jsondrawAPI } = opts;\n\n  const optsRef = useRef(opts);\n  optsRef.current = opts;\n\n  const isLibraryLoadedRef = useRef(false);\n\n  useEffect(() => {\n    if (!jsondrawAPI) {\n      return;\n    }\n\n    // reset on editor remount (jsondrawAPI changed)\n    isLibraryLoadedRef.current = false;\n\n    const importLibraryFromURL = async ({\n      libraryUrl,\n      idToken,\n    }: {\n      libraryUrl: string;\n      idToken: string | null;\n    }) => {\n      const libraryPromise = new Promise<Blob>(async (resolve, reject) => {\n        try {\n          libraryUrl = decodeURIComponent(libraryUrl);\n\n          libraryUrl = toValidURL(libraryUrl);\n\n          validateLibraryUrl(libraryUrl, optsRef.current.validateLibraryUrl);\n\n          const request = await fetch(libraryUrl);\n          const blob = await request.blob();\n          resolve(blob);\n        } catch (error: any) {\n          reject(error);\n        }\n      });\n\n      const shouldPrompt = idToken !== jsondrawAPI.id;\n\n      // wait for the tab to be focused before continuing in case we'll prompt\n      // for confirmation\n      await (shouldPrompt && document.hidden\n        ? new Promise<void>(resolve => {\n            window.addEventListener(\"focus\", () => resolve(), {\n              once: true,\n            });\n          })\n        : null);\n\n      try {\n        await jsondrawAPI.updateLibrary({\n          libraryItems: libraryPromise,\n          prompt: shouldPrompt,\n          merge: true,\n          defaultStatus: \"published\",\n          openLibraryMenu: true,\n        });\n      } catch (error: any) {\n        jsondrawAPI.updateScene({\n          appState: {\n            errorMessage: error.message,\n          },\n        });\n        throw error;\n      } finally {\n        if (window.location.hash.includes(URL_HASH_KEYS.addLibrary)) {\n          const hash = new URLSearchParams(window.location.hash.slice(1));\n          hash.delete(URL_HASH_KEYS.addLibrary);\n          window.history.replaceState({}, APP_NAME, `#${hash.toString()}`);\n        } else if (window.location.search.includes(URL_QUERY_KEYS.addLibrary)) {\n          const query = new URLSearchParams(window.location.search);\n          query.delete(URL_QUERY_KEYS.addLibrary);\n          window.history.replaceState({}, APP_NAME, `?${query.toString()}`);\n        }\n      }\n    };\n    const onHashChange = (event: HashChangeEvent) => {\n      event.preventDefault();\n      const libraryUrlTokens = parseLibraryTokensFromUrl();\n      if (libraryUrlTokens) {\n        event.stopImmediatePropagation();\n        // If hash changed and it contains library url, import it and replace\n        // the url to its previous state (important in case of collaboration\n        // and similar).\n        // Using history API won't trigger another hashchange.\n        window.history.replaceState({}, \"\", event.oldURL);\n\n        importLibraryFromURL(libraryUrlTokens);\n      }\n    };\n\n    // -------------------------------------------------------------------------\n    // ---------------------------------- init ---------------------------------\n    // -------------------------------------------------------------------------\n\n    const libraryUrlTokens = parseLibraryTokensFromUrl();\n\n    if (libraryUrlTokens) {\n      importLibraryFromURL(libraryUrlTokens);\n    }\n\n    // ------ (A) init load (legacy) -------------------------------------------\n    if (\"getInitialLibraryItems\" in optsRef.current && optsRef.current.getInitialLibraryItems) {\n      console.warn(\n        \"useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead.\"\n      );\n\n      Promise.resolve(optsRef.current.getInitialLibraryItems())\n        .then(libraryItems => {\n          jsondrawAPI.updateLibrary({\n            libraryItems,\n            // merge with current library items because we may have already\n            // populated it (e.g. by installing 3rd party library which can\n            // happen before the DB data is loaded)\n            merge: true,\n          });\n        })\n        .catch((error: any) => {\n          console.error(`UseHandeLibrary getInitialLibraryItems failed: ${error?.message}`);\n        });\n    }\n\n    // -------------------------------------------------------------------------\n    // --------------------------------------------------------- init load -----\n    // -------------------------------------------------------------------------\n\n    // ------ (B) data source adapter ------------------------------------------\n\n    if (\"adapter\" in optsRef.current && optsRef.current.adapter) {\n      const adapter = optsRef.current.adapter;\n      const migrationAdapter = optsRef.current.migrationAdapter;\n\n      const initDataPromise = resolvablePromise<LibraryItems | null>();\n\n      // migrate from old data source if needed\n      // (note, if `migrate` function is defined, we always migrate even\n      //  if the data has already been migrated. In that case it'll be a no-op,\n      //  though with several unnecessary steps  we will still load latest\n      //  DB data during the `persistLibraryChange()` step)\n      // -----------------------------------------------------------------------\n      if (migrationAdapter) {\n        initDataPromise.resolve(\n          promiseTry(migrationAdapter.load)\n            .then(async libraryData => {\n              let restoredData: LibraryItems | null = null;\n              try {\n                // if no library data to migrate, assume no migration needed\n                // and skip persisting to new data store, as well as well\n                // clearing the old store via `migrationAdapter.clear()`\n                if (!libraryData) {\n                  return AdapterTransaction.getLibraryItems(adapter, \"load\");\n                }\n\n                restoredData = restoreLibraryItems(libraryData.libraryItems || [], \"published\");\n\n                // we don't queue this operation because it's running inside\n                // a promise that's running inside Library update queue itself\n                const nextItems = await persistLibraryUpdate(\n                  adapter,\n                  createLibraryUpdate([], restoredData)\n                );\n                try {\n                  await migrationAdapter.clear();\n                } catch (error: any) {\n                  console.error(`couldn't delete legacy library data: ${error.message}`);\n                }\n                // migration suceeded, load migrated data\n                return nextItems;\n              } catch (error: any) {\n                console.error(`couldn't migrate legacy library data: ${error.message}`);\n                // migration failed, load data from previous store, if any\n                return restoredData;\n              }\n            })\n            // errors caught during `migrationAdapter.load()`\n            .catch((error: any) => {\n              console.error(`error during library migration: ${error.message}`);\n              // as a default, load latest library from current data source\n              return AdapterTransaction.getLibraryItems(adapter, \"load\");\n            })\n        );\n      } else {\n        initDataPromise.resolve(promiseTry(AdapterTransaction.getLibraryItems, adapter, \"load\"));\n      }\n\n      // load initial (or migrated) library\n      jsondrawAPI\n        .updateLibrary({\n          libraryItems: initDataPromise.then(libraryItems => {\n            const _libraryItems = libraryItems || [];\n            lastSavedLibraryItemsHash = getLibraryItemsHash(_libraryItems);\n            return _libraryItems;\n          }),\n          // merge with current library items because we may have already\n          // populated it (e.g. by installing 3rd party library which can\n          // happen before the DB data is loaded)\n          merge: true,\n        })\n        .finally(() => {\n          isLibraryLoadedRef.current = true;\n        });\n    }\n    // ---------------------------------------------- data source datapter -----\n\n    window.addEventListener(EVENT.HASHCHANGE, onHashChange);\n    return () => {\n      window.removeEventListener(EVENT.HASHCHANGE, onHashChange);\n    };\n  }, [\n    // important this useEffect only depends on jsondrawAPI so it only reruns\n    // on editor remounts (the jsondrawAPI changes)\n    jsondrawAPI,\n  ]);\n\n  // This effect is run without jsondrawAPI dependency so that host apps\n  // can run this hook outside of an active editor instance and the library\n  // update queue/loop survives editor remounts\n  //\n  // This effect is still only meant to be run if host apps supply an persitence\n  // adapter. If we don't have access to it, it the update listener doesn't\n  // do anything.\n  useEffect(\n    () => {\n      // on update, merge with current library items and persist\n      // -----------------------------------------------------------------------\n      const unsubOnLibraryUpdate = onLibraryUpdateEmitter.on(async (update, nextLibraryItems) => {\n        const isLoaded = isLibraryLoadedRef.current;\n        // we want to operate with the latest adapter, but we don't want this\n        // effect to rerun on every adapter change in case host apps' adapter\n        // isn't stable\n        const adapter = (\"adapter\" in optsRef.current && optsRef.current.adapter) || null;\n        try {\n          if (adapter) {\n            if (\n              // if nextLibraryItems hash identical to previously saved hash,\n              // exit early, even if actual upstream state ends up being\n              // different (e.g. has more data than we have locally), as it'd\n              // be low-impact scenario.\n              lastSavedLibraryItemsHash !== getLibraryItemsHash(nextLibraryItems)\n            ) {\n              await persistLibraryUpdate(adapter, update);\n            }\n          }\n        } catch (error: any) {\n          console.error(`couldn't persist library update: ${error.message}`, update);\n\n          // currently we only show error if an editor is loaded\n          if (isLoaded && optsRef.current.jsondrawAPI) {\n            optsRef.current.jsondrawAPI.updateScene({\n              appState: {\n                errorMessage: t(\"errors.saveLibraryError\"),\n              },\n            });\n          }\n        }\n      });\n\n      const onUnload = (event: Event) => {\n        if (librarySaveCounter) {\n          preventUnload(event);\n        }\n      };\n\n      window.addEventListener(EVENT.BEFORE_UNLOAD, onUnload);\n\n      return () => {\n        window.removeEventListener(EVENT.BEFORE_UNLOAD, onUnload);\n        unsubOnLibraryUpdate();\n        lastSavedLibraryItemsHash = 0;\n        librarySaveCounter = 0;\n      };\n    },\n    [\n      // this effect must not have any deps so it doesn't rerun\n    ]\n  );\n};\n","// taken from lodash (MIT)\n// https://github.com/lodash/lodash/blob/67389a8c78975d97505fa15aa79bec6397749807/lodash.js#L14180\n\nconst rsComboMarksRange = \"\\\\u0300-\\\\u036f\";\nconst reComboHalfMarksRange = \"\\\\ufe20-\\\\ufe2f\";\nconst rsComboSymbolsRange = \"\\\\u20d0-\\\\u20ff\";\nconst rsComboRange =\n  rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\nconst rsCombo = `[${rsComboRange}]`;\n\nconst reComboMark = RegExp(rsCombo, \"g\");\n\nconst reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n// NOTE below letter replacements are modified from lodash to always convert\n// to single-letter form by phonetic similarity to keep indexing identical.\n// Doing this is only useful for search highlighting, and only insofar\n// we use a library that can highlight the original source string using\n// the matching indices. As such, we'll likely need to write our own highlighter\n// anyway. Ultimately, we'll want to write our own matcher altogether\n// so we don't have to do any deburring, which will be the most correct\n// solution.\n//\n// prettier-ignore\nconst deburredLetters = {\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    // normaly Ae/ae\n    '\\xc6': 'E', '\\xe6': 'e',\n    // normally Th/th\n    '\\xde': 'T', '\\xfe': 't',\n    // normally ss\n    '\\xdf': 's',\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    // normally IJ/ij\n    '\\u0132': 'I', '\\u0133': 'i',\n    // normally OE/oe\n    '\\u0152': 'E', '\\u0153': 'e',\n    // normally \"'n\"\n    '\\u0149': \"n\",\n    '\\u017f': 's'\n  };\n\nexport const deburr = (str: string) => {\n  return str\n    .replace(reLatin, (key: string) => {\n      return deburredLetters[key as keyof typeof deburredLetters] || key;\n    })\n    .replace(reComboMark, \"\");\n};\n","import { useRef } from \"react\";\n\n/**\n * Returns a stable function of the same type.\n */\nexport const useStableCallback = <T extends (...args: any[]) => any>(\n  userFn: T,\n) => {\n  const stableRef = useRef<{ userFn: T; stableFn?: T }>({ userFn });\n  stableRef.current.userFn = userFn;\n\n  if (!stableRef.current.stableFn) {\n    stableRef.current.stableFn = ((...args: any[]) =>\n      stableRef.current.userFn(...args)) as T;\n  }\n\n  return stableRef.current.stableFn as T;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ConfirmDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ConfirmDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useCallback, useState } from \"react\";\n\nexport const useCallbackRefState = <T>() => {\n  const [refValue, setRefValue] = useState<T | null>(null);\n  const refCallback = useCallback((value: T | null) => setRefValue(value), []);\n  return [refValue, refCallback] as const;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Dialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Dialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Modal.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Modal.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import clsx from \"clsx\";\nimport { useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport { KEYS } from \"@jsondraw/common\";\n\nimport { useCreatePortalContainer } from \"../../hooks/useCreatePortalContainer\";\n\nimport \"./Modal.scss\";\n\nimport type { AppState } from \"../../types\";\n\nexport const Modal: React.FC<{\n  className?: string;\n  children: React.ReactNode;\n  maxWidth?: number;\n  onCloseRequest(): void;\n  labelledBy: string;\n  theme?: AppState[\"theme\"];\n  closeOnClickOutside?: boolean;\n}> = (props) => {\n  const { closeOnClickOutside = true } = props;\n  const modalRoot = useCreatePortalContainer({\n    className: \"jsondraw-modal-container\",\n  });\n\n  const animationsDisabledRef = useRef(\n    document.body.classList.contains(\"jsondraw-animations-disabled\"),\n  );\n\n  if (!modalRoot) {\n    return null;\n  }\n\n  const handleKeydown = (event: React.KeyboardEvent) => {\n    if (event.key === KEYS.ESCAPE) {\n      event.nativeEvent.stopImmediatePropagation();\n      event.stopPropagation();\n      props.onCloseRequest();\n    }\n  };\n\n  return createPortal(\n    <div\n      className={clsx(\"Modal\", props.className, {\n        \"animations-disabled\": animationsDisabledRef.current,\n      })}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onKeyDown={handleKeydown}\n      aria-labelledby={props.labelledBy}\n    >\n      <div\n        className=\"Modal__background\"\n        onClick={closeOnClickOutside ? props.onCloseRequest : undefined}\n      />\n      <div\n        className=\"Modal__content\"\n        style={{ \"--max-width\": `${props.maxWidth}px` }}\n        tabIndex={0}\n      >\n        {props.children}\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LibraryMenu.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LibraryMenu.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { VERSIONS } from \"@jsondraw/common\";\nimport { t } from \"../../i18n\";\nimport type { JsonDrawProps, UIAppState } from \"../../types\";\n\nconst LibraryMenuBrowseButton = ({\n  theme,\n  id,\n  libraryReturnUrl,\n}: {\n  libraryReturnUrl: JsonDrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n}) => {\n  const referrer = libraryReturnUrl || window.location.origin + window.location.pathname;\n  return (\n    <a\n      className=\"library-menu-browse-button\"\n      href={`${import.meta.env.VITE_APP_LIBRARY_URL}?target=${\n        window.name || \"_blank\"\n      }&referrer=${referrer}&useHash=true&token=${id}&theme=${theme}&version=${\n        VERSIONS.jsondrawLibrary\n      }`}\n      target=\"_jsondraw_libraries\"\n    >\n      {t(\"labels.libraries\")}\n    </a>\n  );\n};\n\nexport default LibraryMenuBrowseButton;\n","import clsx from \"clsx\";\nimport type { JsonDrawProps, UIAppState } from \"../../types\";\nimport LibraryMenuBrowseButton from \"./LibraryMenuBrowseButton\";\n\nexport const LibraryMenuControlButtons = ({\n  libraryReturnUrl,\n  theme,\n  id,\n  style,\n  children,\n  className,\n}: {\n  libraryReturnUrl: JsonDrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n  style: React.CSSProperties;\n  children?: React.ReactNode;\n  className?: string;\n}) => {\n  return (\n    <div className={clsx(\"library-menu-control-buttons\", className)} style={style}>\n      <LibraryMenuBrowseButton id={id} libraryReturnUrl={libraryReturnUrl} theme={theme} />\n      {children}\n    </div>\n  );\n};\n","import throttle from \"lodash.throttle\";\nimport { useEffect } from \"react\";\n\nimport { atom, useAtom } from \"../editor-jotai\";\n\nconst scrollPositionAtom = atom<number>(0);\n\nexport const useScrollPosition = <T extends HTMLElement>(\n  elementRef: React.RefObject<T | null>,\n) => {\n  const [scrollPosition, setScrollPosition] = useAtom(scrollPositionAtom);\n\n  useEffect(() => {\n    const { current: element } = elementRef;\n    if (!element) {\n      return;\n    }\n\n    const handleScroll = throttle(() => {\n      const { scrollTop } = element;\n      setScrollPosition(scrollTop);\n    }, 200);\n\n    element.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      handleScroll.cancel();\n      element.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [elementRef, setScrollPosition]);\n\n  return scrollPosition;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Stack.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Stack.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { forwardRef } from \"react\";\nimport clsx from \"clsx\";\n\nimport \"./Stack.scss\";\n\ntype StackProps = {\n  children: React.ReactNode;\n  gap?: number;\n  align?: \"start\" | \"center\" | \"end\" | \"baseline\";\n  justifyContent?: \"center\" | \"space-around\" | \"space-between\";\n  className?: string | boolean;\n  style?: React.CSSProperties;\n};\n\nconst RowStack = forwardRef(\n  (\n    { children, gap, align, justifyContent, className, style }: StackProps,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) => {\n    return (\n      <div\n        className={clsx(\"Stack Stack_horizontal\", className)}\n        style={{\n          \"--gap\": gap,\n          alignItems: align,\n          justifyContent,\n          ...style,\n        }}\n        ref={ref}\n      >\n        {children}\n      </div>\n    );\n  },\n);\n\nconst ColStack = forwardRef(\n  (\n    { children, gap, align, justifyContent, className, style }: StackProps,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) => {\n    return (\n      <div\n        className={clsx(\"Stack Stack_vertical\", className)}\n        style={{\n          \"--gap\": gap,\n          justifyItems: align,\n          justifyContent,\n          ...style,\n        }}\n        ref={ref}\n      >\n        {children}\n      </div>\n    );\n  },\n);\n\nexport default {\n  Row: RowStack,\n  Col: ColStack,\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Button.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Button.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport { composeEventHandlers } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport \"./Button.scss\";\n\ninterface ButtonProps extends React.DetailedHTMLProps<\n  React.ButtonHTMLAttributes<HTMLButtonElement>,\n  HTMLButtonElement\n> {\n  type?: \"button\" | \"submit\" | \"reset\";\n  onSelect: () => any;\n  /** whether button is in active state */\n  selected?: boolean;\n  children: React.ReactNode;\n  className?: string;\n}\n\n/**\n * A generic button component that follows JsonDraw's design system.\n * Style can be customised using `className` or `style` prop.\n * Accepts all props that a regular `button` element accepts.\n */\nexport const Button = ({\n  type = \"button\",\n  onSelect,\n  selected,\n  children,\n  className = \"\",\n  ...rest\n}: ButtonProps) => {\n  return (\n    <button\n      onClick={composeEventHandlers(rest.onClick, event => {\n        onSelect();\n      })}\n      type={type}\n      className={clsx(\"jsondraw-button\", className, { selected })}\n      {...rest}\n    >\n      {children}\n    </button>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./TextField.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./TextField.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { forwardRef, useRef, useImperativeHandle, useLayoutEffect, useState } from \"react\";\nimport type { KeyboardEvent } from \"react\";\nimport clsx from \"clsx\";\nimport { eyeIcon, eyeClosedIcon } from \"../icons\";\nimport { Button } from \"./Button\";\nimport \"./TextField.scss\";\n\ntype TextFieldProps = {\n  onChange?: (value: string) => void;\n  onClick?: () => void;\n  onKeyDown?: (event: KeyboardEvent<HTMLInputElement>) => void;\n\n  readonly?: boolean;\n  fullWidth?: boolean;\n  selectOnRender?: boolean;\n\n  icon?: React.ReactNode;\n  label?: string;\n  className?: string;\n  placeholder?: string;\n  isRedacted?: boolean;\n  type?: \"text\" | \"search\";\n} & ({ value: string } | { defaultValue: string });\n\nexport const TextField = forwardRef<HTMLInputElement, TextFieldProps>(\n  (\n    {\n      onChange,\n      label,\n      fullWidth,\n      placeholder,\n      readonly,\n      selectOnRender,\n      onKeyDown,\n      isRedacted = false,\n      icon,\n      className,\n      type,\n      ...rest\n    },\n    ref\n  ) => {\n    const innerRef = useRef<HTMLInputElement | null>(null);\n\n    useImperativeHandle(ref, () => innerRef.current!);\n\n    useLayoutEffect(() => {\n      if (selectOnRender) {\n        // focusing first is needed because vitest/jsdom\n        innerRef.current?.focus();\n        innerRef.current?.select();\n      }\n    }, [selectOnRender]);\n\n    const [isTemporarilyUnredacted, setIsTemporarilyUnredacted] = useState<boolean>(false);\n\n    return (\n      <div\n        className={clsx(\"ExcTextField\", className, {\n          \"ExcTextField--fullWidth\": fullWidth,\n          \"ExcTextField--hasIcon\": !!icon,\n        })}\n        onClick={() => {\n          innerRef.current?.focus();\n        }}\n      >\n        {icon}\n        {label && <div className=\"ExcTextField__label\">{label}</div>}\n        <div\n          className={clsx(\"ExcTextField__input\", {\n            \"ExcTextField__input--readonly\": readonly,\n          })}\n        >\n          <input\n            className={clsx({\n              \"is-redacted\":\n                \"value\" in rest && rest.value && isRedacted && !isTemporarilyUnredacted,\n            })}\n            readOnly={readonly}\n            value={\"value\" in rest ? rest.value : undefined}\n            defaultValue={\"defaultValue\" in rest ? rest.defaultValue : undefined}\n            placeholder={placeholder}\n            ref={innerRef}\n            onChange={event => onChange?.(event.target.value)}\n            onKeyDown={onKeyDown}\n            type={type}\n          />\n          {isRedacted && (\n            <Button\n              onSelect={() => setIsTemporarilyUnredacted(!isTemporarilyUnredacted)}\n              style={{ border: 0, userSelect: \"none\" }}\n            >\n              {isTemporarilyUnredacted ? eyeClosedIcon : eyeIcon}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n","import clsx from \"clsx\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\n\nimport { CLASSES, EVENT, KEYS } from \"@jsondraw/common\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport { useOutsideClick } from \"../../hooks/useOutsideClick\";\nimport { useStable } from \"../../hooks/useStable\";\nimport { useEditorInterface } from \"../App\";\nimport { Island } from \"../layout/Island\";\nimport Stack from \"../layout/Stack\";\n\nimport { DropdownMenuContentPropsContext } from \"./common\";\n\nconst MenuContent = ({\n  children,\n  onClickOutside,\n  className = \"\",\n  onSelect,\n  open = true,\n  align = \"end\",\n  style,\n}: {\n  children?: React.ReactNode;\n  onClickOutside?: () => void;\n  className?: string;\n  /**\n   * Called when any menu item is selected (clicked on).\n   */\n  onSelect?: (event: Event) => void;\n  open?: boolean;\n  style?: React.CSSProperties;\n  align?: \"start\" | \"center\" | \"end\";\n}) => {\n  const editorInterface = useEditorInterface();\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  const callbacksRef = useStable({ onClickOutside });\n\n  useOutsideClick(\n    menuRef,\n    useCallback(\n      (event) => {\n        // prevents closing if clicking on the trigger button\n        if (\n          !menuRef.current\n            ?.closest(`.${CLASSES.DROPDOWN_MENU_EVENT_WRAPPER}`)\n            ?.contains(event.target)\n        ) {\n          callbacksRef.onClickOutside?.();\n        }\n      },\n      [callbacksRef],\n    ),\n  );\n\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (event.key === KEYS.ESCAPE) {\n        event.stopImmediatePropagation();\n        callbacksRef.onClickOutside?.();\n      }\n    };\n\n    const option = {\n      // so that we can stop propagation of the event before it reaches\n      // event handlers that were bound before this one\n      capture: true,\n    };\n\n    document.addEventListener(EVENT.KEYDOWN, onKeyDown, option);\n    return () => {\n      document.removeEventListener(EVENT.KEYDOWN, onKeyDown, option);\n    };\n  }, [callbacksRef, open]);\n\n  const classNames = clsx(`dropdown-menu ${className}`, {\n    \"dropdown-menu--mobile\": editorInterface.formFactor === \"phone\",\n  }).trim();\n\n  return (\n    <DropdownMenuContentPropsContext.Provider value={{ onSelect }}>\n      <DropdownMenuPrimitive.Content\n        ref={menuRef}\n        className={classNames}\n        style={style}\n        data-testid=\"dropdown-menu\"\n        align={align}\n        sideOffset={8}\n        onCloseAutoFocus={(event: Event) => event.preventDefault()}\n      >\n        {/* the zIndex ensures this menu has higher stacking order,\n    see https://github.com/jsondraw/jsondraw/pull/1445 */}\n        {editorInterface.formFactor === \"phone\" ? (\n          <Stack.Col className=\"dropdown-menu-container\">{children}</Stack.Col>\n        ) : (\n          <Island className=\"dropdown-menu-container\" padding={2}>\n            {children}\n          </Island>\n        )}\n      </DropdownMenuPrimitive.Content>\n    </DropdownMenuContentPropsContext.Provider>\n  );\n};\nMenuContent.displayName = \"DropdownMenuContent\";\n\nexport default MenuContent;\n","import React from \"react\";\n\nconst DropdownMenuItemCustom = ({\n  children,\n  className = \"\",\n  selected,\n  ...rest\n}: {\n  children: React.ReactNode;\n  className?: string;\n  selected?: boolean;\n} & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <div\n      {...rest}\n      className={`dropdown-menu-item-base dropdown-menu-item-custom ${className} ${\n        selected ? `dropdown-menu-item--selected` : ``\n      }`.trim()}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default DropdownMenuItemCustom;\n","import React from \"react\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport MenuItemContent from \"./DropdownMenuItemContent\";\nimport {\n  getDropdownMenuItemClassName,\n  useHandleDropdownMenuItemSelect,\n} from \"./common\";\n\nimport type { JSX } from \"react\";\n\nconst DropdownMenuItemLink = ({\n  icon,\n  shortcut,\n  href,\n  children,\n  onSelect,\n  className = \"\",\n  selected,\n  rel = \"noopener\",\n  ...rest\n}: {\n  href: string;\n  icon?: JSX.Element;\n  children: React.ReactNode;\n  shortcut?: string;\n  className?: string;\n  selected?: boolean;\n  onSelect?: (event: Event) => void;\n  rel?: string;\n} & React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  const handleSelect = useHandleDropdownMenuItemSelect(onSelect);\n\n  return (\n    // eslint-disable-next-line react/jsx-no-target-blank\n    <DropdownMenuPrimitive.Item\n      className=\"radix-menu-item\"\n      onSelect={handleSelect}\n      asChild\n    >\n      <a\n        {...rest}\n        href={href}\n        target=\"_blank\"\n        rel={`noopener ${rel}`}\n        className={getDropdownMenuItemClassName(className, selected)}\n        title={rest.title ?? rest[\"aria-label\"]}\n      >\n        <MenuItemContent icon={icon} shortcut={shortcut}>\n          {children}\n        </MenuItemContent>\n      </a>\n    </DropdownMenuPrimitive.Item>\n  );\n};\n\nexport default DropdownMenuItemLink;\nDropdownMenuItemLink.displayName = \"DropdownMenuItemLink\";\n","import React from \"react\";\n\nconst MenuSeparator = () => (\n  <div\n    style={{\n      height: \"1px\",\n      backgroundColor: \"var(--default-border-color)\",\n      margin: \"6px 0\",\n      flex: \"0 0 auto\",\n    }}\n  />\n);\n\nexport default MenuSeparator;\nMenuSeparator.displayName = \"DropdownMenuSeparator\";\n","import clsx from \"clsx\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport { useCallback, useState } from \"react\";\n\nimport { useEditorInterface } from \"../App\";\nimport { Island } from \"../layout/Island\";\nimport Stack from \"../layout/Stack\";\n\nconst BASE_ALIGN_OFFSET = -4;\nconst BASE_SIDE_OFFSET = 4;\n\nconst DropdownMenuSubContent = ({\n  children,\n  className,\n}: {\n  children?: React.ReactNode;\n  className?: string;\n}) => {\n  const editorInterface = useEditorInterface();\n\n  const classNames = clsx(`dropdown-menu dropdown-submenu ${className}`, {\n    \"dropdown-menu--mobile\": editorInterface.formFactor === \"phone\",\n  }).trim();\n\n  const callbacksRef = useCallback((node: HTMLDivElement | null) => {\n    if (node) {\n      const parentContainer = node.closest(\".dropdown-menu-container\");\n      const parentRect = parentContainer?.getBoundingClientRect();\n      if (parentRect) {\n        const menuWidth = node.getBoundingClientRect().width;\n\n        const viewportWidth = window.innerWidth;\n        const spaceRemaining = viewportWidth - parentRect.right;\n        if (spaceRemaining < menuWidth + 20) {\n          setSideOffset(spaceRemaining - menuWidth + BASE_ALIGN_OFFSET);\n          setAlignOffset(BASE_ALIGN_OFFSET + 8);\n        }\n      }\n    }\n  }, []);\n\n  const [sideOffset, setSideOffset] = useState(BASE_SIDE_OFFSET);\n  const [alignOffset, setAlignOffset] = useState(BASE_ALIGN_OFFSET);\n\n  return (\n    <DropdownMenuPrimitive.SubContent\n      className={classNames}\n      sideOffset={sideOffset}\n      alignOffset={alignOffset}\n      collisionPadding={8}\n      ref={callbacksRef}\n    >\n      {editorInterface.formFactor === \"phone\" ? (\n        <Stack.Col className=\"dropdown-menu-container\">{children}</Stack.Col>\n      ) : (\n        <Island\n          className=\"dropdown-menu-container\"\n          padding={2}\n          style={{ zIndex: 1 }}\n        >\n          {children}\n        </Island>\n      )}\n    </DropdownMenuPrimitive.SubContent>\n  );\n};\n\nexport default DropdownMenuSubContent;\nDropdownMenuSubContent.displayName = \"DropdownMenuSubContent\";\n","import React from \"react\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport { chevronRight } from \"../icons\";\n\nimport { getDropdownMenuItemClassName } from \"./common\";\nimport MenuItemContent from \"./DropdownMenuItemContent\";\n\nimport type { JSX } from \"react\";\n\nconst DropdownMenuSubTrigger = ({\n  children,\n  icon,\n  shortcut,\n  className,\n}: {\n  children: React.ReactNode;\n  icon?: JSX.Element;\n  shortcut?: string;\n  className?: string;\n}) => {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      className={`${getDropdownMenuItemClassName(\n        className,\n      )} dropdown-menu__submenu-trigger`}\n    >\n      <MenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </MenuItemContent>\n      <div className=\"dropdown-menu__submenu-trigger-icon\">{chevronRight}</div>\n    </DropdownMenuPrimitive.SubTrigger>\n  );\n};\n\nexport default DropdownMenuSubTrigger;\nDropdownMenuSubTrigger.displayName = \"DropdownMenuSubTrigger\";\n","import React from \"react\";\n\nconst getMenuComponent = (component: string) => (children: React.ReactNode) => {\n  const comp = React.Children.toArray(children).find(\n    (child) =>\n      React.isValidElement(child) &&\n      typeof child.type !== \"string\" &&\n      //@ts-ignore\n      child?.type.displayName &&\n      //@ts-ignore\n      child.type.displayName === component,\n  );\n  if (!comp) {\n    return null;\n  }\n  //@ts-ignore\n  return comp;\n};\n\nexport const getMenuTriggerComponent = getMenuComponent(\"DropdownMenuTrigger\");\nexport const getMenuContentComponent = getMenuComponent(\"DropdownMenuContent\");\nexport const getSubMenuTriggerComponent = getMenuComponent(\n  \"DropdownMenuSubTrigger\",\n);\nexport const getSubMenuContentComponent = getMenuComponent(\n  \"DropdownMenuSubContent\",\n);\n","import { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport DropdownMenuSubContent from \"./DropdownMenuSubContent\";\nimport DropdownMenuSubTrigger from \"./DropdownMenuSubTrigger\";\nimport {\n  getSubMenuContentComponent,\n  getSubMenuTriggerComponent,\n} from \"./dropdownMenuUtils\";\n\nconst DropdownMenuSub = ({ children }: { children?: React.ReactNode }) => {\n  const MenuTriggerComp = getSubMenuTriggerComponent(children);\n  const MenuContentComp = getSubMenuContentComponent(children);\n  return (\n    <DropdownMenuPrimitive.Sub>\n      {MenuTriggerComp}\n      {MenuContentComp}\n    </DropdownMenuPrimitive.Sub>\n  );\n};\n\nDropdownMenuSub.Trigger = DropdownMenuSubTrigger;\nDropdownMenuSub.Content = DropdownMenuSubContent;\n\nDropdownMenuSub.displayName = \"DropdownMenuSub\";\n\nexport default DropdownMenuSub;\n","import clsx from \"clsx\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport { useEditorInterface } from \"../App\";\n\nconst MenuTrigger = ({\n  className = \"\",\n  children,\n  onToggle,\n  title,\n  ...rest\n}: {\n  className?: string;\n  children: React.ReactNode;\n  onToggle: () => void;\n  title?: string;\n} & Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  const editorInterface = useEditorInterface();\n  const classNames = clsx(\n    `dropdown-menu-button ${className}`,\n    \"zen-mode-transition\",\n    {\n      \"dropdown-menu-button--mobile\": editorInterface.formFactor === \"phone\",\n    },\n  ).trim();\n  return (\n    <DropdownMenuPrimitive.Trigger\n      className={classNames}\n      onClick={onToggle}\n      type=\"button\"\n      data-testid=\"dropdown-menu-button\"\n      title={title}\n      {...rest}\n    >\n      {children}\n    </DropdownMenuPrimitive.Trigger>\n  );\n};\n\nexport default MenuTrigger;\nMenuTrigger.displayName = \"DropdownMenuTrigger\";\n","import { checkIcon, emptyIcon } from \"../icons\";\n\nimport DropdownMenuItem from \"./DropdownMenuItem\";\n\nimport type { DropdownMenuItemProps } from \"./DropdownMenuItem\";\n\nconst DropdownMenuItemCheckbox = (\n  props: Omit<DropdownMenuItemProps, \"icon\"> & { checked: boolean },\n) => {\n  return (\n    <DropdownMenuItem {...props} icon={props.checked ? checkIcon : emptyIcon} />\n  );\n};\n\nexport default DropdownMenuItemCheckbox;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DropdownMenu.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DropdownMenu.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\n\nimport { DropdownMenu as DropdownMenuPrimitive } from \"radix-ui\";\n\nimport { CLASSES } from \"@jsondraw/common\";\n\nimport DropdownMenuContent from \"./DropdownMenuContent\";\nimport DropdownMenuGroup from \"./DropdownMenuGroup\";\nimport DropdownMenuItem from \"./DropdownMenuItem\";\nimport DropdownMenuItemCustom from \"./DropdownMenuItemCustom\";\nimport DropdownMenuItemLink from \"./DropdownMenuItemLink\";\nimport MenuSeparator from \"./DropdownMenuSeparator\";\nimport DropdownMenuSub from \"./DropdownMenuSub\";\nimport DropdownMenuTrigger from \"./DropdownMenuTrigger\";\nimport DropdownMenuItemCheckbox from \"./DropdownMenuItemCheckbox\";\nimport {\n  getMenuContentComponent,\n  getMenuTriggerComponent,\n} from \"./dropdownMenuUtils\";\n\nimport \"./DropdownMenu.scss\";\n\nconst DropdownMenu = ({\n  children,\n  open,\n}: {\n  children?: React.ReactNode;\n  open: boolean;\n}) => {\n  const MenuTriggerComp = getMenuTriggerComponent(children);\n  const MenuContentComp = getMenuContentComponent(children);\n  const MenuContentWithState =\n    MenuContentComp && React.isValidElement(MenuContentComp)\n      ? React.cloneElement(\n          MenuContentComp as React.ReactElement<\n            React.ComponentProps<typeof DropdownMenuContent>\n          >,\n          { open },\n        )\n      : MenuContentComp;\n\n  return (\n    <DropdownMenuPrimitive.Root open={open} modal={false}>\n      <div\n        className={CLASSES.DROPDOWN_MENU_EVENT_WRAPPER}\n        style={{\n          // remove this div from box layout\n          display: \"contents\",\n        }}\n      >\n        {MenuTriggerComp}\n        {MenuContentWithState}\n      </div>\n    </DropdownMenuPrimitive.Root>\n  );\n};\n\nDropdownMenu.Trigger = DropdownMenuTrigger;\nDropdownMenu.Content = DropdownMenuContent;\nDropdownMenu.Item = DropdownMenuItem;\nDropdownMenu.ItemCheckbox = DropdownMenuItemCheckbox;\nDropdownMenu.ItemLink = DropdownMenuItemLink;\nDropdownMenu.ItemCustom = DropdownMenuItemCustom;\nDropdownMenu.Group = DropdownMenuGroup;\nDropdownMenu.Separator = MenuSeparator;\nDropdownMenu.Sub = DropdownMenuSub;\n\nexport default DropdownMenu;\n\nDropdownMenu.displayName = \"DropdownMenu\";\n","import React from \"react\";\nimport { useI18n } from \"../../i18n\";\nimport type { TranslationKeys } from \"../../i18n\";\n\n// Used for splitting i18nKey into tokens in Trans component\n// Example:\n// \"Please <link>click {{location}}</link> to continue.\".split(SPLIT_REGEX).filter(Boolean)\n// produces\n// [\"Please \", \"<link>\", \"click \", \"{{location}}\", \"</link>\", \" to continue.\"]\nconst SPLIT_REGEX = /({{[\\w-]+}})|(<[\\w-]+>)|(<\\/[\\w-]+>)/g;\n// Used for extracting \"location\" from \"{{location}}\"\nconst KEY_REGEXP = /{{([\\w-]+)}}/;\n// Used for extracting \"link\" from \"<link>\"\nconst TAG_START_REGEXP = /<([\\w-]+)>/;\n// Used for extracting \"link\" from \"</link>\"\nconst TAG_END_REGEXP = /<\\/([\\w-]+)>/;\n\nconst getTransChildren = (\n  format: string,\n  props: {\n    [key: string]: React.ReactNode | ((el: React.ReactNode) => React.ReactNode);\n  }\n): React.ReactNode[] => {\n  const stack: { name: string; children: React.ReactNode[] }[] = [\n    {\n      name: \"\",\n      children: [],\n    },\n  ];\n\n  format\n    .split(SPLIT_REGEX)\n    .filter(Boolean)\n    .forEach(match => {\n      const tagStartMatch = match.match(TAG_START_REGEXP);\n      const tagEndMatch = match.match(TAG_END_REGEXP);\n      const keyMatch = match.match(KEY_REGEXP);\n\n      if (tagStartMatch !== null) {\n        // The match is <tag>. Set the tag name as the name if it's one of the\n        // props, e.g. for \"Please <link>click the button</link> to continue\"\n        // tagStartMatch[1] = \"link\" and props contain \"link\" then it will be\n        // pushed to stack.\n        const name = tagStartMatch[1];\n        if (props.hasOwnProperty(name)) {\n          stack.push({\n            name,\n            children: [],\n          });\n        } else {\n          console.warn(`Trans: missed to pass in prop ${name} for interpolating ${format}`);\n        }\n      } else if (tagEndMatch !== null) {\n        // If tag end match is found, this means we need to replace the content with\n        // its actual value in prop e.g. format = \"Please <link>click the\n        // button</link> to continue\", tagEndMatch is for \"</link>\", stack last item name =\n        // \"link\" and props.link = (el) => <a\n        // href=\"https://example.com\">{el}</a> then its prop value will be\n        // pushed to \"link\"'s children so on DOM when rendering it's rendered as\n        // <a href=\"https://example.com\">click the button</a>\n        const name = tagEndMatch[1];\n        if (name === stack[stack.length - 1].name) {\n          const item = stack.pop()!;\n          const itemChildren = React.createElement(React.Fragment, {}, ...item.children);\n          const fn = props[item.name];\n          if (typeof fn === \"function\") {\n            stack[stack.length - 1].children.push(fn(itemChildren));\n          }\n        } else {\n          console.warn(`Trans: unexpected end tag ${match} for interpolating ${format}`);\n        }\n      } else if (keyMatch !== null) {\n        // The match is for {{key}}. Check if the key is present in props and set\n        // the prop value as children of last stack item e.g. format = \"Hello\n        // {{name}}\", key = \"name\" and props.name = \"JsonDraw\" then its prop\n        // value will be pushed to \"name\"'s children so it's rendered on DOM as\n        // \"Hello JsonDraw\"\n        const name = keyMatch[1];\n        if (props.hasOwnProperty(name)) {\n          stack[stack.length - 1].children.push(props[name] as React.ReactNode);\n        } else {\n          console.warn(`Trans: key ${name} not in props for interpolating ${format}`);\n        }\n      } else {\n        // If none of cases match means we just need to push the string\n        // to stack eg - \"Hello {{name}} Whats up?\" \"Hello\", \"Whats up\" will be pushed\n        stack[stack.length - 1].children.push(match);\n      }\n    });\n\n  if (stack.length !== 1) {\n    console.warn(`Trans: stack not empty for interpolating ${format}`);\n  }\n\n  return stack[0].children;\n};\n\n/*\nTrans component is used for translating JSX.\n\n```json\n{\n  \"example1\": \"Hello {{audience}}\",\n  \"example2\": \"Please <link>click the button</link> to continue.\",\n  \"example3\": \"Please <link>click {{location}}</link> to continue.\",\n  \"example4\": \"Please <link>click <bold>{{location}}</bold></link> to continue.\",\n}\n```\n\n```jsx\n<Trans i18nKey=\"example1\" audience=\"world\" />\n\n<Trans\n  i18nKey=\"example2\"\n  connectLink={(el) => <a href=\"https://example.com\">{el}</a>}\n/>\n\n<Trans\n  i18nKey=\"example3\"\n  connectLink={(el) => <a href=\"https://example.com\">{el}</a>}\n  location=\"the button\"\n/>\n\n<Trans\n  i18nKey=\"example4\"\n  connectLink={(el) => <a href=\"https://example.com\">{el}</a>}\n  location=\"the button\"\n  bold={(el) => <strong>{el}</strong>}\n/>\n```\n\nOutput:\n\n```html\nHello world\nPlease <a href=\"https://example.com\">click the button</a> to continue.\nPlease <a href=\"https://example.com\">click the button</a> to continue.\nPlease <a href=\"https://example.com\">click <strong>the button</strong></a> to continue.\n```\n*/\nconst Trans = ({\n  i18nKey,\n  children,\n  ...props\n}: {\n  i18nKey: TranslationKeys;\n  [key: string]: React.ReactNode | ((el: React.ReactNode) => React.ReactNode);\n}) => {\n  const { t } = useI18n();\n\n  // This is needed to avoid unique key error in list which gets rendered from getTransChildren\n  return React.createElement(React.Fragment, {}, ...getTransChildren(t(i18nKey), props));\n};\n\nexport default Trans;\n","import type { EDITOR_LS_KEYS } from \"@jsondraw/common\";\n\nimport type { JSONValue } from \"../types\";\n\nexport class EditorLocalStorage {\n  static has(key: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS]) {\n    try {\n      return !!window.localStorage.getItem(key);\n    } catch (error: any) {\n      console.warn(`localStorage.getItem error: ${error.message}`);\n      return false;\n    }\n  }\n\n  static get<T extends JSONValue>(\n    key: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS],\n  ) {\n    try {\n      const value = window.localStorage.getItem(key);\n      if (value) {\n        return JSON.parse(value) as T;\n      }\n      return null;\n    } catch (error: any) {\n      console.warn(`localStorage.getItem error: ${error.message}`);\n      return null;\n    }\n  }\n\n  static set = (\n    key: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS],\n    value: JSONValue,\n  ) => {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(value));\n      return true;\n    } catch (error: any) {\n      console.warn(`localStorage.setItem error: ${error.message}`);\n      return false;\n    }\n  };\n\n  static delete = (\n    name: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS],\n  ) => {\n    try {\n      window.localStorage.removeItem(name);\n    } catch (error: any) {\n      console.warn(`localStorage.removeItem error: ${error.message}`);\n    }\n  };\n}\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DialogActionButton.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DialogActionButton.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import type { ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport Spinner from \"../ui/Spinner\";\nimport \"./DialogActionButton.scss\";\n\ninterface DialogActionButtonProps {\n  label: string;\n  children?: ReactNode;\n  actionType?: \"primary\" | \"danger\";\n  isLoading?: boolean;\n}\n\nconst DialogActionButton = ({\n  label,\n  onClick,\n  className,\n  children,\n  actionType,\n  type = \"button\",\n  isLoading,\n  ...rest\n}: DialogActionButtonProps & React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  const cs = actionType ? `Dialog__action-button--${actionType}` : \"\";\n\n  return (\n    <button\n      className={clsx(\"Dialog__action-button\", cs, className)}\n      type={type}\n      aria-label={label}\n      onClick={onClick}\n      {...rest}\n    >\n      {children && <div style={isLoading ? { visibility: \"hidden\" } : {}}>{children}</div>}\n      <div style={isLoading ? { visibility: \"hidden\" } : {}}>{label}</div>\n      {isLoading && (\n        <div style={{ position: \"absolute\", inset: 0 }}>\n          <Spinner />\n        </div>\n      )}\n    </button>\n  );\n};\n\nexport default DialogActionButton;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./PublishLibrary.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./PublishLibrary.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport {\n  EDITOR_LS_KEYS,\n  EXPORT_DATA_TYPES,\n  MIME_TYPES,\n  VERSIONS,\n  chunk,\n  getExportSource,\n} from \"@jsondraw/common\";\nimport { exportToCanvas, exportToSvg } from \"@jsondraw/utils/export\";\nimport { EditorLocalStorage } from \"../../data/EditorLocalStorage\";\nimport { canvasToBlob, resizeImageFile } from \"../../data/blob\";\nimport type { ExportedLibraryData } from \"../../data/types\";\nimport { t } from \"../../i18n\";\nimport type { LibraryItems, LibraryItem, UIAppState } from \"../../types\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport DialogActionButton from \"../dialogs/DialogActionButton\";\nimport { CloseIcon } from \"../icons\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport Trans from \"../ui/Trans\";\nimport \"./PublishLibrary.scss\";\n\ninterface PublishLibraryDataParams {\n  authorName: string;\n  githubHandle: string;\n  name: string;\n  description: string;\n  twitterHandle: string;\n  website: string;\n}\n\nconst generatePreviewImage = async (libraryItems: LibraryItems) => {\n  const MAX_ITEMS_PER_ROW = 6;\n  const BOX_SIZE = 128;\n  const BOX_PADDING = Math.round(BOX_SIZE / 16);\n  const BORDER_WIDTH = Math.max(Math.round(BOX_SIZE / 64), 2);\n\n  const rows = chunk(libraryItems, MAX_ITEMS_PER_ROW);\n\n  const canvas = document.createElement(\"canvas\");\n\n  canvas.width =\n    rows[0].length * BOX_SIZE + (rows[0].length + 1) * (BOX_PADDING * 2) - BOX_PADDING * 2;\n  canvas.height = rows.length * BOX_SIZE + (rows.length + 1) * (BOX_PADDING * 2) - BOX_PADDING * 2;\n\n  const ctx = canvas.getContext(\"2d\")!;\n\n  ctx.fillStyle = \"#fff\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  // draw items\n  // ---------------------------------------------------------------------------\n  for (const [index, item] of libraryItems.entries()) {\n    const itemCanvas = await exportToCanvas({\n      elements: item.elements,\n      files: null,\n      maxWidthOrHeight: BOX_SIZE,\n    });\n\n    const { width, height } = itemCanvas;\n\n    // draw item\n    // -------------------------------------------------------------------------\n    const rowOffset = Math.floor(index / MAX_ITEMS_PER_ROW) * (BOX_SIZE + BOX_PADDING * 2);\n    const colOffset = (index % MAX_ITEMS_PER_ROW) * (BOX_SIZE + BOX_PADDING * 2);\n\n    ctx.drawImage(\n      itemCanvas,\n      colOffset + (BOX_SIZE - width) / 2 + BOX_PADDING,\n      rowOffset + (BOX_SIZE - height) / 2 + BOX_PADDING\n    );\n\n    // draw item border\n    // -------------------------------------------------------------------------\n    ctx.lineWidth = BORDER_WIDTH;\n    ctx.strokeStyle = \"#ced4da\";\n    ctx.strokeRect(\n      colOffset + BOX_PADDING / 2,\n      rowOffset + BOX_PADDING / 2,\n      BOX_SIZE + BOX_PADDING,\n      BOX_SIZE + BOX_PADDING\n    );\n  }\n\n  return await resizeImageFile(\n    new File([await canvasToBlob(canvas)], \"preview\", { type: MIME_TYPES.png }),\n    {\n      outputType: MIME_TYPES.jpg,\n      maxWidthOrHeight: 5000,\n    }\n  );\n};\n\nconst SingleLibraryItem = ({\n  libItem,\n  appState,\n  index,\n  onChange,\n  onRemove,\n}: {\n  libItem: LibraryItem;\n  appState: UIAppState;\n  index: number;\n  onChange: (val: string, index: number) => void;\n  onRemove: (id: string) => void;\n}) => {\n  const svgRef = useRef<HTMLDivElement | null>(null);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  useEffect(() => {\n    const node = svgRef.current;\n    if (!node) {\n      return;\n    }\n    (async () => {\n      const svg = await exportToSvg({\n        elements: libItem.elements,\n        appState: {\n          ...appState,\n          viewBackgroundColor: \"#fff\",\n          exportBackground: true,\n        },\n        files: null,\n        skipInliningFonts: true,\n      });\n      node.innerHTML = svg.outerHTML;\n    })();\n  }, [libItem.elements, appState]);\n\n  return (\n    <div className=\"single-library-item\">\n      {libItem.status === \"published\" && (\n        <span className=\"single-library-item-status\">{t(\"labels.statusPublished\")}</span>\n      )}\n      <div ref={svgRef} className=\"single-library-item__svg\" />\n      <ToolButton\n        aria-label={t(\"buttons.remove\")}\n        type=\"button\"\n        icon={CloseIcon}\n        className=\"single-library-item--remove\"\n        onClick={onRemove.bind(null, libItem.id)}\n        title={t(\"buttons.remove\")}\n      />\n      <div\n        style={{\n          display: \"flex\",\n          margin: \"0.8rem 0\",\n          width: \"100%\",\n          fontSize: \"14px\",\n          fontWeight: 500,\n          flexDirection: \"column\",\n        }}\n      >\n        <label\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            flexDirection: \"column\",\n          }}\n        >\n          <div style={{ padding: \"0.5em 0\" }}>\n            <span style={{ fontWeight: 500, color: \"#868e96\" }}>{t(\"publishDialog.itemName\")}</span>\n            <span aria-hidden=\"true\" className=\"required\">\n              *\n            </span>\n          </div>\n          <input\n            type=\"text\"\n            ref={inputRef}\n            style={{ width: \"80%\", padding: \"0.2rem\" }}\n            defaultValue={libItem.name}\n            placeholder=\"Item name\"\n            onChange={event => {\n              onChange(event.target.value, index);\n            }}\n          />\n        </label>\n        <span className=\"error\">{libItem.error}</span>\n      </div>\n    </div>\n  );\n};\n\nconst PublishLibrary = ({\n  onClose,\n  libraryItems,\n  appState,\n  onSuccess,\n  onError,\n  updateItemsInStorage,\n  onRemove,\n}: {\n  onClose: () => void;\n  libraryItems: LibraryItems;\n  appState: UIAppState;\n  onSuccess: (data: { url: string; authorName: string; items: LibraryItems }) => void;\n\n  onError: (error: Error) => void;\n  updateItemsInStorage: (items: LibraryItems) => void;\n  onRemove: (id: string) => void;\n}) => {\n  const [libraryData, setLibraryData] = useState<PublishLibraryDataParams>({\n    authorName: \"\",\n    githubHandle: \"\",\n    name: \"\",\n    description: \"\",\n    twitterHandle: \"\",\n    website: \"\",\n  });\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    const data = EditorLocalStorage.get<PublishLibraryDataParams>(EDITOR_LS_KEYS.PUBLISH_LIBRARY);\n    if (data) {\n      setLibraryData(data);\n    }\n  }, []);\n\n  const [clonedLibItems, setClonedLibItems] = useState<LibraryItems>(libraryItems.slice());\n\n  useEffect(() => {\n    setClonedLibItems(libraryItems.slice());\n  }, [libraryItems]);\n\n  const onInputChange = (event: any) => {\n    setLibraryData({\n      ...libraryData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setIsSubmitting(true);\n    const erroredLibItems: LibraryItem[] = [];\n    let isError = false;\n    clonedLibItems.forEach(libItem => {\n      let error = \"\";\n      if (!libItem.name) {\n        error = t(\"publishDialog.errors.required\");\n        isError = true;\n      }\n      erroredLibItems.push({ ...libItem, error });\n    });\n\n    if (isError) {\n      setClonedLibItems(erroredLibItems);\n      setIsSubmitting(false);\n      return;\n    }\n\n    const previewImage = await generatePreviewImage(clonedLibItems);\n\n    const libContent: ExportedLibraryData = {\n      type: EXPORT_DATA_TYPES.jsondrawLibrary,\n      version: VERSIONS.jsondrawLibrary,\n      source: getExportSource(),\n      libraryItems: clonedLibItems,\n    };\n    const content = JSON.stringify(libContent, null, 2);\n    const lib = new Blob([content], { type: \"application/json\" });\n\n    const formData = new FormData();\n    formData.append(\"jsondrawLib\", lib);\n    formData.append(\"previewImage\", previewImage);\n    formData.append(\"previewImageType\", previewImage.type);\n    formData.append(\"title\", libraryData.name);\n    formData.append(\"authorName\", libraryData.authorName);\n    formData.append(\"githubHandle\", libraryData.githubHandle);\n    formData.append(\"name\", libraryData.name);\n    formData.append(\"description\", libraryData.description);\n    formData.append(\"twitterHandle\", libraryData.twitterHandle);\n    formData.append(\"website\", libraryData.website);\n\n    fetch(`${import.meta.env.VITE_APP_LIBRARY_BACKEND}/submit`, {\n      method: \"post\",\n      body: formData,\n    })\n      .then(\n        response => {\n          if (response.ok) {\n            return response.json().then(({ url }) => {\n              // flush data from local storage\n              EditorLocalStorage.delete(EDITOR_LS_KEYS.PUBLISH_LIBRARY);\n              onSuccess({\n                url,\n                authorName: libraryData.authorName,\n                items: clonedLibItems,\n              });\n            });\n          }\n          return response\n            .json()\n            .catch(() => {\n              throw new Error(response.statusText || \"something went wrong\");\n            })\n            .then(error => {\n              throw new Error(error.message || response.statusText || \"something went wrong\");\n            });\n        },\n        err => {\n          console.error(err);\n          onError(err);\n          setIsSubmitting(false);\n        }\n      )\n      .catch(err => {\n        console.error(err);\n        onError(err);\n        setIsSubmitting(false);\n      });\n  };\n\n  const renderLibraryItems = () => {\n    const items: ReactNode[] = [];\n    clonedLibItems.forEach((libItem, index) => {\n      items.push(\n        <div className=\"single-library-item-wrapper\" key={index}>\n          <SingleLibraryItem\n            libItem={libItem}\n            appState={appState}\n            index={index}\n            onChange={(val, index) => {\n              const items = clonedLibItems.slice();\n              items[index].name = val;\n              setClonedLibItems(items);\n            }}\n            onRemove={onRemove}\n          />\n        </div>\n      );\n    });\n    return <div className=\"selected-library-items\">{items}</div>;\n  };\n\n  const onDialogClose = useCallback(() => {\n    updateItemsInStorage(clonedLibItems);\n    EditorLocalStorage.set(EDITOR_LS_KEYS.PUBLISH_LIBRARY, libraryData);\n    onClose();\n  }, [clonedLibItems, onClose, updateItemsInStorage, libraryData]);\n\n  const shouldRenderForm = !!libraryItems.length;\n\n  const containsPublishedItems = libraryItems.some(item => item.status === \"published\");\n\n  return (\n    <Dialog\n      onCloseRequest={onDialogClose}\n      title={t(\"publishDialog.title\")}\n      className=\"publish-library\"\n    >\n      {shouldRenderForm ? (\n        <form onSubmit={onSubmit}>\n          <div className=\"publish-library-note\">\n            <Trans\n              i18nKey=\"publishDialog.noteDescription\"\n              link={el => (\n                <a href=\"https://libraries.jsonviz.online\" target=\"_blank\" rel=\"noopener\">\n                  {el}\n                </a>\n              )}\n            />\n          </div>\n          <span className=\"publish-library-note\">\n            <Trans\n              i18nKey=\"publishDialog.noteGuidelines\"\n              link={el => (\n                <a\n                  href=\"https://github.com/jsondraw/jsondraw-libraries#guidelines\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {el}\n                </a>\n              )}\n            />\n          </span>\n\n          <div className=\"publish-library-note\">{t(\"publishDialog.noteItems\")}</div>\n          {containsPublishedItems && (\n            <span className=\"publish-library-note publish-library-warning\">\n              {t(\"publishDialog.republishWarning\")}\n            </span>\n          )}\n          {renderLibraryItems()}\n          <div className=\"publish-library__fields\">\n            <label>\n              <div>\n                <span>{t(\"publishDialog.libraryName\")}</span>\n                <span aria-hidden=\"true\" className=\"required\">\n                  *\n                </span>\n              </div>\n              <input\n                type=\"text\"\n                name=\"name\"\n                required\n                value={libraryData.name}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.libraryName\")}\n              />\n            </label>\n            <label style={{ alignItems: \"flex-start\" }}>\n              <div>\n                <span>{t(\"publishDialog.libraryDesc\")}</span>\n                <span aria-hidden=\"true\" className=\"required\">\n                  *\n                </span>\n              </div>\n              <textarea\n                name=\"description\"\n                rows={4}\n                required\n                value={libraryData.description}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.libraryDesc\")}\n              />\n            </label>\n            <label>\n              <div>\n                <span>{t(\"publishDialog.authorName\")}</span>\n                <span aria-hidden=\"true\" className=\"required\">\n                  *\n                </span>\n              </div>\n              <input\n                type=\"text\"\n                name=\"authorName\"\n                required\n                value={libraryData.authorName}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.authorName\")}\n              />\n            </label>\n            <label>\n              <span>{t(\"publishDialog.githubUsername\")}</span>\n              <input\n                type=\"text\"\n                name=\"githubHandle\"\n                value={libraryData.githubHandle}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.githubHandle\")}\n              />\n            </label>\n            <label>\n              <span>{t(\"publishDialog.twitterUsername\")}</span>\n              <input\n                type=\"text\"\n                name=\"twitterHandle\"\n                value={libraryData.twitterHandle}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.twitterHandle\")}\n              />\n            </label>\n            <label>\n              <span>{t(\"publishDialog.website\")}</span>\n              <input\n                type=\"text\"\n                name=\"website\"\n                pattern=\"https?://.+\"\n                title={t(\"publishDialog.errors.website\")}\n                value={libraryData.website}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.website\")}\n              />\n            </label>\n            <span className=\"publish-library-note\">\n              <Trans\n                i18nKey=\"publishDialog.noteLicense\"\n                link={el => (\n                  <a\n                    href=\"https://github.com/jsondraw/jsondraw-libraries/blob/main/LICENSE\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {el}\n                  </a>\n                )}\n              />\n            </span>\n          </div>\n          <div className=\"publish-library__buttons\">\n            <DialogActionButton\n              label={t(\"buttons.saveLibNames\")}\n              onClick={onDialogClose}\n              data-testid=\"cancel-clear-canvas-button\"\n            />\n            <DialogActionButton\n              type=\"submit\"\n              label={t(\"buttons.submit\")}\n              actionType=\"primary\"\n              isLoading={isSubmitting}\n            />\n          </div>\n        </form>\n      ) : (\n        <p style={{ padding: \"1em\", textAlign: \"center\", fontWeight: 500 }}>\n          {t(\"publishDialog.atleastOneLibItem\")}\n        </p>\n      )}\n    </Dialog>\n  );\n};\n\nexport default PublishLibrary;\n","import { useCallback, useState } from \"react\";\nimport { muteFSAbortError } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { fileOpen } from \"../../data/filesystem\";\nimport { saveLibraryAsJSON } from \"../../data/json\";\nimport { libraryItemsAtom } from \"../../data/library\";\nimport type Library from \"../../data/library\";\nimport { useAtom } from \"../../editor-jotai\";\nimport { useLibraryCache } from \"../../hooks/useLibraryItemSvg\";\nimport { t } from \"../../i18n\";\nimport type { LibraryItem, LibraryItems, UIAppState } from \"../../types\";\nimport { useApp, useJsonDrawSetAppState } from \"../App\";\nimport ConfirmDialog from \"../dialogs/ConfirmDialog\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\nimport { DotsIcon, ExportIcon, LoadIcon, publishIcon, TrashIcon } from \"../icons\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport Trans from \"../ui/Trans\";\nimport { isLibraryMenuOpenAtom } from \"./LibraryMenu\";\nimport PublishLibrary from \"./PublishLibrary\";\n\nconst getSelectedItems = (libraryItems: LibraryItems, selectedItems: LibraryItem[\"id\"][]) =>\n  libraryItems.filter(item => selectedItems.includes(item.id));\n\nexport const LibraryDropdownMenuButton: React.FC<{\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  selectedItems: LibraryItem[\"id\"][];\n  library: Library;\n  onRemoveFromLibrary: () => void;\n  resetLibrary: () => void;\n  onSelectItems: (items: LibraryItem[\"id\"][]) => void;\n  appState: UIAppState;\n  className?: string;\n}> = ({\n  setAppState,\n  selectedItems,\n  library,\n  onRemoveFromLibrary,\n  resetLibrary,\n  onSelectItems,\n  appState,\n  className,\n}) => {\n  const [libraryItemsData] = useAtom(libraryItemsAtom);\n  const [isLibraryMenuOpen, setIsLibraryMenuOpen] = useAtom(isLibraryMenuOpenAtom);\n\n  const renderRemoveLibAlert = () => {\n    const content = selectedItems.length\n      ? t(\"alerts.removeItemsFromsLibrary\", { count: selectedItems.length })\n      : t(\"alerts.resetLibrary\");\n    const title = selectedItems.length\n      ? t(\"confirmDialog.removeItemsFromLib\")\n      : t(\"confirmDialog.resetLibrary\");\n    return (\n      <ConfirmDialog\n        onConfirm={() => {\n          if (selectedItems.length) {\n            onRemoveFromLibrary();\n          } else {\n            resetLibrary();\n          }\n          setShowRemoveLibAlert(false);\n        }}\n        onCancel={() => {\n          setShowRemoveLibAlert(false);\n        }}\n        title={title}\n      >\n        <p>{content}</p>\n      </ConfirmDialog>\n    );\n  };\n\n  const [showRemoveLibAlert, setShowRemoveLibAlert] = useState(false);\n\n  const itemsSelected = !!selectedItems.length;\n  const items = itemsSelected\n    ? libraryItemsData.libraryItems.filter(item => selectedItems.includes(item.id))\n    : libraryItemsData.libraryItems;\n  const resetLabel = itemsSelected ? t(\"buttons.remove\") : t(\"buttons.resetLibrary\");\n\n  const [showPublishLibraryDialog, setShowPublishLibraryDialog] = useState(false);\n  const [publishLibSuccess, setPublishLibSuccess] = useState<null | {\n    url: string;\n    authorName: string;\n  }>(null);\n  const renderPublishSuccess = useCallback(() => {\n    return (\n      <Dialog\n        onCloseRequest={() => setPublishLibSuccess(null)}\n        title={t(\"publishSuccessDialog.title\")}\n        className=\"publish-library-success\"\n        size=\"small\"\n      >\n        <p>\n          <Trans\n            i18nKey=\"publishSuccessDialog.content\"\n            authorName={publishLibSuccess!.authorName}\n            link={el => (\n              <a href={publishLibSuccess?.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {el}\n              </a>\n            )}\n          />\n        </p>\n        <ToolButton\n          type=\"button\"\n          title={t(\"buttons.close\")}\n          aria-label={t(\"buttons.close\")}\n          label={t(\"buttons.close\")}\n          onClick={() => setPublishLibSuccess(null)}\n          data-testid=\"publish-library-success-close\"\n          className=\"publish-library-success-close\"\n        />\n      </Dialog>\n    );\n  }, [setPublishLibSuccess, publishLibSuccess]);\n\n  const onPublishLibSuccess = (\n    data: { url: string; authorName: string },\n    libraryItems: LibraryItems\n  ) => {\n    setShowPublishLibraryDialog(false);\n    setPublishLibSuccess({ url: data.url, authorName: data.authorName });\n    const nextLibItems = libraryItems.slice();\n    nextLibItems.forEach(libItem => {\n      if (selectedItems.includes(libItem.id)) {\n        libItem.status = \"published\";\n      }\n    });\n    library.setLibrary(nextLibItems);\n  };\n\n  const onLibraryImport = async () => {\n    try {\n      await library.updateLibrary({\n        libraryItems: fileOpen({\n          description: \"JsonDraw library files\",\n          // ToDo: Be over-permissive until https://bugs.webkit.org/show_bug.cgi?id=34442\n          // gets resolved. Else, iOS users cannot open `.jsondraw` files.\n          /*\n            extensions: [\".json\", \".jsondrawlib\"],\n            */\n        }),\n        merge: true,\n        openLibraryMenu: true,\n      });\n    } catch (error: any) {\n      if (error?.name === \"AbortError\") {\n        console.warn(error);\n        return;\n      }\n      setAppState({ errorMessage: t(\"errors.importLibraryError\") });\n    }\n  };\n\n  const onLibraryExport = async () => {\n    const libraryItems = itemsSelected ? items : await library.getLatestLibrary();\n    saveLibraryAsJSON(libraryItems)\n      .catch(muteFSAbortError)\n      .catch(error => {\n        setAppState({ errorMessage: error.message });\n      });\n  };\n\n  const renderLibraryMenu = () => {\n    return (\n      <DropdownMenu open={isLibraryMenuOpen}>\n        <DropdownMenu.Trigger onToggle={() => setIsLibraryMenuOpen(!isLibraryMenuOpen)}>\n          {DotsIcon}\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content\n          onClickOutside={() => setIsLibraryMenuOpen(false)}\n          onSelect={() => setIsLibraryMenuOpen(false)}\n          className=\"library-menu\"\n        >\n          {!itemsSelected && (\n            <DropdownMenu.Item\n              onSelect={onLibraryImport}\n              icon={LoadIcon}\n              data-testid=\"lib-dropdown--load\"\n            >\n              {t(\"buttons.load\")}\n            </DropdownMenu.Item>\n          )}\n          {!!items.length && (\n            <DropdownMenu.Item\n              onSelect={onLibraryExport}\n              icon={ExportIcon}\n              data-testid=\"lib-dropdown--export\"\n            >\n              {t(\"buttons.export\")}\n            </DropdownMenu.Item>\n          )}\n          {itemsSelected && (\n            <DropdownMenu.Item\n              icon={publishIcon}\n              onSelect={() => setShowPublishLibraryDialog(true)}\n              data-testid=\"lib-dropdown--remove\"\n            >\n              {t(\"buttons.publishLibrary\")}\n            </DropdownMenu.Item>\n          )}\n          {!!items.length && (\n            <DropdownMenu.Item onSelect={() => setShowRemoveLibAlert(true)} icon={TrashIcon}>\n              {resetLabel}\n            </DropdownMenu.Item>\n          )}\n        </DropdownMenu.Content>\n      </DropdownMenu>\n    );\n  };\n\n  return (\n    <div className={clsx(\"library-menu-dropdown-container\", className)}>\n      {renderLibraryMenu()}\n      {selectedItems.length > 0 && (\n        <div className=\"library-actions-counter\">{selectedItems.length}</div>\n      )}\n      {showRemoveLibAlert && renderRemoveLibAlert()}\n      {showPublishLibraryDialog && (\n        <PublishLibrary\n          onClose={() => setShowPublishLibraryDialog(false)}\n          libraryItems={getSelectedItems(libraryItemsData.libraryItems, selectedItems)}\n          appState={appState}\n          onSuccess={data => onPublishLibSuccess(data, libraryItemsData.libraryItems)}\n          onError={error => window.alert(error)}\n          updateItemsInStorage={() => library.setLibrary(libraryItemsData.libraryItems)}\n          onRemove={(id: string) => onSelectItems(selectedItems.filter(_id => _id !== id))}\n        />\n      )}\n      {publishLibSuccess && renderPublishSuccess()}\n    </div>\n  );\n};\n\nexport const LibraryDropdownMenu = ({\n  selectedItems,\n  onSelectItems,\n  className,\n}: {\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n  className?: string;\n}) => {\n  const { library } = useApp();\n  const { clearLibraryCache, deleteItemsFromLibraryCache } = useLibraryCache();\n  const appState = useUIAppState();\n  const setAppState = useJsonDrawSetAppState();\n\n  const [libraryItemsData] = useAtom(libraryItemsAtom);\n\n  const removeFromLibrary = async (libraryItems: LibraryItems) => {\n    const nextItems = libraryItems.filter(item => !selectedItems.includes(item.id));\n    library.setLibrary(nextItems).catch(() => {\n      setAppState({ errorMessage: t(\"alerts.errorRemovingFromLibrary\") });\n    });\n\n    deleteItemsFromLibraryCache(selectedItems);\n\n    onSelectItems([]);\n  };\n\n  const resetLibrary = () => {\n    library.resetLibrary();\n    clearLibraryCache();\n  };\n\n  return (\n    <LibraryDropdownMenuButton\n      appState={appState}\n      setAppState={setAppState}\n      selectedItems={selectedItems}\n      onSelectItems={onSelectItems}\n      library={library}\n      onRemoveFromLibrary={() => removeFromLibrary(libraryItemsData.libraryItems)}\n      resetLibrary={resetLibrary}\n      className={className}\n    />\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LibraryMenuItems.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LibraryMenuItems.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useCallback } from \"react\";\n\n/** noop polyfill for v17. Subset of API available */\nfunction useTransitionPolyfill() {\n  const startTransition = useCallback((callback: () => void) => callback(), []);\n  return [false, startTransition] as const;\n}\n\nexport const useTransition = React.useTransition || useTransitionPolyfill;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LibraryUnit.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LibraryUnit.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { memo, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { useLibraryItemSvg } from \"../../hooks/useLibraryItemSvg\";\nimport type { SvgCache } from \"../../hooks/useLibraryItemSvg\";\nimport type { LibraryItem } from \"../../types\";\nimport { useEditorInterface } from \"../App\";\nimport { PlusIcon } from \"../icons\";\nimport { CheckboxItem } from \"../ui/CheckboxItem\";\nimport \"./LibraryUnit.scss\";\n\nexport const LibraryUnit = memo(\n  ({\n    id,\n    elements,\n    isPending,\n    onClick,\n    selected,\n    onToggle,\n    onDrag,\n    svgCache,\n  }: {\n    id: LibraryItem[\"id\"] | /** for pending item */ null;\n    elements?: LibraryItem[\"elements\"];\n    isPending?: boolean;\n    onClick: (id: LibraryItem[\"id\"] | null) => void;\n    selected: boolean;\n    onToggle: (id: string, event: React.MouseEvent) => void;\n    onDrag: (id: string, event: React.DragEvent) => void;\n    svgCache: SvgCache;\n  }) => {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const svg = useLibraryItemSvg(id, elements, svgCache, ref);\n\n    const [isHovered, setIsHovered] = useState(false);\n    const isMobile = useEditorInterface().formFactor === \"phone\";\n    const adder = isPending && <div className=\"library-unit__adder\">{PlusIcon}</div>;\n\n    return (\n      <div\n        className={clsx(\"library-unit\", {\n          \"library-unit__active\": elements,\n          \"library-unit--hover\": elements && isHovered,\n          \"library-unit--selected\": selected,\n          \"library-unit--skeleton\": !svg,\n        })}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <div\n          className={clsx(\"library-unit__dragger\", {\n            \"library-unit__pulse\": !!isPending,\n          })}\n          ref={ref}\n          draggable={!!elements}\n          onClick={\n            !!elements || !!isPending\n              ? event => {\n                  if (id && event.shiftKey) {\n                    onToggle(id, event);\n                  } else {\n                    onClick(id);\n                  }\n                }\n              : undefined\n          }\n          onDragStart={event => {\n            if (!id) {\n              event.preventDefault();\n              return;\n            }\n            setIsHovered(false);\n            onDrag(id, event);\n          }}\n        />\n        {adder}\n        {id && elements && (isHovered || isMobile || selected) && (\n          <CheckboxItem\n            checked={selected}\n            onChange={(checked, event) => onToggle(id, event)}\n            className=\"library-unit__checkbox\"\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nexport const EmptyLibraryUnit = () => <div className=\"library-unit library-unit--skeleton\" />;\n","import React, { memo, useEffect, useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport type { JsonDrawElement, NonDeleted } from \"@jsondraw/element/types\";\nimport type { SvgCache } from \"../../hooks/useLibraryItemSvg\";\nimport { useTransition } from \"../../hooks/useTransition\";\nimport type { LibraryItem } from \"../../types\";\nimport { EmptyLibraryUnit, LibraryUnit } from \"./LibraryUnit\";\n\ntype LibraryOrPendingItem = readonly (\n  | LibraryItem\n  | /* pending library item */ {\n      id: null;\n      elements: readonly NonDeleted<JsonDrawElement>[];\n    }\n)[];\n\ninterface Props {\n  items: LibraryOrPendingItem;\n  onClick: (id: LibraryItem[\"id\"] | null) => void;\n  onItemSelectToggle: (id: LibraryItem[\"id\"], event: React.MouseEvent) => void;\n  onItemDrag: (id: LibraryItem[\"id\"], event: React.DragEvent) => void;\n  isItemSelected: (id: LibraryItem[\"id\"] | null) => boolean;\n  svgCache: SvgCache;\n  itemsRenderedPerBatch: number;\n}\n\nexport const LibraryMenuSectionGrid = ({ children }: { children: ReactNode }) => {\n  return <div className=\"library-menu-items-container__grid\">{children}</div>;\n};\n\nexport const LibraryMenuSection = memo(\n  ({\n    items,\n    onItemSelectToggle,\n    onItemDrag,\n    isItemSelected,\n    onClick,\n    svgCache,\n    itemsRenderedPerBatch,\n  }: Props) => {\n    const [, startTransition] = useTransition();\n    const [index, setIndex] = useState(0);\n\n    useEffect(() => {\n      if (index < items.length) {\n        startTransition(() => {\n          setIndex(index + itemsRenderedPerBatch);\n        });\n      }\n    }, [index, items.length, startTransition, itemsRenderedPerBatch]);\n\n    return (\n      <>\n        {items.map((item, i) => {\n          return i < index ? (\n            <LibraryUnit\n              elements={item?.elements}\n              isPending={!item?.id && !!item?.elements}\n              onClick={onClick}\n              svgCache={svgCache}\n              id={item?.id}\n              selected={isItemSelected(item.id)}\n              onToggle={onItemSelectToggle}\n              onDrag={onItemDrag}\n              key={item?.id ?? i}\n            />\n          ) : (\n            <EmptyLibraryUnit key={i} />\n          );\n        })}\n      </>\n    );\n  }\n);\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { MIME_TYPES, arrayToMap, nextAnimationFrame } from \"@jsondraw/common\";\nimport { duplicateElements } from \"@jsondraw/element\";\nimport clsx from \"clsx\";\nimport type { JsonDrawLibraryIds } from \"../../data/types\";\nimport { deburr } from \"../../deburr\";\nimport { useLibraryCache } from \"../../hooks/useLibraryItemSvg\";\nimport { useScrollPosition } from \"../../hooks/useScrollPosition\";\nimport { t } from \"../../i18n\";\nimport type { JsonDrawProps, LibraryItem, LibraryItems, UIAppState } from \"../../types\";\nimport { useEditorInterface } from \"../App\";\nimport Stack from \"../layout/Stack\";\nimport { Button } from \"../ui/Button\";\nimport Spinner from \"../ui/Spinner\";\nimport { TextField } from \"../ui/TextField\";\nimport { LibraryMenuControlButtons } from \"./LibraryMenuControlButtons\";\nimport { LibraryDropdownMenu } from \"./LibraryMenuHeaderContent\";\nimport \"./LibraryMenuItems.scss\";\nimport { LibraryMenuSection, LibraryMenuSectionGrid } from \"./LibraryMenuSection\";\n\n// using an odd number of items per batch so the rendering creates an irregular\n// pattern which looks more organic\nconst ITEMS_RENDERED_PER_BATCH = 17;\n// when render outputs cached we can render many more items per batch to\n// speed it up\nconst CACHED_ITEMS_RENDERED_PER_BATCH = 64;\n\nexport default function LibraryMenuItems({\n  isLoading,\n  libraryItems,\n  onAddToLibrary,\n  onInsertLibraryItems,\n  pendingElements,\n  theme,\n  id,\n  libraryReturnUrl,\n  onSelectItems,\n  selectedItems,\n}: {\n  isLoading: boolean;\n  libraryItems: LibraryItems;\n  pendingElements: LibraryItem[\"elements\"];\n  onInsertLibraryItems: (libraryItems: LibraryItems) => void;\n  onAddToLibrary: (elements: LibraryItem[\"elements\"]) => void;\n  libraryReturnUrl: JsonDrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n}) {\n  const editorInterface = useEditorInterface();\n  const libraryContainerRef = useRef<HTMLDivElement>(null);\n  const scrollPosition = useScrollPosition<HTMLDivElement>(libraryContainerRef);\n\n  // This effect has to be called only on first render, therefore  `scrollPosition` isn't in the dependency array\n  useEffect(() => {\n    if (scrollPosition > 0) {\n      libraryContainerRef.current?.scrollTo(0, scrollPosition);\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const { svgCache } = useLibraryCache();\n  const [lastSelectedItem, setLastSelectedItem] = useState<LibraryItem[\"id\"] | null>(null);\n\n  const [searchInputValue, setSearchInputValue] = useState(\"\");\n\n  const IS_LIBRARY_EMPTY = !libraryItems.length && !pendingElements.length;\n\n  const IS_SEARCHING = !IS_LIBRARY_EMPTY && !!searchInputValue.trim();\n\n  const filteredItems = useMemo(() => {\n    const searchQuery = deburr(searchInputValue.trim().toLowerCase());\n    if (!searchQuery) {\n      return [];\n    }\n\n    return libraryItems.filter(item => {\n      const itemName = item.name || \"\";\n      return itemName.trim() && deburr(itemName.toLowerCase()).includes(searchQuery);\n    });\n  }, [libraryItems, searchInputValue]);\n\n  const unpublishedItems = useMemo(\n    () => libraryItems.filter(item => item.status !== \"published\"),\n    [libraryItems]\n  );\n\n  const publishedItems = useMemo(\n    () => libraryItems.filter(item => item.status === \"published\"),\n    [libraryItems]\n  );\n\n  const onItemSelectToggle = useCallback(\n    (id: LibraryItem[\"id\"], event: React.MouseEvent) => {\n      const shouldSelect = !selectedItems.includes(id);\n      const orderedItems = [...unpublishedItems, ...publishedItems];\n      if (shouldSelect) {\n        if (event.shiftKey && lastSelectedItem) {\n          const rangeStart = orderedItems.findIndex(item => item.id === lastSelectedItem);\n          const rangeEnd = orderedItems.findIndex(item => item.id === id);\n\n          if (rangeStart === -1 || rangeEnd === -1) {\n            onSelectItems([...selectedItems, id]);\n            return;\n          }\n\n          const selectedItemsMap = arrayToMap(selectedItems);\n          // Support both top-down and bottom-up selection by using min/max\n          const minRange = Math.min(rangeStart, rangeEnd);\n          const maxRange = Math.max(rangeStart, rangeEnd);\n          const nextSelectedIds = orderedItems.reduce((acc: LibraryItem[\"id\"][], item, idx) => {\n            if ((idx >= minRange && idx <= maxRange) || selectedItemsMap.has(item.id)) {\n              acc.push(item.id);\n            }\n            return acc;\n          }, []);\n          onSelectItems(nextSelectedIds);\n        } else {\n          onSelectItems([...selectedItems, id]);\n        }\n        setLastSelectedItem(id);\n      } else {\n        setLastSelectedItem(null);\n        onSelectItems(selectedItems.filter(_id => _id !== id));\n      }\n    },\n    [lastSelectedItem, onSelectItems, publishedItems, selectedItems, unpublishedItems]\n  );\n\n  useEffect(() => {\n    // if selection is removed (e.g. via esc), reset last selected item\n    // so that subsequent shift+clicks don't select a large range\n    if (!selectedItems.length) {\n      setLastSelectedItem(null);\n    }\n  }, [selectedItems]);\n\n  const getInsertedElements = useCallback(\n    (id: string) => {\n      let targetElements;\n      if (selectedItems.includes(id)) {\n        targetElements = libraryItems.filter(item => selectedItems.includes(item.id));\n      } else {\n        targetElements = libraryItems.filter(item => item.id === id);\n      }\n      return targetElements.map(item => {\n        return {\n          ...item,\n          // duplicate each library item before inserting on canvas to confine\n          // ids and bindings to each library item. See #6465\n          elements: duplicateElements({\n            type: \"everything\",\n            elements: item.elements,\n            randomizeSeed: true,\n          }).duplicatedElements,\n        };\n      });\n    },\n    [libraryItems, selectedItems]\n  );\n\n  const onItemDrag = useCallback(\n    (id: LibraryItem[\"id\"], event: React.DragEvent) => {\n      // we want to serialize just the ids so the operation is fast and there's\n      // no race condition if people drop the library items on canvas too fast\n      const data: JsonDrawLibraryIds = {\n        itemIds: selectedItems.includes(id) ? selectedItems : [id],\n      };\n      event.dataTransfer.setData(MIME_TYPES.jsondrawlibIds, JSON.stringify(data));\n    },\n    [selectedItems]\n  );\n\n  const isItemSelected = useCallback(\n    (id: LibraryItem[\"id\"] | null) => {\n      if (!id) {\n        return false;\n      }\n      return selectedItems.includes(id);\n    },\n    [selectedItems]\n  );\n\n  const onAddToLibraryClick = useCallback(() => {\n    onAddToLibrary(pendingElements);\n  }, [pendingElements, onAddToLibrary]);\n\n  const onItemClick = useCallback(\n    (id: LibraryItem[\"id\"] | null) => {\n      if (id) {\n        onInsertLibraryItems(getInsertedElements(id));\n      }\n    },\n    [getInsertedElements, onInsertLibraryItems]\n  );\n\n  const itemsRenderedPerBatch =\n    svgCache.size >= (filteredItems.length ? filteredItems : libraryItems).length\n      ? CACHED_ITEMS_RENDERED_PER_BATCH\n      : ITEMS_RENDERED_PER_BATCH;\n\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  useEffect(() => {\n    // focus could be stolen by tab trigger button\n    nextAnimationFrame(() => {\n      searchInputRef.current?.focus();\n    });\n  }, []);\n\n  const JSX_whenNotSearching = !IS_SEARCHING && (\n    <>\n      {!IS_LIBRARY_EMPTY && (\n        <div className=\"library-menu-items-container__header\">{t(\"labels.personalLib\")}</div>\n      )}\n      {!pendingElements.length && !unpublishedItems.length ? (\n        <div className=\"library-menu-items__no-items\">\n          {!publishedItems.length && (\n            <div className=\"library-menu-items__no-items__label\">{t(\"library.noItems\")}</div>\n          )}\n          <div className=\"library-menu-items__no-items__hint\">\n            {publishedItems.length > 0\n              ? t(\"library.hint_emptyPrivateLibrary\")\n              : t(\"library.hint_emptyLibrary\")}\n          </div>\n        </div>\n      ) : (\n        <LibraryMenuSectionGrid>\n          {pendingElements.length > 0 && (\n            <LibraryMenuSection\n              itemsRenderedPerBatch={itemsRenderedPerBatch}\n              items={[{ id: null, elements: pendingElements }]}\n              onItemSelectToggle={onItemSelectToggle}\n              onItemDrag={onItemDrag}\n              onClick={onAddToLibraryClick}\n              isItemSelected={isItemSelected}\n              svgCache={svgCache}\n            />\n          )}\n          <LibraryMenuSection\n            itemsRenderedPerBatch={itemsRenderedPerBatch}\n            items={unpublishedItems}\n            onItemSelectToggle={onItemSelectToggle}\n            onItemDrag={onItemDrag}\n            onClick={onItemClick}\n            isItemSelected={isItemSelected}\n            svgCache={svgCache}\n          />\n        </LibraryMenuSectionGrid>\n      )}\n\n      {publishedItems.length > 0 && (\n        <div className=\"library-menu-items-container__header\" style={{ marginTop: \"0.75rem\" }}>\n          {t(\"labels.jsondrawLib\")}\n        </div>\n      )}\n      {publishedItems.length > 0 && (\n        <LibraryMenuSectionGrid>\n          <LibraryMenuSection\n            itemsRenderedPerBatch={itemsRenderedPerBatch}\n            items={publishedItems}\n            onItemSelectToggle={onItemSelectToggle}\n            onItemDrag={onItemDrag}\n            onClick={onItemClick}\n            isItemSelected={isItemSelected}\n            svgCache={svgCache}\n          />\n        </LibraryMenuSectionGrid>\n      )}\n    </>\n  );\n\n  const JSX_whenSearching = IS_SEARCHING && (\n    <>\n      <div className=\"library-menu-items-container__header\">\n        {t(\"library.search.heading\")}\n        {!isLoading && (\n          <div\n            className=\"library-menu-items-container__header__hint\"\n            style={{ cursor: \"pointer\" }}\n            onPointerDown={e => e.preventDefault()}\n            onClick={event => {\n              setSearchInputValue(\"\");\n            }}\n          >\n            <kbd>esc</kbd> to clear\n          </div>\n        )}\n      </div>\n      {filteredItems.length > 0 ? (\n        <LibraryMenuSectionGrid>\n          <LibraryMenuSection\n            itemsRenderedPerBatch={itemsRenderedPerBatch}\n            items={filteredItems}\n            onItemSelectToggle={onItemSelectToggle}\n            onItemDrag={onItemDrag}\n            onClick={onItemClick}\n            isItemSelected={isItemSelected}\n            svgCache={svgCache}\n          />\n        </LibraryMenuSectionGrid>\n      ) : (\n        <div className=\"library-menu-items__no-items\">\n          <div className=\"library-menu-items__no-items__hint\">{t(\"library.search.noResults\")}</div>\n          <Button\n            onPointerDown={e => e.preventDefault()}\n            onSelect={() => {\n              setSearchInputValue(\"\");\n            }}\n            style={{ width: \"auto\", marginTop: \"1rem\" }}\n          >\n            {t(\"library.search.clearSearch\")}\n          </Button>\n        </div>\n      )}\n    </>\n  );\n\n  return (\n    <div\n      className=\"library-menu-items-container\"\n      style={\n        pendingElements.length || unpublishedItems.length || publishedItems.length\n          ? { justifyContent: \"flex-start\" }\n          : { borderBottom: 0 }\n      }\n    >\n      <div className=\"library-menu-items-header\">\n        {!IS_LIBRARY_EMPTY && (\n          <TextField\n            ref={searchInputRef}\n            type=\"search\"\n            className={clsx(\"library-menu-items-container__search\", {\n              hideCancelButton: editorInterface.formFactor !== \"phone\",\n            })}\n            placeholder={t(\"library.search.inputPlaceholder\")}\n            value={searchInputValue}\n            onChange={value => setSearchInputValue(value)}\n          />\n        )}\n        <LibraryDropdownMenu\n          selectedItems={selectedItems}\n          onSelectItems={onSelectItems}\n          className=\"library-menu-dropdown-container--in-heading\"\n        />\n      </div>\n      <Stack.Col\n        className=\"library-menu-items-container__items\"\n        align=\"start\"\n        gap={1}\n        style={{\n          flex: publishedItems.length > 0 ? 1 : \"0 1 auto\",\n          margin: IS_LIBRARY_EMPTY ? \"auto\" : 0,\n        }}\n        ref={libraryContainerRef}\n      >\n        {isLoading && (\n          <div\n            style={{\n              position: \"absolute\",\n              top: \"var(--container-padding-y)\",\n              right: \"var(--container-padding-x)\",\n              transform: \"translateY(50%)\",\n            }}\n          >\n            <Spinner />\n          </div>\n        )}\n\n        {JSX_whenNotSearching}\n        {JSX_whenSearching}\n\n        {IS_LIBRARY_EMPTY && (\n          <LibraryMenuControlButtons\n            style={{ padding: \"16px 0\", width: \"100%\" }}\n            id={id}\n            libraryReturnUrl={libraryReturnUrl}\n            theme={theme}\n          />\n        )}\n      </Stack.Col>\n    </div>\n  );\n}\n","import React, { useState, useCallback, useMemo, useEffect, memo, useRef } from \"react\";\nimport {\n  LIBRARY_DISABLED_TYPES,\n  randomId,\n  isShallowEqual,\n  KEYS,\n  isWritableElement,\n  addEventListener,\n  EVENT,\n  CLASSES,\n} from \"@jsondraw/common\";\nimport type { JsonDrawElement, NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\nimport { trackEvent } from \"../../analytics\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { distributeLibraryItemsOnSquareGrid, libraryItemsAtom } from \"../../data/library\";\nimport type Library from \"../../data/library\";\nimport { atom, useAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\nimport { getSelectedElements } from \"../../scene\";\nimport type {\n  LibraryItems,\n  LibraryItem,\n  JsonDrawProps,\n  UIAppState,\n  AppClassProperties,\n} from \"../../types\";\nimport { useApp, useAppProps, useJsonDrawElements, useJsonDrawSetAppState } from \"../App\";\nimport Spinner from \"../ui/Spinner\";\nimport \"./LibraryMenu.scss\";\nimport { LibraryMenuControlButtons } from \"./LibraryMenuControlButtons\";\nimport LibraryMenuItems from \"./LibraryMenuItems\";\n\nexport const isLibraryMenuOpenAtom = atom(false);\n\nconst LibraryMenuWrapper = ({ children }: { children: React.ReactNode }) => {\n  return <div className=\"layer-ui__library\">{children}</div>;\n};\n\nconst LibraryMenuContent = memo(\n  ({\n    onInsertLibraryItems,\n    pendingElements,\n    onAddToLibrary,\n    setAppState,\n    libraryReturnUrl,\n    library,\n    id,\n    theme,\n    selectedItems,\n    onSelectItems,\n  }: {\n    pendingElements: LibraryItem[\"elements\"];\n    onInsertLibraryItems: (libraryItems: LibraryItems) => void;\n    onAddToLibrary: () => void;\n    setAppState: React.Component<any, UIAppState>[\"setState\"];\n    libraryReturnUrl: JsonDrawProps[\"libraryReturnUrl\"];\n    library: Library;\n    id: string;\n    theme: UIAppState[\"theme\"];\n    selectedItems: LibraryItem[\"id\"][];\n    onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n  }) => {\n    const [libraryItemsData] = useAtom(libraryItemsAtom);\n\n    const _onAddToLibrary = useCallback(\n      (elements: LibraryItem[\"elements\"]) => {\n        const addToLibrary = async (\n          processedElements: LibraryItem[\"elements\"],\n          libraryItems: LibraryItems\n        ) => {\n          trackEvent(\"element\", \"addToLibrary\", \"ui\");\n          for (const type of LIBRARY_DISABLED_TYPES) {\n            if (processedElements.some(element => element.type === type)) {\n              return setAppState({\n                errorMessage: t(`errors.libraryElementTypeError.${type}`),\n              });\n            }\n          }\n          const nextItems: LibraryItems = [\n            {\n              status: \"unpublished\",\n              elements: processedElements,\n              id: randomId(),\n              created: Date.now(),\n            },\n            ...libraryItems,\n          ];\n          onAddToLibrary();\n          library.setLibrary(nextItems).catch(() => {\n            setAppState({ errorMessage: t(\"alerts.errorAddingToLibrary\") });\n          });\n        };\n        addToLibrary(elements, libraryItemsData.libraryItems);\n      },\n      [onAddToLibrary, library, setAppState, libraryItemsData.libraryItems]\n    );\n\n    const libraryItems = useMemo(() => libraryItemsData.libraryItems, [libraryItemsData]);\n\n    if (libraryItemsData.status === \"loading\" && !libraryItemsData.isInitialized) {\n      return (\n        <LibraryMenuWrapper>\n          <div className=\"layer-ui__library-message\">\n            <div>\n              <Spinner size=\"2em\" />\n              <span>{t(\"labels.libraryLoadingMessage\")}</span>\n            </div>\n          </div>\n        </LibraryMenuWrapper>\n      );\n    }\n\n    const showBtn = libraryItemsData.libraryItems.length > 0 || pendingElements.length > 0;\n\n    return (\n      <LibraryMenuWrapper>\n        <LibraryMenuItems\n          isLoading={libraryItemsData.status === \"loading\"}\n          libraryItems={libraryItems}\n          onAddToLibrary={_onAddToLibrary}\n          onInsertLibraryItems={onInsertLibraryItems}\n          pendingElements={pendingElements}\n          id={id}\n          libraryReturnUrl={libraryReturnUrl}\n          theme={theme}\n          onSelectItems={onSelectItems}\n          selectedItems={selectedItems}\n        />\n        {showBtn && (\n          <LibraryMenuControlButtons\n            className=\"library-menu-control-buttons--at-bottom\"\n            style={{ padding: \"16px 12px 0 12px\" }}\n            id={id}\n            libraryReturnUrl={libraryReturnUrl}\n            theme={theme}\n          />\n        )}\n      </LibraryMenuWrapper>\n    );\n  }\n);\n\nconst getPendingElements = (\n  elements: readonly NonDeletedJsonDrawElement[],\n  selectedElementIds: UIAppState[\"selectedElementIds\"]\n) => ({\n  elements,\n  pending: getSelectedElements(\n    elements,\n    { selectedElementIds },\n    {\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    }\n  ),\n  selectedElementIds,\n});\n\nconst usePendingElementsMemo = (appState: UIAppState, app: AppClassProperties) => {\n  const elements = useJsonDrawElements();\n  const [state, setState] = useState(() =>\n    getPendingElements(elements, appState.selectedElementIds)\n  );\n\n  const selectedElementVersions = useRef(\n    new Map<JsonDrawElement[\"id\"], JsonDrawElement[\"version\"]>()\n  );\n\n  useEffect(() => {\n    for (const element of state.pending) {\n      selectedElementVersions.current.set(element.id, element.version);\n    }\n  }, [state.pending]);\n\n  useEffect(() => {\n    if (\n      // Only update once pointer is released.\n      // Reading directly from app.state to make it clear it's not reactive\n      // (hence, there's potential for stale state)\n      app.state.cursorButton === \"up\" &&\n      app.state.activeTool.type === \"selection\"\n    ) {\n      setState(prev => {\n        // if selectedElementIds changed, we don't have to compare versions\n        // ---------------------------------------------------------------------\n        if (!isShallowEqual(prev.selectedElementIds, appState.selectedElementIds)) {\n          selectedElementVersions.current.clear();\n          return getPendingElements(elements, appState.selectedElementIds);\n        }\n        // otherwise we need to check whether selected elements changed\n        // ---------------------------------------------------------------------\n        const elementsMap = app.scene.getNonDeletedElementsMap();\n        for (const id of Object.keys(appState.selectedElementIds)) {\n          const currVersion = elementsMap.get(id)?.version;\n          if (currVersion && currVersion !== selectedElementVersions.current.get(id)) {\n            // we can't update the selectedElementVersions in here\n            // because of double render in StrictMode which would overwrite\n            // the state in the second pass with the old `prev` state.\n            // Thus, we update versions in a separate effect. May create\n            // a race condition since current effect is not fully reactive.\n            return getPendingElements(elements, appState.selectedElementIds);\n          }\n        }\n        // nothing changed\n        // ---------------------------------------------------------------------\n        return prev;\n      });\n    }\n  }, [\n    app,\n    app.state.cursorButton,\n    app.state.activeTool.type,\n    appState.selectedElementIds,\n    elements,\n  ]);\n\n  return state.pending;\n};\n\n/**\n * This component is meant to be rendered inside <Sidebar.Tab/> inside our\n * <DefaultSidebar/> or host apps Sidebar components.\n */\nexport const LibraryMenu = memo(() => {\n  const app = useApp();\n  const { onInsertElements } = app;\n  const appProps = useAppProps();\n  const appState = useUIAppState();\n  const setAppState = useJsonDrawSetAppState();\n  const [selectedItems, setSelectedItems] = useState<LibraryItem[\"id\"][]>([]);\n  const memoizedLibrary = useMemo(() => app.library, [app.library]);\n  const pendingElements = usePendingElementsMemo(appState, app);\n\n  useEffect(() => {\n    return addEventListener(\n      document,\n      EVENT.KEYDOWN,\n      event => {\n        if (event.key === KEYS.ESCAPE && event.target instanceof HTMLElement) {\n          const target = event.target;\n          if (target.closest(`.${CLASSES.SIDEBAR}`)) {\n            // stop propagation so that we don't prevent it downstream\n            // (default browser behavior is to clear search input on ESC)\n            if (selectedItems.length > 0) {\n              event.stopPropagation();\n              setSelectedItems([]);\n            } else if (\n              isWritableElement(target) &&\n              target instanceof HTMLInputElement &&\n              !target.value\n            ) {\n              event.stopPropagation();\n              // if search input empty -> close library\n              // (maybe not a good idea?)\n              setAppState({ openSidebar: null });\n              app.focusContainer();\n            }\n          } else if (selectedItems.length > 0) {\n            const { x, y } = app.lastViewportPosition;\n            const elementUnderCursor = document.elementFromPoint(x, y);\n            // also deselect elements if sidebar doesn't have focus but the\n            // cursor is over it\n            if (elementUnderCursor?.closest(`.${CLASSES.SIDEBAR}`)) {\n              event.stopPropagation();\n              setSelectedItems([]);\n            }\n          }\n        }\n      },\n      { capture: true }\n    );\n  }, [selectedItems, setAppState, app]);\n\n  const onInsertLibraryItems = useCallback(\n    (libraryItems: LibraryItems) => {\n      onInsertElements(distributeLibraryItemsOnSquareGrid(libraryItems));\n      app.focusContainer();\n    },\n    [onInsertElements, app]\n  );\n\n  const deselectItems = useCallback(() => {\n    setAppState({\n      selectedElementIds: {},\n      selectedGroupIds: {},\n      activeEmbeddable: null,\n    });\n  }, [setAppState]);\n\n  return (\n    <LibraryMenuContent\n      pendingElements={pendingElements}\n      onInsertLibraryItems={onInsertLibraryItems}\n      onAddToLibrary={deselectItems}\n      setAppState={setAppState}\n      libraryReturnUrl={appProps.libraryReturnUrl}\n      library={memoizedLibrary}\n      id={app.id}\n      theme={appState.theme}\n      selectedItems={selectedItems}\n      onSelectItems={setSelectedItems}\n    />\n  );\n});\n","import React, { useEffect, useState } from \"react\";\nimport { KEYS, queryFocusableElements } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { useSetAtom } from \"../../editor-jotai\";\nimport { useCallbackRefState } from \"../../hooks/useCallbackRefState\";\nimport { t } from \"../../i18n\";\nimport { useJsonDrawContainer, useEditorInterface, useJsonDrawSetAppState } from \"../App\";\nimport \"./Dialog.scss\";\nimport { Island } from \"../layout/Island\";\nimport { Modal } from \"./Modal\";\nimport { CloseIcon } from \"../icons\";\nimport { isLibraryMenuOpenAtom } from \"../library/LibraryMenu\";\n\nexport type DialogSize = number | \"small\" | \"regular\" | \"wide\" | undefined;\n\nexport interface DialogProps {\n  children: React.ReactNode;\n  className?: string;\n  size?: DialogSize;\n  onCloseRequest(): void;\n  title: React.ReactNode | false;\n  autofocus?: boolean;\n  closeOnClickOutside?: boolean;\n}\n\nfunction getDialogSize(size: DialogSize): number {\n  if (size && typeof size === \"number\") {\n    return size;\n  }\n\n  switch (size) {\n    case \"small\":\n      return 550;\n    case \"wide\":\n      return 1024;\n    case \"regular\":\n    default:\n      return 800;\n  }\n}\n\nexport const Dialog = (props: DialogProps) => {\n  const [islandNode, setIslandNode] = useCallbackRefState<HTMLDivElement>();\n  const [lastActiveElement] = useState(document.activeElement);\n  const { id } = useJsonDrawContainer();\n  const isFullscreen = useEditorInterface().formFactor === \"phone\";\n\n  useEffect(() => {\n    if (!islandNode) {\n      return;\n    }\n\n    const focusableElements = queryFocusableElements(islandNode);\n\n    setTimeout(() => {\n      if (focusableElements.length > 0 && props.autofocus !== false) {\n        // If there's an element other than close, focus it.\n        (focusableElements[1] || focusableElements[0]).focus();\n      }\n    });\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === KEYS.TAB) {\n        const focusableElements = queryFocusableElements(islandNode);\n        const { activeElement } = document;\n        const currentIndex = focusableElements.findIndex(element => element === activeElement);\n\n        if (currentIndex === 0 && event.shiftKey) {\n          focusableElements[focusableElements.length - 1].focus();\n          event.preventDefault();\n        } else if (currentIndex === focusableElements.length - 1 && !event.shiftKey) {\n          focusableElements[0].focus();\n          event.preventDefault();\n        }\n      }\n    };\n\n    islandNode.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => islandNode.removeEventListener(\"keydown\", handleKeyDown);\n  }, [islandNode, props.autofocus]);\n\n  const setAppState = useJsonDrawSetAppState();\n  const setIsLibraryMenuOpen = useSetAtom(isLibraryMenuOpenAtom);\n\n  const onClose = () => {\n    setAppState({ openMenu: null });\n    setIsLibraryMenuOpen(false);\n    (lastActiveElement as HTMLElement).focus();\n    props.onCloseRequest();\n  };\n\n  return (\n    <Modal\n      className={clsx(\"Dialog\", props.className, {\n        \"Dialog--fullscreen\": isFullscreen,\n      })}\n      labelledBy=\"dialog-title\"\n      maxWidth={getDialogSize(props.size)}\n      onCloseRequest={onClose}\n      closeOnClickOutside={props.closeOnClickOutside}\n    >\n      <Island ref={setIslandNode}>\n        {props.title && (\n          <h2 id={`${id}-dialog-title`} className=\"Dialog__title\">\n            <span className=\"Dialog__titleContent\">{props.title}</span>\n          </h2>\n        )}\n        {isFullscreen && (\n          <button\n            className=\"Dialog__close\"\n            onClick={onClose}\n            title={t(\"buttons.close\")}\n            aria-label={t(\"buttons.close\")}\n            type=\"button\"\n          >\n            {CloseIcon}\n          </button>\n        )}\n        <div className=\"Dialog__content\">{props.children}</div>\n      </Island>\n    </Modal>\n  );\n};\n","import { flushSync } from \"react-dom\";\nimport { useSetAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\nimport { useJsonDrawContainer, useJsonDrawSetAppState } from \"../App\";\nimport \"./ConfirmDialog.scss\";\nimport { Dialog } from \"./Dialog\";\nimport type { DialogProps } from \"./Dialog\";\nimport DialogActionButton from \"./DialogActionButton\";\nimport { isLibraryMenuOpenAtom } from \"../library/LibraryMenu\";\n\ninterface Props extends Omit<DialogProps, \"onCloseRequest\"> {\n  onConfirm: () => void;\n  onCancel: () => void;\n  confirmText?: string;\n  cancelText?: string;\n}\nconst ConfirmDialog = (props: Props) => {\n  const {\n    onConfirm,\n    onCancel,\n    children,\n    confirmText = t(\"buttons.confirm\"),\n    cancelText = t(\"buttons.cancel\"),\n    className = \"\",\n    ...rest\n  } = props;\n  const setAppState = useJsonDrawSetAppState();\n  const setIsLibraryMenuOpen = useSetAtom(isLibraryMenuOpenAtom);\n  const { container } = useJsonDrawContainer();\n\n  return (\n    <Dialog\n      onCloseRequest={onCancel}\n      size=\"small\"\n      {...rest}\n      className={`confirm-dialog ${className}`}\n    >\n      {children}\n      <div className=\"confirm-dialog-buttons\">\n        <DialogActionButton\n          label={cancelText}\n          onClick={() => {\n            setAppState({ openMenu: null });\n            setIsLibraryMenuOpen(false);\n            // flush any pending updates synchronously,\n            // otherwise it could lead to crash in some chromium versions (131.0.6778.86),\n            // when `.focus` is invoked with container in some intermediate state\n            // (container seems mounted in DOM, but focus still causes a crash)\n            flushSync(() => {\n              onCancel();\n            });\n\n            container?.focus();\n          }}\n        />\n        <DialogActionButton\n          label={confirmText}\n          onClick={() => {\n            setAppState({ openMenu: null });\n            setIsLibraryMenuOpen(false);\n            // flush any pending updates synchronously,\n            // otherwise it leads to crash in some chromium versions (131.0.6778.86),\n            // when `.focus` is invoked with container in some intermediate state\n            // (container seems mounted in DOM, but focus still causes a crash)\n            flushSync(() => {\n              onConfirm();\n            });\n\n            container?.focus();\n          }}\n          actionType=\"danger\"\n        />\n      </div>\n    </Dialog>\n  );\n};\nexport default ConfirmDialog;\n","import { actionClearCanvas } from \"../../actions\";\nimport { atom, useAtom } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\n\nimport { useJsonDrawActionManager } from \"../App\";\nimport ConfirmDialog from \"./ConfirmDialog\";\n\nexport const activeConfirmDialogAtom = atom<\"clearCanvas\" | null>(null);\n\nexport const ActiveConfirmDialog = () => {\n  const [activeConfirmDialog, setActiveConfirmDialog] = useAtom(\n    activeConfirmDialogAtom,\n  );\n  const actionManager = useJsonDrawActionManager();\n\n  if (!activeConfirmDialog) {\n    return null;\n  }\n\n  if (activeConfirmDialog === \"clearCanvas\") {\n    return (\n      <ConfirmDialog\n        onConfirm={() => {\n          actionManager.executeAction(actionClearCanvas);\n          setActiveConfirmDialog(null);\n        }}\n        onCancel={() => setActiveConfirmDialog(null)}\n        title={t(\"clearCanvasDialog.title\")}\n      >\n        <p className=\"clear-canvas__content\"> {t(\"alerts.clearReset\")}</p>\n      </ConfirmDialog>\n    );\n  }\n\n  return null;\n};\n","import { KEYS } from \"@jsondraw/common\";\n\nimport {\n  SelectionIcon,\n  RectangleIcon,\n  DiamondIcon,\n  EllipseIcon,\n  ArrowIcon,\n  LineIcon,\n  FreedrawIcon,\n  TextIcon,\n  ImageIcon,\n  EraserIcon,\n} from \"./icons\";\n\nimport type { AppClassProperties } from \"../types\";\n\nexport const SHAPES = [\n  {\n    icon: SelectionIcon,\n    value: \"selection\",\n    key: KEYS.V,\n    numericKey: KEYS[\"1\"],\n    fillable: true,\n  },\n  {\n    icon: RectangleIcon,\n    value: \"rectangle\",\n    key: KEYS.R,\n    numericKey: KEYS[\"2\"],\n    fillable: true,\n  },\n  {\n    icon: DiamondIcon,\n    value: \"diamond\",\n    key: KEYS.D,\n    numericKey: KEYS[\"3\"],\n    fillable: true,\n  },\n  {\n    icon: EllipseIcon,\n    value: \"ellipse\",\n    key: KEYS.O,\n    numericKey: KEYS[\"4\"],\n    fillable: true,\n  },\n  {\n    icon: ArrowIcon,\n    value: \"arrow\",\n    key: KEYS.A,\n    numericKey: KEYS[\"5\"],\n    fillable: true,\n  },\n  {\n    icon: LineIcon,\n    value: \"line\",\n    key: KEYS.L,\n    numericKey: KEYS[\"6\"],\n    fillable: true,\n  },\n  {\n    icon: FreedrawIcon,\n    value: \"freedraw\",\n    key: [KEYS.P, KEYS.X],\n    numericKey: KEYS[\"7\"],\n    fillable: false,\n  },\n  {\n    icon: TextIcon,\n    value: \"text\",\n    key: KEYS.T,\n    numericKey: KEYS[\"8\"],\n    fillable: false,\n  },\n  {\n    icon: ImageIcon,\n    value: \"image\",\n    key: null,\n    numericKey: KEYS[\"9\"],\n    fillable: false,\n  },\n  {\n    icon: EraserIcon,\n    value: \"eraser\",\n    key: KEYS.E,\n    numericKey: KEYS[\"0\"],\n    fillable: false,\n  },\n] as const;\n\nexport const getToolbarTools = (app: AppClassProperties) => {\n  return app.state.preferredSelectionTool.type === \"lasso\"\n    ? ([\n        {\n          value: \"lasso\",\n          icon: SelectionIcon,\n          key: KEYS.V,\n          numericKey: KEYS[\"1\"],\n          fillable: true,\n        },\n        ...SHAPES.slice(1),\n      ] as const)\n    : SHAPES;\n};\n\nexport const findShapeByKey = (key: string, app: AppClassProperties) => {\n  const shape = getToolbarTools(app).find((shape, index) => {\n    return (\n      (shape.numericKey != null && key === shape.numericKey.toString()) ||\n      (shape.key &&\n        (typeof shape.key === \"string\"\n          ? shape.key === key\n          : (shape.key as readonly string[]).includes(key)))\n    );\n  });\n  return shape?.value || null;\n};\n","import { CODES, KEYS } from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { eyeIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nexport const actionToggleViewMode = register({\n  name: \"viewMode\",\n  label: \"labels.viewMode\",\n  icon: eyeIcon,\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.viewModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        viewModeEnabled: !this.checked!(appState),\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState) => appState.viewModeEnabled,\n  predicate: (elements, appState, appProps) => {\n    return typeof appProps.viewModeEnabled === \"undefined\";\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.R,\n});\n","import { createIsolation } from \"jotai-scope\";\nimport React from \"react\";\nimport tunnel from \"tunnel-rat\";\n\nexport type Tunnel = ReturnType<typeof tunnel>;\n\ntype TunnelsContextValue = {\n  MainMenuTunnel: Tunnel;\n  WelcomeScreenMenuHintTunnel: Tunnel;\n  WelcomeScreenToolbarHintTunnel: Tunnel;\n  WelcomeScreenHelpHintTunnel: Tunnel;\n  WelcomeScreenCenterTunnel: Tunnel;\n  FooterCenterTunnel: Tunnel;\n  DefaultSidebarTriggerTunnel: Tunnel;\n  DefaultSidebarTabTriggersTunnel: Tunnel;\n  OverwriteConfirmDialogTunnel: Tunnel;\n  TTDDialogTriggerTunnel: Tunnel;\n  // this can be removed once we create jotai stores per each editor\n  // instance\n  tunnelsJotai: ReturnType<typeof createIsolation>;\n};\n\nexport const TunnelsContext = React.createContext<TunnelsContextValue>(null!);\n\nexport const useTunnels = () => React.useContext(TunnelsContext);\n\nconst tunnelsJotai = createIsolation();\n\nexport const useInitializeTunnels = () => {\n  return React.useMemo((): TunnelsContextValue => {\n    return {\n      MainMenuTunnel: tunnel(),\n      WelcomeScreenMenuHintTunnel: tunnel(),\n      WelcomeScreenToolbarHintTunnel: tunnel(),\n      WelcomeScreenHelpHintTunnel: tunnel(),\n      WelcomeScreenCenterTunnel: tunnel(),\n      FooterCenterTunnel: tunnel(),\n      DefaultSidebarTriggerTunnel: tunnel(),\n      DefaultSidebarTabTriggersTunnel: tunnel(),\n      OverwriteConfirmDialogTunnel: tunnel(),\n      TTDDialogTriggerTunnel: tunnel(),\n      tunnelsJotai,\n    };\n  }, []);\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Actions.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Actions.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ToolPopover.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ToolPopover.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useState } from \"react\";\nimport clsx from \"clsx\";\n\nimport { capitalizeString } from \"@jsondraw/common\";\n\nimport { Popover } from \"radix-ui\";\n\nimport { trackEvent } from \"../../analytics\";\n\nimport { ToolButton } from \"./ToolButton\";\n\nimport \"./ToolPopover.scss\";\n\nimport { useJsonDrawContainer } from \"../App\";\n\nimport type { AppClassProperties } from \"../../types\";\n\ntype ToolOption = {\n  type: string;\n  icon: React.ReactNode;\n  title?: string;\n};\n\ntype ToolPopoverProps = {\n  app: AppClassProperties;\n  options: readonly ToolOption[];\n  activeTool: { type: string };\n  defaultOption: string;\n  className?: string;\n  namePrefix: string;\n  title: string;\n  \"data-testid\": string;\n  onToolChange: (type: string) => void;\n  displayedOption: ToolOption;\n  fillable?: boolean;\n};\n\nexport const ToolPopover = ({\n  app,\n  options,\n  activeTool,\n  defaultOption,\n  className = \"Shape\",\n  namePrefix,\n  title,\n  \"data-testid\": dataTestId,\n  onToolChange,\n  displayedOption,\n  fillable = false,\n}: ToolPopoverProps) => {\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const currentType = activeTool.type;\n  const isActive = displayedOption.type === currentType;\n  const SIDE_OFFSET = 32 / 2 + 10;\n  const { container } = useJsonDrawContainer();\n\n  // if currentType is not in options, close popup\n  if (!options.some((o) => o.type === currentType) && isPopupOpen) {\n    setIsPopupOpen(false);\n  }\n\n  // Close popover when user starts interacting with the canvas (pointer down)\n  useEffect(() => {\n    // app.onPointerDownEmitter emits when pointer down happens on canvas area\n    const unsubscribe = app.onPointerDownEmitter.on(() => {\n      setIsPopupOpen(false);\n    });\n    return () => unsubscribe?.();\n  }, [app]);\n\n  return (\n    <Popover.Root open={isPopupOpen}>\n      <Popover.Trigger asChild>\n        <ToolButton\n          className={clsx(className, {\n            fillable,\n            active: options.some((o) => o.type === activeTool.type),\n          })}\n          type=\"radio\"\n          icon={displayedOption.icon}\n          checked={isActive}\n          name=\"editor-current-shape\"\n          title={title}\n          aria-label={title}\n          data-testid={dataTestId}\n          onPointerDown={() => {\n            setIsPopupOpen((v) => !v);\n            onToolChange(defaultOption);\n          }}\n        />\n      </Popover.Trigger>\n\n      <Popover.Content\n        className=\"tool-popover-content\"\n        sideOffset={SIDE_OFFSET}\n        collisionBoundary={container ?? undefined}\n      >\n        {options.map(({ type, icon, title }) => (\n          <ToolButton\n            className={clsx(className, {\n              active: currentType === type,\n            })}\n            key={type}\n            type=\"radio\"\n            icon={icon}\n            checked={currentType === type}\n            name={`${namePrefix}-option`}\n            title={title || capitalizeString(type)}\n            keyBindingLabel=\"\"\n            aria-label={title || capitalizeString(type)}\n            data-testid={`toolbar-${type}`}\n            onChange={() => {\n              if (app.state.activeTool.type !== type) {\n                trackEvent(\"toolbar\", type, \"ui\");\n              }\n              app.setActiveTool({ type: type as any });\n              onToolChange?.(type);\n            }}\n          />\n        ))}\n      </Popover.Content>\n    </Popover.Root>\n  );\n};\n","import { useRef, useState } from \"react\";\nimport { CLASSES, KEYS, capitalizeString, isTransparent } from \"@jsondraw/common\";\nimport {\n  shouldAllowVerticalAlign,\n  suppportsHorizontalAlign,\n  hasBoundTextElement,\n  isElbowArrow,\n  isImageElement,\n  isLinearElement,\n  isTextElement,\n  isArrowElement,\n  hasStrokeColor,\n  toolIsArrow,\n} from \"@jsondraw/element\";\nimport type {\n  JsonDrawElement,\n  JsonDrawElementType,\n  NonDeletedElementsMap,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport { Popover } from \"radix-ui\";\nimport { actionToggleZenMode } from \"../../actions\";\nimport { alignActionsPredicate } from \"../../actions/actionAlign\";\nimport { getFormValue } from \"../../actions/actionProperties\";\nimport { actionToggleViewMode } from \"../../actions/actionToggleViewMode\";\nimport type { ActionManager } from \"../../actions/manager\";\nimport { trackEvent } from \"../../analytics\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useTextEditorFocus } from \"../../hooks/useTextEditorFocus\";\nimport { t } from \"../../i18n\";\nimport {\n  canChangeRoundness,\n  canHaveArrowheads,\n  getTargetElements,\n  hasBackground,\n  hasStrokeStyle,\n  hasStrokeWidth,\n} from \"../../scene\";\nimport type { AppClassProperties, AppProps, UIAppState, Zoom, AppState } from \"../../types\";\nimport { useEditorInterface, useStylesPanelMode, useJsonDrawContainer } from \"../App\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\nimport {\n  EmbedIcon,\n  extraToolsIcon,\n  frameToolIcon,\n  mermaidLogoIcon,\n  laserPointerToolIcon,\n  MagicIcon,\n  LassoIcon,\n  sharpArrowIcon,\n  roundArrowIcon,\n  elbowArrowIcon,\n  TextSizeIcon,\n  adjustmentsIcon,\n  DotsHorizontalIcon,\n  SelectionIcon,\n  pencilIcon,\n} from \"../icons\";\nimport { Island } from \"../layout/Island\";\nimport Stack from \"../layout/Stack\";\nimport { getToolbarTools } from \"../shapes\";\nimport { PropertiesPopover } from \"../ui/PropertiesPopover\";\nimport { Tooltip } from \"../ui/Tooltip\";\nimport \"./Actions.scss\";\nimport { ToolButton } from \"./ToolButton\";\nimport { ToolPopover } from \"./ToolPopover\";\n\n// Common CSS class combinations\nconst PROPERTIES_CLASSES = clsx([CLASSES.SHAPE_ACTIONS_THEME_SCOPE, \"properties-content\"]);\n\nexport const canChangeStrokeColor = (appState: UIAppState, targetElements: JsonDrawElement[]) => {\n  let commonSelectedType: JsonDrawElementType | null = targetElements[0]?.type || null;\n\n  for (const element of targetElements) {\n    if (element.type !== commonSelectedType) {\n      commonSelectedType = null;\n      break;\n    }\n  }\n\n  return (\n    (hasStrokeColor(appState.activeTool.type) &&\n      commonSelectedType !== \"image\" &&\n      commonSelectedType !== \"frame\" &&\n      commonSelectedType !== \"magicframe\") ||\n    targetElements.some(element => hasStrokeColor(element.type))\n  );\n};\n\nexport const canChangeBackgroundColor = (\n  appState: UIAppState,\n  targetElements: JsonDrawElement[]\n) => {\n  return (\n    hasBackground(appState.activeTool.type) ||\n    targetElements.some(element => hasBackground(element.type))\n  );\n};\n\nexport const SelectedShapeActions = ({\n  appState,\n  elementsMap,\n  renderAction,\n  app,\n}: {\n  appState: UIAppState;\n  elementsMap: NonDeletedElementsMap | NonDeletedSceneElementsMap;\n  renderAction: ActionManager[\"renderAction\"];\n  app: AppClassProperties;\n}) => {\n  const targetElements = getTargetElements(elementsMap, appState);\n\n  let isSingleElementBoundContainer = false;\n  if (\n    targetElements.length === 2 &&\n    (hasBoundTextElement(targetElements[0]) || hasBoundTextElement(targetElements[1]))\n  ) {\n    isSingleElementBoundContainer = true;\n  }\n  const isEditingTextOrNewElement = Boolean(appState.editingTextElement || appState.newElement);\n  const editorInterface = useEditorInterface();\n  const isRTL = document.documentElement.getAttribute(\"dir\") === \"rtl\";\n\n  const showFillIcons =\n    (hasBackground(appState.activeTool.type) &&\n      !isTransparent(appState.currentItemBackgroundColor)) ||\n    targetElements.some(\n      element => hasBackground(element.type) && !isTransparent(element.backgroundColor)\n    );\n\n  const showLinkIcon = targetElements.length === 1 || isSingleElementBoundContainer;\n\n  const showLineEditorAction =\n    !appState.selectedLinearElement?.isEditing &&\n    targetElements.length === 1 &&\n    isLinearElement(targetElements[0]) &&\n    !isElbowArrow(targetElements[0]);\n\n  const showCropEditorAction =\n    !appState.croppingElementId && targetElements.length === 1 && isImageElement(targetElements[0]);\n\n  const showAlignActions = !isSingleElementBoundContainer && alignActionsPredicate(appState, app);\n\n  return (\n    <div className=\"selected-shape-actions\">\n      <div>\n        {canChangeStrokeColor(appState, targetElements) && renderAction(\"changeStrokeColor\")}\n      </div>\n      {canChangeBackgroundColor(appState, targetElements) && (\n        <div>{renderAction(\"changeBackgroundColor\")}</div>\n      )}\n      {showFillIcons && renderAction(\"changeFillStyle\")}\n\n      {(hasStrokeWidth(appState.activeTool.type) ||\n        targetElements.some(element => hasStrokeWidth(element.type))) &&\n        renderAction(\"changeStrokeWidth\")}\n\n      {(appState.activeTool.type === \"freedraw\" ||\n        targetElements.some(element => element.type === \"freedraw\")) &&\n        renderAction(\"changeStrokeShape\")}\n\n      {(hasStrokeStyle(appState.activeTool.type) ||\n        targetElements.some(element => hasStrokeStyle(element.type))) && (\n        <>\n          {renderAction(\"changeStrokeStyle\")}\n          {renderAction(\"changeSloppiness\")}\n        </>\n      )}\n\n      {(canChangeRoundness(appState.activeTool.type) ||\n        targetElements.some(element => canChangeRoundness(element.type))) && (\n        <>{renderAction(\"changeRoundness\")}</>\n      )}\n\n      {(toolIsArrow(appState.activeTool.type) ||\n        targetElements.some(element => toolIsArrow(element.type))) && (\n        <>{renderAction(\"changeArrowType\")}</>\n      )}\n\n      {(appState.activeTool.type === \"text\" || targetElements.some(isTextElement)) && (\n        <>\n          {renderAction(\"changeFontFamily\")}\n          {renderAction(\"changeFontSize\")}\n          {(appState.activeTool.type === \"text\" ||\n            suppportsHorizontalAlign(targetElements, elementsMap)) &&\n            renderAction(\"changeTextAlign\")}\n        </>\n      )}\n\n      {shouldAllowVerticalAlign(targetElements, elementsMap) && renderAction(\"changeVerticalAlign\")}\n      {(canHaveArrowheads(appState.activeTool.type) ||\n        targetElements.some(element => canHaveArrowheads(element.type))) && (\n        <>{renderAction(\"changeArrowhead\")}</>\n      )}\n\n      {renderAction(\"changeOpacity\")}\n\n      <fieldset>\n        <legend>{t(\"labels.layers\")}</legend>\n        <div className=\"buttonList\">\n          {renderAction(\"sendToBack\")}\n          {renderAction(\"sendBackward\")}\n          {renderAction(\"bringForward\")}\n          {renderAction(\"bringToFront\")}\n        </div>\n      </fieldset>\n\n      {showAlignActions && !isSingleElementBoundContainer && (\n        <fieldset>\n          <legend>{t(\"labels.align\")}</legend>\n          <div className=\"buttonList\">\n            {\n              // swap this order for RTL so the button positions always match their action\n              // (i.e. the leftmost button aligns left)\n            }\n            {isRTL ? (\n              <>\n                {renderAction(\"alignRight\")}\n                {renderAction(\"alignHorizontallyCentered\")}\n                {renderAction(\"alignLeft\")}\n              </>\n            ) : (\n              <>\n                {renderAction(\"alignLeft\")}\n                {renderAction(\"alignHorizontallyCentered\")}\n                {renderAction(\"alignRight\")}\n              </>\n            )}\n            {targetElements.length > 2 && renderAction(\"distributeHorizontally\")}\n            {/* breaks the row  */}\n            <div style={{ flexBasis: \"100%\", height: 0 }} />\n            <div\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \".5rem\",\n                marginTop: \"-0.5rem\",\n              }}\n            >\n              {renderAction(\"alignTop\")}\n              {renderAction(\"alignVerticallyCentered\")}\n              {renderAction(\"alignBottom\")}\n              {targetElements.length > 2 && renderAction(\"distributeVertically\")}\n            </div>\n          </div>\n        </fieldset>\n      )}\n      {!isEditingTextOrNewElement && targetElements.length > 0 && (\n        <fieldset>\n          <legend>{t(\"labels.actions\")}</legend>\n          <div className=\"buttonList\">\n            {editorInterface.formFactor !== \"phone\" && renderAction(\"duplicateSelection\")}\n            {editorInterface.formFactor !== \"phone\" && renderAction(\"deleteSelectedElements\")}\n            {renderAction(\"group\")}\n            {renderAction(\"ungroup\")}\n            {showLinkIcon && renderAction(\"hyperlink\")}\n            {showCropEditorAction && renderAction(\"cropEditor\")}\n            {showLineEditorAction && renderAction(\"toggleLinearEditor\")}\n          </div>\n        </fieldset>\n      )}\n    </div>\n  );\n};\n\nconst CombinedShapeProperties = ({\n  appState,\n  renderAction,\n  setAppState,\n  targetElements,\n  container,\n}: {\n  targetElements: JsonDrawElement[];\n  appState: UIAppState;\n  renderAction: ActionManager[\"renderAction\"];\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  container: HTMLDivElement | null;\n}) => {\n  const showFillIcons =\n    (hasBackground(appState.activeTool.type) &&\n      !isTransparent(appState.currentItemBackgroundColor)) ||\n    targetElements.some(\n      element => hasBackground(element.type) && !isTransparent(element.backgroundColor)\n    );\n\n  const shouldShowCombinedProperties =\n    targetElements.length > 0 ||\n    (appState.activeTool.type !== \"selection\" &&\n      appState.activeTool.type !== \"eraser\" &&\n      appState.activeTool.type !== \"hand\" &&\n      appState.activeTool.type !== \"laser\" &&\n      appState.activeTool.type !== \"lasso\");\n  const isOpen = appState.openPopup === \"compactStrokeStyles\";\n\n  if (!shouldShowCombinedProperties) {\n    return null;\n  }\n\n  return (\n    <div className=\"compact-action-item\">\n      <Popover.Root\n        open={isOpen}\n        onOpenChange={open => {\n          if (open) {\n            setAppState({ openPopup: \"compactStrokeStyles\" });\n          } else {\n            setAppState({ openPopup: null });\n          }\n        }}\n      >\n        <Popover.Trigger asChild>\n          <button\n            type=\"button\"\n            className={clsx(\"compact-action-button properties-trigger\", {\n              active: isOpen,\n            })}\n            title={t(\"labels.stroke\")}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n\n              setAppState({\n                openPopup: isOpen ? null : \"compactStrokeStyles\",\n              });\n            }}\n          >\n            {adjustmentsIcon}\n          </button>\n        </Popover.Trigger>\n        {isOpen && (\n          <PropertiesPopover\n            className={PROPERTIES_CLASSES}\n            container={container}\n            style={{ maxWidth: \"13rem\" }}\n            onClose={() => {}}\n          >\n            <div className=\"selected-shape-actions\">\n              {showFillIcons && renderAction(\"changeFillStyle\")}\n              {(hasStrokeWidth(appState.activeTool.type) ||\n                targetElements.some(element => hasStrokeWidth(element.type))) &&\n                renderAction(\"changeStrokeWidth\")}\n              {(hasStrokeStyle(appState.activeTool.type) ||\n                targetElements.some(element => hasStrokeStyle(element.type))) && (\n                <>\n                  {renderAction(\"changeStrokeStyle\")}\n                  {renderAction(\"changeSloppiness\")}\n                </>\n              )}\n              {(canChangeRoundness(appState.activeTool.type) ||\n                targetElements.some(element => canChangeRoundness(element.type))) &&\n                renderAction(\"changeRoundness\")}\n              {renderAction(\"changeOpacity\")}\n            </div>\n          </PropertiesPopover>\n        )}\n      </Popover.Root>\n    </div>\n  );\n};\n\nconst CombinedArrowProperties = ({\n  appState,\n  renderAction,\n  setAppState,\n  targetElements,\n  container,\n  app,\n}: {\n  targetElements: JsonDrawElement[];\n  appState: UIAppState;\n  renderAction: ActionManager[\"renderAction\"];\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  container: HTMLDivElement | null;\n  app: AppClassProperties;\n}) => {\n  const showShowArrowProperties =\n    toolIsArrow(appState.activeTool.type) ||\n    targetElements.some(element => toolIsArrow(element.type));\n  const isOpen = appState.openPopup === \"compactArrowProperties\";\n\n  if (!showShowArrowProperties) {\n    return null;\n  }\n\n  return (\n    <div className=\"compact-action-item\">\n      <Popover.Root\n        open={isOpen}\n        onOpenChange={open => {\n          if (open) {\n            setAppState({ openPopup: \"compactArrowProperties\" });\n          } else {\n            setAppState({ openPopup: null });\n          }\n        }}\n      >\n        <Popover.Trigger asChild>\n          <button\n            type=\"button\"\n            className={clsx(\"compact-action-button properties-trigger\", {\n              active: isOpen,\n            })}\n            title={t(\"labels.arrowtypes\")}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n\n              setAppState({\n                openPopup: isOpen ? null : \"compactArrowProperties\",\n              });\n            }}\n          >\n            {(() => {\n              // Show an icon based on the current arrow type\n              const arrowType = getFormValue(\n                targetElements,\n                app,\n                element => {\n                  if (isArrowElement(element)) {\n                    return element.elbowed ? \"elbow\" : element.roundness ? \"round\" : \"sharp\";\n                  }\n                  return null;\n                },\n                element => isArrowElement(element),\n                hasSelection => (hasSelection ? null : appState.currentItemArrowType)\n              );\n\n              if (arrowType === \"elbow\") {\n                return elbowArrowIcon;\n              }\n              if (arrowType === \"round\") {\n                return roundArrowIcon;\n              }\n              return sharpArrowIcon;\n            })()}\n          </button>\n        </Popover.Trigger>\n        {isOpen && (\n          <PropertiesPopover\n            container={container}\n            className=\"properties-content\"\n            style={{ maxWidth: \"13rem\" }}\n            onClose={() => {}}\n          >\n            {renderAction(\"changeArrowProperties\")}\n          </PropertiesPopover>\n        )}\n      </Popover.Root>\n    </div>\n  );\n};\n\nconst CombinedTextProperties = ({\n  appState,\n  renderAction,\n  setAppState,\n  targetElements,\n  container,\n  elementsMap,\n}: {\n  appState: UIAppState;\n  renderAction: ActionManager[\"renderAction\"];\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  targetElements: JsonDrawElement[];\n  container: HTMLDivElement | null;\n  elementsMap: NonDeletedElementsMap | NonDeletedSceneElementsMap;\n}) => {\n  const { saveCaretPosition, restoreCaretPosition } = useTextEditorFocus();\n  const isOpen = appState.openPopup === \"compactTextProperties\";\n\n  return (\n    <div className=\"compact-action-item\">\n      <Popover.Root\n        open={isOpen}\n        onOpenChange={open => {\n          if (open) {\n            if (appState.editingTextElement) {\n              saveCaretPosition();\n            }\n            setAppState({ openPopup: \"compactTextProperties\" });\n          } else {\n            setAppState({ openPopup: null });\n            if (appState.editingTextElement) {\n              restoreCaretPosition();\n            }\n          }\n        }}\n      >\n        <Popover.Trigger asChild>\n          <button\n            type=\"button\"\n            className={clsx(\"compact-action-button properties-trigger\", {\n              active: isOpen,\n            })}\n            title={t(\"labels.textAlign\")}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n\n              if (isOpen) {\n                setAppState({ openPopup: null });\n              } else {\n                if (appState.editingTextElement) {\n                  saveCaretPosition();\n                }\n                setAppState({ openPopup: \"compactTextProperties\" });\n              }\n            }}\n          >\n            {TextSizeIcon}\n          </button>\n        </Popover.Trigger>\n        {appState.openPopup === \"compactTextProperties\" && (\n          <PropertiesPopover\n            className={PROPERTIES_CLASSES}\n            container={container}\n            style={{ maxWidth: \"13rem\" }}\n            // Improve focus handling for text editing scenarios\n            preventAutoFocusOnTouch={!!appState.editingTextElement}\n            onClose={() => {\n              // Refocus text editor when popover closes with caret restoration\n              if (appState.editingTextElement) {\n                restoreCaretPosition();\n              }\n            }}\n          >\n            <div className=\"selected-shape-actions\">\n              {(appState.activeTool.type === \"text\" || targetElements.some(isTextElement)) &&\n                renderAction(\"changeFontSize\")}\n              {(appState.activeTool.type === \"text\" ||\n                suppportsHorizontalAlign(targetElements, elementsMap)) &&\n                renderAction(\"changeTextAlign\")}\n              {shouldAllowVerticalAlign(targetElements, elementsMap) &&\n                renderAction(\"changeVerticalAlign\")}\n            </div>\n          </PropertiesPopover>\n        )}\n      </Popover.Root>\n    </div>\n  );\n};\n\nconst CombinedExtraActions = ({\n  appState,\n  renderAction,\n  targetElements,\n  setAppState,\n  container,\n  app,\n  showDuplicate,\n  showDelete,\n}: {\n  appState: UIAppState;\n  targetElements: JsonDrawElement[];\n  renderAction: ActionManager[\"renderAction\"];\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  container: HTMLDivElement | null;\n  app: AppClassProperties;\n  showDuplicate?: boolean;\n  showDelete?: boolean;\n}) => {\n  const isEditingTextOrNewElement = Boolean(appState.editingTextElement || appState.newElement);\n  const showCropEditorAction =\n    !appState.croppingElementId && targetElements.length === 1 && isImageElement(targetElements[0]);\n  const showLinkIcon = targetElements.length === 1;\n  const showAlignActions = alignActionsPredicate(appState, app);\n  let isSingleElementBoundContainer = false;\n  if (\n    targetElements.length === 2 &&\n    (hasBoundTextElement(targetElements[0]) || hasBoundTextElement(targetElements[1]))\n  ) {\n    isSingleElementBoundContainer = true;\n  }\n\n  const isRTL = document.documentElement.getAttribute(\"dir\") === \"rtl\";\n  const isOpen = appState.openPopup === \"compactOtherProperties\";\n\n  if (isEditingTextOrNewElement || targetElements.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"compact-action-item\">\n      <Popover.Root\n        open={isOpen}\n        onOpenChange={open => {\n          if (open) {\n            setAppState({ openPopup: \"compactOtherProperties\" });\n          } else {\n            setAppState({ openPopup: null });\n          }\n        }}\n      >\n        <Popover.Trigger asChild>\n          <button\n            type=\"button\"\n            className={clsx(\"compact-action-button properties-trigger\", {\n              active: isOpen,\n            })}\n            title={t(\"labels.actions\")}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n              setAppState({\n                openPopup: isOpen ? null : \"compactOtherProperties\",\n              });\n            }}\n          >\n            {DotsHorizontalIcon}\n          </button>\n        </Popover.Trigger>\n        {isOpen && (\n          <PropertiesPopover\n            className={PROPERTIES_CLASSES}\n            container={container}\n            style={{\n              maxWidth: \"12rem\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            }}\n            onClose={() => {}}\n          >\n            <div className=\"selected-shape-actions\">\n              <fieldset>\n                <legend>{t(\"labels.layers\")}</legend>\n                <div className=\"buttonList\">\n                  {renderAction(\"sendToBack\")}\n                  {renderAction(\"sendBackward\")}\n                  {renderAction(\"bringForward\")}\n                  {renderAction(\"bringToFront\")}\n                </div>\n              </fieldset>\n\n              {showAlignActions && !isSingleElementBoundContainer && (\n                <fieldset>\n                  <legend>{t(\"labels.align\")}</legend>\n                  <div className=\"buttonList\">\n                    {isRTL ? (\n                      <>\n                        {renderAction(\"alignRight\")}\n                        {renderAction(\"alignHorizontallyCentered\")}\n                        {renderAction(\"alignLeft\")}\n                      </>\n                    ) : (\n                      <>\n                        {renderAction(\"alignLeft\")}\n                        {renderAction(\"alignHorizontallyCentered\")}\n                        {renderAction(\"alignRight\")}\n                      </>\n                    )}\n                    {targetElements.length > 2 && renderAction(\"distributeHorizontally\")}\n                    {/* breaks the row  */}\n                    <div style={{ flexBasis: \"100%\", height: 0 }} />\n                    <div\n                      style={{\n                        display: \"flex\",\n                        flexWrap: \"wrap\",\n                        gap: \".5rem\",\n                        marginTop: \"-0.5rem\",\n                      }}\n                    >\n                      {renderAction(\"alignTop\")}\n                      {renderAction(\"alignVerticallyCentered\")}\n                      {renderAction(\"alignBottom\")}\n                      {targetElements.length > 2 && renderAction(\"distributeVertically\")}\n                    </div>\n                  </div>\n                </fieldset>\n              )}\n              <fieldset>\n                <legend>{t(\"labels.actions\")}</legend>\n                <div className=\"buttonList\">\n                  {renderAction(\"group\")}\n                  {renderAction(\"ungroup\")}\n                  {showLinkIcon && renderAction(\"hyperlink\")}\n                  {showCropEditorAction && renderAction(\"cropEditor\")}\n                  {showDuplicate && renderAction(\"duplicateSelection\")}\n                  {showDelete && renderAction(\"deleteSelectedElements\")}\n                </div>\n              </fieldset>\n            </div>\n          </PropertiesPopover>\n        )}\n      </Popover.Root>\n    </div>\n  );\n};\n\nconst LinearEditorAction = ({\n  appState,\n  renderAction,\n  targetElements,\n}: {\n  appState: UIAppState;\n  targetElements: JsonDrawElement[];\n  renderAction: ActionManager[\"renderAction\"];\n}) => {\n  const showLineEditorAction =\n    !appState.selectedLinearElement?.isEditing &&\n    targetElements.length === 1 &&\n    isLinearElement(targetElements[0]) &&\n    !isElbowArrow(targetElements[0]);\n\n  if (!showLineEditorAction) {\n    return null;\n  }\n\n  return <div className=\"compact-action-item\">{renderAction(\"toggleLinearEditor\")}</div>;\n};\n\nexport const CompactShapeActions = ({\n  appState,\n  elementsMap,\n  renderAction,\n  app,\n  setAppState,\n}: {\n  appState: UIAppState;\n  elementsMap: NonDeletedElementsMap | NonDeletedSceneElementsMap;\n  renderAction: ActionManager[\"renderAction\"];\n  app: AppClassProperties;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n}) => {\n  const targetElements = getTargetElements(elementsMap, appState);\n  const { container } = useJsonDrawContainer();\n\n  const isEditingTextOrNewElement = Boolean(appState.editingTextElement || appState.newElement);\n\n  const showLineEditorAction =\n    !appState.selectedLinearElement?.isEditing &&\n    targetElements.length === 1 &&\n    isLinearElement(targetElements[0]) &&\n    !isElbowArrow(targetElements[0]);\n\n  return (\n    <div className=\"compact-shape-actions\">\n      {/* Stroke Color */}\n      {canChangeStrokeColor(appState, targetElements) && (\n        <div className={clsx(\"compact-action-item\")}>{renderAction(\"changeStrokeColor\")}</div>\n      )}\n\n      {/* Background Color */}\n      {canChangeBackgroundColor(appState, targetElements) && (\n        <div className=\"compact-action-item\">{renderAction(\"changeBackgroundColor\")}</div>\n      )}\n\n      <CombinedShapeProperties\n        appState={appState}\n        renderAction={renderAction}\n        setAppState={setAppState}\n        targetElements={targetElements}\n        container={container}\n      />\n\n      <CombinedArrowProperties\n        appState={appState}\n        renderAction={renderAction}\n        setAppState={setAppState}\n        targetElements={targetElements}\n        container={container}\n        app={app}\n      />\n      {/* Linear Editor */}\n      {showLineEditorAction && (\n        <div className=\"compact-action-item\">{renderAction(\"toggleLinearEditor\")}</div>\n      )}\n\n      {/* Text Properties */}\n      {(appState.activeTool.type === \"text\" || targetElements.some(isTextElement)) && (\n        <>\n          <div className=\"compact-action-item\">{renderAction(\"changeFontFamily\")}</div>\n          <CombinedTextProperties\n            appState={appState}\n            renderAction={renderAction}\n            setAppState={setAppState}\n            targetElements={targetElements}\n            container={container}\n            elementsMap={elementsMap}\n          />\n        </>\n      )}\n\n      {/* Dedicated Copy Button */}\n      {!isEditingTextOrNewElement && targetElements.length > 0 && (\n        <div className=\"compact-action-item\">{renderAction(\"duplicateSelection\")}</div>\n      )}\n\n      {/* Dedicated Delete Button */}\n      {!isEditingTextOrNewElement && targetElements.length > 0 && (\n        <div className=\"compact-action-item\">{renderAction(\"deleteSelectedElements\")}</div>\n      )}\n\n      <CombinedExtraActions\n        appState={appState}\n        renderAction={renderAction}\n        targetElements={targetElements}\n        setAppState={setAppState}\n        container={container}\n        app={app}\n      />\n    </div>\n  );\n};\n\nexport const MobileShapeActions = ({\n  appState,\n  elementsMap,\n  renderAction,\n  app,\n  setAppState,\n}: {\n  appState: UIAppState;\n  elementsMap: NonDeletedElementsMap | NonDeletedSceneElementsMap;\n  renderAction: ActionManager[\"renderAction\"];\n  app: AppClassProperties;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n}) => {\n  const targetElements = getTargetElements(elementsMap, appState);\n  const { container } = useJsonDrawContainer();\n  const mobileActionsRef = useRef<HTMLDivElement>(null);\n\n  const ACTIONS_WIDTH = mobileActionsRef.current?.getBoundingClientRect()?.width ?? 0;\n\n  // 7 actions + 2 for undo/redo\n  const MIN_ACTIONS = 9;\n\n  const GAP = 6;\n  const WIDTH = 32;\n\n  const MIN_WIDTH = MIN_ACTIONS * WIDTH + (MIN_ACTIONS - 1) * GAP;\n\n  const ADDITIONAL_WIDTH = WIDTH + GAP;\n\n  const showDeleteOutside = ACTIONS_WIDTH >= MIN_WIDTH + ADDITIONAL_WIDTH;\n  const showDuplicateOutside = ACTIONS_WIDTH >= MIN_WIDTH + 2 * ADDITIONAL_WIDTH;\n\n  return (\n    <Island\n      className=\"compact-shape-actions mobile-shape-actions\"\n      style={{\n        flexDirection: \"row\",\n        boxShadow: \"none\",\n        padding: 0,\n        zIndex: 2,\n        backgroundColor: \"transparent\",\n        height: WIDTH * 1.35,\n        marginBottom: 4,\n        alignItems: \"center\",\n        gap: GAP,\n        pointerEvents: \"none\",\n      }}\n      ref={mobileActionsRef}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          gap: GAP,\n          flex: 1,\n        }}\n      >\n        {canChangeStrokeColor(appState, targetElements) && (\n          <div className={clsx(\"compact-action-item\")}>{renderAction(\"changeStrokeColor\")}</div>\n        )}\n        {canChangeBackgroundColor(appState, targetElements) && (\n          <div className=\"compact-action-item\">{renderAction(\"changeBackgroundColor\")}</div>\n        )}\n        <CombinedShapeProperties\n          appState={appState}\n          renderAction={renderAction}\n          setAppState={setAppState}\n          targetElements={targetElements}\n          container={container}\n        />\n        {/* Combined Arrow Properties */}\n        <CombinedArrowProperties\n          appState={appState}\n          renderAction={renderAction}\n          setAppState={setAppState}\n          targetElements={targetElements}\n          container={container}\n          app={app}\n        />\n        {/* Linear Editor */}\n        <LinearEditorAction\n          appState={appState}\n          renderAction={renderAction}\n          targetElements={targetElements}\n        />\n        {/* Text Properties */}\n        {(appState.activeTool.type === \"text\" || targetElements.some(isTextElement)) && (\n          <>\n            <div className=\"compact-action-item\">{renderAction(\"changeFontFamily\")}</div>\n            <CombinedTextProperties\n              appState={appState}\n              renderAction={renderAction}\n              setAppState={setAppState}\n              targetElements={targetElements}\n              container={container}\n              elementsMap={elementsMap}\n            />\n          </>\n        )}\n\n        {/* Combined Other Actions */}\n        <CombinedExtraActions\n          appState={appState}\n          renderAction={renderAction}\n          targetElements={targetElements}\n          setAppState={setAppState}\n          container={container}\n          app={app}\n          showDuplicate={!showDuplicateOutside}\n          showDelete={!showDeleteOutside}\n        />\n      </div>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          gap: GAP,\n        }}\n      >\n        <div className=\"compact-action-item\">{renderAction(\"undo\")}</div>\n        <div className=\"compact-action-item\">{renderAction(\"redo\")}</div>\n        {showDuplicateOutside && (\n          <div className=\"compact-action-item\">{renderAction(\"duplicateSelection\")}</div>\n        )}\n        {showDeleteOutside && (\n          <div className=\"compact-action-item\">{renderAction(\"deleteSelectedElements\")}</div>\n        )}\n      </div>\n    </Island>\n  );\n};\n\nexport const ShapesSwitcher = ({\n  activeTool,\n  setAppState,\n  app,\n  UIOptions,\n}: {\n  activeTool: UIAppState[\"activeTool\"];\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  app: AppClassProperties;\n  UIOptions: AppProps[\"UIOptions\"];\n}) => {\n  const [isExtraToolsMenuOpen, setIsExtraToolsMenuOpen] = useState(false);\n  const stylesPanelMode = useStylesPanelMode();\n  const isFullStylesPanel = stylesPanelMode === \"full\";\n  const isCompactStylesPanel = stylesPanelMode === \"compact\";\n\n  const SELECTION_TOOLS = [\n    {\n      type: \"selection\",\n      icon: SelectionIcon,\n      title: capitalizeString(t(\"toolBar.selection\")),\n    },\n    {\n      type: \"lasso\",\n      icon: LassoIcon,\n      title: capitalizeString(t(\"toolBar.lasso\")),\n    },\n  ] as const;\n\n  const frameToolSelected = activeTool.type === \"frame\";\n  const laserToolSelected = activeTool.type === \"laser\";\n  const lassoToolSelected =\n    isFullStylesPanel &&\n    activeTool.type === \"lasso\" &&\n    app.state.preferredSelectionTool.type !== \"lasso\";\n\n  const embeddableToolSelected = activeTool.type === \"embeddable\";\n\n  const { TTDDialogTriggerTunnel } = useTunnels();\n\n  return (\n    <>\n      {getToolbarTools(app).map(({ value, icon, key, numericKey, fillable }, index) => {\n        if (\n          UIOptions.tools?.[\n            value as Extract<typeof value, keyof AppProps[\"UIOptions\"][\"tools\"]>\n          ] === false\n        ) {\n          return null;\n        }\n\n        const label = t(`toolBar.${value}`);\n        const letter = key && capitalizeString(typeof key === \"string\" ? key : key[0]);\n        const shortcut = letter ? `${letter} ${t(\"helpDialog.or\")} ${numericKey}` : `${numericKey}`;\n        // when in compact styles panel mode (tablet)\n        // use a ToolPopover for selection/lasso toggle as well\n        if ((value === \"selection\" || value === \"lasso\") && isCompactStylesPanel) {\n          return (\n            <ToolPopover\n              key={\"selection-popover\"}\n              app={app}\n              options={SELECTION_TOOLS}\n              activeTool={activeTool}\n              defaultOption={app.state.preferredSelectionTool.type}\n              namePrefix=\"selectionType\"\n              title={capitalizeString(t(\"toolBar.selection\"))}\n              data-testid=\"toolbar-selection\"\n              onToolChange={(type: string) => {\n                if (type === \"selection\" || type === \"lasso\") {\n                  app.setActiveTool({ type });\n                  setAppState({\n                    preferredSelectionTool: { type, initialized: true },\n                  });\n                }\n              }}\n              displayedOption={\n                SELECTION_TOOLS.find(tool => tool.type === app.state.preferredSelectionTool.type) ||\n                SELECTION_TOOLS[0]\n              }\n              fillable={activeTool.type === \"selection\"}\n            />\n          );\n        }\n\n        return (\n          <ToolButton\n            className={clsx(\"Shape\", { fillable })}\n            key={value}\n            type=\"radio\"\n            icon={icon}\n            checked={activeTool.type === value}\n            name=\"editor-current-shape\"\n            title={`${capitalizeString(label)}  ${shortcut}`}\n            keyBindingLabel={numericKey || letter}\n            aria-label={capitalizeString(label)}\n            aria-keyshortcuts={shortcut}\n            data-testid={`toolbar-${value}`}\n            onPointerDown={({ pointerType }) => {\n              if (!app.state.penDetected && pointerType === \"pen\") {\n                app.togglePenMode(true);\n              }\n\n              if (value === \"selection\") {\n                if (app.state.activeTool.type === \"selection\") {\n                  app.setActiveTool({ type: \"lasso\" });\n                } else {\n                  app.setActiveTool({ type: \"selection\" });\n                }\n              }\n            }}\n            onChange={({ pointerType }) => {\n              if (app.state.activeTool.type !== value) {\n                trackEvent(\"toolbar\", value, \"ui\");\n              }\n              if (value === \"image\") {\n                app.setActiveTool({\n                  type: value,\n                });\n              } else {\n                app.setActiveTool({ type: value });\n              }\n            }}\n          />\n        );\n      })}\n      <div className=\"App-toolbar__divider\" />\n\n      <DropdownMenu open={isExtraToolsMenuOpen}>\n        <DropdownMenu.Trigger\n          className={clsx(\"App-toolbar__extra-tools-trigger\", {\n            \"App-toolbar__extra-tools-trigger--selected\":\n              frameToolSelected ||\n              embeddableToolSelected ||\n              lassoToolSelected ||\n              // in collab we're already highlighting the laser button\n              // outside toolbar, so let's not highlight extra-tools button\n              // on top of it\n              (laserToolSelected && !app.props.isCollaborating),\n          })}\n          onToggle={() => {\n            setIsExtraToolsMenuOpen(!isExtraToolsMenuOpen);\n            setAppState({ openMenu: null, openPopup: null });\n          }}\n          title={t(\"toolBar.extraTools\")}\n        >\n          {frameToolSelected\n            ? frameToolIcon\n            : embeddableToolSelected\n              ? EmbedIcon\n              : laserToolSelected && !app.props.isCollaborating\n                ? laserPointerToolIcon\n                : lassoToolSelected\n                  ? LassoIcon\n                  : extraToolsIcon}\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content\n          onClickOutside={() => setIsExtraToolsMenuOpen(false)}\n          onSelect={() => setIsExtraToolsMenuOpen(false)}\n          className=\"App-toolbar__extra-tools-dropdown\"\n        >\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"frame\" })}\n            icon={frameToolIcon}\n            shortcut={KEYS.F.toLocaleUpperCase()}\n            data-testid=\"toolbar-frame\"\n            selected={frameToolSelected}\n          >\n            {t(\"toolBar.frame\")}\n          </DropdownMenu.Item>\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"embeddable\" })}\n            icon={EmbedIcon}\n            data-testid=\"toolbar-embeddable\"\n            selected={embeddableToolSelected}\n          >\n            {t(\"toolBar.embeddable\")}\n          </DropdownMenu.Item>\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"laser\" })}\n            icon={laserPointerToolIcon}\n            data-testid=\"toolbar-laser\"\n            selected={laserToolSelected}\n            shortcut={KEYS.K.toLocaleUpperCase()}\n          >\n            {t(\"toolBar.laser\")}\n          </DropdownMenu.Item>\n          {isFullStylesPanel && (\n            <DropdownMenu.Item\n              onSelect={() => app.setActiveTool({ type: \"lasso\" })}\n              icon={LassoIcon}\n              data-testid=\"toolbar-lasso\"\n              selected={lassoToolSelected}\n            >\n              {t(\"toolBar.lasso\")}\n            </DropdownMenu.Item>\n          )}\n          <div style={{ margin: \"6px 0\", fontSize: 14, fontWeight: 600 }}>Generate</div>\n          {app.props.aiEnabled !== false && <TTDDialogTriggerTunnel.Out />}\n          <DropdownMenu.Item\n            onSelect={() => app.setOpenDialog({ name: \"ttd\", tab: \"mermaid\" })}\n            icon={mermaidLogoIcon}\n            data-testid=\"toolbar-embeddable\"\n          >\n            {t(\"toolBar.mermaidToJsonDraw\")}\n          </DropdownMenu.Item>\n          {app.props.aiEnabled !== false && app.plugins.diagramToCode && (\n            <DropdownMenu.Item\n              onSelect={() => app.onMagicframeToolSelect()}\n              icon={MagicIcon}\n              data-testid=\"toolbar-magicframe\"\n              badge={<DropdownMenu.Item.Badge>AI</DropdownMenu.Item.Badge>}\n            >\n              {t(\"toolBar.magicframe\")}\n            </DropdownMenu.Item>\n          )}\n        </DropdownMenu.Content>\n      </DropdownMenu>\n    </>\n  );\n};\n\nexport const ZoomActions = ({\n  renderAction,\n  zoom,\n}: {\n  renderAction: ActionManager[\"renderAction\"];\n  zoom: Zoom;\n}) => (\n  <Stack.Col gap={1} className={CLASSES.ZOOM_ACTIONS}>\n    <Stack.Row align=\"center\">\n      {renderAction(\"zoomOut\")}\n      {renderAction(\"resetZoom\")}\n      {renderAction(\"zoomIn\")}\n    </Stack.Row>\n  </Stack.Col>\n);\n\nexport const UndoRedoActions = ({\n  renderAction,\n  className,\n}: {\n  renderAction: ActionManager[\"renderAction\"];\n  className?: string;\n}) => (\n  <div className={`undo-redo-buttons ${className}`}>\n    <div className=\"undo-button-container\">\n      <Tooltip label={t(\"buttons.undo\")}>{renderAction(\"undo\")}</Tooltip>\n    </div>\n    <div className=\"redo-button-container\">\n      <Tooltip label={t(\"buttons.redo\")}> {renderAction(\"redo\")}</Tooltip>\n    </div>\n  </div>\n);\n\nexport const ExitZenModeButton = ({\n  actionManager,\n  showExitZenModeBtn,\n}: {\n  actionManager: ActionManager;\n  showExitZenModeBtn: boolean;\n}) => (\n  <button\n    type=\"button\"\n    className={clsx(\"disable-zen-mode\", {\n      \"disable-zen-mode--visible\": showExitZenModeBtn,\n    })}\n    onClick={() => actionManager.executeAction(actionToggleZenMode)}\n  >\n    {t(\"buttons.exitZenMode\")}\n  </button>\n);\n\nexport const ExitViewModeButton = ({ actionManager }: { actionManager: ActionManager }) => (\n  <button\n    type=\"button\"\n    className=\"disable-view-mode\"\n    onClick={() => actionManager.executeAction(actionToggleViewMode)}\n  >\n    {pencilIcon}\n  </button>\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./CommandPalette.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./CommandPalette.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { actionToggleTheme } from \"../../actions\";\n\nimport type { CommandPaletteItem } from \"./types\";\n\nexport const toggleTheme: CommandPaletteItem = {\n  ...actionToggleTheme,\n  category: \"App\",\n  label: \"Toggle theme\",\n  perform: ({ actionManager }) => {\n    actionManager.executeAction(actionToggleTheme, \"commandPalette\");\n  },\n};\n","import { useEffect, useRef, useMemo, useState } from \"react\";\nimport {\n  DEFAULT_SIDEBAR,\n  EVENT,\n  KEYS,\n  capitalizeString,\n  isWritableElement,\n} from \"@jsondraw/common\";\nimport type { MarkRequired } from \"@jsondraw/common/utility-types\";\nimport { actionToggleShapeSwitch } from \"@jsondraw/jsondraw/actions/actionToggleShapeSwitch\";\nimport { getShortcutKey } from \"@jsondraw/jsondraw/shortcut\";\nimport clsx from \"clsx\";\nimport fuzzy from \"fuzzy\";\nimport { actionClearCanvas, actionLink, actionToggleSearchMenu } from \"../../actions\";\nimport { actionCopyElementLink, actionLinkToElement } from \"../../actions/actionElementLink\";\nimport { getShortcutFromShortcutName } from \"../../actions/shortcuts\";\nimport type { ShortcutName } from \"../../actions/shortcuts\";\nimport type { Action } from \"../../actions/types\";\nimport { trackEvent } from \"../../analytics\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { distributeLibraryItemsOnSquareGrid, libraryItemsAtom } from \"../../data/library\";\nimport { deburr } from \"../../deburr\";\nimport { atom, useAtom, editorJotaiStore } from \"../../editor-jotai\";\nimport { useLibraryCache, useLibraryItemSvg } from \"../../hooks/useLibraryItemSvg\";\nimport { useStable } from \"../../hooks/useStable\";\nimport { useStableCallback } from \"../../hooks/useStableCallback\";\nimport { t } from \"../../i18n\";\nimport type { TranslationKeys } from \"../../i18n\";\nimport { getSelectedElements } from \"../../scene\";\nimport type { AppProps, AppState, LibraryItem, UIAppState } from \"../../types\";\nimport { useApp, useAppProps, useJsonDrawActionManager, useJsonDrawSetAppState } from \"../App\";\nimport { activeConfirmDialogAtom } from \"../dialogs/ActiveConfirmDialog\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport {\n  LockedIcon,\n  UnlockedIcon,\n  searchIcon,\n  boltIcon,\n  bucketFillIcon,\n  ExportImageIcon,\n  mermaidLogoIcon,\n  brainIconThin,\n  LibraryIcon,\n  historyCommandIcon,\n} from \"../icons\";\nimport { SHAPES } from \"../shapes\";\nimport { canChangeBackgroundColor, canChangeStrokeColor } from \"../toolbar/Actions\";\nimport { Ellipsify } from \"../ui/Ellipsify\";\nimport { InlineIcon } from \"../ui/InlineIcon\";\nimport { TextField } from \"../ui/TextField\";\nimport \"./CommandPalette.scss\";\nimport * as defaultItems from \"./defaultCommandPaletteItems\";\nimport type { CommandPaletteItem } from \"./types\";\n\nconst lastUsedPaletteItem = atom<CommandPaletteItem | null>(null);\n\nexport const DEFAULT_CATEGORIES = {\n  app: \"App\",\n  export: \"Export\",\n  tools: \"Tools\",\n  editor: \"Editor\",\n  elements: \"Elements\",\n  links: \"Links\",\n  library: \"Library\",\n};\n\nconst getCategoryOrder = (category: string) => {\n  switch (category) {\n    case DEFAULT_CATEGORIES.app:\n      return 1;\n    case DEFAULT_CATEGORIES.export:\n      return 2;\n    case DEFAULT_CATEGORIES.editor:\n      return 3;\n    case DEFAULT_CATEGORIES.tools:\n      return 4;\n    case DEFAULT_CATEGORIES.elements:\n      return 5;\n    case DEFAULT_CATEGORIES.links:\n      return 6;\n    default:\n      return 10;\n  }\n};\n\nconst CommandShortcutHint = ({\n  shortcut,\n  className,\n  children,\n}: {\n  shortcut: string;\n  className?: string;\n  children?: React.ReactNode;\n}) => {\n  const shortcuts = shortcut.replace(\"++\", \"+$\").split(\"+\");\n\n  return (\n    <div className={clsx(\"shortcut\", className)}>\n      {shortcuts.map((item, idx) => {\n        return (\n          <div className=\"shortcut-wrapper\" key={item}>\n            <div className=\"shortcut-key\">{item === \"$\" ? \"+\" : item}</div>\n          </div>\n        );\n      })}\n      <div className=\"shortcut-desc\">{children}</div>\n    </div>\n  );\n};\n\nconst isCommandPaletteToggleShortcut = (event: KeyboardEvent) => {\n  return (\n    !event.altKey &&\n    event[KEYS.CTRL_OR_CMD] &&\n    ((event.shiftKey && event.key.toLowerCase() === KEYS.P) || event.key === KEYS.SLASH)\n  );\n};\n\ntype CommandPaletteProps = {\n  customCommandPaletteItems?: CommandPaletteItem[];\n};\n\nexport const CommandPalette = Object.assign(\n  (props: CommandPaletteProps) => {\n    const uiAppState = useUIAppState();\n    const setAppState = useJsonDrawSetAppState();\n\n    useEffect(() => {\n      const commandPaletteShortcut = (event: KeyboardEvent) => {\n        if (isCommandPaletteToggleShortcut(event)) {\n          event.preventDefault();\n          event.stopPropagation();\n          setAppState(appState => {\n            const nextState =\n              appState.openDialog?.name === \"commandPalette\"\n                ? null\n                : ({ name: \"commandPalette\" } as const);\n\n            if (nextState) {\n              trackEvent(\"command_palette\", \"open\", \"shortcut\");\n            }\n\n            return {\n              openDialog: nextState,\n            };\n          });\n        }\n      };\n      window.addEventListener(EVENT.KEYDOWN, commandPaletteShortcut, {\n        capture: true,\n      });\n      return () =>\n        window.removeEventListener(EVENT.KEYDOWN, commandPaletteShortcut, {\n          capture: true,\n        });\n    }, [setAppState]);\n\n    if (uiAppState.openDialog?.name !== \"commandPalette\") {\n      return null;\n    }\n\n    return <CommandPaletteInner {...props} />;\n  },\n  {\n    defaultItems,\n  }\n);\n\nfunction CommandPaletteInner({ customCommandPaletteItems }: CommandPaletteProps) {\n  const app = useApp();\n  const uiAppState = useUIAppState();\n  const setAppState = useJsonDrawSetAppState();\n  const appProps = useAppProps();\n  const actionManager = useJsonDrawActionManager();\n\n  const [lastUsed, setLastUsed] = useAtom(lastUsedPaletteItem);\n  const [allCommands, setAllCommands] = useState<\n    MarkRequired<CommandPaletteItem, \"haystack\" | \"order\">[] | null\n  >(null);\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const stableDeps = useStable({\n    uiAppState,\n    customCommandPaletteItems,\n    appProps,\n  });\n\n  const [libraryItemsData] = useAtom(libraryItemsAtom);\n  const libraryCommands: CommandPaletteItem[] = useMemo(() => {\n    return (\n      libraryItemsData.libraryItems\n        ?.filter(\n          (libraryItem): libraryItem is MarkRequired<LibraryItem, \"name\"> => !!libraryItem.name\n        )\n        .map(libraryItem => ({\n          label: libraryItem.name,\n          icon: <LibraryItemIcon id={libraryItem.id} elements={libraryItem.elements} />,\n          category: \"Library\",\n          order: getCategoryOrder(\"Library\"),\n          haystack: deburr(libraryItem.name),\n          perform: () => {\n            app.onInsertElements(distributeLibraryItemsOnSquareGrid([libraryItem]));\n          },\n        })) || []\n    );\n  }, [app, libraryItemsData.libraryItems]);\n\n  useEffect(() => {\n    // these props change often and we don't want them to re-run the effect\n    // which would renew `allCommands`, cascading down and resetting state.\n    //\n    // This means that the commands won't update on appState/appProps changes\n    // while the command palette is open\n    const { uiAppState, customCommandPaletteItems, appProps } = stableDeps;\n\n    const getActionLabel = (action: Action) => {\n      let label = \"\";\n      if (action.label) {\n        if (typeof action.label === \"function\") {\n          label = t(\n            action.label(\n              app.scene.getNonDeletedElements(),\n              uiAppState as AppState,\n              app\n            ) as unknown as TranslationKeys\n          );\n        } else {\n          label = t(action.label as unknown as TranslationKeys);\n        }\n      }\n      return label;\n    };\n\n    const getActionIcon = (action: Action) => {\n      if (typeof action.icon === \"function\") {\n        return action.icon(uiAppState, app.scene.getNonDeletedElements());\n      }\n      return action.icon;\n    };\n\n    let commandsFromActions: CommandPaletteItem[] = [];\n\n    const actionToCommand = (\n      action: Action,\n      category: string,\n      transformer?: (command: CommandPaletteItem, action: Action) => CommandPaletteItem\n    ): CommandPaletteItem => {\n      const command: CommandPaletteItem = {\n        label: getActionLabel(action),\n        icon: getActionIcon(action),\n        category,\n        shortcut: getShortcutFromShortcutName(action.name as ShortcutName),\n        keywords: action.keywords,\n        predicate: action.predicate,\n        viewMode: action.viewMode,\n        perform: () => {\n          actionManager.executeAction(action, \"commandPalette\");\n        },\n      };\n\n      return transformer ? transformer(command, action) : command;\n    };\n\n    if (uiAppState && app.scene && actionManager) {\n      const elementsCommands: CommandPaletteItem[] = [\n        actionManager.actions.group,\n        actionManager.actions.ungroup,\n        actionManager.actions.cut,\n        actionManager.actions.copy,\n        actionManager.actions.deleteSelectedElements,\n        actionManager.actions.wrapSelectionInFrame,\n        actionManager.actions.copyStyles,\n        actionManager.actions.pasteStyles,\n        actionManager.actions.bringToFront,\n        actionManager.actions.bringForward,\n        actionManager.actions.sendBackward,\n        actionManager.actions.sendToBack,\n        actionManager.actions.alignTop,\n        actionManager.actions.alignBottom,\n        actionManager.actions.alignLeft,\n        actionManager.actions.alignRight,\n        actionManager.actions.alignVerticallyCentered,\n        actionManager.actions.alignHorizontallyCentered,\n        actionManager.actions.duplicateSelection,\n        actionManager.actions.flipHorizontal,\n        actionManager.actions.flipVertical,\n        actionManager.actions.zoomToFitSelection,\n        actionManager.actions.zoomToFitSelectionInViewport,\n        actionManager.actions.increaseFontSize,\n        actionManager.actions.decreaseFontSize,\n        actionManager.actions.toggleLinearEditor,\n        actionManager.actions.cropEditor,\n        actionManager.actions.togglePolygon,\n        actionLink,\n        actionCopyElementLink,\n        actionLinkToElement,\n      ].map((action: Action) =>\n        actionToCommand(action, DEFAULT_CATEGORIES.elements, (command, action) => ({\n          ...command,\n          predicate: action.predicate\n            ? action.predicate\n            : (elements, appState, appProps, app) => {\n                const selectedElements = getSelectedElements(elements, appState);\n                return selectedElements.length > 0;\n              },\n        }))\n      );\n      const toolCommands: CommandPaletteItem[] = [\n        actionManager.actions.toggleHandTool,\n        actionManager.actions.setFrameAsActiveTool,\n        actionManager.actions.toggleLassoTool,\n      ].map(action => actionToCommand(action, DEFAULT_CATEGORIES.tools));\n\n      const editorCommands: CommandPaletteItem[] = [\n        actionManager.actions.undo,\n        actionManager.actions.redo,\n        actionManager.actions.zoomIn,\n        actionManager.actions.zoomOut,\n        actionManager.actions.resetZoom,\n        actionManager.actions.zoomToFit,\n        actionManager.actions.zenMode,\n        actionManager.actions.viewMode,\n        actionManager.actions.gridMode,\n        actionManager.actions.objectsSnapMode,\n        actionManager.actions.toggleShortcuts,\n        actionManager.actions.selectAll,\n        actionManager.actions.toggleElementLock,\n        actionManager.actions.unlockAllElements,\n        actionManager.actions.stats,\n      ].map(action => actionToCommand(action, DEFAULT_CATEGORIES.editor));\n\n      const exportCommands: CommandPaletteItem[] = [\n        actionManager.actions.saveToActiveFile,\n        actionManager.actions.saveFileToDisk,\n        actionManager.actions.copyAsPng,\n        actionManager.actions.copyAsSvg,\n      ].map(action => actionToCommand(action, DEFAULT_CATEGORIES.export));\n\n      commandsFromActions = [\n        ...elementsCommands,\n        ...editorCommands,\n        {\n          label: getActionLabel(actionClearCanvas),\n          icon: getActionIcon(actionClearCanvas),\n          shortcut: getShortcutFromShortcutName(actionClearCanvas.name as ShortcutName),\n          category: DEFAULT_CATEGORIES.editor,\n          keywords: [\"delete\", \"destroy\"],\n          viewMode: false,\n          perform: () => {\n            editorJotaiStore.set(activeConfirmDialogAtom, \"clearCanvas\");\n          },\n        },\n        {\n          label: t(\"buttons.exportImage\"),\n          category: DEFAULT_CATEGORIES.export,\n          icon: ExportImageIcon,\n          shortcut: getShortcutFromShortcutName(\"imageExport\"),\n          keywords: [\"export\", \"image\", \"png\", \"jpeg\", \"svg\", \"clipboard\", \"picture\"],\n          perform: () => {\n            setAppState({ openDialog: { name: \"imageExport\" } });\n          },\n        },\n        ...exportCommands,\n      ];\n\n      const additionalCommands: CommandPaletteItem[] = [\n        {\n          label: t(\"toolBar.library\"),\n          category: DEFAULT_CATEGORIES.app,\n          icon: LibraryIcon,\n          viewMode: false,\n          perform: () => {\n            if (uiAppState.openSidebar) {\n              setAppState({\n                openSidebar: null,\n              });\n            } else {\n              setAppState({\n                openSidebar: {\n                  name: DEFAULT_SIDEBAR.name,\n                  tab: DEFAULT_SIDEBAR.defaultTab,\n                },\n              });\n            }\n          },\n        },\n        {\n          label: t(\"search.title\"),\n          category: DEFAULT_CATEGORIES.app,\n          icon: searchIcon,\n          viewMode: true,\n          perform: () => {\n            actionManager.executeAction(actionToggleSearchMenu);\n          },\n        },\n        {\n          label: t(\"labels.shapeSwitch\"),\n          category: DEFAULT_CATEGORIES.elements,\n          icon: boltIcon,\n          perform: () => {\n            actionManager.executeAction(actionToggleShapeSwitch);\n          },\n        },\n        {\n          label: t(\"labels.changeStroke\"),\n          keywords: [\"color\", \"outline\"],\n          category: DEFAULT_CATEGORIES.elements,\n          icon: bucketFillIcon,\n          viewMode: false,\n          predicate: (elements, appState) => {\n            const selectedElements = getSelectedElements(elements, appState);\n            return selectedElements.length > 0 && canChangeStrokeColor(appState, selectedElements);\n          },\n          perform: () => {\n            setAppState(prevState => ({\n              openPopup: \"elementStroke\",\n            }));\n          },\n        },\n        {\n          label: t(\"labels.changeBackground\"),\n          keywords: [\"color\", \"fill\"],\n          icon: bucketFillIcon,\n          category: DEFAULT_CATEGORIES.elements,\n          viewMode: false,\n          predicate: (elements, appState) => {\n            const selectedElements = getSelectedElements(elements, appState);\n            return (\n              selectedElements.length > 0 && canChangeBackgroundColor(appState, selectedElements)\n            );\n          },\n          perform: () => {\n            setAppState(prevState => ({\n              openPopup: \"elementBackground\",\n            }));\n          },\n        },\n        {\n          label: t(\"labels.canvasBackground\"),\n          keywords: [\"color\"],\n          icon: bucketFillIcon,\n          category: DEFAULT_CATEGORIES.editor,\n          viewMode: false,\n          perform: () => {\n            setAppState(prevState => ({\n              openMenu: prevState.openMenu === \"canvas\" ? null : \"canvas\",\n              openPopup: \"canvasBackground\",\n            }));\n          },\n        },\n        ...SHAPES.reduce((acc: CommandPaletteItem[], shape) => {\n          const { value, icon, key, numericKey } = shape;\n\n          if (\n            appProps.UIOptions.tools?.[\n              value as Extract<typeof value, keyof AppProps[\"UIOptions\"][\"tools\"]>\n            ] === false\n          ) {\n            return acc;\n          }\n\n          const letter = key && capitalizeString(typeof key === \"string\" ? key : key[0]);\n          const shortcut = letter || numericKey;\n\n          const command: CommandPaletteItem = {\n            label: t(`toolBar.${value}`),\n            category: DEFAULT_CATEGORIES.tools,\n            shortcut,\n            icon,\n            keywords: [\"toolbar\"],\n            viewMode: false,\n            perform: ({ event }) => {\n              if (value === \"image\") {\n                app.setActiveTool({\n                  type: value,\n                });\n              } else {\n                app.setActiveTool({ type: value });\n              }\n            },\n          };\n\n          acc.push(command);\n\n          return acc;\n        }, []),\n        ...toolCommands,\n        {\n          label: t(\"toolBar.lock\"),\n          category: DEFAULT_CATEGORIES.tools,\n          icon: uiAppState.activeTool.locked ? LockedIcon : UnlockedIcon,\n          shortcut: KEYS.Q.toLocaleUpperCase(),\n          viewMode: false,\n          perform: () => {\n            app.toggleLock();\n          },\n        },\n        {\n          label: `${t(\"labels.textToDiagram\")}...`,\n          category: DEFAULT_CATEGORIES.tools,\n          icon: brainIconThin,\n          viewMode: false,\n          predicate: appProps.aiEnabled,\n          perform: () => {\n            setAppState(state => ({\n              ...state,\n              openDialog: {\n                name: \"ttd\",\n                tab: \"text-to-diagram\",\n              },\n            }));\n          },\n        },\n        {\n          label: `${t(\"toolBar.mermaidToJsonDraw\")}...`,\n          category: DEFAULT_CATEGORIES.tools,\n          icon: mermaidLogoIcon,\n          viewMode: false,\n          predicate: appProps.aiEnabled,\n          perform: () => {\n            setAppState(state => ({\n              ...state,\n              openDialog: {\n                name: \"ttd\",\n                tab: \"mermaid\",\n              },\n            }));\n          },\n        },\n        // {\n        //   label: `${t(\"toolBar.magicframe\")}...`,\n        //   category: DEFAULT_CATEGORIES.tools,\n        //   icon: MagicIconThin,\n        //   viewMode: false,\n        //   predicate: appProps.aiEnabled,\n        //   perform: () => {\n        //     app.onMagicframeToolSelect();\n        //   },\n        // },\n      ];\n\n      const allCommands = [\n        ...commandsFromActions,\n        ...additionalCommands,\n        ...(customCommandPaletteItems || []),\n      ].map(command => {\n        return {\n          ...command,\n          icon: command.icon || boltIcon,\n          order: command.order ?? getCategoryOrder(command.category),\n          haystack: `${deburr(command.label.toLocaleLowerCase())} ${\n            command.keywords?.join(\" \") || \"\"\n          }`,\n        };\n      });\n\n      setAllCommands(allCommands);\n      setLastUsed(\n        [...allCommands, ...libraryCommands].find(command => command.label === lastUsed?.label) ??\n          null\n      );\n    }\n  }, [\n    stableDeps,\n    app,\n    actionManager,\n    setAllCommands,\n    lastUsed?.label,\n    setLastUsed,\n    setAppState,\n    libraryCommands,\n  ]);\n\n  const [commandSearch, setCommandSearch] = useState(\"\");\n  const [currentCommand, setCurrentCommand] = useState<CommandPaletteItem | null>(null);\n  const [commandsByCategory, setCommandsByCategory] = useState<\n    Record<string, CommandPaletteItem[]>\n  >({});\n\n  const closeCommandPalette = (cb?: () => void) => {\n    setAppState(\n      {\n        openDialog: null,\n      },\n      cb\n    );\n    setCommandSearch(\"\");\n  };\n\n  const executeCommand = (\n    command: CommandPaletteItem,\n    event: React.MouseEvent | React.KeyboardEvent | KeyboardEvent\n  ) => {\n    if (uiAppState.openDialog?.name === \"commandPalette\") {\n      event.stopPropagation();\n      event.preventDefault();\n      document.body.classList.add(\"jsondraw-animations-disabled\");\n      closeCommandPalette(() => {\n        command.perform({ actionManager, event });\n        setLastUsed(command);\n\n        requestAnimationFrame(() => {\n          document.body.classList.remove(\"jsondraw-animations-disabled\");\n        });\n      });\n    }\n  };\n\n  const isCommandAvailable = useStableCallback((command: CommandPaletteItem) => {\n    if (command.viewMode === false && uiAppState.viewModeEnabled) {\n      return false;\n    }\n\n    return typeof command.predicate === \"function\"\n      ? command.predicate(app.scene.getNonDeletedElements(), uiAppState as AppState, appProps, app)\n      : command.predicate === undefined || command.predicate;\n  });\n\n  const handleKeyDown = useStableCallback((event: KeyboardEvent) => {\n    const ignoreAlphanumerics =\n      isWritableElement(event.target) ||\n      isCommandPaletteToggleShortcut(event) ||\n      event.key === KEYS.ESCAPE;\n\n    if (\n      ignoreAlphanumerics &&\n      event.key !== KEYS.ARROW_UP &&\n      event.key !== KEYS.ARROW_DOWN &&\n      event.key !== KEYS.ENTER\n    ) {\n      return;\n    }\n\n    const matchingCommands = Object.values(commandsByCategory).flat();\n    const shouldConsiderLastUsed = lastUsed && !commandSearch && isCommandAvailable(lastUsed);\n\n    if (event.key === KEYS.ARROW_UP) {\n      event.preventDefault();\n      const index = matchingCommands.findIndex(item => item.label === currentCommand?.label);\n\n      if (shouldConsiderLastUsed) {\n        if (index === 0) {\n          setCurrentCommand(lastUsed);\n          return;\n        }\n\n        if (currentCommand === lastUsed) {\n          const nextItem = matchingCommands[matchingCommands.length - 1];\n          if (nextItem) {\n            setCurrentCommand(nextItem);\n          }\n          return;\n        }\n      }\n\n      let nextIndex;\n\n      if (index === -1) {\n        nextIndex = matchingCommands.length - 1;\n      } else {\n        nextIndex =\n          index === 0 ? matchingCommands.length - 1 : (index - 1) % matchingCommands.length;\n      }\n\n      const nextItem = matchingCommands[nextIndex];\n      if (nextItem) {\n        setCurrentCommand(nextItem);\n      }\n\n      return;\n    }\n\n    if (event.key === KEYS.ARROW_DOWN) {\n      event.preventDefault();\n      const index = matchingCommands.findIndex(item => item.label === currentCommand?.label);\n\n      if (shouldConsiderLastUsed) {\n        if (!currentCommand || index === matchingCommands.length - 1) {\n          setCurrentCommand(lastUsed);\n          return;\n        }\n\n        if (currentCommand === lastUsed) {\n          const nextItem = matchingCommands[0];\n          if (nextItem) {\n            setCurrentCommand(nextItem);\n          }\n          return;\n        }\n      }\n\n      const nextIndex = (index + 1) % matchingCommands.length;\n      const nextItem = matchingCommands[nextIndex];\n      if (nextItem) {\n        setCurrentCommand(nextItem);\n      }\n\n      return;\n    }\n\n    if (event.key === KEYS.ENTER) {\n      if (currentCommand) {\n        setTimeout(() => {\n          executeCommand(currentCommand, event);\n        });\n      }\n    }\n\n    if (ignoreAlphanumerics) {\n      return;\n    }\n\n    // prevent regular editor shortcuts\n    event.stopPropagation();\n\n    // if alphanumeric keypress and we're not inside the input, focus it\n    if (/^[a-zA-Z0-9]$/.test(event.key)) {\n      inputRef?.current?.focus();\n      return;\n    }\n\n    event.preventDefault();\n  });\n\n  useEffect(() => {\n    window.addEventListener(EVENT.KEYDOWN, handleKeyDown, {\n      capture: true,\n    });\n    return () =>\n      window.removeEventListener(EVENT.KEYDOWN, handleKeyDown, {\n        capture: true,\n      });\n  }, [handleKeyDown]);\n\n  useEffect(() => {\n    if (!allCommands) {\n      return;\n    }\n\n    const getNextCommandsByCategory = (commands: CommandPaletteItem[]) => {\n      const nextCommandsByCategory: Record<string, CommandPaletteItem[]> = {};\n      for (const command of commands) {\n        if (nextCommandsByCategory[command.category]) {\n          nextCommandsByCategory[command.category].push(command);\n        } else {\n          nextCommandsByCategory[command.category] = [command];\n        }\n      }\n\n      return nextCommandsByCategory;\n    };\n\n    let matchingCommands =\n      commandSearch?.length > 1\n        ? [\n            ...allCommands.filter(isCommandAvailable).sort((a, b) => a.order - b.order),\n            ...libraryCommands,\n          ]\n        : allCommands.filter(isCommandAvailable).sort((a, b) => a.order - b.order);\n\n    const showLastUsed = !commandSearch && lastUsed && isCommandAvailable(lastUsed);\n\n    if (!commandSearch) {\n      setCommandsByCategory(\n        getNextCommandsByCategory(\n          showLastUsed\n            ? matchingCommands.filter(command => command.label !== lastUsed?.label)\n            : matchingCommands\n        )\n      );\n      setCurrentCommand(showLastUsed ? lastUsed : matchingCommands[0] || null);\n      return;\n    }\n\n    const _query = deburr(commandSearch.toLocaleLowerCase().replace(/[<>_| -]/g, \"\"));\n    matchingCommands = fuzzy\n      .filter(_query, matchingCommands, {\n        extract: command => command.haystack ?? \"\",\n      })\n      .sort((a, b) => b.score - a.score)\n      .map(item => item.original);\n\n    setCommandsByCategory(getNextCommandsByCategory(matchingCommands));\n    setCurrentCommand(matchingCommands[0] ?? null);\n  }, [commandSearch, allCommands, isCommandAvailable, lastUsed, libraryCommands]);\n\n  return (\n    <Dialog\n      onCloseRequest={() => closeCommandPalette()}\n      closeOnClickOutside\n      title={false}\n      size={720}\n      autofocus\n      className=\"command-palette-dialog\"\n    >\n      <TextField\n        value={commandSearch}\n        placeholder={t(\"commandPalette.search.placeholder\")}\n        onChange={value => {\n          setCommandSearch(value);\n        }}\n        selectOnRender\n        ref={inputRef}\n      />\n\n      {app.editorInterface.formFactor !== \"phone\" && (\n        <div className=\"shortcuts-wrapper\">\n          <CommandShortcutHint shortcut=\"\">\n            {t(\"commandPalette.shortcuts.select\")}\n          </CommandShortcutHint>\n          <CommandShortcutHint shortcut=\"\">\n            {t(\"commandPalette.shortcuts.confirm\")}\n          </CommandShortcutHint>\n          <CommandShortcutHint shortcut={getShortcutKey(\"Esc\")}>\n            {t(\"commandPalette.shortcuts.close\")}\n          </CommandShortcutHint>\n        </div>\n      )}\n\n      <div className=\"commands\">\n        {lastUsed && !commandSearch && (\n          <div className=\"command-category\">\n            <div className=\"command-category-title\">\n              {t(\"commandPalette.recents\")}\n              <div\n                className=\"icon\"\n                style={{\n                  marginLeft: \"6px\",\n                }}\n              >\n                {historyCommandIcon}\n              </div>\n            </div>\n            <CommandItem\n              command={lastUsed}\n              isSelected={lastUsed.label === currentCommand?.label}\n              onClick={event => executeCommand(lastUsed, event)}\n              disabled={!isCommandAvailable(lastUsed)}\n              onMouseMove={() => setCurrentCommand(lastUsed)}\n              showShortcut={app.editorInterface.formFactor !== \"phone\"}\n              appState={uiAppState}\n            />\n          </div>\n        )}\n\n        {Object.keys(commandsByCategory).length > 0 ? (\n          Object.keys(commandsByCategory).map((category, idx) => {\n            return (\n              <div className=\"command-category\" key={category}>\n                <div className=\"command-category-title\">{category}</div>\n                {commandsByCategory[category].map(command => (\n                  <CommandItem\n                    key={command.label}\n                    command={command}\n                    isSelected={command.label === currentCommand?.label}\n                    onClick={event => executeCommand(command, event)}\n                    onMouseMove={() => setCurrentCommand(command)}\n                    showShortcut={app.editorInterface.formFactor !== \"phone\"}\n                    appState={uiAppState}\n                    size={category === \"Library\" ? \"large\" : \"small\"}\n                  />\n                ))}\n              </div>\n            );\n          })\n        ) : allCommands ? (\n          <div className=\"no-match\">\n            <div className=\"icon\">{searchIcon}</div> {t(\"commandPalette.search.noMatch\")}\n          </div>\n        ) : null}\n      </div>\n    </Dialog>\n  );\n}\nconst LibraryItemIcon = ({\n  id,\n  elements,\n}: {\n  id: LibraryItem[\"id\"] | null;\n  elements: LibraryItem[\"elements\"] | undefined;\n}) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const { svgCache } = useLibraryCache();\n\n  useLibraryItemSvg(id, elements, svgCache, ref);\n\n  return <div className=\"library-item-icon\" ref={ref} />;\n};\n\nconst CommandItem = ({\n  command,\n  isSelected,\n  disabled,\n  onMouseMove,\n  onClick,\n  showShortcut,\n  appState,\n  size = \"small\",\n}: {\n  command: CommandPaletteItem;\n  isSelected: boolean;\n  disabled?: boolean;\n  onMouseMove: () => void;\n  onClick: (event: React.MouseEvent) => void;\n  showShortcut: boolean;\n  appState: UIAppState;\n  size?: \"small\" | \"large\";\n}) => {\n  const noop = () => {};\n\n  return (\n    <div\n      className={clsx(\"command-item\", {\n        \"item-selected\": isSelected,\n        \"item-disabled\": disabled,\n        \"command-item-large\": size === \"large\",\n      })}\n      ref={ref => {\n        if (isSelected && !disabled) {\n          ref?.scrollIntoView?.({\n            block: \"nearest\",\n          });\n        }\n      }}\n      onClick={disabled ? noop : onClick}\n      onMouseMove={disabled ? noop : onMouseMove}\n      title={disabled ? t(\"commandPalette.itemNotAvailable\") : \"\"}\n    >\n      <div className=\"name\">\n        {command.icon && (\n          <InlineIcon\n            className=\"icon\"\n            size=\"var(--icon-size, 1rem)\"\n            icon={typeof command.icon === \"function\" ? command.icon(appState, []) : command.icon}\n          />\n        )}\n        <Ellipsify>{command.label}</Ellipsify>\n      </div>\n      {showShortcut && command.shortcut && <CommandShortcutHint shortcut={command.shortcut} />}\n    </div>\n  );\n};\n","import { arrayToMap, invariant } from \"@jsondraw/common\";\nimport { isElbowArrow, isLinearElement, isLineElement } from \"@jsondraw/element\";\nimport { toggleLinePolygonState, CaptureUpdateAction } from \"@jsondraw/element\";\nimport { newElementWith } from \"@jsondraw/element/mutateElement\";\nimport type { JsonDrawLinearElement, JsonDrawLineElement } from \"@jsondraw/element/types\";\nimport { DEFAULT_CATEGORIES } from \"../components/CommandPalette/CommandPalette\";\nimport { lineEditorIcon, polygonIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { ButtonIcon } from \"../components/ui/ButtonIcon\";\nimport { t } from \"../i18n\";\nimport { register } from \"./register\";\n\nexport const actionToggleLinearEditor = register({\n  name: \"toggleLinearEditor\",\n  category: DEFAULT_CATEGORIES.elements,\n  label: (elements, appState, app) => {\n    const selectedElement = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n    })[0] as JsonDrawLinearElement | undefined;\n\n    return selectedElement?.type === \"arrow\"\n      ? \"labels.lineEditor.editArrow\"\n      : \"labels.lineEditor.edit\";\n  },\n  keywords: [\"line\"],\n  trackEvent: {\n    category: \"element\",\n  },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    if (\n      !appState.selectedLinearElement?.isEditing &&\n      selectedElements.length === 1 &&\n      isLinearElement(selectedElements[0]) &&\n      !isElbowArrow(selectedElements[0])\n    ) {\n      return true;\n    }\n    return false;\n  },\n  perform(elements, appState, _, app) {\n    const selectedElement = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    })[0] as JsonDrawLinearElement;\n\n    invariant(selectedElement, \"No selected element found\");\n    invariant(appState.selectedLinearElement, \"No selected linear element found\");\n    invariant(\n      selectedElement.id === appState.selectedLinearElement.elementId,\n      \"Selected element ID and linear editor elementId does not match\"\n    );\n\n    const selectedLinearElement = {\n      ...appState.selectedLinearElement,\n      isEditing: !appState.selectedLinearElement.isEditing,\n    };\n\n    return {\n      appState: {\n        ...appState,\n        selectedLinearElement,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ appState, updateData, app }) => {\n    const selectedElement = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n    })[0] as JsonDrawLinearElement;\n\n    if (!selectedElement) {\n      return null;\n    }\n\n    const label = t(\n      selectedElement.type === \"arrow\" ? \"labels.lineEditor.editArrow\" : \"labels.lineEditor.edit\"\n    );\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={lineEditorIcon}\n        title={label}\n        aria-label={label}\n        onClick={() => updateData(null)}\n      />\n    );\n  },\n});\n\nexport const actionTogglePolygon = register({\n  name: \"togglePolygon\",\n  category: DEFAULT_CATEGORIES.elements,\n  icon: polygonIcon,\n  keywords: [\"loop\"],\n  label: (elements, appState, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n    });\n\n    const allPolygons = !selectedElements.some(\n      element => !isLineElement(element) || !element.polygon\n    );\n\n    return allPolygons ? \"labels.polygon.breakPolygon\" : \"labels.polygon.convertToPolygon\";\n  },\n  trackEvent: {\n    category: \"element\",\n  },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n    });\n\n    return (\n      selectedElements.length > 0 &&\n      selectedElements.every(element => isLineElement(element) && element.points.length >= 4)\n    );\n  },\n  perform(elements, appState, _, app) {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    if (selectedElements.some(element => !isLineElement(element))) {\n      return false;\n    }\n\n    const targetElements = selectedElements as JsonDrawLineElement[];\n\n    // if one element not a polygon, convert all to polygon\n    const nextPolygonState = targetElements.some(element => !element.polygon);\n\n    const targetElementsMap = arrayToMap(targetElements);\n\n    return {\n      elements: elements.map(element => {\n        if (!targetElementsMap.has(element.id) || !isLineElement(element)) {\n          return element;\n        }\n\n        return newElementWith(element, {\n          backgroundColor: nextPolygonState ? element.backgroundColor : \"transparent\",\n          ...toggleLinePolygonState(element, nextPolygonState),\n        });\n      }),\n      appState,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  PanelComponent: ({ appState, updateData, app }) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n    });\n\n    if (\n      selectedElements.length === 0 ||\n      selectedElements.some(\n        element =>\n          !isLineElement(element) ||\n          // only show polygon button if every selected element is already\n          // a polygon, effectively showing this button only to allow for\n          // disabling the polygon state\n          !element.polygon ||\n          element.points.length < 3\n      )\n    ) {\n      return null;\n    }\n\n    const allPolygon = selectedElements.every(element => isLineElement(element) && element.polygon);\n\n    const label = t(allPolygon ? \"labels.polygon.breakPolygon\" : \"labels.polygon.convertToPolygon\");\n\n    return (\n      <ButtonIcon\n        icon={polygonIcon}\n        title={label}\n        aria-label={label}\n        active={allPolygon}\n        onClick={() => updateData(null)}\n        style={{ marginLeft: \"auto\" }}\n      />\n    );\n  },\n});\n","import {\n  KEYS,\n  CANVAS_SEARCH_TAB,\n  CLASSES,\n  DEFAULT_SIDEBAR,\n} from \"@jsondraw/common\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { searchIcon } from \"../components/icons\";\n\nimport { register } from \"./register\";\n\nimport type { AppState } from \"../types\";\n\nexport const actionToggleSearchMenu = register({\n  name: \"searchMenu\",\n  icon: searchIcon,\n  keywords: [\"search\", \"find\"],\n  label: \"search.title\",\n  viewMode: true,\n  trackEvent: {\n    category: \"search_menu\",\n    action: \"toggle\",\n    predicate: (appState) => appState.gridModeEnabled,\n  },\n  perform(elements, appState, _, app) {\n    if (appState.openDialog) {\n      return false;\n    }\n\n    if (\n      appState.openSidebar?.name === DEFAULT_SIDEBAR.name &&\n      appState.openSidebar.tab === CANVAS_SEARCH_TAB\n    ) {\n      const searchInput =\n        app.jsondrawContainerValue.container?.querySelector<HTMLInputElement>(\n          `.${CLASSES.SEARCH_MENU_INPUT_WRAPPER} input`,\n        );\n\n      searchInput?.focus();\n      searchInput?.select();\n      return false;\n    }\n\n    return {\n      appState: {\n        ...appState,\n        openSidebar: { name: DEFAULT_SIDEBAR.name, tab: CANVAS_SEARCH_TAB },\n        openDialog: null,\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState: AppState) => appState.gridModeEnabled,\n  predicate: (element, appState, props) => {\n    return props.gridModeEnabled === undefined;\n  },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.F,\n});\n","import { isImageElement } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport type { JsonDrawImageElement } from \"@jsondraw/element/types\";\nimport { cropIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { t } from \"../i18n\";\nimport { register } from \"./register\";\n\nexport const actionToggleCropEditor = register({\n  name: \"cropEditor\",\n  label: \"helpDialog.cropStart\",\n  icon: cropIcon,\n  viewMode: true,\n  trackEvent: { category: \"menu\" },\n  keywords: [\"image\", \"crop\"],\n  perform(elements, appState, _, app) {\n    const selectedElement = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    })[0] as JsonDrawImageElement;\n\n    return {\n      appState: {\n        ...appState,\n        isCropping: false,\n        croppingElementId: selectedElement.id,\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    if (\n      !appState.croppingElementId &&\n      selectedElements.length === 1 &&\n      isImageElement(selectedElements[0])\n    ) {\n      return true;\n    }\n    return false;\n  },\n  PanelComponent: ({ appState, updateData, app }) => {\n    const label = t(\"helpDialog.cropStart\");\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={cropIcon}\n        title={label}\n        aria-label={label}\n        onClick={() => updateData(null)}\n      />\n    );\n  },\n});\n","export { actionDeleteSelected } from \"./actionDeleteSelected\";\nexport {\n  actionBringForward,\n  actionBringToFront,\n  actionSendBackward,\n  actionSendToBack,\n} from \"./actionZindex\";\nexport { actionSelectAll } from \"./actionSelectAll\";\nexport { actionDuplicateSelection } from \"./actionDuplicateSelection\";\nexport {\n  actionChangeStrokeColor,\n  actionChangeBackgroundColor,\n  actionChangeStrokeWidth,\n  actionChangeFillStyle,\n  actionChangeSloppiness,\n  actionChangeOpacity,\n  actionChangeFontSize,\n  actionChangeFontFamily,\n  actionChangeTextAlign,\n  actionChangeVerticalAlign,\n  actionChangeArrowProperties,\n} from \"./actionProperties\";\n\nexport {\n  actionChangeViewBackgroundColor,\n  actionClearCanvas,\n  actionZoomIn,\n  actionZoomOut,\n  actionResetZoom,\n  actionZoomToFit,\n  actionToggleTheme,\n} from \"./actionCanvas\";\n\nexport { actionSetEmbeddableAsActiveTool } from \"./actionEmbeddable\";\n\nexport { actionFinalize } from \"./actionFinalize\";\n\nexport {\n  actionChangeProjectName,\n  actionChangeExportBackground,\n  actionSaveToActiveFile,\n  actionSaveFileToDisk,\n  actionLoadScene,\n} from \"./actionExport\";\n\nexport { actionCopyStyles, actionPasteStyles } from \"./actionStyles\";\nexport { actionShortcuts } from \"./actionMenu\";\n\nexport { actionGroup, actionUngroup } from \"./actionGroup\";\n\nexport { actionGoToCollaborator } from \"./actionNavigate\";\n\nexport { actionAddToLibrary } from \"./actionAddToLibrary\";\n\nexport {\n  actionAlignTop,\n  actionAlignBottom,\n  actionAlignLeft,\n  actionAlignRight,\n  actionAlignVerticallyCentered,\n  actionAlignHorizontallyCentered,\n} from \"./actionAlign\";\n\nexport {\n  distributeHorizontally,\n  distributeVertically,\n} from \"./actionDistribute\";\n\nexport { actionFlipHorizontal, actionFlipVertical } from \"./actionFlip\";\n\nexport {\n  actionCopy,\n  actionCut,\n  actionCopyAsPng,\n  actionCopyAsSvg,\n  copyText,\n} from \"./actionClipboard\";\n\nexport { actionToggleGridMode } from \"./actionToggleGridMode\";\nexport { actionToggleZenMode } from \"./actionToggleZenMode\";\nexport { actionToggleObjectsSnapMode } from \"./actionToggleObjectsSnapMode\";\n\nexport { actionToggleStats } from \"./actionToggleStats\";\nexport { actionUnbindText, actionBindText } from \"./actionBoundText\";\nexport { actionLink } from \"./actionLink\";\nexport { actionToggleElementLock } from \"./actionElementLock\";\nexport { actionToggleLinearEditor } from \"./actionLinearEditor\";\n\nexport { actionToggleSearchMenu } from \"./actionToggleSearchMenu\";\n\nexport { actionToggleCropEditor } from \"./actionCropEditor\";\n","import { getNonDeletedElements } from \"@jsondraw/element\";\nimport { mutateElement } from \"@jsondraw/element\";\nimport { newFrameElement } from \"@jsondraw/element\";\nimport { isFrameLikeElement } from \"@jsondraw/element\";\nimport {\n  addElementsToFrame,\n  removeAllElementsFromFrame,\n} from \"@jsondraw/element\";\nimport { getFrameChildren } from \"@jsondraw/element\";\n\nimport { KEYS, updateActiveTool } from \"@jsondraw/common\";\n\nimport { getElementsInGroup } from \"@jsondraw/element\";\n\nimport { getCommonBounds } from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { setCursorForShape } from \"../cursor\";\nimport { frameToolIcon } from \"../components/icons\";\nimport { getSelectedElements } from \"../scene\";\n\nimport { register } from \"./register\";\n\nimport type { AppClassProperties, AppState, UIAppState } from \"../types\";\n\nconst isSingleFrameSelected = (\n  appState: UIAppState,\n  app: AppClassProperties,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  return (\n    selectedElements.length === 1 && isFrameLikeElement(selectedElements[0])\n  );\n};\n\nexport const actionSelectAllElementsInFrame = register({\n  name: \"selectAllElementsInFrame\",\n  label: \"labels.selectAllElementsInFrame\",\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElement =\n      app.scene.getSelectedElements(appState).at(0) || null;\n\n    if (isFrameLikeElement(selectedElement)) {\n      const elementsInFrame = getFrameChildren(\n        getNonDeletedElements(elements),\n        selectedElement.id,\n      ).filter((element) => !(element.type === \"text\" && element.containerId));\n\n      return {\n        elements,\n        appState: {\n          ...appState,\n          selectedElementIds: elementsInFrame.reduce((acc, element) => {\n            acc[element.id] = true;\n            return acc;\n          }, {} as Record<JsonDrawElement[\"id\"], true>),\n        },\n        captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n      };\n    }\n\n    return {\n      elements,\n      appState,\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  predicate: (elements, appState, _, app) =>\n    isSingleFrameSelected(appState, app),\n});\n\nexport const actionRemoveAllElementsFromFrame = register({\n  name: \"removeAllElementsFromFrame\",\n  label: \"labels.removeAllElementsFromFrame\",\n  trackEvent: { category: \"history\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElement =\n      app.scene.getSelectedElements(appState).at(0) || null;\n\n    if (isFrameLikeElement(selectedElement)) {\n      return {\n        elements: removeAllElementsFromFrame(elements, selectedElement),\n        appState: {\n          ...appState,\n          selectedElementIds: {\n            [selectedElement.id]: true,\n          },\n        },\n        captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n      };\n    }\n\n    return {\n      elements,\n      appState,\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  predicate: (elements, appState, _, app) =>\n    isSingleFrameSelected(appState, app),\n});\n\nexport const actionupdateFrameRendering = register({\n  name: \"updateFrameRendering\",\n  label: \"labels.updateFrameRendering\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState) => {\n    return {\n      elements,\n      appState: {\n        ...appState,\n        frameRendering: {\n          ...appState.frameRendering,\n          enabled: !appState.frameRendering.enabled,\n        },\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  checked: (appState: AppState) => appState.frameRendering.enabled,\n});\n\nexport const actionSetFrameAsActiveTool = register({\n  name: \"setFrameAsActiveTool\",\n  label: \"toolBar.frame\",\n  trackEvent: { category: \"toolbar\" },\n  icon: frameToolIcon,\n  viewMode: false,\n  perform: (elements, appState, _, app) => {\n    const nextActiveTool = updateActiveTool(appState, {\n      type: \"frame\",\n    });\n\n    setCursorForShape(app.interactiveCanvas, {\n      ...appState,\n      activeTool: nextActiveTool,\n    });\n\n    return {\n      elements,\n      appState: {\n        ...appState,\n        activeTool: updateActiveTool(appState, {\n          type: \"frame\",\n        }),\n      },\n      captureUpdate: CaptureUpdateAction.EVENTUALLY,\n    };\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] &&\n    !event.shiftKey &&\n    !event.altKey &&\n    event.key.toLocaleLowerCase() === KEYS.F,\n});\n\nexport const actionWrapSelectionInFrame = register({\n  name: \"wrapSelectionInFrame\",\n  label: \"labels.wrapSelectionInFrame\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    return (\n      selectedElements.length > 0 &&\n      !selectedElements.some((element) => isFrameLikeElement(element))\n    );\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n\n    const [x1, y1, x2, y2] = getCommonBounds(selectedElements, elementsMap);\n    const PADDING = 16;\n    const frame = newFrameElement({\n      x: x1 - PADDING,\n      y: y1 - PADDING,\n      width: x2 - x1 + PADDING * 2,\n      height: y2 - y1 + PADDING * 2,\n    });\n\n    // for a selected partial group, we want to remove it from the remainder of the group\n    if (appState.editingGroupId) {\n      const elementsInGroup = getElementsInGroup(\n        selectedElements,\n        appState.editingGroupId,\n      );\n\n      for (const elementInGroup of elementsInGroup) {\n        const index = elementInGroup.groupIds.indexOf(appState.editingGroupId);\n\n        mutateElement(elementInGroup, elementsMap, {\n          groupIds: elementInGroup.groupIds.slice(0, index),\n        });\n      }\n    }\n\n    const nextElements = addElementsToFrame(\n      [...app.scene.getElementsIncludingDeleted(), frame],\n      selectedElements,\n      frame,\n      appState,\n    );\n\n    return {\n      elements: nextElements,\n      appState: {\n        selectedElementIds: { [frame.id]: true },\n      },\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n});\n","import { Emitter } from \"@jsondraw/common\";\n\nimport {\n  CaptureUpdateAction,\n  StoreChange,\n  StoreDelta,\n} from \"@jsondraw/element\";\n\nimport type { StoreSnapshot, Store } from \"@jsondraw/element\";\n\nimport type { SceneElementsMap } from \"@jsondraw/element/types\";\n\nimport type { AppState } from \"./types\";\n\nexport class HistoryDelta extends StoreDelta {\n  /**\n   * Apply the delta to the passed elements and appState, does not modify the snapshot.\n   */\n  public applyTo(\n    elements: SceneElementsMap,\n    appState: AppState,\n    snapshot: StoreSnapshot,\n  ): [SceneElementsMap, AppState, boolean] {\n    const [nextElements, elementsContainVisibleChange] = this.elements.applyTo(\n      elements,\n      // used to fallback into local snapshot in case we couldn't apply the delta\n      // due to a missing (force deleted) elements in the scene\n      snapshot.elements,\n      // we don't want to apply the `version` and `versionNonce` properties for history\n      // as we always need to end up with a new version due to collaboration,\n      // approaching each undo / redo as a new user action\n      {\n        excludedProperties: new Set([\"version\", \"versionNonce\"]),\n      },\n    );\n\n    const [nextAppState, appStateContainsVisibleChange] = this.appState.applyTo(\n      appState,\n      nextElements,\n    );\n\n    const appliedVisibleChanges =\n      elementsContainVisibleChange || appStateContainsVisibleChange;\n\n    return [nextElements, nextAppState, appliedVisibleChanges];\n  }\n\n  /**\n   * Overriding once to avoid type casting everywhere.\n   */\n  public static override calculate(\n    prevSnapshot: StoreSnapshot,\n    nextSnapshot: StoreSnapshot,\n  ) {\n    return super.calculate(prevSnapshot, nextSnapshot) as HistoryDelta;\n  }\n\n  /**\n   * Overriding once to avoid type casting everywhere.\n   */\n  public static override inverse(delta: StoreDelta): HistoryDelta {\n    return super.inverse(delta) as HistoryDelta;\n  }\n\n  /**\n   * Overriding once to avoid type casting everywhere.\n   */\n  public static override applyLatestChanges(\n    delta: StoreDelta,\n    prevElements: SceneElementsMap,\n    nextElements: SceneElementsMap,\n    modifierOptions?: \"deleted\" | \"inserted\",\n  ) {\n    return super.applyLatestChanges(\n      delta,\n      prevElements,\n      nextElements,\n      modifierOptions,\n    ) as HistoryDelta;\n  }\n}\n\nexport class HistoryChangedEvent {\n  constructor(\n    public readonly isUndoStackEmpty: boolean = true,\n    public readonly isRedoStackEmpty: boolean = true,\n  ) {}\n}\n\nexport class History {\n  public readonly onHistoryChangedEmitter = new Emitter<\n    [HistoryChangedEvent]\n  >();\n\n  public readonly undoStack: HistoryDelta[] = [];\n  public readonly redoStack: HistoryDelta[] = [];\n\n  public get isUndoStackEmpty() {\n    return this.undoStack.length === 0;\n  }\n\n  public get isRedoStackEmpty() {\n    return this.redoStack.length === 0;\n  }\n\n  constructor(private readonly store: Store) {}\n\n  public clear() {\n    this.undoStack.length = 0;\n    this.redoStack.length = 0;\n  }\n\n  /**\n   * Record a non-empty local durable increment, which will go into the undo stack..\n   * Do not re-record history entries, which were already pushed to undo / redo stack, as part of history action.\n   */\n  public record(delta: StoreDelta) {\n    if (delta.isEmpty() || delta instanceof HistoryDelta) {\n      return;\n    }\n\n    // construct history entry, so once it's emitted, it's not recorded again\n    const historyDelta = HistoryDelta.inverse(delta);\n\n    this.undoStack.push(historyDelta);\n\n    if (!historyDelta.elements.isEmpty()) {\n      // don't reset redo stack on local appState changes,\n      // as a simple click (unselect) could lead to losing all the redo entries\n      // only reset on non empty elements changes!\n      this.redoStack.length = 0;\n    }\n\n    this.onHistoryChangedEmitter.trigger(\n      new HistoryChangedEvent(this.isUndoStackEmpty, this.isRedoStackEmpty),\n    );\n  }\n\n  public undo(elements: SceneElementsMap, appState: AppState) {\n    return this.perform(\n      elements,\n      appState,\n      () => History.pop(this.undoStack),\n      (entry: HistoryDelta) => History.push(this.redoStack, entry),\n    );\n  }\n\n  public redo(elements: SceneElementsMap, appState: AppState) {\n    return this.perform(\n      elements,\n      appState,\n      () => History.pop(this.redoStack),\n      (entry: HistoryDelta) => History.push(this.undoStack, entry),\n    );\n  }\n\n  private perform(\n    elements: SceneElementsMap,\n    appState: AppState,\n    pop: () => HistoryDelta | null,\n    push: (entry: HistoryDelta) => void,\n  ): [SceneElementsMap, AppState] | void {\n    try {\n      let historyDelta = pop();\n\n      if (historyDelta === null) {\n        return;\n      }\n\n      const action = CaptureUpdateAction.IMMEDIATELY;\n\n      let prevSnapshot = this.store.snapshot;\n\n      let nextElements = elements;\n      let nextAppState = appState;\n      let containsVisibleChange = false;\n\n      // iterate through the history entries in case they result in no visible changes\n      while (historyDelta) {\n        try {\n          [nextElements, nextAppState, containsVisibleChange] =\n            historyDelta.applyTo(nextElements, nextAppState, prevSnapshot);\n\n          const prevElements = prevSnapshot.elements;\n          const nextSnapshot = prevSnapshot.maybeClone(\n            action,\n            nextElements,\n            nextAppState,\n          );\n\n          const change = StoreChange.create(prevSnapshot, nextSnapshot);\n          const delta = HistoryDelta.applyLatestChanges(\n            historyDelta,\n            prevElements,\n            nextElements,\n          );\n\n          if (!delta.isEmpty()) {\n            // schedule immediate capture, so that it's emitted for the sync purposes\n            this.store.scheduleMicroAction({\n              action,\n              change,\n              delta,\n            });\n\n            historyDelta = delta;\n          }\n\n          prevSnapshot = nextSnapshot;\n        } finally {\n          push(historyDelta);\n        }\n\n        if (containsVisibleChange) {\n          break;\n        }\n\n        historyDelta = pop();\n      }\n\n      return [nextElements, nextAppState];\n    } finally {\n      // trigger the history change event before returning completely\n      // also trigger it just once, no need doing so on each entry\n      this.onHistoryChangedEmitter.trigger(\n        new HistoryChangedEvent(this.isUndoStackEmpty, this.isRedoStackEmpty),\n      );\n    }\n  }\n\n  private static pop(stack: HistoryDelta[]): HistoryDelta | null {\n    if (!stack.length) {\n      return null;\n    }\n\n    const entry = stack.pop();\n\n    if (entry !== undefined) {\n      return entry;\n    }\n\n    return null;\n  }\n\n  private static push(stack: HistoryDelta[], entry: HistoryDelta) {\n    const inversedEntry = HistoryDelta.inverse(entry);\n    return stack.push(inversedEntry);\n  }\n}\n","import { useEffect, useState } from \"react\";\n\nimport type { Emitter } from \"@jsondraw/common\";\n\nexport const useEmitter = <TEvent extends unknown>(\n  emitter: Emitter<[TEvent]>,\n  initialState: TEvent,\n) => {\n  const [event, setEvent] = useState<TEvent>(initialState);\n\n  useEffect(() => {\n    const unsubscribe = emitter.on((event) => {\n      setEvent(event);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [emitter]);\n\n  return event;\n};\n","import { isWindows, KEYS, matchKey, arrayToMap, MOBILE_ACTION_BUTTON_BG } from \"@jsondraw/common\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport { orderByFractionalIndex } from \"@jsondraw/element\";\nimport type { SceneElementsMap } from \"@jsondraw/element/types\";\nimport { useStylesPanelMode } from \"..\";\nimport { UndoIcon, RedoIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/toolbar/ToolButton\";\nimport { HistoryChangedEvent } from \"../history\";\nimport type { History } from \"../history\";\nimport { useEmitter } from \"../hooks/useEmitter\";\nimport { t } from \"../i18n\";\nimport type { AppClassProperties, AppState } from \"../types\";\nimport type { Action, ActionResult } from \"./types\";\n\nconst executeHistoryAction = (\n  app: AppClassProperties,\n  appState: Readonly<AppState>,\n  updater: () => [SceneElementsMap, AppState] | void\n): ActionResult => {\n  if (\n    !appState.multiElement &&\n    !appState.resizingElement &&\n    !appState.editingTextElement &&\n    !appState.newElement &&\n    !appState.selectedElementsAreBeingDragged &&\n    !appState.selectionElement &&\n    !app.flowChartCreator.isCreatingChart\n  ) {\n    const result = updater();\n\n    if (!result) {\n      return { captureUpdate: CaptureUpdateAction.EVENTUALLY };\n    }\n\n    const [nextElementsMap, nextAppState] = result;\n\n    // order by fractional indices in case the map was accidently modified in the meantime\n    const nextElements = orderByFractionalIndex(Array.from(nextElementsMap.values()));\n\n    return {\n      appState: nextAppState,\n      elements: nextElements,\n      captureUpdate: CaptureUpdateAction.NEVER,\n    };\n  }\n\n  return { captureUpdate: CaptureUpdateAction.EVENTUALLY };\n};\n\ntype ActionCreator = (history: History) => Action;\n\nexport const createUndoAction: ActionCreator = history => ({\n  name: \"undo\",\n  label: \"buttons.undo\",\n  icon: UndoIcon,\n  trackEvent: { category: \"history\" },\n  viewMode: false,\n  perform: (elements, appState, value, app) =>\n    executeHistoryAction(app, appState, () =>\n      history.undo(arrayToMap(elements) as SceneElementsMap, appState)\n    ),\n  keyTest: event => event[KEYS.CTRL_OR_CMD] && matchKey(event, KEYS.Z) && !event.shiftKey,\n  PanelComponent: ({ appState, updateData, data, app }) => {\n    const { isUndoStackEmpty } = useEmitter<HistoryChangedEvent>(\n      history.onHistoryChangedEmitter,\n      new HistoryChangedEvent(history.isUndoStackEmpty, history.isRedoStackEmpty)\n    );\n    const isMobile = useStylesPanelMode() === \"mobile\";\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={UndoIcon}\n        aria-label={t(\"buttons.undo\")}\n        onClick={updateData}\n        size={data?.size || \"medium\"}\n        disabled={isUndoStackEmpty}\n        data-testid=\"button-undo\"\n        style={{\n          ...(isMobile ? MOBILE_ACTION_BUTTON_BG : {}),\n        }}\n      />\n    );\n  },\n});\n\nexport const createRedoAction: ActionCreator = history => ({\n  name: \"redo\",\n  label: \"buttons.redo\",\n  icon: RedoIcon,\n  trackEvent: { category: \"history\" },\n  viewMode: false,\n  perform: (elements, appState, __, app) =>\n    executeHistoryAction(app, appState, () =>\n      history.redo(arrayToMap(elements) as SceneElementsMap, appState)\n    ),\n  keyTest: event =>\n    (event[KEYS.CTRL_OR_CMD] && event.shiftKey && matchKey(event, KEYS.Z)) ||\n    (isWindows && event.ctrlKey && !event.shiftKey && matchKey(event, KEYS.Y)),\n  PanelComponent: ({ appState, updateData, data, app }) => {\n    const { isRedoStackEmpty } = useEmitter(\n      history.onHistoryChangedEmitter,\n      new HistoryChangedEvent(history.isUndoStackEmpty, history.isRedoStackEmpty)\n    );\n    const isMobile = useStylesPanelMode() === \"mobile\";\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={RedoIcon}\n        aria-label={t(\"buttons.redo\")}\n        onClick={updateData}\n        size={data?.size || \"medium\"}\n        disabled={isRedoStackEmpty}\n        data-testid=\"button-redo\"\n        style={{\n          ...(isMobile ? MOBILE_ACTION_BUTTON_BG : {}),\n        }}\n      />\n    );\n  },\n});\n","import { getFontString } from \"@jsondraw/common\";\n\nimport { newElementWith } from \"@jsondraw/element\";\nimport { measureText } from \"@jsondraw/element\";\n\nimport { isTextElement } from \"@jsondraw/element\";\n\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nimport { getSelectedElements } from \"../scene\";\n\nimport { register } from \"./register\";\n\nimport type { AppClassProperties } from \"../types\";\n\nexport const actionTextAutoResize = register({\n  name: \"autoResize\",\n  label: \"labels.autoResize\",\n  icon: null,\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _: unknown, app: AppClassProperties) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    return (\n      selectedElements.length === 1 &&\n      isTextElement(selectedElements[0]) &&\n      !selectedElements[0].autoResize\n    );\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    return {\n      appState,\n      elements: elements.map((element) => {\n        if (element.id === selectedElements[0].id && isTextElement(element)) {\n          const metrics = measureText(\n            element.originalText,\n            getFontString(element),\n            element.lineHeight,\n          );\n\n          return newElementWith(element, {\n            autoResize: true,\n            width: metrics.width,\n            height: metrics.height,\n            text: element.originalText,\n          });\n        }\n        return element;\n      }),\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    };\n  },\n});\n","import React from \"react\";\n\nimport { isPromiseLike } from \"@jsondraw/common\";\n\nimport type {\n  JsonDrawElement,\n  OrderedJsonDrawElement,\n} from \"@jsondraw/element/types\";\n\nimport { trackEvent } from \"../analytics\";\n\nimport type { AppClassProperties, AppState } from \"../types\";\nimport type {\n  Action,\n  UpdaterFn,\n  ActionName,\n  ActionResult,\n  PanelComponentProps,\n  ActionSource,\n} from \"./types\";\n\nconst trackAction = (\n  action: Action,\n  source: ActionSource,\n  appState: Readonly<AppState>,\n  elements: readonly JsonDrawElement[],\n  app: AppClassProperties,\n  value: any,\n) => {\n  if (action.trackEvent) {\n    try {\n      if (typeof action.trackEvent === \"object\") {\n        const shouldTrack = action.trackEvent.predicate\n          ? action.trackEvent.predicate(appState, elements, value)\n          : true;\n        if (shouldTrack) {\n          trackEvent(\n            action.trackEvent.category,\n            action.trackEvent.action || action.name,\n            `${source} (${\n              app.editorInterface.formFactor === \"phone\" ? \"mobile\" : \"desktop\"\n            })`,\n          );\n        }\n      }\n    } catch (error) {\n      console.error(\"error while logging action:\", error);\n    }\n  }\n};\n\nexport class ActionManager {\n  actions = {} as Record<ActionName, Action>;\n\n  updater: (actionResult: ActionResult | Promise<ActionResult>) => void;\n\n  getAppState: () => Readonly<AppState>;\n  getElementsIncludingDeleted: () => readonly OrderedJsonDrawElement[];\n  app: AppClassProperties;\n\n  constructor(\n    updater: UpdaterFn,\n    getAppState: () => AppState,\n    getElementsIncludingDeleted: () => readonly OrderedJsonDrawElement[],\n    app: AppClassProperties,\n  ) {\n    this.updater = (actionResult) => {\n      if (isPromiseLike(actionResult)) {\n        actionResult.then((actionResult) => {\n          return updater(actionResult);\n        });\n      } else {\n        return updater(actionResult);\n      }\n    };\n    this.getAppState = getAppState;\n    this.getElementsIncludingDeleted = getElementsIncludingDeleted;\n    this.app = app;\n  }\n\n  registerAction(action: Action) {\n    this.actions[action.name] = action;\n  }\n\n  registerAll(actions: readonly Action[]) {\n    actions.forEach((action) => this.registerAction(action));\n  }\n\n  handleKeyDown(event: React.KeyboardEvent | KeyboardEvent) {\n    const canvasActions = this.app.props.UIOptions.canvasActions;\n    const data = Object.values(this.actions)\n      .sort((a, b) => (b.keyPriority || 0) - (a.keyPriority || 0))\n      .filter(\n        (action) =>\n          (action.name in canvasActions\n            ? canvasActions[action.name as keyof typeof canvasActions]\n            : true) &&\n          action.keyTest &&\n          action.keyTest(\n            event,\n            this.getAppState(),\n            this.getElementsIncludingDeleted(),\n            this.app,\n          ),\n      );\n\n    if (data.length !== 1) {\n      if (data.length > 1) {\n        console.warn(\"Canceling as multiple actions match this shortcut\", data);\n      }\n      return false;\n    }\n\n    const action = data[0];\n\n    if (this.getAppState().viewModeEnabled && action.viewMode !== true) {\n      return false;\n    }\n\n    const elements = this.getElementsIncludingDeleted();\n    const appState = this.getAppState();\n    const value = null;\n\n    trackAction(action, \"keyboard\", appState, elements, this.app, null);\n\n    event.preventDefault();\n    event.stopPropagation();\n    this.updater(data[0].perform(elements, appState, value, this.app));\n    return true;\n  }\n\n  executeAction<T extends Action>(\n    action: T,\n    source: ActionSource = \"api\",\n    value: Parameters<T[\"perform\"]>[2] = null,\n  ) {\n    const elements = this.getElementsIncludingDeleted();\n    const appState = this.getAppState();\n\n    trackAction(action, source, appState, elements, this.app, value);\n\n    this.updater(action.perform(elements, appState, value, this.app));\n  }\n\n  /**\n   * @param data additional data sent to the PanelComponent\n   */\n  renderAction = (name: ActionName, data?: PanelComponentProps[\"data\"]) => {\n    const canvasActions = this.app.props.UIOptions.canvasActions;\n\n    if (\n      this.actions[name] &&\n      \"PanelComponent\" in this.actions[name] &&\n      (name in canvasActions\n        ? canvasActions[name as keyof typeof canvasActions]\n        : true)\n    ) {\n      const action = this.actions[name];\n      const PanelComponent = action.PanelComponent!;\n      PanelComponent.displayName = \"PanelComponent\";\n      const elements = this.getElementsIncludingDeleted();\n      const appState = this.getAppState();\n      const updateData = (formState?: any) => {\n        trackAction(action, \"ui\", appState, elements, this.app, formState);\n\n        this.updater(\n          action.perform(\n            this.getElementsIncludingDeleted(),\n            this.getAppState(),\n            formState,\n            this.app,\n          ),\n        );\n      };\n\n      return (\n        <PanelComponent\n          elements={this.getElementsIncludingDeleted()}\n          appState={this.getAppState()}\n          updateData={updateData}\n          appProps={this.app.props}\n          app={this.app}\n          data={data}\n          renderAction={this.renderAction}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  isActionEnabled = (action: Action) => {\n    const elements = this.getElementsIncludingDeleted();\n    const appState = this.getAppState();\n\n    return (\n      !action.predicate ||\n      action.predicate(elements, appState, this.app.props, this.app)\n    );\n  };\n}\n","export type AnimationCallback = (timestamp: number) => void | boolean;\n\nexport type AnimationTarget = {\n  callback: AnimationCallback;\n  stopped: boolean;\n};\n\nexport class AnimationFrameHandler {\n  private targets = new WeakMap<object, AnimationTarget>();\n  private rafIds = new WeakMap<object, number>();\n\n  register(key: object, callback: AnimationCallback) {\n    this.targets.set(key, { callback, stopped: true });\n  }\n\n  start(key: object) {\n    const target = this.targets.get(key);\n\n    if (!target) {\n      return;\n    }\n\n    if (this.rafIds.has(key)) {\n      return;\n    }\n\n    this.targets.set(key, { ...target, stopped: false });\n    this.scheduleFrame(key);\n  }\n\n  stop(key: object) {\n    const target = this.targets.get(key);\n    if (target && !target.stopped) {\n      this.targets.set(key, { ...target, stopped: true });\n    }\n\n    this.cancelFrame(key);\n  }\n\n  private constructFrame(key: object): FrameRequestCallback {\n    return (timestamp: number) => {\n      const target = this.targets.get(key);\n\n      if (!target) {\n        return;\n      }\n\n      const shouldAbort = this.onFrame(target, timestamp);\n\n      if (!target.stopped && !shouldAbort) {\n        this.scheduleFrame(key);\n      } else {\n        this.cancelFrame(key);\n      }\n    };\n  }\n\n  private scheduleFrame(key: object) {\n    const rafId = requestAnimationFrame(this.constructFrame(key));\n\n    this.rafIds.set(key, rafId);\n  }\n\n  private cancelFrame(key: object) {\n    if (this.rafIds.has(key)) {\n      const rafId = this.rafIds.get(key)!;\n\n      cancelAnimationFrame(rafId);\n    }\n\n    this.rafIds.delete(key);\n  }\n\n  private onFrame(target: AnimationTarget, timestamp: number): boolean {\n    const shouldAbort = target.callback(timestamp);\n\n    return shouldAbort ?? false;\n  }\n}\n","import { LaserPointer } from \"@excalidraw/laser-pointer\";\n\nimport {\n  SVG_NS,\n  getSvgPathFromStroke,\n  sceneCoordsToViewportCoords,\n} from \"@jsondraw/common\";\n\nimport type { LaserPointerOptions } from \"@excalidraw/laser-pointer\";\n\nimport type { AnimationFrameHandler } from \"./animation-frame-handler\";\nimport type App from \"./components/App\";\nimport type { AppState } from \"./types\";\n\nexport interface Trail {\n  start(container: SVGSVGElement): void;\n  stop(): void;\n\n  startPath(x: number, y: number): void;\n  addPointToPath(x: number, y: number): void;\n  endPath(): void;\n}\n\nexport interface AnimatedTrailOptions {\n  fill: (trail: AnimatedTrail) => string;\n  stroke?: (trail: AnimatedTrail) => string;\n  animateTrail?: boolean;\n}\n\nexport class AnimatedTrail implements Trail {\n  private currentTrail?: LaserPointer;\n  private pastTrails: LaserPointer[] = [];\n\n  private container?: SVGSVGElement;\n  private trailElement: SVGPathElement;\n  private trailAnimation?: SVGAnimateElement;\n\n  constructor(\n    private animationFrameHandler: AnimationFrameHandler,\n    protected app: App,\n    private options: Partial<LaserPointerOptions> &\n      Partial<AnimatedTrailOptions>,\n  ) {\n    this.animationFrameHandler.register(this, this.onFrame.bind(this));\n\n    this.trailElement = document.createElementNS(SVG_NS, \"path\");\n    if (this.options.animateTrail) {\n      this.trailAnimation = document.createElementNS(SVG_NS, \"animate\");\n      // TODO: make this configurable\n      this.trailAnimation.setAttribute(\"attributeName\", \"stroke-dashoffset\");\n      this.trailElement.setAttribute(\"stroke-dasharray\", \"7 7\");\n      this.trailElement.setAttribute(\"stroke-dashoffset\", \"10\");\n      this.trailAnimation.setAttribute(\"from\", \"0\");\n      this.trailAnimation.setAttribute(\"to\", `-14`);\n      this.trailAnimation.setAttribute(\"dur\", \"0.3s\");\n      this.trailElement.appendChild(this.trailAnimation);\n    }\n  }\n\n  get hasCurrentTrail() {\n    return !!this.currentTrail;\n  }\n\n  hasLastPoint(x: number, y: number) {\n    if (this.currentTrail) {\n      const len = this.currentTrail.originalPoints.length;\n      return (\n        this.currentTrail.originalPoints[len - 1][0] === x &&\n        this.currentTrail.originalPoints[len - 1][1] === y\n      );\n    }\n\n    return false;\n  }\n\n  start(container?: SVGSVGElement) {\n    if (container) {\n      this.container = container;\n    }\n\n    if (this.trailElement.parentNode !== this.container && this.container) {\n      this.container.appendChild(this.trailElement);\n    }\n\n    this.animationFrameHandler.start(this);\n  }\n\n  stop() {\n    this.animationFrameHandler.stop(this);\n\n    if (this.trailElement.parentNode === this.container) {\n      this.container?.removeChild(this.trailElement);\n    }\n  }\n\n  startPath(x: number, y: number) {\n    this.currentTrail = new LaserPointer(this.options);\n\n    this.currentTrail.addPoint([x, y, performance.now()]);\n\n    this.update();\n  }\n\n  addPointToPath(x: number, y: number) {\n    if (this.currentTrail) {\n      this.currentTrail.addPoint([x, y, performance.now()]);\n      this.update();\n    }\n  }\n\n  endPath() {\n    if (this.currentTrail) {\n      this.currentTrail.close();\n      this.currentTrail.options.keepHead = false;\n      this.pastTrails.push(this.currentTrail);\n      this.currentTrail = undefined;\n      this.update();\n    }\n  }\n\n  getCurrentTrail() {\n    return this.currentTrail;\n  }\n\n  clearTrails() {\n    this.pastTrails = [];\n    this.currentTrail = undefined;\n    this.update();\n  }\n\n  private update() {\n    this.start();\n    if (this.trailAnimation) {\n      this.trailAnimation.setAttribute(\"begin\", \"indefinite\");\n      this.trailAnimation.setAttribute(\"repeatCount\", \"indefinite\");\n    }\n  }\n\n  private onFrame() {\n    const paths: string[] = [];\n\n    for (const trail of this.pastTrails) {\n      paths.push(this.drawTrail(trail, this.app.state));\n    }\n\n    if (this.currentTrail) {\n      const currentPath = this.drawTrail(this.currentTrail, this.app.state);\n\n      paths.push(currentPath);\n    }\n\n    this.pastTrails = this.pastTrails.filter((trail) => {\n      return trail.getStrokeOutline().length !== 0;\n    });\n\n    if (paths.length === 0) {\n      this.stop();\n    }\n\n    const svgPaths = paths.join(\" \").trim();\n\n    this.trailElement.setAttribute(\"d\", svgPaths);\n    if (this.trailAnimation) {\n      this.trailElement.setAttribute(\n        \"fill\",\n        (this.options.fill ?? (() => \"black\"))(this),\n      );\n      this.trailElement.setAttribute(\n        \"stroke\",\n        (this.options.stroke ?? (() => \"black\"))(this),\n      );\n    } else {\n      this.trailElement.setAttribute(\n        \"fill\",\n        (this.options.fill ?? (() => \"black\"))(this),\n      );\n    }\n  }\n\n  private drawTrail(trail: LaserPointer, state: AppState): string {\n    const _stroke = trail\n      .getStrokeOutline(trail.options.size / state.zoom.value)\n      .map(([x, y]) => {\n        const result = sceneCoordsToViewportCoords(\n          { sceneX: x, sceneY: y },\n          state,\n        );\n\n        return [result.x, result.y];\n      });\n\n    const stroke = this.trailAnimation\n      ? _stroke.slice(0, _stroke.length / 2)\n      : _stroke;\n\n    return getSvgPathFromStroke(stroke, true);\n  }\n}\n","import { arrayToMap, easeOut, THEME } from \"@jsondraw/common\";\n\nimport {\n  computeBoundTextPosition,\n  doBoundsIntersect,\n  getBoundTextElement,\n  getElementBounds,\n  getElementLineSegments,\n  getFreedrawOutlineAsSegments,\n  getFreedrawOutlinePoints,\n  intersectElementWithLineSegment,\n  isArrowElement,\n  isFreeDrawElement,\n  isLineElement,\n  isPointInElement,\n} from \"@jsondraw/element\";\nimport {\n  lineSegment,\n  lineSegmentsDistance,\n  pointFrom,\n  polygon,\n  polygonIncludesPointNonZero,\n} from \"@jsondraw/math\";\n\nimport { getElementsInGroup } from \"@jsondraw/element\";\n\nimport { shouldTestInside } from \"@jsondraw/element\";\nimport { hasBoundTextElement, isBoundToContainer } from \"@jsondraw/element\";\nimport { getBoundTextElementId } from \"@jsondraw/element\";\n\nimport type { Bounds } from \"@jsondraw/common\";\n\nimport type { GlobalPoint, LineSegment } from \"@jsondraw/math/types\";\nimport type { ElementsMap, JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { AnimatedTrail } from \"../animated-trail\";\n\nimport type { AnimationFrameHandler } from \"../animation-frame-handler\";\n\nimport type App from \"../components/App\";\n\nexport class EraserTrail extends AnimatedTrail {\n  private elementsToErase: Set<JsonDrawElement[\"id\"]> = new Set();\n  private groupsToErase: Set<JsonDrawElement[\"id\"]> = new Set();\n\n  constructor(animationFrameHandler: AnimationFrameHandler, app: App) {\n    super(animationFrameHandler, app, {\n      streamline: 0.2,\n      size: 5,\n      keepHead: true,\n      sizeMapping: (c) => {\n        const DECAY_TIME = 200;\n        const DECAY_LENGTH = 10;\n        const t = Math.max(\n          0,\n          1 - (performance.now() - c.pressure) / DECAY_TIME,\n        );\n        const l =\n          (DECAY_LENGTH -\n            Math.min(DECAY_LENGTH, c.totalLength - c.currentIndex)) /\n          DECAY_LENGTH;\n\n        return Math.min(easeOut(l), easeOut(t));\n      },\n      fill: () =>\n        app.state.theme === THEME.LIGHT\n          ? \"rgba(0, 0, 0, 0.2)\"\n          : \"rgba(255, 255, 255, 0.2)\",\n    });\n  }\n\n  startPath(x: number, y: number): void {\n    this.endPath();\n    super.startPath(x, y);\n    this.elementsToErase.clear();\n  }\n\n  addPointToPath(x: number, y: number, restore = false) {\n    super.addPointToPath(x, y);\n\n    const elementsToEraser = this.updateElementsToBeErased(restore);\n\n    return elementsToEraser;\n  }\n\n  private updateElementsToBeErased(restoreToErase?: boolean) {\n    const eraserPath: GlobalPoint[] =\n      super\n        .getCurrentTrail()\n        ?.originalPoints?.map((p) => pointFrom<GlobalPoint>(p[0], p[1])) || [];\n\n    if (eraserPath.length < 2) {\n      return [];\n    }\n\n    // for efficiency and avoid unnecessary calculations,\n    // take only POINTS_ON_TRAIL points to form some number of segments\n    const pathSegment = lineSegment<GlobalPoint>(\n      eraserPath[eraserPath.length - 1],\n      eraserPath[eraserPath.length - 2],\n    );\n\n    const candidateElements = this.app.visibleElements.filter(\n      (el) => !el.locked,\n    );\n\n    const candidateElementsMap = arrayToMap(candidateElements);\n\n    for (const element of candidateElements) {\n      // restore only if already added to the to-be-erased set\n      if (restoreToErase && this.elementsToErase.has(element.id)) {\n        const intersects = eraserTest(\n          pathSegment,\n          element,\n          candidateElementsMap,\n          this.app.state.zoom.value,\n        );\n\n        if (intersects) {\n          const shallowestGroupId = element.groupIds.at(-1)!;\n\n          if (this.groupsToErase.has(shallowestGroupId)) {\n            const elementsInGroup = getElementsInGroup(\n              this.app.scene.getNonDeletedElementsMap(),\n              shallowestGroupId,\n            );\n            for (const elementInGroup of elementsInGroup) {\n              this.elementsToErase.delete(elementInGroup.id);\n            }\n            this.groupsToErase.delete(shallowestGroupId);\n          }\n\n          if (isBoundToContainer(element)) {\n            this.elementsToErase.delete(element.containerId);\n          }\n\n          if (hasBoundTextElement(element)) {\n            const boundText = getBoundTextElementId(element);\n\n            if (boundText) {\n              this.elementsToErase.delete(boundText);\n            }\n          }\n\n          this.elementsToErase.delete(element.id);\n        }\n      } else if (!restoreToErase && !this.elementsToErase.has(element.id)) {\n        const intersects = eraserTest(\n          pathSegment,\n          element,\n          candidateElementsMap,\n          this.app.state.zoom.value,\n        );\n\n        if (intersects) {\n          const shallowestGroupId = element.groupIds.at(-1)!;\n\n          if (!this.groupsToErase.has(shallowestGroupId)) {\n            const elementsInGroup = getElementsInGroup(\n              this.app.scene.getNonDeletedElementsMap(),\n              shallowestGroupId,\n            );\n\n            for (const elementInGroup of elementsInGroup) {\n              this.elementsToErase.add(elementInGroup.id);\n            }\n            this.groupsToErase.add(shallowestGroupId);\n          }\n\n          if (hasBoundTextElement(element)) {\n            const boundText = getBoundTextElementId(element);\n\n            if (boundText) {\n              this.elementsToErase.add(boundText);\n            }\n          }\n\n          if (isBoundToContainer(element)) {\n            this.elementsToErase.add(element.containerId);\n          }\n\n          this.elementsToErase.add(element.id);\n        }\n      }\n    }\n\n    return Array.from(this.elementsToErase);\n  }\n\n  endPath(): void {\n    super.endPath();\n    super.clearTrails();\n    this.elementsToErase.clear();\n    this.groupsToErase.clear();\n  }\n}\n\nconst eraserTest = (\n  pathSegment: LineSegment<GlobalPoint>,\n  element: JsonDrawElement,\n  elementsMap: ElementsMap,\n  zoom: number,\n): boolean => {\n  const lastPoint = pathSegment[1];\n\n  // PERF: Do a quick bounds intersection test first because it's cheap\n  const threshold = isFreeDrawElement(element) ? 15 : element.strokeWidth / 2;\n  const segmentBounds = [\n    Math.min(pathSegment[0][0], pathSegment[1][0]) - threshold,\n    Math.min(pathSegment[0][1], pathSegment[1][1]) - threshold,\n    Math.max(pathSegment[0][0], pathSegment[1][0]) + threshold,\n    Math.max(pathSegment[0][1], pathSegment[1][1]) + threshold,\n  ] as Bounds;\n  const origElementBounds = getElementBounds(element, elementsMap);\n  const elementBounds: Bounds = [\n    origElementBounds[0] - threshold,\n    origElementBounds[1] - threshold,\n    origElementBounds[2] + threshold,\n    origElementBounds[3] + threshold,\n  ];\n\n  if (!doBoundsIntersect(segmentBounds, elementBounds)) {\n    return false;\n  }\n\n  // There are shapes where the inner area should trigger erasing\n  // even though the eraser path segment doesn't intersect with or\n  // get close to the shape's stroke\n  if (\n    shouldTestInside(element) &&\n    isPointInElement(lastPoint, element, elementsMap)\n  ) {\n    return true;\n  }\n\n  // Freedraw elements are tested for erasure by measuring the distance\n  // of the eraser path and the freedraw shape outline lines to a tolerance\n  // which offers a good visual precision at various zoom levels\n  if (isFreeDrawElement(element)) {\n    const outlinePoints = getFreedrawOutlinePoints(element);\n    const strokeSegments = getFreedrawOutlineAsSegments(\n      element,\n      outlinePoints,\n      elementsMap,\n    );\n    const tolerance = Math.max(2.25, 5 / zoom); // NOTE: Visually fine-tuned approximation\n\n    for (const seg of strokeSegments) {\n      if (lineSegmentsDistance(seg, pathSegment) <= tolerance) {\n        return true;\n      }\n    }\n\n    const poly = polygon(\n      ...(outlinePoints.map(([x, y]) =>\n        pointFrom<GlobalPoint>(element.x + x, element.y + y),\n      ) as GlobalPoint[]),\n    );\n\n    // PERF: Check only one point of the eraser segment. If the eraser segment\n    // start is inside the closed freedraw shape, the other point is either also\n    // inside or the eraser segment will intersect the shape outline anyway\n    if (polygonIncludesPointNonZero(pathSegment[0], poly)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  const boundTextElement = getBoundTextElement(element, elementsMap);\n\n  if (isArrowElement(element) || (isLineElement(element) && !element.polygon)) {\n    const tolerance = Math.max(\n      element.strokeWidth,\n      (element.strokeWidth * 2) / zoom,\n    );\n\n    // If the eraser movement is so fast that a large distance is covered\n    // between the last two points, the distanceToElement miss, so we test\n    // agaist each segment of the linear element\n    const segments = getElementLineSegments(element, elementsMap);\n    for (const seg of segments) {\n      if (lineSegmentsDistance(seg, pathSegment) <= tolerance) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  return (\n    intersectElementWithLineSegment(element, elementsMap, pathSegment, 0, true)\n      .length > 0 ||\n    (!!boundTextElement &&\n      intersectElementWithLineSegment(\n        {\n          ...boundTextElement,\n          ...computeBoundTextPosition(element, boundTextElement, elementsMap),\n        },\n        elementsMap,\n        pathSegment,\n        0,\n        true,\n      ).length > 0)\n  );\n};\n","import type { PointerCoords } from \"./types\";\n\nexport const getCenter = (pointers: Map<number, PointerCoords>) => {\n  const allCoords = Array.from(pointers.values());\n  return {\n    x: sum(allCoords, (coords) => coords.x) / allCoords.length,\n    y: sum(allCoords, (coords) => coords.y) / allCoords.length,\n  };\n};\n\nexport const getDistance = ([a, b]: readonly PointerCoords[]) =>\n  Math.hypot(a.x - b.x, a.y - b.y);\n\nconst sum = <T>(array: readonly T[], mapper: (item: T) => number): number =>\n  array.reduce((acc, item) => acc + mapper(item), 0);\n","import { DEFAULT_LASER_COLOR, easeOut } from \"@jsondraw/common\";\n\nimport type { LaserPointerOptions } from \"@excalidraw/laser-pointer\";\n\nimport { AnimatedTrail } from \"./animated-trail\";\nimport { getClientColor } from \"./clients\";\n\nimport type { Trail } from \"./animated-trail\";\nimport type { AnimationFrameHandler } from \"./animation-frame-handler\";\nimport type App from \"./components/App\";\nimport type { SocketId } from \"./types\";\n\nexport class LaserTrails implements Trail {\n  public localTrail: AnimatedTrail;\n  private collabTrails = new Map<SocketId, AnimatedTrail>();\n\n  private container?: SVGSVGElement;\n\n  constructor(\n    private animationFrameHandler: AnimationFrameHandler,\n    private app: App,\n  ) {\n    this.animationFrameHandler.register(this, this.onFrame.bind(this));\n\n    this.localTrail = new AnimatedTrail(animationFrameHandler, app, {\n      ...this.getTrailOptions(),\n      fill: () => DEFAULT_LASER_COLOR,\n    });\n  }\n\n  private getTrailOptions() {\n    return {\n      simplify: 0,\n      streamline: 0.4,\n      sizeMapping: (c) => {\n        const DECAY_TIME = 1000;\n        const DECAY_LENGTH = 50;\n        const t = Math.max(\n          0,\n          1 - (performance.now() - c.pressure) / DECAY_TIME,\n        );\n        const l =\n          (DECAY_LENGTH -\n            Math.min(DECAY_LENGTH, c.totalLength - c.currentIndex)) /\n          DECAY_LENGTH;\n\n        return Math.min(easeOut(l), easeOut(t));\n      },\n    } as Partial<LaserPointerOptions>;\n  }\n\n  startPath(x: number, y: number): void {\n    this.localTrail.startPath(x, y);\n  }\n\n  addPointToPath(x: number, y: number): void {\n    this.localTrail.addPointToPath(x, y);\n  }\n\n  endPath(): void {\n    this.localTrail.endPath();\n  }\n\n  start(container: SVGSVGElement) {\n    this.container = container;\n\n    this.animationFrameHandler.start(this);\n    this.localTrail.start(container);\n  }\n\n  stop() {\n    this.animationFrameHandler.stop(this);\n    this.localTrail.stop();\n  }\n\n  onFrame() {\n    this.updateCollabTrails();\n  }\n\n  private updateCollabTrails() {\n    if (!this.container || this.app.state.collaborators.size === 0) {\n      return;\n    }\n\n    for (const [key, collaborator] of this.app.state.collaborators.entries()) {\n      let trail!: AnimatedTrail;\n\n      if (!this.collabTrails.has(key)) {\n        trail = new AnimatedTrail(this.animationFrameHandler, this.app, {\n          ...this.getTrailOptions(),\n          fill: () =>\n            collaborator.pointer?.laserColor ||\n            getClientColor(key, collaborator),\n        });\n        trail.start(this.container);\n\n        this.collabTrails.set(key, trail);\n      } else {\n        trail = this.collabTrails.get(key)!;\n      }\n\n      if (collaborator.pointer && collaborator.pointer.tool === \"laser\") {\n        if (collaborator.button === \"down\" && !trail.hasCurrentTrail) {\n          trail.startPath(collaborator.pointer.x, collaborator.pointer.y);\n        }\n\n        if (\n          collaborator.button === \"down\" &&\n          trail.hasCurrentTrail &&\n          !trail.hasLastPoint(collaborator.pointer.x, collaborator.pointer.y)\n        ) {\n          trail.addPointToPath(collaborator.pointer.x, collaborator.pointer.y);\n        }\n\n        if (collaborator.button === \"up\" && trail.hasCurrentTrail) {\n          trail.addPointToPath(collaborator.pointer.x, collaborator.pointer.y);\n          trail.endPath();\n        }\n      }\n    }\n\n    for (const key of this.collabTrails.keys()) {\n      if (!this.app.state.collaborators.has(key)) {\n        const trail = this.collabTrails.get(key)!;\n        trail.stop();\n        this.collabTrails.delete(key);\n      }\n    }\n  }\n}\n","import { simplify } from \"points-on-curve\";\n\nimport {\n  polygonFromPoints,\n  lineSegment,\n  polygonIncludesPointNonZero,\n} from \"@jsondraw/math\";\n\nimport { type Bounds } from \"@jsondraw/common\";\n\nimport {\n  computeBoundTextPosition,\n  doBoundsIntersect,\n  getBoundTextElement,\n  getElementBounds,\n  intersectElementWithLineSegment,\n} from \"@jsondraw/element\";\n\nimport type { ElementsSegmentsMap, GlobalPoint } from \"@jsondraw/math/types\";\nimport type { ElementsMap, JsonDrawElement } from \"@jsondraw/element/types\";\n\nexport const getLassoSelectedElementIds = (input: {\n  lassoPath: GlobalPoint[];\n  elements: readonly JsonDrawElement[];\n  elementsMap: ElementsMap;\n  elementsSegments: ElementsSegmentsMap;\n  intersectedElements: Set<JsonDrawElement[\"id\"]>;\n  enclosedElements: Set<JsonDrawElement[\"id\"]>;\n  simplifyDistance?: number;\n}): {\n  selectedElementIds: string[];\n} => {\n  const {\n    lassoPath,\n    elements,\n    elementsMap,\n    elementsSegments,\n    intersectedElements,\n    enclosedElements,\n    simplifyDistance,\n  } = input;\n  // simplify the path to reduce the number of points\n  let path: GlobalPoint[] = lassoPath;\n  if (simplifyDistance) {\n    path = simplify(lassoPath, simplifyDistance) as GlobalPoint[];\n  }\n  const unlockedElements = elements.filter((el) => !el.locked);\n  // as the path might not enclose a shape anymore, clear before checking\n  enclosedElements.clear();\n  intersectedElements.clear();\n  const lassoBounds = lassoPath.reduce(\n    (acc, item) => {\n      return [\n        Math.min(acc[0], item[0]),\n        Math.min(acc[1], item[1]),\n        Math.max(acc[2], item[0]),\n        Math.max(acc[3], item[1]),\n      ];\n    },\n    [Infinity, Infinity, -Infinity, -Infinity],\n  ) as Bounds;\n  for (const element of unlockedElements) {\n    // First check if the lasso segment intersects the element's axis-aligned\n    // bounding box as it is much faster than checking intersection against\n    // the element's shape\n    const elementBounds = getElementBounds(element, elementsMap);\n\n    if (\n      doBoundsIntersect(lassoBounds, elementBounds) &&\n      !intersectedElements.has(element.id) &&\n      !enclosedElements.has(element.id)\n    ) {\n      const enclosed = enclosureTest(path, element, elementsSegments);\n      if (enclosed) {\n        enclosedElements.add(element.id);\n      } else {\n        const intersects = intersectionTest(path, element, elementsMap);\n        if (intersects) {\n          intersectedElements.add(element.id);\n        }\n      }\n    }\n  }\n\n  const results = [...intersectedElements, ...enclosedElements];\n\n  return {\n    selectedElementIds: results,\n  };\n};\n\nconst enclosureTest = (\n  lassoPath: GlobalPoint[],\n  element: JsonDrawElement,\n  elementsSegments: ElementsSegmentsMap,\n): boolean => {\n  const lassoPolygon = polygonFromPoints(lassoPath);\n  const segments = elementsSegments.get(element.id);\n  if (!segments) {\n    return false;\n  }\n\n  return segments.some((segment) => {\n    return segment.some((point) =>\n      polygonIncludesPointNonZero(point, lassoPolygon),\n    );\n  });\n};\n\nconst intersectionTest = (\n  lassoPath: GlobalPoint[],\n  element: JsonDrawElement,\n  elementsMap: ElementsMap,\n): boolean => {\n  const lassoSegments = lassoPath\n    .slice(1)\n    .map((point: GlobalPoint, index) => lineSegment(lassoPath[index], point))\n    .concat([lineSegment(lassoPath[lassoPath.length - 1], lassoPath[0])]);\n\n  const boundTextElement = getBoundTextElement(element, elementsMap);\n\n  return lassoSegments.some(\n    (lassoSegment) =>\n      intersectElementWithLineSegment(\n        element,\n        elementsMap,\n        lassoSegment,\n        0,\n        true,\n      ).length > 0 ||\n      (!!boundTextElement &&\n        intersectElementWithLineSegment(\n          {\n            ...boundTextElement,\n            ...computeBoundTextPosition(element, boundTextElement, elementsMap),\n          },\n          elementsMap,\n          lassoSegment,\n          0,\n          true,\n        ).length > 0),\n  );\n};\n","import {\n  type GlobalPoint,\n  type LineSegment,\n  pointFrom,\n} from \"@jsondraw/math\";\n\nimport { getElementLineSegments } from \"@jsondraw/element\";\nimport { LinearElementEditor } from \"@jsondraw/element\";\nimport {\n  isFrameLikeElement,\n  isLinearElement,\n  isTextElement,\n} from \"@jsondraw/element\";\n\nimport { getFrameChildren } from \"@jsondraw/element\";\nimport { selectGroupsForSelectedElements } from \"@jsondraw/element\";\n\nimport { getContainerElement } from \"@jsondraw/element\";\n\nimport { arrayToMap, easeOut, isShallowEqual } from \"@jsondraw/common\";\n\nimport type {\n  JsonDrawElement,\n  JsonDrawLinearElement,\n  NonDeleted,\n} from \"@jsondraw/element/types\";\n\nimport { type AnimationFrameHandler } from \"../animation-frame-handler\";\n\nimport { AnimatedTrail } from \"../animated-trail\";\n\nimport { getLassoSelectedElementIds } from \"./utils\";\n\nimport type App from \"../components/App\";\n\ntype CanvasTranslate = {\n  scrollX: number;\n  scrollY: number;\n  zoom: number;\n};\n\nexport class LassoTrail extends AnimatedTrail {\n  private intersectedElements: Set<JsonDrawElement[\"id\"]> = new Set();\n  private enclosedElements: Set<JsonDrawElement[\"id\"]> = new Set();\n  private elementsSegments: Map<string, LineSegment<GlobalPoint>[]> | null =\n    null;\n  private canvasTranslate: CanvasTranslate | null = null;\n  private keepPreviousSelection: boolean = false;\n\n  constructor(animationFrameHandler: AnimationFrameHandler, app: App) {\n    super(animationFrameHandler, app, {\n      animateTrail: true,\n      streamline: 0.4,\n      sizeMapping: (c) => {\n        const DECAY_TIME = Infinity;\n        const DECAY_LENGTH = 5000;\n        const t = Math.max(\n          0,\n          1 - (performance.now() - c.pressure) / DECAY_TIME,\n        );\n        const l =\n          (DECAY_LENGTH -\n            Math.min(DECAY_LENGTH, c.totalLength - c.currentIndex)) /\n          DECAY_LENGTH;\n\n        return Math.min(easeOut(l), easeOut(t));\n      },\n      fill: () => \"rgba(105,101,219,0.05)\",\n      stroke: () => \"rgba(105,101,219)\",\n    });\n  }\n\n  startPath(x: number, y: number, keepPreviousSelection = false) {\n    // clear any existing trails just in case\n    this.endPath();\n\n    super.startPath(x, y);\n    this.intersectedElements.clear();\n    this.enclosedElements.clear();\n\n    this.keepPreviousSelection = keepPreviousSelection;\n\n    if (!this.keepPreviousSelection) {\n      this.app.setState({\n        selectedElementIds: {},\n        selectedGroupIds: {},\n        selectedLinearElement: null,\n      });\n    }\n  }\n\n  selectElementsFromIds = (ids: string[]) => {\n    this.app.setState((prevState) => {\n      const nextSelectedElementIds = ids.reduce((acc, id) => {\n        acc[id] = true;\n        return acc;\n      }, {} as Record<JsonDrawElement[\"id\"], true>);\n\n      if (this.keepPreviousSelection) {\n        for (const id of Object.keys(prevState.selectedElementIds)) {\n          nextSelectedElementIds[id] = true;\n        }\n      }\n\n      for (const [id] of Object.entries(nextSelectedElementIds)) {\n        const element = this.app.scene.getNonDeletedElement(id);\n\n        if (element && isTextElement(element)) {\n          const container = getContainerElement(\n            element,\n            this.app.scene.getNonDeletedElementsMap(),\n          );\n          if (container) {\n            nextSelectedElementIds[container.id] = true;\n            delete nextSelectedElementIds[element.id];\n          }\n        }\n      }\n\n      // remove all children of selected frames\n      for (const [id] of Object.entries(nextSelectedElementIds)) {\n        const element = this.app.scene.getNonDeletedElement(id);\n\n        if (element && isFrameLikeElement(element)) {\n          const elementsInFrame = getFrameChildren(\n            this.app.scene.getNonDeletedElementsMap(),\n            element.id,\n          );\n          for (const child of elementsInFrame) {\n            delete nextSelectedElementIds[child.id];\n          }\n        }\n      }\n\n      const nextSelection = selectGroupsForSelectedElements(\n        {\n          editingGroupId: prevState.editingGroupId,\n          selectedElementIds: nextSelectedElementIds,\n        },\n        this.app.scene.getNonDeletedElements(),\n        prevState,\n        this.app,\n      );\n\n      const selectedIds = [...Object.keys(nextSelection.selectedElementIds)];\n      const selectedGroupIds = [...Object.keys(nextSelection.selectedGroupIds)];\n\n      return {\n        selectedElementIds: nextSelection.selectedElementIds,\n        selectedGroupIds: nextSelection.selectedGroupIds,\n        selectedLinearElement:\n          selectedIds.length === 1 &&\n          !selectedGroupIds.length &&\n          isLinearElement(this.app.scene.getNonDeletedElement(selectedIds[0]))\n            ? new LinearElementEditor(\n                this.app.scene.getNonDeletedElement(\n                  selectedIds[0],\n                ) as NonDeleted<JsonDrawLinearElement>,\n                this.app.scene.getNonDeletedElementsMap(),\n              )\n            : null,\n      };\n    });\n  };\n\n  addPointToPath = (x: number, y: number, keepPreviousSelection = false) => {\n    super.addPointToPath(x, y);\n\n    this.keepPreviousSelection = keepPreviousSelection;\n\n    this.updateSelection();\n  };\n\n  private updateSelection = () => {\n    const lassoPath = super\n      .getCurrentTrail()\n      ?.originalPoints?.map((p) => pointFrom<GlobalPoint>(p[0], p[1]));\n\n    const currentCanvasTranslate: CanvasTranslate = {\n      scrollX: this.app.state.scrollX,\n      scrollY: this.app.state.scrollY,\n      zoom: this.app.state.zoom.value,\n    };\n\n    if (\n      !this.elementsSegments ||\n      !isShallowEqual(currentCanvasTranslate, this.canvasTranslate ?? {})\n    ) {\n      this.canvasTranslate = currentCanvasTranslate;\n      this.elementsSegments = new Map();\n      const visibleElementsMap = arrayToMap(this.app.visibleElements);\n      for (const element of this.app.visibleElements) {\n        const segments = getElementLineSegments(element, visibleElementsMap);\n        this.elementsSegments.set(element.id, segments);\n      }\n    }\n\n    if (lassoPath) {\n      const { selectedElementIds } = getLassoSelectedElementIds({\n        lassoPath,\n        elements: this.app.visibleElements,\n        elementsMap: this.app.scene.getNonDeletedElementsMap(),\n        elementsSegments: this.elementsSegments,\n        intersectedElements: this.intersectedElements,\n        enclosedElements: this.enclosedElements,\n        simplifyDistance: 5 / this.app.state.zoom.value,\n      });\n\n      this.selectElementsFromIds(selectedElementIds);\n    }\n  };\n\n  endPath(): void {\n    super.endPath();\n    super.clearTrails();\n    this.intersectedElements.clear();\n    this.enclosedElements.clear();\n    this.elementsSegments = null;\n  }\n}\n","/** heuristically checks whether the text may be a mermaid diagram definition */\nexport const isMaybeMermaidDefinition = (text: string) => {\n  const chartTypes = [\n    \"flowchart\",\n    \"graph\",\n    \"sequenceDiagram\",\n    \"classDiagram\",\n    \"stateDiagram\",\n    \"stateDiagram-v2\",\n    \"erDiagram\",\n    \"journey\",\n    \"gantt\",\n    \"pie\",\n    \"quadrantChart\",\n    \"requirementDiagram\",\n    \"gitGraph\",\n    \"C4Context\",\n    \"mindmap\",\n    \"timeline\",\n    \"zenuml\",\n    \"sankey\",\n    \"xychart\",\n    \"block\",\n  ];\n\n  const re = new RegExp(\n    `^(?:%%{.*?}%%[\\\\s\\\\n]*)?\\\\b(?:${chartTypes\n      .map((x) => `\\\\s*${x}(-beta)?`)\n      .join(\"|\")})\\\\b`,\n  );\n\n  return re.test(text.trim());\n};\n","/**\n * @param func handler taking at most single parameter (event).\n */\n\nimport { version as ReactVersion } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\n\nimport { throttleRAF } from \"@jsondraw/common\";\n\nexport const withBatchedUpdates = <\n  TFunction extends ((event: any) => void) | (() => void),\n>(\n  func: Parameters<TFunction>[\"length\"] extends 0 | 1 ? TFunction : never,\n) =>\n  ((event) => {\n    unstable_batchedUpdates(func as TFunction, event);\n  }) as TFunction;\n\n/**\n * barches React state updates and throttles the calls to a single call per\n * animation frame\n */\nexport const withBatchedUpdatesThrottled = <\n  TFunction extends ((event: any) => void) | (() => void),\n>(\n  func: Parameters<TFunction>[\"length\"] extends 0 | 1 ? TFunction : never,\n) => {\n  // @ts-ignore\n  return throttleRAF<Parameters<TFunction>>(((event) => {\n    unstable_batchedUpdates(func, event);\n  }) as TFunction);\n};\n\nexport const isRenderThrottlingEnabled = (() => {\n  // we don't want to throttle in react < 18 because of #5439 and it was\n  // getting more complex to maintain the fix\n  let IS_REACT_18_AND_UP: boolean;\n  try {\n    const version = ReactVersion.split(\".\");\n    IS_REACT_18_AND_UP = Number(version[0]) > 17;\n  } catch {\n    IS_REACT_18_AND_UP = false;\n  }\n\n  let hasWarned = false;\n\n  return () => {\n    if (window.JSONDRAW_THROTTLE_RENDER === true) {\n      if (!IS_REACT_18_AND_UP) {\n        if (!hasWarned) {\n          hasWarned = true;\n          console.warn(\n            \"JsonDraw: render throttling is disabled on React versions < 18.\",\n          );\n        }\n        return false;\n      }\n      return true;\n    }\n    return false;\n  };\n})();\n","import { isElementInViewport } from \"@jsondraw/element\";\n\nimport { memoize, toBrandedType } from \"@jsondraw/common\";\n\nimport type {\n  JsonDrawElement,\n  NonDeletedElementsMap,\n  NonDeletedJsonDrawElement,\n} from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport { renderStaticSceneThrottled } from \"../renderer/staticScene\";\n\nimport type { RenderableElementsMap } from \"./types\";\n\nimport type { AppState } from \"../types\";\n\nexport class Renderer {\n  private scene: Scene;\n\n  constructor(scene: Scene) {\n    this.scene = scene;\n  }\n\n  public getRenderableElements = (() => {\n    const getVisibleCanvasElements = ({\n      elementsMap,\n      zoom,\n      offsetLeft,\n      offsetTop,\n      scrollX,\n      scrollY,\n      height,\n      width,\n    }: {\n      elementsMap: NonDeletedElementsMap;\n      zoom: AppState[\"zoom\"];\n      offsetLeft: AppState[\"offsetLeft\"];\n      offsetTop: AppState[\"offsetTop\"];\n      scrollX: AppState[\"scrollX\"];\n      scrollY: AppState[\"scrollY\"];\n      height: AppState[\"height\"];\n      width: AppState[\"width\"];\n    }): readonly NonDeletedJsonDrawElement[] => {\n      const visibleElements: NonDeletedJsonDrawElement[] = [];\n      for (const element of elementsMap.values()) {\n        if (\n          isElementInViewport(\n            element,\n            width,\n            height,\n            {\n              zoom,\n              offsetLeft,\n              offsetTop,\n              scrollX,\n              scrollY,\n            },\n            elementsMap,\n          )\n        ) {\n          visibleElements.push(element);\n        }\n      }\n      return visibleElements;\n    };\n\n    const getRenderableElements = ({\n      elements,\n      editingTextElement,\n      newElementId,\n    }: {\n      elements: readonly NonDeletedJsonDrawElement[];\n      editingTextElement: AppState[\"editingTextElement\"];\n      newElementId: JsonDrawElement[\"id\"] | undefined;\n    }) => {\n      const elementsMap = toBrandedType<RenderableElementsMap>(new Map());\n\n      for (const element of elements) {\n        if (newElementId === element.id) {\n          continue;\n        }\n\n        // we don't want to render text element that's being currently edited\n        // (it's rendered on remote only)\n        if (\n          !editingTextElement ||\n          editingTextElement.type !== \"text\" ||\n          element.id !== editingTextElement.id\n        ) {\n          elementsMap.set(element.id, element);\n        }\n      }\n      return elementsMap;\n    };\n\n    return memoize(\n      ({\n        zoom,\n        offsetLeft,\n        offsetTop,\n        scrollX,\n        scrollY,\n        height,\n        width,\n        editingTextElement,\n        newElementId,\n        // cache-invalidation nonce\n        sceneNonce: _sceneNonce,\n      }: {\n        zoom: AppState[\"zoom\"];\n        offsetLeft: AppState[\"offsetLeft\"];\n        offsetTop: AppState[\"offsetTop\"];\n        scrollX: AppState[\"scrollX\"];\n        scrollY: AppState[\"scrollY\"];\n        height: AppState[\"height\"];\n        width: AppState[\"width\"];\n        editingTextElement: AppState[\"editingTextElement\"];\n        /** note: first render of newElement will always bust the cache\n         * (we'd have to prefilter elements outside of this function) */\n        newElementId: JsonDrawElement[\"id\"] | undefined;\n        sceneNonce: ReturnType<InstanceType<typeof Scene>[\"getSceneNonce\"]>;\n      }) => {\n        const elements = this.scene.getNonDeletedElements();\n\n        const elementsMap = getRenderableElements({\n          elements,\n          editingTextElement,\n          newElementId,\n        });\n\n        const visibleElements = getVisibleCanvasElements({\n          elementsMap,\n          zoom,\n          offsetLeft,\n          offsetTop,\n          scrollX,\n          scrollY,\n          height,\n          width,\n        });\n\n        return { elementsMap, visibleElements };\n      },\n    );\n  })();\n\n  // NOTE Doesn't destroy everything (scene, rc, etc.) because it may not be\n  // safe to break TS contract here (for upstream cases)\n  public destroy() {\n    renderStaticSceneThrottled.cancel();\n    this.getRenderableElements.clear();\n  }\n}\n","import { getGlobalCSSVariable } from \"@jsondraw/common\";\n\nimport { getCommonBounds } from \"@jsondraw/element\";\n\nimport { getLanguage } from \"../i18n\";\n\nimport type { InteractiveCanvasAppState } from \"../types\";\nimport type { RenderableElementsMap, ScrollBars } from \"./types\";\n\nexport const SCROLLBAR_MARGIN = 4;\nexport const SCROLLBAR_WIDTH = 6;\nexport const SCROLLBAR_COLOR = \"rgba(0,0,0,0.3)\";\n\n// The scrollbar represents where the viewport is in relationship to the scene\nexport const getScrollBars = (\n  elements: RenderableElementsMap,\n  viewportWidth: number,\n  viewportHeight: number,\n  appState: InteractiveCanvasAppState,\n): ScrollBars => {\n  if (!elements.size) {\n    return {\n      horizontal: null,\n      vertical: null,\n    };\n  }\n  // This is the bounding box of all the elements\n  const [elementsMinX, elementsMinY, elementsMaxX, elementsMaxY] =\n    getCommonBounds(elements);\n\n  // Apply zoom\n  const viewportWidthWithZoom = viewportWidth / appState.zoom.value;\n  const viewportHeightWithZoom = viewportHeight / appState.zoom.value;\n\n  const safeArea = {\n    top: parseInt(getGlobalCSSVariable(\"sat\")) || 0,\n    bottom: parseInt(getGlobalCSSVariable(\"sab\")) || 0,\n    left: parseInt(getGlobalCSSVariable(\"sal\")) || 0,\n    right: parseInt(getGlobalCSSVariable(\"sar\")) || 0,\n  };\n\n  const isRTL = getLanguage().rtl;\n\n  // The viewport is the rectangle currently visible for the user\n  const viewportMinX = -appState.scrollX + safeArea.left;\n  const viewportMinY = -appState.scrollY + safeArea.top;\n  const viewportMaxX = viewportMinX + viewportWidthWithZoom - safeArea.right;\n  const viewportMaxY = viewportMinY + viewportHeightWithZoom - safeArea.bottom;\n\n  // The scene is the bounding box of both the elements and viewport\n  const sceneMinX = Math.min(elementsMinX, viewportMinX);\n  const sceneMinY = Math.min(elementsMinY, viewportMinY);\n  const sceneMaxX = Math.max(elementsMaxX, viewportMaxX);\n  const sceneMaxY = Math.max(elementsMaxY, viewportMaxY);\n\n  // the elements-only bbox\n  const sceneWidth = elementsMaxX - elementsMinX;\n  const sceneHeight = elementsMaxY - elementsMinY;\n\n  // scene (elements) bbox + the viewport bbox that extends outside of it\n  const extendedSceneWidth = sceneMaxX - sceneMinX;\n  const extendedSceneHeight = sceneMaxY - sceneMinY;\n\n  const scrollWidthOffset =\n    Math.max(SCROLLBAR_MARGIN * 2, safeArea.left + safeArea.right) +\n    SCROLLBAR_WIDTH * 2;\n\n  const scrollbarWidth =\n    viewportWidth * (viewportWidthWithZoom / extendedSceneWidth) -\n    scrollWidthOffset;\n\n  const scrollbarHeightOffset =\n    Math.max(SCROLLBAR_MARGIN * 2, safeArea.top + safeArea.bottom) +\n    SCROLLBAR_WIDTH * 2;\n\n  const scrollbarHeight =\n    viewportHeight * (viewportHeightWithZoom / extendedSceneHeight) -\n    scrollbarHeightOffset;\n  // NOTE the delta multiplier calculation isn't quite correct when viewport\n  // is extended outside the scene (elements) bbox as there's some small\n  // accumulation error. I'll let this be an exercise for others to fix. ^^\n  const horizontalDeltaMultiplier =\n    extendedSceneWidth > sceneWidth\n      ? (extendedSceneWidth * appState.zoom.value) /\n        (scrollbarWidth + scrollWidthOffset)\n      : viewportWidth / (scrollbarWidth + scrollWidthOffset);\n\n  const verticalDeltaMultiplier =\n    extendedSceneHeight > sceneHeight\n      ? (extendedSceneHeight * appState.zoom.value) /\n        (scrollbarHeight + scrollbarHeightOffset)\n      : viewportHeight / (scrollbarHeight + scrollbarHeightOffset);\n  return {\n    horizontal:\n      viewportMinX === sceneMinX && viewportMaxX === sceneMaxX\n        ? null\n        : {\n            x:\n              Math.max(safeArea.left, SCROLLBAR_MARGIN) +\n              SCROLLBAR_WIDTH +\n              ((viewportMinX - sceneMinX) / extendedSceneWidth) * viewportWidth,\n            y:\n              viewportHeight -\n              SCROLLBAR_WIDTH -\n              Math.max(SCROLLBAR_MARGIN, safeArea.bottom),\n            width: scrollbarWidth,\n            height: SCROLLBAR_WIDTH,\n            deltaMultiplier: horizontalDeltaMultiplier,\n          },\n\n    vertical:\n      viewportMinY === sceneMinY && viewportMaxY === sceneMaxY\n        ? null\n        : {\n            x: isRTL\n              ? Math.max(safeArea.left, SCROLLBAR_MARGIN)\n              : viewportWidth -\n                SCROLLBAR_WIDTH -\n                Math.max(safeArea.right, SCROLLBAR_MARGIN),\n            y:\n              Math.max(safeArea.top, SCROLLBAR_MARGIN) +\n              SCROLLBAR_WIDTH +\n              ((viewportMinY - sceneMinY) / extendedSceneHeight) *\n                viewportHeight,\n            width: SCROLLBAR_WIDTH,\n            height: scrollbarHeight,\n            deltaMultiplier: verticalDeltaMultiplier,\n          },\n  };\n};\n\nexport const isOverScrollBars = (\n  scrollBars: ScrollBars,\n  x: number,\n  y: number,\n): {\n  isOverEither: boolean;\n  isOverHorizontal: boolean;\n  isOverVertical: boolean;\n} => {\n  const [isOverHorizontal, isOverVertical] = [\n    scrollBars.horizontal,\n    scrollBars.vertical,\n  ].map((scrollBar) => {\n    return (\n      scrollBar != null &&\n      scrollBar.x <= x &&\n      x <= scrollBar.x + scrollBar.width &&\n      scrollBar.y <= y &&\n      y <= scrollBar.y + scrollBar.height\n    );\n  });\n  const isOverEither = isOverHorizontal || isOverVertical;\n  return { isOverEither, isOverHorizontal, isOverVertical };\n};\n","import {\n  pointFrom,\n  pointRotateRads,\n  rangeInclusive,\n  rangeIntersection,\n  rangesOverlap,\n  type GlobalPoint,\n} from \"@jsondraw/math\";\n\nimport { TOOL_TYPE, KEYS } from \"@jsondraw/common\";\nimport {\n  getCommonBounds,\n  getDraggedElementsBounds,\n  getElementAbsoluteCoords,\n} from \"@jsondraw/element\";\nimport { isBoundToContainer } from \"@jsondraw/element\";\n\nimport { getMaximumGroups } from \"@jsondraw/element\";\n\nimport {\n  getSelectedElements,\n  getVisibleAndNonSelectedElements,\n} from \"@jsondraw/element\";\n\nimport type { InclusiveRange } from \"@jsondraw/math\";\n\nimport type { Bounds } from \"@jsondraw/common\";\nimport type { MaybeTransformHandleType } from \"@jsondraw/element\";\nimport type {\n  ElementsMap,\n  JsonDrawElement,\n  NonDeletedJsonDrawElement,\n} from \"@jsondraw/element/types\";\n\nimport type {\n  AppClassProperties,\n  AppState,\n  KeyboardModifiersObject,\n} from \"./types\";\n\nconst SNAP_DISTANCE = 8;\n\n// do not comput more gaps per axis than this limit\n// TODO increase or remove once we optimize\nconst VISIBLE_GAPS_LIMIT_PER_AXIS = 99999;\n\n// snap distance with zoom value taken into consideration\nexport const getSnapDistance = (zoomValue: number) => {\n  return SNAP_DISTANCE / zoomValue;\n};\n\ntype Vector2D = {\n  x: number;\n  y: number;\n};\n\ntype PointPair = [GlobalPoint, GlobalPoint];\n\nexport type PointSnap = {\n  type: \"point\";\n  points: PointPair;\n  offset: number;\n};\n\nexport type Gap = {\n  //  start side      length\n  // \n  //            -----------------\n  //   start                               \n  //   element      overlap        end      \n  //                              element  \n  // -----------------           \n  //                               \n  //                                end side\n  startBounds: Bounds;\n  endBounds: Bounds;\n  startSide: [GlobalPoint, GlobalPoint];\n  endSide: [GlobalPoint, GlobalPoint];\n  overlap: InclusiveRange;\n  length: number;\n};\n\nexport type GapSnap = {\n  type: \"gap\";\n  direction:\n    | \"center_horizontal\"\n    | \"center_vertical\"\n    | \"side_left\"\n    | \"side_right\"\n    | \"side_top\"\n    | \"side_bottom\";\n  gap: Gap;\n  offset: number;\n};\n\nexport type GapSnaps = GapSnap[];\n\nexport type Snap = GapSnap | PointSnap;\nexport type Snaps = Snap[];\n\nexport type PointSnapLine = {\n  type: \"points\";\n  points: GlobalPoint[];\n};\n\nexport type PointerSnapLine = {\n  type: \"pointer\";\n  points: PointPair;\n  direction: \"horizontal\" | \"vertical\";\n};\n\nexport type GapSnapLine = {\n  type: \"gap\";\n  direction: \"horizontal\" | \"vertical\";\n  points: PointPair;\n};\n\nexport type SnapLine = PointSnapLine | GapSnapLine | PointerSnapLine;\n\n// -----------------------------------------------------------------------------\n\nexport class SnapCache {\n  private static referenceSnapPoints: GlobalPoint[] | null = null;\n\n  private static visibleGaps: {\n    verticalGaps: Gap[];\n    horizontalGaps: Gap[];\n  } | null = null;\n\n  public static setReferenceSnapPoints = (snapPoints: GlobalPoint[] | null) => {\n    SnapCache.referenceSnapPoints = snapPoints;\n  };\n\n  public static getReferenceSnapPoints = () => {\n    return SnapCache.referenceSnapPoints;\n  };\n\n  public static setVisibleGaps = (\n    gaps: {\n      verticalGaps: Gap[];\n      horizontalGaps: Gap[];\n    } | null,\n  ) => {\n    SnapCache.visibleGaps = gaps;\n  };\n\n  public static getVisibleGaps = () => {\n    return SnapCache.visibleGaps;\n  };\n\n  public static destroy = () => {\n    SnapCache.referenceSnapPoints = null;\n    SnapCache.visibleGaps = null;\n  };\n}\n\n// -----------------------------------------------------------------------------\n\nexport const isGridModeEnabled = (app: AppClassProperties): boolean =>\n  app.props.gridModeEnabled ?? app.state.gridModeEnabled;\n\nexport const isSnappingEnabled = ({\n  event,\n  app,\n  selectedElements,\n}: {\n  app: AppClassProperties;\n  event: KeyboardModifiersObject;\n  selectedElements: NonDeletedJsonDrawElement[];\n}) => {\n  if (event) {\n    // Allow snapping for lasso tool when dragging selected elements\n    // but not during lasso selection phase\n    const isLassoDragging =\n      app.state.activeTool.type === \"lasso\" &&\n      app.state.selectedElementsAreBeingDragged;\n\n    return (\n      (app.state.activeTool.type !== \"lasso\" || isLassoDragging) &&\n      ((app.state.objectsSnapModeEnabled && !event[KEYS.CTRL_OR_CMD]) ||\n        (!app.state.objectsSnapModeEnabled &&\n          event[KEYS.CTRL_OR_CMD] &&\n          !isGridModeEnabled(app)))\n    );\n  }\n\n  // do not suggest snaps for an arrow to give way to binding\n  if (selectedElements.length === 1 && selectedElements[0].type === \"arrow\") {\n    return false;\n  }\n  return app.state.objectsSnapModeEnabled;\n};\n\nexport const areRoughlyEqual = (a: number, b: number, precision = 0.01) => {\n  return Math.abs(a - b) <= precision;\n};\n\nexport const getElementsCorners = (\n  elements: JsonDrawElement[],\n  elementsMap: ElementsMap,\n  {\n    omitCenter,\n    boundingBoxCorners,\n    dragOffset,\n  }: {\n    omitCenter?: boolean;\n    boundingBoxCorners?: boolean;\n    dragOffset?: Vector2D;\n  } = {\n    omitCenter: false,\n    boundingBoxCorners: false,\n  },\n): GlobalPoint[] => {\n  let result: GlobalPoint[] = [];\n\n  if (elements.length === 1) {\n    const element = elements[0];\n\n    let [x1, y1, x2, y2, cx, cy] = getElementAbsoluteCoords(\n      element,\n      elementsMap,\n    );\n\n    if (dragOffset) {\n      x1 += dragOffset.x;\n      x2 += dragOffset.x;\n      cx += dragOffset.x;\n\n      y1 += dragOffset.y;\n      y2 += dragOffset.y;\n      cy += dragOffset.y;\n    }\n\n    const halfWidth = (x2 - x1) / 2;\n    const halfHeight = (y2 - y1) / 2;\n\n    if (\n      (element.type === \"diamond\" || element.type === \"ellipse\") &&\n      !boundingBoxCorners\n    ) {\n      const leftMid = pointRotateRads<GlobalPoint>(\n        pointFrom(x1, y1 + halfHeight),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const topMid = pointRotateRads<GlobalPoint>(\n        pointFrom(x1 + halfWidth, y1),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const rightMid = pointRotateRads<GlobalPoint>(\n        pointFrom(x2, y1 + halfHeight),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const bottomMid = pointRotateRads<GlobalPoint>(\n        pointFrom(x1 + halfWidth, y2),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const center = pointFrom<GlobalPoint>(cx, cy);\n\n      result = omitCenter\n        ? [leftMid, topMid, rightMid, bottomMid]\n        : [leftMid, topMid, rightMid, bottomMid, center];\n    } else {\n      const topLeft = pointRotateRads<GlobalPoint>(\n        pointFrom(x1, y1),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const topRight = pointRotateRads<GlobalPoint>(\n        pointFrom(x2, y1),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const bottomLeft = pointRotateRads<GlobalPoint>(\n        pointFrom(x1, y2),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const bottomRight = pointRotateRads<GlobalPoint>(\n        pointFrom(x2, y2),\n        pointFrom(cx, cy),\n        element.angle,\n      );\n      const center = pointFrom<GlobalPoint>(cx, cy);\n\n      result = omitCenter\n        ? [topLeft, topRight, bottomLeft, bottomRight]\n        : [topLeft, topRight, bottomLeft, bottomRight, center];\n    }\n  } else if (elements.length > 1) {\n    const [minX, minY, maxX, maxY] = getDraggedElementsBounds(\n      elements,\n      dragOffset ?? { x: 0, y: 0 },\n    );\n    const width = maxX - minX;\n    const height = maxY - minY;\n\n    const topLeft = pointFrom<GlobalPoint>(minX, minY);\n    const topRight = pointFrom<GlobalPoint>(maxX, minY);\n    const bottomLeft = pointFrom<GlobalPoint>(minX, maxY);\n    const bottomRight = pointFrom<GlobalPoint>(maxX, maxY);\n    const center = pointFrom<GlobalPoint>(minX + width / 2, minY + height / 2);\n\n    result = omitCenter\n      ? [topLeft, topRight, bottomLeft, bottomRight]\n      : [topLeft, topRight, bottomLeft, bottomRight, center];\n  }\n\n  return result.map((p) => pointFrom(round(p[0]), round(p[1])));\n};\n\nconst getReferenceElements = (\n  elements: readonly NonDeletedJsonDrawElement[],\n  selectedElements: NonDeletedJsonDrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) =>\n  getVisibleAndNonSelectedElements(\n    elements,\n    selectedElements,\n    appState,\n    elementsMap,\n  );\n\nexport const getVisibleGaps = (\n  elements: readonly NonDeletedJsonDrawElement[],\n  selectedElements: JsonDrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const referenceElements: JsonDrawElement[] = getReferenceElements(\n    elements,\n    selectedElements,\n    appState,\n    elementsMap,\n  );\n\n  const referenceBounds = getMaximumGroups(referenceElements, elementsMap)\n    .filter(\n      (elementsGroup) =>\n        !(elementsGroup.length === 1 && isBoundToContainer(elementsGroup[0])),\n    )\n    .map(\n      (group) =>\n        getCommonBounds(group).map((bound) =>\n          round(bound),\n        ) as unknown as Bounds,\n    );\n\n  const horizontallySorted = referenceBounds.sort((a, b) => a[0] - b[0]);\n\n  const horizontalGaps: Gap[] = [];\n\n  let c = 0;\n\n  horizontal: for (let i = 0; i < horizontallySorted.length; i++) {\n    const startBounds = horizontallySorted[i];\n\n    for (let j = i + 1; j < horizontallySorted.length; j++) {\n      if (++c > VISIBLE_GAPS_LIMIT_PER_AXIS) {\n        break horizontal;\n      }\n\n      const endBounds = horizontallySorted[j];\n\n      const [, startMinY, startMaxX, startMaxY] = startBounds;\n      const [endMinX, endMinY, , endMaxY] = endBounds;\n\n      if (\n        startMaxX < endMinX &&\n        rangesOverlap(\n          rangeInclusive(startMinY, startMaxY),\n          rangeInclusive(endMinY, endMaxY),\n        )\n      ) {\n        horizontalGaps.push({\n          startBounds,\n          endBounds,\n          startSide: [\n            pointFrom(startMaxX, startMinY),\n            pointFrom(startMaxX, startMaxY),\n          ],\n          endSide: [pointFrom(endMinX, endMinY), pointFrom(endMinX, endMaxY)],\n          length: endMinX - startMaxX,\n          overlap: rangeIntersection(\n            rangeInclusive(startMinY, startMaxY),\n            rangeInclusive(endMinY, endMaxY),\n          )!,\n        });\n      }\n    }\n  }\n\n  const verticallySorted = referenceBounds.sort((a, b) => a[1] - b[1]);\n\n  const verticalGaps: Gap[] = [];\n\n  c = 0;\n\n  vertical: for (let i = 0; i < verticallySorted.length; i++) {\n    const startBounds = verticallySorted[i];\n\n    for (let j = i + 1; j < verticallySorted.length; j++) {\n      if (++c > VISIBLE_GAPS_LIMIT_PER_AXIS) {\n        break vertical;\n      }\n      const endBounds = verticallySorted[j];\n\n      const [startMinX, , startMaxX, startMaxY] = startBounds;\n      const [endMinX, endMinY, endMaxX] = endBounds;\n\n      if (\n        startMaxY < endMinY &&\n        rangesOverlap(\n          rangeInclusive(startMinX, startMaxX),\n          rangeInclusive(endMinX, endMaxX),\n        )\n      ) {\n        verticalGaps.push({\n          startBounds,\n          endBounds,\n          startSide: [\n            pointFrom(startMinX, startMaxY),\n            pointFrom(startMaxX, startMaxY),\n          ],\n          endSide: [pointFrom(endMinX, endMinY), pointFrom(endMaxX, endMinY)],\n          length: endMinY - startMaxY,\n          overlap: rangeIntersection(\n            rangeInclusive(startMinX, startMaxX),\n            rangeInclusive(endMinX, endMaxX),\n          )!,\n        });\n      }\n    }\n  }\n\n  return {\n    horizontalGaps,\n    verticalGaps,\n  };\n};\n\nconst getGapSnaps = (\n  selectedElements: JsonDrawElement[],\n  dragOffset: Vector2D,\n  app: AppClassProperties,\n  event: KeyboardModifiersObject,\n  nearestSnapsX: Snaps,\n  nearestSnapsY: Snaps,\n  minOffset: Vector2D,\n) => {\n  if (!isSnappingEnabled({ app, event, selectedElements })) {\n    return [];\n  }\n\n  if (selectedElements.length === 0) {\n    return [];\n  }\n\n  const visibleGaps = SnapCache.getVisibleGaps();\n\n  if (visibleGaps) {\n    const { horizontalGaps, verticalGaps } = visibleGaps;\n\n    const [minX, minY, maxX, maxY] = getDraggedElementsBounds(\n      selectedElements,\n      dragOffset,\n    ).map((bound) => round(bound));\n    const centerX = (minX + maxX) / 2;\n    const centerY = (minY + maxY) / 2;\n\n    for (const gap of horizontalGaps) {\n      if (!rangesOverlap(rangeInclusive(minY, maxY), gap.overlap)) {\n        continue;\n      }\n\n      // center gap\n      const gapMidX = gap.startSide[0][0] + gap.length / 2;\n      const centerOffset = round(gapMidX - centerX);\n      const gapIsLargerThanSelection = gap.length > maxX - minX;\n\n      if (gapIsLargerThanSelection && Math.abs(centerOffset) <= minOffset.x) {\n        if (Math.abs(centerOffset) < minOffset.x) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(centerOffset);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"center_horizontal\",\n          gap,\n          offset: centerOffset,\n        };\n\n        nearestSnapsX.push(snap);\n        continue;\n      }\n\n      // side gap, from the right\n      const [, , endMaxX] = gap.endBounds;\n      const distanceToEndElementX = minX - endMaxX;\n      const sideOffsetRight = round(gap.length - distanceToEndElementX);\n\n      if (Math.abs(sideOffsetRight) <= minOffset.x) {\n        if (Math.abs(sideOffsetRight) < minOffset.x) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(sideOffsetRight);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_right\",\n          gap,\n          offset: sideOffsetRight,\n        };\n        nearestSnapsX.push(snap);\n        continue;\n      }\n\n      // side gap, from the left\n      const [startMinX, , ,] = gap.startBounds;\n      const distanceToStartElementX = startMinX - maxX;\n      const sideOffsetLeft = round(distanceToStartElementX - gap.length);\n\n      if (Math.abs(sideOffsetLeft) <= minOffset.x) {\n        if (Math.abs(sideOffsetLeft) < minOffset.x) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(sideOffsetLeft);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_left\",\n          gap,\n          offset: sideOffsetLeft,\n        };\n        nearestSnapsX.push(snap);\n        continue;\n      }\n    }\n    for (const gap of verticalGaps) {\n      if (!rangesOverlap(rangeInclusive(minX, maxX), gap.overlap)) {\n        continue;\n      }\n\n      // center gap\n      const gapMidY = gap.startSide[0][1] + gap.length / 2;\n      const centerOffset = round(gapMidY - centerY);\n      const gapIsLargerThanSelection = gap.length > maxY - minY;\n\n      if (gapIsLargerThanSelection && Math.abs(centerOffset) <= minOffset.y) {\n        if (Math.abs(centerOffset) < minOffset.y) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(centerOffset);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"center_vertical\",\n          gap,\n          offset: centerOffset,\n        };\n\n        nearestSnapsY.push(snap);\n        continue;\n      }\n\n      // side gap, from the top\n      const [, startMinY, ,] = gap.startBounds;\n      const distanceToStartElementY = startMinY - maxY;\n      const sideOffsetTop = round(distanceToStartElementY - gap.length);\n\n      if (Math.abs(sideOffsetTop) <= minOffset.y) {\n        if (Math.abs(sideOffsetTop) < minOffset.y) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(sideOffsetTop);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_top\",\n          gap,\n          offset: sideOffsetTop,\n        };\n        nearestSnapsY.push(snap);\n        continue;\n      }\n\n      // side gap, from the bottom\n      const [, , , endMaxY] = gap.endBounds;\n      const distanceToEndElementY = round(minY - endMaxY);\n      const sideOffsetBottom = gap.length - distanceToEndElementY;\n\n      if (Math.abs(sideOffsetBottom) <= minOffset.y) {\n        if (Math.abs(sideOffsetBottom) < minOffset.y) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(sideOffsetBottom);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_bottom\",\n          gap,\n          offset: sideOffsetBottom,\n        };\n        nearestSnapsY.push(snap);\n        continue;\n      }\n    }\n  }\n};\n\nexport const getReferenceSnapPoints = (\n  elements: readonly NonDeletedJsonDrawElement[],\n  selectedElements: JsonDrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const referenceElements = getReferenceElements(\n    elements,\n    selectedElements,\n    appState,\n    elementsMap,\n  );\n  return getMaximumGroups(referenceElements, elementsMap)\n    .filter(\n      (elementsGroup) =>\n        !(elementsGroup.length === 1 && isBoundToContainer(elementsGroup[0])),\n    )\n    .flatMap((elementGroup) => getElementsCorners(elementGroup, elementsMap));\n};\n\nconst getPointSnaps = (\n  selectedElements: JsonDrawElement[],\n  selectionSnapPoints: GlobalPoint[],\n  app: AppClassProperties,\n  event: KeyboardModifiersObject,\n  nearestSnapsX: Snaps,\n  nearestSnapsY: Snaps,\n  minOffset: Vector2D,\n) => {\n  if (\n    !isSnappingEnabled({ app, event, selectedElements }) ||\n    (selectedElements.length === 0 && selectionSnapPoints.length === 0)\n  ) {\n    return [];\n  }\n\n  const referenceSnapPoints = SnapCache.getReferenceSnapPoints();\n\n  if (referenceSnapPoints) {\n    for (const thisSnapPoint of selectionSnapPoints) {\n      for (const otherSnapPoint of referenceSnapPoints) {\n        const offsetX = otherSnapPoint[0] - thisSnapPoint[0];\n        const offsetY = otherSnapPoint[1] - thisSnapPoint[1];\n\n        if (Math.abs(offsetX) <= minOffset.x) {\n          if (Math.abs(offsetX) < minOffset.x) {\n            nearestSnapsX.length = 0;\n          }\n\n          nearestSnapsX.push({\n            type: \"point\",\n            points: [thisSnapPoint, otherSnapPoint],\n            offset: offsetX,\n          });\n\n          minOffset.x = Math.abs(offsetX);\n        }\n\n        if (Math.abs(offsetY) <= minOffset.y) {\n          if (Math.abs(offsetY) < minOffset.y) {\n            nearestSnapsY.length = 0;\n          }\n\n          nearestSnapsY.push({\n            type: \"point\",\n            points: [thisSnapPoint, otherSnapPoint],\n            offset: offsetY,\n          });\n\n          minOffset.y = Math.abs(offsetY);\n        }\n      }\n    }\n  }\n};\n\nexport const snapDraggedElements = (\n  elements: JsonDrawElement[],\n  dragOffset: Vector2D,\n  app: AppClassProperties,\n  event: KeyboardModifiersObject,\n  elementsMap: ElementsMap,\n) => {\n  const appState = app.state;\n  const selectedElements = getSelectedElements(elements, appState);\n  if (\n    !isSnappingEnabled({ app, event, selectedElements }) ||\n    selectedElements.length === 0\n  ) {\n    return {\n      snapOffset: {\n        x: 0,\n        y: 0,\n      },\n      snapLines: [],\n    };\n  }\n  dragOffset.x = round(dragOffset.x);\n  dragOffset.y = round(dragOffset.y);\n  const nearestSnapsX: Snaps = [];\n  const nearestSnapsY: Snaps = [];\n  const snapDistance = getSnapDistance(appState.zoom.value);\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const selectionPoints = getElementsCorners(selectedElements, elementsMap, {\n    dragOffset,\n  });\n\n  // get the nearest horizontal and vertical point and gap snaps\n  getPointSnaps(\n    selectedElements,\n    selectionPoints,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  getGapSnaps(\n    selectedElements,\n    dragOffset,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  // using the nearest snaps to figure out how\n  // much the elements need to be offset to be snapped\n  // to some reference elements\n  const snapOffset = {\n    x: nearestSnapsX[0]?.offset ?? 0,\n    y: nearestSnapsY[0]?.offset ?? 0,\n  };\n\n  // once the elements are snapped\n  // and moved to the snapped position\n  // we want to use the element's snapped position\n  // to update nearest snaps so that we can create\n  // point and gap snap lines correctly without any shifting\n\n  minOffset.x = 0;\n  minOffset.y = 0;\n  nearestSnapsX.length = 0;\n  nearestSnapsY.length = 0;\n  const newDragOffset = {\n    x: round(dragOffset.x + snapOffset.x),\n    y: round(dragOffset.y + snapOffset.y),\n  };\n\n  getPointSnaps(\n    selectedElements,\n    getElementsCorners(selectedElements, elementsMap, {\n      dragOffset: newDragOffset,\n    }),\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  getGapSnaps(\n    selectedElements,\n    newDragOffset,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const pointSnapLines = createPointSnapLines(nearestSnapsX, nearestSnapsY);\n\n  const gapSnapLines = createGapSnapLines(\n    selectedElements,\n    newDragOffset,\n    [...nearestSnapsX, ...nearestSnapsY].filter(\n      (snap) => snap.type === \"gap\",\n    ) as GapSnap[],\n  );\n\n  return {\n    snapOffset,\n    snapLines: [...pointSnapLines, ...gapSnapLines],\n  };\n};\n\nconst round = (x: number) => {\n  const decimalPlaces = 6;\n  return Math.round(x * 10 ** decimalPlaces) / 10 ** decimalPlaces;\n};\n\nconst dedupePoints = (points: GlobalPoint[]): GlobalPoint[] => {\n  const map = new Map<string, GlobalPoint>();\n\n  for (const point of points) {\n    const key = point.join(\",\");\n\n    if (!map.has(key)) {\n      map.set(key, point);\n    }\n  }\n\n  return Array.from(map.values());\n};\n\nconst createPointSnapLines = (\n  nearestSnapsX: Snaps,\n  nearestSnapsY: Snaps,\n): PointSnapLine[] => {\n  const snapsX = {} as { [key: string]: GlobalPoint[] };\n  const snapsY = {} as { [key: string]: GlobalPoint[] };\n\n  if (nearestSnapsX.length > 0) {\n    for (const snap of nearestSnapsX) {\n      if (snap.type === \"point\") {\n        // key = thisPoint.x\n        const key = round(snap.points[0][0]);\n        if (!snapsX[key]) {\n          snapsX[key] = [];\n        }\n        snapsX[key].push(\n          ...snap.points.map((p) =>\n            pointFrom<GlobalPoint>(round(p[0]), round(p[1])),\n          ),\n        );\n      }\n    }\n  }\n\n  if (nearestSnapsY.length > 0) {\n    for (const snap of nearestSnapsY) {\n      if (snap.type === \"point\") {\n        // key = thisPoint.y\n        const key = round(snap.points[0][1]);\n        if (!snapsY[key]) {\n          snapsY[key] = [];\n        }\n        snapsY[key].push(\n          ...snap.points.map((p) =>\n            pointFrom<GlobalPoint>(round(p[0]), round(p[1])),\n          ),\n        );\n      }\n    }\n  }\n\n  return Object.entries(snapsX)\n    .map(([key, points]) => {\n      return {\n        type: \"points\",\n        points: dedupePoints(\n          points\n            .map((p) => {\n              return pointFrom<GlobalPoint>(Number(key), p[1]);\n            })\n            .sort((a, b) => a[1] - b[1]),\n        ),\n      } as PointSnapLine;\n    })\n    .concat(\n      Object.entries(snapsY).map(([key, points]) => {\n        return {\n          type: \"points\",\n          points: dedupePoints(\n            points\n              .map((p) => {\n                return pointFrom<GlobalPoint>(p[0], Number(key));\n              })\n              .sort((a, b) => a[0] - b[0]),\n          ),\n        } as PointSnapLine;\n      }),\n    );\n};\n\nconst dedupeGapSnapLines = (gapSnapLines: GapSnapLine[]) => {\n  const map = new Map<string, GapSnapLine>();\n\n  for (const gapSnapLine of gapSnapLines) {\n    const key = gapSnapLine.points\n      .flat()\n      .map((point) => [round(point)])\n      .join(\",\");\n\n    if (!map.has(key)) {\n      map.set(key, gapSnapLine);\n    }\n  }\n\n  return Array.from(map.values());\n};\n\nconst createGapSnapLines = (\n  selectedElements: JsonDrawElement[],\n  dragOffset: Vector2D,\n  gapSnaps: GapSnap[],\n): GapSnapLine[] => {\n  const [minX, minY, maxX, maxY] = getDraggedElementsBounds(\n    selectedElements,\n    dragOffset,\n  );\n\n  const gapSnapLines: GapSnapLine[] = [];\n\n  for (const gapSnap of gapSnaps) {\n    const [startMinX, startMinY, startMaxX, startMaxY] =\n      gapSnap.gap.startBounds;\n    const [endMinX, endMinY, endMaxX, endMaxY] = gapSnap.gap.endBounds;\n\n    const verticalIntersection = rangeIntersection(\n      rangeInclusive(minY, maxY),\n      gapSnap.gap.overlap,\n    );\n\n    const horizontalGapIntersection = rangeIntersection(\n      rangeInclusive(minX, maxX),\n      gapSnap.gap.overlap,\n    );\n\n    switch (gapSnap.direction) {\n      case \"center_horizontal\": {\n        if (verticalIntersection) {\n          const gapLineY =\n            (verticalIntersection[0] + verticalIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                pointFrom(gapSnap.gap.startSide[0][0], gapLineY),\n                pointFrom(minX, gapLineY),\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                pointFrom(maxX, gapLineY),\n                pointFrom(gapSnap.gap.endSide[0][0], gapLineY),\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"center_vertical\": {\n        if (horizontalGapIntersection) {\n          const gapLineX =\n            (horizontalGapIntersection[0] + horizontalGapIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                pointFrom(gapLineX, gapSnap.gap.startSide[0][1]),\n                pointFrom(gapLineX, minY),\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                pointFrom(gapLineX, maxY),\n                pointFrom(gapLineX, gapSnap.gap.endSide[0][1]),\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_right\": {\n        if (verticalIntersection) {\n          const gapLineY =\n            (verticalIntersection[0] + verticalIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                pointFrom(startMaxX, gapLineY),\n                pointFrom(endMinX, gapLineY),\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [pointFrom(endMaxX, gapLineY), pointFrom(minX, gapLineY)],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_left\": {\n        if (verticalIntersection) {\n          const gapLineY =\n            (verticalIntersection[0] + verticalIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                pointFrom(maxX, gapLineY),\n                pointFrom(startMinX, gapLineY),\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                pointFrom(startMaxX, gapLineY),\n                pointFrom(endMinX, gapLineY),\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_top\": {\n        if (horizontalGapIntersection) {\n          const gapLineX =\n            (horizontalGapIntersection[0] + horizontalGapIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                pointFrom(gapLineX, maxY),\n                pointFrom(gapLineX, startMinY),\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                pointFrom(gapLineX, startMaxY),\n                pointFrom(gapLineX, endMinY),\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_bottom\": {\n        if (horizontalGapIntersection) {\n          const gapLineX =\n            (horizontalGapIntersection[0] + horizontalGapIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                pointFrom(gapLineX, startMaxY),\n                pointFrom(gapLineX, endMinY),\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [pointFrom(gapLineX, endMaxY), pointFrom(gapLineX, minY)],\n            },\n          );\n        }\n        break;\n      }\n    }\n  }\n\n  return dedupeGapSnapLines(\n    gapSnapLines.map((gapSnapLine) => {\n      return {\n        ...gapSnapLine,\n        points: gapSnapLine.points.map((p) =>\n          pointFrom(round(p[0]), round(p[1])),\n        ) as PointPair,\n      };\n    }),\n  );\n};\n\nexport const snapResizingElements = (\n  // use the latest elements to create snap lines\n  selectedElements: JsonDrawElement[],\n  // while using the original elements to appy dragOffset to calculate snaps\n  selectedOriginalElements: JsonDrawElement[],\n  app: AppClassProperties,\n  event: KeyboardModifiersObject,\n  dragOffset: Vector2D,\n  transformHandle: MaybeTransformHandleType,\n) => {\n  if (\n    !isSnappingEnabled({ event, selectedElements, app }) ||\n    selectedElements.length === 0 ||\n    (selectedElements.length === 1 &&\n      !areRoughlyEqual(selectedElements[0].angle, 0))\n  ) {\n    return {\n      snapOffset: { x: 0, y: 0 },\n      snapLines: [],\n    };\n  }\n\n  let [minX, minY, maxX, maxY] = getCommonBounds(selectedOriginalElements);\n\n  if (transformHandle) {\n    if (transformHandle.includes(\"e\")) {\n      maxX += dragOffset.x;\n    } else if (transformHandle.includes(\"w\")) {\n      minX += dragOffset.x;\n    }\n\n    if (transformHandle.includes(\"n\")) {\n      minY += dragOffset.y;\n    } else if (transformHandle.includes(\"s\")) {\n      maxY += dragOffset.y;\n    }\n  }\n\n  const selectionSnapPoints: GlobalPoint[] = [];\n\n  if (transformHandle) {\n    switch (transformHandle) {\n      case \"e\": {\n        selectionSnapPoints.push(pointFrom(maxX, minY), pointFrom(maxX, maxY));\n        break;\n      }\n      case \"w\": {\n        selectionSnapPoints.push(pointFrom(minX, minY), pointFrom(minX, maxY));\n        break;\n      }\n      case \"n\": {\n        selectionSnapPoints.push(pointFrom(minX, minY), pointFrom(maxX, minY));\n        break;\n      }\n      case \"s\": {\n        selectionSnapPoints.push(pointFrom(minX, maxY), pointFrom(maxX, maxY));\n        break;\n      }\n      case \"ne\": {\n        selectionSnapPoints.push(pointFrom(maxX, minY));\n        break;\n      }\n      case \"nw\": {\n        selectionSnapPoints.push(pointFrom(minX, minY));\n        break;\n      }\n      case \"se\": {\n        selectionSnapPoints.push(pointFrom(maxX, maxY));\n        break;\n      }\n      case \"sw\": {\n        selectionSnapPoints.push(pointFrom(minX, maxY));\n        break;\n      }\n    }\n  }\n\n  const snapDistance = getSnapDistance(app.state.zoom.value);\n\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const nearestSnapsX: Snaps = [];\n  const nearestSnapsY: Snaps = [];\n\n  getPointSnaps(\n    selectedOriginalElements,\n    selectionSnapPoints,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const snapOffset = {\n    x: nearestSnapsX[0]?.offset ?? 0,\n    y: nearestSnapsY[0]?.offset ?? 0,\n  };\n\n  // again, once snap offset is calculated\n  // reset to recompute for creating snap lines to be rendered\n  minOffset.x = 0;\n  minOffset.y = 0;\n  nearestSnapsX.length = 0;\n  nearestSnapsY.length = 0;\n\n  const [x1, y1, x2, y2] = getCommonBounds(selectedElements).map((bound) =>\n    round(bound),\n  );\n\n  const corners: GlobalPoint[] = [\n    pointFrom(x1, y1),\n    pointFrom(x1, y2),\n    pointFrom(x2, y1),\n    pointFrom(x2, y2),\n  ];\n\n  getPointSnaps(\n    selectedElements,\n    corners,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const pointSnapLines = createPointSnapLines(nearestSnapsX, nearestSnapsY);\n\n  return {\n    snapOffset,\n    snapLines: pointSnapLines,\n  };\n};\n\nexport const snapNewElement = (\n  newElement: JsonDrawElement,\n  app: AppClassProperties,\n  event: KeyboardModifiersObject,\n  origin: Vector2D,\n  dragOffset: Vector2D,\n  elementsMap: ElementsMap,\n) => {\n  if (!isSnappingEnabled({ event, selectedElements: [newElement], app })) {\n    return {\n      snapOffset: { x: 0, y: 0 },\n      snapLines: [],\n    };\n  }\n\n  const selectionSnapPoints: GlobalPoint[] = [\n    pointFrom(origin.x + dragOffset.x, origin.y + dragOffset.y),\n  ];\n\n  const snapDistance = getSnapDistance(app.state.zoom.value);\n\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const nearestSnapsX: Snaps = [];\n  const nearestSnapsY: Snaps = [];\n\n  getPointSnaps(\n    [newElement],\n    selectionSnapPoints,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const snapOffset = {\n    x: nearestSnapsX[0]?.offset ?? 0,\n    y: nearestSnapsY[0]?.offset ?? 0,\n  };\n\n  minOffset.x = 0;\n  minOffset.y = 0;\n  nearestSnapsX.length = 0;\n  nearestSnapsY.length = 0;\n\n  const corners = getElementsCorners([newElement], elementsMap, {\n    boundingBoxCorners: true,\n    omitCenter: true,\n  });\n\n  getPointSnaps(\n    [newElement],\n    corners,\n    app,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const pointSnapLines = createPointSnapLines(nearestSnapsX, nearestSnapsY);\n\n  return {\n    snapOffset,\n    snapLines: pointSnapLines,\n  };\n};\n\nexport const getSnapLinesAtPointer = (\n  elements: readonly JsonDrawElement[],\n  app: AppClassProperties,\n  pointer: Vector2D,\n  event: KeyboardModifiersObject,\n  elementsMap: ElementsMap,\n) => {\n  if (!isSnappingEnabled({ event, selectedElements: [], app })) {\n    return {\n      originOffset: { x: 0, y: 0 },\n      snapLines: [],\n    };\n  }\n\n  const referenceElements = getVisibleAndNonSelectedElements(\n    elements,\n    [],\n    app.state,\n    elementsMap,\n  );\n\n  const snapDistance = getSnapDistance(app.state.zoom.value);\n\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const horizontalSnapLines: PointerSnapLine[] = [];\n  const verticalSnapLines: PointerSnapLine[] = [];\n\n  for (const referenceElement of referenceElements) {\n    const corners = getElementsCorners([referenceElement], elementsMap);\n\n    for (const corner of corners) {\n      const offsetX = corner[0] - pointer.x;\n\n      if (Math.abs(offsetX) <= Math.abs(minOffset.x)) {\n        if (Math.abs(offsetX) < Math.abs(minOffset.x)) {\n          verticalSnapLines.length = 0;\n        }\n\n        verticalSnapLines.push({\n          type: \"pointer\",\n          points: [corner, pointFrom(corner[0], pointer.y)],\n          direction: \"vertical\",\n        });\n\n        minOffset.x = offsetX;\n      }\n\n      const offsetY = corner[1] - pointer.y;\n\n      if (Math.abs(offsetY) <= Math.abs(minOffset.y)) {\n        if (Math.abs(offsetY) < Math.abs(minOffset.y)) {\n          horizontalSnapLines.length = 0;\n        }\n\n        horizontalSnapLines.push({\n          type: \"pointer\",\n          points: [corner, pointFrom(pointer.x, corner[1])],\n          direction: \"horizontal\",\n        });\n\n        minOffset.y = offsetY;\n      }\n    }\n  }\n\n  return {\n    originOffset: {\n      x:\n        verticalSnapLines.length > 0\n          ? verticalSnapLines[0].points[0][0] - pointer.x\n          : 0,\n      y:\n        horizontalSnapLines.length > 0\n          ? horizontalSnapLines[0].points[0][1] - pointer.y\n          : 0,\n    },\n    snapLines: [...verticalSnapLines, ...horizontalSnapLines],\n  };\n};\n\nexport const isActiveToolNonLinearSnappable = (\n  activeToolType: AppState[\"activeTool\"][\"type\"],\n) => {\n  return (\n    activeToolType === TOOL_TYPE.rectangle ||\n    activeToolType === TOOL_TYPE.ellipse ||\n    activeToolType === TOOL_TYPE.diamond ||\n    activeToolType === TOOL_TYPE.frame ||\n    activeToolType === TOOL_TYPE.magicframe ||\n    activeToolType === TOOL_TYPE.image ||\n    activeToolType === TOOL_TYPE.text\n  );\n};\n","import {\n  CODES,\n  KEYS,\n  CLASSES,\n  POINTER_BUTTON,\n  THEME,\n  isWritableElement,\n  getFontString,\n  getFontFamilyString,\n  isTestEnv,\n  MIME_TYPES,\n  applyDarkModeFilter,\n} from \"@jsondraw/common\";\n\nimport {\n  getTextFromElements,\n  originalContainerCache,\n  updateBoundElements,\n  updateOriginalContainerCache,\n} from \"@jsondraw/element\";\n\nimport { LinearElementEditor } from \"@jsondraw/element\";\nimport { bumpVersion } from \"@jsondraw/element\";\nimport {\n  getBoundTextElementId,\n  getContainerElement,\n  getTextElementAngle,\n  redrawTextBoundingBox,\n  getBoundTextMaxHeight,\n  getBoundTextMaxWidth,\n  computeContainerDimensionForBoundText,\n  computeBoundTextPosition,\n  getBoundTextElement,\n} from \"@jsondraw/element\";\nimport { getTextWidth } from \"@jsondraw/element\";\nimport { normalizeText } from \"@jsondraw/element\";\nimport { wrapText } from \"@jsondraw/element\";\nimport {\n  isArrowElement,\n  isBoundToContainer,\n  isTextElement,\n} from \"@jsondraw/element\";\n\nimport type {\n  JsonDrawElement,\n  JsonDrawLinearElement,\n  JsonDrawTextElementWithContainer,\n  JsonDrawTextElement,\n} from \"@jsondraw/element/types\";\n\nimport { actionSaveToActiveFile } from \"../actions\";\n\nimport {\n  parseClipboard,\n  parseDataTransferEvent,\n  parseDataTransferEventMimeTypes,\n} from \"../clipboard\";\nimport {\n  actionDecreaseFontSize,\n  actionIncreaseFontSize,\n} from \"../actions/actionProperties\";\nimport {\n  actionResetZoom,\n  actionZoomIn,\n  actionZoomOut,\n} from \"../actions/actionCanvas\";\n\nimport type { ParsedDataTranferList } from \"../clipboard\";\n\nimport type App from \"../components/App\";\nimport type { AppState } from \"../types\";\n\nconst getTransform = (\n  width: number,\n  height: number,\n  angle: number,\n  appState: AppState,\n  maxWidth: number,\n  maxHeight: number,\n) => {\n  const { zoom } = appState;\n  const degree = (180 * angle) / Math.PI;\n  let translateX = (width * (zoom.value - 1)) / 2;\n  let translateY = (height * (zoom.value - 1)) / 2;\n  if (width > maxWidth && zoom.value !== 1) {\n    translateX = (maxWidth * (zoom.value - 1)) / 2;\n  }\n  if (height > maxHeight && zoom.value !== 1) {\n    translateY = (maxHeight * (zoom.value - 1)) / 2;\n  }\n  return `translate(${translateX}px, ${translateY}px) scale(${zoom.value}) rotate(${degree}deg)`;\n};\n\ntype SubmitHandler = () => void;\n\nexport const textWysiwyg = ({\n  id,\n  onChange,\n  onSubmit,\n  getViewportCoords,\n  element,\n  canvas,\n  jsondrawContainer,\n  app,\n  autoSelect = true,\n}: {\n  id: JsonDrawElement[\"id\"];\n  /**\n   * textWysiwyg only deals with `originalText`\n   *\n   * Note: `text`, which can be wrapped and therefore different from `originalText`,\n   *       is derived from `originalText`\n   */\n  onChange?: (nextOriginalText: string) => void;\n  onSubmit: (data: { viaKeyboard: boolean; nextOriginalText: string }) => void;\n  getViewportCoords: (x: number, y: number) => [number, number];\n  element: JsonDrawTextElement;\n  canvas: HTMLCanvasElement;\n  jsondrawContainer: HTMLDivElement | null;\n  app: App;\n  autoSelect?: boolean;\n}): SubmitHandler => {\n  const textPropertiesUpdated = (\n    updatedTextElement: JsonDrawTextElement,\n    editable: HTMLTextAreaElement,\n  ) => {\n    if (!editable.style.fontFamily || !editable.style.fontSize) {\n      return false;\n    }\n    const currentFont = editable.style.fontFamily.replace(/\"/g, \"\");\n    if (\n      getFontFamilyString({ fontFamily: updatedTextElement.fontFamily }) !==\n      currentFont\n    ) {\n      return true;\n    }\n    if (`${updatedTextElement.fontSize}px` !== editable.style.fontSize) {\n      return true;\n    }\n    return false;\n  };\n\n  let LAST_THEME = app.state.theme;\n\n  const updateWysiwygStyle = () => {\n    LAST_THEME = app.state.theme;\n\n    const appState = app.state;\n    const updatedTextElement = app.scene.getElement<JsonDrawTextElement>(id);\n\n    if (!updatedTextElement) {\n      return;\n    }\n    const { textAlign, verticalAlign } = updatedTextElement;\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    if (updatedTextElement && isTextElement(updatedTextElement)) {\n      let coordX = updatedTextElement.x;\n      let coordY = updatedTextElement.y;\n      const container = getContainerElement(\n        updatedTextElement,\n        app.scene.getNonDeletedElementsMap(),\n      );\n\n      let width = updatedTextElement.width;\n\n      // set to element height by default since that's\n      // what is going to be used for unbounded text\n      let height = updatedTextElement.height;\n\n      let maxWidth = updatedTextElement.width;\n      let maxHeight = updatedTextElement.height;\n\n      if (container && updatedTextElement.containerId) {\n        if (isArrowElement(container)) {\n          const boundTextCoords =\n            LinearElementEditor.getBoundTextElementPosition(\n              container,\n              updatedTextElement as JsonDrawTextElementWithContainer,\n              elementsMap,\n            );\n          coordX = boundTextCoords.x;\n          coordY = boundTextCoords.y;\n        }\n        const propertiesUpdated = textPropertiesUpdated(\n          updatedTextElement,\n          editable,\n        );\n\n        let originalContainerData;\n        if (propertiesUpdated) {\n          originalContainerData = updateOriginalContainerCache(\n            container.id,\n            container.height,\n          );\n        } else {\n          originalContainerData = originalContainerCache[container.id];\n          if (!originalContainerData) {\n            originalContainerData = updateOriginalContainerCache(\n              container.id,\n              container.height,\n            );\n          }\n        }\n\n        maxWidth = getBoundTextMaxWidth(container, updatedTextElement);\n        maxHeight = getBoundTextMaxHeight(\n          container,\n          updatedTextElement as JsonDrawTextElementWithContainer,\n        );\n\n        // autogrow container height if text exceeds\n        if (!isArrowElement(container) && height > maxHeight) {\n          const targetContainerHeight = computeContainerDimensionForBoundText(\n            height,\n            container.type,\n          );\n\n          app.scene.mutateElement(container, { height: targetContainerHeight });\n          updateBoundElements(container, app.scene);\n          return;\n        } else if (\n          // autoshrink container height until original container height\n          // is reached when text is removed\n          !isArrowElement(container) &&\n          container.height > originalContainerData.height &&\n          height < maxHeight\n        ) {\n          const targetContainerHeight = computeContainerDimensionForBoundText(\n            height,\n            container.type,\n          );\n          app.scene.mutateElement(container, { height: targetContainerHeight });\n          updateBoundElements(container, app.scene);\n        } else {\n          const { x, y } = computeBoundTextPosition(\n            container,\n            updatedTextElement as JsonDrawTextElementWithContainer,\n            elementsMap,\n          );\n          coordX = x;\n          coordY = y;\n        }\n      }\n      const [viewportX, viewportY] = getViewportCoords(coordX, coordY);\n\n      if (!container) {\n        maxWidth = (appState.width - 8 - viewportX) / appState.zoom.value;\n        width = Math.min(width, maxWidth);\n      } else {\n        width += 0.5;\n      }\n\n      // add 5% buffer otherwise it causes wysiwyg to jump\n      height *= 1.05;\n\n      const font = getFontString(updatedTextElement);\n\n      // Make sure text editor height doesn't go beyond viewport\n      const editorMaxHeight =\n        (appState.height - viewportY) / appState.zoom.value;\n      Object.assign(editable.style, {\n        font,\n        // must be defined *after* font \\_()_/\n        lineHeight: updatedTextElement.lineHeight,\n        width: `${width}px`,\n        height: `${height}px`,\n        left: `${viewportX}px`,\n        top: `${viewportY}px`,\n        transform: getTransform(\n          width,\n          height,\n          getTextElementAngle(updatedTextElement, container),\n          appState,\n          maxWidth,\n          editorMaxHeight,\n        ),\n        textAlign,\n        verticalAlign,\n        color:\n          appState.theme === THEME.DARK\n            ? applyDarkModeFilter(updatedTextElement.strokeColor)\n            : updatedTextElement.strokeColor,\n        opacity: updatedTextElement.opacity / 100,\n        maxHeight: `${editorMaxHeight}px`,\n      });\n      editable.scrollTop = 0;\n      // For some reason updating font attribute doesn't set font family\n      // hence updating font family explicitly for test environment\n      if (isTestEnv()) {\n        editable.style.fontFamily = getFontFamilyString(updatedTextElement);\n      }\n\n      app.scene.mutateElement(updatedTextElement, { x: coordX, y: coordY });\n    }\n  };\n\n  const editable = document.createElement(\"textarea\");\n\n  editable.dir = \"auto\";\n  editable.tabIndex = 0;\n  editable.dataset.type = \"wysiwyg\";\n  // prevent line wrapping on Safari\n  editable.wrap = \"off\";\n  editable.classList.add(\"jsondraw-wysiwyg\");\n\n  let whiteSpace = \"pre\";\n  let wordBreak = \"normal\";\n\n  if (isBoundToContainer(element) || !element.autoResize) {\n    whiteSpace = \"pre-wrap\";\n    wordBreak = \"break-word\";\n  }\n  Object.assign(editable.style, {\n    position: \"absolute\",\n    display: \"inline-block\",\n    minHeight: \"1em\",\n    backfaceVisibility: \"hidden\",\n    margin: 0,\n    padding: 0,\n    border: 0,\n    outline: 0,\n    resize: \"none\",\n    background: \"transparent\",\n    overflow: \"hidden\",\n    // must be specified because in dark mode canvas creates a stacking context\n    zIndex: \"var(--zIndex-wysiwyg)\",\n    wordBreak,\n    // prevent line wrapping (`whitespace: nowrap` doesn't work on FF)\n    whiteSpace,\n    overflowWrap: \"break-word\",\n    boxSizing: \"content-box\",\n  });\n  editable.value = element.originalText;\n  updateWysiwygStyle();\n\n  if (onChange) {\n    editable.onpaste = async (event) => {\n      // we need to synchronously get the MIME types so we can preventDefault()\n      // in the same tick (FF requires that)\n      const mimeTypes = parseDataTransferEventMimeTypes(event);\n\n      let dataList: ParsedDataTranferList | null = null;\n\n      // when copy/pasting jsondraw elements, only paste the text content\n      //\n      // Note that these custom MIME types only work within the same family\n      // of browsers, so won't work e.g. between chrome and firefox. We could\n      // parse the text/plain for existence of jsondraw instead, but this\n      // is an edge case\n      if (\n        mimeTypes.has(MIME_TYPES.jsondrawClipboard) ||\n        mimeTypes.has(MIME_TYPES.jsondraw)\n      ) {\n        // must be called in the same tick\n        event.preventDefault();\n\n        dataList = await parseDataTransferEvent(event);\n\n        try {\n          const parsed = await parseClipboard(dataList);\n\n          if (parsed.elements) {\n            const text = getTextFromElements(parsed.elements);\n            if (text) {\n              const { selectionStart, selectionEnd, value } = editable;\n\n              editable.value =\n                value.slice(0, selectionStart) +\n                text +\n                value.slice(selectionEnd);\n\n              const newPos = selectionStart + text.length;\n              editable.selectionStart = editable.selectionEnd = newPos;\n\n              editable.dispatchEvent(new Event(\"input\"));\n            }\n          }\n\n          // if jsondraw elements don't contain any text elements,\n          // don't paste anything\n          return;\n        } catch {\n          console.warn(\"failed to parse jsondraw clipboard data\");\n        }\n      }\n\n      dataList = dataList || (await parseDataTransferEvent(event));\n\n      const textItem = dataList.findByType(MIME_TYPES.text);\n      if (!textItem) {\n        return;\n      }\n      const text = normalizeText(textItem.value);\n      if (!text) {\n        return;\n      }\n      const container = getContainerElement(\n        element,\n        app.scene.getNonDeletedElementsMap(),\n      );\n\n      const font = getFontString({\n        fontSize: app.state.currentItemFontSize,\n        fontFamily: app.state.currentItemFontFamily,\n      });\n      if (container) {\n        const boundTextElement = getBoundTextElement(\n          container,\n          app.scene.getNonDeletedElementsMap(),\n        );\n        const wrappedText = wrapText(\n          `${editable.value}${text}`,\n          font,\n          getBoundTextMaxWidth(container, boundTextElement),\n        );\n        const width = getTextWidth(wrappedText, font);\n        editable.style.width = `${width}px`;\n      }\n    };\n\n    editable.oninput = () => {\n      const normalized = normalizeText(editable.value);\n      if (editable.value !== normalized) {\n        const selectionStart = editable.selectionStart;\n        editable.value = normalized;\n        // put the cursor at some position close to where it was before\n        // normalization (otherwise it'll end up at the end of the text)\n        editable.selectionStart = selectionStart;\n        editable.selectionEnd = selectionStart;\n      }\n      onChange(editable.value);\n    };\n  }\n\n  editable.onkeydown = (event) => {\n    if (!event.shiftKey && actionZoomIn.keyTest(event)) {\n      event.preventDefault();\n      app.actionManager.executeAction(actionZoomIn);\n      updateWysiwygStyle();\n    } else if (!event.shiftKey && actionZoomOut.keyTest(event)) {\n      event.preventDefault();\n      app.actionManager.executeAction(actionZoomOut);\n      updateWysiwygStyle();\n    } else if (!event.shiftKey && actionResetZoom.keyTest(event)) {\n      event.preventDefault();\n      app.actionManager.executeAction(actionResetZoom);\n      updateWysiwygStyle();\n    } else if (actionDecreaseFontSize.keyTest(event)) {\n      app.actionManager.executeAction(actionDecreaseFontSize);\n    } else if (actionIncreaseFontSize.keyTest(event)) {\n      app.actionManager.executeAction(actionIncreaseFontSize);\n    } else if (event.key === KEYS.ESCAPE) {\n      event.preventDefault();\n      submittedViaKeyboard = true;\n      handleSubmit();\n    } else if (actionSaveToActiveFile.keyTest(event)) {\n      event.preventDefault();\n      handleSubmit();\n      app.actionManager.executeAction(actionSaveToActiveFile);\n    } else if (event.key === KEYS.ENTER && event[KEYS.CTRL_OR_CMD]) {\n      event.preventDefault();\n      if (event.isComposing || event.keyCode === 229) {\n        return;\n      }\n      submittedViaKeyboard = true;\n      handleSubmit();\n    } else if (\n      event.key === KEYS.TAB ||\n      (event[KEYS.CTRL_OR_CMD] &&\n        (event.code === CODES.BRACKET_LEFT ||\n          event.code === CODES.BRACKET_RIGHT))\n    ) {\n      event.preventDefault();\n      if (event.isComposing) {\n        return;\n      } else if (event.shiftKey || event.code === CODES.BRACKET_LEFT) {\n        outdent();\n      } else {\n        indent();\n      }\n      // We must send an input event to resize the element\n      editable.dispatchEvent(new Event(\"input\"));\n    }\n  };\n\n  const TAB_SIZE = 4;\n  const TAB = \" \".repeat(TAB_SIZE);\n  const RE_LEADING_TAB = new RegExp(`^ {1,${TAB_SIZE}}`);\n  const indent = () => {\n    const { selectionStart, selectionEnd } = editable;\n    const linesStartIndices = getSelectedLinesStartIndices();\n\n    let value = editable.value;\n    linesStartIndices.forEach((startIndex: number) => {\n      const startValue = value.slice(0, startIndex);\n      const endValue = value.slice(startIndex);\n\n      value = `${startValue}${TAB}${endValue}`;\n    });\n\n    editable.value = value;\n\n    editable.selectionStart = selectionStart + TAB_SIZE;\n    editable.selectionEnd = selectionEnd + TAB_SIZE * linesStartIndices.length;\n  };\n\n  const outdent = () => {\n    const { selectionStart, selectionEnd } = editable;\n    const linesStartIndices = getSelectedLinesStartIndices();\n    const removedTabs: number[] = [];\n\n    let value = editable.value;\n    linesStartIndices.forEach((startIndex) => {\n      const tabMatch = value\n        .slice(startIndex, startIndex + TAB_SIZE)\n        .match(RE_LEADING_TAB);\n\n      if (tabMatch) {\n        const startValue = value.slice(0, startIndex);\n        const endValue = value.slice(startIndex + tabMatch[0].length);\n\n        // Delete a tab from the line\n        value = `${startValue}${endValue}`;\n        removedTabs.push(startIndex);\n      }\n    });\n\n    editable.value = value;\n\n    if (removedTabs.length) {\n      if (selectionStart > removedTabs[removedTabs.length - 1]) {\n        editable.selectionStart = Math.max(\n          selectionStart - TAB_SIZE,\n          removedTabs[removedTabs.length - 1],\n        );\n      } else {\n        // If the cursor is before the first tab removed, ex:\n        // Line| #1\n        //     Line #2\n        // Lin|e #3\n        // we should reset the selectionStart to his initial value.\n        editable.selectionStart = selectionStart;\n      }\n      editable.selectionEnd = Math.max(\n        editable.selectionStart,\n        selectionEnd - TAB_SIZE * removedTabs.length,\n      );\n    }\n  };\n\n  /**\n   * @returns indices of start positions of selected lines, in reverse order\n   */\n  const getSelectedLinesStartIndices = () => {\n    let { selectionStart, selectionEnd, value } = editable;\n\n    // chars before selectionStart on the same line\n    const startOffset = value.slice(0, selectionStart).match(/[^\\n]*$/)![0]\n      .length;\n    // put caret at the start of the line\n    selectionStart = selectionStart - startOffset;\n\n    const selected = value.slice(selectionStart, selectionEnd);\n\n    return selected\n      .split(\"\\n\")\n      .reduce(\n        (startIndices, line, idx, lines) =>\n          startIndices.concat(\n            idx\n              ? // curr line index is prev line's start + prev line's length + \\n\n                startIndices[idx - 1] + lines[idx - 1].length + 1\n              : // first selected line\n                selectionStart,\n          ),\n        [] as number[],\n      )\n      .reverse();\n  };\n\n  const stopEvent = (event: Event) => {\n    if (event.target instanceof HTMLCanvasElement) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  // using a state variable instead of passing it to the handleSubmit callback\n  // so that we don't need to create separate a callback for event handlers\n  let submittedViaKeyboard = false;\n  const handleSubmit = () => {\n    // prevent double submit\n    if (isDestroyed) {\n      return;\n    }\n\n    isDestroyed = true;\n    // cleanup must be run before onSubmit otherwise when app blurs the wysiwyg\n    // it'd get stuck in an infinite loop of bluronSubmit after we re-focus the\n    // wysiwyg on update\n    cleanup();\n    const updateElement = app.scene.getElement(\n      element.id,\n    ) as JsonDrawTextElement;\n    if (!updateElement) {\n      return;\n    }\n    const container = getContainerElement(\n      updateElement,\n      app.scene.getNonDeletedElementsMap(),\n    );\n\n    if (container) {\n      if (editable.value.trim()) {\n        const boundTextElementId = getBoundTextElementId(container);\n        if (!boundTextElementId || boundTextElementId !== element.id) {\n          app.scene.mutateElement(container, {\n            boundElements: (container.boundElements || []).concat({\n              type: \"text\",\n              id: element.id,\n            }),\n          });\n        } else if (isArrowElement(container)) {\n          // updating an arrow label may change bounds, prevent stale cache:\n          bumpVersion(container);\n        }\n      } else {\n        app.scene.mutateElement(container, {\n          boundElements: container.boundElements?.filter(\n            (ele) =>\n              !isTextElement(\n                ele as JsonDrawTextElement | JsonDrawLinearElement,\n              ),\n          ),\n        });\n      }\n\n      redrawTextBoundingBox(updateElement, container, app.scene);\n    }\n\n    onSubmit({\n      viaKeyboard: submittedViaKeyboard,\n      nextOriginalText: editable.value,\n    });\n  };\n\n  const cleanup = () => {\n    // remove events to ensure they don't late-fire\n    editable.onblur = null;\n    editable.oninput = null;\n    editable.onkeydown = null;\n\n    if (observer) {\n      observer.disconnect();\n    }\n\n    window.removeEventListener(\"resize\", updateWysiwygStyle);\n    window.removeEventListener(\"wheel\", stopEvent, true);\n    window.removeEventListener(\"pointerdown\", onPointerDown);\n    window.removeEventListener(\"pointerup\", bindBlurEvent);\n    window.removeEventListener(\"blur\", handleSubmit);\n    window.removeEventListener(\"beforeunload\", handleSubmit);\n    unbindUpdate();\n    unsubOnChange();\n    unbindOnScroll();\n\n    editable.remove();\n  };\n\n  const bindBlurEvent = (event?: MouseEvent) => {\n    window.removeEventListener(\"pointerup\", bindBlurEvent);\n    // Deferred so that the pointerdown that initiates the wysiwyg doesn't\n    // trigger the blur on ensuing pointerup.\n    // Also to handle cases such as picking a color which would trigger a blur\n    // in that same tick.\n    const target = event?.target;\n\n    const isPropertiesTrigger =\n      target instanceof HTMLElement &&\n      target.classList.contains(\"properties-trigger\");\n    const isPropertiesContent =\n      (target instanceof HTMLElement || target instanceof SVGElement) &&\n      !!(target as Element).closest(\".properties-content\");\n    const inShapeActionsMenu =\n      (target instanceof HTMLElement || target instanceof SVGElement) &&\n      (!!(target as Element).closest(`.${CLASSES.SHAPE_ACTIONS_MENU}`) ||\n        !!(target as Element).closest(\".compact-shape-actions-island\"));\n\n    setTimeout(() => {\n      // If we interacted within shape actions menu or its popovers/triggers,\n      // keep submit disabled and don't steal focus back to textarea.\n      if (inShapeActionsMenu || isPropertiesTrigger || isPropertiesContent) {\n        return;\n      }\n\n      // Otherwise, re-enable submit on blur and refocus the editor.\n      editable.onblur = handleSubmit;\n      editable.focus();\n    });\n  };\n\n  const temporarilyDisableSubmit = () => {\n    editable.onblur = null;\n    window.addEventListener(\"pointerup\", bindBlurEvent);\n    // handle edge-case where pointerup doesn't fire e.g. due to user\n    // alt-tabbing away\n    window.addEventListener(\"blur\", handleSubmit);\n  };\n\n  // prevent blur when changing properties from the menu\n  const onPointerDown = (event: MouseEvent) => {\n    const target = event?.target;\n\n    // panning canvas\n    if (event.button === POINTER_BUTTON.WHEEL) {\n      // trying to pan by clicking inside text area itself -> handle here\n      if (target instanceof HTMLTextAreaElement) {\n        event.preventDefault();\n        app.handleCanvasPanUsingWheelOrSpaceDrag(event);\n      }\n\n      temporarilyDisableSubmit();\n      return;\n    }\n\n    const isPropertiesTrigger =\n      target instanceof HTMLElement &&\n      target.classList.contains(\"properties-trigger\");\n    const isPropertiesContent =\n      (target instanceof HTMLElement || target instanceof SVGElement) &&\n      !!(target as Element).closest(\".properties-content\");\n\n    if (\n      ((event.target instanceof HTMLElement ||\n        event.target instanceof SVGElement) &&\n        (event.target.closest(\n          `.${CLASSES.SHAPE_ACTIONS_MENU}, .${CLASSES.ZOOM_ACTIONS}`,\n        ) ||\n          event.target.closest(\".compact-shape-actions-island\")) &&\n        !isWritableElement(event.target)) ||\n      isPropertiesTrigger ||\n      isPropertiesContent\n    ) {\n      temporarilyDisableSubmit();\n    } else if (\n      event.target instanceof HTMLCanvasElement &&\n      // Vitest simply ignores stopPropagation, capture-mode, or rAF\n      // so without introducing crazier hacks, nothing we can do\n      !isTestEnv()\n    ) {\n      // On mobile, blur event doesn't seem to always fire correctly,\n      // so we want to also submit on pointerdown outside the wysiwyg.\n      // Done in the next frame to prevent pointerdown from creating a new text\n      // immediately (if tools locked) so that users on mobile have chance\n      // to submit first (to hide virtual keyboard).\n      // Note: revisit if we want to differ this behavior on Desktop\n      requestAnimationFrame(() => {\n        handleSubmit();\n      });\n    }\n  };\n\n  // FIXME after we start emitting updates from Store for appState.theme\n  const unsubOnChange = app.onChangeEmitter.on((elements) => {\n    if (app.state.theme !== LAST_THEME) {\n      updateWysiwygStyle();\n    }\n  });\n\n  // handle updates of textElement properties of editing element\n  const unbindUpdate = app.scene.onUpdate(() => {\n    updateWysiwygStyle();\n    const isPopupOpened = !!document.activeElement?.closest(\n      \".properties-content\",\n    );\n    if (!isPopupOpened) {\n      editable.focus();\n    }\n  });\n\n  const unbindOnScroll = app.onScrollChangeEmitter.on(() => {\n    updateWysiwygStyle();\n  });\n\n  // ---------------------------------------------------------------------------\n\n  let isDestroyed = false;\n\n  if (autoSelect) {\n    // select on init (focusing is done separately inside the bindBlurEvent()\n    // because we need it to happen *after* the blur event from `pointerdown`)\n    editable.select();\n  }\n  bindBlurEvent();\n\n  // reposition wysiwyg in case of canvas is resized. Using ResizeObserver\n  // is preferred so we catch changes from host, where window may not resize.\n  let observer: ResizeObserver | null = null;\n  if (canvas && \"ResizeObserver\" in window) {\n    observer = new window.ResizeObserver(() => {\n      updateWysiwygStyle();\n    });\n    observer.observe(canvas);\n  } else {\n    window.addEventListener(\"resize\", updateWysiwygStyle);\n  }\n\n  editable.onpointerdown = (event) => event.stopPropagation();\n\n  // rAF (+ capture to by doubly sure) so we don't catch te pointerdown that\n  // triggered the wysiwyg\n  requestAnimationFrame(() => {\n    window.addEventListener(\"pointerdown\", onPointerDown, { capture: true });\n  });\n  window.addEventListener(\"beforeunload\", handleSubmit);\n  jsondrawContainer\n    ?.querySelector(\".jsondraw-textEditorContainer\")!\n    .appendChild(editable);\n\n  return handleSubmit;\n};\n","import Trans from \"./ui/Trans\";\n\nconst BraveMeasureTextError = () => {\n  return (\n    <div data-testid=\"brave-measure-text-error\">\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line1\"\n          bold={el => <span style={{ fontWeight: 600 }}>{el}</span>}\n        />\n      </p>\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line2\"\n          bold={el => <span style={{ fontWeight: 600 }}>{el}</span>}\n        />\n      </p>\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line3\"\n          link={el => (\n            <a href=\"https://docs.jsonviz.online/docs/@jsondraw/jsondraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser\">\n              {el}\n            </a>\n          )}\n        />\n      </p>\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line4\"\n          issueLink={el => <a href=\"https://github.com/jsondraw/jsondraw/issues/new\">{el}</a>}\n          discordLink={el => <a href=\"https://discord.gg/UexuTaE\">{el}.</a>}\n        />\n      </p>\n    </div>\n  );\n};\n\nexport default BraveMeasureTextError;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ContextMenu.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ContextMenu.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Popover.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Popover.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useLayoutEffect, useRef, useEffect } from \"react\";\nimport { KEYS, queryFocusableElements } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport \"./Popover.scss\";\n\ntype Props = {\n  top?: number;\n  left?: number;\n  children?: React.ReactNode;\n  onCloseRequest?(event: PointerEvent): void;\n  fitInViewport?: boolean;\n  offsetLeft?: number;\n  offsetTop?: number;\n  viewportWidth?: number;\n  viewportHeight?: number;\n  className?: string;\n};\n\nexport const Popover = ({\n  children,\n  left,\n  top,\n  onCloseRequest,\n  fitInViewport = false,\n  offsetLeft = 0,\n  offsetTop = 0,\n  viewportWidth = window.innerWidth,\n  viewportHeight = window.innerHeight,\n  className,\n}: Props) => {\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const container = popoverRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    // focus popover only if the caller didn't focus on something else nested\n    // within the popover, which should take precedence. Fixes cases\n    // like color picker listening to keydown events on containers nested\n    // in the popover.\n    if (!container.contains(document.activeElement)) {\n      container.focus();\n    }\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === KEYS.TAB) {\n        const focusableElements = queryFocusableElements(container);\n        const { activeElement } = document;\n        const currentIndex = focusableElements.findIndex(element => element === activeElement);\n\n        if (activeElement === container) {\n          if (event.shiftKey) {\n            focusableElements[focusableElements.length - 1]?.focus();\n          } else {\n            focusableElements[0].focus();\n          }\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        } else if (currentIndex === 0 && event.shiftKey) {\n          focusableElements[focusableElements.length - 1]?.focus();\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        } else if (currentIndex === focusableElements.length - 1 && !event.shiftKey) {\n          focusableElements[0]?.focus();\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        }\n      }\n    };\n\n    container.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => container.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  const lastInitializedPosRef = useRef<{ top: number; left: number } | null>(null);\n\n  // ensure the popover doesn't overflow the viewport\n  useLayoutEffect(() => {\n    if (fitInViewport && popoverRef.current && top != null && left != null) {\n      const container = popoverRef.current;\n      const { width, height } = container.getBoundingClientRect();\n\n      // hack for StrictMode so this effect only runs once for\n      // the same top/left position, otherwise\n      // we'd potentically reposition twice (once for viewport overflow)\n      // and once for top/left position afterwards\n      if (\n        lastInitializedPosRef.current?.top === top &&\n        lastInitializedPosRef.current?.left === left\n      ) {\n        return;\n      }\n      lastInitializedPosRef.current = { top, left };\n\n      if (width >= viewportWidth) {\n        container.style.width = `${viewportWidth}px`;\n        container.style.left = \"0px\";\n        container.style.overflowX = \"scroll\";\n      } else if (left + width - offsetLeft > viewportWidth) {\n        container.style.left = `${viewportWidth - width - 10}px`;\n      } else {\n        container.style.left = `${left}px`;\n      }\n\n      if (height >= viewportHeight) {\n        container.style.height = `${viewportHeight - 20}px`;\n        container.style.top = \"10px\";\n        container.style.overflowY = \"scroll\";\n      } else if (top + height - offsetTop > viewportHeight) {\n        container.style.top = `${viewportHeight - height}px`;\n      } else {\n        container.style.top = `${top}px`;\n      }\n    }\n  }, [top, left, fitInViewport, viewportWidth, viewportHeight, offsetLeft, offsetTop]);\n\n  useEffect(() => {\n    if (onCloseRequest) {\n      const handler = (event: PointerEvent) => {\n        if (!popoverRef.current?.contains(event.target as Node)) {\n          unstable_batchedUpdates(() => onCloseRequest(event));\n        }\n      };\n      document.addEventListener(\"pointerdown\", handler, false);\n      return () => document.removeEventListener(\"pointerdown\", handler, false);\n    }\n  }, [onCloseRequest]);\n\n  return (\n    <div className={clsx(\"popover\", className)} ref={popoverRef} tabIndex={-1}>\n      {children}\n    </div>\n  );\n};\n","import React from \"react\";\nimport clsx from \"clsx\";\nimport type { ActionManager } from \"../actions/manager\";\nimport { getShortcutFromShortcutName } from \"../actions/shortcuts\";\nimport type { ShortcutName } from \"../actions/shortcuts\";\nimport type { Action } from \"../actions/types\";\nimport { t } from \"../i18n\";\nimport type { TranslationKeys } from \"../i18n\";\nimport { useJsonDrawAppState, useJsonDrawElements } from \"./App\";\nimport \"./ContextMenu.scss\";\nimport { Popover } from \"./ui/Popover\";\n\nexport type ContextMenuItem = typeof CONTEXT_MENU_SEPARATOR | Action;\n\nexport type ContextMenuItems = (ContextMenuItem | false | null | undefined)[];\n\ntype ContextMenuProps = {\n  actionManager: ActionManager;\n  items: ContextMenuItems;\n  top: number;\n  left: number;\n  onClose: (callback?: () => void) => void;\n};\n\nexport const CONTEXT_MENU_SEPARATOR = \"separator\";\n\nexport const ContextMenu = React.memo(\n  ({ actionManager, items, top, left, onClose }: ContextMenuProps) => {\n    const appState = useJsonDrawAppState();\n    const elements = useJsonDrawElements();\n\n    const filteredItems = items.reduce((acc: ContextMenuItem[], item) => {\n      if (\n        item &&\n        (item === CONTEXT_MENU_SEPARATOR ||\n          !item.predicate ||\n          item.predicate(elements, appState, actionManager.app.props, actionManager.app))\n      ) {\n        acc.push(item);\n      }\n      return acc;\n    }, []);\n\n    return (\n      <Popover\n        onCloseRequest={() => {\n          onClose();\n        }}\n        top={top}\n        left={left}\n        fitInViewport={true}\n        offsetLeft={appState.offsetLeft}\n        offsetTop={appState.offsetTop}\n        viewportWidth={appState.width}\n        viewportHeight={appState.height}\n        className=\"context-menu-popover\"\n      >\n        <ul className=\"context-menu\" onContextMenu={event => event.preventDefault()}>\n          {filteredItems.map((item, idx) => {\n            if (item === CONTEXT_MENU_SEPARATOR) {\n              if (!filteredItems[idx - 1] || filteredItems[idx - 1] === CONTEXT_MENU_SEPARATOR) {\n                return null;\n              }\n              return <hr key={idx} className=\"context-menu-item-separator\" />;\n            }\n\n            const actionName = item.name;\n            let label = \"\";\n            if (item.label) {\n              if (typeof item.label === \"function\") {\n                label = t(\n                  item.label(elements, appState, actionManager.app) as unknown as TranslationKeys\n                );\n              } else {\n                label = t(item.label as unknown as TranslationKeys);\n              }\n            }\n\n            return (\n              <li\n                key={idx}\n                data-testid={actionName}\n                onClick={() => {\n                  // we need update state before executing the action in case\n                  // the action uses the appState it's being passed (that still\n                  // contains a defined contextMenu) to return the next state.\n                  onClose(() => {\n                    actionManager.executeAction(item, \"contextMenu\");\n                  });\n                }}\n              >\n                <button\n                  type=\"button\"\n                  className={clsx(\"context-menu-item\", {\n                    dangerous: actionName === \"deleteSelectedElements\",\n                    checkmark: item.checked?.(appState),\n                  })}\n                >\n                  <div className=\"context-menu-item__label\">{label}</div>\n                  <kbd className=\"context-menu-item__shortcut\">\n                    {actionName ? getShortcutFromShortcutName(actionName as ShortcutName) : \"\"}\n                  </kbd>\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      </Popover>\n    );\n  }\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FollowMode.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FollowMode.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { CloseIcon } from \"../icons\";\n\nimport \"./FollowMode.scss\";\n\nimport type { UserToFollow } from \"../../types\";\n\ninterface FollowModeProps {\n  width: number;\n  height: number;\n  userToFollow: UserToFollow;\n  onDisconnect: () => void;\n}\n\nconst FollowMode = ({\n  height,\n  width,\n  userToFollow,\n  onDisconnect,\n}: FollowModeProps) => {\n  return (\n    <div className=\"follow-mode\" style={{ width, height }}>\n      <div className=\"follow-mode__badge\">\n        <div className=\"follow-mode__badge__label\">\n          Following{\" \"}\n          <span\n            className=\"follow-mode__badge__username\"\n            title={userToFollow.username}\n          >\n            {userToFollow.username}\n          </span>\n        </div>\n        <button\n          type=\"button\"\n          onClick={onDisconnect}\n          className=\"follow-mode__disconnect-btn\"\n        >\n          {CloseIcon}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default FollowMode;\n","import React from \"react\";\n\nimport type { AppState, SidebarName, SidebarTabName } from \"../../types\";\nimport type { JSX } from \"react\";\n\nexport type SidebarTriggerProps = {\n  name: SidebarName;\n  tab?: SidebarTabName;\n  icon?: JSX.Element;\n  children?: React.ReactNode;\n  title?: string;\n  className?: string;\n  onToggle?: (open: boolean) => void;\n  style?: React.CSSProperties;\n};\n\nexport type SidebarProps<P = {}> = {\n  name: SidebarName;\n  children: React.ReactNode;\n  /**\n   * Called on sidebar open/close or tab change.\n   */\n  onStateChange?: (state: AppState[\"openSidebar\"]) => void;\n  /**\n   * supply alongside `docked` prop in order to make the Sidebar user-dockable\n   */\n  onDock?: (docked: boolean) => void;\n  docked?: boolean;\n  className?: string;\n  // NOTE sidebars we use internally inside the editor must have this flag set.\n  // It indicates that this sidebar should have lower precedence over host\n  // sidebars, if both are open.\n  /** @private internal */\n  __fallback?: boolean;\n} & P;\n\nexport type SidebarPropsContextValue = Pick<\n  SidebarProps,\n  \"onDock\" | \"docked\"\n> & { onCloseRequest: () => void; shouldRenderDockButton: boolean };\n\nexport const SidebarPropsContext =\n  React.createContext<SidebarPropsContextValue>({} as SidebarPropsContextValue);\n","import { useContext } from \"react\";\nimport clsx from \"clsx\";\nimport { t } from \"../../i18n\";\nimport { useEditorInterface } from \"../App\";\nimport { CloseIcon, PinIcon } from \"../icons\";\nimport { Button } from \"../ui/Button\";\nimport { Tooltip } from \"../ui/Tooltip\";\nimport { SidebarPropsContext } from \"./common\";\n\nexport const SidebarHeader = ({\n  children,\n  className,\n}: {\n  children?: React.ReactNode;\n  className?: string;\n}) => {\n  const editorInterface = useEditorInterface();\n  const props = useContext(SidebarPropsContext);\n\n  const renderDockButton = !!(editorInterface.canFitSidebar && props.shouldRenderDockButton);\n\n  return (\n    <div className={clsx(\"sidebar__header\", className)} data-testid=\"sidebar-header\">\n      {children}\n      <div className=\"sidebar__header__buttons\">\n        {renderDockButton && (\n          <Tooltip label={t(\"labels.sidebarLock\")}>\n            <Button\n              onSelect={() => props.onDock?.(!props.docked)}\n              selected={!!props.docked}\n              className=\"sidebar__dock\"\n              data-testid=\"sidebar-dock\"\n              aria-label={t(\"labels.sidebarLock\")}\n            >\n              {PinIcon}\n            </Button>\n          </Tooltip>\n        )}\n        <Button\n          data-testid=\"sidebar-close\"\n          className=\"sidebar__close\"\n          onSelect={props.onCloseRequest}\n          aria-label={t(\"buttons.close\")}\n        >\n          {CloseIcon}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nSidebarHeader.displayName = \"SidebarHeader\";\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nimport type { SidebarTabName } from \"../../types\";\n\nexport const SidebarTabTrigger = ({\n  children,\n  tab,\n  onSelect,\n  ...rest\n}: {\n  children: React.ReactNode;\n  tab: SidebarTabName;\n  onSelect?: React.ReactEventHandler<HTMLButtonElement> | undefined;\n} & Omit<React.HTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  return (\n    <RadixTabs.Trigger value={tab} asChild onSelect={onSelect}>\n      <button\n        type={\"button\"}\n        className={`jsondraw-button sidebar-tab-trigger`}\n        {...rest}\n      >\n        {children}\n      </button>\n    </RadixTabs.Trigger>\n  );\n};\nSidebarTabTrigger.displayName = \"SidebarTabTrigger\";\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nexport const SidebarTabTriggers = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & Omit<\n  React.RefAttributes<HTMLDivElement>,\n  \"onSelect\"\n>) => {\n  return (\n    <RadixTabs.List className=\"sidebar-triggers\" {...rest}>\n      {children}\n    </RadixTabs.List>\n  );\n};\nSidebarTabTriggers.displayName = \"SidebarTabTriggers\";\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./SidebarTrigger.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./SidebarTrigger.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import clsx from \"clsx\";\n\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { useJsonDrawSetAppState } from \"../App\";\n\nimport \"./SidebarTrigger.scss\";\n\nimport type { SidebarTriggerProps } from \"./common\";\n\nexport const SidebarTrigger = ({\n  name,\n  tab,\n  icon,\n  title,\n  children,\n  onToggle,\n  className,\n  style,\n}: SidebarTriggerProps) => {\n  const setAppState = useJsonDrawSetAppState();\n  const appState = useUIAppState();\n\n  return (\n    <label title={title} className=\"sidebar-trigger__label-element\">\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        onChange={(event) => {\n          document\n            .querySelector(\".layer-ui__wrapper\")\n            ?.classList.remove(\"animate\");\n          const isOpen = event.target.checked;\n          setAppState({\n            openSidebar: isOpen ? { name, tab } : null,\n            openMenu: null,\n            openPopup: null,\n          });\n          onToggle?.(isOpen);\n        }}\n        checked={appState.openSidebar?.name === name}\n        aria-label={title}\n        aria-keyshortcuts=\"0\"\n      />\n      <div className={clsx(\"sidebar-trigger\", className)} style={style}>\n        {icon && <div>{icon}</div>}\n        {children && <div className=\"sidebar-trigger__label\">{children}</div>}\n      </div>\n    </label>\n  );\n};\nSidebarTrigger.displayName = \"SidebarTrigger\";\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { useJsonDrawSetAppState } from \"../App\";\n\nexport const SidebarTabs = ({\n  children,\n  ...rest\n}: {\n  children: React.ReactNode;\n} & Omit<React.RefAttributes<HTMLDivElement>, \"onSelect\">) => {\n  const appState = useUIAppState();\n  const setAppState = useJsonDrawSetAppState();\n\n  if (!appState.openSidebar) {\n    return null;\n  }\n\n  const { name } = appState.openSidebar;\n\n  return (\n    <RadixTabs.Root\n      className=\"sidebar-tabs-root\"\n      value={appState.openSidebar.tab}\n      onValueChange={(tab) =>\n        setAppState((state) => ({\n          ...state,\n          openSidebar: { ...state.openSidebar, name, tab },\n        }))\n      }\n      {...rest}\n    >\n      {children}\n    </RadixTabs.Root>\n  );\n};\nSidebarTabs.displayName = \"SidebarTabs\";\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nimport type { SidebarTabName } from \"../../types\";\n\nexport const SidebarTab = ({\n  tab,\n  children,\n  ...rest\n}: {\n  tab: SidebarTabName;\n  children: React.ReactNode;\n} & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <RadixTabs.Content {...rest} value={tab} data-testid={tab}>\n      {children}\n    </RadixTabs.Content>\n  );\n};\nSidebarTab.displayName = \"SidebarTab\";\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Sidebar.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Sidebar.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import clsx from \"clsx\";\nimport React, {\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n  forwardRef,\n  useImperativeHandle,\n  useCallback,\n} from \"react\";\n\nimport {\n  CLASSES,\n  EVENT,\n  isDevEnv,\n  KEYS,\n  updateObject,\n} from \"@jsondraw/common\";\n\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { atom, useSetAtom } from \"../../editor-jotai\";\nimport { useOutsideClick } from \"../../hooks/useOutsideClick\";\nimport { useEditorInterface, useJsonDrawSetAppState } from \"../App\";\nimport { Island } from \"../layout/Island\";\n\nimport { SidebarHeader } from \"./SidebarHeader\";\nimport { SidebarTabTrigger } from \"./SidebarTabTrigger\";\nimport { SidebarTabTriggers } from \"./SidebarTabTriggers\";\nimport { SidebarTrigger } from \"./SidebarTrigger\";\nimport { SidebarPropsContext } from \"./common\";\nimport { SidebarTabs } from \"./SidebarTabs\";\nimport { SidebarTab } from \"./SidebarTab\";\n\nimport \"./Sidebar.scss\";\n\nimport type { SidebarProps, SidebarPropsContextValue } from \"./common\";\n\n/**\n * Flags whether the currently rendered Sidebar is docked or not, for use\n * in upstream components that need to act on this (e.g. LayerUI to shift the\n * UI). We use an atom because of potential host app sidebars (for the default\n * sidebar we could just read from appState.defaultSidebarDockedPreference).\n *\n * Since we can only render one Sidebar at a time, we can use a simple flag.\n */\nexport const isSidebarDockedAtom = atom(false);\n\nexport const SidebarInner = forwardRef(\n  (\n    {\n      name,\n      children,\n      onDock,\n      docked,\n      className,\n      ...rest\n    }: SidebarProps & Omit<React.RefAttributes<HTMLDivElement>, \"onSelect\">,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) => {\n    if (isDevEnv() && onDock && docked == null) {\n      console.warn(\n        \"Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`\",\n      );\n    }\n\n    const setAppState = useJsonDrawSetAppState();\n\n    const setIsSidebarDockedAtom = useSetAtom(isSidebarDockedAtom);\n\n    useLayoutEffect(() => {\n      setIsSidebarDockedAtom(!!docked);\n      return () => {\n        setIsSidebarDockedAtom(false);\n      };\n    }, [setIsSidebarDockedAtom, docked]);\n\n    const headerPropsRef = useRef<SidebarPropsContextValue>(\n      {} as SidebarPropsContextValue,\n    );\n    headerPropsRef.current.onCloseRequest = () => {\n      setAppState({ openSidebar: null });\n    };\n    headerPropsRef.current.onDock = (isDocked) => onDock?.(isDocked);\n    // renew the ref object if the following props change since we want to\n    // rerender. We can't pass down as component props manually because\n    // the <Sidebar.Header/> can be rendered upstream.\n    headerPropsRef.current = updateObject(headerPropsRef.current, {\n      docked,\n      // explicit prop to rerender on update\n      shouldRenderDockButton: !!onDock && docked != null,\n    });\n\n    const islandRef = useRef<HTMLDivElement>(null);\n\n    useImperativeHandle(ref, () => {\n      return islandRef.current!;\n    });\n\n    const editorInterface = useEditorInterface();\n\n    const closeLibrary = useCallback(() => {\n      const isDialogOpen = !!document.querySelector(\".Dialog\");\n\n      // Prevent closing if any dialog is open\n      if (isDialogOpen) {\n        return;\n      }\n      setAppState({ openSidebar: null });\n    }, [setAppState]);\n\n    useOutsideClick(\n      islandRef,\n      useCallback(\n        (event) => {\n          // If click on the library icon, do nothing so that LibraryButton\n          // can toggle library menu\n          if ((event.target as Element).closest(\".sidebar-trigger\")) {\n            return;\n          }\n          if (!docked || !editorInterface.canFitSidebar) {\n            closeLibrary();\n          }\n        },\n        [closeLibrary, docked, editorInterface.canFitSidebar],\n      ),\n    );\n\n    useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === KEYS.ESCAPE &&\n          (!docked || !editorInterface.canFitSidebar)\n        ) {\n          closeLibrary();\n        }\n      };\n      document.addEventListener(EVENT.KEYDOWN, handleKeyDown);\n      return () => {\n        document.removeEventListener(EVENT.KEYDOWN, handleKeyDown);\n      };\n    }, [closeLibrary, docked, editorInterface.canFitSidebar]);\n\n    return (\n      <Island\n        {...rest}\n        className={clsx(\n          CLASSES.SIDEBAR,\n          { \"sidebar--docked\": docked },\n          className,\n        )}\n        ref={islandRef}\n      >\n        <SidebarPropsContext.Provider value={headerPropsRef.current}>\n          {children}\n        </SidebarPropsContext.Provider>\n      </Island>\n    );\n  },\n);\nSidebarInner.displayName = \"SidebarInner\";\n\nexport const Sidebar = Object.assign(\n  forwardRef((props: SidebarProps, ref: React.ForwardedRef<HTMLDivElement>) => {\n    const appState = useUIAppState();\n\n    const { onStateChange } = props;\n\n    const refPrevOpenSidebar = useRef(appState.openSidebar);\n    useEffect(() => {\n      if (\n        // closing sidebar\n        ((!appState.openSidebar &&\n          refPrevOpenSidebar?.current?.name === props.name) ||\n          // opening current sidebar\n          (appState.openSidebar?.name === props.name &&\n            refPrevOpenSidebar?.current?.name !== props.name) ||\n          // switching tabs or switching to a different sidebar\n          refPrevOpenSidebar.current?.name === props.name) &&\n        appState.openSidebar !== refPrevOpenSidebar.current\n      ) {\n        onStateChange?.(\n          appState.openSidebar?.name !== props.name\n            ? null\n            : appState.openSidebar,\n        );\n      }\n      refPrevOpenSidebar.current = appState.openSidebar;\n    }, [appState.openSidebar, onStateChange, props.name]);\n\n    const [mounted, setMounted] = useState(false);\n    useLayoutEffect(() => {\n      setMounted(true);\n      return () => setMounted(false);\n    }, []);\n\n    // We want to render in the next tick (hence `mounted` flag) so that it's\n    // guaranteed to happen after unmount of the previous sidebar (in case the\n    // previous sidebar is mounted after the next one). This is necessary to\n    // prevent flicker of subcomponents that support fallbacks\n    // (e.g. SidebarHeader). This is because we're using flags to determine\n    // whether prefer the fallback component or not (otherwise both will render\n    // initially), and the flag won't be reset in time if the unmount order\n    // it not correct.\n    //\n    // Alternative, and more general solution would be to namespace the fallback\n    // HoC so that state is not shared between subcomponents when the wrapping\n    // component is of the same type (e.g. Sidebar -> SidebarHeader).\n    const shouldRender = mounted && appState.openSidebar?.name === props.name;\n\n    if (!shouldRender) {\n      return null;\n    }\n\n    return <SidebarInner {...props} ref={ref} key={props.name} />;\n  }),\n  {\n    Header: SidebarHeader,\n    TabTriggers: SidebarTabTriggers,\n    TabTrigger: SidebarTabTrigger,\n    Tabs: SidebarTabs,\n    Tab: SidebarTab,\n    Trigger: SidebarTrigger,\n  },\n);\nSidebar.displayName = \"Sidebar\";\n","import { isRenderThrottlingEnabled } from \"../reactUtils\";\n\nexport type Animation<R extends object> = (params: {\n  deltaTime: number;\n  state?: R;\n}) => R | null | undefined;\n\nexport class AnimationController {\n  private static isRunning = false;\n  private static animations = new Map<\n    string,\n    {\n      animation: Animation<any>;\n      lastTime: number;\n      state: any;\n    }\n  >();\n\n  static start<R extends object>(key: string, animation: Animation<R>) {\n    const initialState = animation({\n      deltaTime: 0,\n      state: undefined,\n    });\n\n    if (initialState) {\n      AnimationController.animations.set(key, {\n        animation,\n        lastTime: 0,\n        state: initialState,\n      });\n\n      if (!AnimationController.isRunning) {\n        AnimationController.isRunning = true;\n\n        if (isRenderThrottlingEnabled()) {\n          requestAnimationFrame(AnimationController.tick);\n        } else {\n          setTimeout(AnimationController.tick, 0);\n        }\n      }\n    }\n  }\n\n  private static tick() {\n    if (AnimationController.animations.size > 0) {\n      for (const [key, animation] of AnimationController.animations) {\n        const now = performance.now();\n        const deltaTime =\n          animation.lastTime === 0 ? 0 : now - animation.lastTime;\n\n        const state = animation.animation({\n          deltaTime,\n          state: animation.state,\n        });\n\n        if (!state) {\n          AnimationController.animations.delete(key);\n\n          if (AnimationController.animations.size === 0) {\n            AnimationController.isRunning = false;\n            return;\n          }\n        } else {\n          animation.lastTime = now;\n          animation.state = state;\n        }\n      }\n\n      if (isRenderThrottlingEnabled()) {\n        requestAnimationFrame(AnimationController.tick);\n      } else {\n        setTimeout(AnimationController.tick, 0);\n      }\n    }\n  }\n\n  static running(key: string) {\n    return AnimationController.animations.has(key);\n  }\n\n  static cancel(key: string) {\n    AnimationController.animations.delete(key);\n  }\n}\n","import { pointFrom, type GlobalPoint, type LocalPoint } from \"@jsondraw/math\";\n\nimport { THEME } from \"@jsondraw/common\";\n\nimport type { PointSnapLine, PointerSnapLine } from \"../snapping\";\nimport type { InteractiveCanvasAppState } from \"../types\";\n\nconst SNAP_COLOR_LIGHT = \"#ff6b6b\";\nconst SNAP_COLOR_DARK = \"#ff0000\";\nconst SNAP_WIDTH = 1;\nconst SNAP_CROSS_SIZE = 2;\n\nexport const renderSnaps = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  if (!appState.snapLines.length) {\n    return;\n  }\n\n  // in dark mode, we need to adjust the color to account for color inversion.\n  // Don't change if zen mode, because we draw only crosses, we want the\n  // colors to be more visible\n  const snapColor =\n    appState.theme === THEME.LIGHT || appState.zenModeEnabled\n      ? SNAP_COLOR_LIGHT\n      : SNAP_COLOR_DARK;\n  // in zen mode make the cross more visible since we don't draw the lines\n  const snapWidth =\n    (appState.zenModeEnabled ? SNAP_WIDTH * 1.5 : SNAP_WIDTH) /\n    appState.zoom.value;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  for (const snapLine of appState.snapLines) {\n    if (snapLine.type === \"pointer\") {\n      context.lineWidth = snapWidth;\n      context.strokeStyle = snapColor;\n\n      drawPointerSnapLine(snapLine, context, appState);\n    } else if (snapLine.type === \"gap\") {\n      context.lineWidth = snapWidth;\n      context.strokeStyle = snapColor;\n\n      drawGapLine(\n        snapLine.points[0],\n        snapLine.points[1],\n        snapLine.direction,\n        appState,\n        context,\n      );\n    } else if (snapLine.type === \"points\") {\n      context.lineWidth = snapWidth;\n      context.strokeStyle = snapColor;\n      drawPointsSnapLine(snapLine, context, appState);\n    }\n  }\n\n  context.restore();\n};\n\nconst drawPointsSnapLine = (\n  pointSnapLine: PointSnapLine,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  if (!appState.zenModeEnabled) {\n    const firstPoint = pointSnapLine.points[0];\n    const lastPoint = pointSnapLine.points[pointSnapLine.points.length - 1];\n\n    drawLine(firstPoint, lastPoint, context);\n  }\n\n  for (const point of pointSnapLine.points) {\n    drawCross(point, appState, context);\n  }\n};\n\nconst drawPointerSnapLine = (\n  pointerSnapLine: PointerSnapLine,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  drawCross(pointerSnapLine.points[0], appState, context);\n  if (!appState.zenModeEnabled) {\n    drawLine(pointerSnapLine.points[0], pointerSnapLine.points[1], context);\n  }\n};\n\nconst drawCross = <Point extends LocalPoint | GlobalPoint>(\n  [x, y]: Point,\n  appState: InteractiveCanvasAppState,\n  context: CanvasRenderingContext2D,\n) => {\n  context.save();\n  const size =\n    (appState.zenModeEnabled ? SNAP_CROSS_SIZE * 1.5 : SNAP_CROSS_SIZE) /\n    appState.zoom.value;\n  context.beginPath();\n\n  context.moveTo(x - size, y - size);\n  context.lineTo(x + size, y + size);\n\n  context.moveTo(x + size, y - size);\n  context.lineTo(x - size, y + size);\n\n  context.stroke();\n  context.restore();\n};\n\nconst drawLine = <Point extends LocalPoint | GlobalPoint>(\n  from: Point,\n  to: Point,\n  context: CanvasRenderingContext2D,\n) => {\n  context.beginPath();\n  context.lineTo(from[0], from[1]);\n  context.lineTo(to[0], to[1]);\n  context.stroke();\n};\n\nconst drawGapLine = <Point extends LocalPoint | GlobalPoint>(\n  from: Point,\n  to: Point,\n  direction: \"horizontal\" | \"vertical\",\n  appState: InteractiveCanvasAppState,\n  context: CanvasRenderingContext2D,\n) => {\n  // a horizontal gap snap line\n  // ||||\n  // ^    ^   ^       ^\n  // \\    \\   \\       \\\n  // (1)  (2) (3)     (4)\n\n  const FULL = 8 / appState.zoom.value;\n  const HALF = FULL / 2;\n  const QUARTER = FULL / 4;\n\n  if (direction === \"horizontal\") {\n    const halfPoint = [(from[0] + to[0]) / 2, from[1]];\n    // (1)\n    if (!appState.zenModeEnabled) {\n      drawLine(\n        pointFrom(from[0], from[1] - FULL),\n        pointFrom(from[0], from[1] + FULL),\n        context,\n      );\n    }\n\n    // (3)\n    drawLine(\n      pointFrom(halfPoint[0] - QUARTER, halfPoint[1] - HALF),\n      pointFrom(halfPoint[0] - QUARTER, halfPoint[1] + HALF),\n      context,\n    );\n    drawLine(\n      pointFrom(halfPoint[0] + QUARTER, halfPoint[1] - HALF),\n      pointFrom(halfPoint[0] + QUARTER, halfPoint[1] + HALF),\n      context,\n    );\n\n    if (!appState.zenModeEnabled) {\n      // (4)\n      drawLine(\n        pointFrom(to[0], to[1] - FULL),\n        pointFrom(to[0], to[1] + FULL),\n        context,\n      );\n\n      // (2)\n      drawLine(from, to, context);\n    }\n  } else {\n    const halfPoint = [from[0], (from[1] + to[1]) / 2];\n    // (1)\n    if (!appState.zenModeEnabled) {\n      drawLine(\n        pointFrom(from[0] - FULL, from[1]),\n        pointFrom(from[0] + FULL, from[1]),\n        context,\n      );\n    }\n\n    // (3)\n    drawLine(\n      pointFrom(halfPoint[0] - HALF, halfPoint[1] - QUARTER),\n      pointFrom(halfPoint[0] + HALF, halfPoint[1] - QUARTER),\n      context,\n    );\n    drawLine(\n      pointFrom(halfPoint[0] - HALF, halfPoint[1] + QUARTER),\n      pointFrom(halfPoint[0] + HALF, halfPoint[1] + QUARTER),\n      context,\n    );\n\n    if (!appState.zenModeEnabled) {\n      // (4)\n      drawLine(\n        pointFrom(to[0] - FULL, to[1]),\n        pointFrom(to[0] + FULL, to[1]),\n        context,\n      );\n\n      // (2)\n      drawLine(from, to, context);\n    }\n  }\n};\n","import {\n  clamp,\n  pointFrom,\n  pointsEqual,\n  type GlobalPoint,\n  type LocalPoint,\n  type Radians,\n  bezierEquation,\n  pointRotateRads,\n} from \"@jsondraw/math\";\n\nimport {\n  arrayToMap,\n  BIND_MODE_TIMEOUT,\n  DEFAULT_TRANSFORM_HANDLE_SPACING,\n  FRAME_STYLE,\n  getFeatureFlag,\n  invariant,\n  THEME,\n} from \"@jsondraw/common\";\n\nimport {\n  deconstructDiamondElement,\n  deconstructRectanguloidElement,\n  elementCenterPoint,\n  getDiamondBaseCorners,\n  FOCUS_POINT_SIZE,\n  getOmitSidesForEditorInterface,\n  getTransformHandles,\n  getTransformHandlesFromCoords,\n  hasBoundingBox,\n  hitElementItself,\n  isArrowElement,\n  isBindableElement,\n  isElbowArrow,\n  isFrameLikeElement,\n  isImageElement,\n  isLinearElement,\n  isLineElement,\n  isTextElement,\n  LinearElementEditor,\n  headingForPoint,\n  compareHeading,\n  HEADING_RIGHT,\n  HEADING_DOWN,\n  HEADING_LEFT,\n  HEADING_UP,\n} from \"@jsondraw/element\";\n\nimport { renderSelectionElement } from \"@jsondraw/element\";\n\nimport {\n  getElementsInGroup,\n  getSelectedGroupIds,\n  isSelectedViaGroup,\n  selectGroupsFromGivenElements,\n} from \"@jsondraw/element\";\n\nimport { getCommonBounds, getElementAbsoluteCoords } from \"@jsondraw/element\";\nimport {\n  getGlobalFixedPointForBindableElement,\n  isFocusPointVisible,\n} from \"@jsondraw/element\";\n\nimport type {\n  TransformHandles,\n  TransformHandleType,\n} from \"@jsondraw/element\";\n\nimport type {\n  ElementsMap,\n  JsonDrawArrowElement,\n  JsonDrawBindableElement,\n  JsonDrawElement,\n  JsonDrawFrameLikeElement,\n  JsonDrawImageElement,\n  JsonDrawLinearElement,\n  JsonDrawTextElement,\n  GroupId,\n  NonDeleted,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\n\nimport { renderSnaps } from \"../renderer/renderSnaps\";\nimport { roundRect } from \"../renderer/roundRect\";\nimport {\n  getScrollBars,\n  SCROLLBAR_COLOR,\n  SCROLLBAR_WIDTH,\n} from \"../scene/scrollbars\";\n\nimport { getClientColor, renderRemoteCursors } from \"../clients\";\n\nimport {\n  bootstrapCanvas,\n  fillCircle,\n  getNormalizedCanvasDimensions,\n  strokeRectWithRotation_simple,\n} from \"./helpers\";\n\nimport type {\n  AppState,\n  AppClassProperties,\n  InteractiveCanvasAppState,\n} from \"../types\";\nimport type {\n  InteractiveCanvasRenderConfig,\n  InteractiveSceneRenderConfig,\n  RenderableElementsMap,\n} from \"../scene/types\";\n\nconst renderElbowArrowMidPointHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  invariant(appState.selectedLinearElement, \"selectedLinearElement is null\");\n\n  const { segmentMidPointHoveredCoords } = appState.selectedLinearElement;\n\n  invariant(segmentMidPointHoveredCoords, \"midPointCoords is null\");\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  highlightPoint(segmentMidPointHoveredCoords, context, appState);\n\n  context.restore();\n};\n\nconst renderLinearElementPointHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  elementsMap: ElementsMap,\n) => {\n  const { elementId, hoverPointIndex } = appState.selectedLinearElement!;\n  if (\n    appState.selectedLinearElement?.isEditing &&\n    appState.selectedLinearElement?.selectedPointsIndices?.includes(\n      hoverPointIndex,\n    )\n  ) {\n    return;\n  }\n  if (appState.selectedLinearElement?.isDragging) {\n    return;\n  }\n  const element = LinearElementEditor.getElement(elementId, elementsMap);\n\n  if (!element) {\n    return;\n  }\n  const point = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n    element,\n    hoverPointIndex,\n    elementsMap,\n  );\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  highlightPoint(point, context, appState);\n  context.restore();\n};\n\nconst highlightPoint = <Point extends LocalPoint | GlobalPoint>(\n  point: Point,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  context.fillStyle = \"rgba(105, 101, 219, 0.4)\";\n\n  fillCircle(\n    context,\n    point[0],\n    point[1],\n    LinearElementEditor.POINT_HANDLE_SIZE / appState.zoom.value,\n    false,\n  );\n};\n\nconst renderFocusPointHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  focusPoint: GlobalPoint,\n) => {\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  highlightPoint(focusPoint, context, appState);\n\n  context.restore();\n};\n\nconst renderSingleLinearPoint = <Point extends GlobalPoint | LocalPoint>(\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  point: Point,\n  radius: number,\n  isSelected: boolean,\n  isPhantomPoint: boolean,\n  isOverlappingPoint: boolean,\n) => {\n  context.strokeStyle = \"#5e5ad8\";\n  context.setLineDash([]);\n  context.fillStyle = \"rgba(255, 255, 255, 0.9)\";\n  if (isSelected) {\n    context.fillStyle = \"rgba(134, 131, 226, 0.9)\";\n  } else if (isPhantomPoint) {\n    context.fillStyle = \"rgba(177, 151, 252, 0.7)\";\n  }\n\n  fillCircle(\n    context,\n    point[0],\n    point[1],\n    (isOverlappingPoint\n      ? radius * (appState.selectedLinearElement?.isEditing ? 1.5 : 2)\n      : radius) / appState.zoom.value,\n    !isPhantomPoint,\n    !isOverlappingPoint || isSelected,\n  );\n};\n\nconst renderBindingHighlightForBindableElement_simple = (\n  context: CanvasRenderingContext2D,\n  suggestedBinding: NonNullable<AppState[\"suggestedBinding\"]>,\n  elementsMap: ElementsMap,\n  appState: InteractiveCanvasAppState,\n  pointerCoords: GlobalPoint | null,\n) => {\n  const enclosingFrame =\n    suggestedBinding.element.frameId &&\n    elementsMap.get(suggestedBinding.element.frameId);\n  if (enclosingFrame && isFrameLikeElement(enclosingFrame)) {\n    context.translate(enclosingFrame.x, enclosingFrame.y);\n\n    context.beginPath();\n\n    if (FRAME_STYLE.radius && context.roundRect) {\n      context.roundRect(\n        -1,\n        -1,\n        enclosingFrame.width + 1,\n        enclosingFrame.height + 1,\n        FRAME_STYLE.radius / appState.zoom.value,\n      );\n    } else {\n      context.rect(-1, -1, enclosingFrame.width + 1, enclosingFrame.height + 1);\n    }\n\n    context.clip();\n\n    context.translate(-enclosingFrame.x, -enclosingFrame.y);\n  }\n\n  switch (suggestedBinding.element.type) {\n    case \"magicframe\":\n    case \"frame\":\n      context.save();\n\n      context.translate(suggestedBinding.element.x, suggestedBinding.element.y);\n\n      context.lineWidth = FRAME_STYLE.strokeWidth / appState.zoom.value;\n      context.strokeStyle =\n        appState.theme === THEME.DARK\n          ? `rgba(3, 93, 161, 1)`\n          : `rgba(106, 189, 252, 1)`;\n\n      if (FRAME_STYLE.radius && context.roundRect) {\n        context.beginPath();\n        context.roundRect(\n          0,\n          0,\n          suggestedBinding.element.width,\n          suggestedBinding.element.height,\n          FRAME_STYLE.radius / appState.zoom.value,\n        );\n        context.stroke();\n        context.closePath();\n      } else {\n        context.strokeRect(\n          0,\n          0,\n          suggestedBinding.element.width,\n          suggestedBinding.element.height,\n        );\n      }\n\n      context.restore();\n      break;\n    default:\n      context.save();\n\n      const center = elementCenterPoint(suggestedBinding.element, elementsMap);\n\n      context.translate(center[0], center[1]);\n      context.rotate(suggestedBinding.element.angle as Radians);\n      context.translate(-center[0], -center[1]);\n\n      context.translate(suggestedBinding.element.x, suggestedBinding.element.y);\n\n      context.lineWidth =\n        clamp(1.75, suggestedBinding.element.strokeWidth, 4) /\n        Math.max(0.25, appState.zoom.value);\n      context.strokeStyle =\n        appState.theme === THEME.DARK\n          ? `rgba(3, 93, 161, 1)`\n          : `rgba(106, 189, 252, 1)`;\n\n      switch (suggestedBinding.element.type) {\n        case \"ellipse\":\n          context.beginPath();\n          context.ellipse(\n            suggestedBinding.element.width / 2,\n            suggestedBinding.element.height / 2,\n            suggestedBinding.element.width / 2,\n            suggestedBinding.element.height / 2,\n            0,\n            0,\n            2 * Math.PI,\n          );\n          context.closePath();\n          context.stroke();\n          break;\n        case \"diamond\":\n          {\n            const [segments, curves] = deconstructDiamondElement(\n              suggestedBinding.element,\n            );\n\n            // Draw each line segment individually\n            segments.forEach((segment) => {\n              context.beginPath();\n              context.moveTo(\n                segment[0][0] - suggestedBinding.element.x,\n                segment[0][1] - suggestedBinding.element.y,\n              );\n              context.lineTo(\n                segment[1][0] - suggestedBinding.element.x,\n                segment[1][1] - suggestedBinding.element.y,\n              );\n              context.stroke();\n            });\n\n            // Draw each curve individually (for rounded corners)\n            curves.forEach((curve) => {\n              const [start, control1, control2, end] = curve;\n              context.beginPath();\n              context.moveTo(\n                start[0] - suggestedBinding.element.x,\n                start[1] - suggestedBinding.element.y,\n              );\n              context.bezierCurveTo(\n                control1[0] - suggestedBinding.element.x,\n                control1[1] - suggestedBinding.element.y,\n                control2[0] - suggestedBinding.element.x,\n                control2[1] - suggestedBinding.element.y,\n                end[0] - suggestedBinding.element.x,\n                end[1] - suggestedBinding.element.y,\n              );\n              context.stroke();\n            });\n          }\n\n          break;\n        default:\n          {\n            const [segments, curves] = deconstructRectanguloidElement(\n              suggestedBinding.element,\n            );\n\n            // Draw each line segment individually\n            segments.forEach((segment) => {\n              context.beginPath();\n              context.moveTo(\n                segment[0][0] - suggestedBinding.element.x,\n                segment[0][1] - suggestedBinding.element.y,\n              );\n              context.lineTo(\n                segment[1][0] - suggestedBinding.element.x,\n                segment[1][1] - suggestedBinding.element.y,\n              );\n              context.stroke();\n            });\n\n            // Draw each curve individually (for rounded corners)\n            curves.forEach((curve) => {\n              const [start, control1, control2, end] = curve;\n              context.beginPath();\n              context.moveTo(\n                start[0] - suggestedBinding.element.x,\n                start[1] - suggestedBinding.element.y,\n              );\n              context.bezierCurveTo(\n                control1[0] - suggestedBinding.element.x,\n                control1[1] - suggestedBinding.element.y,\n                control2[0] - suggestedBinding.element.x,\n                control2[1] - suggestedBinding.element.y,\n                end[0] - suggestedBinding.element.x,\n                end[1] - suggestedBinding.element.y,\n              );\n              context.stroke();\n            });\n          }\n\n          break;\n      }\n\n      context.restore();\n\n      break;\n  }\n\n  if (\n    isFrameLikeElement(suggestedBinding.element) ||\n    isBindableElement(suggestedBinding.element)\n  ) {\n    // Draw midpoint indicators\n    const linearElement = appState.selectedLinearElement;\n    const arrow =\n      linearElement?.elementId &&\n      LinearElementEditor.getElement(linearElement?.elementId, elementsMap);\n    const insideBindable =\n      pointerCoords &&\n      arrow &&\n      hitElementItself({\n        point: pointerCoords,\n        element: suggestedBinding.element,\n        elementsMap,\n        threshold: 0,\n        overrideShouldTestInside: true,\n      });\n\n    if (!insideBindable || isElbowArrow(arrow)) {\n      context.save();\n      context.translate(suggestedBinding.element.x, suggestedBinding.element.y);\n\n      const midpointRadius = 5 / appState.zoom.value;\n      const center = elementCenterPoint(suggestedBinding.element, elementsMap);\n\n      let midpoints: LocalPoint[];\n      if (suggestedBinding.element.type === \"diamond\") {\n        const center = elementCenterPoint(\n          suggestedBinding.element,\n          elementsMap,\n        );\n        midpoints = getDiamondBaseCorners(suggestedBinding.element).map(\n          (curve) => {\n            const point = bezierEquation(curve, 0.5);\n            const rotatedPoint = pointRotateRads(\n              point,\n              center,\n              suggestedBinding.element.angle,\n            );\n\n            return pointFrom<LocalPoint>(\n              rotatedPoint[0] - suggestedBinding.element.x,\n              rotatedPoint[1] - suggestedBinding.element.y,\n            );\n          },\n        );\n      } else {\n        const basePoints = [\n          {\n            x: suggestedBinding.element.width,\n            y: suggestedBinding.element.height / 2,\n          }, // RIGHT\n          {\n            x: suggestedBinding.element.width / 2,\n            y: suggestedBinding.element.height,\n          }, // BOTTOM\n          { x: 0, y: suggestedBinding.element.height / 2 }, // LEFT\n          { x: suggestedBinding.element.width / 2, y: 0 }, // TOP\n        ];\n        midpoints = basePoints.map((point) => {\n          const globalPoint = pointFrom<GlobalPoint>(\n            point.x + suggestedBinding.element.x,\n            point.y + suggestedBinding.element.y,\n          );\n          const rotatedPoint = pointRotateRads(\n            globalPoint,\n            center,\n            suggestedBinding.element.angle,\n          );\n          return pointFrom<LocalPoint>(\n            rotatedPoint[0] - suggestedBinding.element.x,\n            rotatedPoint[1] - suggestedBinding.element.y,\n          );\n        });\n      }\n      const highlightedPoint =\n        suggestedBinding.midPoint &&\n        pointFrom<LocalPoint>(\n          suggestedBinding.midPoint[0] - suggestedBinding.element.x,\n          suggestedBinding.midPoint[1] - suggestedBinding.element.y,\n        );\n\n      const target = [HEADING_RIGHT, HEADING_DOWN, HEADING_LEFT, HEADING_UP];\n      midpoints.forEach((midpoint, idx) => {\n        const isHighlighted =\n          highlightedPoint &&\n          compareHeading(\n            headingForPoint(\n              pointRotateRads(\n                pointFrom<GlobalPoint>(\n                  highlightedPoint[0] + suggestedBinding.element.x,\n                  highlightedPoint[1] + suggestedBinding.element.y,\n                ),\n                center,\n                suggestedBinding.element.angle as Radians,\n              ),\n              center,\n            ),\n            target[idx],\n          );\n\n        if (!isHighlighted) {\n          context.fillStyle =\n            appState.theme === THEME.DARK\n              ? `rgba(0, 0, 0, 0.5)`\n              : `rgba(65, 65, 65, 0.4)`;\n          context.beginPath();\n          context.arc(midpoint[0], midpoint[1], midpointRadius, 0, 2 * Math.PI);\n          context.fill();\n        } else {\n          context.fillStyle =\n            appState.theme === THEME.DARK\n              ? `rgba(3, 93, 161, 1)`\n              : `rgba(106, 189, 252, 1)`;\n\n          context.beginPath();\n          context.arc(midpoint[0], midpoint[1], midpointRadius, 0, 2 * Math.PI);\n          context.fill();\n        }\n      });\n\n      context.restore();\n    }\n  }\n};\n\nconst renderBindingHighlightForBindableElement_complex = (\n  app: AppClassProperties,\n  context: CanvasRenderingContext2D,\n  element: JsonDrawBindableElement,\n  allElementsMap: NonDeletedSceneElementsMap,\n  appState: InteractiveCanvasAppState,\n  deltaTime: number,\n  state?: { runtime: number },\n) => {\n  const countdownInProgress =\n    app.state.bindMode === \"orbit\" && app.bindModeHandler !== null;\n\n  const remainingTime =\n    BIND_MODE_TIMEOUT -\n    (state?.runtime ?? (countdownInProgress ? 0 : BIND_MODE_TIMEOUT));\n  const opacity = clamp((1 / BIND_MODE_TIMEOUT) * remainingTime, 0.0001, 1);\n  const offset = element.strokeWidth / 2;\n\n  const enclosingFrame = element.frameId && allElementsMap.get(element.frameId);\n  if (enclosingFrame && isFrameLikeElement(enclosingFrame)) {\n    context.translate(enclosingFrame.x, enclosingFrame.y);\n\n    context.beginPath();\n\n    if (FRAME_STYLE.radius && context.roundRect) {\n      context.roundRect(\n        -1,\n        -1,\n        enclosingFrame.width + 1,\n        enclosingFrame.height + 1,\n        FRAME_STYLE.radius / appState.zoom.value,\n      );\n    } else {\n      context.rect(-1, -1, enclosingFrame.width + 1, enclosingFrame.height + 1);\n    }\n\n    context.clip();\n\n    context.translate(-enclosingFrame.x, -enclosingFrame.y);\n  }\n\n  switch (element.type) {\n    case \"magicframe\":\n    case \"frame\":\n      context.save();\n\n      context.translate(element.x, element.y);\n\n      context.lineWidth = FRAME_STYLE.strokeWidth / appState.zoom.value;\n      context.strokeStyle =\n        appState.theme === THEME.DARK\n          ? `rgba(3, 93, 161, ${opacity})`\n          : `rgba(106, 189, 252, ${opacity})`;\n\n      if (FRAME_STYLE.radius && context.roundRect) {\n        context.beginPath();\n        context.roundRect(\n          0,\n          0,\n          element.width,\n          element.height,\n          FRAME_STYLE.radius / appState.zoom.value,\n        );\n        context.stroke();\n        context.closePath();\n      } else {\n        context.strokeRect(0, 0, element.width, element.height);\n      }\n\n      context.restore();\n      break;\n    default:\n      context.save();\n\n      const center = elementCenterPoint(element, allElementsMap);\n      const cx = center[0] + appState.scrollX;\n      const cy = center[1] + appState.scrollY;\n\n      context.translate(cx, cy);\n      context.rotate(element.angle as Radians);\n      context.translate(-cx, -cy);\n\n      context.translate(\n        element.x + appState.scrollX - offset,\n        element.y + appState.scrollY - offset,\n      );\n\n      context.lineWidth =\n        clamp(2.5, element.strokeWidth * 1.75, 4) /\n        Math.max(0.25, appState.zoom.value);\n      context.strokeStyle =\n        appState.theme === THEME.DARK\n          ? `rgba(3, 93, 161, ${opacity / 2})`\n          : `rgba(106, 189, 252, ${opacity / 2})`;\n\n      switch (element.type) {\n        case \"ellipse\":\n          context.beginPath();\n          context.ellipse(\n            (element.width + offset * 2) / 2,\n            (element.height + offset * 2) / 2,\n            (element.width + offset * 2) / 2,\n            (element.height + offset * 2) / 2,\n            0,\n            0,\n            2 * Math.PI,\n          );\n          context.closePath();\n          context.stroke();\n          break;\n        case \"diamond\":\n          {\n            const [segments, curves] = deconstructDiamondElement(\n              element,\n              offset,\n            );\n\n            // Draw each line segment individually\n            segments.forEach((segment) => {\n              context.beginPath();\n              context.moveTo(\n                segment[0][0] - element.x + offset,\n                segment[0][1] - element.y + offset,\n              );\n              context.lineTo(\n                segment[1][0] - element.x + offset,\n                segment[1][1] - element.y + offset,\n              );\n              context.stroke();\n            });\n\n            // Draw each curve individually (for rounded corners)\n            curves.forEach((curve) => {\n              const [start, control1, control2, end] = curve;\n              context.beginPath();\n              context.moveTo(\n                start[0] - element.x + offset,\n                start[1] - element.y + offset,\n              );\n              context.bezierCurveTo(\n                control1[0] - element.x + offset,\n                control1[1] - element.y + offset,\n                control2[0] - element.x + offset,\n                control2[1] - element.y + offset,\n                end[0] - element.x + offset,\n                end[1] - element.y + offset,\n              );\n              context.stroke();\n            });\n          }\n\n          break;\n        default:\n          {\n            const [segments, curves] = deconstructRectanguloidElement(\n              element,\n              offset,\n            );\n\n            // Draw each line segment individually\n            segments.forEach((segment) => {\n              context.beginPath();\n              context.moveTo(\n                segment[0][0] - element.x + offset,\n                segment[0][1] - element.y + offset,\n              );\n              context.lineTo(\n                segment[1][0] - element.x + offset,\n                segment[1][1] - element.y + offset,\n              );\n              context.stroke();\n            });\n\n            // Draw each curve individually (for rounded corners)\n            curves.forEach((curve) => {\n              const [start, control1, control2, end] = curve;\n              context.beginPath();\n              context.moveTo(\n                start[0] - element.x + offset,\n                start[1] - element.y + offset,\n              );\n              context.bezierCurveTo(\n                control1[0] - element.x + offset,\n                control1[1] - element.y + offset,\n                control2[0] - element.x + offset,\n                control2[1] - element.y + offset,\n                end[0] - element.x + offset,\n                end[1] - element.y + offset,\n              );\n              context.stroke();\n            });\n          }\n\n          break;\n      }\n\n      context.restore();\n\n      break;\n  }\n\n  // Middle indicator is not rendered after it expired\n  if (!countdownInProgress || (state?.runtime ?? 0) > BIND_MODE_TIMEOUT) {\n    return;\n  }\n\n  const radius = 0.5 * (Math.min(element.width, element.height) / 2);\n\n  // Draw center snap area\n  if (!isFrameLikeElement(element)) {\n    context.save();\n    context.translate(\n      element.x + appState.scrollX,\n      element.y + appState.scrollY,\n    );\n\n    const PROGRESS_RATIO = (1 / BIND_MODE_TIMEOUT) * remainingTime;\n\n    context.strokeStyle = \"rgba(0, 0, 0, 0.2)\";\n    context.lineWidth = 1 / appState.zoom.value;\n    context.setLineDash([4 / appState.zoom.value, 4 / appState.zoom.value]);\n    context.lineDashOffset = (-PROGRESS_RATIO * 10) / appState.zoom.value;\n\n    context.beginPath();\n    context.ellipse(\n      element.width / 2,\n      element.height / 2,\n      radius,\n      radius,\n      0,\n      0,\n      2 * Math.PI,\n    );\n    context.stroke();\n\n    // context.strokeStyle = \"transparent\";\n    context.fillStyle = \"rgba(0, 0, 0, 0.04)\";\n    context.beginPath();\n    context.ellipse(\n      element.width / 2,\n      element.height / 2,\n      radius * (1 - opacity),\n      radius * (1 - opacity),\n      0,\n      0,\n      2 * Math.PI,\n    );\n\n    context.fill();\n\n    context.restore();\n\n    // Draw midpoint indicators\n    context.save();\n    context.translate(\n      element.x + appState.scrollX,\n      element.y + appState.scrollY,\n    );\n\n    const midpointRadius = 5 / appState.zoom.value;\n    const cutoutPadding = 5 / appState.zoom.value;\n    const cutoutRadius = midpointRadius + cutoutPadding;\n\n    let midpoints;\n    if (element.type === \"diamond\") {\n      const [, curves] = deconstructDiamondElement(element);\n      const center = elementCenterPoint(element, allElementsMap);\n\n      midpoints = curves.map((curve) => {\n        const point = bezierEquation(curve, 0.5);\n        const rotatedPoint = pointRotateRads(point, center, element.angle);\n        return {\n          x: rotatedPoint[0] - element.x,\n          y: rotatedPoint[1] - element.y,\n        };\n      });\n    } else {\n      const center = elementCenterPoint(element, allElementsMap);\n      const basePoints = [\n        { x: element.width / 2, y: 0 }, // TOP\n        { x: element.width, y: element.height / 2 }, // RIGHT\n        { x: element.width / 2, y: element.height }, // BOTTOM\n        { x: 0, y: element.height / 2 }, // LEFT\n      ];\n      midpoints = basePoints.map((point) => {\n        const globalPoint = pointFrom<GlobalPoint>(\n          point.x + element.x,\n          point.y + element.y,\n        );\n        const rotatedPoint = pointRotateRads(\n          globalPoint,\n          center,\n          element.angle,\n        );\n        return {\n          x: rotatedPoint[0] - element.x,\n          y: rotatedPoint[1] - element.y,\n        };\n      });\n    }\n\n    // Clear cutouts around midpoints\n    midpoints.forEach((midpoint) => {\n      context.clearRect(\n        midpoint.x - cutoutRadius,\n        midpoint.y - cutoutRadius,\n        cutoutRadius * 2,\n        cutoutRadius * 2,\n      );\n    });\n\n    context.fillStyle =\n      appState.theme === THEME.DARK\n        ? `rgba(3, 93, 161, ${opacity})`\n        : `rgba(106, 189, 252, ${opacity})`;\n\n    midpoints.forEach((midpoint) => {\n      context.beginPath();\n      context.arc(midpoint.x, midpoint.y, midpointRadius, 0, 2 * Math.PI);\n      context.fill();\n    });\n\n    context.restore();\n  }\n\n  return {\n    runtime: (state?.runtime ?? 0) + deltaTime,\n  };\n};\n\nconst renderBindingHighlightForBindableElement = (\n  app: AppClassProperties,\n  context: CanvasRenderingContext2D,\n  suggestedBinding: AppState[\"suggestedBinding\"],\n  allElementsMap: NonDeletedSceneElementsMap,\n  appState: InteractiveCanvasAppState,\n  deltaTime: number,\n  state?: { runtime: number },\n) => {\n  if (suggestedBinding === null) {\n    return;\n  }\n\n  if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n    return renderBindingHighlightForBindableElement_complex(\n      app,\n      context,\n      suggestedBinding.element,\n      allElementsMap,\n      appState,\n      deltaTime,\n      state,\n    );\n  }\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  const pointerCoords = app.lastPointerMoveCoords\n    ? pointFrom<GlobalPoint>(\n        app.lastPointerMoveCoords.x,\n        app.lastPointerMoveCoords.y,\n      )\n    : null;\n  renderBindingHighlightForBindableElement_simple(\n    context,\n    suggestedBinding,\n    allElementsMap,\n    appState,\n    pointerCoords,\n  );\n  context.restore();\n};\n\ntype ElementSelectionBorder = {\n  angle: number;\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  selectionColors: string[];\n  dashed?: boolean;\n  cx: number;\n  cy: number;\n  activeEmbeddable: boolean;\n  padding?: number;\n};\n\nconst renderSelectionBorder = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  elementProperties: ElementSelectionBorder,\n) => {\n  const {\n    angle,\n    x1,\n    y1,\n    x2,\n    y2,\n    selectionColors,\n    cx,\n    cy,\n    dashed,\n    activeEmbeddable,\n  } = elementProperties;\n  const elementWidth = x2 - x1;\n  const elementHeight = y2 - y1;\n\n  const padding =\n    elementProperties.padding ?? DEFAULT_TRANSFORM_HANDLE_SPACING * 2;\n\n  const linePadding = padding / appState.zoom.value;\n  const lineWidth = 8 / appState.zoom.value;\n  const spaceWidth = 4 / appState.zoom.value;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  context.lineWidth = (activeEmbeddable ? 4 : 1) / appState.zoom.value;\n\n  const count = selectionColors.length;\n  for (let index = 0; index < count; ++index) {\n    context.strokeStyle = selectionColors[index];\n    if (dashed) {\n      context.setLineDash([\n        lineWidth,\n        spaceWidth + (lineWidth + spaceWidth) * (count - 1),\n      ]);\n    }\n    context.lineDashOffset = (lineWidth + spaceWidth) * index;\n    strokeRectWithRotation_simple(\n      context,\n      x1 - linePadding,\n      y1 - linePadding,\n      elementWidth + linePadding * 2,\n      elementHeight + linePadding * 2,\n      cx,\n      cy,\n      angle,\n    );\n  }\n  context.restore();\n};\n\nconst renderFrameHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  frame: NonDeleted<JsonDrawFrameLikeElement>,\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(frame, elementsMap);\n  const width = x2 - x1;\n  const height = y2 - y1;\n\n  context.strokeStyle = \"rgb(0,118,255)\";\n  context.lineWidth = FRAME_STYLE.strokeWidth / appState.zoom.value;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  strokeRectWithRotation_simple(\n    context,\n    x1,\n    y1,\n    width,\n    height,\n    x1 + width / 2,\n    y1 + height / 2,\n    frame.angle,\n    false,\n    FRAME_STYLE.radius / appState.zoom.value,\n  );\n  context.restore();\n};\n\nconst renderElementsBoxHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  elements: NonDeleted<JsonDrawElement>[],\n  config?: { colors?: string[]; dashed?: boolean },\n) => {\n  const { colors = [\"rgb(0,118,255)\"], dashed = false } = config || {};\n  const individualElements = elements.filter(\n    (element) => element.groupIds.length === 0,\n  );\n\n  const elementsInGroups = elements.filter(\n    (element) => element.groupIds.length > 0,\n  );\n\n  const getSelectionFromElements = (elements: JsonDrawElement[]) => {\n    const [x1, y1, x2, y2] = getCommonBounds(elements);\n    return {\n      angle: 0,\n      x1,\n      x2,\n      y1,\n      y2,\n      selectionColors: colors,\n      dashed,\n      cx: x1 + (x2 - x1) / 2,\n      cy: y1 + (y2 - y1) / 2,\n      activeEmbeddable: false,\n    };\n  };\n\n  const getSelectionForGroupId = (groupId: GroupId) => {\n    const groupElements = getElementsInGroup(elements, groupId);\n    return getSelectionFromElements(groupElements);\n  };\n\n  Object.entries(selectGroupsFromGivenElements(elementsInGroups, appState))\n    .filter(([id, isSelected]) => isSelected)\n    .map(([id, isSelected]) => id)\n    .map((groupId) => getSelectionForGroupId(groupId))\n    .concat(\n      individualElements.map((element) => getSelectionFromElements([element])),\n    )\n    .forEach((selection) =>\n      renderSelectionBorder(context, appState, selection),\n    );\n};\n\nconst renderLinearPointHandles = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  element: NonDeleted<JsonDrawLinearElement>,\n  elementsMap: RenderableElementsMap,\n) => {\n  if (!appState.selectedLinearElement) {\n    return;\n  }\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  context.lineWidth = 1 / appState.zoom.value;\n  const points: GlobalPoint[] = LinearElementEditor.getPointsGlobalCoordinates(\n    element,\n    elementsMap,\n  );\n\n  const { POINT_HANDLE_SIZE } = LinearElementEditor;\n  const radius = appState.selectedLinearElement?.isEditing\n    ? POINT_HANDLE_SIZE\n    : POINT_HANDLE_SIZE / 2;\n\n  const _isElbowArrow = isElbowArrow(element);\n  const _isLineElement = isLineElement(element);\n\n  points.forEach((point, idx) => {\n    if (_isElbowArrow && idx !== 0 && idx !== points.length - 1) {\n      return;\n    }\n\n    const isOverlappingPoint =\n      idx > 0 &&\n      (idx !== points.length - 1 || !_isLineElement || !element.polygon) &&\n      pointsEqual(\n        point,\n        idx === points.length - 1 ? points[0] : points[idx - 1],\n        2 / appState.zoom.value,\n      );\n\n    let isSelected =\n      !!appState.selectedLinearElement?.isEditing &&\n      !!appState.selectedLinearElement?.selectedPointsIndices?.includes(idx);\n    // when element is a polygon, highlight the last point as well if first\n    // point is selected since they overlap and the last point tends to be\n    // rendered on top\n    if (\n      _isLineElement &&\n      element.polygon &&\n      !isSelected &&\n      idx === element.points.length - 1 &&\n      !!appState.selectedLinearElement?.isEditing &&\n      !!appState.selectedLinearElement?.selectedPointsIndices?.includes(0)\n    ) {\n      isSelected = true;\n    }\n\n    renderSingleLinearPoint(\n      context,\n      appState,\n      point,\n      radius,\n      isSelected,\n      false,\n      isOverlappingPoint,\n    );\n  });\n\n  // Rendering segment mid points\n  if (isElbowArrow(element)) {\n    const fixedSegments =\n      element.fixedSegments?.map((segment) => segment.index) || [];\n    points.slice(0, -1).forEach((p, idx) => {\n      if (\n        !LinearElementEditor.isSegmentTooShort(\n          element,\n          points[idx + 1],\n          points[idx],\n          idx,\n          appState.zoom,\n        )\n      ) {\n        renderSingleLinearPoint(\n          context,\n          appState,\n          pointFrom<GlobalPoint>(\n            (p[0] + points[idx + 1][0]) / 2,\n            (p[1] + points[idx + 1][1]) / 2,\n          ),\n          POINT_HANDLE_SIZE / 2,\n          false,\n          !fixedSegments.includes(idx + 1),\n          false,\n        );\n      }\n    });\n  } else {\n    const midPoints = LinearElementEditor.getEditorMidPoints(\n      element,\n      elementsMap,\n      appState,\n    ).filter(\n      (midPoint, idx, midPoints): midPoint is GlobalPoint =>\n        midPoint !== null &&\n        !(isElbowArrow(element) && (idx === 0 || idx === midPoints.length - 1)),\n    );\n\n    midPoints.forEach((segmentMidPoint) => {\n      if (appState.selectedLinearElement?.isEditing || points.length === 2) {\n        renderSingleLinearPoint(\n          context,\n          appState,\n          segmentMidPoint,\n          POINT_HANDLE_SIZE / 2,\n          false,\n          true,\n          false,\n        );\n      }\n    });\n  }\n\n  context.restore();\n};\n\nconst renderFocusPointConnectionLine = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  fromPoint: GlobalPoint,\n  toPoint: GlobalPoint,\n) => {\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  context.strokeStyle = \"rgba(134, 131, 226, 0.6)\";\n  context.lineWidth = 1 / appState.zoom.value;\n  context.setLineDash([4 / appState.zoom.value, 4 / appState.zoom.value]);\n\n  context.beginPath();\n  context.moveTo(fromPoint[0], fromPoint[1]);\n  context.lineTo(toPoint[0], toPoint[1]);\n  context.stroke();\n\n  context.restore();\n};\n\nconst renderFocusPointCicle = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  point: GlobalPoint,\n  radius: number,\n  isHovered: boolean,\n) => {\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  context.strokeStyle = \"rgba(134, 131, 226, 0.6)\";\n  context.lineWidth = 1 / appState.zoom.value;\n  context.setLineDash([]);\n  context.fillStyle = isHovered\n    ? \"rgba(134, 131, 226, 0.9)\"\n    : \"rgba(255, 255, 255, 0.9)\";\n\n  fillCircle(\n    context,\n    point[0],\n    point[1],\n    radius / appState.zoom.value,\n    true,\n    true,\n  );\n  context.restore();\n};\n\nconst renderFocusPointIndicator = ({\n  arrow,\n  appState,\n  type,\n  context,\n  elementsMap,\n}: {\n  arrow: NonDeleted<JsonDrawArrowElement>;\n  appState: InteractiveCanvasAppState;\n  context: CanvasRenderingContext2D;\n  elementsMap: NonDeletedSceneElementsMap;\n  type: \"start\" | \"end\";\n}) => {\n  const binding = type === \"start\" ? arrow.startBinding : arrow.endBinding;\n  const bindableElement =\n    binding?.elementId && elementsMap.get(binding.elementId);\n\n  if (\n    !bindableElement ||\n    !isBindableElement(bindableElement) ||\n    bindableElement.isDeleted\n  ) {\n    return;\n  }\n\n  const focusPoint = getGlobalFixedPointForBindableElement(\n    binding.fixedPoint,\n    bindableElement,\n    elementsMap,\n  );\n\n  // Only render if focus point is within the bindable element\n  if (\n    !isFocusPointVisible(\n      focusPoint,\n      arrow,\n      bindableElement,\n      elementsMap,\n      appState,\n    )\n  ) {\n    return;\n  }\n\n  const linearState = appState.selectedLinearElement;\n  const isDragging = !!linearState?.isDragging;\n  const pointIndex = type === \"start\" ? 0 : arrow.points.length - 1;\n  const pointSelected =\n    !!linearState?.selectedPointsIndices?.includes(pointIndex);\n\n  // render focus point highlight\n  // ----------------------------\n\n  if (\n    linearState?.hoveredFocusPointBinding === type &&\n    !linearState.draggedFocusPointBinding\n  ) {\n    renderFocusPointHighlight(context, appState, focusPoint);\n  }\n\n  // render focus point\n  // ----------------------------\n\n  if (!(pointSelected && isDragging)) {\n    const focusPoint = getGlobalFixedPointForBindableElement(\n      binding.fixedPoint,\n      bindableElement,\n      elementsMap,\n    );\n\n    const isHovered = linearState?.hoveredFocusPointBinding === type;\n\n    // Render dashed line from arrow start point to focus point\n    const arrowPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n      arrow,\n      pointIndex,\n      elementsMap,\n    );\n\n    renderFocusPointConnectionLine(context, appState, arrowPoint, focusPoint);\n\n    renderFocusPointCicle(\n      context,\n      appState,\n      focusPoint,\n      FOCUS_POINT_SIZE / 1.5,\n      isHovered,\n    );\n  }\n};\n\nconst renderTransformHandles = (\n  context: CanvasRenderingContext2D,\n  renderConfig: InteractiveCanvasRenderConfig,\n  appState: InteractiveCanvasAppState,\n  transformHandles: TransformHandles,\n  angle: number,\n): void => {\n  Object.keys(transformHandles).forEach((key) => {\n    const transformHandle = transformHandles[key as TransformHandleType];\n    if (transformHandle !== undefined) {\n      const [x, y, width, height] = transformHandle;\n\n      context.save();\n      context.lineWidth = 1 / appState.zoom.value;\n      if (renderConfig.selectionColor) {\n        context.strokeStyle = renderConfig.selectionColor;\n      }\n      if (key === \"rotation\") {\n        fillCircle(context, x + width / 2, y + height / 2, width / 2, true);\n        // prefer round corners if roundRect API is available\n      } else if (context.roundRect) {\n        context.beginPath();\n        context.roundRect(x, y, width, height, 2 / appState.zoom.value);\n        context.fill();\n        context.stroke();\n      } else {\n        strokeRectWithRotation_simple(\n          context,\n          x,\n          y,\n          width,\n          height,\n          x + width / 2,\n          y + height / 2,\n          angle,\n          true, // fill before stroke\n        );\n      }\n      context.restore();\n    }\n  });\n};\n\nconst renderCropHandles = (\n  context: CanvasRenderingContext2D,\n  renderConfig: InteractiveCanvasRenderConfig,\n  appState: InteractiveCanvasAppState,\n  croppingElement: JsonDrawImageElement,\n  elementsMap: ElementsMap,\n): void => {\n  const [x1, y1, , , cx, cy] = getElementAbsoluteCoords(\n    croppingElement,\n    elementsMap,\n  );\n\n  const LINE_WIDTH = 3;\n  const LINE_LENGTH = 20;\n\n  const ZOOMED_LINE_WIDTH = LINE_WIDTH / appState.zoom.value;\n  const ZOOMED_HALF_LINE_WIDTH = ZOOMED_LINE_WIDTH / 2;\n\n  const HALF_WIDTH = cx - x1 + ZOOMED_LINE_WIDTH;\n  const HALF_HEIGHT = cy - y1 + ZOOMED_LINE_WIDTH;\n\n  const HORIZONTAL_LINE_LENGTH = Math.min(\n    LINE_LENGTH / appState.zoom.value,\n    HALF_WIDTH,\n  );\n  const VERTICAL_LINE_LENGTH = Math.min(\n    LINE_LENGTH / appState.zoom.value,\n    HALF_HEIGHT,\n  );\n\n  context.save();\n  context.fillStyle = renderConfig.selectionColor;\n  context.strokeStyle = renderConfig.selectionColor;\n  context.lineWidth = ZOOMED_LINE_WIDTH;\n\n  const handles: Array<\n    [\n      [number, number],\n      [number, number],\n      [number, number],\n      [number, number],\n      [number, number],\n    ]\n  > = [\n    [\n      // x, y\n      [-HALF_WIDTH, -HALF_HEIGHT],\n      // horizontal line: first start and to\n      [0, ZOOMED_HALF_LINE_WIDTH],\n      [HORIZONTAL_LINE_LENGTH, ZOOMED_HALF_LINE_WIDTH],\n      // vertical line: second  start and to\n      [ZOOMED_HALF_LINE_WIDTH, 0],\n      [ZOOMED_HALF_LINE_WIDTH, VERTICAL_LINE_LENGTH],\n    ],\n    [\n      [HALF_WIDTH - ZOOMED_HALF_LINE_WIDTH, -HALF_HEIGHT],\n      [ZOOMED_HALF_LINE_WIDTH, ZOOMED_HALF_LINE_WIDTH],\n      [\n        -HORIZONTAL_LINE_LENGTH + ZOOMED_HALF_LINE_WIDTH,\n        ZOOMED_HALF_LINE_WIDTH,\n      ],\n      [0, 0],\n      [0, VERTICAL_LINE_LENGTH],\n    ],\n    [\n      [-HALF_WIDTH, HALF_HEIGHT],\n      [0, -ZOOMED_HALF_LINE_WIDTH],\n      [HORIZONTAL_LINE_LENGTH, -ZOOMED_HALF_LINE_WIDTH],\n      [ZOOMED_HALF_LINE_WIDTH, 0],\n      [ZOOMED_HALF_LINE_WIDTH, -VERTICAL_LINE_LENGTH],\n    ],\n    [\n      [HALF_WIDTH - ZOOMED_HALF_LINE_WIDTH, HALF_HEIGHT],\n      [ZOOMED_HALF_LINE_WIDTH, -ZOOMED_HALF_LINE_WIDTH],\n      [\n        -HORIZONTAL_LINE_LENGTH + ZOOMED_HALF_LINE_WIDTH,\n        -ZOOMED_HALF_LINE_WIDTH,\n      ],\n      [0, 0],\n      [0, -VERTICAL_LINE_LENGTH],\n    ],\n  ];\n\n  handles.forEach((handle) => {\n    const [[x, y], [x1s, y1s], [x1t, y1t], [x2s, y2s], [x2t, y2t]] = handle;\n\n    context.save();\n    context.translate(cx, cy);\n    context.rotate(croppingElement.angle);\n\n    context.beginPath();\n    context.moveTo(x + x1s, y + y1s);\n    context.lineTo(x + x1t, y + y1t);\n    context.stroke();\n\n    context.beginPath();\n    context.moveTo(x + x2s, y + y2s);\n    context.lineTo(x + x2t, y + y2t);\n    context.stroke();\n    context.restore();\n  });\n\n  context.restore();\n};\n\nconst renderTextBox = (\n  text: NonDeleted<JsonDrawTextElement>,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  selectionColor: InteractiveCanvasRenderConfig[\"selectionColor\"],\n) => {\n  context.save();\n  const padding = (DEFAULT_TRANSFORM_HANDLE_SPACING * 2) / appState.zoom.value;\n  const width = text.width + padding * 2;\n  const height = text.height + padding * 2;\n  const cx = text.x + width / 2;\n  const cy = text.y + height / 2;\n  const shiftX = -(width / 2 + padding);\n  const shiftY = -(height / 2 + padding);\n  context.translate(cx + appState.scrollX, cy + appState.scrollY);\n  context.rotate(text.angle);\n  context.lineWidth = 1 / appState.zoom.value;\n  context.strokeStyle = selectionColor;\n  context.strokeRect(shiftX, shiftY, width, height);\n  context.restore();\n};\n\nconst _renderInteractiveScene = ({\n  app,\n  canvas,\n  elementsMap,\n  visibleElements,\n  selectedElements,\n  allElementsMap,\n  scale,\n  appState,\n  renderConfig,\n  editorInterface,\n  animationState,\n  deltaTime,\n}: InteractiveSceneRenderConfig): {\n  scrollBars?: ReturnType<typeof getScrollBars>;\n  atLeastOneVisibleElement: boolean;\n  elementsMap: RenderableElementsMap;\n  animationState?: typeof animationState;\n} => {\n  if (canvas === null) {\n    return { atLeastOneVisibleElement: false, elementsMap };\n  }\n\n  const [normalizedWidth, normalizedHeight] = getNormalizedCanvasDimensions(\n    canvas,\n    scale,\n  );\n  let nextAnimationState = animationState;\n\n  const context = bootstrapCanvas({\n    canvas,\n    scale,\n    normalizedWidth,\n    normalizedHeight,\n  });\n\n  // Apply zoom\n  context.save();\n  context.scale(appState.zoom.value, appState.zoom.value);\n\n  let editingLinearElement: NonDeleted<JsonDrawLinearElement> | undefined =\n    undefined;\n\n  visibleElements.forEach((element) => {\n    // Getting the element using LinearElementEditor during collab mismatches version - being one head of visible elements due to\n    // ShapeCache returns empty hence making sure that we get the\n    // correct element from visible elements\n    if (\n      appState.selectedLinearElement?.isEditing &&\n      appState.selectedLinearElement.elementId === element.id\n    ) {\n      if (element) {\n        editingLinearElement = element as NonDeleted<JsonDrawLinearElement>;\n      }\n    }\n  });\n\n  if (editingLinearElement) {\n    renderLinearPointHandles(\n      context,\n      appState,\n      editingLinearElement,\n      elementsMap,\n    );\n  }\n\n  // Paint selection element\n  if (appState.selectionElement && !appState.isCropping) {\n    try {\n      renderSelectionElement(\n        appState.selectionElement,\n        context,\n        appState,\n        renderConfig.selectionColor,\n      );\n    } catch (error: any) {\n      console.error(error);\n    }\n  }\n\n  if (\n    appState.editingTextElement &&\n    isTextElement(appState.editingTextElement)\n  ) {\n    const textElement = allElementsMap.get(appState.editingTextElement.id) as\n      | JsonDrawTextElement\n      | undefined;\n    if (textElement && !textElement.autoResize) {\n      renderTextBox(\n        textElement,\n        context,\n        appState,\n        renderConfig.selectionColor,\n      );\n    }\n  }\n\n  if (appState.isBindingEnabled && appState.suggestedBinding) {\n    nextAnimationState = {\n      ...animationState,\n      bindingHighlight: renderBindingHighlightForBindableElement(\n        app,\n        context,\n        appState.suggestedBinding,\n        allElementsMap,\n        appState,\n        deltaTime,\n        animationState?.bindingHighlight,\n      ),\n    };\n  } else {\n    nextAnimationState = {\n      ...animationState,\n      bindingHighlight: undefined,\n    };\n  }\n\n  if (appState.frameToHighlight) {\n    renderFrameHighlight(\n      context,\n      appState,\n      appState.frameToHighlight,\n      elementsMap,\n    );\n  }\n\n  if (appState.elementsToHighlight) {\n    renderElementsBoxHighlight(context, appState, appState.elementsToHighlight);\n  }\n\n  if (appState.activeLockedId) {\n    const element = allElementsMap.get(appState.activeLockedId);\n    const elements = element\n      ? [element]\n      : getElementsInGroup(allElementsMap, appState.activeLockedId);\n    renderElementsBoxHighlight(context, appState, elements, {\n      colors: [\"#ced4da\"],\n      dashed: true,\n    });\n  }\n\n  const isFrameSelected = selectedElements.some((element) =>\n    isFrameLikeElement(element),\n  );\n\n  // Getting the element using LinearElementEditor during collab mismatches version - being one head of visible elements due to\n  // ShapeCache returns empty hence making sure that we get the\n  // correct element from visible elements\n  if (\n    selectedElements.length === 1 &&\n    appState.selectedLinearElement?.isEditing &&\n    appState.selectedLinearElement.elementId === selectedElements[0].id\n  ) {\n    renderLinearPointHandles(\n      context,\n      appState,\n      selectedElements[0] as NonDeleted<JsonDrawLinearElement>,\n      elementsMap,\n    );\n  }\n\n  const linearState = appState.selectedLinearElement;\n  const selectedLinearElement =\n    linearState &&\n    LinearElementEditor.getElement(linearState.elementId, allElementsMap);\n  // Arrows have a different highlight behavior when\n  // they are the only selected element\n  if (selectedLinearElement) {\n    if (!appState.selectedLinearElement.isDragging) {\n      if (linearState.segmentMidPointHoveredCoords) {\n        renderElbowArrowMidPointHighlight(context, appState);\n      } else if (\n        isElbowArrow(selectedLinearElement)\n          ? linearState.hoverPointIndex === 0 ||\n            linearState.hoverPointIndex ===\n              selectedLinearElement.points.length - 1\n          : linearState.hoverPointIndex >= 0\n      ) {\n        renderLinearElementPointHighlight(context, appState, elementsMap);\n      }\n    }\n\n    if (isArrowElement(selectedLinearElement)) {\n      renderFocusPointIndicator({\n        arrow: selectedLinearElement,\n        elementsMap: allElementsMap,\n        appState,\n        context,\n        type: \"start\",\n      });\n\n      renderFocusPointIndicator({\n        arrow: selectedLinearElement,\n        elementsMap: allElementsMap,\n        appState,\n        context,\n        type: \"end\",\n      });\n    }\n  }\n\n  // Paint selected elements\n  if (\n    !appState.multiElement &&\n    !appState.newElement &&\n    !appState.selectedLinearElement?.isEditing\n  ) {\n    const showBoundingBox = hasBoundingBox(\n      selectedElements,\n      appState,\n      editorInterface,\n    );\n\n    const isSingleLinearElementSelected =\n      selectedElements.length === 1 && isLinearElement(selectedElements[0]);\n    // render selected linear element points\n    if (\n      isSingleLinearElementSelected &&\n      appState.selectedLinearElement?.elementId === selectedElements[0].id &&\n      !selectedElements[0].locked\n    ) {\n      renderLinearPointHandles(\n        context,\n        appState,\n        selectedElements[0] as JsonDrawLinearElement,\n        elementsMap,\n      );\n    }\n    const selectionColor = renderConfig.selectionColor || \"#000\";\n\n    if (showBoundingBox) {\n      // Optimisation for finding quickly relevant element ids\n      const locallySelectedIds = arrayToMap(selectedElements);\n\n      const selections: ElementSelectionBorder[] = [];\n\n      for (const element of elementsMap.values()) {\n        const selectionColors = [];\n        const remoteClients = renderConfig.remoteSelectedElementIds.get(\n          element.id,\n        );\n        if (\n          !(\n            // Elbow arrow elements cannot be selected when bound on either end\n            (\n              isSingleLinearElementSelected &&\n              isElbowArrow(element) &&\n              (element.startBinding || element.endBinding)\n            )\n          )\n        ) {\n          // local user\n          if (\n            locallySelectedIds.has(element.id) &&\n            !isSelectedViaGroup(appState, element)\n          ) {\n            selectionColors.push(selectionColor);\n          }\n          // remote users\n          if (remoteClients) {\n            selectionColors.push(\n              ...remoteClients.map((socketId) => {\n                const background = getClientColor(\n                  socketId,\n                  appState.collaborators.get(socketId),\n                );\n                return background;\n              }),\n            );\n          }\n        }\n\n        if (selectionColors.length) {\n          const [x1, y1, x2, y2, cx, cy] = getElementAbsoluteCoords(\n            element,\n            elementsMap,\n            true,\n          );\n          selections.push({\n            angle: element.angle,\n            x1,\n            y1,\n            x2,\n            y2,\n            selectionColors: element.locked ? [\"#ced4da\"] : selectionColors,\n            dashed: !!remoteClients || element.locked,\n            cx,\n            cy,\n            activeEmbeddable:\n              appState.activeEmbeddable?.element === element &&\n              appState.activeEmbeddable.state === \"active\",\n            padding:\n              element.id === appState.croppingElementId ||\n              isImageElement(element)\n                ? 0\n                : undefined,\n          });\n        }\n      }\n\n      const addSelectionForGroupId = (groupId: GroupId) => {\n        const groupElements = getElementsInGroup(elementsMap, groupId);\n        const [x1, y1, x2, y2] = getCommonBounds(groupElements);\n        selections.push({\n          angle: 0,\n          x1,\n          x2,\n          y1,\n          y2,\n          selectionColors: groupElements.some((el) => el.locked)\n            ? [\"#ced4da\"]\n            : [\"#000\"],\n          dashed: true,\n          cx: x1 + (x2 - x1) / 2,\n          cy: y1 + (y2 - y1) / 2,\n          activeEmbeddable: false,\n        });\n      };\n\n      for (const groupId of getSelectedGroupIds(appState)) {\n        // TODO: support multiplayer selected group IDs\n        addSelectionForGroupId(groupId);\n      }\n\n      if (appState.editingGroupId) {\n        addSelectionForGroupId(appState.editingGroupId);\n      }\n\n      selections.forEach((selection) =>\n        renderSelectionBorder(context, appState, selection),\n      );\n    }\n    // Paint resize transformHandles\n    context.save();\n    context.translate(appState.scrollX, appState.scrollY);\n\n    if (selectedElements.length === 1) {\n      context.fillStyle = \"#fff\";\n      const transformHandles = getTransformHandles(\n        selectedElements[0],\n        appState.zoom,\n        elementsMap,\n        \"mouse\", // when we render we don't know which pointer type so use mouse,\n        getOmitSidesForEditorInterface(editorInterface),\n      );\n      if (\n        !appState.viewModeEnabled &&\n        showBoundingBox &&\n        // do not show transform handles when text is being edited\n        !isTextElement(appState.editingTextElement) &&\n        // do not show transform handles when image is being cropped\n        !appState.croppingElementId\n      ) {\n        renderTransformHandles(\n          context,\n          renderConfig,\n          appState,\n          transformHandles,\n          selectedElements[0].angle,\n        );\n      }\n\n      if (appState.croppingElementId && !appState.isCropping) {\n        const croppingElement = elementsMap.get(appState.croppingElementId);\n\n        if (croppingElement && isImageElement(croppingElement)) {\n          renderCropHandles(\n            context,\n            renderConfig,\n            appState,\n            croppingElement,\n            elementsMap,\n          );\n        }\n      }\n    } else if (\n      selectedElements.length > 1 &&\n      !appState.isRotating &&\n      !selectedElements.some((el) => el.locked)\n    ) {\n      const dashedLinePadding =\n        (DEFAULT_TRANSFORM_HANDLE_SPACING * 2) / appState.zoom.value;\n      context.fillStyle = \"#fff\";\n      const [x1, y1, x2, y2] = getCommonBounds(selectedElements, elementsMap);\n      const initialLineDash = context.getLineDash();\n      context.setLineDash([2 / appState.zoom.value]);\n      const lineWidth = context.lineWidth;\n      context.lineWidth = 1 / appState.zoom.value;\n      context.strokeStyle = selectionColor;\n      strokeRectWithRotation_simple(\n        context,\n        x1 - dashedLinePadding,\n        y1 - dashedLinePadding,\n        x2 - x1 + dashedLinePadding * 2,\n        y2 - y1 + dashedLinePadding * 2,\n        (x1 + x2) / 2,\n        (y1 + y2) / 2,\n        0,\n      );\n      context.lineWidth = lineWidth;\n      context.setLineDash(initialLineDash);\n      const transformHandles = getTransformHandlesFromCoords(\n        [x1, y1, x2, y2, (x1 + x2) / 2, (y1 + y2) / 2],\n        0 as Radians,\n        appState.zoom,\n        \"mouse\",\n        isFrameSelected\n          ? {\n              ...getOmitSidesForEditorInterface(editorInterface),\n              rotation: true,\n            }\n          : getOmitSidesForEditorInterface(editorInterface),\n      );\n      if (selectedElements.some((element) => !element.locked)) {\n        renderTransformHandles(\n          context,\n          renderConfig,\n          appState,\n          transformHandles,\n          0,\n        );\n      }\n    }\n    context.restore();\n  }\n\n  appState.searchMatches?.matches.forEach(({ id, focus, matchedLines }) => {\n    const element = elementsMap.get(id);\n\n    if (element) {\n      const [elementX1, elementY1, , , cx, cy] = getElementAbsoluteCoords(\n        element,\n        elementsMap,\n        true,\n      );\n\n      context.save();\n      if (appState.theme === THEME.LIGHT) {\n        if (focus) {\n          context.fillStyle = \"rgba(255, 124, 0, 0.4)\";\n        } else {\n          context.fillStyle = \"rgba(255, 226, 0, 0.4)\";\n        }\n      } else if (focus) {\n        context.fillStyle = \"rgba(229, 82, 0, 0.4)\";\n      } else {\n        context.fillStyle = \"rgba(99, 52, 0, 0.4)\";\n      }\n\n      const zoomFactor = isFrameLikeElement(element) ? appState.zoom.value : 1;\n\n      context.translate(appState.scrollX, appState.scrollY);\n      context.translate(cx, cy);\n      context.rotate(element.angle);\n\n      matchedLines.forEach((matchedLine) => {\n        (matchedLine.showOnCanvas || focus) &&\n          context.fillRect(\n            elementX1 + matchedLine.offsetX / zoomFactor - cx,\n            elementY1 + matchedLine.offsetY / zoomFactor - cy,\n            matchedLine.width / zoomFactor,\n            matchedLine.height / zoomFactor,\n          );\n      });\n\n      context.restore();\n    }\n  });\n\n  renderSnaps(context, appState);\n\n  context.restore();\n\n  renderRemoteCursors({\n    context,\n    renderConfig,\n    appState,\n    normalizedWidth,\n    normalizedHeight,\n  });\n\n  // Paint scrollbars\n  let scrollBars;\n  if (renderConfig.renderScrollbars) {\n    scrollBars = getScrollBars(\n      elementsMap,\n      normalizedWidth,\n      normalizedHeight,\n      appState,\n    );\n\n    context.save();\n    context.fillStyle = SCROLLBAR_COLOR;\n    context.strokeStyle = \"rgba(255,255,255,0.8)\";\n    [scrollBars.horizontal, scrollBars.vertical].forEach((scrollBar) => {\n      if (scrollBar) {\n        roundRect(\n          context,\n          scrollBar.x,\n          scrollBar.y,\n          scrollBar.width,\n          scrollBar.height,\n          SCROLLBAR_WIDTH / 2,\n        );\n      }\n    });\n    context.restore();\n  }\n\n  return {\n    scrollBars,\n    atLeastOneVisibleElement: visibleElements.length > 0,\n    elementsMap,\n    animationState: nextAnimationState,\n  };\n};\n\n/**\n * Interactive scene is the ui-canvas where we render bounding boxes, selections\n * and other ui stuff.\n */\nexport const renderInteractiveScene = <\n  U extends typeof _renderInteractiveScene,\n>(\n  renderConfig: InteractiveSceneRenderConfig,\n): ReturnType<U> => {\n  const ret = _renderInteractiveScene(renderConfig);\n  renderConfig.callback(ret);\n  return ret as ReturnType<U>;\n};\n","import React, { useEffect, useRef } from \"react\";\n\nimport {\n  CURSOR_TYPE,\n  isShallowEqual,\n  sceneCoordsToViewportCoords,\n  type EditorInterface,\n} from \"@jsondraw/common\";\nimport { AnimationController } from \"@jsondraw/jsondraw/renderer/animation\";\n\nimport type {\n  InteractiveCanvasRenderConfig,\n  InteractiveSceneRenderAnimationState,\n  InteractiveSceneRenderConfig,\n  RenderableElementsMap,\n  RenderInteractiveSceneCallback,\n} from \"@jsondraw/jsondraw/scene/types\";\n\nimport type {\n  NonDeletedJsonDrawElement,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\n\nimport { t } from \"../../i18n\";\nimport { renderInteractiveScene } from \"../../renderer/interactiveScene\";\n\nimport type {\n  AppClassProperties,\n  AppState,\n  InteractiveCanvasAppState,\n} from \"../../types\";\nimport type { DOMAttributes } from \"react\";\n\ntype InteractiveCanvasProps = {\n  containerRef: React.RefObject<HTMLDivElement | null>;\n  canvas: HTMLCanvasElement | null;\n  elementsMap: RenderableElementsMap;\n  visibleElements: readonly NonDeletedJsonDrawElement[];\n  selectedElements: readonly NonDeletedJsonDrawElement[];\n  allElementsMap: NonDeletedSceneElementsMap;\n  sceneNonce: number | undefined;\n  selectionNonce: number | undefined;\n  scale: number;\n  appState: InteractiveCanvasAppState;\n  renderScrollbars: boolean;\n  editorInterface: EditorInterface;\n  app: AppClassProperties;\n  renderInteractiveSceneCallback: (\n    data: RenderInteractiveSceneCallback,\n  ) => void;\n  handleCanvasRef: (canvas: HTMLCanvasElement | null) => void;\n  onContextMenu: Exclude<\n    DOMAttributes<HTMLCanvasElement | HTMLDivElement>[\"onContextMenu\"],\n    undefined\n  >;\n  onPointerMove: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerMove\"],\n    undefined\n  >;\n  onPointerUp: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerUp\"],\n    undefined\n  >;\n  onPointerCancel: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerCancel\"],\n    undefined\n  >;\n  onTouchMove: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onTouchMove\"],\n    undefined\n  >;\n  onPointerDown: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerDown\"],\n    undefined\n  >;\n  onDoubleClick: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onDoubleClick\"],\n    undefined\n  >;\n};\n\nexport const INTERACTIVE_SCENE_ANIMATION_KEY = \"animateInteractiveScene\";\n\nconst InteractiveCanvas = (props: InteractiveCanvasProps) => {\n  const isComponentMounted = useRef(false);\n  const rendererParams = useRef(null as InteractiveSceneRenderConfig | null);\n\n  useEffect(() => {\n    if (!isComponentMounted.current) {\n      isComponentMounted.current = true;\n      return;\n    }\n\n    const remotePointerButton: InteractiveCanvasRenderConfig[\"remotePointerButton\"] =\n      new Map();\n    const remotePointerViewportCoords: InteractiveCanvasRenderConfig[\"remotePointerViewportCoords\"] =\n      new Map();\n    const remoteSelectedElementIds: InteractiveCanvasRenderConfig[\"remoteSelectedElementIds\"] =\n      new Map();\n    const remotePointerUsernames: InteractiveCanvasRenderConfig[\"remotePointerUsernames\"] =\n      new Map();\n    const remotePointerUserStates: InteractiveCanvasRenderConfig[\"remotePointerUserStates\"] =\n      new Map();\n\n    props.appState.collaborators.forEach((user, socketId) => {\n      if (user.selectedElementIds) {\n        for (const id of Object.keys(user.selectedElementIds)) {\n          if (!remoteSelectedElementIds.has(id)) {\n            remoteSelectedElementIds.set(id, []);\n          }\n          remoteSelectedElementIds.get(id)!.push(socketId);\n        }\n      }\n      if (!user.pointer || user.pointer.renderCursor === false) {\n        return;\n      }\n      if (user.username) {\n        remotePointerUsernames.set(socketId, user.username);\n      }\n      if (user.userState) {\n        remotePointerUserStates.set(socketId, user.userState);\n      }\n      remotePointerViewportCoords.set(\n        socketId,\n        sceneCoordsToViewportCoords(\n          {\n            sceneX: user.pointer.x,\n            sceneY: user.pointer.y,\n          },\n          props.appState,\n        ),\n      );\n      remotePointerButton.set(socketId, user.button);\n    });\n\n    const selectionColor =\n      (props.containerRef?.current &&\n        getComputedStyle(props.containerRef.current).getPropertyValue(\n          \"--color-selection\",\n        )) ||\n      \"#6965db\";\n\n    rendererParams.current = {\n      app: props.app,\n      canvas: props.canvas,\n      elementsMap: props.elementsMap,\n      visibleElements: props.visibleElements,\n      selectedElements: props.selectedElements,\n      allElementsMap: props.allElementsMap,\n      scale: window.devicePixelRatio,\n      appState: props.appState,\n      renderConfig: {\n        remotePointerViewportCoords,\n        remotePointerButton,\n        remoteSelectedElementIds,\n        remotePointerUsernames,\n        remotePointerUserStates,\n        selectionColor,\n        renderScrollbars: props.renderScrollbars,\n        // NOTE not memoized on so we don't rerender on cursor move\n        lastViewportPosition: props.app.lastViewportPosition,\n      },\n      editorInterface: props.editorInterface,\n      callback: props.renderInteractiveSceneCallback,\n      animationState: {\n        bindingHighlight: undefined,\n      },\n      deltaTime: 0,\n    };\n\n    if (!AnimationController.running(INTERACTIVE_SCENE_ANIMATION_KEY)) {\n      AnimationController.start<InteractiveSceneRenderAnimationState>(\n        INTERACTIVE_SCENE_ANIMATION_KEY,\n        ({ deltaTime, state }) => {\n          const nextAnimationState = renderInteractiveScene({\n            ...rendererParams.current!,\n            deltaTime,\n            animationState: state,\n          }).animationState;\n\n          if (nextAnimationState) {\n            for (const key in nextAnimationState) {\n              if (\n                nextAnimationState[\n                  key as keyof InteractiveSceneRenderAnimationState\n                ] !== undefined\n              ) {\n                return nextAnimationState;\n              }\n            }\n          }\n\n          return undefined;\n        },\n      );\n    }\n  });\n\n  return (\n    <canvas\n      className=\"jsondraw__canvas interactive\"\n      style={{\n        width: props.appState.width,\n        height: props.appState.height,\n        cursor: props.appState.viewModeEnabled\n          ? CURSOR_TYPE.GRAB\n          : CURSOR_TYPE.AUTO,\n      }}\n      width={props.appState.width * props.scale}\n      height={props.appState.height * props.scale}\n      ref={props.handleCanvasRef}\n      onContextMenu={props.onContextMenu}\n      onPointerMove={props.onPointerMove}\n      onPointerUp={props.onPointerUp}\n      onPointerCancel={props.onPointerCancel}\n      onTouchMove={props.onTouchMove}\n      onPointerDown={props.onPointerDown}\n      onDoubleClick={\n        props.appState.viewModeEnabled ? undefined : props.onDoubleClick\n      }\n    >\n      {t(\"labels.drawingCanvas\")}\n    </canvas>\n  );\n};\n\nconst getRelevantAppStateProps = (\n  appState: AppState,\n): InteractiveCanvasAppState => ({\n  zoom: appState.zoom,\n  scrollX: appState.scrollX,\n  scrollY: appState.scrollY,\n  width: appState.width,\n  height: appState.height,\n  viewModeEnabled: appState.viewModeEnabled,\n  openDialog: appState.openDialog,\n  editingGroupId: appState.editingGroupId,\n  selectedElementIds: appState.selectedElementIds,\n  frameToHighlight: appState.frameToHighlight,\n  offsetLeft: appState.offsetLeft,\n  offsetTop: appState.offsetTop,\n  theme: appState.theme,\n  selectionElement: appState.selectionElement,\n  selectedGroupIds: appState.selectedGroupIds,\n  selectedLinearElement: appState.selectedLinearElement,\n  multiElement: appState.multiElement,\n  newElement: appState.newElement,\n  isBindingEnabled: appState.isBindingEnabled,\n  suggestedBinding: appState.suggestedBinding,\n  isRotating: appState.isRotating,\n  elementsToHighlight: appState.elementsToHighlight,\n  collaborators: appState.collaborators, // Necessary for collab. sessions\n  activeEmbeddable: appState.activeEmbeddable,\n  snapLines: appState.snapLines,\n  zenModeEnabled: appState.zenModeEnabled,\n  editingTextElement: appState.editingTextElement,\n  isCropping: appState.isCropping,\n  croppingElementId: appState.croppingElementId,\n  searchMatches: appState.searchMatches,\n  activeLockedId: appState.activeLockedId,\n  hoveredElementIds: appState.hoveredElementIds,\n  frameRendering: appState.frameRendering,\n  shouldCacheIgnoreZoom: appState.shouldCacheIgnoreZoom,\n  exportScale: appState.exportScale,\n});\n\nconst areEqual = (\n  prevProps: InteractiveCanvasProps,\n  nextProps: InteractiveCanvasProps,\n) => {\n  // This could be further optimised if needed, as we don't have to render interactive canvas on each scene mutation\n  if (\n    prevProps.selectionNonce !== nextProps.selectionNonce ||\n    prevProps.sceneNonce !== nextProps.sceneNonce ||\n    prevProps.scale !== nextProps.scale ||\n    // we need to memoize on elementsMap because they may have renewed\n    // even if sceneNonce didn't change (e.g. we filter elements out based\n    // on appState)\n    prevProps.elementsMap !== nextProps.elementsMap ||\n    prevProps.visibleElements !== nextProps.visibleElements ||\n    prevProps.selectedElements !== nextProps.selectedElements ||\n    prevProps.renderScrollbars !== nextProps.renderScrollbars\n  ) {\n    return false;\n  }\n\n  // Comparing the interactive appState for changes in case of some edge cases\n  return isShallowEqual(\n    // asserting AppState because we're being passed the whole AppState\n    // but resolve to only the InteractiveCanvas-relevant props\n    getRelevantAppStateProps(prevProps.appState as AppState),\n    getRelevantAppStateProps(nextProps.appState as AppState),\n  );\n};\n\nexport default React.memo(InteractiveCanvas, areEqual);\n","import React, { useEffect, useRef } from \"react\";\n\nimport { isShallowEqual } from \"@jsondraw/common\";\n\nimport type {\n  NonDeletedJsonDrawElement,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\n\nimport { isRenderThrottlingEnabled } from \"../../reactUtils\";\nimport { renderStaticScene } from \"../../renderer/staticScene\";\n\nimport type {\n  RenderableElementsMap,\n  StaticCanvasRenderConfig,\n} from \"../../scene/types\";\nimport type { AppState, StaticCanvasAppState } from \"../../types\";\nimport type { RoughCanvas } from \"roughjs/bin/canvas\";\n\ntype StaticCanvasProps = {\n  canvas: HTMLCanvasElement;\n  rc: RoughCanvas;\n  elementsMap: RenderableElementsMap;\n  allElementsMap: NonDeletedSceneElementsMap;\n  visibleElements: readonly NonDeletedJsonDrawElement[];\n  sceneNonce: number | undefined;\n  selectionNonce: number | undefined;\n  scale: number;\n  appState: StaticCanvasAppState;\n  renderConfig: StaticCanvasRenderConfig;\n};\n\nconst StaticCanvas = (props: StaticCanvasProps) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const isComponentMounted = useRef(false);\n\n  useEffect(() => {\n    props.canvas.style.width = `${props.appState.width}px`;\n    props.canvas.style.height = `${props.appState.height}px`;\n    props.canvas.width = props.appState.width * props.scale;\n    props.canvas.height = props.appState.height * props.scale;\n  }, [props.appState.height, props.appState.width, props.canvas, props.scale]);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    if (!wrapper) {\n      return;\n    }\n\n    const canvas = props.canvas;\n\n    if (!isComponentMounted.current) {\n      isComponentMounted.current = true;\n\n      wrapper.replaceChildren(canvas);\n      canvas.classList.add(\"jsondraw__canvas\", \"static\");\n    }\n\n    renderStaticScene(\n      {\n        canvas,\n        rc: props.rc,\n        scale: props.scale,\n        elementsMap: props.elementsMap,\n        allElementsMap: props.allElementsMap,\n        visibleElements: props.visibleElements,\n        appState: props.appState,\n        renderConfig: props.renderConfig,\n      },\n      isRenderThrottlingEnabled(),\n    );\n  });\n\n  return <div className=\"jsondraw__canvas-wrapper\" ref={wrapperRef} />;\n};\n\nconst getRelevantAppStateProps = (appState: AppState): StaticCanvasAppState => {\n  const relevantAppStateProps = {\n    zoom: appState.zoom,\n    scrollX: appState.scrollX,\n    scrollY: appState.scrollY,\n    width: appState.width,\n    height: appState.height,\n    viewModeEnabled: appState.viewModeEnabled,\n    openDialog: appState.openDialog,\n    hoveredElementIds: appState.hoveredElementIds,\n    offsetLeft: appState.offsetLeft,\n    offsetTop: appState.offsetTop,\n    theme: appState.theme,\n    shouldCacheIgnoreZoom: appState.shouldCacheIgnoreZoom,\n    viewBackgroundColor: appState.viewBackgroundColor,\n    exportScale: appState.exportScale,\n    selectedElementsAreBeingDragged: appState.selectedElementsAreBeingDragged,\n    gridSize: appState.gridSize,\n    gridStep: appState.gridStep,\n    frameRendering: appState.frameRendering,\n    selectedElementIds: appState.selectedElementIds,\n    frameToHighlight: appState.frameToHighlight,\n    editingGroupId: appState.editingGroupId,\n    currentHoveredFontFamily: appState.currentHoveredFontFamily,\n    croppingElementId: appState.croppingElementId,\n    suggestedBinding: appState.suggestedBinding,\n  };\n\n  return relevantAppStateProps;\n};\n\nconst areEqual = (\n  prevProps: StaticCanvasProps,\n  nextProps: StaticCanvasProps,\n) => {\n  if (\n    prevProps.sceneNonce !== nextProps.sceneNonce ||\n    prevProps.scale !== nextProps.scale ||\n    // we need to memoize on elementsMap because they may have renewed\n    // even if sceneNonce didn't change (e.g. we filter elements out based\n    // on appState)\n    prevProps.elementsMap !== nextProps.elementsMap ||\n    prevProps.visibleElements !== nextProps.visibleElements\n  ) {\n    return false;\n  }\n\n  return (\n    isShallowEqual(\n      // asserting AppState because we're being passed the whole AppState\n      // but resolve to only the StaticCanvas-relevant props\n      getRelevantAppStateProps(prevProps.appState as AppState),\n      getRelevantAppStateProps(nextProps.appState as AppState),\n    ) && isShallowEqual(prevProps.renderConfig, nextProps.renderConfig)\n  );\n};\n\nexport default React.memo(StaticCanvas, areEqual);\n","import InteractiveCanvas from \"./InteractiveCanvas\";\nimport StaticCanvas from \"./StaticCanvas\";\n\nexport { InteractiveCanvas, StaticCanvas };\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ElementCanvasButtons.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ElementCanvasButtons.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { sceneCoordsToViewportCoords } from \"@jsondraw/common\";\nimport { getElementAbsoluteCoords } from \"@jsondraw/element\";\n\nimport type {\n  ElementsMap,\n  NonDeletedJsonDrawElement,\n} from \"@jsondraw/element/types\";\n\nimport { useJsonDrawAppState } from \"../App\";\n\nimport \"./ElementCanvasButtons.scss\";\n\nimport type { AppState } from \"../../types\";\n\nconst CONTAINER_PADDING = 5;\n\nconst getContainerCoords = (\n  element: NonDeletedJsonDrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1] = getElementAbsoluteCoords(element, elementsMap);\n  const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n    { sceneX: x1 + element.width, sceneY: y1 },\n    appState,\n  );\n  const x = viewportX - appState.offsetLeft + 10;\n  const y = viewportY - appState.offsetTop;\n  return { x, y };\n};\n\nexport const ElementCanvasButtons = ({\n  children,\n  element,\n  elementsMap,\n}: {\n  children: React.ReactNode;\n  element: NonDeletedJsonDrawElement;\n  elementsMap: ElementsMap;\n}) => {\n  const appState = useJsonDrawAppState();\n\n  if (\n    appState.contextMenu ||\n    appState.newElement ||\n    appState.resizingElement ||\n    appState.isRotating ||\n    appState.openMenu ||\n    appState.viewModeEnabled\n  ) {\n    return null;\n  }\n\n  const { x, y } = getContainerCoords(element, appState, elementsMap);\n\n  return (\n    <div\n      className=\"jsondraw-canvas-buttons\"\n      style={{\n        top: `${y}px`,\n        left: `${x}px`,\n        // width: CONTAINER_WIDTH,\n        padding: CONTAINER_PADDING,\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n","import { throttleRAF } from \"@jsondraw/common\";\n\nimport {\n  getTargetFrame,\n  isInvisiblySmallElement,\n  renderElement,\n  shouldApplyFrameClip,\n} from \"@jsondraw/element\";\n\nimport { bootstrapCanvas, getNormalizedCanvasDimensions } from \"./helpers\";\n\nimport { frameClip } from \"./staticScene\";\n\nimport type { NewElementSceneRenderConfig } from \"../scene/types\";\n\nconst _renderNewElementScene = ({\n  canvas,\n  rc,\n  newElement,\n  elementsMap,\n  allElementsMap,\n  scale,\n  appState,\n  renderConfig,\n}: NewElementSceneRenderConfig) => {\n  if (canvas) {\n    const [normalizedWidth, normalizedHeight] = getNormalizedCanvasDimensions(\n      canvas,\n      scale,\n    );\n\n    const context = bootstrapCanvas({\n      canvas,\n      scale,\n      normalizedWidth,\n      normalizedHeight,\n    });\n\n    context.save();\n\n    // Apply zoom\n    context.scale(appState.zoom.value, appState.zoom.value);\n\n    if (newElement && newElement.type !== \"selection\") {\n      // e.g. when creating arrows and we're still below the arrow drag distance\n      // threshold\n      // (for now we skip render only with elements while we're creating to be\n      // safe)\n      if (isInvisiblySmallElement(newElement)) {\n        return;\n      }\n\n      const frameId = newElement.frameId || appState.frameToHighlight?.id;\n\n      if (\n        frameId &&\n        appState.frameRendering.enabled &&\n        appState.frameRendering.clip\n      ) {\n        const frame = getTargetFrame(newElement, elementsMap, appState);\n\n        if (\n          frame &&\n          shouldApplyFrameClip(newElement, frame, appState, elementsMap)\n        ) {\n          frameClip(frame, context, renderConfig, appState);\n        }\n      }\n\n      renderElement(\n        newElement,\n        elementsMap,\n        allElementsMap,\n        rc,\n        context,\n        renderConfig,\n        appState,\n      );\n    } else {\n      context.clearRect(0, 0, normalizedWidth, normalizedHeight);\n    }\n\n    context.restore();\n  }\n};\n\nexport const renderNewElementSceneThrottled = throttleRAF(\n  (config: NewElementSceneRenderConfig) => {\n    _renderNewElementScene(config);\n  },\n  { trailing: true },\n);\n\nexport const renderNewElementScene = (\n  renderConfig: NewElementSceneRenderConfig,\n  throttle?: boolean,\n) => {\n  if (throttle) {\n    renderNewElementSceneThrottled(renderConfig);\n    return;\n  }\n\n  _renderNewElementScene(renderConfig);\n};\n","import { useEffect, useRef } from \"react\";\n\nimport type { NonDeletedSceneElementsMap } from \"@jsondraw/element/types\";\n\nimport { isRenderThrottlingEnabled } from \"../../reactUtils\";\nimport { renderNewElementScene } from \"../../renderer/renderNewElementScene\";\n\nimport type {\n  RenderableElementsMap,\n  StaticCanvasRenderConfig,\n} from \"../../scene/types\";\nimport type { AppState } from \"../../types\";\nimport type { RoughCanvas } from \"roughjs/bin/canvas\";\n\ninterface NewElementCanvasProps {\n  appState: AppState;\n  elementsMap: RenderableElementsMap;\n  allElementsMap: NonDeletedSceneElementsMap;\n  scale: number;\n  rc: RoughCanvas;\n  renderConfig: StaticCanvasRenderConfig;\n}\n\nconst NewElementCanvas = (props: NewElementCanvasProps) => {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  useEffect(() => {\n    if (!canvasRef.current) {\n      return;\n    }\n    renderNewElementScene(\n      {\n        canvas: canvasRef.current,\n        scale: props.scale,\n        newElement: props.appState.newElement,\n        elementsMap: props.elementsMap,\n        allElementsMap: props.allElementsMap,\n        rc: props.rc,\n        renderConfig: props.renderConfig,\n        appState: props.appState,\n      },\n      isRenderThrottlingEnabled(),\n    );\n  });\n\n  return (\n    <canvas\n      className=\"jsondraw__canvas\"\n      style={{\n        width: props.appState.width,\n        height: props.appState.height,\n      }}\n      width={props.appState.width * props.scale}\n      height={props.appState.height * props.scale}\n      ref={canvasRef}\n    />\n  );\n};\n\nexport default NewElementCanvas;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./SVGLayer.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./SVGLayer.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useEffect, useRef } from \"react\";\n\nimport \"./SVGLayer.scss\";\n\nimport type { Trail } from \"../animated-trail\";\n\ntype SVGLayerProps = {\n  trails: Trail[];\n};\n\nexport const SVGLayer = ({ trails }: SVGLayerProps) => {\n  const svgRef = useRef<SVGSVGElement | null>(null);\n\n  useEffect(() => {\n    if (svgRef.current) {\n      for (const trail of trails) {\n        trail.start(svgRef.current);\n      }\n    }\n\n    return () => {\n      for (const trail of trails) {\n        trail.stop();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, trails);\n\n  return (\n    <div className=\"SVGLayer\">\n      <svg ref={svgRef} />\n    </div>\n  );\n};\n","import React, { useLayoutEffect, useRef } from \"react\";\n\nimport { useTunnels } from \"../../context/tunnels\";\nimport { atom } from \"../../editor-jotai\";\n\nexport const withInternalFallback = <P,>(\n  componentName: string,\n  Component: React.FC<P>,\n) => {\n  const renderAtom = atom(0);\n\n  const WrapperComponent: React.FC<\n    P & {\n      __fallback?: boolean;\n    }\n  > = (props) => {\n    const {\n      tunnelsJotai: { useAtom },\n    } = useTunnels();\n    // for rerenders\n    const [, setCounter] = useAtom(renderAtom);\n    // for initial & subsequent renders. Tracked as component state\n    // due to jsondraw multi-instance scanerios.\n    const metaRef = useRef({\n      // flag set on initial render to tell the fallback component to skip the\n      // render until mount counter are initialized. This is because the counter\n      // is initialized in an effect, and thus we could end rendering both\n      // components at the same time until counter is initialized.\n      preferHost: false,\n      counter: 0,\n    });\n\n    useLayoutEffect(() => {\n      const meta = metaRef.current;\n      setCounter((c) => {\n        const next = c + 1;\n        meta.counter = next;\n\n        return next;\n      });\n      return () => {\n        setCounter((c) => {\n          const next = c - 1;\n          meta.counter = next;\n          if (!next) {\n            meta.preferHost = false;\n          }\n          return next;\n        });\n      };\n    }, [setCounter]);\n\n    if (!props.__fallback) {\n      metaRef.current.preferHost = true;\n    }\n\n    // ensure we don't render fallback and host components at the same time\n    if (\n      // either before the counters are initialized\n      (!metaRef.current.counter &&\n        props.__fallback &&\n        metaRef.current.preferHost) ||\n      // or after the counters are initialized, and both are rendered\n      // (this is the default when host renders as well)\n      (metaRef.current.counter > 1 && props.__fallback)\n    ) {\n      return null;\n    }\n\n    return <Component {...props} />;\n  };\n\n  WrapperComponent.displayName = componentName;\n\n  return WrapperComponent;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FilledButton.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FilledButton.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { forwardRef, useState } from \"react\";\nimport { isPromiseLike } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { AbortError } from \"../../errors\";\nimport { tablerCheckIcon } from \"../icons\";\nimport \"./FilledButton.scss\";\nimport Spinner from \"./Spinner\";\n\nexport type ButtonVariant = \"filled\" | \"outlined\" | \"icon\";\nexport type ButtonColor = \"primary\" | \"danger\" | \"warning\" | \"muted\" | \"success\";\nexport type ButtonSize = \"medium\" | \"large\";\n\nexport type FilledButtonProps = {\n  label?: string;\n\n  children?: React.ReactNode;\n  onClick?: (event: React.MouseEvent) => void;\n  status?: null | \"loading\" | \"success\";\n\n  variant?: ButtonVariant;\n  color?: ButtonColor;\n  size?: ButtonSize;\n  className?: string;\n  fullWidth?: boolean;\n\n  icon?: React.ReactNode;\n  disabled?: boolean;\n};\n\nexport const FilledButton = forwardRef<HTMLButtonElement, FilledButtonProps>(\n  (\n    {\n      children,\n      icon,\n      onClick,\n      label,\n      variant = \"filled\",\n      color = \"primary\",\n      size = \"medium\",\n      fullWidth,\n      className,\n      status,\n      disabled,\n    },\n    ref\n  ) => {\n    const [isLoading, setIsLoading] = useState(false);\n\n    const _onClick = async (event: React.MouseEvent) => {\n      const ret = onClick?.(event);\n\n      if (isPromiseLike(ret)) {\n        // delay loading state to prevent flicker in case of quick response\n        const timer = window.setTimeout(() => {\n          setIsLoading(true);\n        }, 50);\n        try {\n          await ret;\n        } catch (error: any) {\n          if (!(error instanceof AbortError)) {\n            throw error;\n          } else {\n            console.warn(error);\n          }\n        } finally {\n          clearTimeout(timer);\n          setIsLoading(false);\n        }\n      }\n    };\n\n    const _status = isLoading ? \"loading\" : status;\n    color = _status === \"success\" ? \"success\" : color;\n\n    return (\n      <button\n        className={clsx(\n          \"ExcButton\",\n          `ExcButton--color-${color}`,\n          `ExcButton--variant-${variant}`,\n          `ExcButton--size-${size}`,\n          `ExcButton--status-${_status}`,\n          { \"ExcButton--fullWidth\": fullWidth },\n          className\n        )}\n        onClick={_onClick}\n        type=\"button\"\n        aria-label={label}\n        ref={ref}\n        disabled={disabled || _status === \"loading\" || _status === \"success\"}\n      >\n        <div className=\"ExcButton__contents\">\n          {_status === \"loading\" ? (\n            <Spinner className=\"ExcButton__statusIcon\" />\n          ) : (\n            _status === \"success\" && <div className=\"ExcButton__statusIcon\">{tablerCheckIcon}</div>\n          )}\n          {icon && (\n            <div className=\"ExcButton__icon\" aria-hidden>\n              {icon}\n            </div>\n          )}\n          {variant !== \"icon\" && (children ?? label)}\n        </div>\n      </button>\n    );\n  }\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./OverwriteConfirm.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./OverwriteConfirm.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport { actionSaveFileToDisk } from \"../../actions\";\nimport { actionChangeExportEmbedScene } from \"../../actions/actionExport\";\nimport { useI18n } from \"../../i18n\";\nimport { useJsonDrawActionManager, useJsonDrawSetAppState } from \"../App\";\nimport { FilledButton } from \"../ui/FilledButton\";\n\nexport type ActionProps = {\n  title: string;\n  children: React.ReactNode;\n  actionLabel: string;\n  onClick: () => void;\n};\n\nexport const Action = ({ title, children, actionLabel, onClick }: ActionProps) => {\n  return (\n    <div className=\"OverwriteConfirm__Actions__Action\">\n      <h4>{title}</h4>\n      <div className=\"OverwriteConfirm__Actions__Action__content\">{children}</div>\n      <FilledButton\n        variant=\"outlined\"\n        color=\"muted\"\n        label={actionLabel}\n        size=\"large\"\n        fullWidth\n        onClick={onClick}\n      />\n    </div>\n  );\n};\n\nexport const ExportToImage = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const setAppState = useJsonDrawSetAppState();\n\n  return (\n    <Action\n      title={t(\"overwriteConfirm.action.exportToImage.title\")}\n      actionLabel={t(\"overwriteConfirm.action.exportToImage.button\")}\n      onClick={() => {\n        actionManager.executeAction(actionChangeExportEmbedScene, \"ui\", true);\n        setAppState({ openDialog: { name: \"imageExport\" } });\n      }}\n    >\n      {t(\"overwriteConfirm.action.exportToImage.description\")}\n    </Action>\n  );\n};\n\nexport const SaveToDisk = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n\n  return (\n    <Action\n      title={t(\"overwriteConfirm.action.saveToDisk.title\")}\n      actionLabel={t(\"overwriteConfirm.action.saveToDisk.button\")}\n      onClick={() => {\n        actionManager.executeAction(actionSaveFileToDisk, \"ui\");\n      }}\n    >\n      {t(\"overwriteConfirm.action.saveToDisk.description\")}\n    </Action>\n  );\n};\n\nconst Actions = Object.assign(\n  ({ children }: { children: React.ReactNode }) => {\n    return <div className=\"OverwriteConfirm__Actions\">{children}</div>;\n  },\n  {\n    ExportToImage,\n    SaveToDisk,\n  }\n);\n\nexport { Actions };\n","import { atom, editorJotaiStore } from \"../../editor-jotai\";\n\nimport type React from \"react\";\n\nexport type OverwriteConfirmState =\n  | {\n      active: true;\n      title: string;\n      description: React.ReactNode;\n      actionLabel: string;\n      color: \"danger\" | \"warning\";\n\n      onClose: () => void;\n      onConfirm: () => void;\n      onReject: () => void;\n    }\n  | { active: false };\n\nexport const overwriteConfirmStateAtom = atom<OverwriteConfirmState>({\n  active: false,\n});\n\nexport async function openConfirmModal({\n  title,\n  description,\n  actionLabel,\n  color,\n}: {\n  title: string;\n  description: React.ReactNode;\n  actionLabel: string;\n  color: \"danger\" | \"warning\";\n}) {\n  return new Promise<boolean>((resolve) => {\n    editorJotaiStore.set(overwriteConfirmStateAtom, {\n      active: true,\n      onConfirm: () => resolve(true),\n      onClose: () => resolve(false),\n      onReject: () => resolve(false),\n      title,\n      description,\n      actionLabel,\n      color,\n    });\n  });\n}\n","import React from \"react\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useAtom } from \"../../editor-jotai\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { alertTriangleIcon } from \"../icons\";\nimport { FilledButton } from \"../ui/FilledButton\";\nimport \"./OverwriteConfirm.scss\";\nimport { Actions, Action } from \"./OverwriteConfirmActions\";\nimport { overwriteConfirmStateAtom } from \"./OverwriteConfirmState\";\n\nexport type OverwriteConfirmDialogProps = {\n  children?: React.ReactNode;\n};\n\nconst OverwriteConfirmDialog = Object.assign(\n  withInternalFallback(\"OverwriteConfirmDialog\", ({ children }: OverwriteConfirmDialogProps) => {\n    const { OverwriteConfirmDialogTunnel } = useTunnels();\n    const [overwriteConfirmState, setState] = useAtom(overwriteConfirmStateAtom);\n\n    if (!overwriteConfirmState.active) {\n      return null;\n    }\n\n    const handleClose = () => {\n      overwriteConfirmState.onClose();\n      setState(state => ({ ...state, active: false }));\n    };\n\n    const handleConfirm = () => {\n      overwriteConfirmState.onConfirm();\n      setState(state => ({ ...state, active: false }));\n    };\n\n    const hasActions = React.Children.count(children) > 0;\n\n    return (\n      <OverwriteConfirmDialogTunnel.In>\n        <Dialog onCloseRequest={handleClose} title={false} size={916}>\n          <div className=\"OverwriteConfirm\">\n            <h3>{overwriteConfirmState.title}</h3>\n            <div\n              className={`OverwriteConfirm__Description OverwriteConfirm__Description--color-${overwriteConfirmState.color}`}\n            >\n              <div className=\"OverwriteConfirm__Description__icon\">{alertTriangleIcon}</div>\n              <div>{overwriteConfirmState.description}</div>\n              <div className=\"OverwriteConfirm__Description__spacer\"></div>\n              <FilledButton\n                color={overwriteConfirmState.color}\n                size=\"large\"\n                label={overwriteConfirmState.actionLabel}\n                onClick={handleConfirm}\n              />\n            </div>\n            {hasActions && <Actions>{children}</Actions>}\n          </div>\n        </Dialog>\n      </OverwriteConfirmDialogTunnel.In>\n    );\n  }),\n  {\n    Actions,\n    Action,\n  }\n);\n\nexport { OverwriteConfirmDialog };\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DragInput.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DragInput.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { pointFrom, pointRotateRads } from \"@jsondraw/math\";\n\nimport {\n  getBoundTextElement,\n  isBindingElement,\n  unbindBindingElement,\n} from \"@jsondraw/element\";\nimport { isFrameLikeElement } from \"@jsondraw/element\";\n\nimport {\n  getSelectedGroupIds,\n  getElementsInGroup,\n  isInGroup,\n} from \"@jsondraw/element\";\n\nimport { getFrameChildren } from \"@jsondraw/element\";\n\nimport { updateBindings } from \"@jsondraw/element\";\nimport { DRAGGING_THRESHOLD } from \"@jsondraw/common\";\n\nimport type { Radians } from \"@jsondraw/math\";\n\nimport type {\n  ElementsMap,\n  JsonDrawElement,\n  NonDeletedJsonDrawElement,\n} from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport type { AppState } from \"../../types\";\n\nexport type StatsInputProperty =\n  | \"x\"\n  | \"y\"\n  | \"width\"\n  | \"height\"\n  | \"angle\"\n  | \"fontSize\"\n  | \"gridStep\";\n\nexport const SMALLEST_DELTA = 0.01;\nexport const STEP_SIZE = 10;\n\nexport const isPropertyEditable = (\n  element: JsonDrawElement,\n  property: keyof JsonDrawElement,\n) => {\n  if (property === \"angle\" && isFrameLikeElement(element)) {\n    return false;\n  }\n  return true;\n};\n\nexport const getStepSizedValue = (value: number, stepSize: number) => {\n  const v = value + stepSize / 2;\n  return v - (v % stepSize);\n};\n\nexport type AtomicUnit = Record<string, true>;\nexport const getElementsInAtomicUnit = (\n  atomicUnit: AtomicUnit,\n  elementsMap: ElementsMap,\n  originalElementsMap?: ElementsMap,\n) => {\n  return Object.keys(atomicUnit)\n    .map((id) => ({\n      original: (originalElementsMap ?? elementsMap).get(id),\n      latest: elementsMap.get(id),\n    }))\n    .filter((el) => el.original !== undefined && el.latest !== undefined) as {\n    original: NonDeletedJsonDrawElement;\n    latest: NonDeletedJsonDrawElement;\n  }[];\n};\n\nexport const newOrigin = (\n  x1: number,\n  y1: number,\n  w1: number,\n  h1: number,\n  w2: number,\n  h2: number,\n  angle: number,\n) => {\n  /**\n   * The formula below is the result of solving\n   *   rotate(x1, y1, cx1, cy1, angle) = rotate(x2, y2, cx2, cy2, angle)\n   * where rotate is the function defined in math.ts\n   *\n   * This is so that the new origin (x2, y2),\n   * when rotated against the new center (cx2, cy2),\n   * coincides with (x1, y1) rotated against (cx1, cy1)\n   *\n   * The reason for doing this computation is so the element's top left corner\n   * on the canvas remains fixed after any changes in its dimension.\n   */\n\n  return {\n    x:\n      x1 +\n      (w1 - w2) / 2 +\n      ((w2 - w1) / 2) * Math.cos(angle) +\n      ((h1 - h2) / 2) * Math.sin(angle),\n    y:\n      y1 +\n      (h1 - h2) / 2 +\n      ((w2 - w1) / 2) * Math.sin(angle) +\n      ((h2 - h1) / 2) * Math.cos(angle),\n  };\n};\n\nexport const moveElement = (\n  newTopLeftX: number,\n  newTopLeftY: number,\n  originalElement: JsonDrawElement,\n  scene: Scene,\n  appState: AppState,\n  originalElementsMap: ElementsMap,\n  shouldInformMutation = true,\n) => {\n  if (\n    isBindingElement(originalElement) &&\n    (originalElement.startBinding || originalElement.endBinding)\n  ) {\n    if (\n      Math.abs(newTopLeftX - originalElement.x) < DRAGGING_THRESHOLD &&\n      Math.abs(newTopLeftY - originalElement.y) < DRAGGING_THRESHOLD\n    ) {\n      return;\n    }\n\n    unbindBindingElement(originalElement, \"start\", scene);\n    unbindBindingElement(originalElement, \"end\", scene);\n  }\n\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const latestElement = elementsMap.get(originalElement.id);\n  if (!latestElement) {\n    return;\n  }\n  const [cx, cy] = [\n    originalElement.x + originalElement.width / 2,\n    originalElement.y + originalElement.height / 2,\n  ];\n  const [topLeftX, topLeftY] = pointRotateRads(\n    pointFrom(originalElement.x, originalElement.y),\n    pointFrom(cx, cy),\n    originalElement.angle,\n  );\n\n  const changeInX = newTopLeftX - topLeftX;\n  const changeInY = newTopLeftY - topLeftY;\n\n  const [x, y] = pointRotateRads(\n    pointFrom(newTopLeftX, newTopLeftY),\n    pointFrom(cx + changeInX, cy + changeInY),\n    -originalElement.angle as Radians,\n  );\n\n  scene.mutateElement(\n    latestElement,\n    {\n      x,\n      y,\n    },\n    { informMutation: shouldInformMutation, isDragging: false },\n  );\n  updateBindings(latestElement, scene, appState);\n\n  const boundTextElement = getBoundTextElement(\n    originalElement,\n    originalElementsMap,\n  );\n  if (boundTextElement) {\n    const latestBoundTextElement = elementsMap.get(boundTextElement.id);\n    latestBoundTextElement &&\n      scene.mutateElement(\n        latestBoundTextElement,\n        {\n          x: boundTextElement.x + changeInX,\n          y: boundTextElement.y + changeInY,\n        },\n        { informMutation: shouldInformMutation, isDragging: false },\n      );\n  }\n\n  if (isFrameLikeElement(originalElement)) {\n    const originalChildren = getFrameChildren(\n      originalElementsMap,\n      originalElement.id,\n    );\n    originalChildren.forEach((child) => {\n      const latestChildElement = elementsMap.get(child.id);\n\n      if (!latestChildElement) {\n        return;\n      }\n\n      const [childCX, childCY] = [\n        child.x + child.width / 2,\n        child.y + child.height / 2,\n      ];\n      const [childTopLeftX, childTopLeftY] = pointRotateRads(\n        pointFrom(child.x, child.y),\n        pointFrom(childCX, childCY),\n        child.angle,\n      );\n\n      const childNewTopLeftX = Math.round(childTopLeftX + changeInX);\n      const childNewTopLeftY = Math.round(childTopLeftY + changeInY);\n\n      const [childX, childY] = pointRotateRads(\n        pointFrom(childNewTopLeftX, childNewTopLeftY),\n        pointFrom(childCX + changeInX, childCY + changeInY),\n        -child.angle as Radians,\n      );\n\n      scene.mutateElement(\n        latestChildElement,\n        {\n          x: childX,\n          y: childY,\n        },\n        { informMutation: shouldInformMutation, isDragging: false },\n      );\n      updateBindings(latestChildElement, scene, appState, {\n        simultaneouslyUpdated: originalChildren,\n      });\n    });\n  }\n};\n\nexport const getAtomicUnits = (\n  targetElements: readonly JsonDrawElement[],\n  appState: AppState,\n) => {\n  const selectedGroupIds = getSelectedGroupIds(appState);\n  const _atomicUnits = selectedGroupIds.map((gid) => {\n    return getElementsInGroup(targetElements, gid).reduce((acc, el) => {\n      acc[el.id] = true;\n      return acc;\n    }, {} as AtomicUnit);\n  });\n  targetElements\n    .filter((el) => !isInGroup(el))\n    .forEach((el) => {\n      _atomicUnits.push({\n        [el.id]: true,\n      });\n    });\n  return _atomicUnits;\n};\n","import { useEffect, useRef, useState } from \"react\";\nimport { EVENT, KEYS, cloneJSON } from \"@jsondraw/common\";\nimport { deepCopyElement } from \"@jsondraw/element\";\nimport { CaptureUpdateAction } from \"@jsondraw/element\";\nimport type { Scene } from \"@jsondraw/element\";\nimport type { ElementsMap, JsonDrawElement } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport type { AppState } from \"../../types\";\nimport { useApp, useJsonDrawSetAppState } from \"../App\";\nimport { InlineIcon } from \"../ui/InlineIcon\";\nimport \"./DragInput.scss\";\nimport { SMALLEST_DELTA } from \"./utils\";\nimport type { StatsInputProperty } from \"./utils\";\n\nexport type DragInputCallbackType<P extends StatsInputProperty, E = JsonDrawElement> = (props: {\n  accumulatedChange: number;\n  instantChange: number;\n  originalElements: readonly E[];\n  originalElementsMap: ElementsMap;\n  shouldKeepAspectRatio: boolean;\n  shouldChangeByStepSize: boolean;\n  scene: Scene;\n  nextValue?: number;\n  property: P;\n  originalAppState: AppState;\n  setInputValue: (value: number) => void;\n  app: ReturnType<typeof useApp>;\n  setAppState: ReturnType<typeof useJsonDrawSetAppState>;\n}) => void;\n\nexport type DragFinishedCallbackType<E = JsonDrawElement> = (props: {\n  app: ReturnType<typeof useApp>;\n  setAppState: ReturnType<typeof useJsonDrawSetAppState>;\n  originalElements: readonly E[] | null;\n  originalAppState: AppState;\n}) => void;\n\ninterface StatsDragInputProps<T extends StatsInputProperty, E = JsonDrawElement> {\n  label: string | React.ReactNode;\n  icon?: React.ReactNode;\n  value: number | \"Mixed\";\n  elements: readonly E[];\n  editable?: boolean;\n  shouldKeepAspectRatio?: boolean;\n  dragInputCallback: DragInputCallbackType<T, E>;\n  property: T;\n  scene: Scene;\n  appState: AppState;\n  /** how many px you need to drag to get 1 unit change */\n  sensitivity?: number;\n  dragFinishedCallback?: DragFinishedCallbackType;\n}\n\nconst StatsDragInput = <T extends StatsInputProperty, E extends JsonDrawElement = JsonDrawElement>({\n  label,\n  icon,\n  dragInputCallback,\n  value,\n  elements,\n  editable = true,\n  shouldKeepAspectRatio,\n  property,\n  scene,\n  appState,\n  sensitivity = 1,\n  dragFinishedCallback,\n}: StatsDragInputProps<T, E>) => {\n  const app = useApp();\n  const setAppState = useJsonDrawSetAppState();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const labelRef = useRef<HTMLDivElement>(null);\n\n  const [inputValue, setInputValue] = useState(value.toString());\n\n  const stateRef = useRef<{\n    originalAppState: AppState;\n    originalElements: readonly E[];\n    lastUpdatedValue: string;\n    updatePending: boolean;\n  }>(null!);\n  if (!stateRef.current) {\n    stateRef.current = {\n      originalAppState: cloneJSON(appState),\n      originalElements: elements,\n      lastUpdatedValue: inputValue,\n      updatePending: false,\n    };\n  }\n\n  useEffect(() => {\n    const inputValue = value.toString();\n    setInputValue(inputValue);\n    stateRef.current.lastUpdatedValue = inputValue;\n  }, [value]);\n\n  const handleInputValue = (updatedValue: string, elements: readonly E[], appState: AppState) => {\n    if (!stateRef.current.updatePending) {\n      return false;\n    }\n    stateRef.current.updatePending = false;\n\n    const parsed = Number(updatedValue);\n    if (isNaN(parsed)) {\n      setInputValue(value.toString());\n      return;\n    }\n\n    const rounded = Number(parsed.toFixed(2));\n    const original = Number(value);\n\n    // only update when\n    // 1. original was \"Mixed\" and we have a new value\n    // 2. original was not \"Mixed\" and the difference between a new value and previous value is greater\n    //    than the smallest delta allowed, which is 0.01\n    // reason: idempotent to avoid unnecessary\n    if (isNaN(original) || Math.abs(rounded - original) >= SMALLEST_DELTA) {\n      stateRef.current.lastUpdatedValue = updatedValue;\n      dragInputCallback({\n        accumulatedChange: 0,\n        instantChange: 0,\n        originalElements: elements,\n        originalElementsMap: app.scene.getNonDeletedElementsMap(),\n        shouldKeepAspectRatio: shouldKeepAspectRatio!!,\n        shouldChangeByStepSize: false,\n        scene,\n        nextValue: rounded,\n        property,\n        originalAppState: appState,\n        setInputValue: value => setInputValue(String(value)),\n        app,\n        setAppState,\n      });\n      app.syncActionResult({\n        captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n      });\n    }\n  };\n\n  const callbacksRef = useRef<\n    Partial<{\n      handleInputValue: typeof handleInputValue;\n      onPointerUp: (event: PointerEvent) => void;\n      onPointerMove: (event: PointerEvent) => void;\n    }>\n  >({});\n  callbacksRef.current.handleInputValue = handleInputValue;\n\n  // make sure that clicking on canvas (which umounts the component)\n  // updates current input value (blur isn't triggered)\n  useEffect(() => {\n    const input = inputRef.current;\n    const callbacks = callbacksRef.current;\n    return () => {\n      const nextValue = input?.value;\n      if (nextValue) {\n        callbacks.handleInputValue?.(\n          nextValue,\n          stateRef.current.originalElements,\n          stateRef.current.originalAppState\n        );\n      }\n\n      // generally not needed, but in case `pointerup` doesn't fire and\n      // we don't remove the listeners that way, we should at least remove\n      // on unmount\n      window.removeEventListener(EVENT.POINTER_MOVE, callbacks.onPointerMove!, false);\n      window.removeEventListener(EVENT.POINTER_UP, callbacks.onPointerUp!, false);\n    };\n  }, [\n    // we need to track change of `editable` state as mount/unmount\n    // because react doesn't trigger `blur` when a an input is blurred due\n    // to being disabled (https://github.com/facebook/react/issues/9142).\n    // As such, if we keep rendering disabled inputs, then change in selection\n    // to an element that has a given property as non-editable would not trigger\n    // blur/unmount and wouldn't update the value.\n    editable,\n  ]);\n\n  if (!editable) {\n    return null;\n  }\n\n  return (\n    <div className={clsx(\"drag-input-container\", !editable && \"disabled\")} data-testid={label}>\n      <div\n        className=\"drag-input-label\"\n        ref={labelRef}\n        onPointerDown={event => {\n          if (inputRef.current && editable) {\n            document.body.classList.add(\"jsondraw-cursor-resize\");\n\n            let startValue = Number(inputRef.current.value);\n            if (isNaN(startValue)) {\n              startValue = 0;\n            }\n\n            let lastPointer: {\n              x: number;\n              y: number;\n            } | null = null;\n\n            let originalElementsMap: ElementsMap | null = app.scene\n              .getNonDeletedElements()\n              .reduce((acc: ElementsMap, element) => {\n                acc.set(element.id, deepCopyElement(element));\n                return acc;\n              }, new Map());\n\n            let originalElements: readonly E[] | null = elements.map(\n              element => originalElementsMap!.get(element.id) as E\n            );\n\n            const originalAppState: AppState = cloneJSON(appState);\n\n            let accumulatedChange = 0;\n            let stepChange = 0;\n\n            const onPointerMove = (event: PointerEvent) => {\n              if (lastPointer && originalElementsMap !== null && originalElements !== null) {\n                const instantChange = event.clientX - lastPointer.x;\n\n                if (instantChange !== 0) {\n                  stepChange += instantChange;\n\n                  if (Math.abs(stepChange) >= sensitivity) {\n                    stepChange =\n                      Math.sign(stepChange) * Math.floor(Math.abs(stepChange) / sensitivity);\n\n                    accumulatedChange += stepChange;\n\n                    dragInputCallback({\n                      accumulatedChange,\n                      instantChange: stepChange,\n                      originalElements,\n                      originalElementsMap,\n                      shouldKeepAspectRatio: shouldKeepAspectRatio!!,\n                      shouldChangeByStepSize: event.shiftKey,\n                      property,\n                      scene,\n                      originalAppState,\n                      setInputValue: value => setInputValue(String(value)),\n                      app,\n                      setAppState,\n                    });\n\n                    stepChange = 0;\n                  }\n                }\n              }\n\n              lastPointer = {\n                x: event.clientX,\n                y: event.clientY,\n              };\n            };\n\n            const onPointerUp = () => {\n              window.removeEventListener(EVENT.POINTER_MOVE, onPointerMove, false);\n\n              app.syncActionResult({\n                captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n              });\n\n              // Notify implementors\n              dragFinishedCallback?.({\n                app,\n                setAppState,\n                originalElements,\n                originalAppState,\n              });\n\n              lastPointer = null;\n              accumulatedChange = 0;\n              stepChange = 0;\n              originalElements = null;\n              originalElementsMap = null;\n\n              document.body.classList.remove(\"jsondraw-cursor-resize\");\n\n              window.removeEventListener(EVENT.POINTER_UP, onPointerUp, false);\n            };\n\n            callbacksRef.current.onPointerMove = onPointerMove;\n            callbacksRef.current.onPointerUp = onPointerUp;\n\n            window.addEventListener(EVENT.POINTER_MOVE, onPointerMove, false);\n            window.addEventListener(EVENT.POINTER_UP, onPointerUp, false);\n          }\n        }}\n        onPointerEnter={() => {\n          if (labelRef.current) {\n            labelRef.current.style.cursor = \"ew-resize\";\n          }\n        }}\n      >\n        {icon ? <InlineIcon icon={icon} /> : label}\n      </div>\n      <input\n        className=\"drag-input\"\n        autoComplete=\"off\"\n        spellCheck=\"false\"\n        onKeyDown={event => {\n          if (editable) {\n            const eventTarget = event.target;\n            if (eventTarget instanceof HTMLInputElement && event.key === KEYS.ENTER) {\n              handleInputValue(eventTarget.value, elements, appState);\n              app.focusContainer();\n            }\n          }\n        }}\n        ref={inputRef}\n        value={inputValue}\n        onChange={event => {\n          stateRef.current.updatePending = true;\n          setInputValue(event.target.value);\n        }}\n        onFocus={event => {\n          event.target.select();\n          stateRef.current.originalElements = elements;\n          stateRef.current.originalAppState = cloneJSON(appState);\n        }}\n        onBlur={event => {\n          if (!inputValue) {\n            setInputValue(value.toString());\n          } else if (editable) {\n            handleInputValue(\n              event.target.value,\n              stateRef.current.originalElements,\n              stateRef.current.originalAppState\n            );\n          }\n        }}\n        disabled={!editable}\n      />\n    </div>\n  );\n};\n\nexport default StatsDragInput;\n","import { degreesToRadians, radiansToDegrees } from \"@jsondraw/math\";\n\nimport { getBoundTextElement } from \"@jsondraw/element\";\nimport { isArrowElement, isElbowArrow } from \"@jsondraw/element\";\n\nimport { updateBindings } from \"@jsondraw/element\";\n\nimport type { Degrees } from \"@jsondraw/math\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport { angleIcon } from \"../icons\";\n\nimport DragInput from \"./DragInput\";\nimport { getStepSizedValue, isPropertyEditable } from \"./utils\";\n\nimport type { DragInputCallbackType } from \"./DragInput\";\nimport type { AppState } from \"../../types\";\n\ninterface AngleProps {\n  element: JsonDrawElement;\n  scene: Scene;\n  appState: AppState;\n  property: \"angle\";\n}\n\nconst STEP_SIZE = 15;\n\nconst handleDegreeChange: DragInputCallbackType<AngleProps[\"property\"]> = ({\n  accumulatedChange,\n  originalElements,\n  shouldChangeByStepSize,\n  nextValue,\n  scene,\n  app,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const origElement = originalElements[0];\n  if (origElement && !isElbowArrow(origElement)) {\n    const latestElement = elementsMap.get(origElement.id);\n    if (!latestElement) {\n      return;\n    }\n\n    if (nextValue !== undefined) {\n      const nextAngle = degreesToRadians(nextValue as Degrees);\n      scene.mutateElement(latestElement, {\n        angle: nextAngle,\n      });\n      updateBindings(latestElement, scene, app.state);\n\n      const boundTextElement = getBoundTextElement(latestElement, elementsMap);\n      if (boundTextElement && !isArrowElement(latestElement)) {\n        scene.mutateElement(boundTextElement, { angle: nextAngle });\n      }\n\n      return;\n    }\n\n    const originalAngleInDegrees =\n      Math.round(radiansToDegrees(origElement.angle) * 100) / 100;\n    const changeInDegrees = Math.round(accumulatedChange);\n    let nextAngleInDegrees = (originalAngleInDegrees + changeInDegrees) % 360;\n    if (shouldChangeByStepSize) {\n      nextAngleInDegrees = getStepSizedValue(nextAngleInDegrees, STEP_SIZE);\n    }\n\n    nextAngleInDegrees =\n      nextAngleInDegrees < 0 ? nextAngleInDegrees + 360 : nextAngleInDegrees;\n\n    const nextAngle = degreesToRadians(nextAngleInDegrees as Degrees);\n\n    scene.mutateElement(latestElement, {\n      angle: nextAngle,\n    });\n    updateBindings(latestElement, scene, app.state);\n\n    const boundTextElement = getBoundTextElement(latestElement, elementsMap);\n    if (boundTextElement && !isArrowElement(latestElement)) {\n      scene.mutateElement(boundTextElement, { angle: nextAngle });\n    }\n  }\n};\n\nconst Angle = ({ element, scene, appState, property }: AngleProps) => {\n  return (\n    <DragInput\n      label=\"A\"\n      icon={angleIcon}\n      value={Math.round((radiansToDegrees(element.angle) % 360) * 100) / 100}\n      elements={[element]}\n      dragInputCallback={handleDegreeChange}\n      editable={isPropertyEditable(element, \"angle\")}\n      scene={scene}\n      appState={appState}\n      property={property}\n    />\n  );\n};\n\nexport default Angle;\n","import type { Scene } from \"@jsondraw/element\";\n\nimport { getNormalizedGridStep } from \"../../scene\";\n\nimport StatsDragInput from \"./DragInput\";\nimport { getStepSizedValue } from \"./utils\";\n\nimport type { AppState } from \"../../types\";\n\ninterface PositionProps {\n  property: \"gridStep\";\n  scene: Scene;\n  appState: AppState;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n}\n\nconst STEP_SIZE = 5;\n\nconst CanvasGrid = ({\n  property,\n  scene,\n  appState,\n  setAppState,\n}: PositionProps) => {\n  return (\n    <StatsDragInput\n      label=\"Grid step\"\n      sensitivity={8}\n      elements={[]}\n      dragInputCallback={({\n        nextValue,\n        instantChange,\n        shouldChangeByStepSize,\n        setInputValue,\n      }) => {\n        setAppState((state) => {\n          let nextGridStep;\n\n          if (nextValue) {\n            nextGridStep = nextValue;\n          } else if (instantChange) {\n            nextGridStep = shouldChangeByStepSize\n              ? getStepSizedValue(\n                  state.gridStep + STEP_SIZE * Math.sign(instantChange),\n                  STEP_SIZE,\n                )\n              : state.gridStep + instantChange;\n          }\n\n          if (!nextGridStep) {\n            setInputValue(state.gridStep);\n            return null;\n          }\n\n          nextGridStep = getNormalizedGridStep(nextGridStep);\n          setInputValue(nextGridStep);\n          return {\n            gridStep: nextGridStep,\n          };\n        });\n      }}\n      scene={scene}\n      value={appState.gridStep}\n      property={property}\n      appState={appState}\n    />\n  );\n};\n\nexport default CanvasGrid;\n","import { clamp, round } from \"@jsondraw/math\";\n\nimport { MIN_WIDTH_OR_HEIGHT } from \"@jsondraw/common\";\nimport {\n  MINIMAL_CROP_SIZE,\n  getUncroppedWidthAndHeight,\n} from \"@jsondraw/element\";\nimport { resizeSingleElement } from \"@jsondraw/element\";\nimport { isImageElement } from \"@jsondraw/element\";\nimport { isFrameLikeElement } from \"@jsondraw/element\";\nimport { getElementsInResizingFrame } from \"@jsondraw/element\";\nimport { replaceAllElementsInFrame } from \"@jsondraw/element\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport DragInput from \"./DragInput\";\nimport { getStepSizedValue, isPropertyEditable } from \"./utils\";\n\nimport type {\n  DragFinishedCallbackType,\n  DragInputCallbackType,\n} from \"./DragInput\";\nimport type { AppState } from \"../../types\";\n\ninterface DimensionDragInputProps {\n  property: \"width\" | \"height\";\n  element: JsonDrawElement;\n  scene: Scene;\n  appState: AppState;\n}\n\nconst STEP_SIZE = 10;\nconst _shouldKeepAspectRatio = (element: JsonDrawElement) => {\n  return element.type === \"image\";\n};\n\nconst handleDimensionChange: DragInputCallbackType<\n  DimensionDragInputProps[\"property\"]\n> = ({\n  accumulatedChange,\n  originalElements,\n  originalElementsMap,\n  shouldKeepAspectRatio,\n  shouldChangeByStepSize,\n  nextValue,\n  property,\n  originalAppState,\n  instantChange,\n  scene,\n  app,\n  setAppState,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const origElement = originalElements[0];\n  const latestElement = elementsMap.get(origElement.id);\n  if (origElement && latestElement) {\n    const keepAspectRatio =\n      shouldKeepAspectRatio || _shouldKeepAspectRatio(origElement);\n    const aspectRatio = origElement.width / origElement.height;\n\n    if (originalAppState.croppingElementId === origElement.id) {\n      const element = elementsMap.get(origElement.id);\n\n      if (!element || !isImageElement(element) || !element.crop) {\n        return;\n      }\n\n      const crop = element.crop;\n      let nextCrop = { ...crop };\n\n      const isFlippedByX = element.scale[0] === -1;\n      const isFlippedByY = element.scale[1] === -1;\n\n      const { width: uncroppedWidth, height: uncroppedHeight } =\n        getUncroppedWidthAndHeight(element);\n\n      const naturalToUncroppedWidthRatio = crop.naturalWidth / uncroppedWidth;\n      const naturalToUncroppedHeightRatio =\n        crop.naturalHeight / uncroppedHeight;\n\n      const MAX_POSSIBLE_WIDTH = isFlippedByX\n        ? crop.width + crop.x\n        : crop.naturalWidth - crop.x;\n\n      const MAX_POSSIBLE_HEIGHT = isFlippedByY\n        ? crop.height + crop.y\n        : crop.naturalHeight - crop.y;\n\n      const MIN_WIDTH = MINIMAL_CROP_SIZE * naturalToUncroppedWidthRatio;\n      const MIN_HEIGHT = MINIMAL_CROP_SIZE * naturalToUncroppedHeightRatio;\n\n      if (nextValue !== undefined) {\n        if (property === \"width\") {\n          const nextValueInNatural = nextValue * naturalToUncroppedWidthRatio;\n\n          const nextCropWidth = clamp(\n            nextValueInNatural,\n            MIN_WIDTH,\n            MAX_POSSIBLE_WIDTH,\n          );\n\n          nextCrop = {\n            ...nextCrop,\n            width: nextCropWidth,\n            x: isFlippedByX ? crop.x + crop.width - nextCropWidth : crop.x,\n          };\n        } else if (property === \"height\") {\n          const nextValueInNatural = nextValue * naturalToUncroppedHeightRatio;\n          const nextCropHeight = clamp(\n            nextValueInNatural,\n            MIN_HEIGHT,\n            MAX_POSSIBLE_HEIGHT,\n          );\n\n          nextCrop = {\n            ...nextCrop,\n            height: nextCropHeight,\n            y: isFlippedByY ? crop.y + crop.height - nextCropHeight : crop.y,\n          };\n        }\n\n        scene.mutateElement(element, {\n          crop: nextCrop,\n          width: nextCrop.width / (crop.naturalWidth / uncroppedWidth),\n          height: nextCrop.height / (crop.naturalHeight / uncroppedHeight),\n        });\n        return;\n      }\n\n      const changeInWidth = property === \"width\" ? instantChange : 0;\n      const changeInHeight = property === \"height\" ? instantChange : 0;\n\n      const nextCropWidth = clamp(\n        crop.width + changeInWidth,\n        MIN_WIDTH,\n        MAX_POSSIBLE_WIDTH,\n      );\n\n      const nextCropHeight = clamp(\n        crop.height + changeInHeight,\n        MIN_WIDTH,\n        MAX_POSSIBLE_HEIGHT,\n      );\n\n      nextCrop = {\n        ...crop,\n        x: isFlippedByX ? crop.x + crop.width - nextCropWidth : crop.x,\n        y: isFlippedByY ? crop.y + crop.height - nextCropHeight : crop.y,\n        width: nextCropWidth,\n        height: nextCropHeight,\n      };\n\n      scene.mutateElement(element, {\n        crop: nextCrop,\n        width: nextCrop.width / (crop.naturalWidth / uncroppedWidth),\n        height: nextCrop.height / (crop.naturalHeight / uncroppedHeight),\n      });\n\n      return;\n    }\n\n    // User types in a value to stats then presses Enter\n    if (nextValue !== undefined) {\n      const nextWidth = Math.max(\n        property === \"width\"\n          ? nextValue\n          : keepAspectRatio\n          ? nextValue * aspectRatio\n          : origElement.width,\n        MIN_WIDTH_OR_HEIGHT,\n      );\n      const nextHeight = Math.max(\n        property === \"height\"\n          ? nextValue\n          : keepAspectRatio\n          ? nextValue / aspectRatio\n          : origElement.height,\n        MIN_WIDTH_OR_HEIGHT,\n      );\n\n      resizeSingleElement(\n        nextWidth,\n        nextHeight,\n        latestElement,\n        origElement,\n        originalElementsMap,\n        scene,\n        property === \"width\" ? \"e\" : \"s\",\n        {\n          shouldMaintainAspectRatio: keepAspectRatio,\n        },\n      );\n\n      // Handle frame membership update for resized frames\n      if (isFrameLikeElement(latestElement)) {\n        const nextElementsInFrame = getElementsInResizingFrame(\n          scene.getElementsIncludingDeleted(),\n          latestElement,\n          originalAppState,\n          scene.getNonDeletedElementsMap(),\n        );\n\n        const updatedElements = replaceAllElementsInFrame(\n          scene.getElementsIncludingDeleted(),\n          nextElementsInFrame,\n          latestElement,\n          app,\n        );\n\n        scene.replaceAllElements(updatedElements);\n      }\n\n      return;\n    }\n\n    // Stats slider is dragged\n    {\n      const changeInWidth = property === \"width\" ? accumulatedChange : 0;\n      const changeInHeight = property === \"height\" ? accumulatedChange : 0;\n\n      let nextWidth = Math.max(0, origElement.width + changeInWidth);\n      if (property === \"width\") {\n        if (shouldChangeByStepSize) {\n          nextWidth = getStepSizedValue(nextWidth, STEP_SIZE);\n        } else {\n          nextWidth = Math.round(nextWidth);\n        }\n      }\n\n      let nextHeight = Math.max(0, origElement.height + changeInHeight);\n      if (property === \"height\") {\n        if (shouldChangeByStepSize) {\n          nextHeight = getStepSizedValue(nextHeight, STEP_SIZE);\n        } else {\n          nextHeight = Math.round(nextHeight);\n        }\n      }\n\n      if (keepAspectRatio) {\n        if (property === \"width\") {\n          nextHeight = Math.round((nextWidth / aspectRatio) * 100) / 100;\n        } else {\n          nextWidth = Math.round(nextHeight * aspectRatio * 100) / 100;\n        }\n      }\n\n      nextHeight = Math.max(MIN_WIDTH_OR_HEIGHT, nextHeight);\n      nextWidth = Math.max(MIN_WIDTH_OR_HEIGHT, nextWidth);\n\n      resizeSingleElement(\n        nextWidth,\n        nextHeight,\n        latestElement,\n        origElement,\n        originalElementsMap,\n        scene,\n        property === \"width\" ? \"e\" : \"s\",\n        {\n          shouldMaintainAspectRatio: keepAspectRatio,\n        },\n      );\n\n      // Handle highlighting frame element candidates\n      if (isFrameLikeElement(latestElement)) {\n        const nextElementsInFrame = getElementsInResizingFrame(\n          scene.getElementsIncludingDeleted(),\n          latestElement,\n          originalAppState,\n          scene.getNonDeletedElementsMap(),\n        );\n\n        setAppState({\n          elementsToHighlight: nextElementsInFrame,\n        });\n      }\n    }\n  }\n};\n\nconst handleDragFinished: DragFinishedCallbackType = ({\n  setAppState,\n  app,\n  originalElements,\n  originalAppState,\n}) => {\n  const elementsMap = app.scene.getNonDeletedElementsMap();\n  const origElement = originalElements?.[0];\n  const latestElement = origElement && elementsMap.get(origElement.id);\n\n  // Handle frame membership update for resized frames\n  if (latestElement && isFrameLikeElement(latestElement)) {\n    const nextElementsInFrame = getElementsInResizingFrame(\n      app.scene.getElementsIncludingDeleted(),\n      latestElement,\n      originalAppState,\n      app.scene.getNonDeletedElementsMap(),\n    );\n\n    const updatedElements = replaceAllElementsInFrame(\n      app.scene.getElementsIncludingDeleted(),\n      nextElementsInFrame,\n      latestElement,\n      app,\n    );\n\n    app.scene.replaceAllElements(updatedElements);\n\n    setAppState({\n      elementsToHighlight: null,\n    });\n  }\n};\n\nconst DimensionDragInput = ({\n  property,\n  element,\n  scene,\n  appState,\n}: DimensionDragInputProps) => {\n  let value = round(property === \"width\" ? element.width : element.height, 2);\n\n  if (\n    appState.croppingElementId &&\n    appState.croppingElementId === element.id &&\n    isImageElement(element) &&\n    element.crop\n  ) {\n    const { width: uncroppedWidth, height: uncroppedHeight } =\n      getUncroppedWidthAndHeight(element);\n    if (property === \"width\") {\n      const ratio = uncroppedWidth / element.crop.naturalWidth;\n      value = round(element.crop.width * ratio, 2);\n    }\n    if (property === \"height\") {\n      const ratio = uncroppedHeight / element.crop.naturalHeight;\n      value = round(element.crop.height * ratio, 2);\n    }\n  }\n\n  return (\n    <DragInput\n      label={property === \"width\" ? \"W\" : \"H\"}\n      elements={[element]}\n      dragInputCallback={handleDimensionChange}\n      value={value}\n      editable={isPropertyEditable(element, property)}\n      scene={scene}\n      appState={appState}\n      property={property}\n      dragFinishedCallback={handleDragFinished}\n    />\n  );\n};\n\nexport default DimensionDragInput;\n","import {\n  getBoundTextElement,\n  redrawTextBoundingBox,\n} from \"@jsondraw/element\";\nimport { hasBoundTextElement, isTextElement } from \"@jsondraw/element\";\n\nimport type {\n  JsonDrawElement,\n  JsonDrawTextElement,\n} from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport { fontSizeIcon } from \"../icons\";\n\nimport StatsDragInput from \"./DragInput\";\nimport { getStepSizedValue } from \"./utils\";\n\nimport type { DragInputCallbackType } from \"./DragInput\";\nimport type { AppState } from \"../../types\";\n\ninterface FontSizeProps {\n  element: JsonDrawElement;\n  scene: Scene;\n  appState: AppState;\n  property: \"fontSize\";\n}\n\nconst MIN_FONT_SIZE = 4;\nconst STEP_SIZE = 4;\n\nconst handleFontSizeChange: DragInputCallbackType<\n  FontSizeProps[\"property\"],\n  JsonDrawTextElement\n> = ({\n  accumulatedChange,\n  originalElements,\n  shouldChangeByStepSize,\n  nextValue,\n  scene,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n\n  const origElement = originalElements[0];\n  if (origElement) {\n    const latestElement = elementsMap.get(origElement.id);\n    if (!latestElement || !isTextElement(latestElement)) {\n      return;\n    }\n\n    let nextFontSize;\n\n    if (nextValue !== undefined) {\n      nextFontSize = Math.max(Math.round(nextValue), MIN_FONT_SIZE);\n    } else if (origElement.type === \"text\") {\n      const originalFontSize = Math.round(origElement.fontSize);\n      const changeInFontSize = Math.round(accumulatedChange);\n      nextFontSize = Math.max(\n        originalFontSize + changeInFontSize,\n        MIN_FONT_SIZE,\n      );\n      if (shouldChangeByStepSize) {\n        nextFontSize = getStepSizedValue(nextFontSize, STEP_SIZE);\n      }\n    }\n\n    if (nextFontSize) {\n      scene.mutateElement(latestElement, {\n        fontSize: nextFontSize,\n      });\n      redrawTextBoundingBox(\n        latestElement,\n        scene.getContainerElement(latestElement),\n        scene,\n      );\n    }\n  }\n};\n\nconst FontSize = ({ element, scene, appState, property }: FontSizeProps) => {\n  const _element = isTextElement(element)\n    ? element\n    : hasBoundTextElement(element)\n    ? getBoundTextElement(element, scene.getNonDeletedElementsMap())\n    : null;\n\n  if (!_element) {\n    return null;\n  }\n\n  return (\n    <StatsDragInput\n      label=\"F\"\n      value={Math.round(_element.fontSize * 10) / 10}\n      elements={[_element]}\n      dragInputCallback={handleFontSizeChange}\n      icon={fontSizeIcon}\n      appState={appState}\n      scene={scene}\n      property={property}\n    />\n  );\n};\n\nexport default FontSize;\n","import { degreesToRadians, radiansToDegrees } from \"@jsondraw/math\";\n\nimport { getBoundTextElement } from \"@jsondraw/element\";\nimport { isArrowElement } from \"@jsondraw/element\";\n\nimport { isInGroup } from \"@jsondraw/element\";\n\nimport type { Degrees } from \"@jsondraw/math\";\n\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport { angleIcon } from \"../icons\";\n\nimport DragInput from \"./DragInput\";\nimport { getStepSizedValue, isPropertyEditable } from \"./utils\";\n\nimport type { DragInputCallbackType } from \"./DragInput\";\nimport type { AppState } from \"../../types\";\n\ninterface MultiAngleProps {\n  elements: readonly JsonDrawElement[];\n  scene: Scene;\n  appState: AppState;\n  property: \"angle\";\n}\n\nconst STEP_SIZE = 15;\n\nconst handleDegreeChange: DragInputCallbackType<\n  MultiAngleProps[\"property\"]\n> = ({\n  accumulatedChange,\n  originalElements,\n  shouldChangeByStepSize,\n  nextValue,\n  property,\n  scene,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const editableLatestIndividualElements = originalElements\n    .map((el) => elementsMap.get(el.id))\n    .filter((el) => el && !isInGroup(el) && isPropertyEditable(el, property));\n  const editableOriginalIndividualElements = originalElements.filter(\n    (el) => !isInGroup(el) && isPropertyEditable(el, property),\n  );\n\n  if (nextValue !== undefined) {\n    const nextAngle = degreesToRadians(nextValue as Degrees);\n\n    for (const element of editableLatestIndividualElements) {\n      if (!element) {\n        continue;\n      }\n      scene.mutateElement(element, {\n        angle: nextAngle,\n      });\n\n      const boundTextElement = getBoundTextElement(element, elementsMap);\n      if (boundTextElement && !isArrowElement(element)) {\n        scene.mutateElement(boundTextElement, { angle: nextAngle });\n      }\n    }\n\n    scene.triggerUpdate();\n\n    return;\n  }\n\n  for (let i = 0; i < editableLatestIndividualElements.length; i++) {\n    const latestElement = editableLatestIndividualElements[i];\n    if (!latestElement) {\n      continue;\n    }\n    const originalElement = editableOriginalIndividualElements[i];\n    const originalAngleInDegrees =\n      Math.round(radiansToDegrees(originalElement.angle) * 100) / 100;\n    const changeInDegrees = Math.round(accumulatedChange);\n    let nextAngleInDegrees = (originalAngleInDegrees + changeInDegrees) % 360;\n    if (shouldChangeByStepSize) {\n      nextAngleInDegrees = getStepSizedValue(nextAngleInDegrees, STEP_SIZE);\n    }\n\n    nextAngleInDegrees =\n      nextAngleInDegrees < 0 ? nextAngleInDegrees + 360 : nextAngleInDegrees;\n\n    const nextAngle = degreesToRadians(nextAngleInDegrees as Degrees);\n\n    scene.mutateElement(latestElement, {\n      angle: nextAngle,\n    });\n\n    const boundTextElement = getBoundTextElement(latestElement, elementsMap);\n    if (boundTextElement && !isArrowElement(latestElement)) {\n      scene.mutateElement(boundTextElement, { angle: nextAngle });\n    }\n  }\n  scene.triggerUpdate();\n};\n\nconst MultiAngle = ({\n  elements,\n  scene,\n  appState,\n  property,\n}: MultiAngleProps) => {\n  const editableLatestIndividualElements = elements.filter(\n    (el) => !isInGroup(el) && isPropertyEditable(el, \"angle\"),\n  );\n  const angles = editableLatestIndividualElements.map(\n    (el) => Math.round((radiansToDegrees(el.angle) % 360) * 100) / 100,\n  );\n  const value = new Set(angles).size === 1 ? angles[0] : \"Mixed\";\n\n  const editable = editableLatestIndividualElements.some((el) =>\n    isPropertyEditable(el, \"angle\"),\n  );\n\n  return (\n    <DragInput\n      label=\"A\"\n      icon={angleIcon}\n      value={value}\n      elements={elements}\n      dragInputCallback={handleDegreeChange}\n      editable={editable}\n      appState={appState}\n      scene={scene}\n      property={property}\n    />\n  );\n};\n\nexport default MultiAngle;\n","export * from \"./export\";\nexport * from \"./withinBounds\";\nexport * from \"./bbox\";\nexport { getCommonBounds } from \"@jsondraw/element\";\n","import { pointFrom, type GlobalPoint } from \"@jsondraw/math\";\nimport { useMemo } from \"react\";\n\nimport { MIN_WIDTH_OR_HEIGHT } from \"@jsondraw/common\";\nimport {\n  getElementsInResizingFrame,\n  isFrameLikeElement,\n  replaceAllElementsInFrame,\n  updateBoundElements,\n} from \"@jsondraw/element\";\nimport {\n  rescalePointsInElement,\n  resizeSingleElement,\n} from \"@jsondraw/element\";\nimport { getBoundTextElement, handleBindTextResize } from \"@jsondraw/element\";\n\nimport { isTextElement } from \"@jsondraw/element\";\n\nimport { getCommonBounds } from \"@jsondraw/utils\";\n\nimport type {\n  ElementsMap,\n  JsonDrawElement,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport DragInput from \"./DragInput\";\nimport { getAtomicUnits, getStepSizedValue, isPropertyEditable } from \"./utils\";\nimport { getElementsInAtomicUnit } from \"./utils\";\n\nimport type {\n  DragFinishedCallbackType,\n  DragInputCallbackType,\n} from \"./DragInput\";\nimport type { AtomicUnit } from \"./utils\";\nimport type { AppState } from \"../../types\";\n\ninterface MultiDimensionProps {\n  property: \"width\" | \"height\";\n  elements: readonly JsonDrawElement[];\n  elementsMap: NonDeletedSceneElementsMap;\n  atomicUnits: AtomicUnit[];\n  scene: Scene;\n  appState: AppState;\n}\n\nconst STEP_SIZE = 10;\n\nconst getResizedUpdates = (\n  anchorX: number,\n  anchorY: number,\n  scale: number,\n  origElement: JsonDrawElement,\n) => {\n  const offsetX = origElement.x - anchorX;\n  const offsetY = origElement.y - anchorY;\n  const nextWidth = origElement.width * scale;\n  const nextHeight = origElement.height * scale;\n  const x = anchorX + offsetX * scale;\n  const y = anchorY + offsetY * scale;\n\n  return {\n    width: nextWidth,\n    height: nextHeight,\n    x,\n    y,\n    ...rescalePointsInElement(origElement, nextWidth, nextHeight, false),\n    ...(isTextElement(origElement)\n      ? { fontSize: origElement.fontSize * scale }\n      : {}),\n  };\n};\n\nconst resizeElementInGroup = (\n  anchorX: number,\n  anchorY: number,\n  property: MultiDimensionProps[\"property\"],\n  scale: number,\n  latestElement: JsonDrawElement,\n  origElement: JsonDrawElement,\n  originalElementsMap: ElementsMap,\n  scene: Scene,\n) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const updates = getResizedUpdates(anchorX, anchorY, scale, origElement);\n\n  scene.mutateElement(latestElement, updates);\n\n  const boundTextElement = getBoundTextElement(\n    origElement,\n    originalElementsMap,\n  );\n  if (boundTextElement) {\n    const newFontSize = boundTextElement.fontSize * scale;\n    updateBoundElements(latestElement, scene);\n    const latestBoundTextElement = elementsMap.get(boundTextElement.id);\n    if (latestBoundTextElement && isTextElement(latestBoundTextElement)) {\n      scene.mutateElement(latestBoundTextElement, {\n        fontSize: newFontSize,\n      });\n      handleBindTextResize(\n        latestElement,\n        scene,\n        property === \"width\" ? \"e\" : \"s\",\n        true,\n      );\n    }\n  }\n};\n\nconst resizeGroup = (\n  nextWidth: number,\n  nextHeight: number,\n  initialHeight: number,\n  aspectRatio: number,\n  anchor: GlobalPoint,\n  property: MultiDimensionProps[\"property\"],\n  latestElements: JsonDrawElement[],\n  originalElements: JsonDrawElement[],\n  originalElementsMap: ElementsMap,\n  scene: Scene,\n) => {\n  // keep aspect ratio for groups\n  if (property === \"width\") {\n    nextHeight = Math.round((nextWidth / aspectRatio) * 100) / 100;\n  } else {\n    nextWidth = Math.round(nextHeight * aspectRatio * 100) / 100;\n  }\n\n  const scale = nextHeight / initialHeight;\n\n  for (let i = 0; i < originalElements.length; i++) {\n    const origElement = originalElements[i];\n    const latestElement = latestElements[i];\n\n    resizeElementInGroup(\n      anchor[0],\n      anchor[1],\n      property,\n      scale,\n      latestElement,\n      origElement,\n      originalElementsMap,\n      scene,\n    );\n  }\n};\n\nconst handleDimensionChange: DragInputCallbackType<\n  MultiDimensionProps[\"property\"]\n> = ({\n  accumulatedChange,\n  originalElements,\n  originalElementsMap,\n  originalAppState,\n  shouldChangeByStepSize,\n  nextValue,\n  scene,\n  property,\n  setAppState,\n  app,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const atomicUnits = getAtomicUnits(originalElements, originalAppState);\n  if (nextValue !== undefined) {\n    for (const atomicUnit of atomicUnits) {\n      const elementsInUnit = getElementsInAtomicUnit(\n        atomicUnit,\n        elementsMap,\n        originalElementsMap,\n      );\n\n      if (elementsInUnit.length > 1) {\n        const latestElements = elementsInUnit.map((el) => el.latest!);\n        const originalElements = elementsInUnit.map((el) => el.original!);\n        const [x1, y1, x2, y2] = getCommonBounds(originalElements);\n        const initialWidth = x2 - x1;\n        const initialHeight = y2 - y1;\n        const aspectRatio = initialWidth / initialHeight;\n        const nextWidth = Math.max(\n          MIN_WIDTH_OR_HEIGHT,\n          property === \"width\" ? Math.max(0, nextValue) : initialWidth,\n        );\n        const nextHeight = Math.max(\n          MIN_WIDTH_OR_HEIGHT,\n          property === \"height\" ? Math.max(0, nextValue) : initialHeight,\n        );\n\n        resizeGroup(\n          nextWidth,\n          nextHeight,\n          initialHeight,\n          aspectRatio,\n          pointFrom(x1, y1),\n          property,\n          latestElements,\n          originalElements,\n          originalElementsMap,\n          scene,\n        );\n      } else {\n        const [el] = elementsInUnit;\n        const latestElement = el?.latest;\n        const origElement = el?.original;\n\n        if (\n          latestElement &&\n          origElement &&\n          isPropertyEditable(latestElement, property)\n        ) {\n          let nextWidth =\n            property === \"width\" ? Math.max(0, nextValue) : latestElement.width;\n          if (property === \"width\") {\n            if (shouldChangeByStepSize) {\n              nextWidth = getStepSizedValue(nextWidth, STEP_SIZE);\n            } else {\n              nextWidth = Math.round(nextWidth);\n            }\n          }\n\n          let nextHeight =\n            property === \"height\"\n              ? Math.max(0, nextValue)\n              : latestElement.height;\n          if (property === \"height\") {\n            if (shouldChangeByStepSize) {\n              nextHeight = getStepSizedValue(nextHeight, STEP_SIZE);\n            } else {\n              nextHeight = Math.round(nextHeight);\n            }\n          }\n\n          nextWidth = Math.max(MIN_WIDTH_OR_HEIGHT, nextWidth);\n          nextHeight = Math.max(MIN_WIDTH_OR_HEIGHT, nextHeight);\n\n          resizeSingleElement(\n            nextWidth,\n            nextHeight,\n            latestElement,\n            origElement,\n            originalElementsMap,\n            scene,\n            property === \"width\" ? \"e\" : \"s\",\n            {\n              shouldInformMutation: false,\n            },\n          );\n\n          // Handle frame membership update for resized frames\n          if (isFrameLikeElement(latestElement)) {\n            const nextElementsInFrame = getElementsInResizingFrame(\n              scene.getElementsIncludingDeleted(),\n              latestElement,\n              originalAppState,\n              scene.getNonDeletedElementsMap(),\n            );\n\n            const updatedElements = replaceAllElementsInFrame(\n              scene.getElementsIncludingDeleted(),\n              nextElementsInFrame,\n              latestElement,\n              app,\n            );\n\n            scene.replaceAllElements(updatedElements);\n          }\n        }\n      }\n    }\n\n    scene.triggerUpdate();\n\n    return;\n  }\n\n  const changeInWidth = property === \"width\" ? accumulatedChange : 0;\n  const changeInHeight = property === \"height\" ? accumulatedChange : 0;\n  const elementsToHighlight: JsonDrawElement[] = [];\n\n  for (const atomicUnit of atomicUnits) {\n    const elementsInUnit = getElementsInAtomicUnit(\n      atomicUnit,\n      elementsMap,\n      originalElementsMap,\n    );\n\n    if (elementsInUnit.length > 1) {\n      const latestElements = elementsInUnit.map((el) => el.latest!);\n      const originalElements = elementsInUnit.map((el) => el.original!);\n\n      const [x1, y1, x2, y2] = getCommonBounds(originalElements);\n      const initialWidth = x2 - x1;\n      const initialHeight = y2 - y1;\n      const aspectRatio = initialWidth / initialHeight;\n      let nextWidth = Math.max(0, initialWidth + changeInWidth);\n      if (property === \"width\") {\n        if (shouldChangeByStepSize) {\n          nextWidth = getStepSizedValue(nextWidth, STEP_SIZE);\n        } else {\n          nextWidth = Math.round(nextWidth);\n        }\n      }\n\n      let nextHeight = Math.max(0, initialHeight + changeInHeight);\n      if (property === \"height\") {\n        if (shouldChangeByStepSize) {\n          nextHeight = getStepSizedValue(nextHeight, STEP_SIZE);\n        } else {\n          nextHeight = Math.round(nextHeight);\n        }\n      }\n\n      nextWidth = Math.max(MIN_WIDTH_OR_HEIGHT, nextWidth);\n      nextHeight = Math.max(MIN_WIDTH_OR_HEIGHT, nextHeight);\n\n      resizeGroup(\n        nextWidth,\n        nextHeight,\n        initialHeight,\n        aspectRatio,\n        pointFrom(x1, y1),\n        property,\n        latestElements,\n        originalElements,\n        originalElementsMap,\n        scene,\n      );\n    } else {\n      const [el] = elementsInUnit;\n      const latestElement = el?.latest;\n      const origElement = el?.original;\n\n      if (\n        latestElement &&\n        origElement &&\n        isPropertyEditable(latestElement, property)\n      ) {\n        let nextWidth = Math.max(0, origElement.width + changeInWidth);\n        if (property === \"width\") {\n          if (shouldChangeByStepSize) {\n            nextWidth = getStepSizedValue(nextWidth, STEP_SIZE);\n          } else {\n            nextWidth = Math.round(nextWidth);\n          }\n        }\n\n        let nextHeight = Math.max(0, origElement.height + changeInHeight);\n        if (property === \"height\") {\n          if (shouldChangeByStepSize) {\n            nextHeight = getStepSizedValue(nextHeight, STEP_SIZE);\n          } else {\n            nextHeight = Math.round(nextHeight);\n          }\n        }\n\n        nextWidth = Math.max(MIN_WIDTH_OR_HEIGHT, nextWidth);\n        nextHeight = Math.max(MIN_WIDTH_OR_HEIGHT, nextHeight);\n\n        resizeSingleElement(\n          nextWidth,\n          nextHeight,\n          latestElement,\n          origElement,\n          originalElementsMap,\n          scene,\n          property === \"width\" ? \"e\" : \"s\",\n          {\n            shouldInformMutation: false,\n          },\n        );\n\n        // Handle highlighting frame element candidates\n        if (isFrameLikeElement(latestElement)) {\n          const nextElementsInFrame = getElementsInResizingFrame(\n            scene.getElementsIncludingDeleted(),\n            latestElement,\n            originalAppState,\n            scene.getNonDeletedElementsMap(),\n          );\n\n          elementsToHighlight.push(...nextElementsInFrame);\n        }\n      }\n    }\n  }\n\n  setAppState({\n    elementsToHighlight,\n  });\n\n  scene.triggerUpdate();\n};\n\nconst handleDragFinished: DragFinishedCallbackType = ({\n  setAppState,\n  app,\n  originalElements,\n  originalAppState,\n}) => {\n  const elementsMap = app.scene.getNonDeletedElementsMap();\n  const origElement = originalElements?.[0];\n  const latestElement = origElement && elementsMap.get(origElement.id);\n\n  // Handle frame membership update for resized frames\n  if (latestElement && isFrameLikeElement(latestElement)) {\n    const nextElementsInFrame = getElementsInResizingFrame(\n      app.scene.getElementsIncludingDeleted(),\n      latestElement,\n      originalAppState,\n      app.scene.getNonDeletedElementsMap(),\n    );\n\n    const updatedElements = replaceAllElementsInFrame(\n      app.scene.getElementsIncludingDeleted(),\n      nextElementsInFrame,\n      latestElement,\n      app,\n    );\n\n    app.scene.replaceAllElements(updatedElements);\n\n    setAppState({\n      elementsToHighlight: null,\n    });\n  }\n};\n\nconst MultiDimension = ({\n  property,\n  elements,\n  elementsMap,\n  atomicUnits,\n  scene,\n  appState,\n}: MultiDimensionProps) => {\n  const sizes = useMemo(\n    () =>\n      atomicUnits.map((atomicUnit) => {\n        const elementsInUnit = getElementsInAtomicUnit(atomicUnit, elementsMap);\n\n        if (elementsInUnit.length > 1) {\n          const [x1, y1, x2, y2] = getCommonBounds(\n            elementsInUnit.map((el) => el.latest),\n          );\n          return (\n            Math.round((property === \"width\" ? x2 - x1 : y2 - y1) * 100) / 100\n          );\n        }\n        const [el] = elementsInUnit;\n\n        return (\n          Math.round(\n            (property === \"width\" ? el.latest.width : el.latest.height) * 100,\n          ) / 100\n        );\n      }),\n    [elementsMap, atomicUnits, property],\n  );\n\n  const value =\n    new Set(sizes).size === 1 ? Math.round(sizes[0] * 100) / 100 : \"Mixed\";\n\n  const editable = sizes.length > 0;\n\n  return (\n    <DragInput\n      label={property === \"width\" ? \"W\" : \"H\"}\n      elements={elements}\n      dragInputCallback={handleDimensionChange}\n      value={value}\n      editable={editable}\n      appState={appState}\n      property={property}\n      scene={scene}\n      dragFinishedCallback={handleDragFinished}\n    />\n  );\n};\n\nexport default MultiDimension;\n","import {\n  getBoundTextElement,\n  redrawTextBoundingBox,\n} from \"@jsondraw/element\";\nimport { hasBoundTextElement, isTextElement } from \"@jsondraw/element\";\n\nimport { isInGroup } from \"@jsondraw/element\";\n\nimport type {\n  JsonDrawElement,\n  JsonDrawTextElement,\n  NonDeletedSceneElementsMap,\n} from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport { fontSizeIcon } from \"../icons\";\n\nimport StatsDragInput from \"./DragInput\";\nimport { getStepSizedValue } from \"./utils\";\n\nimport type { DragInputCallbackType } from \"./DragInput\";\nimport type { AppState } from \"../../types\";\n\ninterface MultiFontSizeProps {\n  elements: readonly JsonDrawElement[];\n  scene: Scene;\n  elementsMap: NonDeletedSceneElementsMap;\n  appState: AppState;\n  property: \"fontSize\";\n}\n\nconst MIN_FONT_SIZE = 4;\nconst STEP_SIZE = 4;\n\nconst getApplicableTextElements = (\n  elements: readonly (JsonDrawElement | undefined)[],\n  elementsMap: NonDeletedSceneElementsMap,\n) =>\n  elements.reduce(\n    (acc: JsonDrawTextElement[], el) => {\n      if (!el || isInGroup(el)) {\n        return acc;\n      }\n      if (isTextElement(el)) {\n        acc.push(el);\n        return acc;\n      }\n      if (hasBoundTextElement(el)) {\n        const boundTextElement = getBoundTextElement(el, elementsMap);\n        if (boundTextElement) {\n          acc.push(boundTextElement);\n          return acc;\n        }\n      }\n\n      return acc;\n    },\n\n    [],\n  );\n\nconst handleFontSizeChange: DragInputCallbackType<\n  MultiFontSizeProps[\"property\"],\n  JsonDrawTextElement\n> = ({\n  accumulatedChange,\n  originalElements,\n  shouldChangeByStepSize,\n  nextValue,\n  scene,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const latestTextElements = originalElements.map((el) =>\n    elementsMap.get(el.id),\n  ) as JsonDrawTextElement[];\n\n  let nextFontSize;\n\n  if (nextValue) {\n    nextFontSize = Math.max(Math.round(nextValue), MIN_FONT_SIZE);\n\n    for (const textElement of latestTextElements) {\n      scene.mutateElement(textElement, {\n        fontSize: nextFontSize,\n      });\n\n      redrawTextBoundingBox(\n        textElement,\n        scene.getContainerElement(textElement),\n        scene,\n      );\n    }\n\n    scene.triggerUpdate();\n  } else {\n    const originalTextElements = originalElements as JsonDrawTextElement[];\n\n    for (let i = 0; i < latestTextElements.length; i++) {\n      const latestElement = latestTextElements[i];\n      const originalElement = originalTextElements[i];\n\n      const originalFontSize = Math.round(originalElement.fontSize);\n      const changeInFontSize = Math.round(accumulatedChange);\n      let nextFontSize = Math.max(\n        originalFontSize + changeInFontSize,\n        MIN_FONT_SIZE,\n      );\n      if (shouldChangeByStepSize) {\n        nextFontSize = getStepSizedValue(nextFontSize, STEP_SIZE);\n      }\n      scene.mutateElement(latestElement, {\n        fontSize: nextFontSize,\n      });\n\n      redrawTextBoundingBox(\n        latestElement,\n        scene.getContainerElement(latestElement),\n        scene,\n      );\n    }\n\n    scene.triggerUpdate();\n  }\n};\n\nconst MultiFontSize = ({\n  elements,\n  scene,\n  appState,\n  property,\n  elementsMap,\n}: MultiFontSizeProps) => {\n  const latestTextElements = getApplicableTextElements(elements, elementsMap);\n\n  if (!latestTextElements.length) {\n    return null;\n  }\n\n  const fontSizes = latestTextElements.map(\n    (textEl) => Math.round(textEl.fontSize * 10) / 10,\n  );\n  const value = new Set(fontSizes).size === 1 ? fontSizes[0] : \"Mixed\";\n  const editable = fontSizes.length > 0;\n\n  return (\n    <StatsDragInput\n      label=\"F\"\n      icon={fontSizeIcon}\n      elements={latestTextElements}\n      dragInputCallback={handleFontSizeChange}\n      value={value}\n      editable={editable}\n      scene={scene}\n      property={property}\n      appState={appState}\n    />\n  );\n};\n\nexport default MultiFontSize;\n","import { pointFrom, pointRotateRads } from \"@jsondraw/math\";\nimport { useMemo } from \"react\";\n\nimport { isTextElement } from \"@jsondraw/element\";\n\nimport { getCommonBounds } from \"@jsondraw/element\";\n\nimport type { ElementsMap, JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport StatsDragInput from \"./DragInput\";\nimport {\n  getAtomicUnits,\n  getStepSizedValue,\n  isPropertyEditable,\n  STEP_SIZE,\n} from \"./utils\";\nimport { getElementsInAtomicUnit, moveElement } from \"./utils\";\n\nimport type { DragInputCallbackType } from \"./DragInput\";\nimport type { AtomicUnit } from \"./utils\";\nimport type { AppState } from \"../../types\";\n\ninterface MultiPositionProps {\n  property: \"x\" | \"y\";\n  elements: readonly JsonDrawElement[];\n  elementsMap: ElementsMap;\n  atomicUnits: AtomicUnit[];\n  scene: Scene;\n  appState: AppState;\n}\n\nconst moveElements = (\n  property: MultiPositionProps[\"property\"],\n  changeInTopX: number,\n  changeInTopY: number,\n  originalElements: readonly JsonDrawElement[],\n  originalElementsMap: ElementsMap,\n  scene: Scene,\n  appState: AppState,\n) => {\n  for (let i = 0; i < originalElements.length; i++) {\n    const origElement = originalElements[i];\n\n    const [cx, cy] = [\n      origElement.x + origElement.width / 2,\n      origElement.y + origElement.height / 2,\n    ];\n    const [topLeftX, topLeftY] = pointRotateRads(\n      pointFrom(origElement.x, origElement.y),\n      pointFrom(cx, cy),\n      origElement.angle,\n    );\n\n    const newTopLeftX =\n      property === \"x\" ? Math.round(topLeftX + changeInTopX) : topLeftX;\n\n    const newTopLeftY =\n      property === \"y\" ? Math.round(topLeftY + changeInTopY) : topLeftY;\n\n    moveElement(\n      newTopLeftX,\n      newTopLeftY,\n      origElement,\n      scene,\n      appState,\n      originalElementsMap,\n      false,\n    );\n  }\n};\n\nconst moveGroupTo = (\n  nextX: number,\n  nextY: number,\n  originalElements: JsonDrawElement[],\n  originalElementsMap: ElementsMap,\n  scene: Scene,\n  appState: AppState,\n) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const [x1, y1, ,] = getCommonBounds(originalElements);\n  const offsetX = nextX - x1;\n  const offsetY = nextY - y1;\n\n  for (let i = 0; i < originalElements.length; i++) {\n    const origElement = originalElements[i];\n\n    const latestElement = elementsMap.get(origElement.id);\n    if (!latestElement) {\n      continue;\n    }\n\n    // bound texts are moved with their containers\n    if (!isTextElement(latestElement) || !latestElement.containerId) {\n      const [cx, cy] = [\n        latestElement.x + latestElement.width / 2,\n        latestElement.y + latestElement.height / 2,\n      ];\n\n      const [topLeftX, topLeftY] = pointRotateRads(\n        pointFrom(latestElement.x, latestElement.y),\n        pointFrom(cx, cy),\n        latestElement.angle,\n      );\n\n      moveElement(\n        topLeftX + offsetX,\n        topLeftY + offsetY,\n        origElement,\n        scene,\n        appState,\n        originalElementsMap,\n        false,\n      );\n    }\n  }\n};\n\nconst handlePositionChange: DragInputCallbackType<\n  MultiPositionProps[\"property\"]\n> = ({\n  accumulatedChange,\n  originalElements,\n  originalElementsMap,\n  shouldChangeByStepSize,\n  nextValue,\n  property,\n  scene,\n  originalAppState,\n  app,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n\n  if (nextValue !== undefined) {\n    for (const atomicUnit of getAtomicUnits(\n      originalElements,\n      originalAppState,\n    )) {\n      const elementsInUnit = getElementsInAtomicUnit(\n        atomicUnit,\n        elementsMap,\n        originalElementsMap,\n      );\n\n      if (elementsInUnit.length > 1) {\n        const [x1, y1, ,] = getCommonBounds(\n          elementsInUnit.map((el) => el.latest!),\n        );\n        const newTopLeftX = property === \"x\" ? nextValue : x1;\n        const newTopLeftY = property === \"y\" ? nextValue : y1;\n\n        moveGroupTo(\n          newTopLeftX,\n          newTopLeftY,\n          elementsInUnit.map((el) => el.original),\n          originalElementsMap,\n          scene,\n          app.state,\n        );\n      } else {\n        const origElement = elementsInUnit[0]?.original;\n        const latestElement = elementsInUnit[0]?.latest;\n        if (\n          origElement &&\n          latestElement &&\n          isPropertyEditable(latestElement, property)\n        ) {\n          const [cx, cy] = [\n            origElement.x + origElement.width / 2,\n            origElement.y + origElement.height / 2,\n          ];\n          const [topLeftX, topLeftY] = pointRotateRads(\n            pointFrom(origElement.x, origElement.y),\n            pointFrom(cx, cy),\n            origElement.angle,\n          );\n\n          const newTopLeftX = property === \"x\" ? nextValue : topLeftX;\n          const newTopLeftY = property === \"y\" ? nextValue : topLeftY;\n          moveElement(\n            newTopLeftX,\n            newTopLeftY,\n            origElement,\n            scene,\n            app.state,\n            originalElementsMap,\n            false,\n          );\n        }\n      }\n    }\n\n    scene.triggerUpdate();\n    return;\n  }\n\n  const change = shouldChangeByStepSize\n    ? getStepSizedValue(accumulatedChange, STEP_SIZE)\n    : accumulatedChange;\n\n  const changeInTopX = property === \"x\" ? change : 0;\n  const changeInTopY = property === \"y\" ? change : 0;\n\n  moveElements(\n    property,\n    changeInTopX,\n    changeInTopY,\n    originalElements,\n    originalElementsMap,\n    scene,\n    app.state,\n  );\n\n  scene.triggerUpdate();\n};\n\nconst MultiPosition = ({\n  property,\n  elements,\n  elementsMap,\n  atomicUnits,\n  scene,\n  appState,\n}: MultiPositionProps) => {\n  const positions = useMemo(\n    () =>\n      atomicUnits.map((atomicUnit) => {\n        const elementsInUnit = Object.keys(atomicUnit)\n          .map((id) => elementsMap.get(id))\n          .filter((el) => el !== undefined) as JsonDrawElement[];\n\n        // we're dealing with a group\n        if (elementsInUnit.length > 1) {\n          const [x1, y1] = getCommonBounds(elementsInUnit);\n          return Math.round((property === \"x\" ? x1 : y1) * 100) / 100;\n        }\n\n        const [el] = elementsInUnit;\n        const [cx, cy] = [el.x + el.width / 2, el.y + el.height / 2];\n\n        const [topLeftX, topLeftY] = pointRotateRads(\n          pointFrom(el.x, el.y),\n          pointFrom(cx, cy),\n          el.angle,\n        );\n\n        return Math.round((property === \"x\" ? topLeftX : topLeftY) * 100) / 100;\n      }),\n    [atomicUnits, elementsMap, property],\n  );\n\n  const value = new Set(positions).size === 1 ? positions[0] : \"Mixed\";\n\n  return (\n    <StatsDragInput\n      label={property === \"x\" ? \"X\" : \"Y\"}\n      elements={elements}\n      dragInputCallback={handlePositionChange}\n      value={value}\n      property={property}\n      scene={scene}\n      appState={appState}\n    />\n  );\n};\n\nexport default MultiPosition;\n","import { clamp, pointFrom, pointRotateRads, round } from \"@jsondraw/math\";\n\nimport {\n  getFlipAdjustedCropPosition,\n  getUncroppedWidthAndHeight,\n} from \"@jsondraw/element\";\nimport { isImageElement } from \"@jsondraw/element\";\n\nimport type { ElementsMap, JsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { Scene } from \"@jsondraw/element\";\n\nimport StatsDragInput from \"./DragInput\";\nimport { getStepSizedValue, moveElement, STEP_SIZE } from \"./utils\";\n\nimport type { DragInputCallbackType } from \"./DragInput\";\nimport type { AppState } from \"../../types\";\n\ninterface PositionProps {\n  property: \"x\" | \"y\";\n  element: JsonDrawElement;\n  elementsMap: ElementsMap;\n  scene: Scene;\n  appState: AppState;\n}\n\nconst handlePositionChange: DragInputCallbackType<\"x\" | \"y\"> = ({\n  accumulatedChange,\n  instantChange,\n  originalElements,\n  originalElementsMap,\n  shouldChangeByStepSize,\n  nextValue,\n  property,\n  scene,\n  originalAppState,\n  app,\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const origElement = originalElements[0];\n  const [cx, cy] = [\n    origElement.x + origElement.width / 2,\n    origElement.y + origElement.height / 2,\n  ];\n  const [topLeftX, topLeftY] = pointRotateRads(\n    pointFrom(origElement.x, origElement.y),\n    pointFrom(cx, cy),\n    origElement.angle,\n  );\n\n  if (originalAppState.croppingElementId === origElement.id) {\n    const element = elementsMap.get(origElement.id);\n\n    if (!element || !isImageElement(element) || !element.crop) {\n      return;\n    }\n\n    const crop = element.crop;\n    let nextCrop = crop;\n    const isFlippedByX = element.scale[0] === -1;\n    const isFlippedByY = element.scale[1] === -1;\n    const { width: uncroppedWidth, height: uncroppedHeight } =\n      getUncroppedWidthAndHeight(element);\n\n    if (nextValue !== undefined) {\n      if (property === \"x\") {\n        const nextValueInNatural =\n          nextValue * (crop.naturalWidth / uncroppedWidth);\n\n        if (isFlippedByX) {\n          nextCrop = {\n            ...crop,\n            x: clamp(\n              crop.naturalWidth - nextValueInNatural - crop.width,\n              0,\n              crop.naturalWidth - crop.width,\n            ),\n          };\n        } else {\n          nextCrop = {\n            ...crop,\n            x: clamp(\n              nextValue * (crop.naturalWidth / uncroppedWidth),\n              0,\n              crop.naturalWidth - crop.width,\n            ),\n          };\n        }\n      }\n\n      if (property === \"y\") {\n        nextCrop = {\n          ...crop,\n          y: clamp(\n            nextValue * (crop.naturalHeight / uncroppedHeight),\n            0,\n            crop.naturalHeight - crop.height,\n          ),\n        };\n      }\n\n      scene.mutateElement(element, {\n        crop: nextCrop,\n      });\n\n      return;\n    }\n\n    const changeInX =\n      (property === \"x\" ? instantChange : 0) * (isFlippedByX ? -1 : 1);\n    const changeInY =\n      (property === \"y\" ? instantChange : 0) * (isFlippedByY ? -1 : 1);\n\n    nextCrop = {\n      ...crop,\n      x: clamp(crop.x + changeInX, 0, crop.naturalWidth - crop.width),\n      y: clamp(crop.y + changeInY, 0, crop.naturalHeight - crop.height),\n    };\n\n    scene.mutateElement(element, {\n      crop: nextCrop,\n    });\n\n    return;\n  }\n\n  if (nextValue !== undefined) {\n    const newTopLeftX = property === \"x\" ? nextValue : topLeftX;\n    const newTopLeftY = property === \"y\" ? nextValue : topLeftY;\n    moveElement(\n      newTopLeftX,\n      newTopLeftY,\n      origElement,\n      scene,\n      app.state,\n      originalElementsMap,\n    );\n    return;\n  }\n\n  const changeInTopX = property === \"x\" ? accumulatedChange : 0;\n  const changeInTopY = property === \"y\" ? accumulatedChange : 0;\n\n  const newTopLeftX =\n    property === \"x\"\n      ? Math.round(\n          shouldChangeByStepSize\n            ? getStepSizedValue(origElement.x + changeInTopX, STEP_SIZE)\n            : topLeftX + changeInTopX,\n        )\n      : topLeftX;\n\n  const newTopLeftY =\n    property === \"y\"\n      ? Math.round(\n          shouldChangeByStepSize\n            ? getStepSizedValue(origElement.y + changeInTopY, STEP_SIZE)\n            : topLeftY + changeInTopY,\n        )\n      : topLeftY;\n\n  moveElement(\n    newTopLeftX,\n    newTopLeftY,\n    origElement,\n    scene,\n    app.state,\n    originalElementsMap,\n  );\n};\n\nconst Position = ({\n  property,\n  element,\n  elementsMap,\n  scene,\n  appState,\n}: PositionProps) => {\n  const [topLeftX, topLeftY] = pointRotateRads(\n    pointFrom(element.x, element.y),\n    pointFrom(element.x + element.width / 2, element.y + element.height / 2),\n    element.angle,\n  );\n  let value = round(property === \"x\" ? topLeftX : topLeftY, 2);\n\n  if (\n    appState.croppingElementId === element.id &&\n    isImageElement(element) &&\n    element.crop\n  ) {\n    const flipAdjustedPosition = getFlipAdjustedCropPosition(element);\n\n    if (flipAdjustedPosition) {\n      value = round(\n        property === \"x\" ? flipAdjustedPosition.x : flipAdjustedPosition.y,\n        2,\n      );\n    }\n  }\n\n  return (\n    <StatsDragInput\n      label={property === \"x\" ? \"X\" : \"Y\"}\n      elements={[element]}\n      dragInputCallback={handlePositionChange}\n      scene={scene}\n      value={value}\n      property={property}\n      appState={appState}\n    />\n  );\n};\n\nexport default Position;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Stats.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Stats.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { round } from \"@jsondraw/math\";\nimport clsx from \"clsx\";\nimport throttle from \"lodash.throttle\";\nimport { useEffect, useMemo, useState, memo } from \"react\";\n\nimport { STATS_PANELS } from \"@jsondraw/common\";\nimport { getCommonBounds } from \"@jsondraw/element\";\nimport { getUncroppedWidthAndHeight } from \"@jsondraw/element\";\nimport { isImageElement } from \"@jsondraw/element\";\n\nimport { frameAndChildrenSelectedTogether } from \"@jsondraw/element\";\n\nimport { elementsAreInSameGroup } from \"@jsondraw/element\";\n\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { t } from \"../../i18n\";\nimport { isGridModeEnabled } from \"../../snapping\";\nimport { useJsonDrawAppState, useJsonDrawSetAppState } from \"../App\";\nimport { Island } from \"../layout/Island\";\nimport { CloseIcon } from \"../icons\";\n\nimport Angle from \"./Angle\";\nimport CanvasGrid from \"./CanvasGrid\";\nimport Collapsible from \"./Collapsible\";\nimport Dimension from \"./Dimension\";\nimport FontSize from \"./FontSize\";\nimport MultiAngle from \"./MultiAngle\";\nimport MultiDimension from \"./MultiDimension\";\nimport MultiFontSize from \"./MultiFontSize\";\nimport MultiPosition from \"./MultiPosition\";\nimport Position from \"./Position\";\nimport { getAtomicUnits } from \"./utils\";\n\nimport \"./Stats.scss\";\n\nimport type {\n  AppClassProperties,\n  AppState,\n  JsonDrawProps,\n} from \"../../types\";\n\ninterface StatsProps {\n  app: AppClassProperties;\n  onClose: () => void;\n  renderCustomStats: JsonDrawProps[\"renderCustomStats\"];\n}\n\nconst STATS_TIMEOUT = 50;\n\nexport const Stats = (props: StatsProps) => {\n  const appState = useJsonDrawAppState();\n  const sceneNonce = props.app.scene.getSceneNonce() || 1;\n  const selectedElements = props.app.scene.getSelectedElements({\n    selectedElementIds: appState.selectedElementIds,\n    includeBoundTextElement: false,\n  });\n  const gridModeEnabled = isGridModeEnabled(props.app);\n\n  return (\n    <StatsInner\n      {...props}\n      appState={appState}\n      sceneNonce={sceneNonce}\n      selectedElements={selectedElements}\n      gridModeEnabled={gridModeEnabled}\n    />\n  );\n};\n\nconst StatsRow = ({\n  children,\n  columns = 1,\n  heading,\n  style,\n  ...rest\n}: {\n  children: React.ReactNode;\n  columns?: number;\n  heading?: boolean;\n  style?: React.CSSProperties;\n} & React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={clsx(\"exc-stats__row\", { \"exc-stats__row--heading\": heading })}\n    style={{\n      gridTemplateColumns: `repeat(${columns}, 1fr)`,\n      ...style,\n    }}\n    {...rest}\n  >\n    {children}\n  </div>\n);\nStatsRow.displayName = \"StatsRow\";\n\nconst StatsRows = ({\n  children,\n  order,\n  style,\n  ...rest\n}: {\n  children: React.ReactNode;\n  order?: number;\n  style?: React.CSSProperties;\n} & React.HTMLAttributes<HTMLDivElement>) => (\n  <div className=\"exc-stats__rows\" style={{ order, ...style }} {...rest}>\n    {children}\n  </div>\n);\nStatsRows.displayName = \"StatsRows\";\n\nStats.StatsRow = StatsRow;\nStats.StatsRows = StatsRows;\n\nexport const StatsInner = memo(\n  ({\n    app,\n    onClose,\n    renderCustomStats,\n    selectedElements,\n    appState,\n    sceneNonce,\n    gridModeEnabled,\n  }: StatsProps & {\n    sceneNonce: number;\n    selectedElements: readonly NonDeletedJsonDrawElement[];\n    appState: AppState;\n    gridModeEnabled: boolean;\n  }) => {\n    const scene = app.scene;\n    const elements = scene.getNonDeletedElements();\n    const elementsMap = scene.getNonDeletedElementsMap();\n    const setAppState = useJsonDrawSetAppState();\n\n    const singleElement =\n      selectedElements.length === 1 ? selectedElements[0] : null;\n\n    const multipleElements =\n      selectedElements.length > 1 ? selectedElements : null;\n\n    const cropMode =\n      appState.croppingElementId && isImageElement(singleElement);\n\n    const unCroppedDimension = cropMode\n      ? getUncroppedWidthAndHeight(singleElement)\n      : null;\n\n    const [sceneDimension, setSceneDimension] = useState<{\n      width: number;\n      height: number;\n    }>({\n      width: 0,\n      height: 0,\n    });\n\n    const throttledSetSceneDimension = useMemo(\n      () =>\n        throttle((elements: readonly NonDeletedJsonDrawElement[]) => {\n          const boundingBox = getCommonBounds(elements);\n          setSceneDimension({\n            width: Math.round(boundingBox[2]) - Math.round(boundingBox[0]),\n            height: Math.round(boundingBox[3]) - Math.round(boundingBox[1]),\n          });\n        }, STATS_TIMEOUT),\n      [],\n    );\n\n    useEffect(() => {\n      throttledSetSceneDimension(elements);\n    }, [sceneNonce, elements, throttledSetSceneDimension]);\n\n    useEffect(\n      () => () => throttledSetSceneDimension.cancel(),\n      [throttledSetSceneDimension],\n    );\n\n    const atomicUnits = useMemo(() => {\n      return getAtomicUnits(selectedElements, appState);\n    }, [selectedElements, appState]);\n\n    const _frameAndChildrenSelectedTogether = useMemo(() => {\n      return frameAndChildrenSelectedTogether(selectedElements);\n    }, [selectedElements]);\n\n    return (\n      <div className=\"exc-stats\">\n        <Island padding={3}>\n          <div className=\"title\">\n            <h2>{t(\"stats.title\")}</h2>\n            <div className=\"close\" onClick={onClose}>\n              {CloseIcon}\n            </div>\n          </div>\n\n          <Collapsible\n            label={<h3>{t(\"stats.generalStats\")}</h3>}\n            open={!!(appState.stats.panels & STATS_PANELS.generalStats)}\n            openTrigger={() =>\n              setAppState((state) => {\n                return {\n                  stats: {\n                    open: true,\n                    panels: state.stats.panels ^ STATS_PANELS.generalStats,\n                  },\n                };\n              })\n            }\n          >\n            <StatsRows>\n              <StatsRow heading>{t(\"stats.scene\")}</StatsRow>\n              <StatsRow columns={2}>\n                <div>{t(\"stats.shapes\")}</div>\n                <div>{elements.length}</div>\n              </StatsRow>\n              <StatsRow columns={2}>\n                <div>{t(\"stats.width\")}</div>\n                <div>{sceneDimension.width}</div>\n              </StatsRow>\n              <StatsRow columns={2}>\n                <div>{t(\"stats.height\")}</div>\n                <div>{sceneDimension.height}</div>\n              </StatsRow>\n              {gridModeEnabled && (\n                <>\n                  <StatsRow heading>Canvas</StatsRow>\n                  <StatsRow>\n                    <CanvasGrid\n                      property=\"gridStep\"\n                      scene={scene}\n                      appState={appState}\n                      setAppState={setAppState}\n                    />\n                  </StatsRow>\n                </>\n              )}\n            </StatsRows>\n\n            {renderCustomStats?.(elements, appState)}\n          </Collapsible>\n\n          {!_frameAndChildrenSelectedTogether && selectedElements.length > 0 && (\n            <div\n              id=\"elementStats\"\n              style={{\n                marginTop: 12,\n              }}\n            >\n              <Collapsible\n                label={<h3>{t(\"stats.elementProperties\")}</h3>}\n                open={\n                  !!(appState.stats.panels & STATS_PANELS.elementProperties)\n                }\n                openTrigger={() =>\n                  setAppState((state) => {\n                    return {\n                      stats: {\n                        open: true,\n                        panels:\n                          state.stats.panels ^ STATS_PANELS.elementProperties,\n                      },\n                    };\n                  })\n                }\n              >\n                <StatsRows>\n                  {singleElement && (\n                    <>\n                      {cropMode && (\n                        <StatsRow heading>\n                          {t(\"labels.unCroppedDimension\")}\n                        </StatsRow>\n                      )}\n\n                      {appState.croppingElementId &&\n                        isImageElement(singleElement) &&\n                        unCroppedDimension && (\n                          <StatsRow columns={2}>\n                            <div>{t(\"stats.width\")}</div>\n                            <div>{round(unCroppedDimension.width, 2)}</div>\n                          </StatsRow>\n                        )}\n\n                      {appState.croppingElementId &&\n                        isImageElement(singleElement) &&\n                        unCroppedDimension && (\n                          <StatsRow columns={2}>\n                            <div>{t(\"stats.height\")}</div>\n                            <div>{round(unCroppedDimension.height, 2)}</div>\n                          </StatsRow>\n                        )}\n\n                      <StatsRow\n                        heading\n                        data-testid=\"stats-element-type\"\n                        style={{ margin: \"0.3125rem 0\" }}\n                      >\n                        {appState.croppingElementId\n                          ? t(\"labels.imageCropping\")\n                          : t(`element.${singleElement.type}`)}\n                      </StatsRow>\n\n                      <StatsRow>\n                        <Position\n                          element={singleElement}\n                          property=\"x\"\n                          elementsMap={elementsMap}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <Position\n                          element={singleElement}\n                          property=\"y\"\n                          elementsMap={elementsMap}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <Dimension\n                          property=\"width\"\n                          element={singleElement}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <Dimension\n                          property=\"height\"\n                          element={singleElement}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <Angle\n                          property=\"angle\"\n                          element={singleElement}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <FontSize\n                          property=\"fontSize\"\n                          element={singleElement}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                    </>\n                  )}\n\n                  {multipleElements && (\n                    <>\n                      {elementsAreInSameGroup(multipleElements) && (\n                        <StatsRow heading>{t(\"element.group\")}</StatsRow>\n                      )}\n\n                      <StatsRow columns={2} style={{ margin: \"0.3125rem 0\" }}>\n                        <div>{t(\"stats.shapes\")}</div>\n                        <div>{selectedElements.length}</div>\n                      </StatsRow>\n\n                      <StatsRow>\n                        <MultiPosition\n                          property=\"x\"\n                          elements={multipleElements}\n                          elementsMap={elementsMap}\n                          atomicUnits={atomicUnits}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <MultiPosition\n                          property=\"y\"\n                          elements={multipleElements}\n                          elementsMap={elementsMap}\n                          atomicUnits={atomicUnits}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <MultiDimension\n                          property=\"width\"\n                          elements={multipleElements}\n                          elementsMap={elementsMap}\n                          atomicUnits={atomicUnits}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <MultiDimension\n                          property=\"height\"\n                          elements={multipleElements}\n                          elementsMap={elementsMap}\n                          atomicUnits={atomicUnits}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <MultiAngle\n                          property=\"angle\"\n                          elements={multipleElements}\n                          scene={scene}\n                          appState={appState}\n                        />\n                      </StatsRow>\n                      <StatsRow>\n                        <MultiFontSize\n                          property=\"fontSize\"\n                          elements={multipleElements}\n                          scene={scene}\n                          appState={appState}\n                          elementsMap={elementsMap}\n                        />\n                      </StatsRow>\n                    </>\n                  )}\n                </StatsRows>\n              </Collapsible>\n            </div>\n          )}\n        </Island>\n      </div>\n    );\n  },\n  (prev, next) => {\n    return (\n      prev.sceneNonce === next.sceneNonce &&\n      prev.selectedElements === next.selectedElements &&\n      prev.appState.stats.panels === next.appState.stats.panels &&\n      prev.gridModeEnabled === next.gridModeEnabled &&\n      prev.appState.gridStep === next.appState.gridStep &&\n      prev.appState.croppingElementId === next.appState.croppingElementId\n    );\n  },\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./MermaidToJsonDraw.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./MermaidToJsonDraw.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useEffect, useRef } from \"react\";\n\nimport { EVENT, KEYS } from \"@jsondraw/common\";\n\nimport type { ChangeEventHandler } from \"react\";\n\ninterface TTDDialogInputProps {\n  input: string;\n  placeholder: string;\n  onChange: ChangeEventHandler<HTMLTextAreaElement>;\n  onKeyboardSubmit?: () => void;\n}\n\nexport const TTDDialogInput = ({\n  input,\n  placeholder,\n  onChange,\n  onKeyboardSubmit,\n}: TTDDialogInputProps) => {\n  const ref = useRef<HTMLTextAreaElement>(null);\n\n  const callbackRef = useRef(onKeyboardSubmit);\n  callbackRef.current = onKeyboardSubmit;\n\n  useEffect(() => {\n    if (!callbackRef.current) {\n      return;\n    }\n    const textarea = ref.current;\n    if (textarea) {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (event[KEYS.CTRL_OR_CMD] && event.key === KEYS.ENTER) {\n          event.preventDefault();\n          callbackRef.current?.();\n        }\n      };\n      textarea.focus();\n      textarea.addEventListener(EVENT.KEYDOWN, handleKeyDown);\n      return () => {\n        textarea.removeEventListener(EVENT.KEYDOWN, handleKeyDown);\n      };\n    }\n  }, []);\n\n  return (\n    <textarea\n      className=\"ttd-dialog-input\"\n      onChange={onChange}\n      value={input}\n      placeholder={placeholder}\n      ref={ref}\n    />\n  );\n};\n","import clsx from \"clsx\";\nimport { t } from \"../../i18n\";\nimport { alertTriangleIcon } from \"../icons\";\nimport Spinner from \"../ui/Spinner\";\n\ninterface TTDDialogOutputProps {\n  error: Error | null;\n  canvasRef: React.RefObject<HTMLDivElement | null>;\n  loaded: boolean;\n  hideErrorDetails?: boolean;\n}\n\nexport const TTDDialogOutput = ({\n  error,\n  canvasRef,\n  loaded,\n  hideErrorDetails,\n}: TTDDialogOutputProps) => {\n  return (\n    <div className={`ttd-dialog-output-wrapper ${error ? \"ttd-dialog-output-wrapper--error\" : \"\"}`}>\n      {error && (\n        <div key=\"error\" data-testid=\"ttd-dialog-output-error\" className=\"ttd-dialog-output-error\">\n          <div className=\"ttd-dialog-output-error-content\">\n            <div className=\"ttd-dialog-output-error-icon\">{alertTriangleIcon}</div>\n            <div className=\"ttd-dialog-output-error-title\">{t(\"ttd.error\")}</div>\n            <div className=\"ttd-dialog-output-error-message\">\n              {hideErrorDetails ? t(\"chat.errors.mermaidParseError\") : error.message}\n            </div>\n          </div>\n        </div>\n      )}\n      {loaded ? (\n        <div\n          key=\"canvas\"\n          className={clsx(\"ttd-dialog-output-canvas-container\", {\n            invisible: !!error,\n          })}\n        >\n          <div ref={canvasRef} className=\"ttd-dialog-output-canvas-content\" />\n        </div>\n      ) : (\n        <Spinner size=\"2rem\" />\n      )}\n    </div>\n  );\n};\n","import { Fragment } from \"react\";\nimport type { ReactNode } from \"react\";\nimport clsx from \"clsx\";\nimport { Button } from \"../ui/Button\";\nimport Spinner from \"../ui/Spinner\";\n\nexport type TTDPanelAction = {\n  label: string;\n  action?: () => void;\n  icon?: ReactNode;\n  variant: \"button\" | \"link\" | \"rateLimit\";\n  disabled?: boolean;\n  className?: string;\n};\n\ninterface TTDDialogPanelProps {\n  label?: string | ReactNode;\n  children: ReactNode;\n  panelActions?: TTDPanelAction[];\n  onTextSubmitInProgess?: boolean;\n  renderTopRight?: () => ReactNode;\n  renderSubmitShortcut?: () => ReactNode;\n  className?: string;\n  panelActionJustifyContent?:\n    | \"flex-start\"\n    | \"flex-end\"\n    | \"center\"\n    | \"space-between\"\n    | \"space-around\"\n    | \"space-evenly\";\n}\n\nexport const TTDDialogPanel = ({\n  label,\n  children,\n  panelActions = [],\n  onTextSubmitInProgess,\n  renderTopRight,\n  renderSubmitShortcut,\n  className,\n  panelActionJustifyContent = \"flex-start\",\n}: TTDDialogPanelProps) => {\n  const renderPanelAction = (panelAction: TTDPanelAction) => {\n    if (panelAction?.variant === \"link\") {\n      return (\n        <button\n          className={clsx(\"ttd-dialog-panel-action-link\", panelAction.className)}\n          onClick={panelAction.action}\n          disabled={panelAction?.disabled || onTextSubmitInProgess}\n          type=\"button\"\n        >\n          {panelAction.label}\n          {panelAction.icon && (\n            <span className=\"ttd-dialog-panel-action-link__icon\">{panelAction.icon}</span>\n          )}\n        </button>\n      );\n    }\n\n    if (panelAction?.variant === \"button\") {\n      return (\n        <Button\n          className={clsx(\"ttd-dialog-panel-button\", panelAction.className)}\n          onSelect={panelAction.action ? panelAction.action : () => {}}\n          disabled={panelAction?.disabled || onTextSubmitInProgess}\n        >\n          <div className={clsx({ invisible: onTextSubmitInProgess })}>\n            {panelAction?.label}\n            {panelAction?.icon && <span>{panelAction.icon}</span>}\n          </div>\n          {onTextSubmitInProgess && <Spinner />}\n        </Button>\n      );\n    }\n\n    if (panelAction?.variant === \"rateLimit\") {\n      return (\n        <div className={clsx(\"ttd-dialog-panel__rate-limit\", panelAction.className)}>\n          {panelAction.label}\n        </div>\n      );\n    }\n  };\n\n  return (\n    <div className={clsx(\"ttd-dialog-panel\", className)}>\n      {(label || renderTopRight) && (\n        <div className=\"ttd-dialog-panel__header\">\n          {typeof label === \"string\" ? <label>{label}</label> : label}\n          {renderTopRight?.()}\n        </div>\n      )}\n      {children}\n      <div\n        className={clsx(\"ttd-dialog-panel-button-container\", {\n          invisible: !panelActions.length,\n        })}\n        style={{\n          justifyContent: panelActionJustifyContent,\n        }}\n      >\n        {panelActions.filter(Boolean).map(panelAction => (\n          <Fragment key={panelAction.label}>{renderPanelAction(panelAction)}</Fragment>\n        ))}\n        {!onTextSubmitInProgess && renderSubmitShortcut?.()}\n      </div>\n    </div>\n  );\n};\n","import type { ReactNode } from \"react\";\n\nexport const TTDDialogPanels = ({ children }: { children: ReactNode }) => {\n  return <div className=\"ttd-dialog-panels\">{children}</div>;\n};\n","import { getShortcutKey } from \"@jsondraw/jsondraw/shortcut\";\n\nexport const TTDDialogSubmitShortcut = () => {\n  return (\n    <div className=\"ttd-dialog-submit-shortcut\">\n      <div className=\"ttd-dialog-submit-shortcut__key\">\n        {getShortcutKey(\"CtrlOrCmd\")}\n      </div>\n      <div className=\"ttd-dialog-submit-shortcut__key\">\n        {getShortcutKey(\"Enter\")}\n      </div>\n    </div>\n  );\n};\n","import { DEFAULT_EXPORT_PADDING, EDITOR_LS_KEYS } from \"@jsondraw/common\";\n\nimport type {\n  NonDeletedJsonDrawElement,\n  Theme,\n} from \"@jsondraw/element/types\";\n\nimport { EditorLocalStorage } from \"../../data/EditorLocalStorage\";\nimport {\n  convertToJsonDrawElements,\n  exportToCanvas,\n  THEME,\n} from \"../../index\";\n\nimport type { MermaidToJsonDrawLibProps } from \"./types\";\n\nimport type { AppClassProperties, BinaryFiles } from \"../../types\";\n\nexport const resetPreview = ({\n  canvasRef,\n  setError,\n}: {\n  canvasRef: React.RefObject<HTMLDivElement | null>;\n  setError: (error: Error | null) => void;\n}) => {\n  const canvasNode = canvasRef.current;\n\n  if (!canvasNode) {\n    return;\n  }\n  const parent = canvasNode.parentElement;\n  if (!parent) {\n    return;\n  }\n  parent.style.background = \"\";\n  setError(null);\n  canvasNode.replaceChildren();\n};\n\nexport const convertMermaidToJsonDraw = async ({\n  canvasRef,\n  mermaidToJsonDrawLib,\n  mermaidDefinition,\n  setError,\n  data,\n  theme,\n}: {\n  canvasRef: React.RefObject<HTMLDivElement | null>;\n  mermaidToJsonDrawLib: MermaidToJsonDrawLibProps;\n  mermaidDefinition: string;\n  setError: (error: Error | null) => void;\n  data: React.MutableRefObject<{\n    elements: readonly NonDeletedJsonDrawElement[];\n    files: BinaryFiles | null;\n  }>;\n  theme: Theme;\n}): Promise<{ success: true } | { success: false; error?: Error }> => {\n  const canvasNode = canvasRef.current;\n  const parent = canvasNode?.parentElement;\n\n  if (!canvasNode || !parent) {\n    return { success: false };\n  }\n\n  if (!mermaidDefinition) {\n    resetPreview({ canvasRef, setError });\n    return { success: false };\n  }\n\n  let ret;\n  try {\n    const api = await mermaidToJsonDrawLib.api;\n\n    try {\n      try {\n        ret = await api.parseMermaidToExcalidraw(mermaidDefinition);\n      } catch (err: unknown) {\n        ret = await api.parseMermaidToExcalidraw(\n          mermaidDefinition.replace(/\"/g, \"'\"),\n        );\n      }\n    } catch (err: unknown) {\n      return { success: false, error: err as Error };\n    }\n\n    const { elements, files } = ret;\n    setError(null);\n\n    data.current = {\n      elements: convertToJsonDrawElements(elements, {\n        regenerateIds: true,\n      }),\n      files,\n    };\n\n    const canvas = await exportToCanvas({\n      elements: data.current.elements,\n      files: data.current.files,\n      exportPadding: DEFAULT_EXPORT_PADDING,\n      maxWidthOrHeight:\n        Math.max(parent.offsetWidth, parent.offsetHeight) *\n        window.devicePixelRatio,\n      appState: {\n        exportWithDarkMode: theme === THEME.DARK,\n      },\n    });\n\n    parent.style.background = \"var(--default-bg-color)\";\n    canvasNode.replaceChildren(canvas);\n    return { success: true };\n  } catch (err: any) {\n    parent.style.background = \"var(--default-bg-color)\";\n    if (mermaidDefinition) {\n      setError(err);\n    }\n\n    // Return error so caller can display meaningful error message\n    return { success: false, error: err };\n  }\n};\nexport const saveMermaidDataToStorage = (mermaidDefinition: string) => {\n  EditorLocalStorage.set(\n    EDITOR_LS_KEYS.MERMAID_TO_JSONDRAW,\n    mermaidDefinition,\n  );\n};\n\nexport const insertToEditor = ({\n  app,\n  data,\n  text,\n  shouldSaveMermaidDataToStorage,\n}: {\n  app: AppClassProperties;\n  data: React.MutableRefObject<{\n    elements: readonly NonDeletedJsonDrawElement[];\n    files: BinaryFiles | null;\n  }>;\n  text?: string;\n  shouldSaveMermaidDataToStorage?: boolean;\n}) => {\n  const { elements: newElements, files } = data.current;\n\n  if (!newElements.length) {\n    return;\n  }\n\n  app.addElementsFromPasteOrLibrary({\n    elements: newElements,\n    files,\n    position: \"center\",\n    fitToContent: true,\n  });\n  app.setOpenDialog(null);\n\n  if (shouldSaveMermaidDataToStorage && text) {\n    saveMermaidDataToStorage(text);\n  }\n};\n","import { useState, useRef, useEffect, useDeferredValue } from \"react\";\nimport { EDITOR_LS_KEYS, debounce, isDevEnv } from \"@jsondraw/common\";\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { EditorLocalStorage } from \"../../data/EditorLocalStorage\";\nimport { t } from \"../../i18n\";\nimport type { BinaryFiles } from \"../../types\";\nimport { useApp } from \"../App\";\nimport { ArrowRightIcon } from \"../icons\";\nimport Trans from \"../ui/Trans\";\nimport \"./MermaidToJsonDraw.scss\";\nimport { TTDDialogInput } from \"./TTDDialogInput\";\nimport { TTDDialogOutput } from \"./TTDDialogOutput\";\nimport { TTDDialogPanel } from \"./TTDDialogPanel\";\nimport { TTDDialogPanels } from \"./TTDDialogPanels\";\nimport { TTDDialogSubmitShortcut } from \"./TTDDialogSubmitShortcut\";\nimport {\n  convertMermaidToJsonDraw,\n  insertToEditor,\n  saveMermaidDataToStorage,\n  resetPreview,\n} from \"./common\";\nimport type { MermaidToJsonDrawLibProps } from \"./types\";\n\nconst MERMAID_EXAMPLE =\n  \"flowchart TD\\n A[Christmas] -->|Get money| B(Go shopping)\\n B --> C{Let me think}\\n C -->|One| D[Laptop]\\n C -->|Two| E[iPhone]\\n C -->|Three| F[Car]\";\n\nconst debouncedSaveMermaidDefinition = debounce(saveMermaidDataToStorage, 300);\n\nconst MermaidToJsonDraw = ({\n  mermaidToJsonDrawLib,\n  isActive,\n}: {\n  mermaidToJsonDrawLib: MermaidToJsonDrawLibProps;\n  isActive?: boolean;\n}) => {\n  const [text, setText] = useState(\n    () => EditorLocalStorage.get<string>(EDITOR_LS_KEYS.MERMAID_TO_JSONDRAW) || MERMAID_EXAMPLE\n  );\n  const deferredText = useDeferredValue(text.trim());\n  const [error, setError] = useState<Error | null>(null);\n\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const data = useRef<{\n    elements: readonly NonDeletedJsonDrawElement[];\n    files: BinaryFiles | null;\n  }>({ elements: [], files: null });\n\n  const app = useApp();\n  const { theme } = useUIAppState();\n\n  useEffect(() => {\n    const doRender = async () => {\n      try {\n        if (!deferredText) {\n          resetPreview({ canvasRef, setError });\n          return;\n        }\n        const result = await convertMermaidToJsonDraw({\n          canvasRef,\n          data,\n          mermaidToJsonDrawLib,\n          setError,\n          mermaidDefinition: deferredText,\n          theme,\n        });\n\n        if (!result.success) {\n          const err = result.error ?? new Error(\"Invalid mermaid definition\");\n          setError(err);\n        }\n      } catch (err) {\n        if (isDevEnv()) {\n          console.error(\"Failed to parse mermaid definition\", err);\n        }\n      }\n    };\n\n    if (isActive) {\n      doRender();\n      debouncedSaveMermaidDefinition(deferredText);\n    }\n  }, [deferredText, mermaidToJsonDrawLib, isActive, theme]);\n\n  useEffect(\n    () => () => {\n      debouncedSaveMermaidDefinition.flush();\n    },\n    []\n  );\n\n  const onInsertToEditor = () => {\n    insertToEditor({\n      app,\n      data,\n      text,\n      shouldSaveMermaidDataToStorage: true,\n    });\n  };\n\n  return (\n    <>\n      <div className=\"ttd-dialog-desc\">\n        <Trans\n          i18nKey=\"mermaid.description\"\n          flowchartLink={el => <a href=\"https://mermaid.js.org/syntax/flowchart.html\">{el}</a>}\n          sequenceLink={el => <a href=\"https://mermaid.js.org/syntax/sequenceDiagram.html\">{el}</a>}\n          classLink={el => <a href=\"https://mermaid.js.org/syntax/classDiagram.html\">{el}</a>}\n        />\n      </div>\n      <TTDDialogPanels>\n        <TTDDialogPanel>\n          <TTDDialogInput\n            input={text}\n            placeholder={t(\"mermaid.inputPlaceholder\")}\n            onChange={event => setText(event.target.value)}\n            onKeyboardSubmit={() => {\n              onInsertToEditor();\n            }}\n          />\n        </TTDDialogPanel>\n        <TTDDialogPanel\n          panelActions={[\n            {\n              action: () => {\n                onInsertToEditor();\n              },\n              label: t(\"mermaid.button\"),\n              icon: ArrowRightIcon,\n              variant: \"button\",\n            },\n          ]}\n          renderSubmitShortcut={() => <TTDDialogSubmitShortcut />}\n        >\n          <TTDDialogOutput\n            canvasRef={canvasRef}\n            loaded={mermaidToJsonDrawLib.loaded}\n            error={error}\n          />\n        </TTDDialogPanel>\n      </TTDDialogPanels>\n    </>\n  );\n};\nexport default MermaidToJsonDraw;\n","import { t } from \"../../i18n\";\n\nexport const TTDWelcomeMessage = () => {\n  return (\n    <div className=\"chat-interface__welcome-screen__welcome-message\">\n      <h3>{t(\"chat.placeholder.title\")}</h3>\n      <p>{t(\"chat.placeholder.description\")}</p>\n      <p>{t(\"chat.placeholder.hint\")}</p>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { t } from \"../../../i18n\";\nimport { TrashIcon, codeIcon, stackPushIcon, RetryIcon } from \"../../icons\";\nimport { FilledButton } from \"../../ui/FilledButton\";\nimport type { TChat, TTTDDialog } from \"../types\";\n\nexport const ChatMessage: React.FC<{\n  message: TChat.ChatMessage;\n  onMermaidTabClick?: (message: TChat.ChatMessage) => void;\n  onAiRepairClick?: (message: TChat.ChatMessage) => void;\n  onDeleteMessage?: (messageId: string) => void;\n  onInsertMessage?: (message: TChat.ChatMessage) => void;\n  onRetry?: (message: TChat.ChatMessage) => void;\n  rateLimitRemaining?: number;\n  isLastMessage?: boolean;\n  renderWarning?: TTTDDialog.renderWarning;\n  allowFixingParseError?: boolean;\n}> = ({\n  message,\n  onMermaidTabClick,\n  onAiRepairClick,\n  onDeleteMessage,\n  onInsertMessage,\n  onRetry,\n  rateLimitRemaining,\n  isLastMessage,\n  renderWarning,\n  allowFixingParseError,\n}) => {\n  const [canRetry, setCanRetry] = useState(false);\n\n  useEffect(() => {\n    if (!message.error || !isLastMessage) {\n      return;\n    }\n\n    if (message.error && !message.lastAttemptAt) {\n      setCanRetry(true);\n      return;\n    }\n\n    const timeSinceLastAttempt = Date.now() - message.lastAttemptAt!;\n    const remainingTime = Math.max(0, 5000 - timeSinceLastAttempt);\n\n    if (remainingTime === 0) {\n      setCanRetry(true);\n      return;\n    }\n\n    setCanRetry(false);\n    const timer = setTimeout(() => {\n      setCanRetry(true);\n    }, remainingTime);\n\n    return () => clearTimeout(timer);\n  }, [message.error, message.lastAttemptAt, isLastMessage]);\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\n  };\n\n  if (message.type === \"warning\") {\n    const customOverride = renderWarning?.(message);\n    return (\n      <div className=\"chat-message chat-message--system\">\n        <div className=\"chat-message__content\">\n          <div className=\"chat-message__header\">\n            <span className=\"chat-message__role\">{t(\"chat.role.system\")}</span>\n            <span className=\"chat-message__timestamp\">{formatTime(message.timestamp)}</span>\n          </div>\n          <div className=\"chat-message__body\">\n            <div className=\"chat-message__text\">\n              {customOverride ? (\n                customOverride\n              ) : message.warningType === \"messageLimitExceeded\" ? (\n                <>\n                  {t(\"chat.rateLimit.messageLimit\")}\n                  <div style={{ marginTop: \"10px\" }}>\n                    <FilledButton\n                      onClick={() => {\n                        window.open(\n                          `${\n                            import.meta.env.VITE_APP_PLUS_LP\n                          }/plus?utm_source=jsondraw&utm_medium=app&utm_content=ttdChatBanner#jsondraw-redirect`,\n                          \"_blank\",\n                          \"noopener\"\n                        );\n                      }}\n                    >\n                      {t(\"chat.upsellBtnLabel\")}\n                    </FilledButton>\n                  </div>\n                </>\n              ) : (\n                t(\"chat.rateLimit.generalRateLimit\")\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`chat-message chat-message--${message.type}`}>\n      <div className=\"chat-message__content\">\n        <div className=\"chat-message__header\">\n          <span className=\"chat-message__role\">\n            {message.type === \"user\" ? t(\"chat.role.user\") : t(\"chat.role.assistant\")}\n          </span>\n          <span className=\"chat-message__timestamp\">{formatTime(message.timestamp)}</span>\n        </div>\n        <div className=\"chat-message__body\">\n          {message.error ? (\n            <>\n              <div className=\"chat-message__error\">{message.content}</div>\n              {message.errorType !== \"parse\" && (\n                <div className=\"chat-message__error_message\">\n                  Error: {message.error || t(\"chat.errors.generationFailed\")}\n                </div>\n              )}\n              {message.errorType === \"parse\" && allowFixingParseError && (\n                <div className=\"chat-message__error_message\">\n                  <p>{t(\"chat.errors.invalidDiagram\")}</p>\n                  <div className=\"chat-message__error-actions\">\n                    {onMermaidTabClick && (\n                      <button\n                        className=\"chat-message__error-link\"\n                        onClick={() => onMermaidTabClick(message)}\n                        type=\"button\"\n                      >\n                        {t(\"chat.errors.fixInMermaid\")}\n                      </button>\n                    )}\n                    {onAiRepairClick && (\n                      <button\n                        className=\"chat-message__error-link\"\n                        onClick={() => onAiRepairClick(message)}\n                        disabled={rateLimitRemaining === 0}\n                        type=\"button\"\n                      >\n                        {t(\"chat.errors.aiRepair\")}\n                      </button>\n                    )}\n                  </div>\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"chat-message__text\">\n              {message.content}\n              {message.isGenerating && <span className=\"chat-message__cursor\"></span>}\n            </div>\n          )}\n        </div>\n      </div>\n      {message.type === \"assistant\" && !message.isGenerating && (\n        <div className=\"chat-message__actions\">\n          {!message.error && onInsertMessage && (\n            <button\n              className=\"chat-message__action\"\n              onClick={() => onInsertMessage(message)}\n              type=\"button\"\n              aria-label={t(\"chat.insert\")}\n              title={t(\"chat.insert\")}\n            >\n              {stackPushIcon}\n            </button>\n          )}\n          {onMermaidTabClick && message.content && (\n            <button\n              className=\"chat-message__action\"\n              onClick={() => onMermaidTabClick(message)}\n              type=\"button\"\n              aria-label={t(\"chat.viewAsMermaid\")}\n              title={t(\"chat.viewAsMermaid\")}\n            >\n              {codeIcon}\n            </button>\n          )}\n          {onDeleteMessage && message.errorType !== \"network\" && (\n            <button\n              className=\"chat-message__action chat-message__action--danger\"\n              onClick={() => onDeleteMessage(message.id)}\n              type=\"button\"\n              aria-label={t(\"chat.deleteMessage\")}\n              title={t(\"chat.deleteMessage\")}\n            >\n              {TrashIcon}\n            </button>\n          )}\n          {message.errorType === \"network\" && onRetry && isLastMessage && (\n            <button\n              className={clsx(\"chat-message__action\", { invisible: !canRetry })}\n              onClick={() => onRetry(message)}\n              type=\"button\"\n              aria-label={t(\"chat.retry\")}\n              title={t(\"chat.retry\")}\n            >\n              {RetryIcon}\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n","import React, { useRef, useEffect, useLayoutEffect } from \"react\";\nimport type { FormEventHandler } from \"react\";\nimport { KEYS } from \"@jsondraw/common\";\nimport { t } from \"../../../i18n\";\nimport { ArrowRightIcon, stop as StopIcon } from \"../../icons\";\nimport { InlineIcon } from \"../../ui/InlineIcon\";\nimport { TTDWelcomeMessage } from \"../TTDWelcomeMessage\";\nimport type { TChat, TTTDDialog } from \"../types\";\nimport { ChatMessage } from \"./ChatMessage\";\n\nexport const ChatInterface = ({\n  chatId,\n  messages,\n  currentPrompt,\n  onPromptChange,\n  onGenerate,\n  isGenerating,\n  rateLimits,\n  onAbort,\n  onMermaidTabClick,\n  onAiRepairClick,\n  onDeleteMessage,\n  onInsertMessage,\n  onRetry,\n  renderWelcomeScreen,\n  renderWarning,\n}: {\n  chatId: string;\n  messages: TChat.ChatMessage[];\n  currentPrompt: string;\n  onPromptChange: (prompt: string) => void;\n  onGenerate: TTTDDialog.OnGenerate;\n  isGenerating: boolean;\n  rateLimits?: {\n    rateLimit: number;\n    rateLimitRemaining: number;\n  } | null;\n  onViewAsMermaid?: () => void;\n  generatedResponse?: string | null;\n  onAbort?: () => void;\n  onMermaidTabClick?: (message: TChat.ChatMessage) => void;\n  onAiRepairClick?: (message: TChat.ChatMessage) => void;\n  onDeleteMessage?: (messageId: string) => void;\n  onInsertMessage?: (message: TChat.ChatMessage) => void;\n  onRetry?: (message: TChat.ChatMessage) => void;\n  renderWelcomeScreen?: TTTDDialog.renderWelcomeScreen;\n  renderWarning?: TTTDDialog.renderWarning;\n}) => {\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  useLayoutEffect(() => {\n    messagesEndRef.current?.scrollIntoView();\n  }, [messages]);\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [chatId]);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = event.target.value;\n    onPromptChange(value);\n  };\n\n  const handleSubmit = () => {\n    if (isGenerating && onAbort) {\n      onAbort();\n      return;\n    }\n\n    const trimmedPrompt = currentPrompt.trim();\n    if (!trimmedPrompt) {\n      return;\n    }\n\n    onGenerate({ prompt: trimmedPrompt });\n    onPromptChange(\"\");\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.key === KEYS.ENTER && !event.shiftKey) {\n      event.preventDefault();\n      if (!isGenerating) {\n        handleSubmit();\n      }\n    }\n  };\n\n  const canSend =\n    currentPrompt.trim().length > 3 && !isGenerating && (rateLimits?.rateLimitRemaining ?? 1) > 0;\n\n  const canStop = isGenerating && !!onAbort;\n\n  const onInput: FormEventHandler<HTMLTextAreaElement> = ev => {\n    const target = ev.target as HTMLTextAreaElement;\n    target.style.height = \"auto\";\n    target.style.height = `${Math.min(target.scrollHeight, 120)}px`;\n  };\n\n  return (\n    <div className=\"chat-interface\">\n      <div className=\"chat-interface__messages\">\n        {messages.length === 0 ? (\n          <div className=\"chat-interface__welcome-screen\">\n            {renderWelcomeScreen ? (\n              renderWelcomeScreen({ rateLimits: rateLimits ?? null })\n            ) : (\n              <TTDWelcomeMessage />\n            )}\n          </div>\n        ) : (\n          messages.map((message, index) => (\n            <ChatMessage\n              key={message.id}\n              message={message}\n              onMermaidTabClick={onMermaidTabClick}\n              onAiRepairClick={onAiRepairClick}\n              onDeleteMessage={onDeleteMessage}\n              onInsertMessage={onInsertMessage}\n              onRetry={onRetry}\n              rateLimitRemaining={rateLimits?.rateLimitRemaining}\n              isLastMessage={index === messages.length - 1}\n              renderWarning={renderWarning}\n              // so we don't allow to repair parse errors which aren't the last message\n              allowFixingParseError={message.errorType === \"parse\" && index === messages.length - 1}\n            />\n          ))\n        )}\n        <div ref={messagesEndRef} id=\"messages-end\" />\n      </div>\n\n      <div className=\"chat-interface__input-container\">\n        <div className=\"chat-interface__input-outer\">\n          <div\n            className=\"chat-interface__input-wrapper\"\n            style={{\n              borderColor: isGenerating ? \"var(--dialog-border-color)\" : undefined,\n            }}\n          >\n            <textarea\n              ref={textareaRef}\n              autoFocus\n              className=\"chat-interface__input\"\n              value={currentPrompt}\n              onChange={handleInputChange}\n              onKeyDown={handleKeyDown}\n              placeholder={\n                isGenerating\n                  ? t(\"chat.generating\")\n                  : rateLimits?.rateLimitRemaining === 0\n                    ? t(\"chat.rateLimit.messageLimitInputPlaceholder\")\n                    : messages.length > 0\n                      ? t(\"chat.inputPlaceholderWithMessages\")\n                      : t(\"chat.inputPlaceholder\", { shortcut: \"Shift + Enter\" })\n              }\n              disabled={rateLimits?.rateLimitRemaining === 0}\n              rows={1}\n              cols={30}\n              onInput={onInput}\n            />\n            <button\n              className=\"chat-interface__send-button\"\n              onClick={handleSubmit}\n              disabled={!canSend && !canStop}\n              type=\"button\"\n            >\n              <InlineIcon size=\"1.5em\" icon={isGenerating ? StopIcon : ArrowRightIcon} />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { randomId } from \"@jsondraw/common\";\n\nimport { atom } from \"../../editor-jotai\";\n\nimport type { RateLimits, TChat } from \"./types\";\n\nexport const rateLimitsAtom = atom<RateLimits | null>(null);\n\nexport const showPreviewAtom = atom<boolean>(false);\n\nexport const errorAtom = atom<Error | null>(null);\n\nexport const chatHistoryAtom = atom<TChat.ChatHistory>({\n  id: randomId(),\n  messages: [],\n  currentPrompt: \"\",\n});\n","import { findLastIndex, randomId } from \"@jsondraw/common\";\n\nimport type { LLMMessage, TChat } from \"../types\";\n\nexport const updateAssistantContent = (\n  chatHistory: TChat.ChatHistory,\n  payload: Partial<TChat.ChatMessage>,\n) => {\n  const { messages } = chatHistory;\n\n  const lastAssistantIndex = findLastIndex(\n    messages,\n    (msg) => msg.type === \"assistant\",\n  );\n\n  if (lastAssistantIndex === -1) {\n    return chatHistory;\n  }\n\n  const lastMessage = messages[lastAssistantIndex];\n\n  const updatedMessages = messages.slice();\n\n  updatedMessages[lastAssistantIndex] = {\n    ...lastMessage,\n    ...payload,\n  };\n\n  return {\n    ...chatHistory,\n    messages: updatedMessages,\n  };\n};\n\nexport const getLastAssistantMessage = (chatHistory: TChat.ChatHistory) => {\n  const { messages } = chatHistory;\n\n  const lastAssistantIndex = findLastIndex(\n    messages,\n    (msg) => msg.type === \"assistant\",\n  );\n\n  return messages[lastAssistantIndex];\n};\n\nexport const addMessages = (\n  chatHistory: TChat.ChatHistory,\n  messages: Array<Omit<TChat.ChatMessage, \"id\" | \"timestamp\">>,\n) => {\n  const newMessages: Array<TChat.ChatMessage> = messages.map((message) => ({\n    ...message,\n    id: randomId(),\n    timestamp: new Date(),\n  }));\n\n  return {\n    ...chatHistory,\n    messages: [...chatHistory.messages, ...newMessages],\n  };\n};\n\nexport const removeLastAssistantMessage = (chatHistory: TChat.ChatHistory) => {\n  const lastMsgIdx = findLastIndex(\n    chatHistory.messages ?? [],\n    (msg) => msg.type === \"assistant\",\n  );\n\n  if (lastMsgIdx !== -1) {\n    return {\n      ...chatHistory,\n      messages: chatHistory.messages.filter((_, idx) => idx !== lastMsgIdx),\n    };\n  }\n  return chatHistory;\n};\n\nexport const getMessagesForLLM = (\n  chatHistory: TChat.ChatHistory,\n): LLMMessage[] => {\n  const messages: LLMMessage[] = [];\n\n  for (const msg of chatHistory.messages) {\n    if (msg.content && (msg.type === \"user\" || msg.type === \"assistant\")) {\n      messages.push({\n        role: msg.type,\n        content: msg.content,\n      });\n    }\n  }\n\n  return messages;\n};\n","import { useAtom } from \"../../../editor-jotai\";\nimport { chatHistoryAtom } from \"../../TTDDialog/TTDContext\";\nimport {\n  addMessages,\n  updateAssistantContent,\n} from \"../../TTDDialog/utils/chat\";\n\nexport const useChatAgent = () => {\n  const [chatHistory, setChatHistory] = useAtom(chatHistoryAtom);\n\n  const addUserMessage = (content: string) => {\n    setChatHistory((prev) =>\n      addMessages(prev, [\n        {\n          type: \"user\",\n          content,\n        },\n      ]),\n    );\n  };\n\n  const addAssistantMessage = () => {\n    setChatHistory((prev) =>\n      addMessages(prev, [\n        {\n          type: \"assistant\",\n          content: \"\",\n          isGenerating: true,\n        },\n      ]),\n    );\n  };\n\n  const setLastRetryAttempt = () => {\n    setChatHistory((prev) =>\n      updateAssistantContent(prev, {\n        lastAttemptAt: Date.now(),\n      }),\n    );\n  };\n\n  const setAssistantError = (\n    errorMessage: string,\n    errorType: \"parse\" | \"network\" | \"other\" = \"other\",\n    errorDetails?: Error | unknown,\n  ) => {\n    const serializedErrorDetails = errorDetails\n      ? JSON.stringify({\n          name: errorDetails instanceof Error ? errorDetails.name : \"Error\",\n          message:\n            errorDetails instanceof Error\n              ? errorDetails.message\n              : String(errorDetails),\n          stack: errorDetails instanceof Error ? errorDetails.stack : undefined,\n        })\n      : undefined;\n\n    setChatHistory((prev) =>\n      updateAssistantContent(prev, {\n        isGenerating: false,\n        error: errorMessage,\n        errorType,\n        errorDetails: serializedErrorDetails,\n      }),\n    );\n  };\n\n  return {\n    addUserMessage,\n    addAssistantMessage,\n    setAssistantError,\n    chatHistory,\n    setChatHistory,\n    setLastRetryAttempt,\n  };\n};\n","export { ChatInterface } from \"./ChatInterface\";\nexport { ChatMessage } from \"./ChatMessage\";\nexport { useChatAgent } from \"./useChatAgent\";\n","import { useCallback, useEffect, useRef } from \"react\";\nimport { randomId } from \"@jsondraw/common\";\n\nimport { atom, useAtom } from \"../../editor-jotai\";\n\nimport { chatHistoryAtom } from \"./TTDContext\";\n\nimport type { SavedChat, SavedChats, TTDPersistenceAdapter } from \"./types\";\n\ninterface UseTTDChatStorageProps {\n  persistenceAdapter: TTDPersistenceAdapter;\n}\n\ninterface UseTTDChatStorageReturn {\n  savedChats: SavedChats;\n  saveCurrentChat: () => Promise<void>;\n  deleteChat: (chatId: string) => Promise<SavedChats>;\n  restoreChat: (chat: SavedChat) => SavedChat;\n  createNewChatId: () => Promise<string>;\n}\n\nconst generateChatTitle = (firstMessage: string): string => {\n  const trimmed = firstMessage.trim();\n  if (trimmed.length <= 50) {\n    return trimmed;\n  }\n  return `${trimmed.substring(0, 47)}...`;\n};\n\n// Shared atom for saved chats - starts empty, populated via onLoadChats\nexport const savedChatsAtom = atom<SavedChats>([]);\nexport const isLoadingChatsAtom = atom<boolean>(false);\nexport const chatsLoadedAtom = atom<boolean>(false);\n\nexport const useTTDChatStorage = ({\n  persistenceAdapter,\n}: UseTTDChatStorageProps): UseTTDChatStorageReturn => {\n  const [chatHistory] = useAtom(chatHistoryAtom);\n  const [savedChats, setSavedChats] = useAtom(savedChatsAtom);\n  const [isLoading, setIsLoading] = useAtom(isLoadingChatsAtom);\n  const [chatsLoaded, setChatsLoaded] = useAtom(chatsLoadedAtom);\n\n  // Ref to track latest savedChats for async operations\n  const savedChatsRef = useRef(savedChats);\n  savedChatsRef.current = savedChats;\n\n  const lastMessageInHistory =\n    chatHistory?.messages[chatHistory?.messages.length - 1];\n\n  // Load chats on-demand\n  const loadChats = useCallback(async () => {\n    if (chatsLoaded || isLoading) {\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const chats = await persistenceAdapter.loadChats();\n      setSavedChats(chats);\n      setChatsLoaded(true);\n    } catch (error) {\n      console.warn(\"Failed to load chats:\", error);\n      setSavedChats([]);\n      setChatsLoaded(true);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [\n    chatsLoaded,\n    isLoading,\n    setSavedChats,\n    setIsLoading,\n    setChatsLoaded,\n    persistenceAdapter,\n  ]);\n\n  // INITIAL LOAD\n  useEffect(() => {\n    loadChats();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const saveCurrentChat = useCallback(async () => {\n    if (chatHistory.messages.length === 0) {\n      return;\n    }\n\n    const firstUserMessage = chatHistory.messages.find(\n      (msg) => msg.type === \"user\",\n    );\n    if (!firstUserMessage || typeof firstUserMessage.content !== \"string\") {\n      return;\n    }\n\n    const title = generateChatTitle(firstUserMessage.content);\n\n    const currentSavedChats = savedChatsRef.current;\n    const existingChat = currentSavedChats.find(\n      (chat) => chat.id === chatHistory.id,\n    );\n\n    const messagesChanged =\n      !existingChat ||\n      existingChat.messages.length !== chatHistory.messages.length ||\n      existingChat.messages.some(\n        (msg, i) =>\n          msg.id !== chatHistory.messages[i]?.id ||\n          msg.content !== chatHistory.messages[i]?.content,\n      );\n\n    const chatToSave: SavedChat = {\n      id: chatHistory.id,\n      title,\n      messages: chatHistory.messages\n        .filter((msg) => msg.type === \"user\" || msg.type === \"assistant\")\n        .map((msg) => ({\n          ...msg,\n          timestamp:\n            msg.timestamp instanceof Date\n              ? msg.timestamp\n              : new Date(msg.timestamp),\n        })),\n      currentPrompt: chatHistory.currentPrompt,\n      timestamp: messagesChanged\n        ? Date.now()\n        : existingChat?.timestamp ?? Date.now(),\n    };\n\n    const updatedChats = [\n      ...currentSavedChats.filter((chat) => chat.id !== chatHistory.id),\n      chatToSave,\n    ]\n      .sort((a, b) => b.timestamp - a.timestamp)\n      .slice(0, 10);\n\n    setSavedChats(updatedChats);\n\n    try {\n      await persistenceAdapter.saveChats(updatedChats);\n    } catch (error) {\n      console.warn(\"Failed to save chats:\", error);\n    }\n  }, [chatHistory, setSavedChats, persistenceAdapter]);\n\n  // Auto-save when generation completes\n  useEffect(() => {\n    if (!lastMessageInHistory?.isGenerating) {\n      saveCurrentChat();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    chatHistory.messages?.length,\n    lastMessageInHistory?.id,\n    lastMessageInHistory?.isGenerating,\n  ]);\n\n  const deleteChat = useCallback(\n    async (chatId: string): Promise<SavedChats> => {\n      const updatedChats = savedChatsRef.current.filter(\n        (chat) => chat.id !== chatId,\n      );\n      setSavedChats(updatedChats);\n\n      try {\n        await persistenceAdapter.saveChats(updatedChats);\n      } catch (error) {\n        console.warn(\"Failed to save after delete:\", error);\n      }\n\n      return updatedChats;\n    },\n    [setSavedChats, persistenceAdapter],\n  );\n\n  const restoreChat = useCallback((chat: SavedChat): SavedChat => {\n    // Save is handled by the caller after state update\n    return chat;\n  }, []);\n\n  const createNewChatId = useCallback(async (): Promise<string> => {\n    await saveCurrentChat();\n    return randomId();\n  }, [saveCurrentChat]);\n\n  return {\n    savedChats,\n    saveCurrentChat,\n    deleteChat,\n    restoreChat,\n    createNewChatId,\n  };\n};\n","export const isValidMermaidSyntax = (content: string): boolean => {\n  const trimmed = content.trim();\n  if (!trimmed) {\n    return false;\n  }\n\n  const openBrackets = (trimmed.match(/\\[/g) || []).length;\n  const closeBrackets = (trimmed.match(/\\]/g) || []).length;\n  const openBraces = (trimmed.match(/\\{/g) || []).length;\n  const closeBraces = (trimmed.match(/\\}/g) || []).length;\n  const openParens = (trimmed.match(/\\(/g) || []).length;\n  const closeParens = (trimmed.match(/\\)/g) || []).length;\n\n  if (\n    openBrackets !== closeBrackets ||\n    openBraces !== closeBraces ||\n    openParens !== closeParens\n  ) {\n    return false;\n  }\n\n  const lastLine = trimmed.split(\"\\n\").pop()?.trim() || \"\";\n  const incompletePatterns = [\n    /-->$/,\n    /--$/,\n    /-\\.$/,\n    /==>$/,\n    /==$/,\n    /~~$/,\n    /::$/,\n    /:$/,\n    /\\|$/,\n    /&$/,\n  ];\n\n  if (incompletePatterns.some((pattern) => pattern.test(lastLine))) {\n    return false;\n  }\n\n  return true;\n};\n","import { useCallback, useEffect, useMemo, useRef } from \"react\";\n\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { useAtom } from \"../../../editor-jotai\";\n\nimport { chatHistoryAtom, errorAtom, showPreviewAtom } from \"../TTDContext\";\nimport { convertMermaidToJsonDraw } from \"../common\";\nimport { isValidMermaidSyntax } from \"../utils/mermaidValidation\";\n\nimport { getLastAssistantMessage } from \"../utils/chat\";\n\nimport { useUIAppState } from \"../../../context/ui-appState\";\n\nimport type { BinaryFiles } from \"../../../types\";\nimport type { MermaidToJsonDrawLibProps } from \"../types\";\n\nconst FAST_THROTTLE_DELAY = 300;\nconst SLOW_THROTTLE_DELAY = 3000;\nconst RENDER_SPEED_THRESHOLD = 100;\nconst PARSE_FAIL_DELAY = 100;\n\ninterface UseMermaidRendererProps {\n  mermaidToJsonDrawLib: MermaidToJsonDrawLibProps;\n  canvasRef: React.RefObject<HTMLDivElement | null>;\n}\n\nexport const useMermaidRenderer = ({\n  mermaidToJsonDrawLib,\n  canvasRef,\n}: UseMermaidRendererProps) => {\n  const [chatHistory] = useAtom(chatHistoryAtom);\n  const [, setError] = useAtom(errorAtom);\n\n  const [showPreview, setShowPreview] = useAtom(showPreviewAtom);\n  const isRenderingRef = useRef(false);\n\n  const lastAssistantMessage = useMemo(\n    () => getLastAssistantMessage(chatHistory),\n    [chatHistory],\n  );\n\n  // Keeping lastAssistantMesssage in ref, so I can access it in useEffect hooks\n  const lastAssistantMessageRef = useRef(lastAssistantMessage);\n  useEffect(() => {\n    lastAssistantMessageRef.current = lastAssistantMessage;\n  }, [lastAssistantMessage]);\n\n  const data = useRef<{\n    elements: readonly NonDeletedJsonDrawElement[];\n    files: BinaryFiles | null;\n  }>({\n    elements: [],\n    files: null,\n  });\n\n  const lastRenderTimeRef = useRef(0);\n  const pendingContentRef = useRef<string | null>(null);\n  const hasErrorOffsetRef = useRef(false);\n  const currentThrottleDelayRef = useRef(FAST_THROTTLE_DELAY);\n\n  const { theme } = useUIAppState();\n\n  const renderMermaid = useCallback(\n    async (mermaidDefinition: string): Promise<boolean> => {\n      if (!mermaidDefinition.trim() || !mermaidToJsonDrawLib.loaded) {\n        return false;\n      }\n\n      if (isRenderingRef.current) {\n        return false;\n      }\n\n      isRenderingRef.current = true;\n\n      const renderStartTime = performance.now();\n\n      const result = await convertMermaidToJsonDraw({\n        canvasRef,\n        data,\n        mermaidToJsonDrawLib,\n        setError,\n        mermaidDefinition,\n        theme,\n      });\n\n      const renderDuration = performance.now() - renderStartTime;\n\n      if (renderDuration < RENDER_SPEED_THRESHOLD) {\n        currentThrottleDelayRef.current = FAST_THROTTLE_DELAY;\n      } else {\n        currentThrottleDelayRef.current = SLOW_THROTTLE_DELAY;\n      }\n\n      isRenderingRef.current = false;\n      return result.success;\n    },\n    [canvasRef, mermaidToJsonDrawLib, setError, theme],\n  );\n\n  const throttledRenderMermaid = useMemo(() => {\n    const fn = async (content: string) => {\n      const now = Date.now();\n      const timeSinceLastRender = now - lastRenderTimeRef.current;\n      const throttleDelay = currentThrottleDelayRef.current;\n\n      if (!isValidMermaidSyntax(content)) {\n        if (!hasErrorOffsetRef.current) {\n          lastRenderTimeRef.current = Math.max(\n            lastRenderTimeRef.current,\n            now - throttleDelay + PARSE_FAIL_DELAY,\n          );\n          hasErrorOffsetRef.current = true;\n        }\n        pendingContentRef.current = content;\n        return;\n      }\n\n      hasErrorOffsetRef.current = false;\n\n      if (timeSinceLastRender < throttleDelay) {\n        pendingContentRef.current = content;\n        return;\n      }\n\n      pendingContentRef.current = null;\n      const success = await renderMermaid(content);\n      lastRenderTimeRef.current = Date.now();\n\n      if (!success) {\n        lastRenderTimeRef.current =\n          lastRenderTimeRef.current - throttleDelay + PARSE_FAIL_DELAY;\n        hasErrorOffsetRef.current = true;\n      }\n    };\n\n    fn.flush = async () => {\n      if (pendingContentRef.current) {\n        const content = pendingContentRef.current;\n        pendingContentRef.current = null;\n        await renderMermaid(content);\n        lastRenderTimeRef.current = Date.now();\n      }\n    };\n\n    fn.cancel = () => {\n      pendingContentRef.current = null;\n    };\n\n    return fn;\n  }, [renderMermaid]);\n\n  const resetThrottleState = useCallback(() => {\n    lastRenderTimeRef.current = 0;\n    pendingContentRef.current = null;\n    hasErrorOffsetRef.current = false;\n    currentThrottleDelayRef.current = FAST_THROTTLE_DELAY;\n  }, []);\n\n  // this hook is responsible for keep rendering during streaming\n  useEffect(() => {\n    if (lastAssistantMessage?.content && lastAssistantMessage?.isGenerating) {\n      throttledRenderMermaid(lastAssistantMessage.content);\n    } else if (!lastAssistantMessage?.isGenerating) {\n      throttledRenderMermaid.flush();\n      resetThrottleState();\n      if (lastAssistantMessage?.content) {\n        throttledRenderMermaid(lastAssistantMessage.content);\n      }\n    }\n  }, [\n    resetThrottleState,\n    throttledRenderMermaid,\n    lastAssistantMessage?.isGenerating,\n    lastAssistantMessage?.content,\n  ]);\n\n  // render the last message if the user navigates between the existing chats\n  useEffect(() => {\n    const msg = lastAssistantMessageRef.current;\n    if (!msg?.content || msg.error) {\n      return;\n    }\n\n    if (!showPreview) {\n      return;\n    }\n\n    renderMermaid(msg.content);\n  }, [chatHistory?.id, renderMermaid, showPreview]);\n\n  useEffect(() => {\n    if (\n      !chatHistory.messages?.filter((msg) => msg.type === \"assistant\").length\n    ) {\n      const canvasNode = canvasRef.current;\n      if (canvasNode) {\n        const parent = canvasNode.parentElement;\n        if (parent) {\n          parent.style.background = \"\";\n          canvasNode.replaceChildren();\n        }\n      }\n      setShowPreview(false);\n    } else if (!showPreview) {\n      setShowPreview(true);\n    }\n  }, [chatHistory.messages, setShowPreview, canvasRef, showPreview]);\n\n  return {\n    data,\n  };\n};\n","import { useRef } from \"react\";\nimport { parseMermaidToExcalidraw } from \"@excalidraw/mermaid-to-excalidraw\";\nimport { isFiniteNumber } from \"@jsondraw/math\";\n\nimport { useAtom } from \"../../../editor-jotai\";\n\nimport { trackEvent } from \"../../../analytics\";\nimport { t } from \"../../../i18n\";\n\nimport { errorAtom, rateLimitsAtom, chatHistoryAtom } from \"../TTDContext\";\nimport { useChatAgent } from \"../Chat\";\n\nimport {\n  addMessages,\n  getLastAssistantMessage,\n  getMessagesForLLM,\n  removeLastAssistantMessage,\n  updateAssistantContent,\n} from \"../utils/chat\";\n\nimport type { LLMMessage, TTTDDialog } from \"../types\";\n\nconst MIN_PROMPT_LENGTH = 3;\nconst MAX_PROMPT_LENGTH = 10000;\n\nexport const useTextGeneration = ({\n  onTextSubmit,\n}: {\n  onTextSubmit: (\n    props: TTTDDialog.OnTextSubmitProps,\n  ) => Promise<TTTDDialog.OnTextSubmitRetValue>;\n}) => {\n  const [, setError] = useAtom(errorAtom);\n  const [rateLimits, setRateLimits] = useAtom(rateLimitsAtom);\n  const [chatHistory, setChatHistory] = useAtom(chatHistoryAtom);\n\n  const { addUserMessage, addAssistantMessage, setAssistantError } =\n    useChatAgent();\n\n  const streamingAbortControllerRef = useRef<AbortController | null>(null);\n\n  const validatePrompt = (prompt: string): boolean => {\n    if (\n      prompt.length > MAX_PROMPT_LENGTH ||\n      prompt.length < MIN_PROMPT_LENGTH ||\n      rateLimits?.rateLimitRemaining === 0\n    ) {\n      if (prompt.length < MIN_PROMPT_LENGTH) {\n        setError(\n          new Error(\n            t(\"chat.errors.promptTooShort\", { min: MIN_PROMPT_LENGTH }),\n          ),\n        );\n      }\n      if (prompt.length > MAX_PROMPT_LENGTH) {\n        setError(\n          new Error(t(\"chat.errors.promptTooLong\", { max: MAX_PROMPT_LENGTH })),\n        );\n      }\n\n      return false;\n    }\n    return true;\n  };\n\n  const onGenerate: TTTDDialog.OnGenerate = async ({\n    prompt,\n    isRepairFlow = false,\n  }) => {\n    if (!validatePrompt(prompt)) {\n      return;\n    }\n\n    if (streamingAbortControllerRef.current) {\n      streamingAbortControllerRef.current.abort();\n    }\n\n    setError(null);\n\n    const abortController = new AbortController();\n    streamingAbortControllerRef.current = abortController;\n\n    if (!isRepairFlow) {\n      addUserMessage(prompt);\n      addAssistantMessage();\n    } else {\n      setChatHistory((prev) =>\n        updateAssistantContent(prev, {\n          isGenerating: true,\n          content: \"\",\n          error: undefined,\n          errorType: undefined,\n          errorDetails: undefined,\n        }),\n      );\n    }\n\n    try {\n      trackEvent(\"ai\", \"generate\", \"ttd\");\n\n      const previousMessages = getMessagesForLLM(chatHistory);\n\n      const messages: LLMMessage[] = [\n        ...previousMessages.slice(-3),\n        { role: \"user\", content: prompt },\n      ];\n\n      const { generatedResponse, error, rateLimit, rateLimitRemaining } =\n        await onTextSubmit({\n          messages,\n          onStreamCreated: () => {\n            if (isRepairFlow) {\n              setChatHistory((prev) =>\n                updateAssistantContent(prev, {\n                  content: \"\",\n                  error: \"\",\n                  isGenerating: true,\n                }),\n              );\n            }\n          },\n          onChunk: (chunk: string) => {\n            setChatHistory((prev) => {\n              const lastAssistantMessage = getLastAssistantMessage(prev);\n              return updateAssistantContent(prev, {\n                content: lastAssistantMessage.content + chunk,\n              });\n            });\n          },\n          signal: abortController.signal,\n        });\n\n      setChatHistory((prev) =>\n        updateAssistantContent(prev, {\n          isGenerating: false,\n        }),\n      );\n\n      if (isFiniteNumber(rateLimit) && isFiniteNumber(rateLimitRemaining)) {\n        setRateLimits({ rateLimit, rateLimitRemaining });\n      }\n\n      if (error?.status === 429 || rateLimitRemaining === 0) {\n        setChatHistory((chatHistory) => {\n          if (error?.status === 429) {\n            chatHistory = removeLastAssistantMessage(chatHistory);\n          }\n\n          chatHistory = {\n            ...chatHistory,\n            messages: chatHistory.messages.filter(\n              (msg) =>\n                msg.type !== \"warning\" ||\n                msg.warningType === \"rateLimitExceeded\" ||\n                msg.warningType === \"messageLimitExceeded\",\n            ),\n          };\n          const messages = addMessages(chatHistory, [\n            {\n              type: \"warning\",\n              warningType:\n                rateLimitRemaining === 0\n                  ? \"messageLimitExceeded\"\n                  : \"rateLimitExceeded\",\n            },\n          ]);\n          return messages;\n        });\n      }\n\n      if (error) {\n        const isAborted =\n          error.name === \"AbortError\" ||\n          error.message === \"Aborted\" ||\n          abortController.signal.aborted;\n\n        // do nothing if the request was aborted by the user\n        if (isAborted) {\n          return;\n        }\n\n        const _error = new Error(\n          error.message || t(\"chat.errors.requestFailed\"),\n        );\n        if (error.status !== 429) {\n          setAssistantError(_error.message, \"network\");\n        }\n        setError(_error);\n\n        return;\n      }\n\n      try {\n        await parseMermaidToExcalidraw(generatedResponse ?? \"\");\n        trackEvent(\"ai\", \"mermaid parse success\", \"ttd\");\n      } catch (error: any) {\n        trackEvent(\"ai\", \"mermaid parse failed\", \"ttd\");\n        const _error = new Error(\n          error.message || t(\"chat.errors.mermaidParseError\"),\n        );\n        setAssistantError(_error.message, \"parse\");\n        setError(_error);\n      }\n    } catch (error: any) {\n      const _error = new Error(\n        error.message || t(\"chat.errors.generationFailed\"),\n      );\n      setAssistantError(_error.message, \"other\");\n      setError(_error);\n    } finally {\n      streamingAbortControllerRef.current = null;\n    }\n  };\n\n  const handleAbort = () => {\n    if (streamingAbortControllerRef.current) {\n      streamingAbortControllerRef.current.abort();\n    }\n  };\n\n  return {\n    onGenerate,\n    handleAbort,\n  };\n};\n","import { useCallback, useState } from \"react\";\n\nimport { useAtom, useSetAtom } from \"../../../editor-jotai\";\n\nimport { errorAtom, chatHistoryAtom } from \"../TTDContext\";\n\nimport { useTTDChatStorage } from \"../useTTDChatStorage\";\n\nimport { getLastAssistantMessage } from \"../utils/chat\";\n\nimport type { SavedChat, TTDPersistenceAdapter } from \"../types\";\n\ninterface UseChatManagementProps {\n  persistenceAdapter: TTDPersistenceAdapter;\n}\n\nexport const useChatManagement = ({\n  persistenceAdapter,\n}: UseChatManagementProps) => {\n  const setError = useSetAtom(errorAtom);\n  const [chatHistory, setChatHistory] = useAtom(chatHistoryAtom);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const { restoreChat, deleteChat, createNewChatId } = useTTDChatStorage({\n    persistenceAdapter,\n  });\n\n  const applyChatToState = useCallback(\n    (chat: SavedChat) => {\n      const restoredMessages = chat.messages.map((msg) => ({\n        ...msg,\n        timestamp:\n          msg.timestamp instanceof Date\n            ? msg.timestamp\n            : new Date(msg.timestamp),\n      }));\n\n      const history = {\n        id: chat.id,\n        messages: restoredMessages,\n        currentPrompt: \"\",\n      };\n\n      const lastAssistantMsg = getLastAssistantMessage(history);\n\n      setError(\n        lastAssistantMsg?.error ? new Error(lastAssistantMsg?.error) : null,\n      );\n      setChatHistory(history);\n    },\n    [setError, setChatHistory],\n  );\n\n  const resetChatState = useCallback(async () => {\n    const newSessionId = await createNewChatId();\n    setChatHistory({\n      id: newSessionId,\n      messages: [],\n      currentPrompt: \"\",\n    });\n    setError(null);\n  }, [createNewChatId, setChatHistory, setError]);\n\n  const onRestoreChat = useCallback(\n    (chat: SavedChat) => {\n      const restoredChat = restoreChat(chat);\n      applyChatToState(restoredChat);\n\n      setIsMenuOpen(false);\n    },\n    [restoreChat, applyChatToState],\n  );\n\n  const handleDeleteChat = useCallback(\n    async (chatId: string, event: React.MouseEvent) => {\n      event.stopPropagation();\n\n      const isDeletingActiveChat = chatId === chatHistory.id;\n      const updatedChats = await deleteChat(chatId);\n\n      if (isDeletingActiveChat) {\n        if (updatedChats.length > 0) {\n          const nextChat = updatedChats[0];\n          applyChatToState(nextChat);\n        } else {\n          await resetChatState();\n        }\n      }\n    },\n    [chatHistory.id, deleteChat, applyChatToState, resetChatState],\n  );\n\n  const handleNewChat = useCallback(async () => {\n    await resetChatState();\n    setIsMenuOpen(false);\n  }, [resetChatState]);\n\n  const handleMenuToggle = useCallback(() => {\n    setIsMenuOpen((prev) => !prev);\n  }, []);\n\n  const handleMenuClose = useCallback(() => {\n    setIsMenuOpen(false);\n  }, []);\n\n  return {\n    isMenuOpen,\n    onRestoreChat,\n    handleDeleteChat,\n    handleNewChat,\n    handleMenuToggle,\n    handleMenuClose,\n  };\n};\n","import clsx from \"clsx\";\nimport { t } from \"../../../i18n\";\nimport DropdownMenu from \"../../dropdownMenu/DropdownMenu\";\nimport { historyIcon, TrashIcon } from \"../../icons\";\nimport { FilledButton } from \"../../ui/FilledButton\";\nimport type { SavedChat } from \"../types\";\n\ninterface ChatHistoryMenuProps {\n  isOpen: boolean;\n  onToggle: () => void;\n  onClose: () => void;\n  onNewChat: () => void;\n  onRestoreChat: (chat: SavedChat) => void;\n  onDeleteChat: (chatId: string, event: React.MouseEvent) => void;\n  savedChats: SavedChat[];\n  activeSessionId: string;\n  disabled?: boolean;\n  isNewChatBtnVisible?: boolean;\n}\n\nexport const ChatHistoryMenu = ({\n  isOpen,\n  onToggle,\n  onClose,\n  onNewChat,\n  onRestoreChat,\n  onDeleteChat,\n  isNewChatBtnVisible,\n  savedChats,\n  activeSessionId,\n  disabled,\n}: ChatHistoryMenuProps) => {\n  return (\n    <div className=\"ttd-chat-history-menu\">\n      {isNewChatBtnVisible && (\n        <FilledButton onClick={onNewChat} disabled={disabled}>\n          {t(\"chat.newChat\")}\n        </FilledButton>\n      )}\n      {savedChats.length > 0 && (\n        <div className=\"ttd-dialog-panel__menu-wrapper\">\n          <DropdownMenu open={isOpen}>\n            <DropdownMenu.Trigger\n              onToggle={onToggle}\n              className=\"ttd-dialog-menu-trigger\"\n              disabled={disabled}\n              title={t(\"chat.menu\")}\n              aria-label={t(\"chat.menu\")}\n            >\n              {historyIcon}\n            </DropdownMenu.Trigger>\n            <DropdownMenu.Content onClickOutside={onClose} onSelect={onClose}>\n              <>\n                {savedChats.map(chat => (\n                  <DropdownMenu.ItemCustom\n                    key={chat.id}\n                    className={clsx(\"ttd-chat-menu-item\", {\n                      \"ttd-chat-menu-item--active\": chat.id === activeSessionId,\n                    })}\n                    onClick={() => {\n                      onRestoreChat(chat);\n                    }}\n                  >\n                    <span className=\"ttd-chat-menu-item__title\">{chat.title}</span>\n                    <button\n                      className=\"ttd-chat-menu-item__delete\"\n                      onClick={e => onDeleteChat(chat.id, e)}\n                      title={t(\"chat.deleteChat\")}\n                      aria-label={t(\"chat.deleteChat\")}\n                      type=\"button\"\n                    >\n                      {TrashIcon}\n                    </button>\n                  </DropdownMenu.ItemCustom>\n                ))}\n              </>\n            </DropdownMenu.Content>\n          </DropdownMenu>\n        </div>\n      )}\n    </div>\n  );\n};\n","import { ChatInterface } from \".\";\nimport { useAtom } from \"../../../editor-jotai\";\nimport { t } from \"../../../i18n\";\nimport { ArrowRightIcon } from \"../../icons\";\nimport { InlineIcon } from \"../../ui/InlineIcon\";\nimport { rateLimitsAtom } from \"../TTDContext\";\nimport { TTDDialogPanel } from \"../TTDDialogPanel\";\nimport type { TTDPanelAction } from \"../TTDDialogPanel\";\nimport type { SavedChat, TChat, TTTDDialog } from \"../types\";\nimport { ChatHistoryMenu } from \"./ChatHistoryMenu\";\n\nexport const TTDChatPanel = ({\n  chatId,\n  messages,\n  currentPrompt,\n  onPromptChange,\n  onGenerate,\n  isGenerating,\n  generatedResponse,\n  isMenuOpen,\n  onMenuToggle,\n  onMenuClose,\n  onNewChat,\n  onRestoreChat,\n  onDeleteChat,\n  savedChats,\n  activeSessionId,\n  onAbort,\n  onMermaidTabClick,\n  onAiRepairClick,\n  onDeleteMessage,\n  onInsertMessage,\n  onRetry,\n  onViewAsMermaid,\n  renderWelcomeScreen,\n  renderWarning,\n}: {\n  chatId: string;\n  messages: TChat.ChatMessage[];\n  currentPrompt: string;\n  onPromptChange: (prompt: string) => void;\n  onGenerate: TTTDDialog.OnGenerate;\n  isGenerating: boolean;\n  generatedResponse: string | null | undefined;\n\n  isMenuOpen: boolean;\n  onMenuToggle: () => void;\n  onMenuClose: () => void;\n  onNewChat: () => void;\n  onRestoreChat: (chat: SavedChat) => void;\n  onDeleteChat: (chatId: string, event: React.MouseEvent) => void;\n  savedChats: SavedChat[];\n  activeSessionId: string;\n\n  onAbort: () => void;\n  onMermaidTabClick: (message: TChat.ChatMessage) => void;\n  onAiRepairClick: (message: TChat.ChatMessage) => void;\n  onDeleteMessage: (messageId: string) => void;\n  onInsertMessage: (message: TChat.ChatMessage) => void;\n  onRetry?: (message: TChat.ChatMessage) => void;\n\n  onViewAsMermaid: () => void;\n\n  renderWelcomeScreen?: TTTDDialog.renderWelcomeScreen;\n  renderWarning?: TTTDDialog.renderWarning;\n}) => {\n  const [rateLimits] = useAtom(rateLimitsAtom);\n\n  const getPanelActions = () => {\n    const actions: TTDPanelAction[] = [];\n    if (rateLimits) {\n      actions.push({\n        label: t(\"chat.rateLimitRemaining\", {\n          count: rateLimits.rateLimitRemaining,\n        }),\n        variant: \"rateLimit\",\n        className: rateLimits.rateLimitRemaining < 5 ? \"ttd-dialog-panel__rate-limit--danger\" : \"\",\n      });\n    }\n\n    if (generatedResponse) {\n      actions.push({\n        action: onViewAsMermaid,\n        label: t(\"chat.viewAsMermaid\"),\n        icon: <InlineIcon icon={ArrowRightIcon} />,\n        variant: \"link\",\n      });\n    }\n\n    return actions;\n  };\n  const actions = getPanelActions();\n\n  const getPanelActionFlexProp = () => {\n    if (actions.length === 2) {\n      return \"space-between\";\n    }\n    if (actions.length === 1 && actions[0].variant === \"rateLimit\") {\n      return \"flex-start\";\n    }\n\n    return \"flex-end\";\n  };\n\n  return (\n    <TTDDialogPanel\n      label={\n        <div className=\"ttd-dialog-panel__label-wrapper\">\n          <div className=\"ttd-dialog-panel__label-group\"></div>\n          <div className=\"ttd-dialog-panel__header-right\">\n            <ChatHistoryMenu\n              isNewChatBtnVisible={!!messages.length}\n              isOpen={isMenuOpen}\n              onToggle={onMenuToggle}\n              onClose={onMenuClose}\n              onNewChat={onNewChat}\n              onRestoreChat={onRestoreChat}\n              onDeleteChat={onDeleteChat}\n              savedChats={savedChats}\n              activeSessionId={activeSessionId}\n              disabled={isGenerating}\n            />\n          </div>\n        </div>\n      }\n      className=\"ttd-dialog-chat-panel\"\n      panelActionJustifyContent={getPanelActionFlexProp()}\n      panelActions={actions}\n    >\n      <ChatInterface\n        chatId={chatId}\n        messages={messages}\n        currentPrompt={currentPrompt}\n        onPromptChange={onPromptChange}\n        onGenerate={onGenerate}\n        isGenerating={isGenerating}\n        generatedResponse={generatedResponse}\n        onAbort={onAbort}\n        onMermaidTabClick={onMermaidTabClick}\n        onAiRepairClick={onAiRepairClick}\n        onDeleteMessage={onDeleteMessage}\n        onInsertMessage={onInsertMessage}\n        onRetry={onRetry}\n        rateLimits={rateLimits}\n        renderWelcomeScreen={renderWelcomeScreen}\n        renderWarning={renderWarning}\n      />\n    </TTDDialogPanel>\n  );\n};\n","import { t } from \"../../i18n\";\nimport { ArrowRightIcon } from \"../icons\";\n\nimport { TTDDialogPanel } from \"./TTDDialogPanel\";\nimport { TTDDialogOutput } from \"./TTDDialogOutput\";\n\nimport type { TTDPanelAction } from \"./TTDDialogPanel\";\n\ninterface TTDPreviewPanelProps {\n  canvasRef: React.RefObject<HTMLDivElement | null>;\n  error: Error | null;\n  loaded: boolean;\n  onInsert: () => void;\n  hideErrorDetails?: boolean;\n}\n\nexport const TTDPreviewPanel = ({\n  canvasRef,\n  error,\n  loaded,\n  onInsert,\n  hideErrorDetails,\n}: TTDPreviewPanelProps) => {\n  const actions: TTDPanelAction[] = [\n    {\n      action: onInsert,\n      label: t(\"chat.insert\"),\n      icon: ArrowRightIcon,\n      variant: \"button\",\n    },\n  ];\n\n  return (\n    <TTDDialogPanel\n      panelActionJustifyContent=\"flex-end\"\n      panelActions={actions}\n      className=\"ttd-dialog-preview-panel\"\n    >\n      <TTDDialogOutput\n        canvasRef={canvasRef}\n        error={error}\n        loaded={loaded}\n        hideErrorDetails={hideErrorDetails}\n      />\n    </TTDDialogPanel>\n  );\n};\n","import { useRef } from \"react\";\n\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { useAtom, useAtomValue } from \"../../editor-jotai\";\n\nimport { useApp, useJsonDrawSetAppState } from \"../App\";\n\nimport { useChatAgent } from \"./Chat\";\n\nimport {\n  convertMermaidToJsonDraw,\n  insertToEditor,\n  saveMermaidDataToStorage,\n} from \"./common\";\nimport { errorAtom, chatHistoryAtom, showPreviewAtom } from \"./TTDContext\";\n\nimport { useTTDChatStorage } from \"./useTTDChatStorage\";\nimport { useMermaidRenderer } from \"./hooks/useMermaidRenderer\";\nimport { useTextGeneration } from \"./hooks/useTextGeneration\";\nimport { useChatManagement } from \"./hooks/useChatManagement\";\nimport { TTDChatPanel } from \"./Chat/TTDChatPanel\";\nimport { TTDPreviewPanel } from \"./TTDPreviewPanel\";\n\nimport { getLastAssistantMessage } from \"./utils/chat\";\n\nimport type { BinaryFiles } from \"../../types\";\nimport type {\n  MermaidToJsonDrawLibProps,\n  TChat,\n  TTDPersistenceAdapter,\n  TTTDDialog,\n} from \"./types\";\n\nconst TextToDiagramContent = ({\n  mermaidToJsonDrawLib,\n  onTextSubmit,\n  renderWelcomeScreen,\n  renderWarning,\n  persistenceAdapter,\n}: {\n  mermaidToJsonDrawLib: MermaidToJsonDrawLibProps;\n  onTextSubmit: (\n    props: TTTDDialog.OnTextSubmitProps,\n  ) => Promise<TTTDDialog.OnTextSubmitRetValue>;\n  renderWelcomeScreen?: TTTDDialog.renderWelcomeScreen;\n  renderWarning?: TTTDDialog.renderWarning;\n  persistenceAdapter: TTDPersistenceAdapter;\n}) => {\n  const app = useApp();\n  const setAppState = useJsonDrawSetAppState();\n\n  const canvasRef = useRef<HTMLDivElement | null>(null);\n  const [error, setError] = useAtom(errorAtom);\n  const [chatHistory, setChatHistory] = useAtom(chatHistoryAtom);\n  const showPreview = useAtomValue(showPreviewAtom);\n\n  const { savedChats } = useTTDChatStorage({ persistenceAdapter });\n\n  const lastAssistantMessage = getLastAssistantMessage(chatHistory);\n\n  const { setLastRetryAttempt } = useChatAgent();\n\n  const { data } = useMermaidRenderer({\n    canvasRef,\n    mermaidToJsonDrawLib,\n  });\n\n  const { onGenerate, handleAbort } = useTextGeneration({\n    onTextSubmit,\n  });\n\n  const {\n    isMenuOpen,\n    onRestoreChat,\n    handleDeleteChat,\n    handleNewChat,\n    handleMenuToggle,\n    handleMenuClose,\n  } = useChatManagement({ persistenceAdapter });\n\n  const onViewAsMermaid = () => {\n    if (typeof lastAssistantMessage?.content === \"string\") {\n      saveMermaidDataToStorage(lastAssistantMessage.content);\n      setAppState({\n        openDialog: { name: \"ttd\", tab: \"mermaid\" },\n      });\n    }\n  };\n\n  const handleMermaidTabClick = (message: TChat.ChatMessage) => {\n    const mermaidContent = message.content || \"\";\n    if (mermaidContent) {\n      saveMermaidDataToStorage(mermaidContent);\n      setAppState({\n        openDialog: { name: \"ttd\", tab: \"mermaid\" },\n      });\n    }\n  };\n\n  const handleInsertMessage = async (message: TChat.ChatMessage) => {\n    const mermaidContent = message.content || \"\";\n    if (!mermaidContent.trim() || !mermaidToJsonDrawLib.loaded) {\n      return;\n    }\n\n    const tempDataRef = {\n      current: {\n        elements: [] as readonly NonDeletedJsonDrawElement[],\n        files: null as BinaryFiles | null,\n      },\n    };\n\n    const result = await convertMermaidToJsonDraw({\n      canvasRef,\n      data: tempDataRef,\n      mermaidToJsonDrawLib,\n      setError,\n      mermaidDefinition: mermaidContent,\n      theme: app.state.theme,\n    });\n\n    if (result.success) {\n      insertToEditor({\n        app,\n        data: tempDataRef,\n        text: mermaidContent,\n        shouldSaveMermaidDataToStorage: true,\n      });\n    }\n  };\n\n  const handleAiRepairClick = async (message: TChat.ChatMessage) => {\n    const mermaidContent = message.content || \"\";\n    const errorMessage = message.error || \"\";\n\n    if (!mermaidContent) {\n      return;\n    }\n\n    const repairPrompt = `Fix the error in this Mermaid diagram. The diagram is:\\n\\n\\`\\`\\`mermaid\\n${mermaidContent}\\n\\`\\`\\`\\n\\nThe exception/error is: ${errorMessage}\\n\\nPlease fix the Mermaid syntax and regenerate a valid diagram.`;\n\n    await onGenerate({ prompt: repairPrompt, isRepairFlow: true });\n  };\n\n  const handleRetry = async (message: TChat.ChatMessage) => {\n    const messageIndex = chatHistory.messages.findIndex(\n      (msg) => msg.id === message.id,\n    );\n\n    if (messageIndex > 0) {\n      const previousMessage = chatHistory.messages[messageIndex - 1];\n      if (\n        previousMessage.type === \"user\" &&\n        typeof previousMessage.content === \"string\"\n      ) {\n        setLastRetryAttempt();\n        await onGenerate({\n          prompt: previousMessage.content,\n          isRepairFlow: true,\n        });\n      }\n    }\n  };\n\n  const handleInsertToEditor = () => {\n    insertToEditor({ app, data });\n  };\n\n  const handleDeleteMessage = (messageId: string) => {\n    const assistantMessageIndex = chatHistory.messages.findIndex(\n      (msg) => msg.id === messageId && msg.type === \"assistant\",\n    );\n\n    const remainingMessages = chatHistory.messages.slice(\n      0,\n      assistantMessageIndex - 1,\n    );\n\n    setChatHistory({\n      ...chatHistory,\n      messages: remainingMessages,\n    });\n  };\n\n  const handlePromptChange = (newPrompt: string) => {\n    setChatHistory((prev) => ({\n      ...prev,\n      currentPrompt: newPrompt,\n    }));\n  };\n\n  return (\n    <div\n      className={`ttd-dialog-layout ${\n        showPreview\n          ? \"ttd-dialog-layout--split\"\n          : \"ttd-dialog-layout--chat-only\"\n      }`}\n    >\n      <TTDChatPanel\n        chatId={chatHistory.id}\n        messages={chatHistory.messages}\n        currentPrompt={chatHistory.currentPrompt}\n        onPromptChange={handlePromptChange}\n        onGenerate={onGenerate}\n        isGenerating={lastAssistantMessage?.isGenerating ?? false}\n        generatedResponse={lastAssistantMessage?.content}\n        isMenuOpen={isMenuOpen}\n        onMenuToggle={handleMenuToggle}\n        onMenuClose={handleMenuClose}\n        onNewChat={handleNewChat}\n        onRestoreChat={onRestoreChat}\n        onDeleteChat={handleDeleteChat}\n        savedChats={savedChats}\n        activeSessionId={chatHistory.id}\n        onAbort={handleAbort}\n        onMermaidTabClick={handleMermaidTabClick}\n        onAiRepairClick={handleAiRepairClick}\n        onDeleteMessage={handleDeleteMessage}\n        onInsertMessage={handleInsertMessage}\n        onRetry={handleRetry}\n        onViewAsMermaid={onViewAsMermaid}\n        renderWarning={renderWarning}\n        renderWelcomeScreen={renderWelcomeScreen}\n      />\n      {showPreview && (\n        <TTDPreviewPanel\n          canvasRef={canvasRef}\n          hideErrorDetails={lastAssistantMessage?.errorType === \"parse\"}\n          error={error}\n          loaded={mermaidToJsonDrawLib.loaded}\n          onInsert={handleInsertToEditor}\n        />\n      )}\n    </div>\n  );\n};\n\nexport const TextToDiagram = ({\n  mermaidToJsonDrawLib,\n  onTextSubmit,\n  renderWelcomeScreen,\n  renderWarning,\n  persistenceAdapter,\n}: {\n  mermaidToJsonDrawLib: MermaidToJsonDrawLibProps;\n  onTextSubmit(\n    props: TTTDDialog.OnTextSubmitProps,\n  ): Promise<TTTDDialog.OnTextSubmitRetValue>;\n  renderWelcomeScreen?: TTTDDialog.renderWelcomeScreen;\n  renderWarning?: TTTDDialog.renderWarning;\n  persistenceAdapter: TTDPersistenceAdapter;\n}) => {\n  return (\n    <TextToDiagramContent\n      mermaidToJsonDrawLib={mermaidToJsonDrawLib}\n      onTextSubmit={onTextSubmit}\n      renderWelcomeScreen={renderWelcomeScreen}\n      renderWarning={renderWarning}\n      persistenceAdapter={persistenceAdapter}\n    />\n  );\n};\n\nexport default TextToDiagram;\n","import { Tabs as RadixTabs } from \"radix-ui\";\nimport { useRef } from \"react\";\n\nimport { isMemberOf } from \"@jsondraw/common\";\n\nimport { useJsonDrawSetAppState } from \"../App\";\n\nimport type { ReactNode } from \"react\";\n\nconst TTDDialogTabs = (\n  props: {\n    children: ReactNode;\n  } & { dialog: \"ttd\"; tab: \"text-to-diagram\" | \"mermaid\" },\n) => {\n  const setAppState = useJsonDrawSetAppState();\n\n  const rootRef = useRef<HTMLDivElement>(null);\n  const minHeightRef = useRef<number>(0);\n\n  return (\n    <RadixTabs.Root\n      ref={rootRef}\n      className=\"ttd-dialog-tabs-root\"\n      value={props.tab}\n      onValueChange={(\n        // at least in test enviros, `tab` can be `undefined`\n        tab: string | undefined,\n      ) => {\n        if (!tab) {\n          return;\n        }\n        const modalContentNode =\n          rootRef.current?.closest<HTMLElement>(\".Modal__content\");\n        if (modalContentNode) {\n          const currHeight = modalContentNode.offsetHeight || 0;\n          if (currHeight > minHeightRef.current) {\n            minHeightRef.current = currHeight;\n            modalContentNode.style.minHeight = `min(${minHeightRef.current}px, 100%)`;\n          }\n        }\n        if (\n          props.dialog === \"ttd\" &&\n          isMemberOf([\"text-to-diagram\", \"mermaid\"], tab)\n        ) {\n          setAppState({\n            openDialog: { name: props.dialog, tab },\n          });\n        }\n      }}\n    >\n      {props.children}\n    </RadixTabs.Root>\n  );\n};\n\nTTDDialogTabs.displayName = \"TTDDialogTabs\";\n\nexport default TTDDialogTabs;\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nexport const TTDDialogTabTriggers = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <RadixTabs.List className=\"ttd-dialog-triggers\" {...rest}>\n      {children}\n    </RadixTabs.List>\n  );\n};\nTTDDialogTabTriggers.displayName = \"TTDDialogTabTriggers\";\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nexport const TTDDialogTabTrigger = ({\n  children,\n  tab,\n  onSelect,\n  ...rest\n}: {\n  children: React.ReactNode;\n  tab: string;\n  onSelect?: React.ReactEventHandler<HTMLButtonElement> | undefined;\n} & Omit<React.HTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  return (\n    <RadixTabs.Trigger value={tab} asChild onSelect={onSelect}>\n      <button type=\"button\" className=\"ttd-dialog-tab-trigger\" {...rest}>\n        {children}\n      </button>\n    </RadixTabs.Trigger>\n  );\n};\nTTDDialogTabTrigger.displayName = \"TTDDialogTabTrigger\";\n","import { Tabs as RadixTabs } from \"radix-ui\";\n\nexport const TTDDialogTab = ({\n  tab,\n  children,\n  ...rest\n}: {\n  tab: string;\n  children: React.ReactNode;\n} & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <RadixTabs.Content {...rest} value={tab}>\n      {children}\n    </RadixTabs.Content>\n  );\n};\nTTDDialogTab.displayName = \"TTDDialogTab\";\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./TTDDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./TTDDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useEffect, useState } from \"react\";\n\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { t } from \"../../i18n\";\nimport { useApp } from \"../App\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\n\nimport MermaidToJsonDraw from \"./MermaidToJsonDraw\";\nimport TextToDiagram from \"./TextToDiagram\";\nimport TTDDialogTabs from \"./TTDDialogTabs\";\nimport { TTDDialogTabTriggers } from \"./TTDDialogTabTriggers\";\nimport { TTDDialogTabTrigger } from \"./TTDDialogTabTrigger\";\nimport { TTDDialogTab } from \"./TTDDialogTab\";\n\nimport \"./TTDDialog.scss\";\n\nimport { TTDWelcomeMessage } from \"./TTDWelcomeMessage\";\n\nimport type {\n  MermaidToJsonDrawLibProps,\n  TTDPersistenceAdapter,\n  TTTDDialog,\n} from \"./types\";\n\nexport const TTDDialog = (\n  props:\n    | {\n        onTextSubmit: TTTDDialog.onTextSubmit;\n        renderWelcomeScreen?: TTTDDialog.renderWelcomeScreen;\n        renderWarning?: TTTDDialog.renderWarning;\n        persistenceAdapter: TTDPersistenceAdapter;\n      }\n    | { __fallback: true },\n) => {\n  const appState = useUIAppState();\n\n  if (appState.openDialog?.name !== \"ttd\") {\n    return null;\n  }\n\n  return <TTDDialogBase {...props} tab={appState.openDialog.tab} />;\n};\n\nTTDDialog.WelcomeMessage = TTDWelcomeMessage;\n\n/**\n * Text to diagram (TTD) dialog\n */\nconst TTDDialogBase = withInternalFallback(\n  \"TTDDialogBase\",\n  ({\n    tab,\n    ...rest\n  }: {\n    tab: \"text-to-diagram\" | \"mermaid\";\n  } & (\n    | {\n        onTextSubmit(\n          props: TTTDDialog.OnTextSubmitProps,\n        ): Promise<TTTDDialog.OnTextSubmitRetValue>;\n        renderWelcomeScreen?: TTTDDialog.renderWelcomeScreen;\n        renderWarning?: TTTDDialog.renderWarning;\n        persistenceAdapter: TTDPersistenceAdapter;\n      }\n    | { __fallback: true }\n  )) => {\n    const app = useApp();\n\n    const [mermaidToJsonDrawLib, setMermaidToJsonDrawLib] =\n      useState<MermaidToJsonDrawLibProps>({\n        loaded: false,\n        api: import(\"@excalidraw/mermaid-to-excalidraw\"),\n      });\n\n    useEffect(() => {\n      const fn = async () => {\n        await mermaidToJsonDrawLib.api;\n        setMermaidToJsonDrawLib((prev) => ({ ...prev, loaded: true }));\n      };\n      fn();\n    }, [mermaidToJsonDrawLib.api]);\n\n    return (\n      <Dialog\n        className=\"ttd-dialog\"\n        onCloseRequest={() => {\n          app.setOpenDialog(null);\n        }}\n        size={1520}\n        title={false}\n        {...rest}\n        autofocus={false}\n      >\n        <TTDDialogTabs dialog=\"ttd\" tab={tab}>\n          {\"__fallback\" in rest && rest.__fallback ? (\n            <p className=\"dialog-mermaid-title\">{t(\"mermaid.title\")}</p>\n          ) : (\n            <TTDDialogTabTriggers>\n              <TTDDialogTabTrigger tab=\"text-to-diagram\">\n                <div className=\"ttd-dialog-tab-trigger__content\">\n                  {t(\"labels.textToDiagram\")}\n                  <div className=\"ttd-dialog-tab-trigger__badge\">\n                    {t(\"chat.aiBeta\")}\n                  </div>\n                </div>\n              </TTDDialogTabTrigger>\n              <TTDDialogTabTrigger tab=\"mermaid\">\n                {t(\"mermaid.label\")}\n              </TTDDialogTabTrigger>\n            </TTDDialogTabTriggers>\n          )}\n\n          {!(\"__fallback\" in rest) && (\n            <TTDDialogTab className=\"ttd-dialog-content\" tab=\"text-to-diagram\">\n              <TextToDiagram\n                mermaidToJsonDrawLib={mermaidToJsonDrawLib}\n                onTextSubmit={rest.onTextSubmit}\n                renderWelcomeScreen={rest.renderWelcomeScreen}\n                renderWarning={rest.renderWarning}\n                persistenceAdapter={rest.persistenceAdapter}\n              />\n            </TTDDialogTab>\n          )}\n          <TTDDialogTab className=\"ttd-dialog-content\" tab=\"mermaid\">\n            <MermaidToJsonDraw\n              mermaidToJsonDrawLib={mermaidToJsonDrawLib}\n              isActive={tab === \"mermaid\"}\n            />\n          </TTDDialogTab>\n        </TTDDialogTabs>\n      </Dialog>\n    );\n  },\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ElementLinkDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ElementLinkDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { normalizeLink, KEYS } from \"@jsondraw/common\";\nimport {\n  defaultGetElementLinkFromSelection,\n  getLinkIdAndTypeFromSelection,\n} from \"@jsondraw/element\";\nimport type { Scene } from \"@jsondraw/element\";\nimport type { JsonDrawElement } from \"@jsondraw/element/types\";\nimport { t } from \"../../i18n\";\nimport { getSelectedElements } from \"../../scene\";\nimport type { AppProps, AppState, UIAppState } from \"../../types\";\nimport { TrashIcon } from \"../icons\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport { TextField } from \"../ui/TextField\";\nimport DialogActionButton from \"./DialogActionButton\";\nimport \"./ElementLinkDialog.scss\";\n\nconst ElementLinkDialog = ({\n  sourceElementId,\n  onClose,\n  appState,\n  scene,\n  generateLinkForSelection = defaultGetElementLinkFromSelection,\n}: {\n  sourceElementId: JsonDrawElement[\"id\"];\n  appState: UIAppState;\n  scene: Scene;\n  onClose?: () => void;\n  generateLinkForSelection: AppProps[\"generateLinkForSelection\"];\n}) => {\n  const elementsMap = scene.getNonDeletedElementsMap();\n  const originalLink = elementsMap.get(sourceElementId)?.link ?? null;\n\n  const [nextLink, setNextLink] = useState<string | null>(originalLink);\n  const [linkEdited, setLinkEdited] = useState(false);\n\n  useEffect(() => {\n    const selectedElements = getSelectedElements(elementsMap, appState);\n    let nextLink = originalLink;\n\n    if (selectedElements.length > 0 && generateLinkForSelection) {\n      const idAndType = getLinkIdAndTypeFromSelection(selectedElements, appState as AppState);\n\n      if (idAndType) {\n        nextLink = normalizeLink(generateLinkForSelection(idAndType.id, idAndType.type));\n      }\n    }\n\n    setNextLink(nextLink);\n  }, [elementsMap, appState, appState.selectedElementIds, originalLink, generateLinkForSelection]);\n\n  const handleConfirm = useCallback(() => {\n    if (nextLink && nextLink !== elementsMap.get(sourceElementId)?.link) {\n      const elementToLink = elementsMap.get(sourceElementId);\n      elementToLink &&\n        scene.mutateElement(elementToLink, {\n          link: nextLink,\n        });\n    }\n\n    if (!nextLink && linkEdited && sourceElementId) {\n      const elementToLink = elementsMap.get(sourceElementId);\n      elementToLink &&\n        scene.mutateElement(elementToLink, {\n          link: null,\n        });\n    }\n\n    onClose?.();\n  }, [sourceElementId, nextLink, elementsMap, linkEdited, scene, onClose]);\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (appState.openDialog?.name === \"elementLinkSelector\" && event.key === KEYS.ENTER) {\n        handleConfirm();\n      }\n\n      if (appState.openDialog?.name === \"elementLinkSelector\" && event.key === KEYS.ESCAPE) {\n        onClose?.();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [appState, onClose, handleConfirm]);\n\n  return (\n    <div className=\"ElementLinkDialog\">\n      <div className=\"ElementLinkDialog__header\">\n        <h2>{t(\"elementLink.title\")}</h2>\n        <p>{t(\"elementLink.desc\")}</p>\n      </div>\n\n      <div className=\"ElementLinkDialog__input\">\n        <TextField\n          value={nextLink ?? \"\"}\n          onChange={value => {\n            if (!linkEdited) {\n              setLinkEdited(true);\n            }\n            setNextLink(value);\n          }}\n          onKeyDown={event => {\n            if (event.key === KEYS.ENTER) {\n              handleConfirm();\n            }\n          }}\n          className=\"ElementLinkDialog__input-field\"\n          selectOnRender\n        />\n\n        {originalLink && nextLink && (\n          <ToolButton\n            type=\"button\"\n            title={t(\"buttons.remove\")}\n            aria-label={t(\"buttons.remove\")}\n            label={t(\"buttons.remove\")}\n            onClick={() => {\n              // removes the link from the input\n              // but doesn't update the element\n\n              // when confirmed, will remove the link from the element\n              setNextLink(null);\n              setLinkEdited(true);\n            }}\n            className=\"ElementLinkDialog__remove\"\n            icon={TrashIcon}\n          />\n        )}\n      </div>\n\n      <div className=\"ElementLinkDialog__actions\">\n        <DialogActionButton\n          label={t(\"buttons.cancel\")}\n          onClick={() => {\n            onClose?.();\n          }}\n          style={{\n            marginRight: 10,\n          }}\n        />\n\n        <DialogActionButton\n          label={t(\"buttons.confirm\")}\n          onClick={handleConfirm}\n          actionType=\"primary\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ElementLinkDialog;\n","import React, { useState } from \"react\";\n\nimport { t } from \"../../i18n\";\n\nimport { useJsonDrawContainer } from \"../App\";\nimport { Dialog } from \"./Dialog\";\n\nexport const ErrorDialog = ({\n  children,\n  onClose,\n}: {\n  children?: React.ReactNode;\n  onClose?: () => void;\n}) => {\n  const [modalIsShown, setModalIsShown] = useState(!!children);\n  const { container: jsondrawContainer } = useJsonDrawContainer();\n\n  const handleClose = React.useCallback(() => {\n    setModalIsShown(false);\n\n    if (onClose) {\n      onClose();\n    }\n    // TODO: Fix the A11y issues so this is never needed since we should always focus on last active element\n    jsondrawContainer?.focus();\n  }, [onClose, jsondrawContainer]);\n\n  return (\n    <>\n      {modalIsShown && (\n        <Dialog\n          size=\"small\"\n          onCloseRequest={handleClose}\n          title={t(\"errorDialog.title\")}\n        >\n          <div style={{ whiteSpace: \"pre-wrap\" }}>{children}</div>\n        </Dialog>\n      )}\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./HelpDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./HelpDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport type { JSX } from \"react\";\nimport { isDarwin, isFirefox, isWindows } from \"@jsondraw/common\";\nimport { KEYS } from \"@jsondraw/common\";\nimport { getShortcutFromShortcutName } from \"../../actions/shortcuts\";\nimport { probablySupportsClipboardBlob } from \"../../clipboard\";\nimport { languages, setLanguage, t, useI18n } from \"../../i18n\";\nimport { getShortcutKey } from \"../../shortcut\";\nimport { ExternalLinkIcon, GithubIcon } from \"../icons\";\nimport { Dialog } from \"./Dialog\";\nimport \"./HelpDialog.scss\";\n\nconst Header = () => (\n  <div className=\"HelpDialog__header\">\n    <a className=\"HelpDialog__btn\" href=\"/coming-soon\" target=\"_blank\" rel=\"noopener\">\n      <div className=\"HelpDialog__link-icon\">{ExternalLinkIcon}</div>\n      {t(\"helpDialog.documentation\")}\n    </a>\n    <a className=\"HelpDialog__btn\" href=\"/coming-soon\" target=\"_blank\" rel=\"noopener\">\n      <div className=\"HelpDialog__link-icon\">{ExternalLinkIcon}</div>\n      {t(\"helpDialog.blog\")}\n    </a>\n    <a\n      className=\"HelpDialog__btn\"\n      href=\"https://github.com/HoangDuonng/Json_Visualization/issues/new/choose\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <div className=\"HelpDialog__link-icon\">{GithubIcon}</div>\n      {t(\"helpDialog.github\")}\n    </a>\n  </div>\n);\n\nconst Section = (props: { title: string; children: React.ReactNode }) => (\n  <>\n    <h3>{props.title}</h3>\n    <div className=\"HelpDialog__islands-container\">{props.children}</div>\n  </>\n);\n\nconst ShortcutIsland = (props: {\n  caption: string;\n  children: React.ReactNode;\n  className?: string;\n}) => (\n  <div className={`HelpDialog__island ${props.className}`}>\n    <h4 className=\"HelpDialog__island-title\">{props.caption}</h4>\n    <div className=\"HelpDialog__island-content\">{props.children}</div>\n  </div>\n);\n\nfunction* intersperse(as: JSX.Element[][], delim: string | null) {\n  let first = true;\n  for (const x of as) {\n    if (!first) {\n      yield delim;\n    }\n    first = false;\n    yield x;\n  }\n}\n\nconst upperCaseSingleChars = (str: string) => {\n  return str.replace(/\\b[a-z]\\b/, c => c.toUpperCase());\n};\n\nconst Shortcut = ({\n  label,\n  shortcuts,\n  isOr = true,\n}: {\n  label: string;\n  shortcuts: string[];\n  isOr?: boolean;\n}) => {\n  const splitShortcutKeys = shortcuts.map(shortcut => {\n    const keys = shortcut.endsWith(\"++\")\n      ? [...shortcut.slice(0, -2).split(\"+\"), \"+\"]\n      : shortcut.split(\"+\");\n\n    return keys.map(key => <ShortcutKey key={key}>{upperCaseSingleChars(key)}</ShortcutKey>);\n  });\n\n  return (\n    <div className=\"HelpDialog__shortcut\">\n      <div>{label}</div>\n      <div className=\"HelpDialog__key-container\">\n        {[...intersperse(splitShortcutKeys, isOr ? t(\"helpDialog.or\") : null)]}\n      </div>\n    </div>\n  );\n};\n\nconst ShortcutKey = (props: { children: React.ReactNode }) => (\n  <kbd className=\"HelpDialog__key\" {...props} />\n);\n\nexport const HelpDialog = ({ onClose }: { onClose?: () => void }) => {\n  const { langCode } = useI18n();\n  const handleClose = React.useCallback(() => {\n    if (onClose) {\n      onClose();\n    }\n  }, [onClose]);\n\n  const handleLanguageChange = async (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const nextLang = languages.find(lang => lang.code === event.target.value);\n\n    if (!nextLang || nextLang.code === langCode) {\n      return;\n    }\n\n    await setLanguage(nextLang);\n  };\n\n  const title = (\n    <div className=\"HelpDialog__title-row\">\n      <span>{t(\"helpDialog.title\")}</span>\n      <label className=\"HelpDialog__language\">\n        <span className=\"HelpDialog__language-label\">{t(\"labels.language\")}</span>\n        <select\n          className=\"HelpDialog__language-select\"\n          value={langCode}\n          onChange={handleLanguageChange}\n          aria-label={t(\"labels.language\")}\n        >\n          {languages.map(language => (\n            <option key={language.code} value={language.code}>\n              {language.label}\n            </option>\n          ))}\n        </select>\n      </label>\n    </div>\n  );\n\n  return (\n    <>\n      <Dialog onCloseRequest={handleClose} title={title} className={\"HelpDialog\"}>\n        <Header />\n        <Section title={t(\"helpDialog.shortcuts\")}>\n          <ShortcutIsland className=\"HelpDialog__island--tools\" caption={t(\"helpDialog.tools\")}>\n            <Shortcut label={t(\"toolBar.hand\")} shortcuts={[KEYS.H]} />\n            <Shortcut label={t(\"toolBar.selection\")} shortcuts={[KEYS.V, KEYS[\"1\"]]} />\n            <Shortcut label={t(\"toolBar.rectangle\")} shortcuts={[KEYS.R, KEYS[\"2\"]]} />\n            <Shortcut label={t(\"toolBar.diamond\")} shortcuts={[KEYS.D, KEYS[\"3\"]]} />\n            <Shortcut label={t(\"toolBar.ellipse\")} shortcuts={[KEYS.O, KEYS[\"4\"]]} />\n            <Shortcut label={t(\"toolBar.arrow\")} shortcuts={[KEYS.A, KEYS[\"5\"]]} />\n            <Shortcut label={t(\"toolBar.line\")} shortcuts={[KEYS.L, KEYS[\"6\"]]} />\n            <Shortcut label={t(\"toolBar.freedraw\")} shortcuts={[KEYS.P, KEYS[\"7\"]]} />\n            <Shortcut label={t(\"toolBar.text\")} shortcuts={[KEYS.T, KEYS[\"8\"]]} />\n            <Shortcut label={t(\"toolBar.image\")} shortcuts={[KEYS[\"9\"]]} />\n            <Shortcut label={t(\"toolBar.eraser\")} shortcuts={[KEYS.E, KEYS[\"0\"]]} />\n            <Shortcut label={t(\"toolBar.frame\")} shortcuts={[KEYS.F]} />\n            <Shortcut label={t(\"toolBar.laser\")} shortcuts={[KEYS.K]} />\n            <Shortcut label={t(\"labels.eyeDropper\")} shortcuts={[KEYS.I, \"Shift+S\", \"Shift+G\"]} />\n            <Shortcut\n              label={t(\"helpDialog.editLineArrowPoints\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Enter\")]}\n            />\n            <Shortcut label={t(\"helpDialog.editText\")} shortcuts={[getShortcutKey(\"Enter\")]} />\n            <Shortcut\n              label={t(\"helpDialog.textNewLine\")}\n              shortcuts={[getShortcutKey(\"Enter\"), getShortcutKey(\"Shift+Enter\")]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.textFinish\")}\n              shortcuts={[getShortcutKey(\"Esc\"), getShortcutKey(\"CtrlOrCmd+Enter\")]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.curvedArrow\")}\n              shortcuts={[\"A\", t(\"helpDialog.click\"), t(\"helpDialog.click\"), t(\"helpDialog.click\")]}\n              isOr={false}\n            />\n            <Shortcut\n              label={t(\"helpDialog.curvedLine\")}\n              shortcuts={[\"L\", t(\"helpDialog.click\"), t(\"helpDialog.click\"), t(\"helpDialog.click\")]}\n              isOr={false}\n            />\n            <Shortcut\n              label={t(\"helpDialog.cropStart\")}\n              shortcuts={[t(\"helpDialog.doubleClick\"), getShortcutKey(\"Enter\")]}\n              isOr={true}\n            />\n            <Shortcut\n              label={t(\"helpDialog.cropFinish\")}\n              shortcuts={[getShortcutKey(\"Enter\"), getShortcutKey(\"Escape\")]}\n              isOr={true}\n            />\n            <Shortcut label={t(\"toolBar.lock\")} shortcuts={[KEYS.Q]} />\n            <Shortcut\n              label={t(\"helpDialog.preventBinding\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd\")]}\n            />\n            <Shortcut label={t(\"toolBar.link\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+K\")]} />\n            <Shortcut\n              label={t(\"toolBar.convertElementType\")}\n              shortcuts={[\"Tab\", \"Shift+Tab\"]}\n              isOr={true}\n            />\n          </ShortcutIsland>\n          <ShortcutIsland className=\"HelpDialog__island--view\" caption={t(\"helpDialog.view\")}>\n            <Shortcut label={t(\"buttons.zoomIn\")} shortcuts={[getShortcutKey(\"CtrlOrCmd++\")]} />\n            <Shortcut label={t(\"buttons.zoomOut\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+-\")]} />\n            <Shortcut label={t(\"buttons.resetZoom\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+0\")]} />\n            <Shortcut label={t(\"helpDialog.zoomToFit\")} shortcuts={[\"Shift+1\"]} />\n            <Shortcut label={t(\"helpDialog.zoomToSelection\")} shortcuts={[\"Shift+2\"]} />\n            <Shortcut label={t(\"helpDialog.movePageUpDown\")} shortcuts={[\"PgUp/PgDn\"]} />\n            <Shortcut label={t(\"helpDialog.movePageLeftRight\")} shortcuts={[\"Shift+PgUp/PgDn\"]} />\n            <Shortcut label={t(\"buttons.zenMode\")} shortcuts={[getShortcutKey(\"Alt+Z\")]} />\n            <Shortcut label={t(\"buttons.objectsSnapMode\")} shortcuts={[getShortcutKey(\"Alt+S\")]} />\n            <Shortcut label={t(\"labels.toggleGrid\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+'\")]} />\n            <Shortcut label={t(\"labels.viewMode\")} shortcuts={[getShortcutKey(\"Alt+R\")]} />\n            <Shortcut label={t(\"labels.toggleTheme\")} shortcuts={[getShortcutKey(\"Alt+Shift+D\")]} />\n            <Shortcut label={t(\"stats.fullTitle\")} shortcuts={[getShortcutKey(\"Alt+/\")]} />\n            <Shortcut\n              label={t(\"search.title\")}\n              shortcuts={[getShortcutFromShortcutName(\"searchMenu\")]}\n            />\n            <Shortcut\n              label={t(\"commandPalette.title\")}\n              shortcuts={\n                isFirefox\n                  ? [getShortcutFromShortcutName(\"commandPalette\")]\n                  : [\n                      getShortcutFromShortcutName(\"commandPalette\"),\n                      getShortcutFromShortcutName(\"commandPalette\", 1),\n                    ]\n              }\n            />\n          </ShortcutIsland>\n          <ShortcutIsland className=\"HelpDialog__island--editor\" caption={t(\"helpDialog.editor\")}>\n            <Shortcut\n              label={t(\"helpDialog.createFlowchart\")}\n              shortcuts={[getShortcutKey(`CtrlOrCmd+Arrow Key`)]}\n              isOr={true}\n            />\n            <Shortcut\n              label={t(\"helpDialog.navigateFlowchart\")}\n              shortcuts={[getShortcutKey(`Alt+Arrow Key`)]}\n              isOr={true}\n            />\n            <Shortcut\n              label={t(\"labels.moveCanvas\")}\n              shortcuts={[\n                getShortcutKey(`Space+${t(\"helpDialog.drag\")}`),\n                getShortcutKey(`Wheel+${t(\"helpDialog.drag\")}`),\n              ]}\n              isOr={true}\n            />\n            <Shortcut\n              label={t(\"buttons.clearReset\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Delete\")]}\n            />\n            <Shortcut label={t(\"labels.delete\")} shortcuts={[getShortcutKey(\"Delete\")]} />\n            <Shortcut label={t(\"labels.cut\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+X\")]} />\n            <Shortcut label={t(\"labels.copy\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+C\")]} />\n            <Shortcut label={t(\"labels.paste\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+V\")]} />\n            <Shortcut\n              label={t(\"labels.pasteAsPlaintext\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+V\")]}\n            />\n            <Shortcut label={t(\"labels.selectAll\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+A\")]} />\n            <Shortcut\n              label={t(\"labels.multiSelect\")}\n              shortcuts={[getShortcutKey(`Shift+${t(\"helpDialog.click\")}`)]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.deepSelect\")}\n              shortcuts={[getShortcutKey(`CtrlOrCmd+${t(\"helpDialog.click\")}`)]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.deepBoxSelect\")}\n              shortcuts={[getShortcutKey(`CtrlOrCmd+${t(\"helpDialog.drag\")}`)]}\n            />\n            {/* firefox supports clipboard API under a flag, so we'll\n                show users what they can do in the error message */}\n            {(probablySupportsClipboardBlob || isFirefox) && (\n              <Shortcut label={t(\"labels.copyAsPng\")} shortcuts={[getShortcutKey(\"Shift+Alt+C\")]} />\n            )}\n            <Shortcut\n              label={t(\"labels.copyStyles\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Alt+C\")]}\n            />\n            <Shortcut\n              label={t(\"labels.pasteStyles\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Alt+V\")]}\n            />\n            <Shortcut\n              label={t(\"labels.sendToBack\")}\n              shortcuts={[\n                isDarwin ? getShortcutKey(\"CtrlOrCmd+Alt+[\") : getShortcutKey(\"CtrlOrCmd+Shift+[\"),\n              ]}\n            />\n            <Shortcut\n              label={t(\"labels.bringToFront\")}\n              shortcuts={[\n                isDarwin ? getShortcutKey(\"CtrlOrCmd+Alt+]\") : getShortcutKey(\"CtrlOrCmd+Shift+]\"),\n              ]}\n            />\n            <Shortcut\n              label={t(\"labels.sendBackward\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+[\")]}\n            />\n            <Shortcut\n              label={t(\"labels.bringForward\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+]\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignTop\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Up\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignBottom\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Down\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignLeft\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Left\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignRight\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Right\")]}\n            />\n            <Shortcut\n              label={t(\"labels.duplicateSelection\")}\n              shortcuts={[\n                getShortcutKey(\"CtrlOrCmd+D\"),\n                getShortcutKey(`Alt+${t(\"helpDialog.drag\")}`),\n              ]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.toggleElementLock\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+L\")]}\n            />\n            <Shortcut label={t(\"buttons.undo\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+Z\")]} />\n            <Shortcut\n              label={t(\"buttons.redo\")}\n              shortcuts={\n                isWindows\n                  ? [getShortcutKey(\"CtrlOrCmd+Y\"), getShortcutKey(\"CtrlOrCmd+Shift+Z\")]\n                  : [getShortcutKey(\"CtrlOrCmd+Shift+Z\")]\n              }\n            />\n            <Shortcut label={t(\"labels.group\")} shortcuts={[getShortcutKey(\"CtrlOrCmd+G\")]} />\n            <Shortcut\n              label={t(\"labels.ungroup\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+G\")]}\n            />\n            <Shortcut label={t(\"labels.flipHorizontal\")} shortcuts={[getShortcutKey(\"Shift+H\")]} />\n            <Shortcut label={t(\"labels.flipVertical\")} shortcuts={[getShortcutKey(\"Shift+V\")]} />\n            <Shortcut label={t(\"labels.showStroke\")} shortcuts={[getShortcutKey(\"S\")]} />\n            <Shortcut label={t(\"labels.showBackground\")} shortcuts={[getShortcutKey(\"G\")]} />\n            <Shortcut label={t(\"labels.showFonts\")} shortcuts={[getShortcutKey(\"Shift+F\")]} />\n            <Shortcut\n              label={t(\"labels.decreaseFontSize\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+<\")]}\n            />\n            <Shortcut\n              label={t(\"labels.increaseFontSize\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+>\")]}\n            />\n          </ShortcutIsland>\n        </Section>\n      </Dialog>\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./PasteChartDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./PasteChartDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\n\nimport type { ChartType } from \"@jsondraw/element/types\";\n\nimport { trackEvent } from \"../../analytics\";\nimport { renderSpreadsheet } from \"../../charts\";\nimport { t } from \"../../i18n\";\nimport { exportToSvg } from \"../../scene/export\";\n\nimport { useApp } from \"../App\";\nimport { Dialog } from \"./Dialog\";\n\nimport \"./PasteChartDialog.scss\";\n\nimport type { ChartElements, Spreadsheet } from \"../../charts\";\nimport type { UIAppState } from \"../../types\";\n\ntype OnInsertChart = (chartType: ChartType, elements: ChartElements) => void;\n\nconst ChartPreviewBtn = (props: {\n  spreadsheet: Spreadsheet | null;\n  chartType: ChartType;\n  selected: boolean;\n  onClick: OnInsertChart;\n}) => {\n  const previewRef = useRef<HTMLDivElement | null>(null);\n  const [chartElements, setChartElements] = useState<ChartElements | null>(\n    null,\n  );\n\n  useLayoutEffect(() => {\n    if (!props.spreadsheet) {\n      return;\n    }\n\n    const elements = renderSpreadsheet(\n      props.chartType,\n      props.spreadsheet,\n      0,\n      0,\n    );\n    setChartElements(elements);\n    let svg: SVGSVGElement;\n    const previewNode = previewRef.current!;\n\n    (async () => {\n      svg = await exportToSvg(\n        elements,\n        {\n          exportBackground: false,\n          viewBackgroundColor: \"#fff\",\n        },\n        null, // files\n        {\n          skipInliningFonts: true,\n        },\n      );\n      svg.querySelector(\".style-fonts\")?.remove();\n      previewNode.replaceChildren();\n      previewNode.appendChild(svg);\n\n      if (props.selected) {\n        (previewNode.parentNode as HTMLDivElement).focus();\n      }\n    })();\n\n    return () => {\n      previewNode.replaceChildren();\n    };\n  }, [props.spreadsheet, props.chartType, props.selected]);\n\n  return (\n    <button\n      type=\"button\"\n      className=\"ChartPreview\"\n      onClick={() => {\n        if (chartElements) {\n          props.onClick(props.chartType, chartElements);\n        }\n      }}\n    >\n      <div ref={previewRef} />\n    </button>\n  );\n};\n\nexport const PasteChartDialog = ({\n  setAppState,\n  appState,\n  onClose,\n}: {\n  appState: UIAppState;\n  onClose: () => void;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n}) => {\n  const { onInsertElements } = useApp();\n  const handleClose = React.useCallback(() => {\n    if (onClose) {\n      onClose();\n    }\n  }, [onClose]);\n\n  const handleChartClick = (chartType: ChartType, elements: ChartElements) => {\n    onInsertElements(elements);\n    trackEvent(\"paste\", \"chart\", chartType);\n    setAppState({\n      currentChartType: chartType,\n      pasteDialog: {\n        shown: false,\n        data: null,\n      },\n    });\n  };\n\n  return (\n    <Dialog\n      size=\"small\"\n      onCloseRequest={handleClose}\n      title={t(\"labels.pasteCharts\")}\n      className={\"PasteChartDialog\"}\n      autofocus={false}\n    >\n      <div className={\"container\"}>\n        <ChartPreviewBtn\n          chartType=\"bar\"\n          spreadsheet={appState.pasteDialog.data}\n          selected={appState.currentChartType === \"bar\"}\n          onClick={handleChartClick}\n        />\n        <ChartPreviewBtn\n          chartType=\"line\"\n          spreadsheet={appState.pasteDialog.data}\n          selected={appState.currentChartType === \"line\"}\n          onClick={handleChartClick}\n        />\n      </div>\n    </Dialog>\n  );\n};\n","import { useCallback, useRef, useState } from \"react\";\n\nconst TIMEOUT = 2000;\n\nexport const useCopyStatus = () => {\n  const [copyStatus, setCopyStatus] = useState<\"success\" | null>(null);\n  const timeoutRef = useRef<number>(0);\n\n  const onCopy = () => {\n    clearTimeout(timeoutRef.current);\n    setCopyStatus(\"success\");\n\n    timeoutRef.current = window.setTimeout(() => {\n      setCopyStatus(null);\n    }, TIMEOUT);\n  };\n\n  const resetCopyStatus = useCallback(() => {\n    setCopyStatus(null);\n  }, []);\n\n  return {\n    copyStatus,\n    resetCopyStatus,\n    onCopy,\n  };\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./RadioGroup.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./RadioGroup.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import clsx from \"clsx\";\nimport \"./RadioGroup.scss\";\n\nexport type RadioGroupChoice<T> = {\n  value: T;\n  label: React.ReactNode;\n  ariaLabel?: string;\n};\n\nexport type RadioGroupProps<T> = {\n  choices: RadioGroupChoice<T>[];\n  value: T;\n  onChange: (value: T) => void;\n  name: string;\n};\n\nexport const RadioGroup = function <T>({ onChange, value, choices, name }: RadioGroupProps<T>) {\n  return (\n    <div className=\"RadioGroup\">\n      {choices.map(choice => (\n        <div\n          className={clsx(\"RadioGroup__choice\", {\n            active: choice.value === value,\n          })}\n          key={String(choice.value)}\n          title={choice.ariaLabel}\n        >\n          <input\n            name={name}\n            type=\"radio\"\n            checked={choice.value === value}\n            onChange={() => onChange(choice.value)}\n            aria-label={choice.ariaLabel}\n          />\n          {choice.label}\n        </div>\n      ))}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Switch.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Switch.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import clsx from \"clsx\";\nimport \"./Switch.scss\";\n\nexport type SwitchProps = {\n  name: string;\n  checked: boolean;\n  title?: string;\n  onChange: (value: boolean) => void;\n  disabled?: boolean;\n};\n\nexport const Switch = ({ title, name, checked, onChange, disabled = false }: SwitchProps) => {\n  return (\n    <div className={clsx(\"Switch\", { toggled: checked, disabled })}>\n      <input\n        name={name}\n        id={name}\n        title={title}\n        type=\"checkbox\"\n        checked={checked}\n        disabled={disabled}\n        onChange={() => onChange(!checked)}\n        onKeyDown={event => {\n          if (event.key === \" \") {\n            onChange(!checked);\n          }\n        }}\n      />\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ImageExportDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ImageExportDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport {\n  DEFAULT_EXPORT_PADDING,\n  EXPORT_IMAGE_TYPES,\n  isFirefox,\n  EXPORT_SCALES,\n  cloneJSON,\n} from \"@jsondraw/common\";\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\nimport { exportToCanvas } from \"@jsondraw/utils/export\";\nimport {\n  actionExportWithDarkMode,\n  actionChangeExportBackground,\n  actionChangeExportEmbedScene,\n  actionChangeExportScale,\n  actionChangeProjectName,\n} from \"../../actions/actionExport\";\nimport type { ActionManager } from \"../../actions/manager\";\nimport { probablySupportsClipboardBlob } from \"../../clipboard\";\nimport { prepareElementsForExport } from \"../../data\";\nimport { canvasToBlob } from \"../../data/blob\";\nimport { nativeFileSystemSupported } from \"../../data/filesystem\";\nimport { useCopyStatus } from \"../../hooks/useCopiedIndicator\";\nimport { t } from \"../../i18n\";\nimport { isSomeElementSelected } from \"../../scene\";\nimport type { AppClassProperties, BinaryFiles, UIAppState } from \"../../types\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport { copyIcon, downloadIcon, helpIcon } from \"../icons\";\nimport { FilledButton } from \"../ui/FilledButton\";\nimport { RadioGroup } from \"../ui/RadioGroup\";\nimport { Switch } from \"../ui/Switch\";\nimport { Tooltip } from \"../ui/Tooltip\";\nimport \"./ImageExportDialog.scss\";\n\nexport const ErrorCanvasPreview = () => {\n  return (\n    <div>\n      <h3>{t(\"canvasError.cannotShowPreview\")}</h3>\n      <p>\n        <span>{t(\"canvasError.canvasTooBig\")}</span>\n      </p>\n      <em>({t(\"canvasError.canvasTooBigTip\")})</em>\n    </div>\n  );\n};\n\ntype ImageExportModalProps = {\n  appStateSnapshot: Readonly<UIAppState>;\n  elementsSnapshot: readonly NonDeletedJsonDrawElement[];\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  name: string;\n};\n\nconst ImageExportModal = ({\n  appStateSnapshot,\n  elementsSnapshot,\n  files,\n  actionManager,\n  onExportImage,\n  name,\n}: ImageExportModalProps) => {\n  const hasSelection = isSomeElementSelected(elementsSnapshot, appStateSnapshot);\n\n  const [projectName, setProjectName] = useState(name);\n  const [exportSelectionOnly, setExportSelectionOnly] = useState(hasSelection);\n  const [exportWithBackground, setExportWithBackground] = useState(\n    appStateSnapshot.exportBackground\n  );\n  const [exportDarkMode, setExportDarkMode] = useState(appStateSnapshot.exportWithDarkMode);\n  const [embedScene, setEmbedScene] = useState(appStateSnapshot.exportEmbedScene);\n  const [exportScale, setExportScale] = useState(appStateSnapshot.exportScale);\n\n  const previewRef = useRef<HTMLDivElement>(null);\n  const [renderError, setRenderError] = useState<Error | null>(null);\n\n  const { onCopy, copyStatus, resetCopyStatus } = useCopyStatus();\n\n  useEffect(() => {\n    // if user changes setting right after export to clipboard, reset the status\n    // so they don't have to wait for the timeout to click the button again\n    resetCopyStatus();\n  }, [projectName, exportWithBackground, exportDarkMode, exportScale, embedScene, resetCopyStatus]);\n\n  const { exportedElements, exportingFrame } = prepareElementsForExport(\n    elementsSnapshot,\n    appStateSnapshot,\n    exportSelectionOnly\n  );\n\n  useEffect(() => {\n    const previewNode = previewRef.current;\n    if (!previewNode) {\n      return;\n    }\n    const maxWidth = previewNode.offsetWidth;\n    const maxHeight = previewNode.offsetHeight;\n    if (!maxWidth) {\n      return;\n    }\n\n    exportToCanvas({\n      elements: exportedElements,\n      appState: {\n        ...appStateSnapshot,\n        name: projectName,\n        exportBackground: exportWithBackground,\n        exportWithDarkMode: exportDarkMode,\n        exportScale,\n        exportEmbedScene: embedScene,\n      },\n      files,\n      exportPadding: DEFAULT_EXPORT_PADDING,\n      maxWidthOrHeight: Math.max(maxWidth, maxHeight),\n      exportingFrame,\n    })\n      .then(canvas => {\n        setRenderError(null);\n        // if converting to blob fails, there's some problem that will\n        // likely prevent preview and export (e.g. canvas too big)\n        return canvasToBlob(canvas)\n          .then(() => {\n            previewNode.replaceChildren(canvas);\n          })\n          .catch(e => {\n            if (e.name === \"CANVAS_POSSIBLY_TOO_BIG\") {\n              throw new Error(t(\"canvasError.canvasTooBig\"));\n            }\n            throw e;\n          });\n      })\n      .catch(error => {\n        console.error(error);\n        setRenderError(error);\n      });\n  }, [\n    appStateSnapshot,\n    files,\n    exportedElements,\n    exportingFrame,\n    projectName,\n    exportWithBackground,\n    exportDarkMode,\n    exportScale,\n    embedScene,\n  ]);\n\n  return (\n    <div className=\"ImageExportModal\">\n      <h3>{t(\"imageExportDialog.header\")}</h3>\n      <div className=\"ImageExportModal__preview\">\n        <div className=\"ImageExportModal__preview__canvas\" ref={previewRef}>\n          {renderError && <ErrorCanvasPreview />}\n        </div>\n        <div className=\"ImageExportModal__preview__filename\">\n          {!nativeFileSystemSupported && (\n            <input\n              type=\"text\"\n              className=\"TextInput\"\n              value={projectName}\n              style={{ width: \"30ch\" }}\n              onChange={event => {\n                setProjectName(event.target.value);\n                actionManager.executeAction(actionChangeProjectName, \"ui\", event.target.value);\n              }}\n            />\n          )}\n        </div>\n      </div>\n      <div className=\"ImageExportModal__settings\">\n        <h3>{t(\"imageExportDialog.header\")}</h3>\n        {hasSelection && (\n          <ExportSetting\n            label={t(\"imageExportDialog.label.onlySelected\")}\n            name=\"exportOnlySelected\"\n          >\n            <Switch\n              name=\"exportOnlySelected\"\n              checked={exportSelectionOnly}\n              onChange={checked => {\n                setExportSelectionOnly(checked);\n              }}\n            />\n          </ExportSetting>\n        )}\n        <ExportSetting\n          label={t(\"imageExportDialog.label.withBackground\")}\n          name=\"exportBackgroundSwitch\"\n        >\n          <Switch\n            name=\"exportBackgroundSwitch\"\n            checked={exportWithBackground}\n            onChange={checked => {\n              setExportWithBackground(checked);\n              actionManager.executeAction(actionChangeExportBackground, \"ui\", checked);\n            }}\n          />\n        </ExportSetting>\n        <ExportSetting label={t(\"imageExportDialog.label.darkMode\")} name=\"exportDarkModeSwitch\">\n          <Switch\n            name=\"exportDarkModeSwitch\"\n            checked={exportDarkMode}\n            onChange={checked => {\n              setExportDarkMode(checked);\n              actionManager.executeAction(actionExportWithDarkMode, \"ui\", checked);\n            }}\n          />\n        </ExportSetting>\n        <ExportSetting\n          label={t(\"imageExportDialog.label.embedScene\")}\n          tooltip={t(\"imageExportDialog.tooltip.embedScene\")}\n          name=\"exportEmbedSwitch\"\n        >\n          <Switch\n            name=\"exportEmbedSwitch\"\n            checked={embedScene}\n            onChange={checked => {\n              setEmbedScene(checked);\n              actionManager.executeAction(actionChangeExportEmbedScene, \"ui\", checked);\n            }}\n          />\n        </ExportSetting>\n        <ExportSetting label={t(\"imageExportDialog.label.scale\")} name=\"exportScale\">\n          <RadioGroup\n            name=\"exportScale\"\n            value={exportScale}\n            onChange={scale => {\n              setExportScale(scale);\n              actionManager.executeAction(actionChangeExportScale, \"ui\", scale);\n            }}\n            choices={EXPORT_SCALES.map(scale => ({\n              value: scale,\n              label: `${scale}\\u00d7`,\n            }))}\n          />\n        </ExportSetting>\n\n        <div className=\"ImageExportModal__settings__buttons\">\n          <FilledButton\n            className=\"ImageExportModal__settings__buttons__button\"\n            label={t(\"imageExportDialog.title.exportToPng\")}\n            onClick={() =>\n              onExportImage(EXPORT_IMAGE_TYPES.png, exportedElements, {\n                exportingFrame,\n              })\n            }\n            icon={downloadIcon}\n          >\n            {t(\"imageExportDialog.button.exportToPng\")}\n          </FilledButton>\n          <FilledButton\n            className=\"ImageExportModal__settings__buttons__button\"\n            label={t(\"imageExportDialog.title.exportToSvg\")}\n            onClick={() =>\n              onExportImage(EXPORT_IMAGE_TYPES.svg, exportedElements, {\n                exportingFrame,\n              })\n            }\n            icon={downloadIcon}\n          >\n            {t(\"imageExportDialog.button.exportToSvg\")}\n          </FilledButton>\n          {(probablySupportsClipboardBlob || isFirefox) && (\n            <FilledButton\n              className=\"ImageExportModal__settings__buttons__button\"\n              label={t(\"imageExportDialog.title.copyPngToClipboard\")}\n              status={copyStatus}\n              onClick={async () => {\n                await onExportImage(EXPORT_IMAGE_TYPES.clipboard, exportedElements, {\n                  exportingFrame,\n                });\n                onCopy();\n              }}\n              icon={copyIcon}\n            >\n              {t(\"imageExportDialog.button.copyPngToClipboard\")}\n            </FilledButton>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\ntype ExportSettingProps = {\n  label: string;\n  children: React.ReactNode;\n  tooltip?: string;\n  name?: string;\n};\n\nconst ExportSetting = ({ label, children, tooltip, name }: ExportSettingProps) => {\n  return (\n    <div className=\"ImageExportModal__settings__setting\" title={label}>\n      <label htmlFor={name} className=\"ImageExportModal__settings__setting__label\">\n        {label}\n        {tooltip && (\n          <Tooltip label={tooltip} long={true}>\n            {helpIcon}\n          </Tooltip>\n        )}\n      </label>\n      <div className=\"ImageExportModal__settings__setting__content\">{children}</div>\n    </div>\n  );\n};\n\nexport const ImageExportDialog = ({\n  elements,\n  appState,\n  files,\n  actionManager,\n  onExportImage,\n  onCloseRequest,\n  name,\n}: {\n  appState: UIAppState;\n  elements: readonly NonDeletedJsonDrawElement[];\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  onCloseRequest: () => void;\n  name: string;\n}) => {\n  // we need to take a snapshot so that the exported state can't be modified\n  // while the dialog is open\n  const [{ appStateSnapshot, elementsSnapshot }] = useState(() => {\n    return {\n      appStateSnapshot: cloneJSON(appState),\n      elementsSnapshot: cloneJSON(elements),\n    };\n  });\n\n  return (\n    <Dialog onCloseRequest={onCloseRequest} size=\"wide\" title={false}>\n      <ImageExportModal\n        elementsSnapshot={elementsSnapshot}\n        appStateSnapshot={appStateSnapshot}\n        files={files}\n        actionManager={actionManager}\n        onExportImage={onExportImage}\n        name={name}\n      />\n    </Dialog>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Card.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Card.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import \"./Card.scss\";\n\n// for open-color see https://github.com/yeun/open-color/blob/master/open-color.scss\nconst COLOR_MAP = {\n  primary: {\n    base: \"var(--color-primary)\",\n    darker: \"var(--color-primary-darker)\",\n    darkest: \"var(--color-primary-darkest)\",\n  },\n  lime: {\n    base: \"#74b816\", // open-color lime[7]\n    darker: \"#66a80f\", // open-color lime[8]\n    darkest: \"#5c940d\", // open-color lime[9]\n  },\n  pink: {\n    base: \"#d6336c\", // open-color pink[7]\n    darker: \"#c2255c\", // open-color pink[8]\n    darkest: \"#a61e4d\", // open-color pink[9]\n  },\n};\n\nexport const Card: React.FC<{\n  color: \"primary\" | \"lime\" | \"pink\";\n  children?: React.ReactNode;\n}> = ({ children, color }) => {\n  return (\n    <div\n      className=\"Card\"\n      style={{\n        [\"--card-color\" as any]: COLOR_MAP[color].base,\n        [\"--card-color-darker\" as any]: COLOR_MAP[color].darker,\n        [\"--card-color-darkest\" as any]: COLOR_MAP[color].darkest,\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ExportDialog.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./ExportDialog.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport { getFrame } from \"@jsondraw/common\";\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\nimport { actionSaveFileToDisk } from \"../../actions/actionExport\";\nimport type { ActionManager } from \"../../actions/manager\";\nimport { trackEvent } from \"../../analytics\";\nimport { nativeFileSystemSupported } from \"../../data/filesystem\";\nimport { t } from \"../../i18n\";\nimport type { ExportOpts, BinaryFiles, UIAppState } from \"../../types\";\nimport { Dialog } from \"../dialogs/Dialog\";\nimport { exportToFileIcon, LinkIcon } from \"../icons\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport { Card } from \"../ui/Card\";\nimport \"./ExportDialog.scss\";\n\nexport type ExportCB = (elements: readonly NonDeletedJsonDrawElement[], scale?: number) => void;\n\nconst JSONExportModal = ({\n  elements,\n  appState,\n  setAppState,\n  files,\n  actionManager,\n  exportOpts,\n  canvas,\n  onCloseRequest,\n}: {\n  appState: UIAppState;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  files: BinaryFiles;\n  elements: readonly NonDeletedJsonDrawElement[];\n  actionManager: ActionManager;\n  onCloseRequest: () => void;\n  exportOpts: ExportOpts;\n  canvas: HTMLCanvasElement;\n}) => {\n  const { onExportToBackend } = exportOpts;\n  return (\n    <div className=\"ExportDialog ExportDialog--json\">\n      <div className=\"ExportDialog-cards\">\n        {exportOpts.saveFileToDisk && (\n          <Card color=\"lime\">\n            <div className=\"Card-icon\">{exportToFileIcon}</div>\n            <h2>{t(\"exportDialog.disk_title\")}</h2>\n            <div className=\"Card-details\">\n              {t(\"exportDialog.disk_details\")}\n              {!nativeFileSystemSupported && actionManager.renderAction(\"changeProjectName\")}\n            </div>\n            <ToolButton\n              className=\"Card-button\"\n              type=\"button\"\n              title={t(\"exportDialog.disk_button\")}\n              aria-label={t(\"exportDialog.disk_button\")}\n              showAriaLabel={true}\n              onClick={() => {\n                actionManager.executeAction(actionSaveFileToDisk, \"ui\");\n              }}\n            />\n          </Card>\n        )}\n        {onExportToBackend && (\n          <Card color=\"pink\">\n            <div className=\"Card-icon\">{LinkIcon}</div>\n            <h2>{t(\"exportDialog.link_title\")}</h2>\n            <div className=\"Card-details\">{t(\"exportDialog.link_details\")}</div>\n            <ToolButton\n              className=\"Card-button\"\n              type=\"button\"\n              title={t(\"exportDialog.link_button\")}\n              aria-label={t(\"exportDialog.link_button\")}\n              showAriaLabel={true}\n              onClick={async () => {\n                try {\n                  trackEvent(\"export\", \"link\", `ui (${getFrame()})`);\n                  await onExportToBackend(elements, appState, files);\n                  onCloseRequest();\n                } catch (error: any) {\n                  setAppState({ errorMessage: error.message });\n                }\n              }}\n            />\n          </Card>\n        )}\n        {exportOpts.renderCustomUI && exportOpts.renderCustomUI(elements, appState, files, canvas)}\n      </div>\n    </div>\n  );\n};\n\nexport const JSONExportDialog = ({\n  elements,\n  appState,\n  files,\n  actionManager,\n  exportOpts,\n  canvas,\n  setAppState,\n}: {\n  elements: readonly NonDeletedJsonDrawElement[];\n  appState: UIAppState;\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  exportOpts: ExportOpts;\n  canvas: HTMLCanvasElement;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n}) => {\n  const handleClose = React.useCallback(() => {\n    setAppState({ openDialog: null });\n  }, [setAppState]);\n\n  return (\n    <>\n      {appState.openDialog?.name === \"jsonExport\" && (\n        <Dialog onCloseRequest={handleClose} title={t(\"buttons.export\")}>\n          <JSONExportModal\n            elements={elements}\n            appState={appState}\n            setAppState={setAppState}\n            files={files}\n            actionManager={actionManager}\n            onCloseRequest={handleClose}\n            exportOpts={exportOpts}\n            canvas={canvas}\n          />\n        </Dialog>\n      )}\n    </>\n  );\n};\n","import { t } from \"../../i18n\";\n\nimport { HelpIcon } from \"../icons\";\n\ntype HelpButtonProps = {\n  name?: string;\n  id?: string;\n  onClick?(): void;\n};\n\nexport const HelpButton = (props: HelpButtonProps) => (\n  <button\n    className=\"help-icon\"\n    onClick={props.onClick}\n    type=\"button\"\n    title={`${t(\"helpDialog.title\")}  ?`}\n    aria-label={t(\"helpDialog.title\")}\n  >\n    {HelpIcon}\n  </button>\n);\n","import React from \"react\";\n\nimport { t } from \"../../i18n\";\n\nimport { useJsonDrawContainer } from \"../App\";\n\nexport const Section: React.FC<{\n  heading: \"canvasActions\" | \"selectedShapeActions\" | \"shapes\";\n  children?: React.ReactNode | ((heading: React.ReactNode) => React.ReactNode);\n  className?: string;\n}> = ({ heading, children, ...props }) => {\n  const { id } = useJsonDrawContainer();\n  const header = (\n    <h2 className=\"visually-hidden\" id={`${id}-${heading}-title`}>\n      {t(`headings.${heading}`)}\n    </h2>\n  );\n  return (\n    <section {...props} aria-labelledby={`${id}-${heading}-title`}>\n      {typeof children === \"function\" ? (\n        children(header)\n      ) : (\n        <>\n          {header}\n          {children}\n        </>\n      )}\n    </section>\n  );\n};\n","import clsx from \"clsx\";\n\nimport { actionShortcuts } from \"../../actions\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { ExitZenModeButton, UndoRedoActions, ZoomActions } from \"../toolbar/Actions\";\nimport { HelpButton } from \"../toolbar/HelpButton\";\nimport { Section } from \"../layout/Section\";\nimport Stack from \"../layout/Stack\";\n\nimport type { ActionManager } from \"../../actions/manager\";\nimport type { UIAppState } from \"../../types\";\n\nconst Footer = ({\n  appState,\n  actionManager,\n  showExitZenModeBtn,\n  renderWelcomeScreen,\n}: {\n  appState: UIAppState;\n  actionManager: ActionManager;\n  showExitZenModeBtn: boolean;\n  renderWelcomeScreen: boolean;\n}) => {\n  const { FooterCenterTunnel, WelcomeScreenHelpHintTunnel } = useTunnels();\n\n  return (\n    <footer\n      role=\"contentinfo\"\n      className=\"layer-ui__wrapper__footer App-menu App-menu_bottom\"\n    >\n      <div\n        className={clsx(\"layer-ui__wrapper__footer-left zen-mode-transition\", {\n          \"layer-ui__wrapper__footer-left--transition-left\":\n            appState.zenModeEnabled,\n        })}\n      >\n        <Stack.Col gap={2}>\n          <Section heading=\"canvasActions\">\n            <ZoomActions\n              renderAction={actionManager.renderAction}\n              zoom={appState.zoom}\n            />\n\n            {!appState.viewModeEnabled && (\n              <UndoRedoActions\n                renderAction={actionManager.renderAction}\n                className={clsx(\"zen-mode-transition\", {\n                  \"layer-ui__wrapper__footer-left--transition-bottom\":\n                    appState.zenModeEnabled,\n                })}\n              />\n            )}\n          </Section>\n        </Stack.Col>\n      </div>\n      <FooterCenterTunnel.Out />\n      <div\n        className={clsx(\"layer-ui__wrapper__footer-right zen-mode-transition\", {\n          \"transition-right\": appState.zenModeEnabled,\n        })}\n      >\n        <div style={{ position: \"relative\" }}>\n          {renderWelcomeScreen && <WelcomeScreenHelpHintTunnel.Out />}\n          <HelpButton\n            onClick={() => actionManager.executeAction(actionShortcuts)}\n          />\n        </div>\n      </div>\n      <ExitZenModeButton\n        actionManager={actionManager}\n        showExitZenModeBtn={showExitZenModeBtn}\n      />\n    </footer>\n  );\n};\n\nexport default Footer;\nFooter.displayName = \"Footer\";\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./UserList.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./UserList.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useLayoutEffect } from \"react\";\nimport { supportsResizeObserver, isShallowEqual } from \"@jsondraw/common\";\nimport type { MarkRequired } from \"@jsondraw/common/utility-types\";\nimport clsx from \"clsx\";\nimport { Popover } from \"radix-ui\";\nimport type { ActionManager } from \"../../actions/manager\";\nimport { t } from \"../../i18n\";\nimport type { Collaborator, SocketId } from \"../../types\";\nimport { useJsonDrawActionManager } from \"../App\";\nimport { Island } from \"../layout/Island\";\nimport { QuickSearch } from \"../search/QuickSearch\";\nimport { ScrollableList } from \"../ui/ScrollableList\";\nimport { Tooltip } from \"../ui/Tooltip\";\nimport \"./UserList.scss\";\n\nexport type GoToCollaboratorComponentProps = {\n  socketId: SocketId;\n  collaborator: Collaborator;\n  withName: boolean;\n  isBeingFollowed: boolean;\n};\n\n/** collaborator user id or socket id (fallback) */\ntype ClientId = string & { _brand: \"UserId\" };\n\nconst DEFAULT_MAX_AVATARS = 4;\nconst SHOW_COLLABORATORS_FILTER_AT = 8;\n\nconst ConditionalTooltipWrapper = ({\n  shouldWrap,\n  children,\n  username,\n}: {\n  shouldWrap: boolean;\n  children: React.ReactNode;\n  username?: string | null;\n}) =>\n  shouldWrap ? <Tooltip label={username || \"Unknown user\"}>{children}</Tooltip> : <>{children}</>;\n\nconst renderCollaborator = ({\n  actionManager,\n  collaborator,\n  socketId,\n  withName = false,\n  shouldWrapWithTooltip = false,\n  isBeingFollowed,\n}: {\n  actionManager: ActionManager;\n  collaborator: Collaborator;\n  socketId: SocketId;\n  withName?: boolean;\n  shouldWrapWithTooltip?: boolean;\n  isBeingFollowed: boolean;\n}) => {\n  const data: GoToCollaboratorComponentProps = {\n    socketId,\n    collaborator,\n    withName,\n    isBeingFollowed,\n  };\n  const avatarJSX = actionManager.renderAction(\"goToCollaborator\", data);\n\n  return (\n    <ConditionalTooltipWrapper\n      key={socketId}\n      username={collaborator.username}\n      shouldWrap={shouldWrapWithTooltip}\n    >\n      {avatarJSX}\n    </ConditionalTooltipWrapper>\n  );\n};\n\ntype UserListUserObject = Pick<\n  Collaborator,\n  \"avatarUrl\" | \"id\" | \"socketId\" | \"username\" | \"isInCall\" | \"isSpeaking\" | \"isMuted\"\n>;\n\ntype UserListProps = {\n  className?: string;\n  mobile?: boolean;\n  collaborators: Map<SocketId, UserListUserObject>;\n  userToFollow: SocketId | null;\n};\n\nconst collaboratorComparatorKeys = [\n  \"avatarUrl\",\n  \"id\",\n  \"socketId\",\n  \"username\",\n  \"isInCall\",\n  \"isSpeaking\",\n  \"isMuted\",\n] as const;\n\nexport const UserList = React.memo(\n  ({ className, mobile, collaborators, userToFollow }: UserListProps) => {\n    const actionManager = useJsonDrawActionManager();\n\n    const uniqueCollaboratorsMap = new Map<ClientId, MarkRequired<Collaborator, \"socketId\">>();\n\n    collaborators.forEach((collaborator, socketId) => {\n      const userId = (collaborator.id || socketId) as ClientId;\n      uniqueCollaboratorsMap.set(\n        // filter on user id, else fall back on unique socketId\n        userId,\n        { ...collaborator, socketId }\n      );\n    });\n\n    const uniqueCollaboratorsArray = Array.from(uniqueCollaboratorsMap.values()).filter(\n      collaborator => collaborator.username?.trim()\n    );\n\n    const [searchTerm, setSearchTerm] = React.useState(\"\");\n    const filteredCollaborators = uniqueCollaboratorsArray.filter(collaborator =>\n      collaborator.username?.toLowerCase().includes(searchTerm)\n    );\n\n    const userListWrapper = React.useRef<HTMLDivElement | null>(null);\n\n    useLayoutEffect(() => {\n      if (userListWrapper.current) {\n        const updateMaxAvatars = (width: number) => {\n          const maxAvatars = Math.max(1, Math.min(8, Math.floor(width / 38)));\n          setMaxAvatars(maxAvatars);\n        };\n\n        updateMaxAvatars(userListWrapper.current.clientWidth);\n\n        if (!supportsResizeObserver) {\n          return;\n        }\n\n        const resizeObserver = new ResizeObserver(entries => {\n          for (const entry of entries) {\n            const { width } = entry.contentRect;\n            updateMaxAvatars(width);\n          }\n        });\n\n        resizeObserver.observe(userListWrapper.current);\n\n        return () => {\n          resizeObserver.disconnect();\n        };\n      }\n    }, []);\n\n    const [maxAvatars, setMaxAvatars] = React.useState(DEFAULT_MAX_AVATARS);\n\n    const firstNCollaborators = uniqueCollaboratorsArray.slice(0, maxAvatars - 1);\n\n    const firstNAvatarsJSX = firstNCollaborators.map(collaborator =>\n      renderCollaborator({\n        actionManager,\n        collaborator,\n        socketId: collaborator.socketId,\n        shouldWrapWithTooltip: true,\n        isBeingFollowed: collaborator.socketId === userToFollow,\n      })\n    );\n\n    return mobile ? (\n      <div className={clsx(\"UserList UserList_mobile\", className)}>\n        {uniqueCollaboratorsArray.map(collaborator =>\n          renderCollaborator({\n            actionManager,\n            collaborator,\n            socketId: collaborator.socketId,\n            shouldWrapWithTooltip: true,\n            isBeingFollowed: collaborator.socketId === userToFollow,\n          })\n        )}\n      </div>\n    ) : (\n      <div className=\"UserList__wrapper\" ref={userListWrapper}>\n        <div\n          className={clsx(\"UserList\", className)}\n          style={{ [`--max-avatars` as any]: maxAvatars }}\n        >\n          {firstNAvatarsJSX}\n\n          {uniqueCollaboratorsArray.length > maxAvatars - 1 && (\n            <Popover.Root>\n              <Popover.Trigger className=\"UserList__more\">\n                +{uniqueCollaboratorsArray.length - maxAvatars + 1}\n              </Popover.Trigger>\n              <Popover.Content\n                style={{\n                  zIndex: 2,\n                  width: \"15rem\",\n                  textAlign: \"left\",\n                }}\n                align=\"end\"\n                sideOffset={10}\n              >\n                <Island padding={2}>\n                  {uniqueCollaboratorsArray.length >= SHOW_COLLABORATORS_FILTER_AT && (\n                    <QuickSearch\n                      placeholder={t(\"quickSearch.placeholder\")}\n                      onChange={setSearchTerm}\n                    />\n                  )}\n                  <ScrollableList\n                    className={\"dropdown-menu UserList__collaborators\"}\n                    placeholder={t(\"userList.empty\")}\n                  >\n                    {/* The list checks for `Children.count()`, hence defensively returning empty list */}\n                    {filteredCollaborators.length > 0\n                      ? [\n                          <div className=\"hint\">{t(\"userList.hint.text\")}</div>,\n                          filteredCollaborators.map(collaborator =>\n                            renderCollaborator({\n                              actionManager,\n                              collaborator,\n                              socketId: collaborator.socketId,\n                              withName: true,\n                              isBeingFollowed: collaborator.socketId === userToFollow,\n                            })\n                          ),\n                        ]\n                      : []}\n                  </ScrollableList>\n                  <Popover.Arrow\n                    width={20}\n                    height={10}\n                    style={{\n                      fill: \"var(--popup-bg-color)\",\n                      filter: \"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)\",\n                    }}\n                  />\n                </Island>\n              </Popover.Content>\n            </Popover.Root>\n          )}\n        </div>\n      </div>\n    );\n  },\n  (prev, next) => {\n    if (\n      prev.collaborators.size !== next.collaborators.size ||\n      prev.mobile !== next.mobile ||\n      prev.className !== next.className ||\n      prev.userToFollow !== next.userToFollow\n    ) {\n      return false;\n    }\n\n    const nextCollaboratorSocketIds = next.collaborators.keys();\n\n    for (const [socketId, collaborator] of prev.collaborators) {\n      const nextCollaborator = next.collaborators.get(socketId);\n      if (\n        !nextCollaborator ||\n        // this checks order of collaborators in the map is the same\n        // as previous render\n        socketId !== nextCollaboratorSocketIds.next().value ||\n        !isShallowEqual(collaborator, nextCollaborator, collaboratorComparatorKeys)\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n);\n","import { useEditorInterface } from \"../App\";\nimport { RadioGroup } from \"../ui/RadioGroup\";\n\ntype Props<T> = {\n  value: T;\n  shortcut?: string;\n  choices: {\n    value: T;\n    label: React.ReactNode;\n    ariaLabel?: string;\n  }[];\n  onChange: (value: T) => void;\n  children: React.ReactNode;\n  name: string;\n};\n\nconst DropdownMenuItemContentRadio = <T,>({\n  value,\n  shortcut,\n  onChange,\n  choices,\n  children,\n  name,\n}: Props<T>) => {\n  const editorInterface = useEditorInterface();\n\n  return (\n    <>\n      <div className=\"dropdown-menu-item-base dropdown-menu-item-bare\">\n        <label className=\"dropdown-menu-item__text\">{children}</label>\n        <RadioGroup name={name} value={value} onChange={onChange} choices={choices} />\n      </div>\n      {shortcut && editorInterface.formFactor !== \"phone\" && (\n        <div className=\"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned\">\n          {shortcut}\n        </div>\n      )}\n    </>\n  );\n};\n\nDropdownMenuItemContentRadio.displayName = \"DropdownMenuItemContentRadio\";\n\nexport default DropdownMenuItemContentRadio;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DefaultItems.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./DefaultItems.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { THEME } from \"@jsondraw/common\";\nimport type { Theme } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport {\n  actionClearCanvas,\n  actionLoadScene,\n  actionSaveToActiveFile,\n  actionShortcuts,\n  actionToggleGridMode,\n  actionToggleObjectsSnapMode,\n  actionToggleSearchMenu,\n  actionToggleStats,\n  actionToggleTheme,\n  actionToggleZenMode,\n} from \"../../actions\";\nimport { actionToggleViewMode } from \"../../actions/actionToggleViewMode\";\nimport { getShortcutFromShortcutName } from \"../../actions/shortcuts\";\nimport { trackEvent } from \"../../analytics\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { useSetAtom } from \"../../editor-jotai\";\nimport { useI18n } from \"../../i18n\";\nimport {\n  useJsonDrawSetAppState,\n  useJsonDrawActionManager,\n  useJsonDrawElements,\n  useAppProps,\n  useApp,\n} from \"../App\";\nimport { openConfirmModal } from \"../OverwriteConfirm/OverwriteConfirmState\";\nimport { activeConfirmDialogAtom } from \"../dialogs/ActiveConfirmDialog\";\nimport DropdownMenuItem from \"../dropdownMenu/DropdownMenuItem\";\nimport DropdownMenuItemCheckbox from \"../dropdownMenu/DropdownMenuItemCheckbox\";\nimport DropdownMenuItemContentRadio from \"../dropdownMenu/DropdownMenuItemContentRadio\";\nimport DropdownMenuItemLink from \"../dropdownMenu/DropdownMenuItemLink\";\nimport DropdownMenuSub from \"../dropdownMenu/DropdownMenuSub\";\nimport { GithubIcon, DiscordIcon, XBrandIcon, settingsIcon } from \"../icons\";\nimport {\n  boltIcon,\n  DeviceDesktopIcon,\n  ExportIcon,\n  ExportImageIcon,\n  HelpIcon,\n  LoadIcon,\n  MoonIcon,\n  save,\n  searchIcon,\n  SunIcon,\n  TrashIcon,\n  usersIcon,\n} from \"../icons\";\nimport Trans from \"../ui/Trans\";\nimport \"./DefaultItems.scss\";\n\nexport const LoadScene = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const elements = useJsonDrawElements();\n\n  if (!actionManager.isActionEnabled(actionLoadScene)) {\n    return null;\n  }\n\n  const handleSelect = async () => {\n    if (\n      !elements.length ||\n      (await openConfirmModal({\n        title: t(\"overwriteConfirm.modal.loadFromFile.title\"),\n        actionLabel: t(\"overwriteConfirm.modal.loadFromFile.button\"),\n        color: \"warning\",\n        description: (\n          <Trans\n            i18nKey=\"overwriteConfirm.modal.loadFromFile.description\"\n            bold={text => <strong>{text}</strong>}\n            br={() => <br />}\n          />\n        ),\n      }))\n    ) {\n      actionManager.executeAction(actionLoadScene);\n    }\n  };\n\n  return (\n    <DropdownMenuItem\n      icon={LoadIcon}\n      onSelect={handleSelect}\n      data-testid=\"load-button\"\n      shortcut={getShortcutFromShortcutName(\"loadScene\")}\n      aria-label={t(\"buttons.load\")}\n    >\n      {t(\"buttons.load\")}\n    </DropdownMenuItem>\n  );\n};\nLoadScene.displayName = \"LoadScene\";\n\nexport const SaveToActiveFile = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n\n  if (!actionManager.isActionEnabled(actionSaveToActiveFile)) {\n    return null;\n  }\n\n  return (\n    <DropdownMenuItem\n      shortcut={getShortcutFromShortcutName(\"saveScene\")}\n      data-testid=\"save-button\"\n      onSelect={() => actionManager.executeAction(actionSaveToActiveFile)}\n      icon={save}\n      aria-label={`${t(\"buttons.save\")}`}\n    >{`${t(\"buttons.save\")}`}</DropdownMenuItem>\n  );\n};\nSaveToActiveFile.displayName = \"SaveToActiveFile\";\n\nexport const SaveAsImage = () => {\n  const setAppState = useJsonDrawSetAppState();\n  const { t } = useI18n();\n  return (\n    <DropdownMenuItem\n      icon={ExportImageIcon}\n      data-testid=\"image-export-button\"\n      onSelect={() => setAppState({ openDialog: { name: \"imageExport\" } })}\n      shortcut={getShortcutFromShortcutName(\"imageExport\")}\n      aria-label={t(\"buttons.exportImage\")}\n    >\n      {t(\"buttons.exportImage\")}\n    </DropdownMenuItem>\n  );\n};\nSaveAsImage.displayName = \"SaveAsImage\";\n\nexport const CommandPalette = (opts?: { className?: string }) => {\n  const setAppState = useJsonDrawSetAppState();\n  const { t } = useI18n();\n\n  return (\n    <DropdownMenuItem\n      icon={boltIcon}\n      data-testid=\"command-palette-button\"\n      onSelect={() => {\n        trackEvent(\"command_palette\", \"open\", \"menu\");\n        setAppState({ openDialog: { name: \"commandPalette\" } });\n      }}\n      shortcut={getShortcutFromShortcutName(\"commandPalette\")}\n      aria-label={t(\"commandPalette.title\")}\n      className={opts?.className}\n    >\n      {t(\"commandPalette.title\")}\n    </DropdownMenuItem>\n  );\n};\nCommandPalette.displayName = \"CommandPalette\";\n\nexport const SearchMenu = (opts?: { className?: string }) => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n\n  return (\n    <DropdownMenuItem\n      icon={searchIcon}\n      data-testid=\"search-menu-button\"\n      onSelect={() => {\n        actionManager.executeAction(actionToggleSearchMenu);\n      }}\n      shortcut={getShortcutFromShortcutName(\"searchMenu\")}\n      aria-label={t(\"search.title\")}\n      className={opts?.className}\n    >\n      {t(\"search.title\")}\n    </DropdownMenuItem>\n  );\n};\nSearchMenu.displayName = \"SearchMenu\";\n\nexport const Help = () => {\n  const { t } = useI18n();\n\n  const actionManager = useJsonDrawActionManager();\n\n  return (\n    <DropdownMenuItem\n      data-testid=\"help-menu-item\"\n      icon={HelpIcon}\n      onSelect={() => actionManager.executeAction(actionShortcuts)}\n      shortcut=\"?\"\n      aria-label={t(\"helpDialog.title\")}\n    >\n      {t(\"helpDialog.title\")}\n    </DropdownMenuItem>\n  );\n};\nHelp.displayName = \"Help\";\n\nexport const ClearCanvas = () => {\n  const { t } = useI18n();\n\n  const setActiveConfirmDialog = useSetAtom(activeConfirmDialogAtom);\n  const actionManager = useJsonDrawActionManager();\n\n  if (!actionManager.isActionEnabled(actionClearCanvas)) {\n    return null;\n  }\n\n  return (\n    <DropdownMenuItem\n      icon={TrashIcon}\n      onSelect={() => setActiveConfirmDialog(\"clearCanvas\")}\n      data-testid=\"clear-canvas-button\"\n      aria-label={t(\"buttons.clearReset\")}\n    >\n      {t(\"buttons.clearReset\")}\n    </DropdownMenuItem>\n  );\n};\nClearCanvas.displayName = \"ClearCanvas\";\n\nexport const ToggleTheme = (\n  props:\n    | {\n        allowSystemTheme: true;\n        theme: Theme | \"system\";\n        onSelect: (theme: Theme | \"system\") => void;\n      }\n    | {\n        allowSystemTheme?: false;\n        onSelect?: (theme: Theme) => void;\n      }\n) => {\n  const { t } = useI18n();\n  const appState = useUIAppState();\n  const actionManager = useJsonDrawActionManager();\n  const shortcut = getShortcutFromShortcutName(\"toggleTheme\");\n\n  if (!actionManager.isActionEnabled(actionToggleTheme)) {\n    return null;\n  }\n\n  if (props?.allowSystemTheme) {\n    return (\n      <DropdownMenuItemContentRadio\n        name=\"theme\"\n        value={props.theme}\n        onChange={(value: Theme | \"system\") => props.onSelect(value)}\n        choices={[\n          {\n            value: THEME.LIGHT,\n            label: SunIcon,\n            ariaLabel: `${t(\"buttons.lightMode\")} - ${shortcut}`,\n          },\n          {\n            value: THEME.DARK,\n            label: MoonIcon,\n            ariaLabel: `${t(\"buttons.darkMode\")} - ${shortcut}`,\n          },\n          {\n            value: \"system\",\n            label: DeviceDesktopIcon,\n            ariaLabel: t(\"buttons.systemMode\"),\n          },\n        ]}\n      >\n        {t(\"labels.theme\")}\n      </DropdownMenuItemContentRadio>\n    );\n  }\n\n  return (\n    <DropdownMenuItem\n      onSelect={event => {\n        // do not close the menu when changing theme\n        event.preventDefault();\n\n        if (props?.onSelect) {\n          props.onSelect(appState.theme === THEME.DARK ? THEME.LIGHT : THEME.DARK);\n        } else {\n          return actionManager.executeAction(actionToggleTheme);\n        }\n      }}\n      icon={appState.theme === THEME.DARK ? SunIcon : MoonIcon}\n      data-testid=\"toggle-dark-mode\"\n      shortcut={shortcut}\n      aria-label={appState.theme === THEME.DARK ? t(\"buttons.lightMode\") : t(\"buttons.darkMode\")}\n    >\n      {appState.theme === THEME.DARK ? t(\"buttons.lightMode\") : t(\"buttons.darkMode\")}\n    </DropdownMenuItem>\n  );\n};\nToggleTheme.displayName = \"ToggleTheme\";\n\nexport const ChangeCanvasBackground = () => {\n  const { t } = useI18n();\n  const appState = useUIAppState();\n  const actionManager = useJsonDrawActionManager();\n  const appProps = useAppProps();\n\n  if (appState.viewModeEnabled || !appProps.UIOptions.canvasActions.changeViewBackgroundColor) {\n    return null;\n  }\n  return (\n    <div style={{ marginTop: \"0.75rem\" }}>\n      <div\n        data-testid=\"canvas-background-label\"\n        style={{\n          fontSize: \"0.875rem\",\n          marginBottom: \"0.25rem\",\n          marginLeft: \"0.5rem\",\n        }}\n      >\n        {t(\"labels.canvasBackground\")}\n      </div>\n      <div style={{ padding: \"0 0.625rem\" }}>\n        {actionManager.renderAction(\"changeViewBackgroundColor\")}\n      </div>\n    </div>\n  );\n};\nChangeCanvasBackground.displayName = \"ChangeCanvasBackground\";\n\nexport const Export = () => {\n  const { t } = useI18n();\n  const setAppState = useJsonDrawSetAppState();\n  return (\n    <DropdownMenuItem\n      icon={ExportIcon}\n      onSelect={() => {\n        setAppState({ openDialog: { name: \"jsonExport\" } });\n      }}\n      data-testid=\"json-export-button\"\n      aria-label={t(\"buttons.export\")}\n    >\n      {t(\"buttons.export\")}\n    </DropdownMenuItem>\n  );\n};\nExport.displayName = \"Export\";\n\nexport const Socials = () => {\n  const { t } = useI18n();\n\n  return (\n    <>\n      <DropdownMenuItemLink\n        icon={GithubIcon}\n        href=\"https://github.com/jsondraw/jsondraw\"\n        aria-label=\"GitHub\"\n      >\n        GitHub\n      </DropdownMenuItemLink>\n      <DropdownMenuItemLink icon={XBrandIcon} href=\"https://x.com/jsondraw\" aria-label=\"X\">\n        {t(\"labels.followUs\")}\n      </DropdownMenuItemLink>\n      <DropdownMenuItemLink\n        icon={DiscordIcon}\n        href=\"https://discord.gg/UexuTaE\"\n        aria-label=\"Discord\"\n      >\n        {t(\"labels.discordChat\")}\n      </DropdownMenuItemLink>\n    </>\n  );\n};\nSocials.displayName = \"Socials\";\n\nexport const LiveCollaborationTrigger = ({\n  onSelect,\n  isCollaborating,\n}: {\n  onSelect: () => void;\n  isCollaborating: boolean;\n}) => {\n  const { t } = useI18n();\n  return (\n    <DropdownMenuItem\n      data-testid=\"collab-button\"\n      icon={usersIcon}\n      className={clsx({\n        \"active-collab\": isCollaborating,\n      })}\n      onSelect={onSelect}\n    >\n      {t(\"labels.liveCollaboration\")}\n    </DropdownMenuItem>\n  );\n};\n\nLiveCollaborationTrigger.displayName = \"LiveCollaborationTrigger\";\n\nconst PreferencesToggleToolLockItem = () => {\n  const { t } = useI18n();\n  const app = useApp();\n  const appState = useUIAppState();\n\n  return (\n    <DropdownMenuItemCheckbox\n      checked={appState.activeTool.locked}\n      shortcut={getShortcutFromShortcutName(\"toolLock\")}\n      onSelect={event => {\n        app.toggleLock();\n        event.preventDefault();\n      }}\n    >\n      {t(\"labels.preferences_toolLock\")}\n    </DropdownMenuItemCheckbox>\n  );\n};\n\nconst PreferencesToggleSnapModeItem = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const appState = useUIAppState();\n  return (\n    <DropdownMenuItemCheckbox\n      checked={appState.objectsSnapModeEnabled}\n      shortcut={getShortcutFromShortcutName(\"objectsSnapMode\")}\n      onSelect={event => {\n        actionManager.executeAction(actionToggleObjectsSnapMode);\n        event.preventDefault();\n      }}\n    >\n      {t(\"buttons.objectsSnapMode\")}\n    </DropdownMenuItemCheckbox>\n  );\n};\n\nexport const PreferencesToggleGridModeItem = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const appState = useUIAppState();\n\n  return (\n    <DropdownMenuItemCheckbox\n      checked={appState.gridModeEnabled}\n      shortcut={getShortcutFromShortcutName(\"gridMode\")}\n      onSelect={event => {\n        actionManager.executeAction(actionToggleGridMode);\n        event.preventDefault();\n      }}\n    >\n      {t(\"labels.toggleGrid\")}\n    </DropdownMenuItemCheckbox>\n  );\n};\n\nexport const PreferencesToggleZenModeItem = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const appState = useUIAppState();\n  return (\n    <DropdownMenuItemCheckbox\n      checked={appState.zenModeEnabled}\n      shortcut={getShortcutFromShortcutName(\"zenMode\")}\n      onSelect={event => {\n        actionManager.executeAction(actionToggleZenMode);\n        event.preventDefault();\n      }}\n    >\n      {t(\"buttons.zenMode\")}\n    </DropdownMenuItemCheckbox>\n  );\n};\n\nconst PreferencesToggleViewModeItem = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const appState = useUIAppState();\n  return (\n    <DropdownMenuItemCheckbox\n      checked={appState.viewModeEnabled}\n      shortcut={getShortcutFromShortcutName(\"viewMode\")}\n      onSelect={event => {\n        actionManager.executeAction(actionToggleViewMode);\n        event.preventDefault();\n      }}\n    >\n      {t(\"labels.viewMode\")}\n    </DropdownMenuItemCheckbox>\n  );\n};\n\nconst PreferencesToggleElementPropertiesItem = () => {\n  const { t } = useI18n();\n  const actionManager = useJsonDrawActionManager();\n  const appState = useUIAppState();\n  return (\n    <DropdownMenuItemCheckbox\n      checked={appState.stats.open}\n      shortcut={getShortcutFromShortcutName(\"stats\")}\n      onSelect={event => {\n        actionManager.executeAction(actionToggleStats);\n        event.preventDefault();\n      }}\n    >\n      {t(\"stats.fullTitle\")}\n    </DropdownMenuItemCheckbox>\n  );\n};\n\nexport const Preferences = ({\n  children,\n  additionalItems,\n}: {\n  children?: React.ReactNode;\n  additionalItems?: React.ReactNode;\n}) => {\n  const { t } = useI18n();\n  return (\n    <DropdownMenuSub>\n      <DropdownMenuSub.Trigger icon={settingsIcon}>\n        {t(\"labels.preferences\")}\n      </DropdownMenuSub.Trigger>\n      <DropdownMenuSub.Content className=\"jsondraw-main-menu-preferences-submenu\">\n        {children || (\n          <>\n            <PreferencesToggleToolLockItem />\n            <PreferencesToggleSnapModeItem />\n            <PreferencesToggleGridModeItem />\n            <PreferencesToggleZenModeItem />\n            <PreferencesToggleViewModeItem />\n            <PreferencesToggleElementPropertiesItem />\n          </>\n        )}\n        {additionalItems}\n      </DropdownMenuSub.Content>\n    </DropdownMenuSub>\n  );\n};\n\nPreferences.ToggleToolLock = PreferencesToggleToolLockItem;\nPreferences.ToggleSnapMode = PreferencesToggleSnapModeItem;\nPreferences.ToggleGridMode = PreferencesToggleGridModeItem;\nPreferences.ToggleZenMode = PreferencesToggleZenModeItem;\nPreferences.ToggleViewMode = PreferencesToggleViewModeItem;\nPreferences.ToggleElementProperties = PreferencesToggleElementPropertiesItem;\n\nPreferences.displayName = \"Preferences\";\n","import React from \"react\";\nimport { composeEventHandlers } from \"@jsondraw/common\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { t } from \"../../i18n\";\nimport { useEditorInterface, useJsonDrawSetAppState } from \"../App\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\nimport DropdownMenuSub from \"../dropdownMenu/DropdownMenuSub\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { HamburgerMenuIcon } from \"../icons\";\nimport { UserList } from \"../user/UserList\";\nimport * as DefaultItems from \"./DefaultItems\";\n\nconst MainMenu = Object.assign(\n  withInternalFallback(\n    \"MainMenu\",\n    ({\n      children,\n      onSelect,\n    }: {\n      children?: React.ReactNode;\n      /**\n       * Called when any menu item is selected (clicked on).\n       */\n      onSelect?: (event: Event) => void;\n    }) => {\n      const { MainMenuTunnel } = useTunnels();\n      const editorInterface = useEditorInterface();\n      const appState = useUIAppState();\n      const setAppState = useJsonDrawSetAppState();\n\n      return (\n        <MainMenuTunnel.In>\n          <DropdownMenu open={appState.openMenu === \"canvas\"}>\n            <DropdownMenu.Trigger\n              onToggle={() => {\n                setAppState({\n                  openMenu: appState.openMenu === \"canvas\" ? null : \"canvas\",\n                  openPopup: null,\n                  openDialog: null,\n                });\n              }}\n              data-testid=\"main-menu-trigger\"\n              className=\"main-menu-trigger\"\n            >\n              {HamburgerMenuIcon}\n            </DropdownMenu.Trigger>\n            <DropdownMenu.Content\n              onClickOutside={() => setAppState({ openMenu: null })}\n              onSelect={composeEventHandlers(onSelect, () => {\n                setAppState({ openMenu: null });\n              })}\n              className=\"main-menu\"\n              align=\"start\"\n            >\n              {children}\n              {editorInterface.formFactor === \"phone\" && appState.collaborators.size > 0 && (\n                <fieldset className=\"UserList-Wrapper\">\n                  <legend>{t(\"labels.collaborators\")}</legend>\n                  <UserList\n                    mobile={true}\n                    collaborators={appState.collaborators}\n                    userToFollow={appState.userToFollow?.socketId || null}\n                  />\n                </fieldset>\n              )}\n            </DropdownMenu.Content>\n          </DropdownMenu>\n        </MainMenuTunnel.In>\n      );\n    }\n  ),\n  {\n    Trigger: DropdownMenu.Trigger,\n    Item: DropdownMenu.Item,\n    ItemLink: DropdownMenu.ItemLink,\n    ItemCustom: DropdownMenu.ItemCustom,\n    Group: DropdownMenu.Group,\n    Separator: DropdownMenu.Separator,\n    Sub: DropdownMenuSub,\n    DefaultItems,\n  }\n);\n\nexport default MainMenu;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./HintViewer.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./HintViewer.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { CANVAS_SEARCH_TAB, DEFAULT_SIDEBAR } from \"@jsondraw/common\";\n\nimport {\n  isFlowchartNodeElement,\n  isImageElement,\n  isLinearElement,\n  isLineElement,\n  isTextBindableContainer,\n  isTextElement,\n} from \"@jsondraw/element\";\n\nimport { isNodeInFlowchart } from \"@jsondraw/element\";\n\nimport type { EditorInterface } from \"@jsondraw/common\";\n\nimport { t } from \"../../i18n\";\nimport { getShortcutKey } from \"../../shortcut\";\nimport { isEraserActive } from \"../../appState\";\nimport { isGridModeEnabled } from \"../../snapping\";\n\nimport \"./HintViewer.scss\";\n\nimport type { AppClassProperties, UIAppState } from \"../../types\";\n\ninterface HintViewerProps {\n  appState: UIAppState;\n  isMobile: boolean;\n  editorInterface: EditorInterface;\n  app: AppClassProperties;\n}\n\nconst getTaggedShortcutKey = (key: string | string[]) =>\n  Array.isArray(key)\n    ? `<kbd>${key.map(getShortcutKey).join(\" + \")}</kbd>`\n    : `<kbd>${getShortcutKey(key)}</kbd>`;\n\nconst getHints = ({\n  appState,\n  isMobile,\n  editorInterface,\n  app,\n}: HintViewerProps): null | string | string[] => {\n  const { activeTool, isResizing, isRotating, lastPointerDownWith } = appState;\n  const multiMode = appState.multiElement !== null;\n\n  if (\n    appState.openSidebar?.name === DEFAULT_SIDEBAR.name &&\n    appState.openSidebar.tab === CANVAS_SEARCH_TAB &&\n    appState.searchMatches?.matches.length\n  ) {\n    return t(\"hints.dismissSearch\", {\n      shortcut: getTaggedShortcutKey(\"Escape\"),\n    });\n  }\n\n  if (appState.openSidebar && !editorInterface.canFitSidebar) {\n    return null;\n  }\n\n  if (isEraserActive(appState)) {\n    return t(\"hints.eraserRevert\", {\n      shortcut: getTaggedShortcutKey(\"Alt\"),\n    });\n  }\n\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  // creating or dragging arrow point\n  if (\n    appState.selectedLinearElement?.isDragging &&\n    selectedElements[0]?.type === \"arrow\"\n  ) {\n    return t(\"hints.arrowBindModifiers\", {\n      shortcut_1: getTaggedShortcutKey(\"Ctrl\"),\n      shortcut_2: getTaggedShortcutKey(\"Alt\"),\n    });\n  }\n\n  if (activeTool.type === \"arrow\" || activeTool.type === \"line\") {\n    if (multiMode) {\n      return t(\"hints.linearElementMulti\", {\n        shortcut_1: getTaggedShortcutKey(\"Escape\"),\n        shortcut_2: getTaggedShortcutKey(\"Enter\"),\n      });\n    }\n    if (activeTool.type === \"arrow\") {\n      return t(\"hints.arrowTool\", {\n        shortcut: getTaggedShortcutKey(\"A\"),\n      });\n    }\n    return t(\"hints.linearElement\");\n  }\n\n  if (activeTool.type === \"freedraw\") {\n    return t(\"hints.freeDraw\");\n  }\n\n  if (activeTool.type === \"text\") {\n    return t(\"hints.text\");\n  }\n\n  if (activeTool.type === \"embeddable\") {\n    return t(\"hints.embeddable\");\n  }\n\n  if (\n    isResizing &&\n    lastPointerDownWith === \"mouse\" &&\n    selectedElements.length === 1\n  ) {\n    const targetElement = selectedElements[0];\n    if (isLinearElement(targetElement) && targetElement.points.length === 2) {\n      return t(\"hints.lockAngle\", {\n        shortcut: getTaggedShortcutKey(\"Shift\"),\n      });\n    }\n    return isImageElement(targetElement)\n      ? t(\"hints.resizeImage\", {\n          shortcut_1: getTaggedShortcutKey(\"Shift\"),\n          shortcut_2: getTaggedShortcutKey(\"Alt\"),\n        })\n      : t(\"hints.resize\", {\n          shortcut_1: getTaggedShortcutKey(\"Shift\"),\n          shortcut_2: getTaggedShortcutKey(\"Alt\"),\n        });\n  }\n\n  if (isRotating && lastPointerDownWith === \"mouse\") {\n    return t(\"hints.rotate\", {\n      shortcut: getTaggedShortcutKey(\"Shift\"),\n    });\n  }\n\n  if (selectedElements.length === 1 && isTextElement(selectedElements[0])) {\n    return t(\"hints.text_selected\", {\n      shortcut: getTaggedShortcutKey(\"Enter\"),\n    });\n  }\n\n  if (appState.editingTextElement) {\n    return t(\"hints.text_editing\", {\n      shortcut_1: getTaggedShortcutKey(\"Escape\"),\n      shortcut_2: getTaggedShortcutKey([\"CtrlOrCmd\", \"Enter\"]),\n    });\n  }\n\n  if (appState.croppingElementId) {\n    return t(\"hints.leaveCropEditor\", {\n      shortcut_1: getTaggedShortcutKey(\"Enter\"),\n      shortcut_2: getTaggedShortcutKey(\"Escape\"),\n    });\n  }\n\n  if (selectedElements.length === 1 && isImageElement(selectedElements[0])) {\n    return t(\"hints.enterCropEditor\", {\n      shortcut: getTaggedShortcutKey(\"Enter\"),\n    });\n  }\n\n  if (activeTool.type === \"selection\") {\n    if (\n      appState.selectionElement &&\n      !selectedElements.length &&\n      !appState.editingTextElement &&\n      !appState.selectedLinearElement?.isEditing\n    ) {\n      return t(\"hints.deepBoxSelect\", {\n        shortcut: getTaggedShortcutKey(\"CtrlOrCmd\"),\n      });\n    }\n\n    if (isGridModeEnabled(app) && appState.selectedElementsAreBeingDragged) {\n      return t(\"hints.disableSnapping\", {\n        shortcut: getTaggedShortcutKey(\"CtrlOrCmd\"),\n      });\n    }\n\n    if (!selectedElements.length && !isMobile) {\n      return t(\"hints.canvasPanning\", {\n        shortcut_1: getTaggedShortcutKey(t(\"keys.mmb\")),\n        shortcut_2: getTaggedShortcutKey(\"Space\"),\n      });\n    }\n\n    if (selectedElements.length === 1) {\n      if (isLinearElement(selectedElements[0])) {\n        if (appState.selectedLinearElement?.isEditing) {\n          return appState.selectedLinearElement.selectedPointsIndices\n            ? t(\"hints.lineEditor_pointSelected\", {\n                shortcut_1: getTaggedShortcutKey(\"Delete\"),\n                shortcut_2: getTaggedShortcutKey([\"CtrlOrCmd\", \"D\"]),\n              })\n            : t(\"hints.lineEditor_nothingSelected\", {\n                shortcut_1: getTaggedShortcutKey(\"Shift\"),\n                shortcut_2: getTaggedShortcutKey(\"Alt\"),\n              });\n        }\n        return isLineElement(selectedElements[0])\n          ? t(\"hints.lineEditor_line_info\", {\n              shortcut: getTaggedShortcutKey(\"Enter\"),\n            })\n          : t(\"hints.lineEditor_info\", {\n              shortcut_1: getTaggedShortcutKey(\"CtrlOrCmd\"),\n              shortcut_2: getTaggedShortcutKey([\"CtrlOrCmd\", \"Enter\"]),\n            });\n      }\n      if (\n        !appState.newElement &&\n        !appState.selectedElementsAreBeingDragged &&\n        isTextBindableContainer(selectedElements[0])\n      ) {\n        const bindTextToElement = t(\"hints.bindTextToElement\", {\n          shortcut: getTaggedShortcutKey(\"Enter\"),\n        });\n        const createFlowchart = t(\"hints.createFlowchart\", {\n          shortcut: getTaggedShortcutKey([\"CtrlOrCmd\", \"\"]),\n        });\n        if (isFlowchartNodeElement(selectedElements[0])) {\n          if (\n            isNodeInFlowchart(\n              selectedElements[0],\n              app.scene.getNonDeletedElementsMap(),\n            )\n          ) {\n            return [bindTextToElement, createFlowchart];\n          }\n\n          return [bindTextToElement, createFlowchart];\n        }\n\n        return bindTextToElement;\n      }\n    }\n  }\n\n  return null;\n};\n\nexport const HintViewer = ({\n  appState,\n  isMobile,\n  editorInterface,\n  app,\n}: HintViewerProps) => {\n  const hints = getHints({\n    appState,\n    isMobile,\n    editorInterface,\n    app,\n  });\n\n  if (!hints) {\n    return null;\n  }\n\n  const hint = Array.isArray(hints)\n    ? hints.map((hint) => hint.replace(/\\. ?$/, \"\")).join(\", \")\n    : hints;\n\n  const hintJSX = hint.split(/(<kbd>[^<]+<\\/kbd>)/g).map((part, index) => {\n    if (index % 2 === 1) {\n      const shortcutMatch =\n        part[0] === \"<\" && part.match(/^<kbd>([^<]+)<\\/kbd>$/);\n      return <kbd key={index}>{shortcutMatch ? shortcutMatch[1] : part}</kbd>;\n    }\n    return part;\n  });\n\n  return (\n    <div className=\"HintViewer\">\n      <span>{hintJSX}</span>\n    </div>\n  );\n};\n","import clsx from \"clsx\";\n\nimport { KEYS } from \"@jsondraw/common\";\n\nimport { ToolButton } from \"./ToolButton\";\nimport { handIcon } from \"../icons\";\n\nimport \"./ToolIcon.scss\";\n\ntype LockIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n};\n\nexport const HandButton = (props: LockIconProps) => {\n  return (\n    <ToolButton\n      className={clsx(\"Shape\", { fillable: false, active: props.checked })}\n      type=\"radio\"\n      icon={handIcon}\n      name=\"editor-current-shape\"\n      checked={props.checked}\n      title={`${props.title}  H`}\n      keyBindingLabel={!props.isMobile ? KEYS.H.toLocaleUpperCase() : undefined}\n      aria-label={`${props.title}  H`}\n      aria-keyshortcuts={KEYS.H}\n      data-testid={`toolbar-hand`}\n      onChange={() => props.onChange?.()}\n    />\n  );\n};\n","import clsx from \"clsx\";\n\nimport \"./ToolIcon.scss\";\n\nimport { laserPointerToolIcon } from \"../icons\";\n\nimport type { ToolButtonSize } from \"./ToolButton\";\n\ntype LaserPointerIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n};\n\nconst DEFAULT_SIZE: ToolButtonSize = \"small\";\n\nexport const LaserPointerButton = (props: LaserPointerIconProps) => {\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__LaserPointer\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title}`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n        data-testid=\"toolbar-LaserPointer\"\n      />\n      <div className=\"ToolIcon__icon\">{laserPointerToolIcon}</div>\n    </label>\n  );\n};\n","import clsx from \"clsx\";\n\nimport \"./ToolIcon.scss\";\n\nimport { LockedIcon, UnlockedIcon } from \"../icons\";\n\nimport type { ToolButtonSize } from \"./ToolButton\";\n\ntype LockIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n};\n\nconst DEFAULT_SIZE: ToolButtonSize = \"medium\";\n\nconst ICONS = {\n  CHECKED: LockedIcon,\n  UNCHECKED: UnlockedIcon,\n};\n\nexport const LockButton = (props: LockIconProps) => {\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__lock\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title}  Q`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n        data-testid=\"toolbar-lock\"\n      />\n      <div className=\"ToolIcon__icon\">\n        {props.checked ? ICONS.CHECKED : ICONS.UNCHECKED}\n      </div>\n    </label>\n  );\n};\n","import clsx from \"clsx\";\nimport { PenModeIcon } from \"../icons\";\nimport type { ToolButtonSize } from \"./ToolButton\";\nimport \"./ToolIcon.scss\";\n\ntype PenModeIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  zenModeEnabled?: boolean;\n  isMobile?: boolean;\n  penDetected: boolean;\n};\n\nconst DEFAULT_SIZE: ToolButtonSize = \"medium\";\n\nexport const PenModeButton = (props: PenModeIconProps) => {\n  if (!props.penDetected) {\n    return null;\n  }\n\n  return (\n    <label\n      className={clsx(\"ToolIcon ToolIcon__penMode\", `ToolIcon_size_${DEFAULT_SIZE}`, {\n        \"is-mobile\": props.isMobile,\n      })}\n      title={`${props.title}`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n      />\n      <div className=\"ToolIcon__icon\">{PenModeIcon}</div>\n    </label>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Toolbar.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Toolbar.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useState, useEffect } from \"react\";\nimport React from \"react\";\nimport { THEME } from \"@jsondraw/common\";\nimport type { Theme } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport { t } from \"../../i18n\";\nimport HamsterLoader from \"./HamsterLoader\";\n\nexport const LoadingMessage: React.FC<{ delay?: number; theme?: Theme }> = ({ delay, theme }) => {\n  const [isWaiting, setIsWaiting] = React.useState(!!delay);\n\n  React.useEffect(() => {\n    if (!delay) {\n      return;\n    }\n    const timer = setTimeout(() => {\n      setIsWaiting(false);\n    }, delay);\n    return () => clearTimeout(timer);\n  }, [delay]);\n\n  if (isWaiting) {\n    return null;\n  }\n\n  return (\n    <div\n      className={clsx(\"LoadingMessage\", {\n        \"LoadingMessage--dark\": theme === THEME.DARK,\n      })}\n    >\n      <div>\n        <HamsterLoader />\n      </div>\n      <div className=\"LoadingMessage-text\">{t(\"labels.loadingScene\")}</div>\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./SearchMenu.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./SearchMenu.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Fragment, memo, useEffect, useMemo, useRef, useState } from \"react\";\nimport { CLASSES, EVENT, FONT_FAMILY, FRAME_STYLE, getLineHeight } from \"@jsondraw/common\";\nimport { KEYS, randomInteger, addEventListener, getFontString } from \"@jsondraw/common\";\nimport { isElementCompletelyInViewport } from \"@jsondraw/element\";\nimport { measureText } from \"@jsondraw/element\";\nimport { newTextElement } from \"@jsondraw/element\";\nimport { isTextElement, isFrameLikeElement } from \"@jsondraw/element\";\nimport { getDefaultFrameName } from \"@jsondraw/element/frame\";\nimport type { JsonDrawFrameLikeElement, JsonDrawTextElement } from \"@jsondraw/element/types\";\nimport { round } from \"@jsondraw/math\";\nimport clsx from \"clsx\";\nimport debounce from \"lodash.debounce\";\nimport { atom, useAtom } from \"../../editor-jotai\";\nimport { useStable } from \"../../hooks/useStable\";\nimport { t } from \"../../i18n\";\nimport type { AppClassProperties, SearchMatch } from \"../../types\";\nimport { useApp, useJsonDrawSetAppState } from \"../App\";\nimport { collapseDownIcon, upIcon, searchIcon, frameToolIcon, TextIcon } from \"../icons\";\nimport { Button } from \"../ui/Button\";\nimport { TextField } from \"../ui/TextField\";\nimport \"./SearchMenu.scss\";\n\nconst searchQueryAtom = atom<string>(\"\");\nexport const searchItemInFocusAtom = atom<number | null>(null);\n\nconst SEARCH_DEBOUNCE = 350;\n\ntype SearchMatchItem = {\n  element: JsonDrawTextElement | JsonDrawFrameLikeElement;\n  searchQuery: SearchQuery;\n  index: number;\n  preview: {\n    indexInSearchQuery: number;\n    previewText: string;\n    moreBefore: boolean;\n    moreAfter: boolean;\n  };\n  matchedLines: SearchMatch[\"matchedLines\"];\n};\n\ntype SearchMatches = {\n  nonce: number | null;\n  items: SearchMatchItem[];\n};\n\ntype SearchQuery = string & { _brand: \"SearchQuery\" };\n\nexport const SearchMenu = () => {\n  const app = useApp();\n  const setAppState = useJsonDrawSetAppState();\n\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  const [inputValue, setInputValue] = useAtom(searchQueryAtom);\n  const searchQuery = inputValue.trim() as SearchQuery;\n\n  const [isSearching, setIsSearching] = useState(false);\n\n  const [searchMatches, setSearchMatches] = useState<SearchMatches>({\n    nonce: null,\n    items: [],\n  });\n  const searchedQueryRef = useRef<SearchQuery | null>(null);\n  const lastSceneNonceRef = useRef<number | undefined>(undefined);\n\n  const [focusIndex, setFocusIndex] = useAtom(searchItemInFocusAtom);\n  const elementsMap = app.scene.getNonDeletedElementsMap();\n\n  useEffect(() => {\n    if (isSearching) {\n      return;\n    }\n    if (\n      searchQuery !== searchedQueryRef.current ||\n      app.scene.getSceneNonce() !== lastSceneNonceRef.current\n    ) {\n      searchedQueryRef.current = null;\n      handleSearch(searchQuery, app, (matchItems, index) => {\n        setSearchMatches({\n          nonce: randomInteger(),\n          items: matchItems,\n        });\n        searchedQueryRef.current = searchQuery;\n        lastSceneNonceRef.current = app.scene.getSceneNonce();\n        setAppState({\n          searchMatches: matchItems.length\n            ? {\n                focusedId: null,\n                matches: matchItems.map(searchMatch => ({\n                  id: searchMatch.element.id,\n                  focus: false,\n                  matchedLines: searchMatch.matchedLines,\n                })),\n              }\n            : null,\n        });\n      });\n    }\n  }, [isSearching, searchQuery, elementsMap, app, setAppState, setFocusIndex, lastSceneNonceRef]);\n\n  const goToNextItem = () => {\n    if (searchMatches.items.length > 0) {\n      setFocusIndex(focusIndex => {\n        if (focusIndex === null) {\n          return 0;\n        }\n\n        return (focusIndex + 1) % searchMatches.items.length;\n      });\n    }\n  };\n\n  const goToPreviousItem = () => {\n    if (searchMatches.items.length > 0) {\n      setFocusIndex(focusIndex => {\n        if (focusIndex === null) {\n          return 0;\n        }\n\n        return focusIndex - 1 < 0 ? searchMatches.items.length - 1 : focusIndex - 1;\n      });\n    }\n  };\n\n  useEffect(() => {\n    setAppState(state => {\n      if (!state.searchMatches) {\n        return null;\n      }\n\n      const focusedId =\n        focusIndex !== null ? state.searchMatches?.matches[focusIndex]?.id || null : null;\n\n      return {\n        searchMatches: {\n          focusedId,\n          matches: state.searchMatches.matches.map((match, index) => {\n            if (index === focusIndex) {\n              return { ...match, focus: true };\n            }\n            return { ...match, focus: false };\n          }),\n        },\n      };\n    });\n  }, [focusIndex, setAppState]);\n\n  useEffect(() => {\n    if (searchMatches.items.length > 0 && focusIndex !== null) {\n      const match = searchMatches.items[focusIndex];\n\n      if (match) {\n        const zoomValue = app.state.zoom.value;\n\n        const matchAsElement = newTextElement({\n          text: match.searchQuery,\n          x: match.element.x + (match.matchedLines[0]?.offsetX ?? 0),\n          y: match.element.y + (match.matchedLines[0]?.offsetY ?? 0),\n          width: match.matchedLines[0]?.width,\n          height: match.matchedLines[0]?.height,\n          fontSize: isFrameLikeElement(match.element)\n            ? FRAME_STYLE.nameFontSize\n            : match.element.fontSize,\n          fontFamily: isFrameLikeElement(match.element)\n            ? FONT_FAMILY.Assistant\n            : match.element.fontFamily,\n        });\n\n        const FONT_SIZE_LEGIBILITY_THRESHOLD = 14;\n\n        const fontSize = matchAsElement.fontSize;\n        const isTextTiny = fontSize * zoomValue < FONT_SIZE_LEGIBILITY_THRESHOLD;\n\n        if (\n          !isElementCompletelyInViewport(\n            [matchAsElement],\n            app.canvas.width / window.devicePixelRatio,\n            app.canvas.height / window.devicePixelRatio,\n            {\n              offsetLeft: app.state.offsetLeft,\n              offsetTop: app.state.offsetTop,\n              scrollX: app.state.scrollX,\n              scrollY: app.state.scrollY,\n              zoom: app.state.zoom,\n            },\n            app.scene.getNonDeletedElementsMap(),\n            app.getEditorUIOffsets()\n          ) ||\n          isTextTiny\n        ) {\n          let zoomOptions: Parameters<AppClassProperties[\"scrollToContent\"]>[1];\n\n          if (isTextTiny) {\n            if (fontSize >= FONT_SIZE_LEGIBILITY_THRESHOLD) {\n              zoomOptions = { fitToContent: true };\n            } else {\n              zoomOptions = {\n                fitToViewport: true,\n                // calculate zoom level to make the fontSize ~equal to FONT_SIZE_THRESHOLD, rounded to nearest 10%\n                maxZoom: round(FONT_SIZE_LEGIBILITY_THRESHOLD / fontSize, 1),\n              };\n            }\n          } else {\n            zoomOptions = { fitToContent: true };\n          }\n\n          app.scrollToContent(matchAsElement, {\n            animate: true,\n            duration: 300,\n            ...zoomOptions,\n            canvasOffsets: app.getEditorUIOffsets(),\n          });\n        }\n      }\n    }\n  }, [focusIndex, searchMatches, app]);\n\n  useEffect(() => {\n    return () => {\n      setFocusIndex(null);\n      searchedQueryRef.current = null;\n      lastSceneNonceRef.current = undefined;\n      setAppState({\n        searchMatches: null,\n      });\n      setIsSearching(false);\n    };\n  }, [setAppState, setFocusIndex]);\n\n  const stableState = useStable({\n    goToNextItem,\n    goToPreviousItem,\n    searchMatches,\n  });\n\n  useEffect(() => {\n    const eventHandler = (event: KeyboardEvent) => {\n      if (event.key === KEYS.ESCAPE && !app.state.openDialog && !app.state.openPopup) {\n        event.preventDefault();\n        event.stopPropagation();\n        setAppState({\n          openSidebar: null,\n        });\n        return;\n      }\n\n      if (event[KEYS.CTRL_OR_CMD] && event.key === KEYS.F) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (app.state.openDialog) {\n          return;\n        }\n\n        if (!searchInputRef.current?.matches(\":focus\")) {\n          if (app.state.openDialog) {\n            setAppState({\n              openDialog: null,\n            });\n          }\n          searchInputRef.current?.focus();\n          searchInputRef.current?.select();\n        }\n      }\n\n      if (event.target instanceof HTMLElement && event.target.closest(\".layer-ui__search\")) {\n        if (stableState.searchMatches.items.length) {\n          if (event.key === KEYS.ENTER) {\n            event.stopPropagation();\n            stableState.goToNextItem();\n          }\n\n          if (event.key === KEYS.ARROW_UP) {\n            event.stopPropagation();\n            stableState.goToPreviousItem();\n          } else if (event.key === KEYS.ARROW_DOWN) {\n            event.stopPropagation();\n            stableState.goToNextItem();\n          }\n        }\n      }\n    };\n\n    // `capture` needed to prevent firing on initial open from App.tsx,\n    // as well as to handle events before App ones\n    return addEventListener(window, EVENT.KEYDOWN, eventHandler, {\n      capture: true,\n      passive: false,\n    });\n  }, [setAppState, stableState, app]);\n\n  const matchCount = `${searchMatches.items.length} ${\n    searchMatches.items.length === 1 ? t(\"search.singleResult\") : t(\"search.multipleResults\")\n  }`;\n\n  return (\n    <div className=\"layer-ui__search\">\n      <div className=\"layer-ui__search-header\">\n        <TextField\n          className={CLASSES.SEARCH_MENU_INPUT_WRAPPER}\n          value={inputValue}\n          ref={searchInputRef}\n          placeholder={t(\"search.placeholder\")}\n          icon={searchIcon}\n          onChange={value => {\n            setInputValue(value);\n            setIsSearching(true);\n            const searchQuery = value.trim() as SearchQuery;\n            handleSearch(searchQuery, app, (matchItems, index) => {\n              setSearchMatches({\n                nonce: randomInteger(),\n                items: matchItems,\n              });\n              setFocusIndex(index);\n              searchedQueryRef.current = searchQuery;\n              lastSceneNonceRef.current = app.scene.getSceneNonce();\n              setAppState({\n                searchMatches: matchItems.length\n                  ? {\n                      focusedId: null,\n                      matches: matchItems.map(searchMatch => ({\n                        id: searchMatch.element.id,\n                        focus: false,\n                        matchedLines: searchMatch.matchedLines,\n                      })),\n                    }\n                  : null,\n              });\n\n              setIsSearching(false);\n            });\n          }}\n          selectOnRender\n        />\n      </div>\n\n      <div className=\"layer-ui__search-count\">\n        {searchMatches.items.length > 0 && (\n          <>\n            {focusIndex !== null && focusIndex > -1 ? (\n              <div>\n                {focusIndex + 1} / {matchCount}\n              </div>\n            ) : (\n              <div>{matchCount}</div>\n            )}\n            <div className=\"result-nav\">\n              <Button\n                onSelect={() => {\n                  goToNextItem();\n                }}\n                className=\"result-nav-btn\"\n              >\n                {collapseDownIcon}\n              </Button>\n              <Button\n                onSelect={() => {\n                  goToPreviousItem();\n                }}\n                className=\"result-nav-btn\"\n              >\n                {upIcon}\n              </Button>\n            </div>\n          </>\n        )}\n\n        {searchMatches.items.length === 0 && searchQuery && searchedQueryRef.current && (\n          <div style={{ margin: \"1rem auto\" }}>{t(\"search.noMatch\")}</div>\n        )}\n      </div>\n\n      <MatchList\n        matches={searchMatches}\n        onItemClick={setFocusIndex}\n        focusIndex={focusIndex}\n        searchQuery={searchQuery}\n      />\n    </div>\n  );\n};\n\nconst ListItem = (props: {\n  preview: SearchMatchItem[\"preview\"];\n  searchQuery: SearchQuery;\n  highlighted: boolean;\n  onClick?: () => void;\n}) => {\n  const preview = [\n    props.preview.moreBefore ? \"...\" : \"\",\n    props.preview.previewText.slice(0, props.preview.indexInSearchQuery),\n    props.preview.previewText.slice(\n      props.preview.indexInSearchQuery,\n      props.preview.indexInSearchQuery + props.searchQuery.length\n    ),\n    props.preview.previewText.slice(props.preview.indexInSearchQuery + props.searchQuery.length),\n    props.preview.moreAfter ? \"...\" : \"\",\n  ];\n\n  return (\n    <div\n      tabIndex={-1}\n      className={clsx(\"layer-ui__result-item\", {\n        active: props.highlighted,\n      })}\n      onClick={props.onClick}\n      ref={ref => {\n        if (props.highlighted) {\n          ref?.scrollIntoView({ behavior: \"auto\", block: \"nearest\" });\n        }\n      }}\n    >\n      <div className=\"preview-text\">\n        {preview.flatMap((text, idx) => (\n          <Fragment key={idx}>{idx === 2 ? <b>{text}</b> : text}</Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n\ninterface MatchListProps {\n  matches: SearchMatches;\n  onItemClick: (index: number) => void;\n  focusIndex: number | null;\n  searchQuery: SearchQuery;\n}\n\nconst MatchListBase = (props: MatchListProps) => {\n  const frameNameMatches = useMemo(\n    () => props.matches.items.filter(match => isFrameLikeElement(match.element)),\n    [props.matches]\n  );\n\n  const textMatches = useMemo(\n    () => props.matches.items.filter(match => isTextElement(match.element)),\n    [props.matches]\n  );\n\n  return (\n    <div>\n      {frameNameMatches.length > 0 && (\n        <div className=\"layer-ui__search-result-container\">\n          <div className=\"layer-ui__search-result-title\">\n            <div className=\"title-icon\">{frameToolIcon}</div>\n            <div>{t(\"search.frames\")}</div>\n          </div>\n          {frameNameMatches.map((searchMatch, index) => (\n            <ListItem\n              key={searchMatch.element.id + searchMatch.index}\n              searchQuery={props.searchQuery}\n              preview={searchMatch.preview}\n              highlighted={index === props.focusIndex}\n              onClick={() => props.onItemClick(index)}\n            />\n          ))}\n\n          {textMatches.length > 0 && <div className=\"layer-ui__divider\" />}\n        </div>\n      )}\n\n      {textMatches.length > 0 && (\n        <div className=\"layer-ui__search-result-container\">\n          <div className=\"layer-ui__search-result-title\">\n            <div className=\"title-icon\">{TextIcon}</div>\n            <div>{t(\"search.texts\")}</div>\n          </div>\n          {textMatches.map((searchMatch, index) => (\n            <ListItem\n              key={searchMatch.element.id + searchMatch.index}\n              searchQuery={props.searchQuery}\n              preview={searchMatch.preview}\n              highlighted={index + frameNameMatches.length === props.focusIndex}\n              onClick={() => props.onItemClick(index + frameNameMatches.length)}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst areEqual = (prevProps: MatchListProps, nextProps: MatchListProps) => {\n  return (\n    prevProps.matches.nonce === nextProps.matches.nonce &&\n    prevProps.focusIndex === nextProps.focusIndex\n  );\n};\n\nconst MatchList = memo(MatchListBase, areEqual);\n\nconst getMatchPreview = (text: string, index: number, searchQuery: SearchQuery) => {\n  const WORDS_BEFORE = 2;\n  const WORDS_AFTER = 5;\n\n  const substrBeforeQuery = text.slice(0, index);\n  const wordsBeforeQuery = substrBeforeQuery.split(/\\s+/);\n  // text = \"small\", query = \"mall\", not complete before\n  // text = \"small\", query = \"smal\", complete before\n  const isQueryCompleteBefore = substrBeforeQuery.endsWith(\" \");\n  const startWordIndex =\n    wordsBeforeQuery.length - WORDS_BEFORE - 1 - (isQueryCompleteBefore ? 0 : 1);\n  let wordsBeforeAsString =\n    wordsBeforeQuery.slice(startWordIndex <= 0 ? 0 : startWordIndex).join(\" \") +\n    (isQueryCompleteBefore ? \" \" : \"\");\n\n  const MAX_ALLOWED_CHARS = 20;\n\n  wordsBeforeAsString =\n    wordsBeforeAsString.length > MAX_ALLOWED_CHARS\n      ? wordsBeforeAsString.slice(-MAX_ALLOWED_CHARS)\n      : wordsBeforeAsString;\n\n  const substrAfterQuery = text.slice(index + searchQuery.length);\n  const wordsAfter = substrAfterQuery.split(/\\s+/);\n  // text = \"small\", query = \"mall\", complete after\n  // text = \"small\", query = \"smal\", not complete after\n  const isQueryCompleteAfter = !substrAfterQuery.startsWith(\" \");\n  const numberOfWordsToTake = isQueryCompleteAfter ? WORDS_AFTER + 1 : WORDS_AFTER;\n  const wordsAfterAsString =\n    (isQueryCompleteAfter ? \"\" : \" \") + wordsAfter.slice(0, numberOfWordsToTake).join(\" \");\n\n  return {\n    indexInSearchQuery: wordsBeforeAsString.length,\n    previewText: wordsBeforeAsString + searchQuery + wordsAfterAsString,\n    moreBefore: startWordIndex > 0,\n    moreAfter: wordsAfter.length > numberOfWordsToTake,\n  };\n};\n\nconst normalizeWrappedText = (wrappedText: string, originalText: string): string => {\n  const wrappedLines = wrappedText.split(\"\\n\");\n  const normalizedLines: string[] = [];\n  let originalIndex = 0;\n\n  for (let i = 0; i < wrappedLines.length; i++) {\n    let currentLine = wrappedLines[i];\n    const nextLine = wrappedLines[i + 1];\n\n    if (nextLine) {\n      const nextLineIndexInOriginal = originalText.indexOf(nextLine, originalIndex);\n\n      if (nextLineIndexInOriginal > currentLine.length + originalIndex) {\n        let j = nextLineIndexInOriginal - (currentLine.length + originalIndex);\n\n        while (j > 0) {\n          currentLine += \" \";\n          j--;\n        }\n      }\n    }\n\n    normalizedLines.push(currentLine);\n    originalIndex = originalIndex + currentLine.length;\n  }\n\n  return normalizedLines.join(\"\\n\");\n};\n\nconst getMatchedLines = (\n  textElement: JsonDrawTextElement,\n  searchQuery: SearchQuery,\n  index: number\n) => {\n  const normalizedText = normalizeWrappedText(textElement.text, textElement.originalText);\n\n  const lines = normalizedText.split(\"\\n\");\n\n  const lineIndexRanges = [];\n  let currentIndex = 0;\n  let lineNumber = 0;\n\n  for (const line of lines) {\n    const startIndex = currentIndex;\n    const endIndex = startIndex + line.length - 1;\n\n    lineIndexRanges.push({\n      line,\n      startIndex,\n      endIndex,\n      lineNumber,\n    });\n\n    // Move to the next line's start index\n    currentIndex = endIndex + 1;\n    lineNumber++;\n  }\n\n  let startIndex = index;\n  let remainingQuery = textElement.originalText.slice(index, index + searchQuery.length);\n  const matchedLines: SearchMatch[\"matchedLines\"] = [];\n\n  for (const lineIndexRange of lineIndexRanges) {\n    if (remainingQuery === \"\") {\n      break;\n    }\n\n    if (startIndex >= lineIndexRange.startIndex && startIndex <= lineIndexRange.endIndex) {\n      const matchCapacity = lineIndexRange.endIndex + 1 - startIndex;\n      const textToStart = lineIndexRange.line.slice(0, startIndex - lineIndexRange.startIndex);\n\n      const matchedWord = remainingQuery.slice(0, matchCapacity);\n      remainingQuery = remainingQuery.slice(matchCapacity);\n\n      const offset = measureText(textToStart, getFontString(textElement), textElement.lineHeight);\n\n      // measureText returns a non-zero width for the empty string\n      // which is not what we're after here, hence the check and the correction\n      if (textToStart === \"\") {\n        offset.width = 0;\n      }\n\n      if (textElement.textAlign !== \"left\" && lineIndexRange.line.length > 0) {\n        const lineLength = measureText(\n          lineIndexRange.line,\n          getFontString(textElement),\n          textElement.lineHeight\n        );\n\n        const spaceToStart =\n          textElement.textAlign === \"center\"\n            ? (textElement.width - lineLength.width) / 2\n            : textElement.width - lineLength.width;\n        offset.width += spaceToStart;\n      }\n\n      const { width, height } = measureText(\n        matchedWord,\n        getFontString(textElement),\n        textElement.lineHeight\n      );\n\n      const offsetX = offset.width;\n      const offsetY = lineIndexRange.lineNumber * offset.height;\n\n      matchedLines.push({\n        offsetX,\n        offsetY,\n        width,\n        height,\n        showOnCanvas: true,\n      });\n\n      startIndex += matchCapacity;\n    }\n  }\n\n  return matchedLines;\n};\n\nconst getMatchInFrame = (\n  frame: JsonDrawFrameLikeElement,\n  searchQuery: SearchQuery,\n  index: number,\n  zoomValue: number\n): SearchMatch[\"matchedLines\"] => {\n  const text = frame.name ?? getDefaultFrameName(frame);\n  const matchedText = text.slice(index, index + searchQuery.length);\n\n  const prefixText = text.slice(0, index);\n  const font = getFontString({\n    fontSize: FRAME_STYLE.nameFontSize,\n    fontFamily: FONT_FAMILY.Assistant,\n  });\n\n  const lineHeight = getLineHeight(FONT_FAMILY.Assistant);\n\n  const offset = measureText(prefixText, font, lineHeight);\n\n  // Correct non-zero width for empty string\n  if (prefixText === \"\") {\n    offset.width = 0;\n  }\n\n  const matchedMetrics = measureText(matchedText, font, lineHeight);\n\n  const offsetX = offset.width;\n  const offsetY = -offset.height - FRAME_STYLE.strokeWidth;\n  const width = matchedMetrics.width;\n\n  return [\n    {\n      offsetX,\n      offsetY,\n      width,\n      height: matchedMetrics.height,\n      showOnCanvas: offsetX + width <= frame.width * zoomValue,\n    },\n  ];\n};\n\nconst escapeSpecialCharacters = (string: string) => {\n  return string.replace(/[.*+?^${}()|[\\]\\\\-]/g, \"\\\\$&\");\n};\n\nconst handleSearch = debounce(\n  (\n    searchQuery: SearchQuery,\n    app: AppClassProperties,\n    cb: (matchItems: SearchMatchItem[], focusIndex: number | null) => void\n  ) => {\n    if (!searchQuery || searchQuery === \"\") {\n      cb([], null);\n      return;\n    }\n\n    const elements = app.scene.getNonDeletedElements();\n    const texts = elements.filter(el => isTextElement(el)) as JsonDrawTextElement[];\n\n    const frames = elements.filter(el => isFrameLikeElement(el)) as JsonDrawFrameLikeElement[];\n\n    texts.sort((a, b) => a.y - b.y);\n    frames.sort((a, b) => a.y - b.y);\n\n    const textMatches: SearchMatchItem[] = [];\n\n    const regex = new RegExp(escapeSpecialCharacters(searchQuery), \"gi\");\n\n    for (const textEl of texts) {\n      let match = null;\n      const text = textEl.originalText;\n\n      while ((match = regex.exec(text)) !== null) {\n        const preview = getMatchPreview(text, match.index, searchQuery);\n        const matchedLines = getMatchedLines(textEl, searchQuery, match.index);\n\n        if (matchedLines.length > 0) {\n          textMatches.push({\n            element: textEl,\n            searchQuery,\n            preview,\n            index: match.index,\n            matchedLines,\n          });\n        }\n      }\n    }\n\n    const frameMatches: SearchMatchItem[] = [];\n\n    for (const frame of frames) {\n      let match = null;\n      const name = frame.name ?? getDefaultFrameName(frame);\n\n      while ((match = regex.exec(name)) !== null) {\n        const preview = getMatchPreview(name, match.index, searchQuery);\n        const matchedLines = getMatchInFrame(frame, searchQuery, match.index, app.state.zoom.value);\n\n        if (matchedLines.length > 0) {\n          frameMatches.push({\n            element: frame,\n            searchQuery,\n            preview,\n            index: match.index,\n            matchedLines,\n          });\n        }\n      }\n    }\n\n    const visibleIds = new Set(app.visibleElements.map(visibleElement => visibleElement.id));\n\n    // putting frame matches first\n    const matchItems: SearchMatchItem[] = [...frameMatches, ...textMatches];\n\n    const focusIndex =\n      matchItems.findIndex(matchItem => visibleIds.has(matchItem.element.id)) ?? null;\n\n    cb(matchItems, focusIndex);\n  },\n  SEARCH_DEBOUNCE\n);\n","import {\n  CANVAS_SEARCH_TAB,\n  DEFAULT_SIDEBAR,\n  LIBRARY_SIDEBAR_TAB,\n  composeEventHandlers,\n} from \"@jsondraw/common\";\nimport type { MarkOptional, Merge } from \"@jsondraw/common/utility-types\";\nimport clsx from \"clsx\";\nimport \"../dropdownMenu/DropdownMenu.scss\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { useJsonDrawSetAppState } from \"../App\";\nimport { Sidebar } from \"../Sidebar/Sidebar\";\nimport type { SidebarProps, SidebarTriggerProps } from \"../Sidebar/common\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { LibraryIcon, searchIcon } from \"../icons\";\nimport { LibraryMenu } from \"../library/LibraryMenu\";\nimport { SearchMenu } from \"../search/SearchMenu\";\n\nconst DefaultSidebarTrigger = withInternalFallback(\n  \"DefaultSidebarTrigger\",\n  (props: Omit<SidebarTriggerProps, \"name\"> & React.HTMLAttributes<HTMLDivElement>) => {\n    const { DefaultSidebarTriggerTunnel } = useTunnels();\n    return (\n      <DefaultSidebarTriggerTunnel.In>\n        <Sidebar.Trigger\n          {...props}\n          className=\"default-sidebar-trigger\"\n          name={DEFAULT_SIDEBAR.name}\n        />\n      </DefaultSidebarTriggerTunnel.In>\n    );\n  }\n);\nDefaultSidebarTrigger.displayName = \"DefaultSidebarTrigger\";\n\nconst DefaultTabTriggers = ({ children }: { children: React.ReactNode }) => {\n  const { DefaultSidebarTabTriggersTunnel } = useTunnels();\n  return <DefaultSidebarTabTriggersTunnel.In>{children}</DefaultSidebarTabTriggersTunnel.In>;\n};\nDefaultTabTriggers.displayName = \"DefaultTabTriggers\";\n\nexport const DefaultSidebar = Object.assign(\n  withInternalFallback(\n    \"DefaultSidebar\",\n    ({\n      children,\n      className,\n      onDock,\n      docked,\n      ...rest\n    }: Merge<\n      MarkOptional<Omit<SidebarProps, \"name\">, \"children\">,\n      {\n        /** pass `false` to disable docking */\n        onDock?: SidebarProps[\"onDock\"] | false;\n      }\n    >) => {\n      const appState = useUIAppState();\n      const setAppState = useJsonDrawSetAppState();\n\n      const { DefaultSidebarTabTriggersTunnel } = useTunnels();\n\n      const isForceDocked = appState.openSidebar?.tab === CANVAS_SEARCH_TAB;\n\n      return (\n        <Sidebar\n          {...rest}\n          name=\"default\"\n          key=\"default\"\n          className={clsx(\"default-sidebar\", className)}\n          docked={isForceDocked || (docked ?? appState.defaultSidebarDockedPreference)}\n          onDock={\n            // `onDock=false` disables docking.\n            // if `docked` passed, but no onDock passed, disable manual docking.\n            isForceDocked || onDock === false || (!onDock && docked != null)\n              ? undefined\n              : // compose to allow the host app to listen on default behavior\n                composeEventHandlers(onDock, docked => {\n                  setAppState({ defaultSidebarDockedPreference: docked });\n                })\n          }\n        >\n          <Sidebar.Tabs>\n            <Sidebar.Header>\n              <Sidebar.TabTriggers>\n                <Sidebar.TabTrigger tab={CANVAS_SEARCH_TAB}>{searchIcon}</Sidebar.TabTrigger>\n                <Sidebar.TabTrigger tab={LIBRARY_SIDEBAR_TAB}>{LibraryIcon}</Sidebar.TabTrigger>\n                <DefaultSidebarTabTriggersTunnel.Out />\n              </Sidebar.TabTriggers>\n            </Sidebar.Header>\n            <Sidebar.Tab tab={LIBRARY_SIDEBAR_TAB}>\n              <LibraryMenu />\n            </Sidebar.Tab>\n            <Sidebar.Tab tab={CANVAS_SEARCH_TAB}>\n              <SearchMenu />\n            </Sidebar.Tab>\n            {children}\n          </Sidebar.Tabs>\n        </Sidebar>\n      );\n    }\n  ),\n  {\n    Trigger: DefaultSidebarTrigger,\n    TabTriggers: DefaultTabTriggers,\n  }\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FixedSideContainer.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FixedSideContainer.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from \"react\";\nimport clsx from \"clsx\";\n\nimport \"./FixedSideContainer.scss\";\n\ntype FixedSideContainerProps = {\n  children: React.ReactNode;\n  side: \"top\" | \"left\" | \"right\";\n  className?: string;\n};\n\nexport const FixedSideContainer = ({\n  children,\n  side,\n  className,\n}: FixedSideContainerProps) => (\n  <div\n    className={clsx(\n      \"FixedSideContainer\",\n      `FixedSideContainer_side_${side}`,\n      className,\n    )}\n  >\n    {children}\n  </div>\n);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LayerUI.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LayerUI.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./MobileToolBar.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./MobileToolBar.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useState, useEffect } from \"react\";\nimport { KEYS, capitalizeString } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { trackEvent } from \"../../analytics\";\nimport { isHandToolActive } from \"../../appState\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { t } from \"../../i18n\";\nimport type { AppClassProperties, ToolType, UIAppState } from \"../../types\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\nimport {\n  SelectionIcon,\n  FreedrawIcon,\n  EraserIcon,\n  RectangleIcon,\n  ArrowIcon,\n  extraToolsIcon,\n  DiamondIcon,\n  EllipseIcon,\n  LineIcon,\n  TextIcon,\n  ImageIcon,\n  frameToolIcon,\n  EmbedIcon,\n  laserPointerToolIcon,\n  LassoIcon,\n  mermaidLogoIcon,\n  MagicIcon,\n} from \"../icons\";\nimport { HandButton } from \"./HandButton\";\nimport \"./MobileToolBar.scss\";\nimport { ToolButton } from \"./ToolButton\";\nimport \"./ToolIcon.scss\";\nimport { ToolPopover } from \"./ToolPopover\";\n\nconst SHAPE_TOOLS = [\n  {\n    type: \"rectangle\",\n    icon: RectangleIcon,\n    title: capitalizeString(t(\"toolBar.rectangle\")),\n  },\n  {\n    type: \"diamond\",\n    icon: DiamondIcon,\n    title: capitalizeString(t(\"toolBar.diamond\")),\n  },\n  {\n    type: \"ellipse\",\n    icon: EllipseIcon,\n    title: capitalizeString(t(\"toolBar.ellipse\")),\n  },\n] as const;\n\nconst SELECTION_TOOLS = [\n  {\n    type: \"selection\",\n    icon: SelectionIcon,\n    title: capitalizeString(t(\"toolBar.selection\")),\n  },\n  {\n    type: \"lasso\",\n    icon: LassoIcon,\n    title: capitalizeString(t(\"toolBar.lasso\")),\n  },\n] as const;\n\nconst LINEAR_ELEMENT_TOOLS = [\n  {\n    type: \"arrow\",\n    icon: ArrowIcon,\n    title: capitalizeString(t(\"toolBar.arrow\")),\n  },\n  { type: \"line\", icon: LineIcon, title: capitalizeString(t(\"toolBar.line\")) },\n] as const;\n\ntype MobileToolBarProps = {\n  app: AppClassProperties;\n  onHandToolToggle: () => void;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n};\n\nexport const MobileToolBar = ({ app, onHandToolToggle, setAppState }: MobileToolBarProps) => {\n  const activeTool = app.state.activeTool;\n  const [isOtherShapesMenuOpen, setIsOtherShapesMenuOpen] = useState(false);\n  const [lastActiveGenericShape, setLastActiveGenericShape] = useState<\n    \"rectangle\" | \"diamond\" | \"ellipse\"\n  >(\"rectangle\");\n  const [lastActiveLinearElement, setLastActiveLinearElement] = useState<\"arrow\" | \"line\">(\"arrow\");\n\n  // keep lastActiveGenericShape in sync with active tool if user switches via other UI\n  useEffect(() => {\n    if (\n      activeTool.type === \"rectangle\" ||\n      activeTool.type === \"diamond\" ||\n      activeTool.type === \"ellipse\"\n    ) {\n      setLastActiveGenericShape(activeTool.type);\n    }\n  }, [activeTool.type]);\n\n  // keep lastActiveLinearElement in sync with active tool if user switches via other UI\n  useEffect(() => {\n    if (activeTool.type === \"arrow\" || activeTool.type === \"line\") {\n      setLastActiveLinearElement(activeTool.type);\n    }\n  }, [activeTool.type]);\n\n  const frameToolSelected = activeTool.type === \"frame\";\n  const laserToolSelected = activeTool.type === \"laser\";\n  const embeddableToolSelected = activeTool.type === \"embeddable\";\n\n  const { TTDDialogTriggerTunnel } = useTunnels();\n\n  const handleToolChange = (toolType: string, pointerType?: string) => {\n    if (app.state.activeTool.type !== toolType) {\n      trackEvent(\"toolbar\", toolType, \"ui\");\n    }\n\n    if (toolType === \"selection\") {\n      if (app.state.activeTool.type === \"selection\") {\n        // Toggle selection tool behavior if needed\n      } else {\n        app.setActiveTool({ type: \"selection\" });\n      }\n    } else {\n      app.setActiveTool({ type: toolType as ToolType });\n    }\n  };\n\n  const [toolbarWidth, setToolbarWidth] = useState(0);\n\n  const WIDTH = 36;\n  const GAP = 4;\n\n  // hand, selection, freedraw, eraser, rectangle, arrow, others\n  const MIN_TOOLS = 7;\n  const MIN_WIDTH = MIN_TOOLS * WIDTH + (MIN_TOOLS - 1) * GAP;\n  const ADDITIONAL_WIDTH = WIDTH + GAP;\n\n  const showTextToolOutside = toolbarWidth >= MIN_WIDTH + 1 * ADDITIONAL_WIDTH;\n  const showImageToolOutside = toolbarWidth >= MIN_WIDTH + 2 * ADDITIONAL_WIDTH;\n  const showFrameToolOutside = toolbarWidth >= MIN_WIDTH + 3 * ADDITIONAL_WIDTH;\n\n  const extraTools = [\"text\", \"frame\", \"embeddable\", \"laser\", \"magicframe\"].filter(tool => {\n    if (showTextToolOutside && tool === \"text\") {\n      return false;\n    }\n    if (showImageToolOutside && tool === \"image\") {\n      return false;\n    }\n    if (showFrameToolOutside && tool === \"frame\") {\n      return false;\n    }\n    return true;\n  });\n  const extraToolSelected = extraTools.includes(activeTool.type);\n  const extraIcon = extraToolSelected\n    ? activeTool.type === \"text\"\n      ? TextIcon\n      : activeTool.type === \"image\"\n        ? ImageIcon\n        : activeTool.type === \"frame\"\n          ? frameToolIcon\n          : activeTool.type === \"embeddable\"\n            ? EmbedIcon\n            : activeTool.type === \"laser\"\n              ? laserPointerToolIcon\n              : activeTool.type === \"magicframe\"\n                ? MagicIcon\n                : extraToolsIcon\n    : extraToolsIcon;\n\n  return (\n    <div\n      className=\"mobile-toolbar\"\n      ref={div => {\n        if (div) {\n          setToolbarWidth(div.getBoundingClientRect().width);\n        }\n      }}\n    >\n      {/* Hand Tool */}\n      <HandButton\n        checked={isHandToolActive(app.state)}\n        onChange={onHandToolToggle}\n        title={t(\"toolBar.hand\")}\n        isMobile\n      />\n\n      {/* Selection Tool */}\n      <ToolPopover\n        app={app}\n        options={SELECTION_TOOLS}\n        activeTool={activeTool}\n        defaultOption={app.state.preferredSelectionTool.type}\n        namePrefix=\"selectionType\"\n        title={capitalizeString(t(\"toolBar.selection\"))}\n        data-testid=\"toolbar-selection\"\n        onToolChange={(type: string) => {\n          if (type === \"selection\" || type === \"lasso\") {\n            app.setActiveTool({ type });\n            setAppState({\n              preferredSelectionTool: { type, initialized: true },\n            });\n          }\n        }}\n        displayedOption={\n          SELECTION_TOOLS.find(tool => tool.type === app.state.preferredSelectionTool.type) ||\n          SELECTION_TOOLS[0]\n        }\n      />\n\n      {/* Free Draw */}\n      <ToolButton\n        className={clsx({\n          active: activeTool.type === \"freedraw\",\n        })}\n        type=\"radio\"\n        icon={FreedrawIcon}\n        checked={activeTool.type === \"freedraw\"}\n        name=\"editor-current-shape\"\n        title={`${capitalizeString(t(\"toolBar.freedraw\"))}`}\n        aria-label={capitalizeString(t(\"toolBar.freedraw\"))}\n        data-testid=\"toolbar-freedraw\"\n        onChange={() => handleToolChange(\"freedraw\")}\n      />\n\n      {/* Eraser */}\n      <ToolButton\n        className={clsx({\n          active: activeTool.type === \"eraser\",\n        })}\n        type=\"radio\"\n        icon={EraserIcon}\n        checked={activeTool.type === \"eraser\"}\n        name=\"editor-current-shape\"\n        title={`${capitalizeString(t(\"toolBar.eraser\"))}`}\n        aria-label={capitalizeString(t(\"toolBar.eraser\"))}\n        data-testid=\"toolbar-eraser\"\n        onChange={() => handleToolChange(\"eraser\")}\n      />\n\n      {/* Rectangle */}\n      <ToolPopover\n        app={app}\n        options={SHAPE_TOOLS}\n        activeTool={activeTool}\n        defaultOption={lastActiveGenericShape}\n        namePrefix=\"shapeType\"\n        title={capitalizeString(\n          t(\n            lastActiveGenericShape === \"rectangle\"\n              ? \"toolBar.rectangle\"\n              : lastActiveGenericShape === \"diamond\"\n                ? \"toolBar.diamond\"\n                : lastActiveGenericShape === \"ellipse\"\n                  ? \"toolBar.ellipse\"\n                  : \"toolBar.rectangle\"\n          )\n        )}\n        data-testid=\"toolbar-rectangle\"\n        onToolChange={(type: string) => {\n          if (type === \"rectangle\" || type === \"diamond\" || type === \"ellipse\") {\n            setLastActiveGenericShape(type);\n            app.setActiveTool({ type });\n          }\n        }}\n        displayedOption={\n          SHAPE_TOOLS.find(tool => tool.type === lastActiveGenericShape) || SHAPE_TOOLS[0]\n        }\n      />\n\n      {/* Arrow/Line */}\n      <ToolPopover\n        app={app}\n        options={LINEAR_ELEMENT_TOOLS}\n        activeTool={activeTool}\n        defaultOption={lastActiveLinearElement}\n        namePrefix=\"linearElementType\"\n        title={capitalizeString(\n          t(lastActiveLinearElement === \"arrow\" ? \"toolBar.arrow\" : \"toolBar.line\")\n        )}\n        data-testid=\"toolbar-arrow\"\n        fillable={true}\n        onToolChange={(type: string) => {\n          if (type === \"arrow\" || type === \"line\") {\n            setLastActiveLinearElement(type);\n            app.setActiveTool({ type });\n          }\n        }}\n        displayedOption={\n          LINEAR_ELEMENT_TOOLS.find(tool => tool.type === lastActiveLinearElement) ||\n          LINEAR_ELEMENT_TOOLS[0]\n        }\n      />\n\n      {/* Text Tool */}\n      {showTextToolOutside && (\n        <ToolButton\n          className={clsx({\n            active: activeTool.type === \"text\",\n          })}\n          type=\"radio\"\n          icon={TextIcon}\n          checked={activeTool.type === \"text\"}\n          name=\"editor-current-shape\"\n          title={`${capitalizeString(t(\"toolBar.text\"))}`}\n          aria-label={capitalizeString(t(\"toolBar.text\"))}\n          data-testid=\"toolbar-text\"\n          onChange={() => handleToolChange(\"text\")}\n        />\n      )}\n\n      {/* Image */}\n      {showImageToolOutside && (\n        <ToolButton\n          className={clsx({\n            active: activeTool.type === \"image\",\n          })}\n          type=\"radio\"\n          icon={ImageIcon}\n          checked={activeTool.type === \"image\"}\n          name=\"editor-current-shape\"\n          title={`${capitalizeString(t(\"toolBar.image\"))}`}\n          aria-label={capitalizeString(t(\"toolBar.image\"))}\n          data-testid=\"toolbar-image\"\n          onChange={() => handleToolChange(\"image\")}\n        />\n      )}\n\n      {/* Frame Tool */}\n      {showFrameToolOutside && (\n        <ToolButton\n          className={clsx({ active: frameToolSelected })}\n          type=\"radio\"\n          icon={frameToolIcon}\n          checked={frameToolSelected}\n          name=\"editor-current-shape\"\n          title={`${capitalizeString(t(\"toolBar.frame\"))}`}\n          aria-label={capitalizeString(t(\"toolBar.frame\"))}\n          data-testid=\"toolbar-frame\"\n          onChange={() => handleToolChange(\"frame\")}\n        />\n      )}\n\n      {/* Other Shapes */}\n      <DropdownMenu open={isOtherShapesMenuOpen}>\n        <DropdownMenu.Trigger\n          className={clsx(\n            \"App-toolbar__extra-tools-trigger App-toolbar__extra-tools-trigger--mobile\",\n            {\n              \"App-toolbar__extra-tools-trigger--selected\":\n                extraToolSelected || isOtherShapesMenuOpen,\n            }\n          )}\n          onToggle={() => {\n            setIsOtherShapesMenuOpen(!isOtherShapesMenuOpen);\n            setAppState({ openMenu: null, openPopup: null });\n          }}\n          title={t(\"toolBar.extraTools\")}\n          style={{\n            width: WIDTH,\n            height: WIDTH,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n        >\n          {extraIcon}\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content\n          onClickOutside={() => setIsOtherShapesMenuOpen(false)}\n          onSelect={() => setIsOtherShapesMenuOpen(false)}\n          className=\"App-toolbar__extra-tools-dropdown\"\n          align=\"start\"\n        >\n          {!showTextToolOutside && (\n            <DropdownMenu.Item\n              onSelect={() => app.setActiveTool({ type: \"text\" })}\n              icon={TextIcon}\n              shortcut={KEYS.T.toLocaleUpperCase()}\n              data-testid=\"toolbar-text\"\n              selected={activeTool.type === \"text\"}\n            >\n              {t(\"toolBar.text\")}\n            </DropdownMenu.Item>\n          )}\n\n          {!showImageToolOutside && (\n            <DropdownMenu.Item\n              onSelect={() => app.setActiveTool({ type: \"image\" })}\n              icon={ImageIcon}\n              data-testid=\"toolbar-image\"\n              selected={activeTool.type === \"image\"}\n            >\n              {t(\"toolBar.image\")}\n            </DropdownMenu.Item>\n          )}\n          {!showFrameToolOutside && (\n            <DropdownMenu.Item\n              onSelect={() => app.setActiveTool({ type: \"frame\" })}\n              icon={frameToolIcon}\n              shortcut={KEYS.F.toLocaleUpperCase()}\n              data-testid=\"toolbar-frame\"\n              selected={frameToolSelected}\n            >\n              {t(\"toolBar.frame\")}\n            </DropdownMenu.Item>\n          )}\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"embeddable\" })}\n            icon={EmbedIcon}\n            data-testid=\"toolbar-embeddable\"\n            selected={embeddableToolSelected}\n          >\n            {t(\"toolBar.embeddable\")}\n          </DropdownMenu.Item>\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"laser\" })}\n            icon={laserPointerToolIcon}\n            data-testid=\"toolbar-laser\"\n            selected={laserToolSelected}\n            shortcut={KEYS.K.toLocaleUpperCase()}\n          >\n            {t(\"toolBar.laser\")}\n          </DropdownMenu.Item>\n          <div style={{ margin: \"6px 0\", fontSize: 14, fontWeight: 600 }}>Generate</div>\n          {app.props.aiEnabled !== false && <TTDDialogTriggerTunnel.Out />}\n          <DropdownMenu.Item\n            onSelect={() => app.setOpenDialog({ name: \"ttd\", tab: \"mermaid\" })}\n            icon={mermaidLogoIcon}\n            data-testid=\"toolbar-embeddable\"\n          >\n            {t(\"toolBar.mermaidToJsonDraw\")}\n          </DropdownMenu.Item>\n          {app.props.aiEnabled !== false && app.plugins.diagramToCode && (\n            <>\n              <DropdownMenu.Item\n                onSelect={() => app.onMagicframeToolSelect()}\n                icon={MagicIcon}\n                data-testid=\"toolbar-magicframe\"\n              >\n                {t(\"toolBar.magicframe\")}\n                <DropdownMenu.Item.Badge>AI</DropdownMenu.Item.Badge>\n              </DropdownMenu.Item>\n            </>\n          )}\n        </DropdownMenu.Content>\n      </DropdownMenu>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\n\nimport { useTunnels } from \"../../context/tunnels\";\nimport { t } from \"../../i18n\";\nimport { calculateScrollCenter } from \"../../scene\";\nimport { SCROLLBAR_WIDTH, SCROLLBAR_MARGIN } from \"../../scene/scrollbars\";\n\nimport { ExitViewModeButton, MobileShapeActions } from \"../toolbar/Actions\";\nimport { MobileToolBar } from \"../toolbar/MobileToolBar\";\nimport { PenModeButton } from \"../toolbar/PenModeButton\";\n\nimport type { ActionManager } from \"../../actions/manager\";\nimport type {\n  AppClassProperties,\n  AppProps,\n  AppState,\n  UIAppState,\n} from \"../../types\";\nimport { FixedSideContainer } from \"./FixedSideContainer\";\nimport { Island } from \"./Island\";\nimport type { JSX } from \"react\";\n\ntype MobileMenuProps = {\n  appState: UIAppState;\n  actionManager: ActionManager;\n  renderJSONExportDialog: () => React.ReactNode;\n  renderImageExportDialog: () => React.ReactNode;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  elements: readonly NonDeletedJsonDrawElement[];\n  onHandToolToggle: () => void;\n  onPenModeToggle: AppClassProperties[\"togglePenMode\"];\n\n  renderTopRightUI?: (\n    isMobile: boolean,\n    appState: UIAppState,\n  ) => JSX.Element | null;\n  renderTopLeftUI?: (\n    isMobile: boolean,\n    appState: UIAppState,\n  ) => JSX.Element | null;\n  renderSidebars: () => JSX.Element | null;\n  renderWelcomeScreen: boolean;\n  UIOptions: AppProps[\"UIOptions\"];\n  app: AppClassProperties;\n};\n\nexport const MobileMenu = ({\n  appState,\n  elements,\n  actionManager,\n  setAppState,\n  onHandToolToggle,\n  renderTopLeftUI,\n  renderTopRightUI,\n  renderSidebars,\n  renderWelcomeScreen,\n  UIOptions,\n  app,\n  onPenModeToggle,\n}: MobileMenuProps) => {\n  const {\n    WelcomeScreenCenterTunnel,\n    MainMenuTunnel,\n    DefaultSidebarTriggerTunnel,\n  } = useTunnels();\n  const renderAppTopBar = () => {\n    if (appState.openDialog?.name === \"elementLinkSelector\") {\n      return null;\n    }\n\n    const topRightUI = (\n      <div className=\"jsondraw-ui-top-right\">\n        {renderTopRightUI?.(true, appState) ??\n          (!appState.viewModeEnabled && (\n            <>\n              <PenModeButton\n                checked={appState.penMode}\n                onChange={() => onPenModeToggle(null)}\n                title={t(\"toolBar.penMode\")}\n                isMobile\n                penDetected={appState.penDetected}\n              />\n              <DefaultSidebarTriggerTunnel.Out />\n            </>\n          ))}\n        {appState.viewModeEnabled && (\n          <ExitViewModeButton actionManager={actionManager} />\n        )}\n      </div>\n    );\n\n    const topLeftUI = (\n      <div className=\"jsondraw-ui-top-left\">\n        {renderTopLeftUI?.(true, appState)}\n        <MainMenuTunnel.Out />\n      </div>\n    );\n\n    return (\n      <div\n        className=\"App-toolbar-content\"\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        {topLeftUI}\n        {topRightUI}\n      </div>\n    );\n  };\n\n  const renderToolbar = () => {\n    return (\n      <MobileToolBar\n        app={app}\n        onHandToolToggle={onHandToolToggle}\n        setAppState={setAppState}\n      />\n    );\n  };\n\n  return (\n    <>\n      {renderSidebars()}\n      {/* welcome screen, bottom bar, and top bar all have the same z-index */}\n      {/* ordered in this reverse order so that top bar is on top */}\n      <div className=\"App-welcome-screen\">\n        {renderWelcomeScreen && <WelcomeScreenCenterTunnel.Out />}\n      </div>\n\n      {!appState.viewModeEnabled && (\n        <div\n          className=\"App-bottom-bar\"\n          style={{\n            marginBottom: SCROLLBAR_WIDTH + SCROLLBAR_MARGIN,\n          }}\n        >\n          <MobileShapeActions\n            appState={appState}\n            elementsMap={app.scene.getNonDeletedElementsMap()}\n            renderAction={actionManager.renderAction}\n            app={app}\n            setAppState={setAppState}\n          />\n\n          <Island className=\"App-toolbar\">\n            {!appState.viewModeEnabled &&\n              appState.openDialog?.name !== \"elementLinkSelector\" &&\n              renderToolbar()}\n            {appState.scrolledOutside &&\n              !appState.openMenu &&\n              !appState.openSidebar && (\n                <button\n                  type=\"button\"\n                  className=\"scroll-back-to-content\"\n                  onClick={() => {\n                    setAppState((appState) => ({\n                      ...calculateScrollCenter(elements, appState),\n                    }));\n                  }}\n                >\n                  {t(\"buttons.scrollBackToContent\")}\n                </button>\n              )}\n          </Island>\n        </div>\n      )}\n\n      <FixedSideContainer side=\"top\" className=\"App-top-bar\">\n        {renderAppTopBar()}\n      </FixedSideContainer>\n    </>\n  );\n};\n","import React from \"react\";\nimport {\n  CLASSES,\n  DEFAULT_SIDEBAR,\n  TOOL_TYPE,\n  arrayToMap,\n  capitalizeString,\n  isShallowEqual,\n} from \"@jsondraw/common\";\nimport { mutateElement } from \"@jsondraw/element\";\nimport { showSelectedShapeActions } from \"@jsondraw/element\";\nimport { ShapeCache } from \"@jsondraw/element\";\nimport type { NonDeletedJsonDrawElement } from \"@jsondraw/element/types\";\nimport clsx from \"clsx\";\nimport { actionToggleStats } from \"../../actions\";\nimport type { ActionManager } from \"../../actions/manager\";\nimport { trackEvent } from \"../../analytics\";\nimport { isHandToolActive } from \"../../appState\";\nimport { TunnelsContext, useInitializeTunnels } from \"../../context/tunnels\";\nimport { UIAppStateContext } from \"../../context/ui-appState\";\nimport { useAtom, useAtomValue } from \"../../editor-jotai\";\nimport { t } from \"../../i18n\";\nimport type { Language } from \"../../i18n\";\nimport { calculateScrollCenter } from \"../../scene\";\nimport type {\n  AppProps,\n  AppState,\n  JsonDrawProps,\n  BinaryFiles,\n  UIAppState,\n  AppClassProperties,\n} from \"../../types\";\nimport { useEditorInterface, useStylesPanelMode } from \"../App\";\nimport { CommandPalette } from \"../CommandPalette/CommandPalette\";\nimport { OverwriteConfirmDialog } from \"../OverwriteConfirm/OverwriteConfirm\";\nimport { isSidebarDockedAtom } from \"../Sidebar/Sidebar\";\nimport { Stats } from \"../Stats\";\nimport { TTDDialog } from \"../TTDDialog/TTDDialog\";\nimport { EyeDropper, activeEyeDropperAtom } from \"../canvases/EyeDropper\";\nimport { ActiveConfirmDialog } from \"../dialogs/ActiveConfirmDialog\";\nimport ElementLinkDialog from \"../dialogs/ElementLinkDialog\";\nimport { ErrorDialog } from \"../dialogs/ErrorDialog\";\nimport { HelpDialog } from \"../dialogs/HelpDialog\";\nimport { PasteChartDialog } from \"../dialogs/PasteChartDialog\";\nimport { ImageExportDialog } from \"../export/ImageExportDialog\";\nimport { JSONExportDialog } from \"../export/JSONExportDialog\";\nimport Footer from \"../footer/Footer\";\nimport { sidebarRightIcon } from \"../icons\";\nimport MainMenu from \"../main-menu/MainMenu\";\nimport { HintViewer } from \"../popups/HintViewer\";\nimport { SelectedShapeActions, ShapesSwitcher, CompactShapeActions } from \"../toolbar/Actions\";\nimport { HandButton } from \"../toolbar/HandButton\";\nimport { LaserPointerButton } from \"../toolbar/LaserPointerButton\";\nimport { LockButton } from \"../toolbar/LockButton\";\nimport { PenModeButton } from \"../toolbar/PenModeButton\";\nimport \"../toolbar/Toolbar.scss\";\nimport { LoadingMessage } from \"../ui/LoadingMessage\";\nimport { UserList } from \"../user/UserList\";\nimport { DefaultSidebar } from \"./DefaultSidebar\";\nimport { FixedSideContainer } from \"./FixedSideContainer\";\nimport { Island } from \"./Island\";\nimport \"./LayerUI.scss\";\nimport { MobileMenu } from \"./MobileMenu\";\nimport { Section } from \"./Section\";\nimport Stack from \"./Stack\";\n\ninterface LayerUIProps {\n  actionManager: ActionManager;\n  appState: UIAppState;\n  files: BinaryFiles;\n  canvas: HTMLCanvasElement;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  elements: readonly NonDeletedJsonDrawElement[];\n  onLockToggle: () => void;\n  onHandToolToggle: () => void;\n  onPenModeToggle: AppClassProperties[\"togglePenMode\"];\n  showExitZenModeBtn: boolean;\n  langCode: Language[\"code\"];\n  renderTopLeftUI?: JsonDrawProps[\"renderTopLeftUI\"];\n  renderTopRightUI?: JsonDrawProps[\"renderTopRightUI\"];\n  renderCustomStats?: JsonDrawProps[\"renderCustomStats\"];\n  UIOptions: AppProps[\"UIOptions\"];\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  renderWelcomeScreen: boolean;\n  children?: React.ReactNode;\n  app: AppClassProperties;\n  isCollaborating: boolean;\n  generateLinkForSelection?: AppProps[\"generateLinkForSelection\"];\n}\n\nconst DefaultMainMenu: React.FC<{\n  UIOptions: AppProps[\"UIOptions\"];\n  onClearDrawing?: () => void;\n}> = ({ UIOptions, onClearDrawing }) => {\n  return (\n    <MainMenu __fallback>\n      {/*\n       Open v Save.\n      */}\n      <MainMenu.DefaultItems.LoadScene />\n      <MainMenu.DefaultItems.SaveToActiveFile />\n\n      {UIOptions.canvasActions.export && <MainMenu.DefaultItems.Export />}\n      {onClearDrawing && (\n        <>\n          <MainMenu.Separator />\n          <MainMenu.Item\n            icon={\n              <svg\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              >\n                <path d=\"M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n              </svg>\n            }\n            onSelect={onClearDrawing}\n          >\n            Clear Drawing\n          </MainMenu.Item>\n        </>\n      )}\n      {/*\n        {UIOptions.canvasActions.saveAsImage && <MainMenu.DefaultItems.SaveAsImage />}\n        <MainMenu.DefaultItems.SearchMenu />\n        <MainMenu.DefaultItems.Help />\n        <MainMenu.DefaultItems.ClearCanvas />\n        <MainMenu.Separator />\n        <MainMenu.Group title=\"JsonDraw links\">\n          <MainMenu.DefaultItems.Socials />\n        </MainMenu.Group>\n        <MainMenu.Separator />\n        <MainMenu.DefaultItems.ToggleTheme />\n        <MainMenu.DefaultItems.ChangeCanvasBackground />\n      */}\n    </MainMenu>\n  );\n};\n\nconst DefaultOverwriteConfirmDialog = () => {\n  return (\n    <OverwriteConfirmDialog __fallback>\n      {/*\n        Load from file.\n      */}\n      {/*\n        <OverwriteConfirmDialog.Actions.SaveToDisk />\n        <OverwriteConfirmDialog.Actions.ExportToImage />\n      */}\n    </OverwriteConfirmDialog>\n  );\n};\n\nconst LayerUI = ({\n  actionManager,\n  appState,\n  files,\n  setAppState,\n  elements,\n  canvas,\n  onLockToggle,\n  onHandToolToggle,\n  onPenModeToggle,\n  showExitZenModeBtn,\n  renderTopLeftUI,\n  renderTopRightUI,\n  renderCustomStats,\n  UIOptions,\n  onExportImage,\n  renderWelcomeScreen,\n  children,\n  app,\n  isCollaborating,\n  generateLinkForSelection,\n}: LayerUIProps) => {\n  const editorInterface = useEditorInterface();\n  const stylesPanelMode = useStylesPanelMode();\n  const isCompactStylesPanel = stylesPanelMode === \"compact\";\n  const tunnels = useInitializeTunnels();\n\n  const spacing = isCompactStylesPanel\n    ? {\n        menuTopGap: 4,\n        toolbarColGap: 4,\n        toolbarRowGap: 1,\n        toolbarInnerRowGap: 0.5,\n        islandPadding: 1,\n        collabMarginLeft: 8,\n      }\n    : {\n        menuTopGap: 6,\n        toolbarColGap: 4,\n        toolbarRowGap: 1,\n        toolbarInnerRowGap: 1,\n        islandPadding: 1,\n        collabMarginLeft: 8,\n      };\n\n  const TunnelsJotaiProvider = tunnels.tunnelsJotai.Provider;\n\n  const [eyeDropperState, setEyeDropperState] = useAtom(activeEyeDropperAtom);\n\n  const renderJSONExportDialog = () => {\n    if (!UIOptions.canvasActions.export) {\n      return null;\n    }\n\n    return (\n      <JSONExportDialog\n        elements={elements}\n        appState={appState}\n        files={files}\n        actionManager={actionManager}\n        exportOpts={UIOptions.canvasActions.export}\n        canvas={canvas}\n        setAppState={setAppState}\n      />\n    );\n  };\n\n  const renderImageExportDialog = () => {\n    if (!UIOptions.canvasActions.saveAsImage || appState.openDialog?.name !== \"imageExport\") {\n      return null;\n    }\n\n    return (\n      <ImageExportDialog\n        elements={elements}\n        appState={appState}\n        files={files}\n        actionManager={actionManager}\n        onExportImage={onExportImage}\n        onCloseRequest={() => setAppState({ openDialog: null })}\n        name={app.getName()}\n      />\n    );\n  };\n\n  const renderCanvasActions = () => (\n    <div style={{ position: \"relative\" }}>\n      {/* wrapping to Fragment stops React from occasionally complaining\n                about identical Keys */}\n      <tunnels.MainMenuTunnel.Out />\n      {renderWelcomeScreen && <tunnels.WelcomeScreenMenuHintTunnel.Out />}\n    </div>\n  );\n\n  const renderSelectedShapeActions = () => {\n    const isCompactMode = isCompactStylesPanel;\n\n    return (\n      <Section\n        heading=\"selectedShapeActions\"\n        className={clsx(\"selected-shape-actions zen-mode-transition\", {\n          \"transition-left\": appState.zenModeEnabled,\n        })}\n      >\n        {isCompactMode ? (\n          <Island\n            className={clsx(\"compact-shape-actions-island\")}\n            padding={0}\n            style={{\n              // we want to make sure this doesn't overflow so subtracting the\n              // approximate height of hamburgerMenu + footer\n              maxHeight: `${appState.height - 166}px`,\n            }}\n          >\n            <CompactShapeActions\n              appState={appState}\n              elementsMap={app.scene.getNonDeletedElementsMap()}\n              renderAction={actionManager.renderAction}\n              app={app}\n              setAppState={setAppState}\n            />\n          </Island>\n        ) : (\n          <Island\n            className={CLASSES.SHAPE_ACTIONS_MENU}\n            padding={2}\n            style={{\n              // we want to make sure this doesn't overflow so subtracting the\n              // approximate height of hamburgerMenu + footer\n              maxHeight: `${appState.height - 166}px`,\n            }}\n          >\n            <SelectedShapeActions\n              appState={appState}\n              elementsMap={app.scene.getNonDeletedElementsMap()}\n              renderAction={actionManager.renderAction}\n              app={app}\n            />\n          </Island>\n        )}\n      </Section>\n    );\n  };\n\n  const renderFixedSideContainer = () => {\n    const shouldRenderSelectedShapeActions = showSelectedShapeActions(appState, elements);\n\n    const shouldShowStats =\n      appState.stats.open &&\n      !appState.zenModeEnabled &&\n      !appState.viewModeEnabled &&\n      appState.openDialog?.name !== \"elementLinkSelector\";\n\n    return (\n      <FixedSideContainer side=\"top\">\n        <div className=\"App-menu App-menu_top\">\n          <Stack.Col gap={spacing.menuTopGap} className={clsx(\"App-menu_top__left\")}>\n            {renderCanvasActions()}\n            <div\n              className={clsx(\"selected-shape-actions-container\", {\n                \"selected-shape-actions-container--compact\": isCompactStylesPanel,\n              })}\n            >\n              {shouldRenderSelectedShapeActions && renderSelectedShapeActions()}\n            </div>\n          </Stack.Col>\n          {!appState.viewModeEnabled && appState.openDialog?.name !== \"elementLinkSelector\" && (\n            <Section heading=\"shapes\" className=\"shapes-section\">\n              {(heading: React.ReactNode) => (\n                <div style={{ position: \"relative\" }}>\n                  {renderWelcomeScreen && <tunnels.WelcomeScreenToolbarHintTunnel.Out />}\n                  <Stack.Col gap={spacing.toolbarColGap} align=\"start\">\n                    <Stack.Row\n                      gap={spacing.toolbarRowGap}\n                      className={clsx(\"App-toolbar-container\", {\n                        \"zen-mode\": appState.zenModeEnabled,\n                      })}\n                    >\n                      <Island\n                        padding={spacing.islandPadding}\n                        className={clsx(\"App-toolbar\", {\n                          \"zen-mode\": appState.zenModeEnabled,\n                          \"App-toolbar--compact\": isCompactStylesPanel,\n                        })}\n                      >\n                        <HintViewer\n                          appState={appState}\n                          isMobile={editorInterface.formFactor === \"phone\"}\n                          editorInterface={editorInterface}\n                          app={app}\n                        />\n                        {heading}\n                        <Stack.Row gap={spacing.toolbarInnerRowGap}>\n                          <PenModeButton\n                            zenModeEnabled={appState.zenModeEnabled}\n                            checked={appState.penMode}\n                            onChange={() => onPenModeToggle(null)}\n                            title={t(\"toolBar.penMode\")}\n                            penDetected={appState.penDetected}\n                          />\n                          <LockButton\n                            checked={appState.activeTool.locked}\n                            onChange={onLockToggle}\n                            title={t(\"toolBar.lock\")}\n                          />\n\n                          <div className=\"App-toolbar__divider\" />\n\n                          <HandButton\n                            checked={isHandToolActive(appState)}\n                            onChange={() => onHandToolToggle()}\n                            title={t(\"toolBar.hand\")}\n                            isMobile\n                          />\n\n                          <ShapesSwitcher\n                            setAppState={setAppState}\n                            activeTool={appState.activeTool}\n                            UIOptions={UIOptions}\n                            app={app}\n                          />\n                        </Stack.Row>\n                      </Island>\n                      {isCollaborating && (\n                        <Island\n                          style={{\n                            marginLeft: spacing.collabMarginLeft,\n                            alignSelf: \"center\",\n                            height: \"fit-content\",\n                          }}\n                        >\n                          <LaserPointerButton\n                            title={t(\"toolBar.laser\")}\n                            checked={appState.activeTool.type === TOOL_TYPE.laser}\n                            onChange={() => app.setActiveTool({ type: TOOL_TYPE.laser })}\n                            isMobile\n                          />\n                        </Island>\n                      )}\n                    </Stack.Row>\n                  </Stack.Col>\n                </div>\n              )}\n            </Section>\n          )}\n          <div\n            className={clsx(\"layer-ui__wrapper__top-right zen-mode-transition\", {\n              \"transition-right\": appState.zenModeEnabled,\n              \"layer-ui__wrapper__top-right--compact\": isCompactStylesPanel,\n            })}\n          >\n            {appState.collaborators.size > 0 && (\n              <UserList\n                collaborators={appState.collaborators}\n                userToFollow={appState.userToFollow?.socketId || null}\n              />\n            )}\n            {renderTopRightUI?.(editorInterface.formFactor === \"phone\", appState)}\n            {!appState.viewModeEnabled &&\n              appState.openDialog?.name !== \"elementLinkSelector\" &&\n              // hide button when sidebar docked\n              (!isSidebarDocked || appState.openSidebar?.name !== DEFAULT_SIDEBAR.name) && (\n                <tunnels.DefaultSidebarTriggerTunnel.Out />\n              )}\n            {shouldShowStats && (\n              <Stats\n                app={app}\n                onClose={() => {\n                  actionManager.executeAction(actionToggleStats);\n                }}\n                renderCustomStats={renderCustomStats}\n              />\n            )}\n          </div>\n        </div>\n      </FixedSideContainer>\n    );\n  };\n\n  const renderSidebars = () => {\n    return (\n      <DefaultSidebar\n        __fallback\n        onDock={docked => {\n          trackEvent(\n            \"sidebar\",\n            `toggleDock (${docked ? \"dock\" : \"undock\"})`,\n            `(${editorInterface.formFactor === \"phone\" ? \"mobile\" : \"desktop\"})`\n          );\n        }}\n      />\n    );\n  };\n\n  const isSidebarDocked = useAtomValue(isSidebarDockedAtom);\n\n  const layerUIJSX = (\n    <>\n      {/* ------------------------- tunneled UI ---------------------------- */}\n      {/* make sure we render host app components first so that we can detect\n          them first on initial render to optimize layout shift */}\n      {children}\n      {/* render component fallbacks. Can be rendered anywhere as they'll be\n          tunneled away. We only render tunneled components that actually\n        have defaults when host do not render anything. */}\n\n      <DefaultMainMenu\n        UIOptions={UIOptions}\n        onClearDrawing={UIOptions.canvasActions.clearDrawing}\n      />\n      <DefaultSidebar.Trigger\n        __fallback\n        icon={sidebarRightIcon}\n        title={capitalizeString(t(\"toolBar.library\"))}\n        onToggle={open => {\n          if (open) {\n            trackEvent(\n              \"sidebar\",\n              `${DEFAULT_SIDEBAR.name} (open)`,\n              `button (${editorInterface.formFactor === \"phone\" ? \"mobile\" : \"desktop\"})`\n            );\n          }\n        }}\n        tab={DEFAULT_SIDEBAR.defaultTab}\n      />\n      <DefaultOverwriteConfirmDialog />\n      {appState.openDialog?.name === \"ttd\" && <TTDDialog __fallback />}\n      {/* ------------------------------------------------------------------ */}\n\n      {appState.isLoading && <LoadingMessage delay={250} />}\n      {appState.errorMessage && (\n        <ErrorDialog onClose={() => setAppState({ errorMessage: null })}>\n          {appState.errorMessage}\n        </ErrorDialog>\n      )}\n      {eyeDropperState && editorInterface.formFactor !== \"phone\" && (\n        <EyeDropper\n          colorPickerType={eyeDropperState.colorPickerType}\n          onCancel={() => {\n            setEyeDropperState(null);\n          }}\n          onChange={(colorPickerType, color, selectedElements, { altKey }) => {\n            if (colorPickerType !== \"elementBackground\" && colorPickerType !== \"elementStroke\") {\n              return;\n            }\n\n            if (selectedElements.length) {\n              for (const element of selectedElements) {\n                mutateElement(element, arrayToMap(elements), {\n                  [altKey && eyeDropperState.swapPreviewOnAlt\n                    ? colorPickerType === \"elementBackground\"\n                      ? \"strokeColor\"\n                      : \"backgroundColor\"\n                    : colorPickerType === \"elementBackground\"\n                      ? \"backgroundColor\"\n                      : \"strokeColor\"]: color,\n                });\n                ShapeCache.delete(element);\n              }\n              app.scene.triggerUpdate();\n            } else if (colorPickerType === \"elementBackground\") {\n              setAppState({\n                currentItemBackgroundColor: color,\n              });\n            } else {\n              setAppState({ currentItemStrokeColor: color });\n            }\n          }}\n          onSelect={(color, event) => {\n            setEyeDropperState(state => {\n              return state?.keepOpenOnAlt && event.altKey ? state : null;\n            });\n            eyeDropperState?.onSelect?.(color, event);\n          }}\n        />\n      )}\n      {appState.openDialog?.name === \"help\" && (\n        <HelpDialog\n          onClose={() => {\n            setAppState({ openDialog: null });\n          }}\n        />\n      )}\n      <CommandPalette />\n      <ActiveConfirmDialog />\n      {appState.openDialog?.name === \"elementLinkSelector\" && (\n        <ElementLinkDialog\n          sourceElementId={appState.openDialog.sourceElementId}\n          onClose={() => {\n            setAppState({\n              openDialog: null,\n            });\n          }}\n          scene={app.scene}\n          appState={appState}\n          generateLinkForSelection={generateLinkForSelection}\n        />\n      )}\n      <tunnels.OverwriteConfirmDialogTunnel.Out />\n      {renderImageExportDialog()}\n      {renderJSONExportDialog()}\n      {appState.pasteDialog.shown && (\n        <PasteChartDialog\n          setAppState={setAppState}\n          appState={appState}\n          onClose={() =>\n            setAppState({\n              pasteDialog: { shown: false, data: null },\n            })\n          }\n        />\n      )}\n      {editorInterface.formFactor === \"phone\" && (\n        <MobileMenu\n          app={app}\n          appState={appState}\n          elements={elements}\n          actionManager={actionManager}\n          renderJSONExportDialog={renderJSONExportDialog}\n          renderImageExportDialog={renderImageExportDialog}\n          setAppState={setAppState}\n          onHandToolToggle={onHandToolToggle}\n          onPenModeToggle={onPenModeToggle}\n          renderTopLeftUI={renderTopLeftUI}\n          renderTopRightUI={renderTopRightUI}\n          renderSidebars={renderSidebars}\n          renderWelcomeScreen={renderWelcomeScreen}\n          UIOptions={UIOptions}\n        />\n      )}\n      {editorInterface.formFactor !== \"phone\" && (\n        <>\n          <div\n            className=\"layer-ui__wrapper\"\n            style={\n              appState.openSidebar && isSidebarDocked && editorInterface.canFitSidebar\n                ? { width: `calc(100% - var(--right-sidebar-width))` }\n                : {}\n            }\n          >\n            {renderWelcomeScreen && <tunnels.WelcomeScreenCenterTunnel.Out />}\n            {renderFixedSideContainer()}\n            <Footer\n              appState={appState}\n              actionManager={actionManager}\n              showExitZenModeBtn={showExitZenModeBtn}\n              renderWelcomeScreen={renderWelcomeScreen}\n            />\n            {appState.scrolledOutside && (\n              <button\n                type=\"button\"\n                className=\"scroll-back-to-content\"\n                onClick={() => {\n                  setAppState(appState => ({\n                    ...calculateScrollCenter(elements, appState),\n                  }));\n                }}\n              >\n                {t(\"buttons.scrollBackToContent\")}\n              </button>\n            )}\n          </div>\n          {renderSidebars()}\n        </>\n      )}\n    </>\n  );\n\n  return (\n    <UIAppStateContext.Provider value={appState}>\n      <TunnelsJotaiProvider>\n        <TunnelsContext.Provider value={tunnels}>{layerUIJSX}</TunnelsContext.Provider>\n      </TunnelsJotaiProvider>\n    </UIAppStateContext.Provider>\n  );\n};\n\nconst stripIrrelevantAppStateProps = (appState: AppState): UIAppState => {\n  const { startBoundElement, cursorButton, scrollX, scrollY, ...ret } = appState;\n  return ret;\n};\n\nconst areEqual = (prevProps: LayerUIProps, nextProps: LayerUIProps) => {\n  // short-circuit early\n  if (prevProps.children !== nextProps.children) {\n    return false;\n  }\n\n  const { canvas: _pC, appState: prevAppState, ...prev } = prevProps;\n  const { canvas: _nC, appState: nextAppState, ...next } = nextProps;\n\n  return (\n    isShallowEqual(\n      // asserting AppState because we're being passed the whole AppState\n      // but resolve to only the UI-relevant props\n      stripIrrelevantAppStateProps(prevAppState as AppState),\n      stripIrrelevantAppStateProps(nextAppState as AppState),\n      {\n        selectedElementIds: isShallowEqual,\n        selectedGroupIds: isShallowEqual,\n      }\n    ) && isShallowEqual(prev, next)\n  );\n};\n\nexport default React.memo(LayerUI, areEqual);\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./UnlockPopup.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./UnlockPopup.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import {\n  getCommonBounds,\n  getElementsInGroup,\n  selectGroupsFromGivenElements,\n} from \"@jsondraw/element\";\nimport { sceneCoordsToViewportCoords } from \"@jsondraw/common\";\n\nimport { flushSync } from \"react-dom\";\n\nimport { actionToggleElementLock } from \"../../actions\";\nimport { t } from \"../../i18n\";\n\nimport \"./UnlockPopup.scss\";\n\nimport { LockedIconFilled } from \"../icons\";\n\nimport type App from \"../App\";\n\nimport type { AppState } from \"../../types\";\n\nconst UnlockPopup = ({\n  app,\n  activeLockedId,\n}: {\n  app: App;\n  activeLockedId: NonNullable<AppState[\"activeLockedId\"]>;\n}) => {\n  const element = app.scene.getElement(activeLockedId);\n\n  const elements = element\n    ? [element]\n    : getElementsInGroup(app.scene.getNonDeletedElementsMap(), activeLockedId);\n\n  if (elements.length === 0) {\n    return null;\n  }\n\n  const [x, y] = getCommonBounds(elements);\n  const { x: viewX, y: viewY } = sceneCoordsToViewportCoords(\n    { sceneX: x, sceneY: y },\n    app.state,\n  );\n\n  return (\n    <div\n      className=\"UnlockPopup\"\n      style={{\n        bottom: `${app.state.height + 12 - viewY + app.state.offsetTop}px`,\n        left: `${viewX - app.state.offsetLeft}px`,\n      }}\n      onClick={() => {\n        flushSync(() => {\n          const groupIds = selectGroupsFromGivenElements(elements, app.state);\n          app.setState({\n            selectedElementIds: elements.reduce(\n              (acc, element) => ({\n                ...acc,\n                [element.id]: true,\n              }),\n              {},\n            ),\n            selectedGroupIds: groupIds,\n            activeLockedId: null,\n          });\n        });\n        app.actionManager.executeAction(actionToggleElementLock);\n      }}\n      title={t(\"labels.elementLock.unlock\")}\n    >\n      {LockedIconFilled}\n    </div>\n  );\n};\n\nexport default UnlockPopup;\n","import clsx from \"clsx\";\n\nimport \"./ToolIcon.scss\";\n\nimport type { ToolButtonSize } from \"./ToolButton\";\nimport type { JSX } from \"react\";\n\nconst DEFAULT_SIZE: ToolButtonSize = \"small\";\n\nexport const ElementCanvasButton = (props: {\n  title?: string;\n  icon: JSX.Element;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n}) => {\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__MagicButton\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title}`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n      />\n      <div className=\"ToolIcon__icon\">{props.icon}</div>\n    </label>\n  );\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Toast.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./Toast.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useCallback, useEffect, useRef } from \"react\";\nimport type { CSSProperties } from \"react\";\nimport { CloseIcon } from \"../icons\";\nimport { ToolButton } from \"../toolbar/ToolButton\";\nimport \"./Toast.scss\";\n\nconst DEFAULT_TOAST_TIMEOUT = 5000;\n\nexport const Toast = ({\n  message,\n  onClose,\n  closable = false,\n  // To prevent autoclose, pass duration as Infinity\n  duration = DEFAULT_TOAST_TIMEOUT,\n  style,\n}: {\n  message: string;\n  onClose: () => void;\n  closable?: boolean;\n  duration?: number;\n  style?: CSSProperties;\n}) => {\n  const timerRef = useRef<number>(0);\n  const shouldAutoClose = duration !== Infinity;\n  const scheduleTimeout = useCallback(() => {\n    if (!shouldAutoClose) {\n      return;\n    }\n    timerRef.current = window.setTimeout(() => onClose(), duration);\n  }, [onClose, duration, shouldAutoClose]);\n\n  useEffect(() => {\n    if (!shouldAutoClose) {\n      return;\n    }\n    scheduleTimeout();\n    return () => clearTimeout(timerRef.current);\n  }, [scheduleTimeout, message, duration, shouldAutoClose]);\n\n  const onMouseEnter = shouldAutoClose ? () => clearTimeout(timerRef?.current) : undefined;\n  const onMouseLeave = shouldAutoClose ? scheduleTimeout : undefined;\n  return (\n    <div className=\"Toast\" onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} style={style}>\n      <p className=\"Toast__message\">{message}</p>\n      {closable && (\n        <ToolButton\n          icon={CloseIcon}\n          aria-label=\"close\"\n          type=\"icon\"\n          onClick={onClose}\n          className=\"close\"\n        />\n      )}\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport {\n  COLOR_PALETTE,\n  CODES,\n  shouldResizeFromCenter,\n  shouldMaintainAspectRatio,\n  shouldRotateWithDiscreteAngle,\n  isArrowKey,\n  KEYS,\n  APP_NAME,\n  CURSOR_TYPE,\n  DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT,\n  DEFAULT_VERTICAL_ALIGN,\n  DRAGGING_THRESHOLD,\n  ELEMENT_SHIFT_TRANSLATE_AMOUNT,\n  ELEMENT_TRANSLATE_AMOUNT,\n  EVENT,\n  FRAME_STYLE,\n  IMAGE_MIME_TYPES,\n  IMAGE_RENDER_TIMEOUT,\n  LINE_CONFIRM_THRESHOLD,\n  MAX_ALLOWED_FILE_BYTES,\n  MIME_TYPES,\n  MQ_RIGHT_SIDEBAR_MIN_WIDTH,\n  POINTER_BUTTON,\n  ROUNDNESS,\n  SCROLL_TIMEOUT,\n  TAP_TWICE_TIMEOUT,\n  TEXT_TO_CENTER_SNAP_THRESHOLD,\n  THEME,\n  TOUCH_CTX_MENU_TIMEOUT,\n  VERTICAL_ALIGN,\n  YOUTUBE_STATES,\n  ZOOM_STEP,\n  POINTER_EVENTS,\n  TOOL_TYPE,\n  supportsResizeObserver,\n  DEFAULT_COLLISION_THRESHOLD,\n  DEFAULT_TEXT_ALIGN,\n  ARROW_TYPE,\n  DEFAULT_REDUCED_GLOBAL_ALPHA,\n  isLocalLink,\n  normalizeLink,\n  toValidURL,\n  getGridPoint,\n  getLineHeight,\n  debounce,\n  distance,\n  getFontString,\n  getNearestScrollableContainer,\n  isInputLike,\n  isToolIcon,\n  isWritableElement,\n  sceneCoordsToViewportCoords,\n  tupleToCoors,\n  viewportCoordsToSceneCoords,\n  wrapEvent,\n  updateObject,\n  updateActiveTool,\n  isTransparent,\n  easeToValuesRAF,\n  muteFSAbortError,\n  isTestEnv,\n  isDevEnv,\n  easeOut,\n  updateStable,\n  addEventListener,\n  normalizeEOL,\n  getDateTime,\n  isShallowEqual,\n  arrayToMap,\n  applyDarkModeFilter,\n  type EXPORT_IMAGE_TYPES,\n  randomInteger,\n  CLASSES,\n  Emitter,\n  MINIMUM_ARROW_SIZE,\n  DOUBLE_TAP_POSITION_THRESHOLD,\n  BIND_MODE_TIMEOUT,\n  invariant,\n  getFeatureFlag,\n  createUserAgentDescriptor,\n  getFormFactor,\n  deriveStylesPanelMode,\n  isIOS,\n  isBrave,\n  isSafari,\n  type EditorInterface,\n  type StylesPanelMode,\n  loadDesktopUIModePreference,\n  setDesktopUIMode,\n  isSelectionLikeTool,\n} from \"@jsondraw/common\";\nimport type { Mutable, ValueOf } from \"@jsondraw/common/utility-types\";\nimport {\n  getObservedAppState,\n  getCommonBounds,\n  getElementAbsoluteCoords,\n  bindOrUnbindBindingElements,\n  fixBindingsAfterDeletion,\n  getHoveredElementForBinding,\n  isBindingEnabled,\n  shouldEnableBindingForPointerEvent,\n  updateBoundElements,\n  LinearElementEditor,\n  newElementWith,\n  newFrameElement,\n  newFreeDrawElement,\n  newEmbeddableElement,\n  newMagicFrameElement,\n  newIframeElement,\n  newArrowElement,\n  newElement,\n  newImageElement,\n  newLinearElement,\n  newTextElement,\n  refreshTextDimensions,\n  deepCopyElement,\n  duplicateElements,\n  hasBoundTextElement,\n  isArrowElement,\n  isBindingElement,\n  isBindingElementType,\n  isBoundToContainer,\n  isFrameLikeElement,\n  isImageElement,\n  isEmbeddableElement,\n  isInitializedImageElement,\n  isLinearElement,\n  isLinearElementType,\n  isUsingAdaptiveRadius,\n  isIframeElement,\n  isIframeLikeElement,\n  isMagicFrameElement,\n  isTextBindableContainer,\n  isElbowArrow,\n  isFlowchartNodeElement,\n  isBindableElement,\n  isTextElement,\n  getNormalizedDimensions,\n  isElementCompletelyInViewport,\n  isElementInViewport,\n  isInvisiblySmallElement,\n  getCornerRadius,\n  isPathALoop,\n  createSrcDoc,\n  embeddableURLValidator,\n  maybeParseEmbedSrc,\n  getEmbedLink,\n  getInitializedImageElements,\n  normalizeSVG,\n  updateImageCache as _updateImageCache,\n  getBoundTextElement,\n  getContainerCenter,\n  getContainerElement,\n  isValidTextContainer,\n  redrawTextBoundingBox,\n  hasBoundingBox,\n  getFrameChildren,\n  isCursorInFrame,\n  addElementsToFrame,\n  replaceAllElementsInFrame,\n  removeElementsFromFrame,\n  getElementsInResizingFrame,\n  getElementsInNewFrame,\n  getContainingFrame,\n  elementOverlapsWithFrame,\n  updateFrameMembershipOfSelectedElements,\n  isElementInFrame,\n  getFrameLikeTitle,\n  getElementsOverlappingFrame,\n  filterElementsEligibleAsFrameChildren,\n  hitElementBoundText,\n  hitElementBoundingBoxOnly,\n  hitElementItself,\n  getVisibleSceneBounds,\n  FlowChartCreator,\n  FlowChartNavigator,\n  getLinkDirectionFromKey,\n  cropElement,\n  wrapText,\n  isElementLink,\n  parseElementLinkFromURL,\n  isMeasureTextSupported,\n  normalizeText,\n  measureText,\n  getLineHeightInPx,\n  getApproxMinLineWidth,\n  getApproxMinLineHeight,\n  getMinTextElementWidth,\n  ShapeCache,\n  getRenderOpacity,\n  editGroupForSelectedElement,\n  getElementsInGroup,\n  getSelectedGroupIdForElement,\n  getSelectedGroupIds,\n  isElementInGroup,\n  isSelectedViaGroup,\n  selectGroupsForSelectedElements,\n  syncInvalidIndices,\n  syncMovedIndices,\n  excludeElementsInFramesFromSelection,\n  getSelectionStateForElements,\n  makeNextSelectedElementIds,\n  getResizeOffsetXY,\n  getResizeArrowDirection,\n  transformElements,\n  getCursorForResizingElement,\n  getElementWithTransformHandleType,\n  getTransformHandleTypeFromCoords,\n  dragNewElement,\n  dragSelectedElements,\n  getDragOffsetXY,\n  isNonDeletedElement,\n  Scene,\n  Store,\n  CaptureUpdateAction,\n  type ElementUpdate,\n  hitElementBoundingBox,\n  isLineElement,\n  isSimpleArrow,\n  StoreDelta,\n  type ApplyToOptions,\n  positionElementsOnGrid,\n  calculateFixedPointForNonElbowArrowBinding,\n  bindOrUnbindBindingElement,\n  mutateElement,\n  getElementBounds,\n  doBoundsIntersect,\n  isPointInElement,\n  maxBindingDistance_simple,\n  convertToJsonDrawElements,\n  type JsonDrawElementSkeleton,\n  getSnapOutlineMidPoint,\n  handleFocusPointDrag,\n  handleFocusPointHover,\n  handleFocusPointPointerDown,\n  handleFocusPointPointerUp,\n  maybeHandleArrowPointlikeDrag,\n  getUncroppedWidthAndHeight,\n} from \"@jsondraw/element\";\nimport type {\n  JsonDrawElement,\n  JsonDrawFreeDrawElement,\n  JsonDrawGenericElement,\n  JsonDrawLinearElement,\n  JsonDrawTextElement,\n  NonDeleted,\n  InitializedJsonDrawImageElement,\n  JsonDrawImageElement,\n  FileId,\n  NonDeletedJsonDrawElement,\n  JsonDrawTextContainer,\n  JsonDrawFrameLikeElement,\n  JsonDrawMagicFrameElement,\n  JsonDrawIframeLikeElement,\n  IframeData,\n  JsonDrawIframeElement,\n  JsonDrawEmbeddableElement,\n  Ordered,\n  MagicGenerationData,\n  JsonDrawArrowElement,\n  JsonDrawElbowArrowElement,\n  SceneElementsMap,\n  JsonDrawBindableElement,\n} from \"@jsondraw/element/types\";\nimport {\n  clamp,\n  pointFrom,\n  pointDistance,\n  vector,\n  pointRotateRads,\n  vectorFromPoint,\n  vectorSubtract,\n  vectorDot,\n  vectorNormalize,\n} from \"@jsondraw/math\";\nimport type { GlobalPoint, LocalPoint, Radians } from \"@jsondraw/math\";\nimport clsx from \"clsx\";\nimport throttle from \"lodash.throttle\";\nimport { nanoid } from \"nanoid\";\nimport { flushSync } from \"react-dom\";\nimport type { RoughCanvas } from \"roughjs/bin/canvas\";\nimport rough from \"roughjs/bin/rough\";\nimport {\n  actionAddToLibrary,\n  actionBringForward,\n  actionBringToFront,\n  actionCopy,\n  actionCopyAsPng,\n  actionCopyAsSvg,\n  copyText,\n  actionCopyStyles,\n  actionCut,\n  actionDeleteSelected,\n  actionDuplicateSelection,\n  actionFinalize,\n  actionFlipHorizontal,\n  actionFlipVertical,\n  actionGroup,\n  actionPasteStyles,\n  actionSelectAll,\n  actionSendBackward,\n  actionSendToBack,\n  actionToggleGridMode,\n  actionToggleStats,\n  actionToggleZenMode,\n  actionUnbindText,\n  actionBindText,\n  actionUngroup,\n  actionLink,\n  actionToggleElementLock,\n  actionToggleLinearEditor,\n  actionToggleObjectsSnapMode,\n  actionToggleCropEditor,\n} from \"../actions\";\nimport { actionWrapTextInContainer } from \"../actions/actionBoundText\";\nimport { actionToggleHandTool, zoomToFit } from \"../actions/actionCanvas\";\nimport { actionPaste } from \"../actions/actionClipboard\";\nimport { actionCopyElementLink } from \"../actions/actionElementLink\";\nimport { actionUnlockAllElements } from \"../actions/actionElementLock\";\nimport {\n  actionRemoveAllElementsFromFrame,\n  actionSelectAllElementsInFrame,\n  actionWrapSelectionInFrame,\n} from \"../actions/actionFrame\";\nimport { createRedoAction, createUndoAction } from \"../actions/actionHistory\";\nimport { actionTextAutoResize } from \"../actions/actionTextAutoResize\";\nimport { actionToggleViewMode } from \"../actions/actionToggleViewMode\";\nimport { ActionManager } from \"../actions/manager\";\nimport { actions } from \"../actions/register\";\nimport { getShortcutFromShortcutName } from \"../actions/shortcuts\";\nimport type { Action, ActionResult } from \"../actions/types\";\nimport { trackEvent } from \"../analytics\";\nimport { AnimationFrameHandler } from \"../animation-frame-handler\";\nimport { getDefaultAppState, isEraserActive, isHandToolActive } from \"../appState\";\nimport {\n  copyTextToSystemClipboard,\n  parseClipboard,\n  parseDataTransferEvent,\n  type ParsedDataTransferFile,\n} from \"../clipboard\";\nimport type { ClipboardData, PastedMixedContent } from \"../clipboard\";\nimport {\n  showHyperlinkTooltip,\n  hideHyperlinkToolip,\n  Hyperlink,\n} from \"../components/hyperlink/Hyperlink\";\nimport { setEraserCursor, setCursor, resetCursor, setCursorForShape } from \"../cursor\";\nimport { exportCanvas, loadFromBlob } from \"../data\";\nimport type { ExportedElements } from \"../data\";\nimport {\n  dataURLToString,\n  generateIdFromFile,\n  getDataURL,\n  getDataURL_sync,\n  ImageURLToFile,\n  isImageFileHandle,\n  isSupportedImageFile,\n  loadSceneOrLibraryFromBlob,\n  normalizeFile,\n  parseLibraryJSON,\n  resizeImageFile,\n  SVGStringToFile,\n} from \"../data/blob\";\nimport { fileOpen } from \"../data/filesystem\";\nimport type { FileSystemHandle } from \"../data/filesystem\";\nimport Library, { distributeLibraryItemsOnSquareGrid } from \"../data/library\";\nimport { restoreAppState, restoreElements } from \"../data/restore\";\nimport type { JsonDrawLibraryIds } from \"../data/types\";\nimport { editorJotaiStore, type WritableAtom } from \"../editor-jotai\";\nimport { EraserTrail } from \"../eraser\";\nimport { ImageSceneDataError } from \"../errors\";\nimport { Fonts } from \"../fonts\";\nimport { getCenter, getDistance } from \"../gesture\";\nimport { History } from \"../history\";\nimport { defaultLang, getLanguage, languages, setLanguage, t } from \"../i18n\";\nimport { LaserTrails } from \"../laser-trails\";\nimport { LassoTrail } from \"../lasso\";\nimport { isMaybeMermaidDefinition } from \"../mermaid\";\nimport { withBatchedUpdates, withBatchedUpdatesThrottled } from \"../reactUtils\";\nimport {\n  calculateScrollCenter,\n  getElementsWithinSelection,\n  getNormalizedZoom,\n  getSelectedElements,\n  hasBackground,\n  isSomeElementSelected,\n} from \"../scene\";\nimport { Renderer } from \"../scene/Renderer\";\nimport { isOverScrollBars } from \"../scene/scrollbars\";\nimport type { RenderInteractiveSceneCallback, ScrollBars } from \"../scene/types\";\nimport { getStateForZoom } from \"../scene/zoom\";\nimport { getShortcutKey } from \"../shortcut\";\nimport {\n  getSnapLinesAtPointer,\n  snapDraggedElements,\n  isActiveToolNonLinearSnappable,\n  snapNewElement,\n  snapResizingElements,\n  isSnappingEnabled,\n  getVisibleGaps,\n  getReferenceSnapPoints,\n  SnapCache,\n  isGridModeEnabled,\n} from \"../snapping\";\nimport type {\n  AppClassProperties,\n  AppProps,\n  AppState,\n  BinaryFileData,\n  JsonDrawImperativeAPI,\n  BinaryFiles,\n  Gesture,\n  GestureEvent,\n  LibraryItems,\n  PointerDownState,\n  SceneData,\n  FrameNameBoundsCache,\n  SidebarName,\n  SidebarTabName,\n  KeyboardModifiersObject,\n  CollaboratorPointer,\n  ToolType,\n  OnUserFollowedPayload,\n  UnsubscribeCallback,\n  EmbedsValidationStatus,\n  ElementsPendingErasure,\n  GenerateDiagramToCode,\n  NullableGridSize,\n  Offsets,\n  JsonDrawInitialDataState,\n} from \"../types\";\nimport { textWysiwyg } from \"../wysiwyg/textWysiwyg\";\nimport BraveMeasureTextError from \"./BraveMeasureTextError\";\nimport { ContextMenu, CONTEXT_MENU_SEPARATOR } from \"./ContextMenu\";\nimport type { ContextMenuItems } from \"./ContextMenu\";\nimport FollowMode from \"./FollowMode/FollowMode\";\nimport { isSidebarDockedAtom } from \"./Sidebar/Sidebar\";\nimport { StaticCanvas, InteractiveCanvas } from \"./canvases\";\nimport { ElementCanvasButtons } from \"./canvases/ElementCanvasButtons\";\nimport { activeEyeDropperAtom } from \"./canvases/EyeDropper\";\nimport NewElementCanvas from \"./canvases/NewElementCanvas\";\nimport { SVGLayer } from \"./canvases/SVGLayer\";\nimport { activeConfirmDialogAtom } from \"./dialogs/ActiveConfirmDialog\";\nimport { isPointHittingLink, isPointHittingLinkIcon } from \"./hyperlink/helpers\";\nimport { MagicIcon, copyIcon, fullscreenIcon } from \"./icons\";\nimport LayerUI from \"./layout/LayerUI\";\nimport ConvertElementTypePopup, {\n  getConversionTypeFromElements,\n  convertElementTypePopupAtom,\n  convertElementTypes,\n} from \"./popups/ConvertElementTypePopup\";\nimport UnlockPopup from \"./popups/UnlockPopup\";\nimport { searchItemInFocusAtom } from \"./search/SearchMenu\";\nimport { findShapeByKey } from \"./shapes\";\nimport { ElementCanvasButton } from \"./toolbar/MagicButton\";\nimport { Toast } from \"./ui/Toast\";\n\nconst AppContext = React.createContext<AppClassProperties>(null!);\nconst AppPropsContext = React.createContext<AppProps>(null!);\n\nconst editorInterfaceContextInitialValue: EditorInterface = {\n  formFactor: \"desktop\",\n  desktopUIMode: \"full\",\n  userAgent: createUserAgentDescriptor(typeof navigator !== \"undefined\" ? navigator.userAgent : \"\"),\n  isTouchScreen: false,\n  canFitSidebar: false,\n  isLandscape: true,\n};\nconst EditorInterfaceContext = React.createContext<EditorInterface>(\n  editorInterfaceContextInitialValue\n);\nEditorInterfaceContext.displayName = \"EditorInterfaceContext\";\n\nexport const JsonDrawContainerContext = React.createContext<{\n  container: HTMLDivElement | null;\n  id: string | null;\n}>({ container: null, id: null });\nJsonDrawContainerContext.displayName = \"JsonDrawContainerContext\";\n\nconst JsonDrawElementsContext = React.createContext<readonly NonDeletedJsonDrawElement[]>([]);\nJsonDrawElementsContext.displayName = \"JsonDrawElementsContext\";\n\nconst JsonDrawAppStateContext = React.createContext<AppState>({\n  ...getDefaultAppState(),\n  width: 0,\n  height: 0,\n  offsetLeft: 0,\n  offsetTop: 0,\n});\nJsonDrawAppStateContext.displayName = \"JsonDrawAppStateContext\";\n\nconst JsonDrawSetAppStateContext = React.createContext<React.Component<any, AppState>[\"setState\"]>(\n  () => {\n    console.warn(\"Uninitialized JsonDrawSetAppStateContext context!\");\n  }\n);\nJsonDrawSetAppStateContext.displayName = \"JsonDrawSetAppStateContext\";\n\nconst JsonDrawActionManagerContext = React.createContext<ActionManager>(null!);\nJsonDrawActionManagerContext.displayName = \"JsonDrawActionManagerContext\";\n\nexport const useApp = () => useContext(AppContext);\nexport const useAppProps = () => useContext(AppPropsContext);\nexport const useEditorInterface = () => useContext<EditorInterface>(EditorInterfaceContext);\nexport const useStylesPanelMode = () => deriveStylesPanelMode(useEditorInterface());\nexport const useJsonDrawContainer = () => useContext(JsonDrawContainerContext);\nexport const useJsonDrawElements = () => useContext(JsonDrawElementsContext);\nexport const useJsonDrawAppState = () => useContext(JsonDrawAppStateContext);\nexport const useJsonDrawSetAppState = () => useContext(JsonDrawSetAppStateContext);\nexport const useJsonDrawActionManager = () => useContext(JsonDrawActionManagerContext);\n\nlet didTapTwice: boolean = false;\nlet tappedTwiceTimer = 0;\nlet firstTapPosition: { x: number; y: number } | null = null;\nlet isHoldingSpace: boolean = false;\nlet isPanning: boolean = false;\nlet isDraggingScrollBar: boolean = false;\nlet currentScrollBars: ScrollBars = { horizontal: null, vertical: null };\nlet touchTimeout = 0;\nlet invalidateContextMenu = false;\n\n/**\n * Map of youtube embed video states\n */\nconst YOUTUBE_VIDEO_STATES = new Map<JsonDrawElement[\"id\"], ValueOf<typeof YOUTUBE_STATES>>();\n\nlet IS_PLAIN_PASTE = false;\nlet IS_PLAIN_PASTE_TIMER = 0;\nlet PLAIN_PASTE_TOAST_SHOWN = false;\n\nlet lastPointerUp: (() => void) | null = null;\nconst gesture: Gesture = {\n  pointers: new Map(),\n  lastCenter: null,\n  initialDistance: null,\n  initialScale: null,\n};\n\nclass App extends React.Component<AppProps, AppState> {\n  canvas: AppClassProperties[\"canvas\"];\n  interactiveCanvas: AppClassProperties[\"interactiveCanvas\"] = null;\n  rc: RoughCanvas;\n  unmounted: boolean = false;\n  actionManager: ActionManager;\n  editorInterface: EditorInterface = editorInterfaceContextInitialValue;\n  private stylesPanelMode: StylesPanelMode = deriveStylesPanelMode(\n    editorInterfaceContextInitialValue\n  );\n\n  private jsondrawContainerRef = React.createRef<HTMLDivElement>();\n\n  public scene: Scene;\n  public fonts: Fonts;\n  public renderer: Renderer;\n  public visibleElements: readonly NonDeletedJsonDrawElement[];\n  private resizeObserver: ResizeObserver | undefined;\n  public library: AppClassProperties[\"library\"];\n  public libraryItemsFromStorage: LibraryItems | undefined;\n  public id: string;\n  private store: Store;\n  private history: History;\n  public jsondrawContainerValue: {\n    container: HTMLDivElement | null;\n    id: string;\n  };\n\n  public files: BinaryFiles = {};\n  public imageCache: AppClassProperties[\"imageCache\"] = new Map();\n  private iFrameRefs = new Map<JsonDrawElement[\"id\"], HTMLIFrameElement>();\n  /**\n   * Indicates whether the embeddable's url has been validated for rendering.\n   * If value not set, indicates that the validation is pending.\n   * Initially or on url change the flag is not reset so that we can guarantee\n   * the validation came from a trusted source (the editor).\n   **/\n  private embedsValidationStatus: EmbedsValidationStatus = new Map();\n  /** embeds that have been inserted to DOM (as a perf optim, we don't want to\n   * insert to DOM before user initially scrolls to them) */\n  private initializedEmbeds = new Set<JsonDrawIframeLikeElement[\"id\"]>();\n\n  private handleToastClose = () => {\n    this.setToast(null);\n  };\n\n  private elementsPendingErasure: ElementsPendingErasure = new Set();\n\n  public flowChartCreator: FlowChartCreator = new FlowChartCreator();\n  private flowChartNavigator: FlowChartNavigator = new FlowChartNavigator();\n\n  bindModeHandler: ReturnType<typeof setTimeout> | null = null;\n\n  hitLinkElement?: NonDeletedJsonDrawElement;\n  lastPointerDownEvent: React.PointerEvent<HTMLElement> | null = null;\n  lastPointerUpEvent: React.PointerEvent<HTMLElement> | PointerEvent | null = null;\n  lastPointerMoveEvent: PointerEvent | null = null;\n  /** current frame pointer cords */\n  lastPointerMoveCoords: { x: number; y: number } | null = null;\n  /** previous frame pointer coords */\n  previousPointerMoveCoords: { x: number; y: number } | null = null;\n  lastViewportPosition = { x: 0, y: 0 };\n\n  animationFrameHandler = new AnimationFrameHandler();\n\n  laserTrails = new LaserTrails(this.animationFrameHandler, this);\n  eraserTrail = new EraserTrail(this.animationFrameHandler, this);\n  lassoTrail = new LassoTrail(this.animationFrameHandler, this);\n\n  onChangeEmitter = new Emitter<\n    [elements: readonly JsonDrawElement[], appState: AppState, files: BinaryFiles]\n  >();\n\n  onPointerDownEmitter = new Emitter<\n    [\n      activeTool: AppState[\"activeTool\"],\n      pointerDownState: PointerDownState,\n      event: React.PointerEvent<HTMLElement>,\n    ]\n  >();\n\n  onPointerUpEmitter = new Emitter<\n    [activeTool: AppState[\"activeTool\"], pointerDownState: PointerDownState, event: PointerEvent]\n  >();\n  onUserFollowEmitter = new Emitter<[payload: OnUserFollowedPayload]>();\n  onScrollChangeEmitter = new Emitter<[scrollX: number, scrollY: number, zoom: AppState[\"zoom\"]]>();\n\n  missingPointerEventCleanupEmitter = new Emitter<[event: PointerEvent | null]>();\n  onRemoveEventListenersEmitter = new Emitter<[]>();\n\n  constructor(props: AppProps) {\n    super(props);\n    const defaultAppState = getDefaultAppState();\n    const {\n      jsondrawAPI,\n      viewModeEnabled = false,\n      zenModeEnabled = false,\n      gridModeEnabled = false,\n      objectsSnapModeEnabled = false,\n      theme = defaultAppState.theme,\n      name = `${t(\"labels.untitled\")}-${getDateTime()}`,\n    } = props;\n    this.state = {\n      ...defaultAppState,\n      theme,\n      isLoading: true,\n      ...this.getCanvasOffsets(),\n      viewModeEnabled,\n      zenModeEnabled,\n      objectsSnapModeEnabled,\n      gridModeEnabled: gridModeEnabled ?? defaultAppState.gridModeEnabled,\n      name,\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n\n    this.refreshEditorInterface();\n    this.stylesPanelMode = deriveStylesPanelMode(this.editorInterface);\n\n    this.id = nanoid();\n    this.library = new Library(this);\n    this.actionManager = new ActionManager(\n      this.syncActionResult,\n      () => this.state,\n      () => this.scene.getElementsIncludingDeleted(),\n      this\n    );\n    this.scene = new Scene();\n\n    this.canvas = document.createElement(\"canvas\");\n    this.rc = rough.canvas(this.canvas);\n    this.renderer = new Renderer(this.scene);\n    this.visibleElements = [];\n\n    this.store = new Store(this);\n    this.history = new History(this.store);\n\n    if (jsondrawAPI) {\n      const api: JsonDrawImperativeAPI = {\n        updateScene: this.updateScene,\n        applyDeltas: this.applyDeltas,\n        mutateElement: this.mutateElement,\n        updateLibrary: this.library.updateLibrary,\n        addFiles: this.addFiles,\n        resetScene: this.resetScene,\n        getSceneElementsIncludingDeleted: this.getSceneElementsIncludingDeleted,\n        getSceneElementsMapIncludingDeleted: this.getSceneElementsMapIncludingDeleted,\n        history: {\n          clear: this.resetHistory,\n        },\n        scrollToContent: this.scrollToContent,\n        getSceneElements: this.getSceneElements,\n        getAppState: () => this.state,\n        getFiles: () => this.files,\n        getName: this.getName,\n        registerAction: (action: Action) => {\n          this.actionManager.registerAction(action);\n        },\n        refresh: this.refresh,\n        setToast: this.setToast,\n        id: this.id,\n        setActiveTool: this.setActiveTool,\n        setCursor: this.setCursor,\n        resetCursor: this.resetCursor,\n        getEditorInterface: () => this.editorInterface,\n        updateFrameRendering: this.updateFrameRendering,\n        toggleSidebar: this.toggleSidebar,\n        onChange: cb => this.onChangeEmitter.on(cb),\n        onIncrement: cb => this.store.onStoreIncrementEmitter.on(cb),\n        onPointerDown: cb => this.onPointerDownEmitter.on(cb),\n        onPointerUp: cb => this.onPointerUpEmitter.on(cb),\n        onScrollChange: cb => this.onScrollChangeEmitter.on(cb),\n        onUserFollow: cb => this.onUserFollowEmitter.on(cb),\n      } as const;\n      if (typeof jsondrawAPI === \"function\") {\n        jsondrawAPI(api);\n      } else {\n        console.error(\"jsondrawAPI should be a function!\");\n      }\n    }\n\n    this.jsondrawContainerValue = {\n      container: this.jsondrawContainerRef.current,\n      id: this.id,\n    };\n\n    this.fonts = new Fonts(this.scene);\n    this.history = new History(this.store);\n\n    this.actionManager.registerAll(actions);\n    this.actionManager.registerAction(createUndoAction(this.history));\n    this.actionManager.registerAction(createRedoAction(this.history));\n  }\n\n  updateEditorAtom = <Value, Args extends unknown[], Result>(\n    atom: WritableAtom<Value, Args, Result>,\n    ...args: Args\n  ): Result => {\n    const result = editorJotaiStore.set(atom, ...args);\n    this.triggerRender();\n    return result;\n  };\n\n  private onWindowMessage(event: MessageEvent) {\n    if (event.origin !== \"https://player.vimeo.com\" && event.origin !== \"https://www.youtube.com\") {\n      return;\n    }\n\n    let data: any = null;\n    try {\n      data = JSON.parse(event.data);\n    } catch (e) {}\n    if (!data) {\n      return;\n    }\n\n    switch (event.origin) {\n      case \"https://player.vimeo.com\":\n        //Allowing for multiple instances of JsonDraw running in the window\n        if (data.method === \"paused\") {\n          let source: Window | null = null;\n          const iframes = document.body.querySelectorAll(\"iframe.jsondraw__embeddable\");\n          if (!iframes) {\n            break;\n          }\n          for (const iframe of iframes as NodeListOf<HTMLIFrameElement>) {\n            if (iframe.contentWindow === event.source) {\n              source = iframe.contentWindow;\n            }\n          }\n          source?.postMessage(\n            JSON.stringify({\n              method: data.value ? \"play\" : \"pause\",\n              value: true,\n            }),\n            \"*\"\n          );\n        }\n        break;\n      case \"https://www.youtube.com\":\n        if (\n          data.event === \"infoDelivery\" &&\n          data.info &&\n          data.id &&\n          typeof data.info.playerState === \"number\"\n        ) {\n          const id = data.id;\n          const playerState = data.info.playerState as number;\n          if ((Object.values(YOUTUBE_STATES) as number[]).includes(playerState)) {\n            YOUTUBE_VIDEO_STATES.set(id, playerState as ValueOf<typeof YOUTUBE_STATES>);\n          }\n        }\n        break;\n    }\n  }\n\n  private handleSkipBindMode() {\n    if (\n      this.state.selectedLinearElement?.initialState &&\n      !this.state.selectedLinearElement.initialState.arrowStartIsInside\n    ) {\n      invariant(\n        this.lastPointerMoveCoords,\n        \"Missing last pointer move coords when changing bind skip mode for arrow start\"\n      );\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      const hoveredElement = getHoveredElementForBinding(\n        pointFrom<GlobalPoint>(this.lastPointerMoveCoords.x, this.lastPointerMoveCoords.y),\n        this.scene.getNonDeletedElements(),\n        elementsMap\n      );\n      const element = LinearElementEditor.getElement(\n        this.state.selectedLinearElement.elementId,\n        elementsMap\n      );\n\n      if (element?.startBinding && hoveredElement?.id === element.startBinding.elementId) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            initialState: {\n              ...this.state.selectedLinearElement.initialState,\n              arrowStartIsInside: true,\n            },\n          },\n        });\n      }\n    }\n\n    if (this.state.bindMode === \"orbit\") {\n      if (this.bindModeHandler) {\n        clearTimeout(this.bindModeHandler);\n        this.bindModeHandler = null;\n      }\n\n      // PERF: It's okay since it's a single trigger from a key handler\n      // or single call from pointer move handler because the bindMode check\n      // will not pass the second time\n      flushSync(() => {\n        this.setState({\n          bindMode: \"skip\",\n        });\n      });\n\n      if (\n        this.lastPointerMoveCoords &&\n        this.state.selectedLinearElement?.selectedPointsIndices &&\n        this.state.selectedLinearElement?.selectedPointsIndices.length\n      ) {\n        const { x, y } = this.lastPointerMoveCoords;\n        const event = this.lastPointerMoveEvent ?? this.lastPointerDownEvent?.nativeEvent;\n        invariant(event, \"Last event must exist\");\n        const deltaX = x - this.state.selectedLinearElement.pointerOffset.x;\n        const deltaY = y - this.state.selectedLinearElement.pointerOffset.y;\n        const newState = this.state.multiElement\n          ? LinearElementEditor.handlePointerMove(\n              event,\n              this,\n              deltaX,\n              deltaY,\n              this.state.selectedLinearElement\n            )\n          : LinearElementEditor.handlePointDragging(\n              event,\n              this,\n              deltaX,\n              deltaY,\n              this.state.selectedLinearElement\n            );\n        if (newState) {\n          this.setState(newState);\n        }\n      }\n    }\n  }\n\n  private resetDelayedBindMode() {\n    if (this.bindModeHandler) {\n      clearTimeout(this.bindModeHandler);\n      this.bindModeHandler = null;\n    }\n\n    if (this.state.bindMode !== \"orbit\") {\n      // We need this iteration to complete binding and change\n      // back to orbit mode after that\n      setTimeout(() =>\n        this.setState({\n          bindMode: \"orbit\",\n        })\n      );\n    }\n  }\n\n  private previousHoveredBindableElement: NonDeletedJsonDrawElement | null = null;\n\n  private handleDelayedBindModeChange(\n    arrow: JsonDrawArrowElement,\n    hoveredElement: NonDeletedJsonDrawElement | null\n  ) {\n    if (arrow.isDeleted || isElbowArrow(arrow)) {\n      return;\n    }\n\n    const effector = () => {\n      this.bindModeHandler = null;\n\n      invariant(this.lastPointerMoveCoords, \"Expected lastPointerMoveCoords to be set\");\n\n      if (!this.state.multiElement) {\n        if (\n          !this.state.selectedLinearElement ||\n          !this.state.selectedLinearElement.selectedPointsIndices ||\n          !this.state.selectedLinearElement.selectedPointsIndices.length\n        ) {\n          return;\n        }\n\n        const startDragged = this.state.selectedLinearElement.selectedPointsIndices.includes(0);\n        const endDragged = this.state.selectedLinearElement.selectedPointsIndices.includes(\n          arrow.points.length - 1\n        );\n\n        // Check if the whole arrow is dragged by selecting all endpoints\n        if ((!startDragged && !endDragged) || (startDragged && endDragged)) {\n          return;\n        }\n      }\n\n      const { x, y } = this.lastPointerMoveCoords;\n      const hoveredElement = getHoveredElementForBinding(\n        pointFrom<GlobalPoint>(x, y),\n        this.scene.getNonDeletedElements(),\n        this.scene.getNonDeletedElementsMap()\n      );\n\n      if (hoveredElement && this.state.bindMode !== \"skip\") {\n        invariant(\n          this.state.selectedLinearElement?.elementId === arrow.id,\n          \"The selectedLinearElement is expected to not change while a bind mode timeout is ticking\"\n        );\n\n        // Once the start is set to inside binding, it remains so\n        const arrowStartIsInside =\n          this.state.selectedLinearElement.initialState.arrowStartIsInside ||\n          arrow.startBinding?.elementId === hoveredElement.id;\n\n        // Change the global binding mode\n        flushSync(() => {\n          invariant(\n            this.state.selectedLinearElement,\n            \"this.state.selectedLinearElement must exist\"\n          );\n\n          this.setState({\n            bindMode: \"inside\",\n            selectedLinearElement: {\n              ...this.state.selectedLinearElement,\n              initialState: {\n                ...this.state.selectedLinearElement.initialState,\n                arrowStartIsInside,\n              },\n            },\n          });\n        });\n\n        const event = this.lastPointerMoveEvent ?? this.lastPointerDownEvent?.nativeEvent;\n        invariant(event, \"Last event must exist\");\n        const deltaX = x - this.state.selectedLinearElement.pointerOffset.x;\n        const deltaY = y - this.state.selectedLinearElement.pointerOffset.y;\n        const newState = this.state.multiElement\n          ? LinearElementEditor.handlePointerMove(\n              event,\n              this,\n              deltaX,\n              deltaY,\n              this.state.selectedLinearElement\n            )\n          : LinearElementEditor.handlePointDragging(\n              event,\n              this,\n              deltaX,\n              deltaY,\n              this.state.selectedLinearElement\n            );\n        if (newState) {\n          this.setState(newState);\n        }\n      }\n    };\n\n    let isOverlapping = false;\n    if (this.state.selectedLinearElement?.selectedPointsIndices) {\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      const startDragged = this.state.selectedLinearElement.selectedPointsIndices.includes(0);\n      const endDragged = this.state.selectedLinearElement.selectedPointsIndices.includes(\n        arrow.points.length - 1\n      );\n      const startElement = startDragged\n        ? hoveredElement\n        : arrow.startBinding && elementsMap.get(arrow.startBinding.elementId);\n      const endElement = endDragged\n        ? hoveredElement\n        : arrow.endBinding && elementsMap.get(arrow.endBinding.elementId);\n      const startBounds = startElement && getElementBounds(startElement, elementsMap);\n      const endBounds = endElement && getElementBounds(endElement, elementsMap);\n      isOverlapping = !!(\n        startBounds &&\n        endBounds &&\n        startElement.id !== endElement.id &&\n        doBoundsIntersect(startBounds, endBounds)\n      );\n    }\n\n    const startDragged = this.state.selectedLinearElement?.selectedPointsIndices?.includes(0);\n    const endDragged = this.state.selectedLinearElement?.selectedPointsIndices?.includes(\n      arrow.points.length - 1\n    );\n    const currentBinding = startDragged ? \"startBinding\" : endDragged ? \"endBinding\" : null;\n    const otherBinding = startDragged ? \"endBinding\" : endDragged ? \"startBinding\" : null;\n    const isAlreadyInsideBindingToSameElement =\n      (otherBinding &&\n        arrow[otherBinding]?.mode === \"inside\" &&\n        arrow[otherBinding]?.elementId === hoveredElement?.id) ||\n      (currentBinding &&\n        arrow[currentBinding]?.mode === \"inside\" &&\n        hoveredElement?.id === arrow[currentBinding]?.elementId);\n\n    if (\n      currentBinding &&\n      otherBinding &&\n      arrow[currentBinding]?.mode === \"inside\" &&\n      hoveredElement?.id !== arrow[currentBinding]?.elementId &&\n      arrow[otherBinding]?.elementId !== arrow[currentBinding]?.elementId\n    ) {\n      // Update binding out of place to orbit mode\n      this.scene.mutateElement(\n        arrow,\n        {\n          [currentBinding]: {\n            ...arrow[currentBinding],\n            mode: \"orbit\",\n          },\n        },\n        {\n          informMutation: false,\n          isDragging: true,\n        }\n      );\n    }\n\n    if (\n      !hoveredElement ||\n      (this.previousHoveredBindableElement &&\n        hoveredElement.id !== this.previousHoveredBindableElement.id)\n    ) {\n      // Clear the timeout if we're not hovering a bindable\n      if (this.bindModeHandler) {\n        clearTimeout(this.bindModeHandler);\n        this.bindModeHandler = null;\n      }\n\n      // Clear the inside binding mode too\n      if (this.state.bindMode === \"inside\") {\n        flushSync(() => {\n          this.setState({\n            bindMode: \"orbit\",\n          });\n        });\n      }\n\n      this.previousHoveredBindableElement = null;\n    } else if (\n      !this.bindModeHandler &&\n      (!this.state.newElement || !arrow.startBinding || isOverlapping) &&\n      !isAlreadyInsideBindingToSameElement\n    ) {\n      // We are hovering a bindable element\n      this.bindModeHandler = setTimeout(effector, BIND_MODE_TIMEOUT);\n    }\n\n    this.previousHoveredBindableElement = hoveredElement;\n  }\n\n  private cacheEmbeddableRef(element: JsonDrawIframeLikeElement, ref: HTMLIFrameElement | null) {\n    if (ref) {\n      this.iFrameRefs.set(element.id, ref);\n    }\n  }\n\n  /**\n   * Returns gridSize taking into account `gridModeEnabled`.\n   * If disabled, returns null.\n   */\n  public getEffectiveGridSize = () => {\n    return (isGridModeEnabled(this) ? this.state.gridSize : null) as NullableGridSize;\n  };\n\n  private getHTMLIFrameElement(element: JsonDrawIframeLikeElement): HTMLIFrameElement | undefined {\n    return this.iFrameRefs.get(element.id);\n  }\n\n  private handleEmbeddableCenterClick(element: JsonDrawIframeLikeElement) {\n    if (\n      this.state.activeEmbeddable?.element === element &&\n      this.state.activeEmbeddable?.state === \"active\"\n    ) {\n      return;\n    }\n\n    // The delay serves two purposes\n    // 1. To prevent first click propagating to iframe on mobile,\n    //    else the click will immediately start and stop the video\n    // 2. If the user double clicks the frame center to activate it\n    //    without the delay youtube will immediately open the video\n    //    in fullscreen mode\n    setTimeout(() => {\n      this.setState({\n        activeEmbeddable: { element, state: \"active\" },\n        selectedElementIds: { [element.id]: true },\n        newElement: null,\n        selectionElement: null,\n      });\n    }, 100);\n\n    if (isIframeElement(element)) {\n      return;\n    }\n\n    const iframe = this.getHTMLIFrameElement(element);\n\n    if (!iframe?.contentWindow) {\n      return;\n    }\n\n    if (iframe.src.includes(\"youtube\")) {\n      const state = YOUTUBE_VIDEO_STATES.get(element.id);\n      if (!state) {\n        YOUTUBE_VIDEO_STATES.set(element.id, YOUTUBE_STATES.UNSTARTED);\n        iframe.contentWindow.postMessage(\n          JSON.stringify({\n            event: \"listening\",\n            id: element.id,\n          }),\n          \"*\"\n        );\n      }\n      switch (state) {\n        case YOUTUBE_STATES.PLAYING:\n        case YOUTUBE_STATES.BUFFERING:\n          iframe.contentWindow?.postMessage(\n            JSON.stringify({\n              event: \"command\",\n              func: \"pauseVideo\",\n              args: \"\",\n            }),\n            \"*\"\n          );\n          break;\n        default:\n          iframe.contentWindow?.postMessage(\n            JSON.stringify({\n              event: \"command\",\n              func: \"playVideo\",\n              args: \"\",\n            }),\n            \"*\"\n          );\n      }\n    }\n\n    if (iframe.src.includes(\"player.vimeo.com\")) {\n      iframe.contentWindow.postMessage(\n        JSON.stringify({\n          method: \"paused\", //video play/pause in onWindowMessage handler\n        }),\n        \"*\"\n      );\n    }\n  }\n\n  private isIframeLikeElementCenter(\n    el: JsonDrawIframeLikeElement | null,\n    event: React.PointerEvent<HTMLElement> | PointerEvent,\n    sceneX: number,\n    sceneY: number\n  ) {\n    return (\n      el &&\n      !event.altKey &&\n      !event.shiftKey &&\n      !event.metaKey &&\n      !event.ctrlKey &&\n      (this.state.activeEmbeddable?.element !== el ||\n        this.state.activeEmbeddable?.state === \"hover\" ||\n        !this.state.activeEmbeddable) &&\n      sceneX >= el.x + el.width / 3 &&\n      sceneX <= el.x + (2 * el.width) / 3 &&\n      sceneY >= el.y + el.height / 3 &&\n      sceneY <= el.y + (2 * el.height) / 3\n    );\n  }\n\n  private updateEmbedValidationStatus = (element: JsonDrawEmbeddableElement, status: boolean) => {\n    this.embedsValidationStatus.set(element.id, status);\n    ShapeCache.delete(element);\n  };\n\n  private updateEmbeddables = () => {\n    const iframeLikes = new Set<JsonDrawIframeLikeElement[\"id\"]>();\n\n    let updated = false;\n    this.scene.getNonDeletedElements().filter(element => {\n      if (isEmbeddableElement(element)) {\n        iframeLikes.add(element.id);\n        if (!this.embedsValidationStatus.has(element.id)) {\n          updated = true;\n\n          const validated = embeddableURLValidator(element.link, this.props.validateEmbeddable);\n\n          this.updateEmbedValidationStatus(element, validated);\n        }\n      } else if (isIframeElement(element)) {\n        iframeLikes.add(element.id);\n      }\n      return false;\n    });\n\n    if (updated) {\n      this.scene.triggerUpdate();\n    }\n\n    // GC\n    this.iFrameRefs.forEach((ref, id) => {\n      if (!iframeLikes.has(id)) {\n        this.iFrameRefs.delete(id);\n      }\n    });\n  };\n\n  private renderEmbeddables() {\n    const scale = this.state.zoom.value;\n    const normalizedWidth = this.state.width;\n    const normalizedHeight = this.state.height;\n\n    const embeddableElements = this.scene\n      .getNonDeletedElements()\n      .filter(\n        (el): el is Ordered<NonDeleted<JsonDrawIframeLikeElement>> =>\n          (isEmbeddableElement(el) && this.embedsValidationStatus.get(el.id) === true) ||\n          isIframeElement(el)\n      );\n\n    return (\n      <>\n        {embeddableElements.map(el => {\n          const { x, y } = sceneCoordsToViewportCoords({ sceneX: el.x, sceneY: el.y }, this.state);\n\n          const isVisible = isElementInViewport(\n            el,\n            normalizedWidth,\n            normalizedHeight,\n            this.state,\n            this.scene.getNonDeletedElementsMap()\n          );\n          const hasBeenInitialized = this.initializedEmbeds.has(el.id);\n\n          if (isVisible && !hasBeenInitialized) {\n            this.initializedEmbeds.add(el.id);\n          }\n          const shouldRender = isVisible || hasBeenInitialized;\n\n          if (!shouldRender) {\n            return null;\n          }\n\n          let src: IframeData | null;\n\n          if (isIframeElement(el)) {\n            src = null;\n\n            const data: MagicGenerationData = (el.customData?.generationData ??\n              this.magicGenerations.get(el.id)) || {\n              status: \"error\",\n              message: \"No generation data\",\n              code: \"ERR_NO_GENERATION_DATA\",\n            };\n\n            if (data.status === \"done\") {\n              const html = data.html;\n              src = {\n                intrinsicSize: { w: el.width, h: el.height },\n                type: \"document\",\n                srcdoc: () => {\n                  return html;\n                },\n              } as const;\n            } else if (data.status === \"pending\") {\n              src = {\n                intrinsicSize: { w: el.width, h: el.height },\n                type: \"document\",\n                srcdoc: () => {\n                  return createSrcDoc(`\n                    <style>\n                      html, body {\n                        width: 100%;\n                        height: 100%;\n                        color: ${this.state.theme === THEME.DARK ? \"white\" : \"black\"};\n                      }\n                      body {\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        flex-direction: column;\n                        gap: 1rem;\n                      }\n\n                      .Spinner {\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        margin-left: auto;\n                        margin-right: auto;\n                      }\n\n                      .Spinner svg {\n                        animation: rotate 1.6s linear infinite;\n                        transform-origin: center center;\n                        width: 40px;\n                        height: 40px;\n                      }\n\n                      .Spinner circle {\n                        stroke: currentColor;\n                        animation: dash 1.6s linear 0s infinite;\n                        stroke-linecap: round;\n                      }\n\n                      @keyframes rotate {\n                        100% {\n                          transform: rotate(360deg);\n                        }\n                      }\n\n                      @keyframes dash {\n                        0% {\n                          stroke-dasharray: 1, 300;\n                          stroke-dashoffset: 0;\n                        }\n                        50% {\n                          stroke-dasharray: 150, 300;\n                          stroke-dashoffset: -200;\n                        }\n                        100% {\n                          stroke-dasharray: 1, 300;\n                          stroke-dashoffset: -280;\n                        }\n                      }\n                    </style>\n                    <div class=\"Spinner\">\n                      <svg\n                        viewBox=\"0 0 100 100\"\n                      >\n                        <circle\n                          cx=\"50\"\n                          cy=\"50\"\n                          r=\"46\"\n                          stroke-width=\"8\"\n                          fill=\"none\"\n                          stroke-miter-limit=\"10\"\n                        />\n                      </svg>\n                    </div>\n                    <div>Generating...</div>\n                  `);\n                },\n              } as const;\n            } else {\n              let message: string;\n              if (data.code === \"ERR_GENERATION_INTERRUPTED\") {\n                message = \"Generation was interrupted...\";\n              } else {\n                message = data.message || \"Generation failed\";\n              }\n              src = {\n                intrinsicSize: { w: el.width, h: el.height },\n                type: \"document\",\n                srcdoc: () => {\n                  return createSrcDoc(`\n                    <style>\n                    html, body {\n                      height: 100%;\n                    }\n                      body {\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        justify-content: center;\n                        color: ${COLOR_PALETTE.red[3]};\n                      }\n                      h1, h3 {\n                        margin-top: 0;\n                        margin-bottom: 0.5rem;\n                      }\n                    </style>\n                    <h1>Error!</h1>\n                    <h3>${message}</h3>\n                  `);\n                },\n              } as const;\n            }\n          } else {\n            src = getEmbedLink(toValidURL(el.link || \"\"));\n          }\n\n          const isActive =\n            this.state.activeEmbeddable?.element === el &&\n            this.state.activeEmbeddable?.state === \"active\";\n          const isHovered =\n            this.state.activeEmbeddable?.element === el &&\n            this.state.activeEmbeddable?.state === \"hover\";\n\n          return (\n            <div\n              key={el.id}\n              className={clsx(\"jsondraw__embeddable-container\", {\n                \"is-hovered\": isHovered,\n              })}\n              style={{\n                transform: isVisible\n                  ? `translate(${x - this.state.offsetLeft}px, ${\n                      y - this.state.offsetTop\n                    }px) scale(${scale})`\n                  : \"none\",\n                display: isVisible ? \"block\" : \"none\",\n                opacity: getRenderOpacity(\n                  el,\n                  getContainingFrame(el, this.scene.getNonDeletedElementsMap()),\n                  this.elementsPendingErasure,\n                  null,\n                  this.state.openDialog?.name === \"elementLinkSelector\"\n                    ? DEFAULT_REDUCED_GLOBAL_ALPHA\n                    : 1\n                ),\n                [\"--embeddable-radius\" as string]: `${getCornerRadius(\n                  Math.min(el.width, el.height),\n                  el\n                )}px`,\n              }}\n            >\n              <div\n                //this is a hack that addresses isse with embedded jsonviz.online embeddable\n                //https://github.com/jsondraw/jsondraw/pull/6691#issuecomment-1607383938\n                /*ref={(ref) => {\n                  if (!this.jsondrawContainerRef.current) {\n                    return;\n                  }\n                  const container = this.jsondrawContainerRef.current;\n                  const sh = container.scrollHeight;\n                  const ch = container.clientHeight;\n                  if (sh !== ch) {\n                    container.style.height = `${sh}px`;\n                    setTimeout(() => {\n                      container.style.height = `100%`;\n                    });\n                  }\n                }}*/\n                className=\"jsondraw__embeddable-container__inner\"\n                style={{\n                  width: isVisible ? `${el.width}px` : 0,\n                  height: isVisible ? `${el.height}px` : 0,\n                  transform: isVisible ? `rotate(${el.angle}rad)` : \"none\",\n                  pointerEvents: isActive ? POINTER_EVENTS.enabled : POINTER_EVENTS.disabled,\n                }}\n              >\n                {isHovered && (\n                  <div className=\"jsondraw__embeddable-hint\">\n                    {t(\"buttons.embeddableInteractionButton\")}\n                  </div>\n                )}\n                <div\n                  className=\"jsondraw__embeddable__outer\"\n                  style={{\n                    padding: `${el.strokeWidth}px`,\n                  }}\n                >\n                  {(isEmbeddableElement(el)\n                    ? this.props.renderEmbeddable?.(el, this.state)\n                    : null) ?? (\n                    <iframe\n                      ref={ref => this.cacheEmbeddableRef(el, ref)}\n                      className=\"jsondraw__embeddable\"\n                      srcDoc={src?.type === \"document\" ? src.srcdoc(this.state.theme) : undefined}\n                      src={src?.type !== \"document\" ? (src?.link ?? \"\") : undefined}\n                      // https://stackoverflow.com/q/18470015\n                      scrolling=\"no\"\n                      referrerPolicy=\"no-referrer-when-downgrade\"\n                      title=\"JsonDraw Embedded Content\"\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                      allowFullScreen={true}\n                      sandbox={`${\n                        src?.sandbox?.allowSameOrigin ? \"allow-same-origin\" : \"\"\n                      } allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n\n  private getFrameNameDOMId = (frameElement: JsonDrawElement) => {\n    return `${this.id}-frame-name-${frameElement.id}`;\n  };\n\n  frameNameBoundsCache: FrameNameBoundsCache = {\n    get: frameElement => {\n      let bounds = this.frameNameBoundsCache._cache.get(frameElement.id);\n      if (\n        !bounds ||\n        bounds.zoom !== this.state.zoom.value ||\n        bounds.versionNonce !== frameElement.versionNonce\n      ) {\n        const frameNameDiv = document.getElementById(this.getFrameNameDOMId(frameElement));\n\n        if (frameNameDiv) {\n          const box = frameNameDiv.getBoundingClientRect();\n          const boxSceneTopLeft = viewportCoordsToSceneCoords(\n            { clientX: box.x, clientY: box.y },\n            this.state\n          );\n          const boxSceneBottomRight = viewportCoordsToSceneCoords(\n            { clientX: box.right, clientY: box.bottom },\n            this.state\n          );\n\n          bounds = {\n            x: boxSceneTopLeft.x,\n            y: boxSceneTopLeft.y,\n            width: boxSceneBottomRight.x - boxSceneTopLeft.x,\n            height: boxSceneBottomRight.y - boxSceneTopLeft.y,\n            angle: 0,\n            zoom: this.state.zoom.value,\n            versionNonce: frameElement.versionNonce,\n          };\n\n          this.frameNameBoundsCache._cache.set(frameElement.id, bounds);\n\n          return bounds;\n        }\n        return null;\n      }\n\n      return bounds;\n    },\n    /**\n     * @private\n     */\n    _cache: new Map(),\n  };\n\n  private resetEditingFrame = (frame: JsonDrawFrameLikeElement | null) => {\n    if (frame) {\n      this.scene.mutateElement(frame, { name: frame.name?.trim() || null });\n    }\n    this.setState({ editingFrame: null });\n  };\n\n  private renderFrameNames = () => {\n    if (!this.state.frameRendering.enabled || !this.state.frameRendering.name) {\n      if (this.state.editingFrame) {\n        this.resetEditingFrame(null);\n      }\n      return null;\n    }\n\n    const isDarkTheme = this.state.theme === THEME.DARK;\n    const nonDeletedFramesLikes = this.scene.getNonDeletedFramesLikes();\n\n    const focusedSearchMatch =\n      nonDeletedFramesLikes.length > 0\n        ? this.state.searchMatches?.focusedId &&\n          isFrameLikeElement(this.scene.getElement(this.state.searchMatches.focusedId))\n          ? this.state.searchMatches.matches.find(sm => sm.focus)\n          : null\n        : null;\n\n    return nonDeletedFramesLikes.map(f => {\n      if (\n        !isElementInViewport(\n          f,\n          this.canvas.width / window.devicePixelRatio,\n          this.canvas.height / window.devicePixelRatio,\n          {\n            offsetLeft: this.state.offsetLeft,\n            offsetTop: this.state.offsetTop,\n            scrollX: this.state.scrollX,\n            scrollY: this.state.scrollY,\n            zoom: this.state.zoom,\n          },\n          this.scene.getNonDeletedElementsMap()\n        )\n      ) {\n        if (this.state.editingFrame === f.id) {\n          this.resetEditingFrame(f);\n        }\n        // if frame not visible, don't render its name\n        return null;\n      }\n\n      const { x: x1, y: y1 } = sceneCoordsToViewportCoords(\n        { sceneX: f.x, sceneY: f.y },\n        this.state\n      );\n\n      const FRAME_NAME_EDIT_PADDING = 6;\n\n      let frameNameJSX;\n\n      const frameName = getFrameLikeTitle(f);\n\n      if (f.id === this.state.editingFrame) {\n        const frameNameInEdit = frameName;\n\n        frameNameJSX = (\n          <input\n            autoFocus\n            value={frameNameInEdit}\n            onChange={e => {\n              this.scene.mutateElement(f, {\n                name: e.target.value,\n              });\n            }}\n            onFocus={e => e.target.select()}\n            onBlur={() => this.resetEditingFrame(f)}\n            onKeyDown={event => {\n              // for some inexplicable reason, `onBlur` triggered on ESC\n              // does not reset `state.editingFrame` despite being called,\n              // and we need to reset it here as well\n              if (event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) {\n                this.resetEditingFrame(f);\n              }\n            }}\n            style={{\n              background: isDarkTheme\n                ? applyDarkModeFilter(this.state.viewBackgroundColor)\n                : this.state.viewBackgroundColor,\n              zIndex: 2,\n              border: \"none\",\n              display: \"block\",\n              padding: `${FRAME_NAME_EDIT_PADDING}px`,\n              borderRadius: 4,\n              boxShadow: \"inset 0 0 0 1px var(--color-primary)\",\n              fontFamily: \"Assistant\",\n              fontSize: `${FRAME_STYLE.nameFontSize}px`,\n              transform: `translate(-${FRAME_NAME_EDIT_PADDING}px, ${FRAME_NAME_EDIT_PADDING}px)`,\n              color: isDarkTheme ? FRAME_STYLE.nameColorDarkTheme : FRAME_STYLE.nameColorLightTheme,\n              overflow: \"hidden\",\n              maxWidth: `${document.body.clientWidth - x1 - FRAME_NAME_EDIT_PADDING}px`,\n            }}\n            size={frameNameInEdit.length + 1 || 1}\n            dir=\"auto\"\n            autoComplete=\"off\"\n            autoCapitalize=\"off\"\n            autoCorrect=\"off\"\n          />\n        );\n      } else {\n        frameNameJSX = frameName;\n      }\n\n      return (\n        <div\n          id={this.getFrameNameDOMId(f)}\n          className={CLASSES.FRAME_NAME}\n          key={f.id}\n          style={{\n            position: \"absolute\",\n            // Positioning from bottom so that we don't to either\n            // calculate text height or adjust using transform (which)\n            // messes up input position when editing the frame name.\n            // This makes the positioning deterministic and we can calculate\n            // the same position when rendering to canvas / svg.\n            bottom: `${this.state.height + FRAME_STYLE.nameOffsetY - y1 + this.state.offsetTop}px`,\n            left: `${x1 - this.state.offsetLeft}px`,\n            zIndex: 2,\n            fontSize: FRAME_STYLE.nameFontSize,\n            color: isDarkTheme ? FRAME_STYLE.nameColorDarkTheme : FRAME_STYLE.nameColorLightTheme,\n            lineHeight: FRAME_STYLE.nameLineHeight,\n            width: \"max-content\",\n            maxWidth:\n              focusedSearchMatch?.id === f.id && focusedSearchMatch?.focus\n                ? \"none\"\n                : `${f.width * this.state.zoom.value}px`,\n            overflow: f.id === this.state.editingFrame ? \"visible\" : \"hidden\",\n            whiteSpace: \"nowrap\",\n            textOverflow: \"ellipsis\",\n            cursor: CURSOR_TYPE.MOVE,\n            pointerEvents: this.state.viewModeEnabled\n              ? POINTER_EVENTS.disabled\n              : POINTER_EVENTS.enabled,\n          }}\n          onPointerDown={event => this.handleCanvasPointerDown(event)}\n          onWheel={event => this.handleWheel(event)}\n          onContextMenu={this.handleCanvasContextMenu}\n          onDoubleClick={() => {\n            this.setState({\n              editingFrame: f.id,\n            });\n          }}\n        >\n          {frameNameJSX}\n        </div>\n      );\n    });\n  };\n\n  private toggleOverscrollBehavior(event: React.PointerEvent) {\n    // when pointer inside editor, disable overscroll behavior to prevent\n    // panning to trigger history back/forward on MacOS Chrome\n    document.documentElement.style.overscrollBehaviorX =\n      event.type === \"pointerenter\" ? \"none\" : \"auto\";\n  }\n\n  public render() {\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const { renderTopRightUI, renderTopLeftUI, renderCustomStats } = this.props;\n\n    const sceneNonce = this.scene.getSceneNonce();\n    const { elementsMap, visibleElements } = this.renderer.getRenderableElements({\n      sceneNonce,\n      zoom: this.state.zoom,\n      offsetLeft: this.state.offsetLeft,\n      offsetTop: this.state.offsetTop,\n      scrollX: this.state.scrollX,\n      scrollY: this.state.scrollY,\n      height: this.state.height,\n      width: this.state.width,\n      editingTextElement: this.state.editingTextElement,\n      newElementId: this.state.newElement?.id,\n    });\n    this.visibleElements = visibleElements;\n\n    const allElementsMap = this.scene.getNonDeletedElementsMap();\n\n    const shouldBlockPointerEvents =\n      // default back to `--ui-pointerEvents` flow if setPointerCapture\n      // not supported\n      \"setPointerCapture\" in HTMLElement.prototype\n        ? false\n        : this.state.selectionElement ||\n          this.state.newElement ||\n          this.state.selectedElementsAreBeingDragged ||\n          this.state.resizingElement ||\n          (this.state.activeTool.type === \"laser\" &&\n            // technically we can just test on this once we make it more safe\n            this.state.cursorButton === \"down\");\n\n    const firstSelectedElement = selectedElements[0];\n\n    const showShapeSwitchPanel =\n      editorJotaiStore.get(convertElementTypePopupAtom)?.type === \"panel\";\n\n    return (\n      <div\n        translate=\"no\"\n        className={clsx(\"jsondraw jsondraw-container notranslate\", {\n          \"jsondraw--view-mode\":\n            this.state.viewModeEnabled || this.state.openDialog?.name === \"elementLinkSelector\",\n          \"jsondraw--mobile\": this.editorInterface.formFactor === \"phone\",\n        })}\n        style={{\n          [\"--ui-pointerEvents\" as any]: shouldBlockPointerEvents\n            ? POINTER_EVENTS.disabled\n            : POINTER_EVENTS.enabled,\n          [\"--right-sidebar-width\" as any]: \"302px\",\n        }}\n        ref={this.jsondrawContainerRef}\n        onDrop={this.handleAppOnDrop}\n        tabIndex={0}\n        onKeyDown={this.props.handleKeyboardGlobally ? undefined : this.onKeyDown}\n        onPointerEnter={this.toggleOverscrollBehavior}\n        onPointerLeave={this.toggleOverscrollBehavior}\n      >\n        <AppContext.Provider value={this}>\n          <AppPropsContext.Provider value={this.props}>\n            <JsonDrawContainerContext.Provider value={this.jsondrawContainerValue}>\n              <EditorInterfaceContext.Provider value={this.editorInterface}>\n                <JsonDrawSetAppStateContext.Provider value={this.setAppState}>\n                  <JsonDrawAppStateContext.Provider value={this.state}>\n                    <JsonDrawElementsContext.Provider value={this.scene.getNonDeletedElements()}>\n                      <JsonDrawActionManagerContext.Provider value={this.actionManager}>\n                        <LayerUI\n                          canvas={this.canvas}\n                          appState={this.state}\n                          files={this.files}\n                          setAppState={this.setAppState}\n                          actionManager={this.actionManager}\n                          elements={this.scene.getNonDeletedElements()}\n                          onLockToggle={this.toggleLock}\n                          onPenModeToggle={this.togglePenMode}\n                          onHandToolToggle={this.onHandToolToggle}\n                          langCode={getLanguage().code}\n                          renderTopLeftUI={renderTopLeftUI}\n                          renderTopRightUI={renderTopRightUI}\n                          renderCustomStats={renderCustomStats}\n                          showExitZenModeBtn={\n                            typeof this.props?.zenModeEnabled === \"undefined\" &&\n                            this.state.zenModeEnabled\n                          }\n                          UIOptions={this.props.UIOptions}\n                          onExportImage={this.onExportImage}\n                          renderWelcomeScreen={\n                            !this.state.isLoading &&\n                            this.state.showWelcomeScreen &&\n                            this.state.activeTool.type === this.state.preferredSelectionTool.type &&\n                            !this.state.zenModeEnabled &&\n                            !this.scene.getElementsIncludingDeleted().length\n                          }\n                          app={this}\n                          isCollaborating={this.props.isCollaborating}\n                          generateLinkForSelection={this.props.generateLinkForSelection}\n                        >\n                          {this.props.children}\n                        </LayerUI>\n\n                        <div className=\"jsondraw-textEditorContainer\" />\n                        <div className=\"jsondraw-contextMenuContainer\" />\n                        <div className=\"jsondraw-eye-dropper-container\" />\n                        <SVGLayer trails={[this.laserTrails, this.lassoTrail, this.eraserTrail]} />\n                        {selectedElements.length === 1 &&\n                          this.state.openDialog?.name !== \"elementLinkSelector\" &&\n                          this.state.showHyperlinkPopup && (\n                            <Hyperlink\n                              key={firstSelectedElement.id}\n                              element={firstSelectedElement}\n                              scene={this.scene}\n                              setAppState={this.setAppState}\n                              onLinkOpen={this.props.onLinkOpen}\n                              setToast={this.setToast}\n                              updateEmbedValidationStatus={this.updateEmbedValidationStatus}\n                            />\n                          )}\n                        {this.props.aiEnabled !== false &&\n                          selectedElements.length === 1 &&\n                          isMagicFrameElement(firstSelectedElement) && (\n                            <ElementCanvasButtons\n                              element={firstSelectedElement}\n                              elementsMap={elementsMap}\n                            >\n                              <ElementCanvasButton\n                                title={t(\"labels.convertToCode\")}\n                                icon={MagicIcon}\n                                checked={false}\n                                onChange={() =>\n                                  this.onMagicFrameGenerate(firstSelectedElement, \"button\")\n                                }\n                              />\n                            </ElementCanvasButtons>\n                          )}\n                        {selectedElements.length === 1 &&\n                          isIframeElement(firstSelectedElement) &&\n                          firstSelectedElement.customData?.generationData?.status === \"done\" && (\n                            <ElementCanvasButtons\n                              element={firstSelectedElement}\n                              elementsMap={elementsMap}\n                            >\n                              <ElementCanvasButton\n                                title={t(\"labels.copySource\")}\n                                icon={copyIcon}\n                                checked={false}\n                                onChange={() => this.onIframeSrcCopy(firstSelectedElement)}\n                              />\n                              <ElementCanvasButton\n                                title=\"Enter fullscreen\"\n                                icon={fullscreenIcon}\n                                checked={false}\n                                onChange={() => {\n                                  const iframe = this.getHTMLIFrameElement(firstSelectedElement);\n                                  if (iframe) {\n                                    try {\n                                      iframe.requestFullscreen();\n                                      this.setState({\n                                        activeEmbeddable: {\n                                          element: firstSelectedElement,\n                                          state: \"active\",\n                                        },\n                                        selectedElementIds: {\n                                          [firstSelectedElement.id]: true,\n                                        },\n                                        newElement: null,\n                                        selectionElement: null,\n                                      });\n                                    } catch (err: any) {\n                                      console.warn(err);\n                                      this.setState({\n                                        errorMessage: \"Couldn't enter fullscreen\",\n                                      });\n                                    }\n                                  }\n                                }}\n                              />\n                            </ElementCanvasButtons>\n                          )}\n\n                        {this.state.toast !== null && (\n                          <Toast\n                            message={this.state.toast.message}\n                            onClose={this.handleToastClose}\n                            duration={this.state.toast.duration}\n                            closable={this.state.toast.closable}\n                          />\n                        )}\n\n                        {this.state.contextMenu && (\n                          <ContextMenu\n                            items={this.state.contextMenu.items}\n                            top={this.state.contextMenu.top}\n                            left={this.state.contextMenu.left}\n                            actionManager={this.actionManager}\n                            onClose={callback => {\n                              this.setState({ contextMenu: null }, () => {\n                                this.focusContainer();\n                                callback?.();\n                              });\n                            }}\n                          />\n                        )}\n                        <StaticCanvas\n                          canvas={this.canvas}\n                          rc={this.rc}\n                          elementsMap={elementsMap}\n                          allElementsMap={allElementsMap}\n                          visibleElements={visibleElements}\n                          sceneNonce={sceneNonce}\n                          selectionNonce={this.state.selectionElement?.versionNonce}\n                          scale={window.devicePixelRatio}\n                          appState={this.state}\n                          renderConfig={{\n                            imageCache: this.imageCache,\n                            isExporting: false,\n                            renderGrid: isGridModeEnabled(this),\n                            canvasBackgroundColor: this.state.viewBackgroundColor,\n                            embedsValidationStatus: this.embedsValidationStatus,\n                            elementsPendingErasure: this.elementsPendingErasure,\n                            pendingFlowchartNodes: this.flowChartCreator.pendingNodes,\n                            theme: this.state.theme,\n                          }}\n                        />\n                        {this.state.newElement && (\n                          <NewElementCanvas\n                            appState={this.state}\n                            scale={window.devicePixelRatio}\n                            rc={this.rc}\n                            elementsMap={elementsMap}\n                            allElementsMap={allElementsMap}\n                            renderConfig={{\n                              imageCache: this.imageCache,\n                              isExporting: false,\n                              renderGrid: false,\n                              canvasBackgroundColor: this.state.viewBackgroundColor,\n                              embedsValidationStatus: this.embedsValidationStatus,\n                              elementsPendingErasure: this.elementsPendingErasure,\n                              pendingFlowchartNodes: null,\n                              theme: this.state.theme,\n                            }}\n                          />\n                        )}\n                        <InteractiveCanvas\n                          app={this}\n                          containerRef={this.jsondrawContainerRef}\n                          canvas={this.interactiveCanvas}\n                          elementsMap={elementsMap}\n                          visibleElements={visibleElements}\n                          allElementsMap={allElementsMap}\n                          selectedElements={selectedElements}\n                          sceneNonce={sceneNonce}\n                          selectionNonce={this.state.selectionElement?.versionNonce}\n                          scale={window.devicePixelRatio}\n                          appState={this.state}\n                          renderScrollbars={this.props.renderScrollbars === true}\n                          editorInterface={this.editorInterface}\n                          renderInteractiveSceneCallback={this.renderInteractiveSceneCallback}\n                          handleCanvasRef={this.handleInteractiveCanvasRef}\n                          onContextMenu={this.handleCanvasContextMenu}\n                          onPointerMove={this.handleCanvasPointerMove}\n                          onPointerUp={this.handleCanvasPointerUp}\n                          onPointerCancel={this.removePointer}\n                          onTouchMove={this.handleTouchMove}\n                          onPointerDown={this.handleCanvasPointerDown}\n                          onDoubleClick={this.handleCanvasDoubleClick}\n                        />\n                        {this.state.userToFollow && (\n                          <FollowMode\n                            width={this.state.width}\n                            height={this.state.height}\n                            userToFollow={this.state.userToFollow}\n                            onDisconnect={this.maybeUnfollowRemoteUser}\n                          />\n                        )}\n                        {this.renderFrameNames()}\n                        {this.state.activeLockedId && (\n                          <UnlockPopup app={this} activeLockedId={this.state.activeLockedId} />\n                        )}\n                        {showShapeSwitchPanel && <ConvertElementTypePopup app={this} />}\n                      </JsonDrawActionManagerContext.Provider>\n                      {this.renderEmbeddables()}\n                    </JsonDrawElementsContext.Provider>\n                  </JsonDrawAppStateContext.Provider>\n                </JsonDrawSetAppStateContext.Provider>\n              </EditorInterfaceContext.Provider>\n            </JsonDrawContainerContext.Provider>\n          </AppPropsContext.Provider>\n        </AppContext.Provider>\n      </div>\n    );\n  }\n\n  public focusContainer: AppClassProperties[\"focusContainer\"] = () => {\n    this.jsondrawContainerRef.current?.focus();\n  };\n\n  public getSceneElementsIncludingDeleted = () => {\n    return this.scene.getElementsIncludingDeleted();\n  };\n\n  public getSceneElementsMapIncludingDeleted = () => {\n    return this.scene.getElementsMapIncludingDeleted();\n  };\n\n  public getSceneElements = () => {\n    return this.scene.getNonDeletedElements();\n  };\n\n  public onInsertElements = (elements: readonly JsonDrawElement[]) => {\n    this.addElementsFromPasteOrLibrary({\n      elements,\n      position: \"center\",\n      files: null,\n    });\n  };\n\n  public onExportImage = async (\n    type: keyof typeof EXPORT_IMAGE_TYPES,\n    elements: ExportedElements,\n    opts: { exportingFrame: JsonDrawFrameLikeElement | null }\n  ) => {\n    trackEvent(\"export\", type, \"ui\");\n    const fileHandle = await exportCanvas(type, elements, this.state, this.files, {\n      exportBackground: this.state.exportBackground,\n      name: this.getName(),\n      viewBackgroundColor: this.state.viewBackgroundColor,\n      exportingFrame: opts.exportingFrame,\n    })\n      .catch(muteFSAbortError)\n      .catch(error => {\n        console.error(error);\n        this.setState({ errorMessage: error.message });\n      });\n\n    if (this.state.exportEmbedScene && fileHandle && isImageFileHandle(fileHandle as any)) {\n      this.setState({ fileHandle: fileHandle as any });\n    }\n  };\n\n  private magicGenerations = new Map<JsonDrawIframeElement[\"id\"], MagicGenerationData>();\n\n  private updateMagicGeneration = ({\n    frameElement,\n    data,\n  }: {\n    frameElement: JsonDrawIframeElement;\n    data: MagicGenerationData;\n  }) => {\n    if (data.status === \"pending\") {\n      // We don't wanna persist pending state to storage. It should be in-app\n      // state only.\n      // Thus reset so that we prefer local cache (if there was some\n      // generationData set previously)\n      this.scene.mutateElement(\n        frameElement,\n        {\n          customData: { generationData: undefined },\n        },\n        { informMutation: false, isDragging: false }\n      );\n    } else {\n      this.scene.mutateElement(\n        frameElement,\n        {\n          customData: { generationData: data },\n        },\n        { informMutation: false, isDragging: false }\n      );\n    }\n    this.magicGenerations.set(frameElement.id, data);\n    this.triggerRender();\n  };\n\n  public plugins: {\n    diagramToCode?: {\n      generate: GenerateDiagramToCode;\n    };\n  } = {};\n\n  public setPlugins(plugins: Partial<App[\"plugins\"]>) {\n    Object.assign(this.plugins, plugins);\n  }\n\n  private async onMagicFrameGenerate(\n    magicFrame: JsonDrawMagicFrameElement,\n    source: \"button\" | \"upstream\"\n  ) {\n    const generateDiagramToCode = this.plugins.diagramToCode?.generate;\n\n    if (!generateDiagramToCode) {\n      this.setState({\n        errorMessage: \"No diagram to code plugin found\",\n      });\n      return;\n    }\n\n    const magicFrameChildren = getElementsOverlappingFrame(\n      this.scene.getNonDeletedElements(),\n      magicFrame\n    ).filter(el => !isMagicFrameElement(el));\n\n    if (!magicFrameChildren.length) {\n      if (source === \"button\") {\n        this.setState({ errorMessage: \"Cannot generate from an empty frame\" });\n        trackEvent(\"ai\", \"generate (no-children)\", \"d2c\");\n      } else {\n        this.setActiveTool({ type: \"magicframe\" });\n      }\n      return;\n    }\n\n    const frameElement = this.insertIframeElement({\n      sceneX: magicFrame.x + magicFrame.width + 30,\n      sceneY: magicFrame.y,\n      width: magicFrame.width,\n      height: magicFrame.height,\n    });\n\n    if (!frameElement) {\n      return;\n    }\n\n    this.updateMagicGeneration({\n      frameElement,\n      data: { status: \"pending\" },\n    });\n\n    this.setState({\n      selectedElementIds: { [frameElement.id]: true },\n    });\n\n    trackEvent(\"ai\", \"generate (start)\", \"d2c\");\n    try {\n      const { html } = await generateDiagramToCode({\n        frame: magicFrame,\n        children: magicFrameChildren,\n      });\n\n      trackEvent(\"ai\", \"generate (success)\", \"d2c\");\n\n      if (!html.trim()) {\n        this.updateMagicGeneration({\n          frameElement,\n          data: {\n            status: \"error\",\n            code: \"ERR_OAI\",\n            message: \"Nothing genereated :(\",\n          },\n        });\n        return;\n      }\n\n      const parsedHtml =\n        html.includes(\"<!DOCTYPE html>\") && html.includes(\"</html>\")\n          ? html.slice(html.indexOf(\"<!DOCTYPE html>\"), html.indexOf(\"</html>\") + \"</html>\".length)\n          : html;\n\n      this.updateMagicGeneration({\n        frameElement,\n        data: { status: \"done\", html: parsedHtml },\n      });\n    } catch (error: any) {\n      trackEvent(\"ai\", \"generate (failed)\", \"d2c\");\n      this.updateMagicGeneration({\n        frameElement,\n        data: {\n          status: \"error\",\n          code: \"ERR_OAI\",\n          message: error.message || \"Unknown error during generation\",\n        },\n      });\n    }\n  }\n\n  private onIframeSrcCopy(element: JsonDrawIframeElement) {\n    if (element.customData?.generationData?.status === \"done\") {\n      copyTextToSystemClipboard(element.customData.generationData.html);\n      this.setToast({\n        message: \"copied to clipboard\",\n        closable: false,\n        duration: 1500,\n      });\n    }\n  }\n\n  public onMagicframeToolSelect = () => {\n    const selectedElements = this.scene.getSelectedElements({\n      selectedElementIds: this.state.selectedElementIds,\n    });\n\n    if (selectedElements.length === 0) {\n      this.setActiveTool({ type: TOOL_TYPE.magicframe });\n      trackEvent(\"ai\", \"tool-select (empty-selection)\", \"d2c\");\n    } else {\n      const selectedMagicFrame: JsonDrawMagicFrameElement | false =\n        selectedElements.length === 1 &&\n        isMagicFrameElement(selectedElements[0]) &&\n        selectedElements[0];\n\n      // case: user selected elements containing frame-like(s) or are frame\n      // members, we don't want to wrap into another magicframe\n      // (unless the only selected element is a magic frame which we reuse)\n      if (\n        !selectedMagicFrame &&\n        selectedElements.some(el => isFrameLikeElement(el) || el.frameId)\n      ) {\n        this.setActiveTool({ type: TOOL_TYPE.magicframe });\n        return;\n      }\n\n      trackEvent(\"ai\", \"tool-select (existing selection)\", \"d2c\");\n\n      let frame: JsonDrawMagicFrameElement;\n      if (selectedMagicFrame) {\n        // a single magicframe already selected -> use it\n        frame = selectedMagicFrame;\n      } else {\n        // selected elements aren't wrapped in magic frame yet -> wrap now\n\n        const [minX, minY, maxX, maxY] = getCommonBounds(selectedElements);\n        const padding = 50;\n\n        frame = newMagicFrameElement({\n          ...FRAME_STYLE,\n          x: minX - padding,\n          y: minY - padding,\n          width: maxX - minX + padding * 2,\n          height: maxY - minY + padding * 2,\n          opacity: 100,\n          locked: false,\n        });\n\n        this.scene.insertElement(frame);\n\n        for (const child of selectedElements) {\n          this.scene.mutateElement(child, { frameId: frame.id });\n        }\n\n        this.setState({\n          selectedElementIds: { [frame.id]: true },\n        });\n      }\n\n      this.onMagicFrameGenerate(frame, \"upstream\");\n    }\n  };\n\n  private openEyeDropper = ({ type }: { type: \"stroke\" | \"background\" }) => {\n    this.updateEditorAtom(activeEyeDropperAtom, {\n      swapPreviewOnAlt: true,\n      colorPickerType: type === \"stroke\" ? \"elementStroke\" : \"elementBackground\",\n      onSelect: (color, event) => {\n        const shouldUpdateStrokeColor =\n          (type === \"background\" && event.altKey) || (type === \"stroke\" && !event.altKey);\n        const selectedElements = this.scene.getSelectedElements(this.state);\n        if (!selectedElements.length || this.state.activeTool.type !== \"selection\") {\n          if (shouldUpdateStrokeColor) {\n            this.syncActionResult({\n              appState: { ...this.state, currentItemStrokeColor: color },\n              captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n            });\n          } else {\n            this.syncActionResult({\n              appState: { ...this.state, currentItemBackgroundColor: color },\n              captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n            });\n          }\n        } else {\n          this.updateScene({\n            elements: this.scene.getElementsIncludingDeleted().map(el => {\n              if (this.state.selectedElementIds[el.id]) {\n                return newElementWith(el, {\n                  [shouldUpdateStrokeColor ? \"strokeColor\" : \"backgroundColor\"]: color,\n                });\n              }\n              return el;\n            }),\n            captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n          });\n        }\n      },\n      keepOpenOnAlt: false,\n    });\n  };\n\n  public dismissLinearEditor = () => {\n    setTimeout(() => {\n      if (this.state.selectedLinearElement?.isEditing) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            isEditing: false,\n          },\n        });\n      }\n    });\n  };\n\n  public syncActionResult = withBatchedUpdates((actionResult: ActionResult) => {\n    if (this.unmounted || actionResult === false) {\n      return;\n    }\n\n    this.store.scheduleAction(actionResult.captureUpdate);\n\n    let didUpdate = false;\n\n    let editingTextElement: AppState[\"editingTextElement\"] | null = null;\n    if (actionResult.elements) {\n      this.scene.replaceAllElements(actionResult.elements);\n      didUpdate = true;\n    }\n\n    if (actionResult.files) {\n      this.addMissingFiles(actionResult.files, actionResult.replaceFiles);\n      this.addNewImagesToImageCache();\n    }\n\n    if (actionResult.appState || editingTextElement || this.state.contextMenu) {\n      let viewModeEnabled = actionResult?.appState?.viewModeEnabled || false;\n      let zenModeEnabled = actionResult?.appState?.zenModeEnabled || false;\n      const theme = actionResult?.appState?.theme || this.props.theme || THEME.LIGHT;\n      const name = actionResult?.appState?.name ?? this.state.name;\n      const errorMessage = actionResult?.appState?.errorMessage ?? this.state.errorMessage;\n      if (typeof this.props.viewModeEnabled !== \"undefined\") {\n        viewModeEnabled = this.props.viewModeEnabled;\n      }\n\n      if (typeof this.props.zenModeEnabled !== \"undefined\") {\n        zenModeEnabled = this.props.zenModeEnabled;\n      }\n\n      editingTextElement = actionResult.appState?.editingTextElement || null;\n\n      // make sure editingTextElement points to latest element reference\n      if (actionResult.elements && editingTextElement) {\n        actionResult.elements.forEach(element => {\n          if (\n            editingTextElement?.id === element.id &&\n            editingTextElement !== element &&\n            isNonDeletedElement(element) &&\n            isTextElement(element)\n          ) {\n            editingTextElement = element;\n          }\n        });\n      }\n\n      if (editingTextElement?.isDeleted) {\n        editingTextElement = null;\n      }\n\n      this.setState(prevAppState => {\n        const actionAppState = actionResult.appState || {};\n\n        return {\n          ...prevAppState,\n          ...actionAppState,\n          // NOTE this will prevent opening context menu using an action\n          // or programmatically from the host, so it will need to be\n          // rewritten later\n          contextMenu: null,\n          editingTextElement,\n          viewModeEnabled,\n          zenModeEnabled,\n          theme,\n          name,\n          errorMessage,\n        };\n      });\n\n      didUpdate = true;\n    }\n\n    if (!didUpdate) {\n      this.scene.triggerUpdate();\n    }\n  });\n\n  // Lifecycle\n\n  private onBlur = withBatchedUpdates(() => {\n    isHoldingSpace = false;\n    this.setState({ isBindingEnabled: true });\n  });\n\n  private onUnload = () => {\n    this.onBlur();\n  };\n\n  private disableEvent: EventListener = event => {\n    event.preventDefault();\n  };\n\n  private resetHistory = () => {\n    this.history.clear();\n  };\n\n  private resetStore = () => {\n    this.store.clear();\n  };\n\n  /**\n   * Resets scene & history.\n   * ! Do not use to clear scene user action !\n   */\n  private resetScene = withBatchedUpdates((opts?: { resetLoadingState: boolean }) => {\n    this.scene.replaceAllElements([]);\n    this.setState(state => ({\n      ...getDefaultAppState(),\n      isLoading: opts?.resetLoadingState ? false : state.isLoading,\n      theme: this.state.theme,\n    }));\n    this.resetStore();\n    this.resetHistory();\n  });\n\n  private initializeScene = async () => {\n    if (\"launchQueue\" in window && \"LaunchParams\" in window) {\n      (window as any).launchQueue.setConsumer(async (launchParams: { files: any[] }) => {\n        if (!launchParams.files.length) {\n          return;\n        }\n        const fileHandle = launchParams.files[0];\n        const blob: Blob = await fileHandle.getFile();\n        this.loadFileToCanvas(new File([blob], blob.name || \"\", { type: blob.type }), fileHandle);\n      });\n    }\n\n    if (this.props.theme) {\n      this.setState({ theme: this.props.theme });\n    }\n    if (!this.state.isLoading) {\n      this.setState({ isLoading: true });\n    }\n    let initialData: JsonDrawInitialDataState | null = null;\n    try {\n      if (typeof this.props.initialData === \"function\") {\n        initialData = (await this.props.initialData()) || null;\n      } else {\n        initialData = (await this.props.initialData) || null;\n      }\n      if (initialData?.libraryItems) {\n        this.library\n          .updateLibrary({\n            libraryItems: initialData.libraryItems,\n            merge: true,\n          })\n          .catch(error => {\n            console.error(error);\n          });\n      }\n    } catch (error: any) {\n      console.error(error);\n      initialData = {\n        appState: {\n          errorMessage:\n            error.message || \"Encountered an error during importing or restoring scene data\",\n        },\n      };\n    }\n    const restoredElements = restoreElements(initialData?.elements, null, {\n      repairBindings: true,\n      deleteInvisibleElements: true,\n    });\n    let restoredAppState = restoreAppState(initialData?.appState, null);\n    const activeTool = restoredAppState.activeTool;\n\n    if (!restoredAppState.preferredSelectionTool.initialized) {\n      restoredAppState.preferredSelectionTool = {\n        type: this.editorInterface.formFactor === \"phone\" ? \"lasso\" : \"selection\",\n        initialized: true,\n      };\n    }\n\n    restoredAppState = {\n      ...restoredAppState,\n      theme: this.props.theme || restoredAppState.theme,\n      // we're falling back to current (pre-init) state when deciding\n      // whether to open the library, to handle a case where we\n      // update the state outside of initialData (e.g. when loading the app\n      // with a library install link, which should auto-open the library)\n      openSidebar: restoredAppState?.openSidebar || this.state.openSidebar,\n      activeTool:\n        activeTool.type === \"image\" ||\n        activeTool.type === \"lasso\" ||\n        activeTool.type === \"selection\"\n          ? {\n              ...activeTool,\n              type: restoredAppState.preferredSelectionTool.type,\n            }\n          : restoredAppState.activeTool,\n      isLoading: false,\n      toast: this.state.toast,\n    };\n\n    if (initialData?.scrollToContent) {\n      restoredAppState = {\n        ...restoredAppState,\n        ...calculateScrollCenter(restoredElements, {\n          ...restoredAppState,\n          width: this.state.width,\n          height: this.state.height,\n          offsetTop: this.state.offsetTop,\n          offsetLeft: this.state.offsetLeft,\n        }),\n      };\n    }\n\n    this.resetStore();\n    this.resetHistory();\n    this.syncActionResult({\n      elements: restoredElements,\n      appState: restoredAppState,\n      files: initialData?.files,\n      captureUpdate: CaptureUpdateAction.NEVER,\n    });\n\n    // clear the shape and image cache so that any images in initialData\n    // can be loaded fresh\n    this.clearImageShapeCache();\n\n    // manually loading the font faces seems faster even in browsers that do fire the loadingdone event\n    this.fonts.loadSceneFonts().then(fontFaces => {\n      this.fonts.onLoaded(fontFaces);\n    });\n\n    if (isElementLink(window.location.href)) {\n      this.scrollToContent(window.location.href, { animate: false });\n    }\n  };\n\n  private getFormFactor = (editorWidth: number, editorHeight: number) => {\n    return (\n      this.props.UIOptions.getFormFactor?.(editorWidth, editorHeight) ??\n      getFormFactor(editorWidth, editorHeight)\n    );\n  };\n\n  public refreshEditorInterface = () => {\n    const container = this.jsondrawContainerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const { width: editorWidth, height: editorHeight } = container.getBoundingClientRect();\n\n    const storedDesktopUIMode = loadDesktopUIModePreference();\n    const userAgentDescriptor = createUserAgentDescriptor(\n      typeof navigator !== \"undefined\" ? navigator.userAgent : \"\"\n    );\n    // allow host app to control formFactor and desktopUIMode via props\n    const sidebarBreakpoint =\n      this.props.UIOptions.dockedSidebarBreakpoint != null\n        ? this.props.UIOptions.dockedSidebarBreakpoint\n        : MQ_RIGHT_SIDEBAR_MIN_WIDTH;\n    const nextEditorInterface = updateObject(this.editorInterface, {\n      desktopUIMode: storedDesktopUIMode ?? this.editorInterface.desktopUIMode,\n      formFactor: this.getFormFactor(editorWidth, editorHeight),\n      userAgent: userAgentDescriptor,\n      canFitSidebar: editorWidth > sidebarBreakpoint,\n      isLandscape: editorWidth > editorHeight,\n    });\n\n    this.editorInterface = nextEditorInterface;\n    this.reconcileStylesPanelMode(nextEditorInterface);\n  };\n\n  private reconcileStylesPanelMode = (nextEditorInterface: EditorInterface) => {\n    const nextStylesPanelMode = deriveStylesPanelMode(nextEditorInterface);\n    if (nextStylesPanelMode === this.stylesPanelMode) {\n      return;\n    }\n\n    const prevStylesPanelMode = this.stylesPanelMode;\n    this.stylesPanelMode = nextStylesPanelMode;\n\n    if (prevStylesPanelMode !== \"full\" && nextStylesPanelMode === \"full\") {\n      this.setState(prevState => ({\n        preferredSelectionTool: {\n          type: \"selection\",\n          initialized: true,\n        },\n      }));\n    }\n  };\n\n  /** TO BE USED LATER */\n  private setDesktopUIMode = (mode: EditorInterface[\"desktopUIMode\"]) => {\n    const nextMode = setDesktopUIMode(mode);\n    this.editorInterface = updateObject(this.editorInterface, {\n      desktopUIMode: nextMode,\n    });\n    this.reconcileStylesPanelMode(this.editorInterface);\n  };\n\n  private clearImageShapeCache(filesMap?: BinaryFiles) {\n    const files = filesMap ?? this.files;\n    this.scene.getNonDeletedElements().forEach(element => {\n      if (isInitializedImageElement(element) && files[element.fileId]) {\n        this.imageCache.delete(element.fileId);\n        ShapeCache.delete(element);\n      }\n    });\n  }\n\n  public async componentDidMount() {\n    this.unmounted = false;\n    this.jsondrawContainerValue.container = this.jsondrawContainerRef.current;\n\n    if (isTestEnv() || isDevEnv()) {\n      const setState = this.setState.bind(this);\n      Object.defineProperties(window.h, {\n        state: {\n          configurable: true,\n          get: () => {\n            return this.state;\n          },\n        },\n        setState: {\n          configurable: true,\n          value: (...args: Parameters<typeof setState>) => {\n            return this.setState(...args);\n          },\n        },\n        app: {\n          configurable: true,\n          value: this,\n        },\n        history: {\n          configurable: true,\n          value: this.history,\n        },\n        store: {\n          configurable: true,\n          value: this.store,\n        },\n        fonts: {\n          configurable: true,\n          value: this.fonts,\n        },\n      });\n    }\n\n    this.store.onDurableIncrementEmitter.on(increment => {\n      this.history.record(increment.delta);\n    });\n\n    const { onIncrement } = this.props;\n\n    // per. optimmisation, only subscribe if there is the `onIncrement` prop registered, to avoid unnecessary computation\n    if (onIncrement) {\n      this.store.onStoreIncrementEmitter.on(increment => {\n        onIncrement(increment);\n      });\n    }\n\n    this.scene.onUpdate(this.triggerRender);\n    this.addEventListeners();\n\n    if (this.props.autoFocus && this.jsondrawContainerRef.current) {\n      this.focusContainer();\n    }\n\n    if (supportsResizeObserver && this.jsondrawContainerRef.current) {\n      this.resizeObserver = new ResizeObserver(() => {\n        this.refreshEditorInterface();\n        this.updateDOMRect();\n      });\n      this.resizeObserver?.observe(this.jsondrawContainerRef.current);\n    }\n\n    const searchParams = new URLSearchParams(window.location.search.slice(1));\n\n    if (searchParams.has(\"web-share-target\")) {\n      // Obtain a file that was shared via the Web Share Target API.\n      this.restoreFileFromShare();\n    } else {\n      this.updateDOMRect(this.initializeScene);\n    }\n\n    // note that this check seems to always pass in localhost\n    if (isBrave() && !isMeasureTextSupported()) {\n      this.setState({\n        errorMessage: <BraveMeasureTextError />,\n      });\n    }\n  }\n\n  public componentWillUnmount() {\n    (window as any).launchQueue?.setConsumer(() => {});\n    this.renderer.destroy();\n    this.scene.destroy();\n    this.scene = new Scene();\n    this.fonts = new Fonts(this.scene);\n    this.renderer = new Renderer(this.scene);\n    this.files = {};\n    this.imageCache.clear();\n    this.resizeObserver?.disconnect();\n    this.unmounted = true;\n    this.removeEventListeners();\n    this.library.destroy();\n    this.laserTrails.stop();\n    this.eraserTrail.stop();\n    this.onChangeEmitter.clear();\n    this.store.onStoreIncrementEmitter.clear();\n    this.store.onDurableIncrementEmitter.clear();\n    ShapeCache.destroy();\n    SnapCache.destroy();\n    clearTimeout(touchTimeout);\n    isSomeElementSelected.clearCache();\n    selectGroupsForSelectedElements.clearCache();\n    touchTimeout = 0;\n    document.documentElement.style.overscrollBehaviorX = \"\";\n  }\n\n  private onResize = withBatchedUpdates(() => {\n    this.scene.getElementsIncludingDeleted().forEach(element => ShapeCache.delete(element));\n    this.refreshEditorInterface();\n    this.updateDOMRect();\n    this.setState({});\n  });\n\n  /** generally invoked only if fullscreen was invoked programmatically */\n  private onFullscreenChange = () => {\n    if (\n      // points to the iframe element we fullscreened\n      !document.fullscreenElement &&\n      this.state.activeEmbeddable?.state === \"active\"\n    ) {\n      this.setState({\n        activeEmbeddable: null,\n      });\n    }\n  };\n\n  private removeEventListeners() {\n    this.onRemoveEventListenersEmitter.trigger();\n  }\n\n  private addEventListeners() {\n    // remove first as we can add event listeners multiple times\n    this.removeEventListeners();\n\n    // -------------------------------------------------------------------------\n    //                        view+edit mode listeners\n    // -------------------------------------------------------------------------\n\n    if (this.props.handleKeyboardGlobally) {\n      this.onRemoveEventListenersEmitter.once(\n        addEventListener(document, EVENT.KEYDOWN, this.onKeyDown, false)\n      );\n    }\n\n    this.onRemoveEventListenersEmitter.once(\n      addEventListener(this.jsondrawContainerRef.current, EVENT.WHEEL, this.handleWheel, {\n        passive: false,\n      }),\n      addEventListener(window, EVENT.MESSAGE, this.onWindowMessage, false),\n      addEventListener(document, EVENT.POINTER_UP, this.removePointer, {\n        passive: false,\n      }), // #3553\n      addEventListener(document, EVENT.COPY, this.onCopy, { passive: false }),\n      addEventListener(document, EVENT.KEYUP, this.onKeyUp, { passive: true }),\n      addEventListener(document, EVENT.POINTER_MOVE, this.updateCurrentCursorPosition, {\n        passive: false,\n      }),\n      // rerender text elements on font load to fix #637 && #1553\n      addEventListener(\n        document.fonts,\n        \"loadingdone\",\n        event => {\n          const fontFaces = (event as FontFaceSetLoadEvent).fontfaces;\n          this.fonts.onLoaded(fontFaces);\n        },\n        { passive: false }\n      ),\n      // Safari-only desktop pinch zoom\n      addEventListener(document, EVENT.GESTURE_START, this.onGestureStart as any, false),\n      addEventListener(document, EVENT.GESTURE_CHANGE, this.onGestureChange as any, false),\n      addEventListener(document, EVENT.GESTURE_END, this.onGestureEnd as any, false),\n      addEventListener(\n        window,\n        EVENT.FOCUS,\n        () => {\n          this.maybeCleanupAfterMissingPointerUp(null);\n          // browsers (chrome?) tend to free up memory a lot, which results\n          // in canvas context being cleared. Thus re-render on focus.\n          this.triggerRender(true);\n        },\n        { passive: false }\n      )\n    );\n\n    if (this.state.viewModeEnabled) {\n      return;\n    }\n\n    // -------------------------------------------------------------------------\n    //                        edit-mode listeners only\n    // -------------------------------------------------------------------------\n\n    this.onRemoveEventListenersEmitter.once(\n      addEventListener(document, EVENT.FULLSCREENCHANGE, this.onFullscreenChange, {\n        passive: false,\n      }),\n      addEventListener(document, EVENT.PASTE, this.pasteFromClipboard, {\n        passive: false,\n      }),\n      addEventListener(document, EVENT.CUT, this.onCut, { passive: false }),\n      addEventListener(window, EVENT.RESIZE, this.onResize, false),\n      addEventListener(window, EVENT.UNLOAD, this.onUnload, false),\n      addEventListener(window, EVENT.BLUR, this.onBlur, false),\n      addEventListener(this.jsondrawContainerRef.current, EVENT.WHEEL, this.handleWheel, {\n        passive: false,\n      }),\n      addEventListener(\n        this.jsondrawContainerRef.current,\n        EVENT.DRAG_OVER,\n        this.disableEvent,\n        false\n      ),\n      addEventListener(this.jsondrawContainerRef.current, EVENT.DROP, this.disableEvent, false)\n    );\n\n    if (this.props.detectScroll) {\n      this.onRemoveEventListenersEmitter.once(\n        addEventListener(\n          getNearestScrollableContainer(this.jsondrawContainerRef.current!),\n          EVENT.SCROLL,\n          this.onScroll,\n          { passive: false }\n        )\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps: AppProps, prevState: AppState) {\n    this.updateEmbeddables();\n    const elements = this.scene.getElementsIncludingDeleted();\n    const elementsMap = this.scene.getElementsMapIncludingDeleted();\n\n    if (!this.state.showWelcomeScreen && !elements.length) {\n      this.setState({ showWelcomeScreen: true });\n    }\n\n    const hasFollowedPersonLeft =\n      prevState.userToFollow && !this.state.collaborators.has(prevState.userToFollow.socketId);\n\n    if (hasFollowedPersonLeft) {\n      this.maybeUnfollowRemoteUser();\n    }\n\n    if (\n      prevState.zoom.value !== this.state.zoom.value ||\n      prevState.scrollX !== this.state.scrollX ||\n      prevState.scrollY !== this.state.scrollY\n    ) {\n      this.props?.onScrollChange?.(this.state.scrollX, this.state.scrollY, this.state.zoom);\n      this.onScrollChangeEmitter.trigger(this.state.scrollX, this.state.scrollY, this.state.zoom);\n    }\n\n    if (prevState.userToFollow !== this.state.userToFollow) {\n      if (prevState.userToFollow) {\n        this.onUserFollowEmitter.trigger({\n          userToFollow: prevState.userToFollow,\n          action: \"UNFOLLOW\",\n        });\n      }\n\n      if (this.state.userToFollow) {\n        this.onUserFollowEmitter.trigger({\n          userToFollow: this.state.userToFollow,\n          action: \"FOLLOW\",\n        });\n      }\n    }\n\n    if (Object.keys(this.state.selectedElementIds).length && isEraserActive(this.state)) {\n      this.setState({\n        activeTool: updateActiveTool(this.state, { type: \"selection\" }),\n      });\n    }\n    if (this.state.activeTool.type === \"eraser\" && prevState.theme !== this.state.theme) {\n      setEraserCursor(this.interactiveCanvas, this.state.theme);\n    }\n\n    // Hide hyperlink popup if shown when element type is not selection\n    if (\n      prevState.activeTool.type === \"selection\" &&\n      this.state.activeTool.type !== \"selection\" &&\n      this.state.showHyperlinkPopup\n    ) {\n      this.setState({ showHyperlinkPopup: false });\n    }\n    if (prevProps.langCode !== this.props.langCode) {\n      this.updateLanguage();\n    }\n\n    if (isEraserActive(prevState) && !isEraserActive(this.state)) {\n      this.eraserTrail.endPath();\n    }\n\n    if (prevProps.viewModeEnabled !== this.props.viewModeEnabled) {\n      this.setState({ viewModeEnabled: !!this.props.viewModeEnabled });\n    }\n\n    if (prevState.viewModeEnabled !== this.state.viewModeEnabled) {\n      this.addEventListeners();\n      this.deselectElements();\n    }\n\n    // cleanup\n    if (\n      (prevState.openDialog?.name === \"elementLinkSelector\" ||\n        this.state.openDialog?.name === \"elementLinkSelector\") &&\n      prevState.openDialog?.name !== this.state.openDialog?.name\n    ) {\n      this.deselectElements();\n      this.setState({\n        hoveredElementIds: {},\n      });\n    }\n\n    if (prevProps.zenModeEnabled !== this.props.zenModeEnabled) {\n      this.setState({ zenModeEnabled: !!this.props.zenModeEnabled });\n    }\n\n    if (prevProps.theme !== this.props.theme && this.props.theme) {\n      this.setState({ theme: this.props.theme });\n    }\n\n    this.jsondrawContainerRef.current?.classList.toggle(\n      \"theme--dark\",\n      this.state.theme === THEME.DARK\n    );\n\n    if (\n      this.state.selectedLinearElement?.isEditing &&\n      !this.state.selectedElementIds[this.state.selectedLinearElement.elementId]\n    ) {\n      // defer so that the scheduleCapture flag isn't reset via current update\n      setTimeout(() => {\n        // execute only if the condition still holds when the deferred callback\n        // executes (it can be scheduled multiple times depending on how\n        // many times the component renders)\n        this.state.selectedLinearElement?.isEditing &&\n          this.actionManager.executeAction(actionFinalize);\n      });\n    }\n\n    // failsafe in case the state is being updated in incorrect order resulting\n    // in the editingTextElement being now a deleted element\n    if (this.state.editingTextElement?.isDeleted) {\n      this.setState({ editingTextElement: null });\n    }\n\n    this.store.commit(elementsMap, this.state);\n\n    // Do not notify consumers if we're still loading the scene. Among other\n    // potential issues, this fixes a case where the tab isn't focused during\n    // init, which would trigger onChange with empty elements, which would then\n    // override whatever is in localStorage currently.\n    if (!this.state.isLoading) {\n      this.props.onChange?.(elements, this.state, this.files);\n      this.onChangeEmitter.trigger(elements, this.state, this.files);\n    }\n  }\n\n  private renderInteractiveSceneCallback = ({\n    atLeastOneVisibleElement,\n    scrollBars,\n    elementsMap,\n  }: RenderInteractiveSceneCallback) => {\n    if (scrollBars) {\n      currentScrollBars = scrollBars;\n    }\n    const scrolledOutside =\n      // hide when editing text\n      this.state.editingTextElement ? false : !atLeastOneVisibleElement && elementsMap.size > 0;\n    if (this.state.scrolledOutside !== scrolledOutside) {\n      this.setState({ scrolledOutside });\n    }\n\n    this.scheduleImageRefresh();\n  };\n\n  private onScroll = debounce(() => {\n    const { offsetTop, offsetLeft } = this.getCanvasOffsets();\n    this.setState(state => {\n      if (state.offsetLeft === offsetLeft && state.offsetTop === offsetTop) {\n        return null;\n      }\n      return { offsetTop, offsetLeft };\n    });\n  }, SCROLL_TIMEOUT);\n\n  // Copy/paste\n\n  private onCut = withBatchedUpdates((event: ClipboardEvent) => {\n    const isJsonDrawActive = this.jsondrawContainerRef.current?.contains(document.activeElement);\n    if (!isJsonDrawActive || isWritableElement(event.target)) {\n      return;\n    }\n    this.actionManager.executeAction(actionCut, \"keyboard\", event);\n    event.preventDefault();\n    event.stopPropagation();\n  });\n\n  private onCopy = withBatchedUpdates((event: ClipboardEvent) => {\n    const isJsonDrawActive = this.jsondrawContainerRef.current?.contains(document.activeElement);\n    if (!isJsonDrawActive || isWritableElement(event.target)) {\n      return;\n    }\n    this.actionManager.executeAction(actionCopy, \"keyboard\", event);\n    event.preventDefault();\n    event.stopPropagation();\n  });\n\n  private static resetTapTwice() {\n    didTapTwice = false;\n    firstTapPosition = null;\n  }\n\n  private onTouchStart = (event: TouchEvent) => {\n    // fix for Apple Pencil Scribble (do not prevent for other devices)\n    if (isIOS) {\n      event.preventDefault();\n    }\n\n    if (!didTapTwice) {\n      didTapTwice = true;\n\n      if (event.touches.length === 1) {\n        firstTapPosition = {\n          x: event.touches[0].clientX,\n          y: event.touches[0].clientY,\n        };\n      }\n      clearTimeout(tappedTwiceTimer);\n      tappedTwiceTimer = window.setTimeout(App.resetTapTwice, TAP_TWICE_TIMEOUT);\n      return;\n    }\n\n    // insert text only if we tapped twice with a single finger at approximately the same position\n    // event.touches.length === 1 will also prevent inserting text when user's zooming\n    if (didTapTwice && event.touches.length === 1 && firstTapPosition) {\n      const touch = event.touches[0];\n      const distance = pointDistance(\n        pointFrom(touch.clientX, touch.clientY),\n        pointFrom(firstTapPosition.x, firstTapPosition.y)\n      );\n\n      // only create text if the second tap is within the threshold of the first tap\n      // this prevents accidental text creation during dragging/selection\n      if (distance <= DOUBLE_TAP_POSITION_THRESHOLD) {\n        // end lasso trail and deselect elements just in case\n        this.lassoTrail.endPath();\n        this.deselectElements();\n\n        // @ts-ignore\n        this.handleCanvasDoubleClick({\n          clientX: touch.clientX,\n          clientY: touch.clientY,\n        });\n      }\n      didTapTwice = false;\n      clearTimeout(tappedTwiceTimer);\n    }\n\n    if (event.touches.length === 2) {\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds({}, this.state),\n        activeEmbeddable: null,\n      });\n    }\n  };\n\n  private onTouchEnd = (event: TouchEvent) => {\n    this.resetContextMenuTimer();\n    if (event.touches.length > 0) {\n      this.setState({\n        previousSelectedElementIds: {},\n        selectedElementIds: makeNextSelectedElementIds(\n          this.state.previousSelectedElementIds,\n          this.state\n        ),\n      });\n    } else {\n      gesture.pointers.clear();\n    }\n  };\n\n  // TODO: Cover with tests\n  private async insertClipboardContent(\n    data: ClipboardData,\n    dataTransferFiles: ParsedDataTransferFile[],\n    isPlainPaste: boolean\n  ) {\n    const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n      {\n        clientX: this.lastViewportPosition.x,\n        clientY: this.lastViewportPosition.y,\n      },\n      this.state\n    );\n\n    // ------------------- Error -------------------\n    if (data.errorMessage) {\n      this.setState({ errorMessage: data.errorMessage });\n      return;\n    }\n\n    // ------------------- Mixed content with no files -------------------\n    if (dataTransferFiles.length === 0 && !isPlainPaste && data.mixedContent) {\n      await this.addElementsFromMixedContentPaste(data.mixedContent, {\n        isPlainPaste,\n        sceneX,\n        sceneY,\n      });\n      return;\n    }\n\n    // ------------------- Spreadsheet -------------------\n    if (data.spreadsheet && !isPlainPaste) {\n      this.setState({\n        pasteDialog: {\n          data: data.spreadsheet,\n          shown: true,\n        },\n      });\n      return;\n    }\n\n    // ------------------- Images or SVG code -------------------\n    const imageFiles = dataTransferFiles.map(data => data.file);\n\n    if (imageFiles.length === 0 && data.text && !isPlainPaste) {\n      const trimmedText = data.text.trim();\n      if (trimmedText.startsWith(\"<svg\") && trimmedText.endsWith(\"</svg>\")) {\n        // ignore SVG validation/normalization which will be done during image\n        // initialization\n        imageFiles.push(SVGStringToFile(trimmedText));\n      }\n    }\n\n    if (imageFiles.length > 0) {\n      if (this.isToolSupported(\"image\")) {\n        await this.insertImages(imageFiles, sceneX, sceneY);\n      } else {\n        this.setState({ errorMessage: t(\"errors.imageToolNotSupported\") });\n      }\n      return;\n    }\n\n    // ------------------- Elements -------------------\n    if (data.elements) {\n      const elements = (\n        data.programmaticAPI\n          ? convertToJsonDrawElements(data.elements as JsonDrawElementSkeleton[])\n          : data.elements\n      ) as readonly JsonDrawElement[];\n      // TODO: remove formatting from elements if isPlainPaste\n      this.addElementsFromPasteOrLibrary({\n        elements,\n        files: data.files || null,\n        position: this.editorInterface.formFactor === \"desktop\" ? \"cursor\" : \"center\",\n        retainSeed: isPlainPaste,\n      });\n      return;\n    }\n\n    // ------------------- Only textual stuff remaining -------------------\n    if (!data.text) {\n      return;\n    }\n\n    // ------------------- Successful Mermaid -------------------\n    if (!isPlainPaste && isMaybeMermaidDefinition(data.text)) {\n      const api = await import(\"@excalidraw/mermaid-to-excalidraw\");\n      try {\n        const { elements: skeletonElements, files } = await api.parseMermaidToExcalidraw(data.text);\n\n        const elements = convertToJsonDrawElements(skeletonElements, {\n          regenerateIds: true,\n        });\n\n        this.addElementsFromPasteOrLibrary({\n          elements,\n          files,\n          position: this.editorInterface.formFactor === \"desktop\" ? \"cursor\" : \"center\",\n        });\n\n        return;\n      } catch (err: any) {\n        console.warn(`parsing pasted text as mermaid definition failed: ${err.message}`);\n      }\n    }\n\n    // ------------------- Pure embeddable URLs -------------------\n    const nonEmptyLines = normalizeEOL(data.text)\n      .split(/\\n+/)\n      .map(s => s.trim())\n      .filter(Boolean);\n    const embbeddableUrls = nonEmptyLines\n      .map(str => maybeParseEmbedSrc(str))\n      .filter(\n        string =>\n          embeddableURLValidator(string, this.props.validateEmbeddable) &&\n          (/^(http|https):\\/\\/[^\\s/$.?#].[^\\s]*$/.test(string) ||\n            getEmbedLink(string)?.type === \"video\")\n      );\n\n    if (\n      !isPlainPaste &&\n      embbeddableUrls.length > 0 &&\n      embbeddableUrls.length === nonEmptyLines.length\n    ) {\n      const embeddables: NonDeleted<JsonDrawEmbeddableElement>[] = [];\n      for (const url of embbeddableUrls) {\n        const prevEmbeddable: JsonDrawEmbeddableElement | undefined =\n          embeddables[embeddables.length - 1];\n        const embeddable = this.insertEmbeddableElement({\n          sceneX: prevEmbeddable ? prevEmbeddable.x + prevEmbeddable.width + 20 : sceneX,\n          sceneY,\n          link: normalizeLink(url),\n        });\n        if (embeddable) {\n          embeddables.push(embeddable);\n        }\n      }\n      if (embeddables.length) {\n        this.store.scheduleCapture();\n        this.setState({\n          selectedElementIds: Object.fromEntries(\n            embeddables.map(embeddable => [embeddable.id, true])\n          ),\n        });\n      }\n      return;\n    }\n\n    // ------------------- Text -------------------\n    this.addTextFromPaste(data.text, isPlainPaste);\n  }\n\n  public pasteFromClipboard = withBatchedUpdates(async (event: ClipboardEvent) => {\n    const isPlainPaste = !!IS_PLAIN_PASTE;\n\n    // #686\n    const target = document.activeElement;\n    const isJsonDrawActive = this.jsondrawContainerRef.current?.contains(target);\n    if (event && !isJsonDrawActive) {\n      return;\n    }\n\n    const elementUnderCursor = document.elementFromPoint(\n      this.lastViewportPosition.x,\n      this.lastViewportPosition.y\n    );\n    if (\n      event &&\n      (!(elementUnderCursor instanceof HTMLCanvasElement) || isWritableElement(target))\n    ) {\n      return;\n    }\n\n    // must be called in the same frame (thus before any awaits) as the paste\n    // event else some browsers (FF...) will clear the clipboardData\n    // (something something security)\n    const dataTransferList = await parseDataTransferEvent(event);\n\n    const filesList = dataTransferList.getFiles();\n\n    const data = await parseClipboard(dataTransferList, isPlainPaste);\n\n    if (this.props.onPaste) {\n      try {\n        if ((await this.props.onPaste(data, event)) === false) {\n          return;\n        }\n      } catch (error: any) {\n        console.error(error);\n      }\n    }\n\n    await this.insertClipboardContent(data, filesList, isPlainPaste);\n\n    this.setActiveTool({ type: this.state.preferredSelectionTool.type }, true);\n    event?.preventDefault();\n  });\n\n  addElementsFromPasteOrLibrary = (opts: {\n    elements: readonly JsonDrawElement[];\n    files: BinaryFiles | null;\n    position: { clientX: number; clientY: number } | \"cursor\" | \"center\";\n    retainSeed?: boolean;\n    fitToContent?: boolean;\n  }) => {\n    const elements = restoreElements(opts.elements, null, {\n      deleteInvisibleElements: true,\n    });\n    const [minX, minY, maxX, maxY] = getCommonBounds(elements);\n\n    const elementsCenterX = distance(minX, maxX) / 2;\n    const elementsCenterY = distance(minY, maxY) / 2;\n\n    const clientX =\n      typeof opts.position === \"object\"\n        ? opts.position.clientX\n        : opts.position === \"cursor\"\n          ? this.lastViewportPosition.x\n          : this.state.width / 2 + this.state.offsetLeft;\n    const clientY =\n      typeof opts.position === \"object\"\n        ? opts.position.clientY\n        : opts.position === \"cursor\"\n          ? this.lastViewportPosition.y\n          : this.state.height / 2 + this.state.offsetTop;\n\n    const { x, y } = viewportCoordsToSceneCoords({ clientX, clientY }, this.state);\n\n    const dx = x - elementsCenterX;\n    const dy = y - elementsCenterY;\n\n    const [gridX, gridY] = getGridPoint(dx, dy, this.getEffectiveGridSize());\n\n    const { duplicatedElements } = duplicateElements({\n      type: \"everything\",\n      elements: elements.map(element => {\n        return newElementWith(element, {\n          x: element.x + gridX - minX,\n          y: element.y + gridY - minY,\n        });\n      }),\n      randomizeSeed: !opts.retainSeed,\n    });\n\n    const prevElements = this.scene.getElementsIncludingDeleted();\n    let nextElements = [...prevElements, ...duplicatedElements];\n\n    const mappedNewSceneElements = this.props.onDuplicate?.(nextElements, prevElements);\n\n    nextElements = mappedNewSceneElements || nextElements;\n\n    syncMovedIndices(nextElements, arrayToMap(duplicatedElements));\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({ x, y });\n\n    if (topLayerFrame) {\n      const eligibleElements = filterElementsEligibleAsFrameChildren(\n        duplicatedElements,\n        topLayerFrame\n      );\n      addElementsToFrame(nextElements, eligibleElements, topLayerFrame, this.state);\n    }\n\n    this.scene.replaceAllElements(nextElements);\n\n    duplicatedElements.forEach(newElement => {\n      if (isTextElement(newElement) && isBoundToContainer(newElement)) {\n        const container = getContainerElement(\n          newElement,\n          this.scene.getElementsMapIncludingDeleted()\n        );\n        redrawTextBoundingBox(newElement, container, this.scene);\n      }\n    });\n\n    // paste event may not fire FontFace loadingdone event in Safari, hence loading font faces manually\n    if (isSafari) {\n      Fonts.loadElementsFonts(duplicatedElements).then(fontFaces => {\n        this.fonts.onLoaded(fontFaces);\n      });\n    }\n\n    if (opts.files) {\n      this.addMissingFiles(opts.files);\n    }\n\n    const nextElementsToSelect = excludeElementsInFramesFromSelection(duplicatedElements);\n\n    this.store.scheduleCapture();\n    this.setState(\n      {\n        ...this.state,\n        // keep sidebar (presumably the library) open if it's docked and\n        // can fit.\n        //\n        // Note, we should close the sidebar only if we're dropping items\n        // from library, not when pasting from clipboard. Alas.\n        openSidebar:\n          this.state.openSidebar &&\n          this.editorInterface.canFitSidebar &&\n          editorJotaiStore.get(isSidebarDockedAtom)\n            ? this.state.openSidebar\n            : null,\n        ...selectGroupsForSelectedElements(\n          {\n            editingGroupId: null,\n            selectedElementIds: nextElementsToSelect.reduce(\n              (acc: Record<JsonDrawElement[\"id\"], true>, element) => {\n                if (!isBoundToContainer(element)) {\n                  acc[element.id] = true;\n                }\n                return acc;\n              },\n              {}\n            ),\n          },\n          this.scene.getNonDeletedElements(),\n          this.state,\n          this\n        ),\n      },\n      () => {\n        if (opts.files) {\n          this.addNewImagesToImageCache();\n        }\n      }\n    );\n    this.setActiveTool({ type: this.state.preferredSelectionTool.type }, true);\n\n    if (opts.fitToContent) {\n      this.scrollToContent(duplicatedElements, {\n        fitToContent: true,\n        canvasOffsets: this.getEditorUIOffsets(),\n      });\n    }\n  };\n\n  // TODO rewrite this to paste both text & images at the same time if\n  // pasted data contains both\n  private async addElementsFromMixedContentPaste(\n    mixedContent: PastedMixedContent,\n    { isPlainPaste, sceneX, sceneY }: { isPlainPaste: boolean; sceneX: number; sceneY: number }\n  ) {\n    if (\n      !isPlainPaste &&\n      mixedContent.some(node => node.type === \"imageUrl\") &&\n      this.isToolSupported(\"image\")\n    ) {\n      const imageURLs = mixedContent\n        .filter(node => node.type === \"imageUrl\")\n        .map(node => node.value);\n      const responses = await Promise.all(\n        imageURLs.map(async url => {\n          try {\n            return { file: await ImageURLToFile(url) };\n          } catch (error: any) {\n            let errorMessage = error.message;\n            if (error.cause === \"FETCH_ERROR\") {\n              errorMessage = t(\"errors.failedToFetchImage\");\n            } else if (error.cause === \"UNSUPPORTED\") {\n              errorMessage = t(\"errors.unsupportedFileType\");\n            }\n            return { errorMessage };\n          }\n        })\n      );\n\n      const imageFiles = responses\n        .filter((response): response is { file: File } => !!response.file)\n        .map(response => response.file);\n      await this.insertImages(imageFiles, sceneX, sceneY);\n      const error = responses.find(response => !!response.errorMessage);\n      if (error && error.errorMessage) {\n        this.setState({ errorMessage: error.errorMessage });\n      }\n    } else {\n      const textNodes = mixedContent.filter(node => node.type === \"text\");\n      if (textNodes.length) {\n        this.addTextFromPaste(textNodes.map(node => node.value).join(\"\\n\\n\"), isPlainPaste);\n      }\n    }\n  }\n\n  private addTextFromPaste(text: string, isPlainPaste = false) {\n    const { x, y } = viewportCoordsToSceneCoords(\n      {\n        clientX: this.lastViewportPosition.x,\n        clientY: this.lastViewportPosition.y,\n      },\n      this.state\n    );\n\n    const textElementProps = {\n      x,\n      y,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roundness: null,\n      roughness: this.state.currentItemRoughness,\n      opacity: this.state.currentItemOpacity,\n      text,\n      fontSize: this.state.currentItemFontSize,\n      fontFamily: this.state.currentItemFontFamily,\n      textAlign: DEFAULT_TEXT_ALIGN,\n      verticalAlign: DEFAULT_VERTICAL_ALIGN,\n      locked: false,\n    };\n    const fontString = getFontString({\n      fontSize: textElementProps.fontSize,\n      fontFamily: textElementProps.fontFamily,\n    });\n    const lineHeight = getLineHeight(textElementProps.fontFamily);\n    const [x1, , x2] = getVisibleSceneBounds(this.state);\n    // long texts should not go beyond 800 pixels in width nor should it go below 200 px\n    const maxTextWidth = Math.max(Math.min((x2 - x1) * 0.5, 800), 200);\n    const LINE_GAP = 10;\n    let currentY = y;\n\n    const lines = isPlainPaste ? [text] : text.split(\"\\n\");\n    const textElements = lines.reduce((acc: JsonDrawTextElement[], line, idx) => {\n      const originalText = normalizeText(line).trim();\n      if (originalText.length) {\n        const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n          x,\n          y: currentY,\n        });\n\n        let metrics = measureText(originalText, fontString, lineHeight);\n        const isTextUnwrapped = metrics.width > maxTextWidth;\n\n        const text = isTextUnwrapped\n          ? wrapText(originalText, fontString, maxTextWidth)\n          : originalText;\n\n        metrics = isTextUnwrapped ? measureText(text, fontString, lineHeight) : metrics;\n\n        const startX = x - metrics.width / 2;\n        const startY = currentY - metrics.height / 2;\n\n        const element = newTextElement({\n          ...textElementProps,\n          x: startX,\n          y: startY,\n          text,\n          originalText,\n          lineHeight,\n          autoResize: !isTextUnwrapped,\n          frameId: topLayerFrame ? topLayerFrame.id : null,\n        });\n        acc.push(element);\n        currentY += element.height + LINE_GAP;\n      } else {\n        const prevLine = lines[idx - 1]?.trim();\n        // add paragraph only if previous line was not empty, IOW don't add\n        // more than one empty line\n        if (prevLine) {\n          currentY += getLineHeightInPx(textElementProps.fontSize, lineHeight) + LINE_GAP;\n        }\n      }\n\n      return acc;\n    }, []);\n\n    if (textElements.length === 0) {\n      return;\n    }\n\n    this.scene.insertElements(textElements);\n    this.store.scheduleCapture();\n    this.setState({\n      selectedElementIds: makeNextSelectedElementIds(\n        Object.fromEntries(textElements.map(el => [el.id, true])),\n        this.state\n      ),\n    });\n\n    if (\n      !isPlainPaste &&\n      textElements.length > 1 &&\n      PLAIN_PASTE_TOAST_SHOWN === false &&\n      this.editorInterface.formFactor !== \"phone\"\n    ) {\n      this.setToast({\n        message: t(\"toast.pasteAsSingleElement\", {\n          shortcut: getShortcutKey(\"CtrlOrCmd+Shift+V\"),\n        }),\n        duration: 5000,\n      });\n      PLAIN_PASTE_TOAST_SHOWN = true;\n    }\n  }\n\n  setAppState: React.Component<any, AppState>[\"setState\"] = (state, callback) => {\n    this.setState(state, callback);\n  };\n\n  removePointer = (event: React.PointerEvent<HTMLElement> | PointerEvent) => {\n    if (touchTimeout) {\n      this.resetContextMenuTimer();\n    }\n\n    gesture.pointers.delete(event.pointerId);\n  };\n\n  toggleLock = (source: \"keyboard\" | \"ui\" = \"ui\") => {\n    if (!this.state.activeTool.locked) {\n      trackEvent(\n        \"toolbar\",\n        \"toggleLock\",\n        `${source} (${this.editorInterface.formFactor === \"phone\" ? \"mobile\" : \"desktop\"})`\n      );\n    }\n    this.setState(prevState => {\n      return {\n        activeTool: {\n          ...prevState.activeTool,\n          ...updateActiveTool(\n            this.state,\n            prevState.activeTool.locked\n              ? { type: this.state.preferredSelectionTool.type }\n              : prevState.activeTool\n          ),\n          locked: !prevState.activeTool.locked,\n        },\n      };\n    });\n  };\n\n  updateFrameRendering = (\n    opts:\n      | Partial<AppState[\"frameRendering\"]>\n      | ((prevState: AppState[\"frameRendering\"]) => Partial<AppState[\"frameRendering\"]>)\n  ) => {\n    this.setState(prevState => {\n      const next = typeof opts === \"function\" ? opts(prevState.frameRendering) : opts;\n      return {\n        frameRendering: {\n          enabled: next?.enabled ?? prevState.frameRendering.enabled,\n          clip: next?.clip ?? prevState.frameRendering.clip,\n          name: next?.name ?? prevState.frameRendering.name,\n          outline: next?.outline ?? prevState.frameRendering.outline,\n        },\n      };\n    });\n  };\n\n  togglePenMode = (force: boolean | null) => {\n    this.setState(prevState => {\n      return {\n        penMode: force ?? !prevState.penMode,\n        penDetected: true,\n      };\n    });\n  };\n\n  onHandToolToggle = () => {\n    this.actionManager.executeAction(actionToggleHandTool);\n  };\n\n  /**\n   * Zooms on canvas viewport center\n   */\n  zoomCanvas = (\n    /**\n     * Decimal fraction, auto-clamped between MIN_ZOOM and MAX_ZOOM.\n     * 1 = 100% zoom, 2 = 200% zoom, 0.5 = 50% zoom\n     */\n    value: number\n  ) => {\n    this.setState({\n      ...getStateForZoom(\n        {\n          viewportX: this.state.width / 2 + this.state.offsetLeft,\n          viewportY: this.state.height / 2 + this.state.offsetTop,\n          nextZoom: getNormalizedZoom(value),\n        },\n        this.state\n      ),\n    });\n  };\n\n  private cancelInProgressAnimation: (() => void) | null = null;\n\n  scrollToContent = (\n    /**\n     * target to scroll to\n     *\n     * - string - id of element or group, or url containing elementLink\n     * - JsonDrawElement | JsonDrawElement[] - element(s) objects\n     */\n    target:\n      | string\n      | JsonDrawElement\n      | readonly JsonDrawElement[] = this.scene.getNonDeletedElements(),\n    opts?: (\n      | {\n          fitToContent?: boolean;\n          fitToViewport?: never;\n          viewportZoomFactor?: number;\n          animate?: boolean;\n          duration?: number;\n        }\n      | {\n          fitToContent?: never;\n          fitToViewport?: boolean;\n          /** when fitToViewport=true, how much screen should the content cover,\n           * between 0.1 (10%) and 1 (100%)\n           */\n          viewportZoomFactor?: number;\n          animate?: boolean;\n          duration?: number;\n        }\n    ) & {\n      minZoom?: number;\n      maxZoom?: number;\n      canvasOffsets?: Offsets;\n    }\n  ) => {\n    if (typeof target === \"string\") {\n      let id: string | null;\n      if (isElementLink(target)) {\n        id = parseElementLinkFromURL(target);\n      } else {\n        id = target;\n      }\n      if (id) {\n        const elements = this.scene.getElementsFromId(id);\n\n        if (elements?.length) {\n          this.scrollToContent(elements, {\n            fitToContent: opts?.fitToContent ?? true,\n            animate: opts?.animate ?? true,\n          });\n        } else if (isElementLink(target)) {\n          this.setState({\n            toast: {\n              message: t(\"elementLink.notFound\"),\n              duration: 3000,\n              closable: true,\n            },\n          });\n        }\n      }\n      return;\n    }\n\n    this.cancelInProgressAnimation?.();\n\n    // convert provided target into JsonDrawElement[] if necessary\n    const targetElements = Array.isArray(target) ? target : [target];\n\n    let zoom = this.state.zoom;\n    let scrollX = this.state.scrollX;\n    let scrollY = this.state.scrollY;\n\n    if (opts?.fitToContent || opts?.fitToViewport) {\n      const { appState } = zoomToFit({\n        canvasOffsets: opts.canvasOffsets,\n        targetElements,\n        appState: this.state,\n        fitToViewport: !!opts?.fitToViewport,\n        viewportZoomFactor: opts?.viewportZoomFactor,\n        minZoom: opts?.minZoom,\n        maxZoom: opts?.maxZoom,\n      });\n      zoom = appState.zoom;\n      scrollX = appState.scrollX;\n      scrollY = appState.scrollY;\n    } else {\n      // compute only the viewport location, without any zoom adjustment\n      const scroll = calculateScrollCenter(targetElements, this.state);\n      scrollX = scroll.scrollX;\n      scrollY = scroll.scrollY;\n    }\n\n    // when animating, we use RequestAnimationFrame to prevent the animation\n    // from slowing down other processes\n    if (opts?.animate) {\n      const origScrollX = this.state.scrollX;\n      const origScrollY = this.state.scrollY;\n      const origZoom = this.state.zoom.value;\n\n      const cancel = easeToValuesRAF({\n        fromValues: {\n          scrollX: origScrollX,\n          scrollY: origScrollY,\n          zoom: origZoom,\n        },\n        toValues: { scrollX, scrollY, zoom: zoom.value },\n        interpolateValue: (from, to, progress, key) => {\n          // for zoom, use different easing\n          if (key === \"zoom\") {\n            return from * Math.pow(to / from, easeOut(progress));\n          }\n          // handle using default\n          return undefined;\n        },\n        onStep: ({ scrollX, scrollY, zoom }) => {\n          this.setState({\n            scrollX,\n            scrollY,\n            zoom: { value: zoom },\n          });\n        },\n        onStart: () => {\n          this.setState({ shouldCacheIgnoreZoom: true });\n        },\n        onEnd: () => {\n          this.setState({ shouldCacheIgnoreZoom: false });\n        },\n        onCancel: () => {\n          this.setState({ shouldCacheIgnoreZoom: false });\n        },\n        duration: opts?.duration ?? 500,\n      });\n\n      this.cancelInProgressAnimation = () => {\n        cancel();\n        this.cancelInProgressAnimation = null;\n      };\n    } else {\n      this.setState({ scrollX, scrollY, zoom });\n    }\n  };\n\n  private maybeUnfollowRemoteUser = () => {\n    if (this.state.userToFollow) {\n      this.setState({ userToFollow: null });\n    }\n  };\n\n  /** use when changing scrollX/scrollY/zoom based on user interaction */\n  private translateCanvas: React.Component<any, AppState>[\"setState\"] = state => {\n    this.cancelInProgressAnimation?.();\n    this.maybeUnfollowRemoteUser();\n    this.setState(state);\n  };\n\n  setToast = (\n    toast: {\n      message: string;\n      closable?: boolean;\n      duration?: number;\n    } | null\n  ) => {\n    this.setState({ toast });\n  };\n\n  restoreFileFromShare = async () => {\n    try {\n      const webShareTargetCache = await caches.open(\"web-share-target\");\n\n      const response = await webShareTargetCache.match(\"shared-file\");\n      if (response) {\n        const blob = await response.blob();\n        const file = new File([blob], blob.name || \"\", { type: blob.type });\n        this.loadFileToCanvas(file, null);\n        await webShareTargetCache.delete(\"shared-file\");\n        window.history.replaceState(null, APP_NAME, window.location.pathname);\n      }\n    } catch (error: any) {\n      this.setState({ errorMessage: error.message });\n    }\n  };\n\n  /**\n   * adds supplied files to existing files in the appState.\n   * NOTE if file already exists in editor state, the file data is not updated\n   * */\n  public addFiles: JsonDrawImperativeAPI[\"addFiles\"] = withBatchedUpdates(files => {\n    const { addedFiles } = this.addMissingFiles(files);\n\n    this.clearImageShapeCache(addedFiles);\n    this.scene.triggerUpdate();\n\n    this.addNewImagesToImageCache();\n  });\n\n  private addMissingFiles = (files: BinaryFiles | BinaryFileData[], replace = false) => {\n    const nextFiles = replace ? {} : { ...this.files };\n    const addedFiles: BinaryFiles = {};\n\n    const _files = Array.isArray(files) ? files : Object.values(files);\n\n    for (const fileData of _files) {\n      if (nextFiles[fileData.id]) {\n        continue;\n      }\n\n      addedFiles[fileData.id] = fileData;\n      nextFiles[fileData.id] = fileData;\n\n      if (fileData.mimeType === MIME_TYPES.svg) {\n        try {\n          const restoredDataURL = getDataURL_sync(\n            normalizeSVG(dataURLToString(fileData.dataURL)),\n            MIME_TYPES.svg\n          );\n          if (fileData.dataURL !== restoredDataURL) {\n            // bump version so persistence layer can update the store\n            fileData.version = (fileData.version ?? 1) + 1;\n            fileData.dataURL = restoredDataURL;\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    }\n\n    this.files = nextFiles;\n\n    return { addedFiles };\n  };\n\n  public updateScene = withBatchedUpdates(\n    <K extends keyof AppState>(sceneData: {\n      elements?: SceneData[\"elements\"];\n      appState?: Pick<AppState, K> | null;\n      collaborators?: SceneData[\"collaborators\"];\n      /**\n       *  Controls which updates should be captured by the `Store`. Captured updates are emmitted and listened to by other components, such as `History` for undo / redo purposes.\n       *\n       *  - `CaptureUpdateAction.IMMEDIATELY`: Updates are immediately undoable. Use for most local updates.\n       *  - `CaptureUpdateAction.NEVER`: Updates never make it to undo/redo stack. Use for remote updates or scene initialization.\n       *  - `CaptureUpdateAction.EVENTUALLY`: Updates will be eventually be captured as part of a future increment.\n       *\n       * Check [API docs](https://docs.jsonviz.online/docs/@jsondraw/jsondraw/api/props/jsondraw-api#captureUpdate) for more details.\n       *\n       * @default CaptureUpdateAction.EVENTUALLY\n       */\n      captureUpdate?: SceneData[\"captureUpdate\"];\n    }) => {\n      const { elements, appState, collaborators, captureUpdate } = sceneData;\n\n      if (captureUpdate) {\n        const nextElements = elements ? elements : undefined;\n        const observedAppState = appState\n          ? getObservedAppState({\n              ...this.store.snapshot.appState,\n              ...appState,\n            })\n          : undefined;\n\n        this.store.scheduleMicroAction({\n          action: captureUpdate,\n          elements: nextElements,\n          appState: observedAppState,\n        });\n      }\n\n      if (appState) {\n        this.setState(appState as Pick<AppState, K> | null);\n      }\n\n      if (elements) {\n        this.scene.replaceAllElements(elements);\n      }\n\n      if (collaborators) {\n        this.setState({ collaborators });\n      }\n    }\n  );\n\n  public applyDeltas = (\n    deltas: StoreDelta[],\n    options?: ApplyToOptions\n  ): [SceneElementsMap, AppState, boolean] => {\n    // squash all deltas together, starting with a fresh new delta instance\n    const aggregatedDelta = StoreDelta.squash(...deltas);\n\n    // create new instance of elements map & appState, so we don't accidentaly mutate existing ones\n    const nextAppState = { ...this.state };\n    const nextElements = new Map(this.scene.getElementsMapIncludingDeleted()) as SceneElementsMap;\n\n    return StoreDelta.applyTo(aggregatedDelta, nextElements, nextAppState, options);\n  };\n\n  public mutateElement = <TElement extends Mutable<JsonDrawElement>>(\n    element: TElement,\n    updates: ElementUpdate<TElement>,\n    informMutation = true\n  ) => {\n    return this.scene.mutateElement(element, updates, {\n      informMutation,\n      isDragging: false,\n    });\n  };\n\n  private triggerRender = (\n    /** force always re-renders canvas even if no change */\n    force?: boolean\n  ) => {\n    if (force === true) {\n      this.scene.triggerUpdate();\n    } else {\n      this.setState({});\n    }\n  };\n\n  /**\n   * @returns whether the menu was toggled on or off\n   */\n  public toggleSidebar = ({\n    name,\n    tab,\n    force,\n  }: {\n    name: SidebarName | null;\n    tab?: SidebarTabName;\n    force?: boolean;\n  }): boolean => {\n    let nextName;\n    if (force === undefined) {\n      nextName =\n        this.state.openSidebar?.name === name && this.state.openSidebar?.tab === tab ? null : name;\n    } else {\n      nextName = force ? name : null;\n    }\n\n    const nextState: AppState[\"openSidebar\"] = nextName ? { name: nextName } : null;\n    if (nextState && tab) {\n      nextState.tab = tab;\n    }\n\n    this.setState({ openSidebar: nextState });\n\n    return !!nextName;\n  };\n\n  private updateCurrentCursorPosition = withBatchedUpdates((event: MouseEvent) => {\n    this.lastViewportPosition.x = event.clientX;\n    this.lastViewportPosition.y = event.clientY;\n  });\n\n  public getEditorUIOffsets = (): Offsets => {\n    const toolbarBottom =\n      this.jsondrawContainerRef?.current?.querySelector(\".App-toolbar\")?.getBoundingClientRect()\n        ?.bottom ?? 0;\n    const sidebarRect = this.jsondrawContainerRef?.current\n      ?.querySelector(\".sidebar\")\n      ?.getBoundingClientRect();\n    const propertiesPanelRect = this.jsondrawContainerRef?.current\n      ?.querySelector(\".App-menu__left\")\n      ?.getBoundingClientRect();\n\n    const PADDING = 16;\n\n    return getLanguage().rtl\n      ? {\n          top: toolbarBottom + PADDING,\n          right:\n            Math.max(this.state.width - (propertiesPanelRect?.left ?? this.state.width), 0) +\n            PADDING,\n          bottom: PADDING,\n          left: Math.max(sidebarRect?.right ?? 0, 0) + PADDING,\n        }\n      : {\n          top: toolbarBottom + PADDING,\n          right: Math.max(this.state.width - (sidebarRect?.left ?? this.state.width) + PADDING, 0),\n          bottom: PADDING,\n          left: Math.max(propertiesPanelRect?.right ?? 0, 0) + PADDING,\n        };\n  };\n\n  // Input handling\n  private onKeyDown = withBatchedUpdates((event: React.KeyboardEvent | KeyboardEvent) => {\n    // normalize `event.key` when CapsLock is pressed #2372\n\n    if (\n      \"Proxy\" in window &&\n      ((!event.shiftKey && /^[A-Z]$/.test(event.key)) ||\n        (event.shiftKey && /^[a-z]$/.test(event.key)))\n    ) {\n      event = new Proxy(event, {\n        get(ev: any, prop) {\n          const value = ev[prop];\n          if (typeof value === \"function\") {\n            // fix for Proxies hijacking `this`\n            return value.bind(ev);\n          }\n          return prop === \"key\"\n            ? // CapsLock inverts capitalization based on ShiftKey, so invert\n              // it back\n              event.shiftKey\n              ? ev.key.toUpperCase()\n              : ev.key.toLowerCase()\n            : value;\n        },\n      });\n    }\n\n    if (!isInputLike(event.target)) {\n      if ((event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) && this.state.croppingElementId) {\n        this.finishImageCropping();\n        return;\n      }\n\n      const selectedElements = getSelectedElements(\n        this.scene.getNonDeletedElementsMap(),\n        this.state\n      );\n\n      if (\n        selectedElements.length === 1 &&\n        isImageElement(selectedElements[0]) &&\n        event.key === KEYS.ENTER\n      ) {\n        this.startImageCropping(selectedElements[0]);\n        return;\n      }\n\n      // Shape switching\n      if (event.key === KEYS.ESCAPE) {\n        this.updateEditorAtom(convertElementTypePopupAtom, null);\n      } else if (\n        event.key === KEYS.TAB &&\n        (document.activeElement === this.jsondrawContainerRef?.current ||\n          document.activeElement?.classList.contains(CLASSES.CONVERT_ELEMENT_TYPE_POPUP))\n      ) {\n        event.preventDefault();\n\n        const conversionType = getConversionTypeFromElements(selectedElements);\n\n        if (editorJotaiStore.get(convertElementTypePopupAtom)?.type === \"panel\") {\n          if (\n            convertElementTypes(this, {\n              conversionType,\n              direction: event.shiftKey ? \"left\" : \"right\",\n            })\n          ) {\n            this.store.scheduleCapture();\n          }\n        }\n        if (conversionType) {\n          this.updateEditorAtom(convertElementTypePopupAtom, {\n            type: \"panel\",\n          });\n        }\n      }\n\n      if (event.key === KEYS.ESCAPE && this.flowChartCreator.isCreatingChart) {\n        this.flowChartCreator.clear();\n        this.triggerRender(true);\n        return;\n      }\n\n      const arrowKeyPressed = isArrowKey(event.key);\n\n      if (event[KEYS.CTRL_OR_CMD] && arrowKeyPressed && !event.shiftKey) {\n        event.preventDefault();\n\n        const selectedElements = getSelectedElements(\n          this.scene.getNonDeletedElementsMap(),\n          this.state\n        );\n\n        if (selectedElements.length === 1 && isFlowchartNodeElement(selectedElements[0])) {\n          this.flowChartCreator.createNodes(\n            selectedElements[0],\n            this.state,\n            getLinkDirectionFromKey(event.key),\n            this.scene\n          );\n        }\n\n        if (\n          this.flowChartCreator.pendingNodes?.length &&\n          !isElementCompletelyInViewport(\n            this.flowChartCreator.pendingNodes,\n            this.canvas.width / window.devicePixelRatio,\n            this.canvas.height / window.devicePixelRatio,\n            {\n              offsetLeft: this.state.offsetLeft,\n              offsetTop: this.state.offsetTop,\n              scrollX: this.state.scrollX,\n              scrollY: this.state.scrollY,\n              zoom: this.state.zoom,\n            },\n            this.scene.getNonDeletedElementsMap(),\n            this.getEditorUIOffsets()\n          )\n        ) {\n          this.scrollToContent(this.flowChartCreator.pendingNodes, {\n            animate: true,\n            duration: 300,\n            fitToContent: true,\n            canvasOffsets: this.getEditorUIOffsets(),\n          });\n        }\n\n        return;\n      }\n\n      if (event.altKey) {\n        const selectedElements = getSelectedElements(\n          this.scene.getNonDeletedElementsMap(),\n          this.state\n        );\n\n        if (selectedElements.length === 1 && arrowKeyPressed) {\n          event.preventDefault();\n\n          const nextId = this.flowChartNavigator.exploreByDirection(\n            selectedElements[0],\n            this.scene.getNonDeletedElementsMap(),\n            getLinkDirectionFromKey(event.key)\n          );\n\n          if (nextId) {\n            this.setState(prevState => ({\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  [nextId]: true,\n                },\n                prevState\n              ),\n            }));\n\n            const nextNode = this.scene.getNonDeletedElementsMap().get(nextId);\n\n            if (\n              nextNode &&\n              !isElementCompletelyInViewport(\n                [nextNode],\n                this.canvas.width / window.devicePixelRatio,\n                this.canvas.height / window.devicePixelRatio,\n                {\n                  offsetLeft: this.state.offsetLeft,\n                  offsetTop: this.state.offsetTop,\n                  scrollX: this.state.scrollX,\n                  scrollY: this.state.scrollY,\n                  zoom: this.state.zoom,\n                },\n                this.scene.getNonDeletedElementsMap(),\n                this.getEditorUIOffsets()\n              )\n            ) {\n              this.scrollToContent(nextNode, {\n                animate: true,\n                duration: 300,\n                canvasOffsets: this.getEditorUIOffsets(),\n              });\n            }\n          }\n          return;\n        }\n      }\n    }\n\n    if (event[KEYS.CTRL_OR_CMD] && event.key === KEYS.P && !event.shiftKey && !event.altKey) {\n      this.setToast({\n        message: t(\"commandPalette.shortcutHint\", {\n          shortcut: getShortcutFromShortcutName(\"commandPalette\"),\n        }),\n      });\n      event.preventDefault();\n      return;\n    }\n\n    if (event[KEYS.CTRL_OR_CMD] && event.key.toLowerCase() === KEYS.V) {\n      IS_PLAIN_PASTE = event.shiftKey;\n      clearTimeout(IS_PLAIN_PASTE_TIMER);\n      // reset (100ms to be safe that we it runs after the ensuing\n      // paste event). Though, technically unnecessary to reset since we\n      // (re)set the flag before each paste event.\n      IS_PLAIN_PASTE_TIMER = window.setTimeout(() => {\n        IS_PLAIN_PASTE = false;\n      }, 100);\n    }\n\n    // prevent browser zoom in input fields\n    if (event[KEYS.CTRL_OR_CMD] && isWritableElement(event.target)) {\n      if (event.code === CODES.MINUS || event.code === CODES.EQUAL) {\n        event.preventDefault();\n        return;\n      }\n    }\n\n    // bail if\n    if (\n      // inside an input\n      (isWritableElement(event.target) &&\n        // unless pressing escape (finalize action)\n        event.key !== KEYS.ESCAPE) ||\n      // or unless using arrows (to move between buttons)\n      (isArrowKey(event.key) && isInputLike(event.target))\n    ) {\n      return;\n    }\n\n    if (event.key === KEYS.QUESTION_MARK) {\n      this.setState({\n        openDialog: { name: \"help\" },\n      });\n      return;\n    } else if (event.key.toLowerCase() === KEYS.E && event.shiftKey && event[KEYS.CTRL_OR_CMD]) {\n      event.preventDefault();\n      this.setState({ openDialog: { name: \"imageExport\" } });\n      return;\n    }\n\n    if (event.key === KEYS.PAGE_UP || event.key === KEYS.PAGE_DOWN) {\n      let offset = (event.shiftKey ? this.state.width : this.state.height) / this.state.zoom.value;\n      if (event.key === KEYS.PAGE_DOWN) {\n        offset = -offset;\n      }\n      if (event.shiftKey) {\n        this.translateCanvas(state => ({\n          scrollX: state.scrollX + offset,\n        }));\n      } else {\n        this.translateCanvas(state => ({\n          scrollY: state.scrollY + offset,\n        }));\n      }\n    }\n\n    if (this.state.openDialog?.name === \"elementLinkSelector\") {\n      return;\n    }\n\n    // Handle Alt key for bind mode\n    if (event.key === KEYS.ALT) {\n      if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n        this.handleSkipBindMode();\n      } else {\n        maybeHandleArrowPointlikeDrag({ app: this, event });\n      }\n    }\n\n    if (this.actionManager.handleKeyDown(event)) {\n      return;\n    }\n\n    if (this.state.viewModeEnabled) {\n      return;\n    }\n\n    if (event[KEYS.CTRL_OR_CMD] && this.state.isBindingEnabled) {\n      if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n        this.resetDelayedBindMode();\n      }\n\n      flushSync(() => {\n        this.setState({ isBindingEnabled: false });\n      });\n\n      maybeHandleArrowPointlikeDrag({ app: this, event });\n    }\n\n    if (isArrowKey(event.key)) {\n      let selectedElements = this.scene.getSelectedElements({\n        selectedElementIds: this.state.selectedElementIds,\n        includeBoundTextElement: true,\n        includeElementsInFrames: true,\n      });\n\n      const arrowIdsToRemove = new Set<string>();\n\n      selectedElements\n        .filter((el): el is NonDeleted<JsonDrawArrowElement> => isBindingElement(el))\n        .filter(arrow => {\n          const startElementNotInSelection =\n            arrow.startBinding &&\n            !selectedElements.some(el => el.id === arrow.startBinding?.elementId);\n          const endElementNotInSelection =\n            arrow.endBinding && !selectedElements.some(el => el.id === arrow.endBinding?.elementId);\n          return startElementNotInSelection || endElementNotInSelection;\n        })\n        .forEach(arrow => arrowIdsToRemove.add(arrow.id));\n\n      selectedElements = selectedElements.filter(el => !arrowIdsToRemove.has(el.id));\n\n      const step =\n        (this.getEffectiveGridSize() &&\n          (event.shiftKey ? ELEMENT_TRANSLATE_AMOUNT : this.getEffectiveGridSize())) ||\n        (event.shiftKey ? ELEMENT_SHIFT_TRANSLATE_AMOUNT : ELEMENT_TRANSLATE_AMOUNT);\n\n      let offsetX = 0;\n      let offsetY = 0;\n\n      if (event.key === KEYS.ARROW_LEFT) {\n        offsetX = -step;\n      } else if (event.key === KEYS.ARROW_RIGHT) {\n        offsetX = step;\n      } else if (event.key === KEYS.ARROW_UP) {\n        offsetY = -step;\n      } else if (event.key === KEYS.ARROW_DOWN) {\n        offsetY = step;\n      }\n\n      selectedElements.forEach(element => {\n        this.scene.mutateElement(\n          element,\n          {\n            x: element.x + offsetX,\n            y: element.y + offsetY,\n          },\n          { informMutation: false, isDragging: false }\n        );\n\n        updateBoundElements(element, this.scene, {\n          simultaneouslyUpdated: selectedElements,\n        });\n      });\n\n      this.scene.triggerUpdate();\n\n      event.preventDefault();\n    } else if (event.key === KEYS.ENTER) {\n      const selectedElements = this.scene.getSelectedElements(this.state);\n      if (selectedElements.length === 1) {\n        const selectedElement = selectedElements[0];\n        if (event[KEYS.CTRL_OR_CMD] || isLineElement(selectedElement)) {\n          if (isLinearElement(selectedElement)) {\n            if (\n              !this.state.selectedLinearElement?.isEditing ||\n              this.state.selectedLinearElement.elementId !== selectedElement.id\n            ) {\n              this.store.scheduleCapture();\n              if (!isElbowArrow(selectedElement)) {\n                this.actionManager.executeAction(actionToggleLinearEditor);\n              }\n            }\n          }\n        } else if (isTextElement(selectedElement) || isValidTextContainer(selectedElement)) {\n          let container;\n          if (!isTextElement(selectedElement)) {\n            container = selectedElement as JsonDrawTextContainer;\n          }\n          const midPoint = getContainerCenter(\n            selectedElement,\n            this.state,\n            this.scene.getNonDeletedElementsMap()\n          );\n          const sceneX = midPoint.x;\n          const sceneY = midPoint.y;\n          this.startTextEditing({\n            sceneX,\n            sceneY,\n            container,\n          });\n          event.preventDefault();\n          return;\n        } else if (isFrameLikeElement(selectedElement)) {\n          this.setState({\n            editingFrame: selectedElement.id,\n          });\n        }\n      }\n    } else if (\n      !event.ctrlKey &&\n      !event.altKey &&\n      !event.metaKey &&\n      !this.state.newElement &&\n      !this.state.selectionElement &&\n      !this.state.selectedElementsAreBeingDragged\n    ) {\n      const shape = findShapeByKey(event.key, this);\n      if (shape) {\n        if (this.state.activeTool.type !== shape) {\n          trackEvent(\n            \"toolbar\",\n            shape,\n            `keyboard (${this.editorInterface.formFactor === \"phone\" ? \"mobile\" : \"desktop\"})`\n          );\n        }\n        if (shape === \"arrow\" && this.state.activeTool.type === \"arrow\") {\n          this.setState(prevState => ({\n            currentItemArrowType:\n              prevState.currentItemArrowType === ARROW_TYPE.sharp\n                ? ARROW_TYPE.round\n                : prevState.currentItemArrowType === ARROW_TYPE.round\n                  ? ARROW_TYPE.elbow\n                  : ARROW_TYPE.sharp,\n          }));\n        }\n        this.setActiveTool({ type: shape });\n        event.stopPropagation();\n      } else if (event.key === KEYS.Q) {\n        this.toggleLock(\"keyboard\");\n        event.stopPropagation();\n      }\n    }\n    if (event.key === KEYS.SPACE && gesture.pointers.size === 0) {\n      isHoldingSpace = true;\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n      event.preventDefault();\n    }\n\n    if (\n      (event.key === KEYS.G || event.key === KEYS.S) &&\n      !event.altKey &&\n      !event[KEYS.CTRL_OR_CMD]\n    ) {\n      const selectedElements = this.scene.getSelectedElements(this.state);\n      if (this.state.activeTool.type === \"selection\" && !selectedElements.length) {\n        return;\n      }\n\n      if (\n        event.key === KEYS.G &&\n        (hasBackground(this.state.activeTool.type) ||\n          selectedElements.some(element => hasBackground(element.type)))\n      ) {\n        this.setState({ openPopup: \"elementBackground\" });\n        event.stopPropagation();\n      }\n      if (event.key === KEYS.S) {\n        this.setState({ openPopup: \"elementStroke\" });\n        event.stopPropagation();\n      }\n    }\n\n    if (!event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key.toLowerCase() === KEYS.F) {\n      const selectedElements = this.scene.getSelectedElements(this.state);\n\n      if (this.state.activeTool.type === \"selection\" && !selectedElements.length) {\n        return;\n      }\n\n      if (\n        this.state.activeTool.type === \"text\" ||\n        selectedElements.find(\n          element =>\n            isTextElement(element) ||\n            getBoundTextElement(element, this.scene.getNonDeletedElementsMap())\n        )\n      ) {\n        event.preventDefault();\n        this.setState({ openPopup: \"fontFamily\" });\n      }\n    }\n\n    if (event.key === KEYS.K && !event.altKey && !event[KEYS.CTRL_OR_CMD]) {\n      if (this.state.activeTool.type === \"laser\") {\n        this.setActiveTool({ type: this.state.preferredSelectionTool.type });\n      } else {\n        this.setActiveTool({ type: \"laser\" });\n      }\n      return;\n    }\n\n    if (event[KEYS.CTRL_OR_CMD] && (event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE)) {\n      this.updateEditorAtom(activeConfirmDialogAtom, \"clearCanvas\");\n    }\n\n    // eye dropper\n    // -----------------------------------------------------------------------\n    const lowerCased = event.key.toLocaleLowerCase();\n    const isPickingStroke = lowerCased === KEYS.S && event.shiftKey;\n    const isPickingBackground = event.key === KEYS.I || (lowerCased === KEYS.G && event.shiftKey);\n\n    if (isPickingStroke || isPickingBackground) {\n      this.openEyeDropper({\n        type: isPickingStroke ? \"stroke\" : \"background\",\n      });\n    }\n    // -----------------------------------------------------------------------\n  });\n\n  private onKeyUp = withBatchedUpdates((event: KeyboardEvent) => {\n    if (event.key === KEYS.SPACE) {\n      if (this.state.viewModeEnabled || this.state.openDialog?.name === \"elementLinkSelector\") {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n      } else if (isSelectionLikeTool(this.state.activeTool.type)) {\n        resetCursor(this.interactiveCanvas);\n      } else {\n        setCursorForShape(this.interactiveCanvas, this.state);\n        this.setState({\n          selectedElementIds: makeNextSelectedElementIds({}, this.state),\n          selectedGroupIds: {},\n          editingGroupId: null,\n          activeEmbeddable: null,\n        });\n      }\n      isHoldingSpace = false;\n    }\n\n    if (event.key === KEYS.ALT) {\n      maybeHandleArrowPointlikeDrag({ app: this, event });\n    }\n\n    if (\n      (event.key === KEYS.ALT && this.state.bindMode === \"skip\") ||\n      (!event[KEYS.CTRL_OR_CMD] && !isBindingEnabled(this.state))\n    ) {\n      // Handle Alt key release for bind mode\n      this.setState({\n        bindMode: \"orbit\",\n      });\n\n      // Restart the timer if we're creating/editing a linear element and hovering over an element\n      if (this.lastPointerMoveEvent && getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n        const scenePointer = viewportCoordsToSceneCoords(\n          {\n            clientX: this.lastPointerMoveEvent.clientX,\n            clientY: this.lastPointerMoveEvent.clientY,\n          },\n          this.state\n        );\n\n        const hoveredElement = getHoveredElementForBinding(\n          pointFrom<GlobalPoint>(scenePointer.x, scenePointer.y),\n          this.scene.getNonDeletedElements(),\n          this.scene.getNonDeletedElementsMap()\n        );\n\n        if (this.state.selectedLinearElement) {\n          const element = LinearElementEditor.getElement(\n            this.state.selectedLinearElement.elementId,\n            this.scene.getNonDeletedElementsMap()\n          );\n\n          if (isBindingElement(element)) {\n            this.handleDelayedBindModeChange(element, hoveredElement);\n          }\n        }\n      }\n    }\n    if (!event[KEYS.CTRL_OR_CMD] && !this.state.isBindingEnabled) {\n      flushSync(() => {\n        this.setState({ isBindingEnabled: true });\n      });\n\n      maybeHandleArrowPointlikeDrag({ app: this, event });\n    }\n    if (isArrowKey(event.key)) {\n      bindOrUnbindBindingElements(\n        this.scene.getSelectedElements(this.state).filter(isArrowElement),\n        this.scene,\n        this.state\n      );\n\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n\n      this.scene\n        .getSelectedElements(this.state)\n        .filter(isSimpleArrow)\n        .forEach(element => {\n          // Update the fixed point bindings for non-elbow arrows\n          // when the pointer is released, so that they are correctly positioned\n          // after the drag.\n          if (element.startBinding) {\n            this.scene.mutateElement(element, {\n              startBinding: {\n                ...element.startBinding,\n                ...calculateFixedPointForNonElbowArrowBinding(\n                  element,\n                  elementsMap.get(element.startBinding.elementId) as JsonDrawBindableElement,\n                  \"start\",\n                  elementsMap\n                ),\n              },\n            });\n          }\n          if (element.endBinding) {\n            this.scene.mutateElement(element, {\n              endBinding: {\n                ...element.endBinding,\n                ...calculateFixedPointForNonElbowArrowBinding(\n                  element,\n                  elementsMap.get(element.endBinding.elementId) as JsonDrawBindableElement,\n                  \"end\",\n                  elementsMap\n                ),\n              },\n            });\n          }\n        });\n\n      this.setState({ suggestedBinding: null });\n    }\n\n    if (!event.altKey) {\n      if (this.flowChartNavigator.isExploring) {\n        this.flowChartNavigator.clear();\n        this.syncActionResult({\n          captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n        });\n      }\n    }\n\n    if (!event[KEYS.CTRL_OR_CMD]) {\n      if (this.flowChartCreator.isCreatingChart) {\n        if (this.flowChartCreator.pendingNodes?.length) {\n          this.scene.insertElements(this.flowChartCreator.pendingNodes);\n        }\n\n        const firstNode = this.flowChartCreator.pendingNodes?.[0];\n\n        if (firstNode) {\n          this.setState(prevState => ({\n            selectedElementIds: makeNextSelectedElementIds(\n              {\n                [firstNode.id]: true,\n              },\n              prevState\n            ),\n          }));\n\n          if (\n            !isElementCompletelyInViewport(\n              [firstNode],\n              this.canvas.width / window.devicePixelRatio,\n              this.canvas.height / window.devicePixelRatio,\n              {\n                offsetLeft: this.state.offsetLeft,\n                offsetTop: this.state.offsetTop,\n                scrollX: this.state.scrollX,\n                scrollY: this.state.scrollY,\n                zoom: this.state.zoom,\n              },\n              this.scene.getNonDeletedElementsMap(),\n              this.getEditorUIOffsets()\n            )\n          ) {\n            this.scrollToContent(firstNode, {\n              animate: true,\n              duration: 300,\n              canvasOffsets: this.getEditorUIOffsets(),\n            });\n          }\n        }\n\n        this.flowChartCreator.clear();\n        this.syncActionResult({\n          captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n        });\n      }\n    }\n  });\n\n  // We purposely widen the `tool` type so this helper can be called with\n  // any tool without having to type check it\n  private isToolSupported = <T extends ToolType | \"custom\">(tool: T) => {\n    return (\n      this.props.UIOptions.tools?.[tool as Extract<T, keyof AppProps[\"UIOptions\"][\"tools\"]>] !==\n      false\n    );\n  };\n\n  setActiveTool = (\n    tool: ({ type: ToolType } | { type: \"custom\"; customType: string }) & {\n      locked?: boolean;\n      fromSelection?: boolean;\n    },\n    keepSelection = false\n  ) => {\n    if (!this.isToolSupported(tool.type)) {\n      console.warn(\n        `\"${tool.type}\" tool is disabled via \"UIOptions.canvasActions.tools.${tool.type}\"`\n      );\n      return;\n    }\n\n    const nextActiveTool = updateActiveTool(this.state, tool);\n    if (nextActiveTool.type === \"hand\") {\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n    } else if (!isHoldingSpace) {\n      setCursorForShape(this.interactiveCanvas, {\n        ...this.state,\n        activeTool: nextActiveTool,\n      });\n    }\n    if (isToolIcon(document.activeElement)) {\n      this.focusContainer();\n    }\n    if (!isLinearElementType(nextActiveTool.type)) {\n      this.setState({ suggestedBinding: null });\n    }\n    if (nextActiveTool.type === \"image\") {\n      this.onImageToolbarButtonClick();\n    }\n\n    this.setState(prevState => {\n      const commonResets = {\n        snapLines: prevState.snapLines.length ? [] : prevState.snapLines,\n        originSnapOffset: null,\n        activeEmbeddable: null,\n        selectedLinearElement: isSelectionLikeTool(nextActiveTool.type)\n          ? prevState.selectedLinearElement\n          : null,\n      } as const;\n\n      if (nextActiveTool.type === \"freedraw\") {\n        this.store.scheduleCapture();\n      }\n\n      if (nextActiveTool.type === \"lasso\") {\n        return {\n          ...prevState,\n          ...commonResets,\n          activeTool: nextActiveTool,\n          ...(keepSelection\n            ? {}\n            : {\n                selectedElementIds: makeNextSelectedElementIds({}, prevState),\n                selectedGroupIds: makeNextSelectedElementIds({}, prevState),\n                editingGroupId: null,\n                multiElement: null,\n              }),\n        };\n      } else if (nextActiveTool.type !== \"selection\") {\n        return {\n          ...prevState,\n          ...commonResets,\n          activeTool: nextActiveTool,\n          selectedElementIds: makeNextSelectedElementIds({}, prevState),\n          selectedGroupIds: makeNextSelectedElementIds({}, prevState),\n          editingGroupId: null,\n          multiElement: null,\n        };\n      }\n      return {\n        ...prevState,\n        ...commonResets,\n        activeTool: nextActiveTool,\n      };\n    });\n  };\n\n  setOpenDialog = (dialogType: AppState[\"openDialog\"]) => {\n    this.setState({ openDialog: dialogType });\n  };\n\n  private setCursor = (cursor: string) => {\n    setCursor(this.interactiveCanvas, cursor);\n  };\n\n  private resetCursor = () => {\n    resetCursor(this.interactiveCanvas);\n  };\n  /**\n   * returns whether user is making a gesture with >= 2 fingers (points)\n   * on o touch screen (not on a trackpad). Currently only relates to Darwin\n   * (iOS/iPadOS,MacOS), but may work on other devices in the future if\n   * GestureEvent is standardized.\n   */\n  private isTouchScreenMultiTouchGesture = () => {\n    // we don't want to deselect when using trackpad, and multi-point gestures\n    // only work on touch screens, so checking for >= pointers means we're on a\n    // touchscreen\n    return gesture.pointers.size >= 2;\n  };\n\n  public getName = () => {\n    return this.state.name || this.props.name || `${t(\"labels.untitled\")}-${getDateTime()}`;\n  };\n\n  // fires only on Safari\n  private onGestureStart = withBatchedUpdates((event: GestureEvent) => {\n    event.preventDefault();\n\n    // we only want to deselect on touch screens because user may have selected\n    // elements by mistake while zooming\n    if (this.isTouchScreenMultiTouchGesture()) {\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds({}, this.state),\n        activeEmbeddable: null,\n      });\n    }\n    gesture.initialScale = this.state.zoom.value;\n  });\n\n  // fires only on Safari\n  private onGestureChange = withBatchedUpdates((event: GestureEvent) => {\n    event.preventDefault();\n\n    // onGestureChange only has zoom factor but not the center.\n    // If we're on iPad or iPhone, then we recognize multi-touch and will\n    // zoom in at the right location in the touchmove handler\n    // (handleCanvasPointerMove).\n    //\n    // On Macbook trackpad, we don't have those events so will zoom in at the\n    // current location instead.\n    //\n    // As such, bail from this handler on touch devices.\n    if (this.isTouchScreenMultiTouchGesture()) {\n      return;\n    }\n\n    const initialScale = gesture.initialScale;\n    if (initialScale) {\n      this.setState(state => ({\n        ...getStateForZoom(\n          {\n            viewportX: this.lastViewportPosition.x,\n            viewportY: this.lastViewportPosition.y,\n            nextZoom: getNormalizedZoom(initialScale * event.scale),\n          },\n          state\n        ),\n      }));\n    }\n  });\n\n  // fires only on Safari\n  private onGestureEnd = withBatchedUpdates((event: GestureEvent) => {\n    event.preventDefault();\n    // reselect elements only on touch screens (see onGestureStart)\n    if (this.isTouchScreenMultiTouchGesture()) {\n      this.setState({\n        previousSelectedElementIds: {},\n        selectedElementIds: makeNextSelectedElementIds(\n          this.state.previousSelectedElementIds,\n          this.state\n        ),\n      });\n    }\n    gesture.initialScale = null;\n  });\n\n  private handleTextWysiwyg(\n    element: JsonDrawTextElement,\n    {\n      isExistingElement = false,\n    }: {\n      isExistingElement?: boolean;\n    }\n  ) {\n    const elementsMap = this.scene.getElementsMapIncludingDeleted();\n\n    const updateElement = (nextOriginalText: string, isDeleted: boolean) => {\n      this.scene.replaceAllElements([\n        // Not sure why we include deleted elements as well hence using deleted elements map\n        ...this.scene.getElementsIncludingDeleted().map(_element => {\n          if (_element.id === element.id && isTextElement(_element)) {\n            return newElementWith(_element, {\n              originalText: nextOriginalText,\n              isDeleted: isDeleted ?? _element.isDeleted,\n              // returns (wrapped) text and new dimensions\n              ...refreshTextDimensions(\n                _element,\n                getContainerElement(_element, elementsMap),\n                elementsMap,\n                nextOriginalText\n              ),\n            });\n          }\n          return _element;\n        }),\n      ]);\n    };\n\n    textWysiwyg({\n      id: element.id,\n      canvas: this.canvas,\n      getViewportCoords: (x, y) => {\n        const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n          {\n            sceneX: x,\n            sceneY: y,\n          },\n          this.state\n        );\n        return [viewportX - this.state.offsetLeft, viewportY - this.state.offsetTop];\n      },\n      onChange: withBatchedUpdates(nextOriginalText => {\n        updateElement(nextOriginalText, false);\n        if (isNonDeletedElement(element)) {\n          updateBoundElements(element, this.scene);\n        }\n      }),\n      onSubmit: withBatchedUpdates(({ viaKeyboard, nextOriginalText }) => {\n        const isDeleted = !nextOriginalText.trim();\n        updateElement(nextOriginalText, isDeleted);\n\n        // select the created text element only if submitting via keyboard\n        // (when submitting via click it should act as signal to deselect)\n        if (!isDeleted && viaKeyboard) {\n          const elementIdToSelect = element.containerId ? element.containerId : element.id;\n\n          // needed to ensure state is updated before \"finalize\" action\n          // that's invoked on keyboard-submit as well\n          // TODO either move this into finalize as well, or handle all state\n          // updates in one place, skipping finalize action\n          flushSync(() => {\n            this.setState(prevState => ({\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  ...prevState.selectedElementIds,\n                  [elementIdToSelect]: true,\n                },\n                prevState\n              ),\n            }));\n          });\n        }\n\n        if (isDeleted) {\n          fixBindingsAfterDeletion(this.scene.getNonDeletedElements(), [element]);\n        }\n\n        if (!isDeleted || isExistingElement) {\n          this.store.scheduleCapture();\n        }\n\n        flushSync(() => {\n          this.setState({\n            newElement: null,\n            editingTextElement: null,\n          });\n        });\n\n        if (this.state.activeTool.locked) {\n          setCursorForShape(this.interactiveCanvas, this.state);\n        }\n\n        this.focusContainer();\n      }),\n      element,\n      jsondrawContainer: this.jsondrawContainerRef.current,\n      app: this,\n      // when text is selected, it's hard (at least on iOS) to re-position the\n      // caret (i.e. deselect). There's not much use for always selecting\n      // the text on edit anyway (and users can select-all from contextmenu\n      // if needed)\n      autoSelect: !this.editorInterface.isTouchScreen,\n    });\n    // deselect all other elements when inserting text\n    this.deselectElements();\n\n    // do an initial update to re-initialize element position since we were\n    // modifying element's x/y for sake of editor (case: syncing to remote)\n    updateElement(element.originalText, false);\n  }\n\n  private deselectElements() {\n    this.setState({\n      selectedElementIds: makeNextSelectedElementIds({}, this.state),\n      selectedGroupIds: {},\n      editingGroupId: null,\n      activeEmbeddable: null,\n    });\n  }\n\n  private getTextElementAtPosition(x: number, y: number): NonDeleted<JsonDrawTextElement> | null {\n    const element = this.getElementAtPosition(x, y, {\n      includeBoundTextElement: true,\n    });\n    if (element && isTextElement(element) && !element.isDeleted) {\n      return element;\n    }\n    return null;\n  }\n\n  // NOTE: Hot path for hit testing, so avoid unnecessary computations\n  private getElementAtPosition(\n    x: number,\n    y: number,\n    opts?: (\n      | {\n          includeBoundTextElement?: boolean;\n          includeLockedElements?: boolean;\n        }\n      | {\n          allHitElements: NonDeleted<JsonDrawElement>[];\n        }\n    ) & {\n      preferSelected?: boolean;\n    }\n  ): NonDeleted<JsonDrawElement> | null {\n    let allHitElements: NonDeleted<JsonDrawElement>[] = [];\n    if (opts && \"allHitElements\" in opts) {\n      allHitElements = opts?.allHitElements || [];\n    } else {\n      allHitElements = this.getElementsAtPosition(x, y, {\n        includeBoundTextElement: opts?.includeBoundTextElement,\n        includeLockedElements: opts?.includeLockedElements,\n      });\n    }\n\n    if (allHitElements.length > 1) {\n      if (opts?.preferSelected) {\n        for (let index = allHitElements.length - 1; index > -1; index--) {\n          if (this.state.selectedElementIds[allHitElements[index].id]) {\n            return allHitElements[index];\n          }\n        }\n      }\n      const elementWithHighestZIndex = allHitElements[allHitElements.length - 1];\n\n      // If we're hitting element with highest z-index only on its bounding box\n      // while also hitting other element figure, the latter should be considered.\n      return hitElementItself({\n        point: pointFrom(x, y),\n        element: elementWithHighestZIndex,\n        // when overlapping, we would like to be more precise\n        // this also avoids the need to update past tests\n        threshold: this.getElementHitThreshold(elementWithHighestZIndex) / 2,\n        elementsMap: this.scene.getNonDeletedElementsMap(),\n        frameNameBound: isFrameLikeElement(elementWithHighestZIndex)\n          ? this.frameNameBoundsCache.get(elementWithHighestZIndex)\n          : null,\n      })\n        ? elementWithHighestZIndex\n        : allHitElements[allHitElements.length - 2];\n    }\n    if (allHitElements.length === 1) {\n      return allHitElements[0];\n    }\n\n    return null;\n  }\n\n  // NOTE: Hot path for hit testing, so avoid unnecessary computations\n  private getElementsAtPosition(\n    x: number,\n    y: number,\n    opts?: {\n      includeBoundTextElement?: boolean;\n      includeLockedElements?: boolean;\n    }\n  ): NonDeleted<JsonDrawElement>[] {\n    const iframeLikes: Ordered<JsonDrawIframeElement>[] = [];\n\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n\n    const elements = (\n      opts?.includeBoundTextElement && opts?.includeLockedElements\n        ? this.scene.getNonDeletedElements()\n        : this.scene\n            .getNonDeletedElements()\n            .filter(\n              element =>\n                (opts?.includeLockedElements || !element.locked) &&\n                (opts?.includeBoundTextElement || !(isTextElement(element) && element.containerId))\n            )\n    )\n      .filter(el => this.hitElement(x, y, el))\n      .filter(element => {\n        // hitting a frame's element from outside the frame is not considered a hit\n        const containingFrame = getContainingFrame(element, elementsMap);\n        return containingFrame &&\n          this.state.frameRendering.enabled &&\n          this.state.frameRendering.clip\n          ? isCursorInFrame({ x, y }, containingFrame, elementsMap)\n          : true;\n      })\n      .filter(el => {\n        // The parameter elements comes ordered from lower z-index to higher.\n        // We want to preserve that order on the returned array.\n        // Exception being embeddables which should be on top of everything else in\n        // terms of hit testing.\n        if (isIframeElement(el)) {\n          iframeLikes.push(el);\n          return false;\n        }\n        return true;\n      })\n      .concat(iframeLikes) as NonDeleted<JsonDrawElement>[];\n\n    return elements;\n  }\n\n  getElementHitThreshold(element: JsonDrawElement) {\n    return Math.max(\n      element.strokeWidth / 2 + 0.1,\n      // NOTE: Here be dragons. Do not go under the 0.63 multiplier unless you're\n      // willing to test extensively. The hit testing starts to become unreliable\n      // due to FP imprecision under 0.63 in high zoom levels.\n      0.85 * (DEFAULT_COLLISION_THRESHOLD / this.state.zoom.value)\n    );\n  }\n\n  private hitElement(x: number, y: number, element: JsonDrawElement, considerBoundingBox = true) {\n    // if the element is selected, then hit test is done against its bounding box\n    if (\n      considerBoundingBox &&\n      this.state.selectedElementIds[element.id] &&\n      hasBoundingBox([element], this.state, this.editorInterface)\n    ) {\n      // if hitting the bounding box, return early\n      // but if not, we should check for other cases as well (e.g. frame name)\n      if (\n        hitElementBoundingBox(\n          pointFrom(x, y),\n          element,\n          this.scene.getNonDeletedElementsMap(),\n          this.getElementHitThreshold(element)\n        )\n      ) {\n        return true;\n      }\n    }\n\n    // take bound text element into consideration for hit collision as well\n    const hitBoundTextOfElement = hitElementBoundText(\n      pointFrom(x, y),\n      element,\n      this.scene.getNonDeletedElementsMap()\n    );\n    if (hitBoundTextOfElement) {\n      return true;\n    }\n\n    return hitElementItself({\n      point: pointFrom(x, y),\n      element,\n      threshold: this.getElementHitThreshold(element),\n      elementsMap: this.scene.getNonDeletedElementsMap(),\n      frameNameBound: isFrameLikeElement(element) ? this.frameNameBoundsCache.get(element) : null,\n    });\n  }\n\n  private getTextBindableContainerAtPosition(x: number, y: number) {\n    const elements = this.scene.getNonDeletedElements();\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    if (selectedElements.length === 1) {\n      return isTextBindableContainer(selectedElements[0], false) ? selectedElements[0] : null;\n    }\n    let hitElement: JsonDrawElement | null = null;\n    // We need to do hit testing from front (end of the array) to back (beginning of the array)\n    for (let index = elements.length - 1; index >= 0; --index) {\n      if (elements[index].isDeleted) {\n        continue;\n      }\n      const [x1, y1, x2, y2] = getElementAbsoluteCoords(\n        elements[index],\n        this.scene.getNonDeletedElementsMap()\n      );\n      if (\n        isArrowElement(elements[index]) &&\n        hitElementItself({\n          point: pointFrom(x, y),\n          element: elements[index],\n          elementsMap: this.scene.getNonDeletedElementsMap(),\n          threshold: this.getElementHitThreshold(elements[index]),\n        })\n      ) {\n        hitElement = elements[index];\n        break;\n      } else if (x1 < x && x < x2 && y1 < y && y < y2) {\n        hitElement = elements[index];\n        break;\n      }\n    }\n\n    return isTextBindableContainer(hitElement, false) ? hitElement : null;\n  }\n\n  private startTextEditing = ({\n    sceneX,\n    sceneY,\n    insertAtParentCenter = true,\n    container,\n    autoEdit = true,\n  }: {\n    /** X position to insert text at */\n    sceneX: number;\n    /** Y position to insert text at */\n    sceneY: number;\n    /** whether to attempt to insert at element center if applicable */\n    insertAtParentCenter?: boolean;\n    container?: JsonDrawTextContainer | null;\n    autoEdit?: boolean;\n  }) => {\n    let shouldBindToContainer = false;\n\n    let parentCenterPosition =\n      insertAtParentCenter &&\n      this.getTextWysiwygSnappedToCenterPosition(sceneX, sceneY, this.state, container);\n    if (container && parentCenterPosition) {\n      const boundTextElementToContainer = getBoundTextElement(\n        container,\n        this.scene.getNonDeletedElementsMap()\n      );\n      if (!boundTextElementToContainer) {\n        shouldBindToContainer = true;\n      }\n    }\n    let existingTextElement: NonDeleted<JsonDrawTextElement> | null = null;\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n\n    if (selectedElements.length === 1) {\n      if (isTextElement(selectedElements[0])) {\n        existingTextElement = selectedElements[0];\n      } else if (container) {\n        existingTextElement = getBoundTextElement(\n          selectedElements[0],\n          this.scene.getNonDeletedElementsMap()\n        );\n      } else {\n        existingTextElement = this.getTextElementAtPosition(sceneX, sceneY);\n      }\n    } else {\n      existingTextElement = this.getTextElementAtPosition(sceneX, sceneY);\n    }\n\n    const fontFamily = existingTextElement?.fontFamily || this.state.currentItemFontFamily;\n\n    const lineHeight = existingTextElement?.lineHeight || getLineHeight(fontFamily);\n    const fontSize = this.state.currentItemFontSize;\n\n    if (!existingTextElement && shouldBindToContainer && container && !isArrowElement(container)) {\n      const fontString = {\n        fontSize,\n        fontFamily,\n      };\n      const minWidth = getApproxMinLineWidth(getFontString(fontString), lineHeight);\n      const minHeight = getApproxMinLineHeight(fontSize, lineHeight);\n      const newHeight = Math.max(container.height, minHeight);\n      const newWidth = Math.max(container.width, minWidth);\n      this.scene.mutateElement(container, {\n        height: newHeight,\n        width: newWidth,\n      });\n      sceneX = container.x + newWidth / 2;\n      sceneY = container.y + newHeight / 2;\n      if (parentCenterPosition) {\n        parentCenterPosition = this.getTextWysiwygSnappedToCenterPosition(\n          sceneX,\n          sceneY,\n          this.state,\n          container\n        );\n      }\n    }\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n      x: sceneX,\n      y: sceneY,\n    });\n\n    const element =\n      existingTextElement ||\n      newTextElement({\n        x: parentCenterPosition ? parentCenterPosition.elementCenterX : sceneX,\n        y: parentCenterPosition ? parentCenterPosition.elementCenterY : sceneY,\n        strokeColor: this.state.currentItemStrokeColor,\n        backgroundColor: this.state.currentItemBackgroundColor,\n        fillStyle: this.state.currentItemFillStyle,\n        strokeWidth: this.state.currentItemStrokeWidth,\n        strokeStyle: this.state.currentItemStrokeStyle,\n        roughness: this.state.currentItemRoughness,\n        opacity: this.state.currentItemOpacity,\n        text: \"\",\n        fontSize,\n        fontFamily,\n        textAlign: parentCenterPosition ? \"center\" : this.state.currentItemTextAlign,\n        verticalAlign: parentCenterPosition ? VERTICAL_ALIGN.MIDDLE : DEFAULT_VERTICAL_ALIGN,\n        containerId: shouldBindToContainer ? container?.id : undefined,\n        groupIds: container?.groupIds ?? [],\n        lineHeight,\n        angle: container\n          ? isArrowElement(container)\n            ? (0 as Radians)\n            : container.angle\n          : (0 as Radians),\n        frameId: topLayerFrame ? topLayerFrame.id : null,\n      });\n\n    if (!existingTextElement && shouldBindToContainer && container) {\n      this.scene.mutateElement(container, {\n        boundElements: (container.boundElements || []).concat({\n          type: \"text\",\n          id: element.id,\n        }),\n      });\n    }\n    this.setState({ editingTextElement: element });\n\n    if (!existingTextElement) {\n      if (container && shouldBindToContainer) {\n        const containerIndex = this.scene.getElementIndex(container.id);\n        this.scene.insertElementAtIndex(element, containerIndex + 1);\n      } else {\n        this.scene.insertElement(element);\n      }\n    }\n\n    if (autoEdit || existingTextElement || container) {\n      this.handleTextWysiwyg(element, {\n        isExistingElement: !!existingTextElement,\n      });\n    } else {\n      this.setState({\n        newElement: element,\n        multiElement: null,\n      });\n    }\n  };\n\n  private startImageCropping = (image: JsonDrawImageElement) => {\n    this.store.scheduleCapture();\n    this.setState({\n      croppingElementId: image.id,\n    });\n  };\n\n  private finishImageCropping = () => {\n    if (this.state.croppingElementId) {\n      this.store.scheduleCapture();\n      this.setState({\n        croppingElementId: null,\n      });\n    }\n  };\n\n  private handleCanvasDoubleClick = (event: React.MouseEvent<HTMLCanvasElement>) => {\n    // case: double-clicking with arrow/line tool selected would both create\n    // text and enter multiElement mode\n    if (this.state.multiElement) {\n      return;\n    }\n    // we should only be able to double click when mode is selection\n    if (this.state.activeTool.type !== this.state.preferredSelectionTool.type) {\n      return;\n    }\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n\n    let { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(event, this.state);\n\n    if (selectedElements.length === 1 && isLinearElement(selectedElements[0])) {\n      const selectedLinearElement: JsonDrawLinearElement = selectedElements[0];\n      if (\n        ((event[KEYS.CTRL_OR_CMD] && isSimpleArrow(selectedLinearElement)) ||\n          isLineElement(selectedLinearElement)) &&\n        (!this.state.selectedLinearElement?.isEditing ||\n          this.state.selectedLinearElement.elementId !== selectedLinearElement.id)\n      ) {\n        // Use the proper action to ensure immediate history capture\n        this.actionManager.executeAction(actionToggleLinearEditor);\n        return;\n      } else if (this.state.selectedLinearElement && isElbowArrow(selectedElements[0])) {\n        const hitCoords = LinearElementEditor.getSegmentMidpointHitCoords(\n          this.state.selectedLinearElement,\n          { x: sceneX, y: sceneY },\n          this.state,\n          this.scene.getNonDeletedElementsMap()\n        );\n        const midPoint = hitCoords\n          ? LinearElementEditor.getSegmentMidPointIndex(\n              this.state.selectedLinearElement,\n              this.state,\n              hitCoords,\n              this.scene.getNonDeletedElementsMap()\n            )\n          : -1;\n\n        if (midPoint && midPoint > -1) {\n          this.store.scheduleCapture();\n          LinearElementEditor.deleteFixedSegment(selectedElements[0], this.scene, midPoint);\n\n          const nextCoords = LinearElementEditor.getSegmentMidpointHitCoords(\n            {\n              ...this.state.selectedLinearElement,\n              segmentMidPointHoveredCoords: null,\n            },\n            { x: sceneX, y: sceneY },\n            this.state,\n            this.scene.getNonDeletedElementsMap()\n          );\n          const nextIndex = nextCoords\n            ? LinearElementEditor.getSegmentMidPointIndex(\n                this.state.selectedLinearElement,\n                this.state,\n                nextCoords,\n                this.scene.getNonDeletedElementsMap()\n              )\n            : null;\n\n          this.setState({\n            selectedLinearElement: {\n              ...this.state.selectedLinearElement,\n              initialState: {\n                ...this.state.selectedLinearElement.initialState,\n                segmentMidpoint: {\n                  index: nextIndex,\n                  value: hitCoords,\n                  added: false,\n                },\n              },\n              segmentMidPointHoveredCoords: nextCoords,\n            },\n          });\n\n          return;\n        }\n      } else if (\n        this.state.selectedLinearElement?.isEditing &&\n        this.state.selectedLinearElement.elementId === selectedLinearElement.id &&\n        isLineElement(selectedLinearElement)\n      ) {\n        return;\n      }\n    }\n\n    if (selectedElements.length === 1 && isImageElement(selectedElements[0])) {\n      this.startImageCropping(selectedElements[0]);\n      return;\n    }\n\n    resetCursor(this.interactiveCanvas);\n\n    const selectedGroupIds = getSelectedGroupIds(this.state);\n\n    if (selectedGroupIds.length > 0) {\n      const hitElement = this.getElementAtPosition(sceneX, sceneY);\n\n      const selectedGroupId =\n        hitElement && getSelectedGroupIdForElement(hitElement, this.state.selectedGroupIds);\n\n      if (selectedGroupId) {\n        this.store.scheduleCapture();\n        this.setState(prevState => ({\n          ...prevState,\n          ...selectGroupsForSelectedElements(\n            {\n              editingGroupId: selectedGroupId,\n              selectedElementIds: { [hitElement!.id]: true },\n            },\n            this.scene.getNonDeletedElements(),\n            prevState,\n            this\n          ),\n        }));\n        return;\n      }\n    }\n\n    resetCursor(this.interactiveCanvas);\n    if (!event[KEYS.CTRL_OR_CMD] && !this.state.viewModeEnabled) {\n      const hitElement = this.getElementAtPosition(sceneX, sceneY);\n\n      if (isIframeLikeElement(hitElement)) {\n        this.setState({\n          activeEmbeddable: { element: hitElement, state: \"active\" },\n        });\n        return;\n      }\n\n      // shouldn't edit/create text when inside line editor (often false positive)\n\n      if (!this.state.selectedLinearElement?.isEditing) {\n        const container = this.getTextBindableContainerAtPosition(sceneX, sceneY);\n\n        if (container) {\n          if (\n            hasBoundTextElement(container) ||\n            !isTransparent(container.backgroundColor) ||\n            hitElementItself({\n              point: pointFrom(sceneX, sceneY),\n              element: container,\n              elementsMap: this.scene.getNonDeletedElementsMap(),\n              threshold: this.getElementHitThreshold(container),\n            })\n          ) {\n            const midPoint = getContainerCenter(\n              container,\n              this.state,\n              this.scene.getNonDeletedElementsMap()\n            );\n\n            sceneX = midPoint.x;\n            sceneY = midPoint.y;\n          }\n        }\n\n        this.startTextEditing({\n          sceneX,\n          sceneY,\n          insertAtParentCenter: !event.altKey,\n          container,\n        });\n      }\n    }\n  };\n\n  private getElementLinkAtPosition = (\n    scenePointer: Readonly<{ x: number; y: number }>,\n    hitElementMightBeLocked: NonDeletedJsonDrawElement | null\n  ): JsonDrawElement | undefined => {\n    if (hitElementMightBeLocked && hitElementMightBeLocked.locked) {\n      return undefined;\n    }\n\n    const elements = this.scene.getNonDeletedElements();\n    let hitElementIndex = -1;\n\n    for (let index = elements.length - 1; index >= 0; index--) {\n      const element = elements[index];\n      if (hitElementMightBeLocked && element.id === hitElementMightBeLocked.id) {\n        hitElementIndex = index;\n      }\n      if (\n        element.link &&\n        index >= hitElementIndex &&\n        isPointHittingLink(\n          element,\n          this.scene.getNonDeletedElementsMap(),\n          this.state,\n          pointFrom(scenePointer.x, scenePointer.y),\n          this.editorInterface.formFactor === \"phone\"\n        )\n      ) {\n        return element;\n      }\n    }\n  };\n\n  private redirectToLink = (\n    event: React.PointerEvent<HTMLCanvasElement>,\n    isTouchScreen: boolean\n  ) => {\n    const draggedDistance = pointDistance(\n      pointFrom(this.lastPointerDownEvent!.clientX, this.lastPointerDownEvent!.clientY),\n      pointFrom(this.lastPointerUpEvent!.clientX, this.lastPointerUpEvent!.clientY)\n    );\n    if (!this.hitLinkElement || draggedDistance > DRAGGING_THRESHOLD) {\n      return;\n    }\n    const lastPointerDownCoords = viewportCoordsToSceneCoords(\n      this.lastPointerDownEvent!,\n      this.state\n    );\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n    const lastPointerDownHittingLinkIcon = isPointHittingLink(\n      this.hitLinkElement,\n      elementsMap,\n      this.state,\n      pointFrom(lastPointerDownCoords.x, lastPointerDownCoords.y),\n      this.editorInterface.formFactor === \"phone\"\n    );\n    const lastPointerUpCoords = viewportCoordsToSceneCoords(this.lastPointerUpEvent!, this.state);\n    const lastPointerUpHittingLinkIcon = isPointHittingLink(\n      this.hitLinkElement,\n      elementsMap,\n      this.state,\n      pointFrom(lastPointerUpCoords.x, lastPointerUpCoords.y),\n      this.editorInterface.formFactor === \"phone\"\n    );\n    if (lastPointerDownHittingLinkIcon && lastPointerUpHittingLinkIcon) {\n      hideHyperlinkToolip();\n      let url = this.hitLinkElement.link;\n      if (url) {\n        url = normalizeLink(url);\n        let customEvent;\n        if (this.props.onLinkOpen) {\n          customEvent = wrapEvent(EVENT.JSONDRAW_LINK, event.nativeEvent);\n          this.props.onLinkOpen(\n            {\n              ...this.hitLinkElement,\n              link: url,\n            },\n            customEvent\n          );\n        }\n        if (!customEvent?.defaultPrevented) {\n          const target = isLocalLink(url) ? \"_self\" : \"_blank\";\n          const newWindow = window.open(undefined, target);\n          // https://mathiasbynens.github.io/rel-noopener/\n          if (newWindow) {\n            newWindow.opener = null;\n            newWindow.location = url;\n          }\n        }\n      }\n    }\n  };\n\n  private getTopLayerFrameAtSceneCoords = (sceneCoords: { x: number; y: number }) => {\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n    const frames = this.scene\n      .getNonDeletedFramesLikes()\n      .filter(\n        (frame): frame is JsonDrawFrameLikeElement =>\n          !frame.locked && isCursorInFrame(sceneCoords, frame, elementsMap)\n      );\n\n    return frames.length ? frames[frames.length - 1] : null;\n  };\n\n  private handleCanvasPointerMove = (event: React.PointerEvent<HTMLCanvasElement>) => {\n    this.savePointer(event.clientX, event.clientY, this.state.cursorButton);\n    this.lastPointerMoveEvent = event.nativeEvent;\n    const scenePointer = viewportCoordsToSceneCoords(event, this.state);\n    const { x: scenePointerX, y: scenePointerY } = scenePointer;\n    this.lastPointerMoveCoords = {\n      x: scenePointerX,\n      y: scenePointerY,\n    };\n\n    if (gesture.pointers.has(event.pointerId)) {\n      gesture.pointers.set(event.pointerId, {\n        x: event.clientX,\n        y: event.clientY,\n      });\n    }\n\n    const initialScale = gesture.initialScale;\n    if (\n      gesture.pointers.size === 2 &&\n      gesture.lastCenter &&\n      initialScale &&\n      gesture.initialDistance\n    ) {\n      const center = getCenter(gesture.pointers);\n      const deltaX = center.x - gesture.lastCenter.x;\n      const deltaY = center.y - gesture.lastCenter.y;\n      gesture.lastCenter = center;\n\n      const distance = getDistance(Array.from(gesture.pointers.values()));\n      const scaleFactor =\n        this.state.activeTool.type === \"freedraw\" && this.state.penMode\n          ? 1\n          : distance / gesture.initialDistance;\n\n      const nextZoom = scaleFactor\n        ? getNormalizedZoom(initialScale * scaleFactor)\n        : this.state.zoom.value;\n\n      this.setState(state => {\n        const zoomState = getStateForZoom(\n          {\n            viewportX: center.x,\n            viewportY: center.y,\n            nextZoom,\n          },\n          state\n        );\n\n        this.translateCanvas({\n          zoom: zoomState.zoom,\n          // 2x multiplier is just a magic number that makes this work correctly\n          // on touchscreen devices (note: if we get report that panning is slower/faster\n          // than actual movement, consider swapping with devicePixelRatio)\n          scrollX: zoomState.scrollX + 2 * (deltaX / nextZoom),\n          scrollY: zoomState.scrollY + 2 * (deltaY / nextZoom),\n          shouldCacheIgnoreZoom: true,\n        });\n\n        return null;\n      });\n      this.resetShouldCacheIgnoreZoomDebounced();\n    } else {\n      gesture.lastCenter = gesture.initialDistance = gesture.initialScale = null;\n    }\n\n    if (isHoldingSpace || isPanning || isDraggingScrollBar || isHandToolActive(this.state)) {\n      return;\n    }\n\n    const isPointerOverScrollBars = isOverScrollBars(\n      currentScrollBars,\n      event.clientX - this.state.offsetLeft,\n      event.clientY - this.state.offsetTop\n    );\n    const isOverScrollBar = isPointerOverScrollBars.isOverEither;\n    if (\n      !this.state.newElement &&\n      !this.state.selectionElement &&\n      !this.state.selectedElementsAreBeingDragged &&\n      !this.state.multiElement\n    ) {\n      if (isOverScrollBar) {\n        resetCursor(this.interactiveCanvas);\n      } else {\n        setCursorForShape(this.interactiveCanvas, this.state);\n      }\n    }\n\n    if (!this.state.newElement && isActiveToolNonLinearSnappable(this.state.activeTool.type)) {\n      const { originOffset, snapLines } = getSnapLinesAtPointer(\n        this.scene.getNonDeletedElements(),\n        this,\n        {\n          x: scenePointerX,\n          y: scenePointerY,\n        },\n        event,\n        this.scene.getNonDeletedElementsMap()\n      );\n\n      this.setState(prevState => {\n        const nextSnapLines = updateStable(prevState.snapLines, snapLines);\n        const nextOriginOffset = prevState.originSnapOffset\n          ? updateStable(prevState.originSnapOffset, originOffset)\n          : originOffset;\n\n        if (\n          prevState.snapLines === nextSnapLines &&\n          prevState.originSnapOffset === nextOriginOffset\n        ) {\n          return null;\n        }\n        return {\n          snapLines: nextSnapLines,\n          originSnapOffset: nextOriginOffset,\n        };\n      });\n    } else if (\n      !this.state.newElement &&\n      !this.state.selectedElementsAreBeingDragged &&\n      !this.state.selectionElement\n    ) {\n      this.setState(prevState => {\n        if (prevState.snapLines.length) {\n          return {\n            snapLines: [],\n          };\n        }\n        return null;\n      });\n    }\n\n    if (\n      this.state.selectedLinearElement?.isEditing &&\n      !this.state.selectedLinearElement.isDragging\n    ) {\n      const editingLinearElement = this.state.newElement\n        ? null\n        : LinearElementEditor.handlePointerMoveInEditMode(\n            event,\n            scenePointerX,\n            scenePointerY,\n            this\n          );\n\n      if (editingLinearElement && editingLinearElement !== this.state.selectedLinearElement) {\n        // Since we are reading from previous state which is not possible with\n        // automatic batching in React 18 hence using flush sync to synchronously\n        // update the state. Check https://github.com/jsondraw/jsondraw/pull/5508 for more details.\n        flushSync(() => {\n          this.setState({\n            selectedLinearElement: editingLinearElement,\n          });\n        });\n      }\n    }\n\n    if (isBindingElementType(this.state.activeTool.type)) {\n      // Hovering with a selected tool or creating new linear element via click\n      // and point\n      const { newElement } = this.state;\n      if (!newElement && isBindingEnabled(this.state)) {\n        const globalPoint = pointFrom<GlobalPoint>(scenePointerX, scenePointerY);\n        const elementsMap = this.scene.getNonDeletedElementsMap();\n        const hoveredElement = getHoveredElementForBinding(\n          globalPoint,\n          this.scene.getNonDeletedElements(),\n          elementsMap,\n          maxBindingDistance_simple(this.state.zoom)\n        );\n        if (hoveredElement) {\n          this.setState({\n            suggestedBinding: {\n              element: hoveredElement,\n              midPoint: getSnapOutlineMidPoint(\n                globalPoint,\n                hoveredElement,\n                elementsMap,\n                this.state.zoom\n              ),\n            },\n          });\n        } else if (this.state.suggestedBinding) {\n          this.setState({\n            suggestedBinding: null,\n          });\n        }\n      }\n    }\n\n    if (this.state.multiElement && this.state.selectedLinearElement) {\n      const { multiElement, selectedLinearElement } = this.state;\n      const { x: rx, y: ry, points } = multiElement;\n      const lastPoint = points[points.length - 1];\n\n      const { lastCommittedPoint } = selectedLinearElement;\n\n      setCursorForShape(this.interactiveCanvas, this.state);\n\n      if (lastPoint === lastCommittedPoint) {\n        const hoveredElement =\n          isArrowElement(this.state.newElement) &&\n          isBindingEnabled(this.state) &&\n          getHoveredElementForBinding(\n            pointFrom<GlobalPoint>(scenePointerX, scenePointerY),\n            this.scene.getNonDeletedElements(),\n            this.scene.getNonDeletedElementsMap(),\n            maxBindingDistance_simple(this.state.zoom)\n          );\n        if (hoveredElement) {\n          this.actionManager.executeAction(actionFinalize, \"ui\", {\n            event: event.nativeEvent,\n            sceneCoords: {\n              x: scenePointerX,\n              y: scenePointerY,\n            },\n          });\n          this.setState({ suggestedBinding: null, startBoundElement: null });\n          if (!this.state.activeTool.locked) {\n            resetCursor(this.interactiveCanvas);\n            this.setState(prevState => ({\n              newElement: null,\n              activeTool: updateActiveTool(this.state, {\n                type: this.state.preferredSelectionTool.type,\n              }),\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  ...prevState.selectedElementIds,\n                  [multiElement.id]: true,\n                },\n                prevState\n              ),\n              selectedLinearElement: new LinearElementEditor(\n                multiElement,\n                this.scene.getNonDeletedElementsMap()\n              ),\n            }));\n          }\n        } else if (\n          // if we haven't yet created a temp point and we're beyond commit-zone\n          // threshold, add a point\n          pointDistance(pointFrom(scenePointerX - rx, scenePointerY - ry), lastPoint) >=\n          LINE_CONFIRM_THRESHOLD\n        ) {\n          this.scene.mutateElement(\n            multiElement,\n            {\n              points: [...points, pointFrom<LocalPoint>(scenePointerX - rx, scenePointerY - ry)],\n            },\n            { informMutation: false, isDragging: false }\n          );\n          invariant(this.state.selectedLinearElement?.initialState, \"initialState must be set\");\n          this.setState({\n            selectedLinearElement: {\n              ...this.state.selectedLinearElement,\n              lastCommittedPoint: points[points.length - 1],\n              selectedPointsIndices: [multiElement.points.length - 1],\n              initialState: {\n                ...this.state.selectedLinearElement.initialState,\n                lastClickedPoint: multiElement.points.length - 1,\n              },\n            },\n          });\n        } else {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n          // in this branch, we're inside the commit zone, and no uncommitted\n          // point exists. Thus do nothing (don't add/remove points).\n        }\n      } else if (\n        points.length > 2 &&\n        lastCommittedPoint &&\n        pointDistance(pointFrom(scenePointerX - rx, scenePointerY - ry), lastCommittedPoint) <\n          LINE_CONFIRM_THRESHOLD\n      ) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n        this.scene.mutateElement(\n          multiElement,\n          {\n            points: points.slice(0, -1),\n          },\n          { informMutation: false, isDragging: false }\n        );\n        this.setState({\n          selectedLinearElement: {\n            ...selectedLinearElement,\n            selectedPointsIndices: selectedLinearElement.selectedPointsIndices?.includes(\n              multiElement.points.length\n            )\n              ? [\n                  ...selectedLinearElement.selectedPointsIndices.filter(\n                    idx =>\n                      idx !== multiElement.points.length && idx !== multiElement.points.length - 1\n                  ),\n                  multiElement.points.length - 1,\n                ]\n              : selectedLinearElement.selectedPointsIndices,\n            lastCommittedPoint: multiElement.points[multiElement.points.length - 1],\n            initialState: {\n              ...selectedLinearElement.initialState,\n              lastClickedPoint: multiElement.points.length - 1,\n            },\n          },\n        });\n      } else {\n        if (isPathALoop(points, this.state.zoom.value)) {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n        }\n\n        // Update arrow points\n        const elementsMap = this.scene.getNonDeletedElementsMap();\n\n        if (isSimpleArrow(multiElement)) {\n          const hoveredElement = getHoveredElementForBinding(\n            pointFrom<GlobalPoint>(scenePointerX, scenePointerY),\n            this.scene.getNonDeletedElements(),\n            elementsMap\n          );\n\n          if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n            this.handleDelayedBindModeChange(multiElement, hoveredElement);\n          }\n        }\n\n        invariant(\n          this.state.selectedLinearElement,\n          \"Expected selectedLinearElement to be set to operate on a linear element\"\n        );\n\n        const newState = LinearElementEditor.handlePointerMove(\n          event.nativeEvent,\n          this,\n          scenePointerX,\n          scenePointerY,\n          this.state.selectedLinearElement\n        );\n        if (newState) {\n          this.setState(newState);\n        }\n      }\n\n      return;\n    }\n\n    if (this.state.activeTool.type === \"arrow\") {\n      const hit = getHoveredElementForBinding(\n        pointFrom<GlobalPoint>(scenePointerX, scenePointerY),\n        this.scene.getNonDeletedElements(),\n        this.scene.getNonDeletedElementsMap(),\n        maxBindingDistance_simple(this.state.zoom)\n      );\n      const scenePointer = pointFrom<GlobalPoint>(scenePointerX, scenePointerY);\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      if (hit && !isPointInElement(scenePointer, hit, elementsMap)) {\n        this.setState({\n          suggestedBinding: {\n            element: hit,\n            midPoint: getSnapOutlineMidPoint(scenePointer, hit, elementsMap, this.state.zoom),\n          },\n        });\n      }\n    }\n\n    const hasDeselectedButton = Boolean(event.buttons);\n    if (\n      hasDeselectedButton ||\n      (this.state.activeTool.type !== \"selection\" &&\n        this.state.activeTool.type !== \"lasso\" &&\n        this.state.activeTool.type !== \"text\" &&\n        this.state.activeTool.type !== \"eraser\")\n    ) {\n      return;\n    }\n\n    const elements = this.scene.getNonDeletedElements();\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    if (\n      selectedElements.length === 1 &&\n      !isOverScrollBar &&\n      !this.state.selectedLinearElement?.isEditing\n    ) {\n      // for linear elements, we'd like to prioritize point dragging over edge resizing\n      // therefore, we update and check hovered point index first\n      if (this.state.selectedLinearElement) {\n        this.handleHoverSelectedLinearElement(\n          this.state.selectedLinearElement,\n          scenePointerX,\n          scenePointerY\n        );\n      }\n\n      if (\n        (!this.state.selectedLinearElement ||\n          this.state.selectedLinearElement.hoverPointIndex === -1) &&\n        this.state.openDialog?.name !== \"elementLinkSelector\" &&\n        !(selectedElements.length === 1 && isElbowArrow(selectedElements[0])) &&\n        // HACK: Disable transform handles for linear elements on mobile until a\n        // better way of showing them is found\n        !(\n          isLinearElement(selectedElements[0]) &&\n          (this.editorInterface.userAgent.isMobileDevice || selectedElements[0].points.length === 2)\n        )\n      ) {\n        const elementWithTransformHandleType = getElementWithTransformHandleType(\n          elements,\n          this.state,\n          scenePointerX,\n          scenePointerY,\n          this.state.zoom,\n          event.pointerType,\n          this.scene.getNonDeletedElementsMap(),\n          this.editorInterface\n        );\n        if (elementWithTransformHandleType && elementWithTransformHandleType.transformHandleType) {\n          setCursor(\n            this.interactiveCanvas,\n            getCursorForResizingElement(elementWithTransformHandleType)\n          );\n          return;\n        }\n      }\n    } else if (\n      selectedElements.length > 1 &&\n      !isOverScrollBar &&\n      this.state.openDialog?.name !== \"elementLinkSelector\"\n    ) {\n      const transformHandleType = getTransformHandleTypeFromCoords(\n        getCommonBounds(selectedElements),\n        scenePointerX,\n        scenePointerY,\n        this.state.zoom,\n        event.pointerType,\n        this.editorInterface\n      );\n      if (transformHandleType) {\n        setCursor(\n          this.interactiveCanvas,\n          getCursorForResizingElement({\n            transformHandleType,\n          })\n        );\n        return;\n      }\n    }\n\n    const hitElementMightBeLocked = this.getElementAtPosition(scenePointerX, scenePointerY, {\n      preferSelected: true,\n      includeLockedElements: true,\n    });\n\n    let hitElement: JsonDrawElement | null = null;\n    if (hitElementMightBeLocked && hitElementMightBeLocked.locked) {\n      hitElement = null;\n    } else {\n      hitElement = hitElementMightBeLocked;\n    }\n\n    this.hitLinkElement = this.getElementLinkAtPosition(scenePointer, hitElementMightBeLocked);\n    if (isEraserActive(this.state)) {\n      return;\n    }\n    if (this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id]) {\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n      showHyperlinkTooltip(this.hitLinkElement, this.state, this.scene.getNonDeletedElementsMap());\n    } else {\n      hideHyperlinkToolip();\n      if (\n        hitElement &&\n        (hitElement.link || isEmbeddableElement(hitElement)) &&\n        this.state.selectedElementIds[hitElement.id] &&\n        !this.state.contextMenu &&\n        !this.state.showHyperlinkPopup\n      ) {\n        this.setState({ showHyperlinkPopup: \"info\" });\n      } else if (this.state.activeTool.type === \"text\") {\n        setCursor(\n          this.interactiveCanvas,\n          isTextElement(hitElement) ? CURSOR_TYPE.TEXT : CURSOR_TYPE.CROSSHAIR\n        );\n      } else if (this.state.viewModeEnabled) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n      } else if (this.state.openDialog?.name === \"elementLinkSelector\") {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n      } else if (isOverScrollBar) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n      } else if (\n        // if using cmd/ctrl, we're not dragging\n        !event[KEYS.CTRL_OR_CMD]\n      ) {\n        if (\n          (hitElement ||\n            this.isHittingCommonBoundingBoxOfSelectedElements(scenePointer, selectedElements)) &&\n          !hitElement?.locked\n        ) {\n          if (\n            hitElement &&\n            isIframeLikeElement(hitElement) &&\n            this.isIframeLikeElementCenter(hitElement, event, scenePointerX, scenePointerY)\n          ) {\n            setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n            this.setState({\n              activeEmbeddable: { element: hitElement, state: \"hover\" },\n            });\n          } else if (\n            !hitElement ||\n            // Elbow arrows can only be moved when unconnected\n            !isElbowArrow(hitElement) ||\n            !(hitElement.startBinding || hitElement.endBinding)\n          ) {\n            if (this.state.activeTool.type !== \"lasso\" || selectedElements.length > 0) {\n              setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n            }\n            if (this.state.activeEmbeddable?.state === \"hover\") {\n              this.setState({ activeEmbeddable: null });\n            }\n          }\n        }\n      } else {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n      }\n\n      if (this.state.selectedLinearElement) {\n        this.handleHoverSelectedLinearElement(\n          this.state.selectedLinearElement,\n          scenePointerX,\n          scenePointerY\n        );\n      }\n    }\n\n    if (this.state.openDialog?.name === \"elementLinkSelector\" && hitElement) {\n      this.setState(prevState => {\n        return {\n          hoveredElementIds: updateStable(\n            prevState.hoveredElementIds,\n            selectGroupsForSelectedElements(\n              {\n                editingGroupId: prevState.editingGroupId,\n                selectedElementIds: { [hitElement!.id]: true },\n              },\n              this.scene.getNonDeletedElements(),\n              prevState,\n              this\n            ).selectedElementIds\n          ),\n        };\n      });\n    } else if (this.state.openDialog?.name === \"elementLinkSelector\" && !hitElement) {\n      this.setState(prevState => ({\n        hoveredElementIds: updateStable(prevState.hoveredElementIds, {}),\n      }));\n    }\n  };\n\n  private handleEraser = (event: PointerEvent, scenePointer: { x: number; y: number }) => {\n    const elementsToErase = this.eraserTrail.addPointToPath(\n      scenePointer.x,\n      scenePointer.y,\n      event.altKey\n    );\n\n    this.elementsPendingErasure = new Set(elementsToErase);\n    this.triggerRender();\n  };\n\n  // set touch moving for mobile context menu\n  private handleTouchMove = (event: React.TouchEvent<HTMLCanvasElement>) => {\n    invalidateContextMenu = true;\n  };\n\n  handleHoverSelectedLinearElement(\n    linearElementEditor: LinearElementEditor,\n    scenePointerX: number,\n    scenePointerY: number\n  ) {\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n\n    const element = LinearElementEditor.getElement(linearElementEditor.elementId, elementsMap);\n\n    if (!element) {\n      return;\n    }\n    if (this.state.selectedLinearElement) {\n      let hoverPointIndex = -1;\n      let segmentMidPointHoveredCoords: GlobalPoint | null = null;\n      if (\n        hitElementItself({\n          point: pointFrom(scenePointerX, scenePointerY),\n          element,\n          elementsMap,\n          threshold: this.getElementHitThreshold(element),\n        })\n      ) {\n        hoverPointIndex = LinearElementEditor.getPointIndexUnderCursor(\n          element,\n          elementsMap,\n          this.state.zoom,\n          scenePointerX,\n          scenePointerY\n        );\n        segmentMidPointHoveredCoords = LinearElementEditor.getSegmentMidpointHitCoords(\n          linearElementEditor,\n          { x: scenePointerX, y: scenePointerY },\n          this.state,\n          this.scene.getNonDeletedElementsMap()\n        );\n        const isHoveringAPointHandle = isElbowArrow(element)\n          ? hoverPointIndex === 0 || hoverPointIndex === element.points.length - 1\n          : hoverPointIndex >= 0;\n        if (isHoveringAPointHandle || segmentMidPointHoveredCoords) {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n        } else if (this.hitElement(scenePointerX, scenePointerY, element)) {\n          if (\n            // Elbow arrows can only be moved when unconnected\n            !isElbowArrow(element) ||\n            !(element.startBinding || element.endBinding)\n          ) {\n            if (\n              this.state.activeTool.type !== \"lasso\" ||\n              Object.keys(this.state.selectedElementIds).length > 0\n            ) {\n              setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n            }\n          }\n        }\n      } else if (this.hitElement(scenePointerX, scenePointerY, element)) {\n        if (\n          // Elbow arrow can only be moved when unconnected\n          !isElbowArrow(element) ||\n          !(element.startBinding || element.endBinding)\n        ) {\n          if (\n            this.state.activeTool.type !== \"lasso\" ||\n            Object.keys(this.state.selectedElementIds).length > 0\n          ) {\n            setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n          }\n        }\n      }\n\n      if (this.state.selectedLinearElement.hoverPointIndex !== hoverPointIndex) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            hoverPointIndex,\n          },\n        });\n      }\n\n      if (\n        !LinearElementEditor.arePointsEqual(\n          this.state.selectedLinearElement.segmentMidPointHoveredCoords,\n          segmentMidPointHoveredCoords\n        )\n      ) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            segmentMidPointHoveredCoords,\n          },\n        });\n      }\n\n      // Check for focus point hover\n      let hoveredFocusPointBinding: \"start\" | \"end\" | null = null;\n      const arrow = element as any;\n      if (arrow.startBinding || arrow.endBinding) {\n        hoveredFocusPointBinding = handleFocusPointHover(\n          element as JsonDrawArrowElement,\n          scenePointerX,\n          scenePointerY,\n          this.scene,\n          this.state\n        );\n      }\n\n      if (this.state.selectedLinearElement.hoveredFocusPointBinding !== hoveredFocusPointBinding) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            isDragging: false,\n            hoveredFocusPointBinding,\n          },\n        });\n      }\n\n      // Set cursor to pointer when hovering over a focus point\n      if (hoveredFocusPointBinding) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n      }\n    } else {\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n    }\n  }\n\n  private handleCanvasPointerDown = (event: React.PointerEvent<HTMLElement>) => {\n    const scenePointer = viewportCoordsToSceneCoords(event, this.state);\n    const { x: scenePointerX, y: scenePointerY } = scenePointer;\n    this.lastPointerMoveCoords = {\n      x: scenePointerX,\n      y: scenePointerY,\n    };\n\n    const target = event.target as HTMLElement;\n    // capture subsequent pointer events to the canvas\n    // this makes other elements non-interactive until pointer up\n    if (target.setPointerCapture) {\n      target.setPointerCapture(event.pointerId);\n    }\n\n    this.maybeCleanupAfterMissingPointerUp(event.nativeEvent);\n    this.maybeUnfollowRemoteUser();\n\n    if (this.state.searchMatches) {\n      this.setState(state => {\n        return {\n          searchMatches: state.searchMatches && {\n            focusedId: null,\n            matches: state.searchMatches.matches.map(searchMatch => ({\n              ...searchMatch,\n              focus: false,\n            })),\n          },\n        };\n      });\n      this.updateEditorAtom(searchItemInFocusAtom, null);\n    }\n\n    if (editorJotaiStore.get(convertElementTypePopupAtom)) {\n      this.updateEditorAtom(convertElementTypePopupAtom, null);\n    }\n\n    // since contextMenu options are potentially evaluated on each render,\n    // and an contextMenu action may depend on selection state, we must\n    // close the contextMenu before we update the selection on pointerDown\n    // (e.g. resetting selection)\n    if (this.state.contextMenu) {\n      this.setState({ contextMenu: null });\n    }\n\n    if (this.state.snapLines) {\n      this.setAppState({ snapLines: [] });\n    }\n\n    if (this.state.openPopup) {\n      this.setState({ openPopup: null });\n    }\n\n    this.updateGestureOnPointerDown(event);\n\n    // if dragging element is freedraw and another pointerdown event occurs\n    // a second finger is on the screen\n    // discard the freedraw element if it is very short because it is likely\n    // just a spike, otherwise finalize the freedraw element when the second\n    // finger is lifted\n    if (\n      event.pointerType === \"touch\" &&\n      this.state.newElement &&\n      this.state.newElement.type === \"freedraw\"\n    ) {\n      const element = this.state.newElement as JsonDrawFreeDrawElement;\n      this.updateScene({\n        ...(element.points.length < 10\n          ? {\n              elements: this.scene.getElementsIncludingDeleted().filter(el => el.id !== element.id),\n            }\n          : {}),\n        appState: {\n          newElement: null,\n          editingTextElement: null,\n          startBoundElement: null,\n          suggestedBinding: null,\n          selectedElementIds: makeNextSelectedElementIds(\n            Object.keys(this.state.selectedElementIds)\n              .filter(key => key !== element.id)\n              .reduce((obj: { [id: string]: true }, key) => {\n                obj[key] = this.state.selectedElementIds[key];\n                return obj;\n              }, {}),\n            this.state\n          ),\n        },\n        captureUpdate:\n          this.state.openDialog?.name === \"elementLinkSelector\"\n            ? CaptureUpdateAction.EVENTUALLY\n            : CaptureUpdateAction.NEVER,\n      });\n      return;\n    }\n\n    // remove any active selection when we start to interact with canvas\n    // (mainly, we care about removing selection outside the component which\n    //  would prevent our copy handling otherwise)\n    const selection = document.getSelection();\n    if (selection?.anchorNode) {\n      selection.removeAllRanges();\n    }\n    this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(event);\n\n    //fires only once, if pen is detected, penMode is enabled\n    //the user can disable this by toggling the penMode button\n    if (!this.state.penDetected && event.pointerType === \"pen\") {\n      this.setState(prevState => {\n        return {\n          penMode: true,\n          penDetected: true,\n        };\n      });\n    }\n\n    if (!this.editorInterface.isTouchScreen && [\"pen\", \"touch\"].includes(event.pointerType)) {\n      this.editorInterface = updateObject(this.editorInterface, {\n        isTouchScreen: true,\n      });\n    }\n\n    if (isPanning) {\n      return;\n    }\n\n    this.lastPointerDownEvent = event;\n\n    // we must exit before we set `cursorButton` state and `savePointer`\n    // else it will send pointer state & laser pointer events in collab when\n    // panning\n    if (this.handleCanvasPanUsingWheelOrSpaceDrag(event)) {\n      return;\n    }\n\n    this.setState({\n      lastPointerDownWith: event.pointerType,\n      cursorButton: \"down\",\n    });\n    this.savePointer(event.clientX, event.clientY, \"down\");\n\n    if (event.button === POINTER_BUTTON.ERASER && this.state.activeTool.type !== TOOL_TYPE.eraser) {\n      this.setState(\n        {\n          activeTool: updateActiveTool(this.state, {\n            type: TOOL_TYPE.eraser,\n            lastActiveToolBeforeEraser: this.state.activeTool,\n          }),\n        },\n        () => {\n          this.handleCanvasPointerDown(event);\n          const onPointerUp = () => {\n            unsubPointerUp();\n            unsubCleanup?.();\n            if (isEraserActive(this.state)) {\n              this.setState({\n                activeTool: updateActiveTool(this.state, {\n                  ...(this.state.activeTool.lastActiveTool || {\n                    type: TOOL_TYPE.selection,\n                  }),\n                  lastActiveToolBeforeEraser: null,\n                }),\n              });\n            }\n          };\n\n          const unsubPointerUp = addEventListener(window, EVENT.POINTER_UP, onPointerUp, {\n            once: true,\n          });\n          let unsubCleanup: UnsubscribeCallback | undefined;\n          // subscribe inside rAF lest it'd be triggered on the same pointerdown\n          // if we start erasing while coming from blurred document since\n          // we cleanup pointer events on focus\n          requestAnimationFrame(() => {\n            unsubCleanup = this.missingPointerEventCleanupEmitter.once(onPointerUp);\n          });\n        }\n      );\n      return;\n    }\n\n    // only handle left mouse button or touch\n    if (\n      event.button !== POINTER_BUTTON.MAIN &&\n      event.button !== POINTER_BUTTON.TOUCH &&\n      event.button !== POINTER_BUTTON.ERASER\n    ) {\n      return;\n    }\n\n    // don't select while panning\n    if (gesture.pointers.size > 1) {\n      return;\n    }\n\n    // State for the duration of a pointer interaction, which starts with a\n    // pointerDown event, ends with a pointerUp event (or another pointerDown)\n    const pointerDownState = this.initialPointerDownState(event);\n\n    this.setState({\n      selectedElementsAreBeingDragged: false,\n    });\n\n    if (this.handleDraggingScrollBar(event, pointerDownState)) {\n      return;\n    }\n\n    this.clearSelectionIfNotUsingSelection();\n    this.updateBindingEnabledOnPointerMove(event);\n\n    if (this.handleSelectionOnPointerDown(event, pointerDownState)) {\n      return;\n    }\n\n    const allowOnPointerDown =\n      !this.state.penMode ||\n      event.pointerType !== \"touch\" ||\n      this.state.activeTool.type === \"selection\" ||\n      this.state.activeTool.type === \"lasso\" ||\n      this.state.activeTool.type === \"text\" ||\n      this.state.activeTool.type === \"image\";\n\n    if (!allowOnPointerDown) {\n      return;\n    }\n\n    if (this.state.activeTool.type === \"lasso\") {\n      const hitSelectedElement =\n        pointerDownState.hit.element && this.isASelectedElement(pointerDownState.hit.element);\n\n      if (\n        !pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements &&\n        !pointerDownState.resize.handleType &&\n        !hitSelectedElement\n      ) {\n        this.lassoTrail.startPath(\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n          event.shiftKey\n        );\n\n        // block dragging after lasso selection on PCs until the next pointer down\n        // (on mobile or tablet, we want to allow user to drag immediately)\n        pointerDownState.drag.blockDragging = this.editorInterface.formFactor === \"desktop\";\n      }\n\n      // only for mobile or tablet, if we hit an element, select it immediately like normal selection\n      if (\n        this.editorInterface.formFactor !== \"desktop\" &&\n        pointerDownState.hit.element &&\n        !hitSelectedElement\n      ) {\n        this.setState(prevState => {\n          const nextSelectedElementIds: { [id: string]: true } = {\n            ...prevState.selectedElementIds,\n            [pointerDownState.hit.element!.id]: true,\n          };\n\n          const previouslySelectedElements: JsonDrawElement[] = [];\n\n          Object.keys(prevState.selectedElementIds).forEach(id => {\n            const element = this.scene.getElement(id);\n            element && previouslySelectedElements.push(element);\n          });\n\n          const hitElement = pointerDownState.hit.element!;\n\n          // if hitElement is frame-like, deselect all of its elements\n          // if they are selected\n          if (isFrameLikeElement(hitElement)) {\n            getFrameChildren(previouslySelectedElements, hitElement.id).forEach(element => {\n              delete nextSelectedElementIds[element.id];\n            });\n          } else if (hitElement.frameId) {\n            // if hitElement is in a frame and its frame has been selected\n            // disable selection for the given element\n            if (nextSelectedElementIds[hitElement.frameId]) {\n              delete nextSelectedElementIds[hitElement.id];\n            }\n          } else {\n            // hitElement is neither a frame nor an element in a frame\n            // but since hitElement could be in a group with some frames\n            // this means selecting hitElement will have the frames selected as well\n            // because we want to keep the invariant:\n            // - frames and their elements are not selected at the same time\n            // we deselect elements in those frames that were previously selected\n\n            const groupIds = hitElement.groupIds;\n            const framesInGroups = new Set(\n              groupIds\n                .flatMap(gid => getElementsInGroup(this.scene.getNonDeletedElements(), gid))\n                .filter(element => isFrameLikeElement(element))\n                .map(frame => frame.id)\n            );\n\n            if (framesInGroups.size > 0) {\n              previouslySelectedElements.forEach(element => {\n                if (element.frameId && framesInGroups.has(element.frameId)) {\n                  // deselect element and groups containing the element\n                  delete nextSelectedElementIds[element.id];\n                  element.groupIds\n                    .flatMap(gid => getElementsInGroup(this.scene.getNonDeletedElements(), gid))\n                    .forEach(element => {\n                      delete nextSelectedElementIds[element.id];\n                    });\n                }\n              });\n            }\n          }\n\n          return {\n            ...selectGroupsForSelectedElements(\n              {\n                editingGroupId: prevState.editingGroupId,\n                selectedElementIds: nextSelectedElementIds,\n              },\n              this.scene.getNonDeletedElements(),\n              prevState,\n              this\n            ),\n            showHyperlinkPopup: hitElement.link || isEmbeddableElement(hitElement) ? \"info\" : false,\n          };\n        });\n        pointerDownState.hit.wasAddedToSelection = true;\n      }\n    } else if (this.state.activeTool.type === \"text\") {\n      this.handleTextOnPointerDown(event, pointerDownState);\n    } else if (this.state.activeTool.type === \"arrow\" || this.state.activeTool.type === \"line\") {\n      this.handleLinearElementOnPointerDown(event, this.state.activeTool.type, pointerDownState);\n    } else if (this.state.activeTool.type === \"freedraw\") {\n      this.handleFreeDrawElementOnPointerDown(event, this.state.activeTool.type, pointerDownState);\n    } else if (this.state.activeTool.type === \"custom\") {\n      setCursorForShape(this.interactiveCanvas, this.state);\n    } else if (\n      this.state.activeTool.type === TOOL_TYPE.frame ||\n      this.state.activeTool.type === TOOL_TYPE.magicframe\n    ) {\n      this.createFrameElementOnPointerDown(pointerDownState, this.state.activeTool.type);\n    } else if (this.state.activeTool.type === \"laser\") {\n      this.laserTrails.startPath(pointerDownState.lastCoords.x, pointerDownState.lastCoords.y);\n    } else if (\n      this.state.activeTool.type !== \"eraser\" &&\n      this.state.activeTool.type !== \"hand\" &&\n      this.state.activeTool.type !== \"image\"\n    ) {\n      this.createGenericElementOnPointerDown(this.state.activeTool.type, pointerDownState);\n    }\n\n    this.props?.onPointerDown?.(this.state.activeTool, pointerDownState);\n    this.onPointerDownEmitter.trigger(this.state.activeTool, pointerDownState, event);\n\n    if (this.state.activeTool.type === \"eraser\") {\n      this.eraserTrail.startPath(pointerDownState.lastCoords.x, pointerDownState.lastCoords.y);\n    }\n\n    const onPointerMove = this.onPointerMoveFromPointerDownHandler(pointerDownState);\n\n    const onPointerUp = this.onPointerUpFromPointerDownHandler(pointerDownState);\n\n    const onKeyDown = this.onKeyDownFromPointerDownHandler(pointerDownState);\n    const onKeyUp = this.onKeyUpFromPointerDownHandler(pointerDownState);\n\n    this.missingPointerEventCleanupEmitter.once(_event => onPointerUp(_event || event.nativeEvent));\n\n    if (!this.state.viewModeEnabled || this.state.activeTool.type === \"laser\") {\n      window.addEventListener(EVENT.POINTER_MOVE, onPointerMove);\n      window.addEventListener(EVENT.POINTER_UP, onPointerUp);\n      window.addEventListener(EVENT.KEYDOWN, onKeyDown);\n      window.addEventListener(EVENT.KEYUP, onKeyUp);\n      pointerDownState.eventListeners.onMove = onPointerMove;\n      pointerDownState.eventListeners.onUp = onPointerUp;\n      pointerDownState.eventListeners.onKeyUp = onKeyUp;\n      pointerDownState.eventListeners.onKeyDown = onKeyDown;\n    }\n  };\n\n  private handleCanvasPointerUp = (event: React.PointerEvent<HTMLCanvasElement>) => {\n    if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n      this.resetDelayedBindMode();\n    }\n\n    this.removePointer(event);\n    this.lastPointerUpEvent = event;\n\n    const scenePointer = viewportCoordsToSceneCoords(\n      { clientX: event.clientX, clientY: event.clientY },\n      this.state\n    );\n    const { x: scenePointerX, y: scenePointerY } = scenePointer;\n    this.lastPointerMoveCoords = {\n      x: scenePointerX,\n      y: scenePointerY,\n    };\n    const clicklength = event.timeStamp - (this.lastPointerDownEvent?.timeStamp ?? 0);\n\n    if (this.editorInterface.formFactor === \"phone\" && clicklength < 300) {\n      const hitElement = this.getElementAtPosition(scenePointer.x, scenePointer.y);\n      if (\n        isIframeLikeElement(hitElement) &&\n        this.isIframeLikeElementCenter(hitElement, event, scenePointer.x, scenePointer.y)\n      ) {\n        this.handleEmbeddableCenterClick(hitElement);\n        return;\n      }\n    }\n\n    if (this.editorInterface.isTouchScreen) {\n      const hitElement = this.getElementAtPosition(scenePointer.x, scenePointer.y, {\n        includeLockedElements: true,\n      });\n      this.hitLinkElement = this.getElementLinkAtPosition(scenePointer, hitElement);\n    }\n\n    if (this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id]) {\n      if (\n        clicklength < 300 &&\n        isIframeLikeElement(this.hitLinkElement) &&\n        !isPointHittingLinkIcon(\n          this.hitLinkElement,\n          this.scene.getNonDeletedElementsMap(),\n          this.state,\n          pointFrom(scenePointer.x, scenePointer.y)\n        )\n      ) {\n        this.handleEmbeddableCenterClick(this.hitLinkElement);\n      } else {\n        this.redirectToLink(event, this.editorInterface.isTouchScreen);\n      }\n    } else if (this.state.viewModeEnabled) {\n      this.setState({\n        activeEmbeddable: null,\n        selectedElementIds: {},\n      });\n    }\n  };\n\n  private maybeOpenContextMenuAfterPointerDownOnTouchDevices = (\n    event: React.PointerEvent<HTMLElement>\n  ): void => {\n    // deal with opening context menu on touch devices\n    if (event.pointerType === \"touch\") {\n      invalidateContextMenu = false;\n\n      if (touchTimeout) {\n        // If there's already a touchTimeout, this means that there's another\n        // touch down and we are doing another touch, so we shouldn't open the\n        // context menu.\n        invalidateContextMenu = true;\n      } else {\n        // open the context menu with the first touch's clientX and clientY\n        // if the touch is not moving\n        touchTimeout = window.setTimeout(() => {\n          touchTimeout = 0;\n          if (!invalidateContextMenu) {\n            this.handleCanvasContextMenu(event);\n          }\n        }, TOUCH_CTX_MENU_TIMEOUT);\n      }\n    }\n  };\n\n  private resetContextMenuTimer = () => {\n    clearTimeout(touchTimeout);\n    touchTimeout = 0;\n    invalidateContextMenu = false;\n  };\n\n  /**\n   * pointerup may not fire in certian cases (user tabs away...), so in order\n   * to properly cleanup pointerdown state, we need to fire any hanging\n   * pointerup handlers manually\n   */\n  private maybeCleanupAfterMissingPointerUp = (event: PointerEvent | null) => {\n    lastPointerUp?.();\n    this.missingPointerEventCleanupEmitter.trigger(event).clear();\n  };\n\n  // Returns whether the event is a panning\n  public handleCanvasPanUsingWheelOrSpaceDrag = (\n    event: React.PointerEvent<HTMLElement> | MouseEvent\n  ): boolean => {\n    if (\n      !(\n        gesture.pointers.size <= 1 &&\n        (event.button === POINTER_BUTTON.WHEEL ||\n          (event.button === POINTER_BUTTON.MAIN && isHoldingSpace) ||\n          isHandToolActive(this.state) ||\n          this.state.viewModeEnabled)\n      )\n    ) {\n      return false;\n    }\n    isPanning = true;\n\n    // due to event.preventDefault below, container wouldn't get focus\n    // automatically\n    this.focusContainer();\n\n    // preventing defualt while text editing messes with cursor/focus\n    if (!this.state.editingTextElement) {\n      // necessary to prevent browser from scrolling the page if jsondraw\n      // not full-page #4489\n      //\n      // as such, the above is broken when panning canvas while in wysiwyg\n      event.preventDefault();\n    }\n\n    let nextPastePrevented = false;\n    const isLinux = typeof window === undefined ? false : /Linux/.test(window.navigator.platform);\n\n    setCursor(this.interactiveCanvas, CURSOR_TYPE.GRABBING);\n    let { clientX: lastX, clientY: lastY } = event;\n    const onPointerMove = withBatchedUpdatesThrottled((event: PointerEvent) => {\n      const deltaX = lastX - event.clientX;\n      const deltaY = lastY - event.clientY;\n      lastX = event.clientX;\n      lastY = event.clientY;\n\n      /*\n       * Prevent paste event if we move while middle clicking on Linux.\n       * See issue #1383.\n       */\n      if (isLinux && !nextPastePrevented && (Math.abs(deltaX) > 1 || Math.abs(deltaY) > 1)) {\n        nextPastePrevented = true;\n\n        /* Prevent the next paste event */\n        const preventNextPaste = (event: ClipboardEvent) => {\n          document.body.removeEventListener(EVENT.PASTE, preventNextPaste);\n          event.stopPropagation();\n        };\n\n        /*\n         * Reenable next paste in case of disabled middle click paste for\n         * any reason:\n         * - right click paste\n         * - empty clipboard\n         */\n        const enableNextPaste = () => {\n          setTimeout(() => {\n            document.body.removeEventListener(EVENT.PASTE, preventNextPaste);\n            window.removeEventListener(EVENT.POINTER_UP, enableNextPaste);\n          }, 100);\n        };\n\n        document.body.addEventListener(EVENT.PASTE, preventNextPaste);\n        window.addEventListener(EVENT.POINTER_UP, enableNextPaste);\n      }\n\n      this.translateCanvas({\n        scrollX: this.state.scrollX - deltaX / this.state.zoom.value,\n        scrollY: this.state.scrollY - deltaY / this.state.zoom.value,\n      });\n    });\n    const teardown = withBatchedUpdates(\n      (lastPointerUp = () => {\n        lastPointerUp = null;\n        isPanning = false;\n        if (!isHoldingSpace) {\n          if (this.state.viewModeEnabled) {\n            setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n          } else {\n            setCursorForShape(this.interactiveCanvas, this.state);\n          }\n        }\n        this.setState({\n          cursorButton: \"up\",\n        });\n        this.savePointer(event.clientX, event.clientY, \"up\");\n        window.removeEventListener(EVENT.POINTER_MOVE, onPointerMove);\n        window.removeEventListener(EVENT.POINTER_UP, teardown);\n        window.removeEventListener(EVENT.BLUR, teardown);\n        onPointerMove.flush();\n      })\n    );\n    window.addEventListener(EVENT.BLUR, teardown);\n    window.addEventListener(EVENT.POINTER_MOVE, onPointerMove, {\n      passive: true,\n    });\n    window.addEventListener(EVENT.POINTER_UP, teardown);\n    return true;\n  };\n\n  private updateGestureOnPointerDown(event: React.PointerEvent<HTMLElement>): void {\n    gesture.pointers.set(event.pointerId, {\n      x: event.clientX,\n      y: event.clientY,\n    });\n\n    if (gesture.pointers.size === 2) {\n      gesture.lastCenter = getCenter(gesture.pointers);\n      gesture.initialScale = this.state.zoom.value;\n      gesture.initialDistance = getDistance(Array.from(gesture.pointers.values()));\n    }\n  }\n\n  private initialPointerDownState(event: React.PointerEvent<HTMLElement>): PointerDownState {\n    const origin = viewportCoordsToSceneCoords(event, this.state);\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const [minX, minY, maxX, maxY] = getCommonBounds(selectedElements);\n    const isElbowArrowOnly = selectedElements.findIndex(isElbowArrow) === 0;\n\n    return {\n      origin,\n      withCmdOrCtrl: event[KEYS.CTRL_OR_CMD],\n      originInGrid: tupleToCoors(\n        getGridPoint(\n          origin.x,\n          origin.y,\n          event[KEYS.CTRL_OR_CMD] || isElbowArrowOnly ? null : this.getEffectiveGridSize()\n        )\n      ),\n      scrollbars: isOverScrollBars(\n        currentScrollBars,\n        event.clientX - this.state.offsetLeft,\n        event.clientY - this.state.offsetTop\n      ),\n      // we need to duplicate because we'll be updating this state\n      lastCoords: { ...origin },\n      originalElements: this.scene.getNonDeletedElements().reduce(\n        (acc, element) => {\n          acc.set(element.id, deepCopyElement(element));\n          return acc;\n        },\n        new Map() as PointerDownState[\"originalElements\"]\n      ),\n      resize: {\n        handleType: false,\n        isResizing: false,\n        offset: { x: 0, y: 0 },\n        arrowDirection: \"origin\",\n        center: { x: (maxX + minX) / 2, y: (maxY + minY) / 2 },\n      },\n      hit: {\n        element: null,\n        allHitElements: [],\n        wasAddedToSelection: false,\n        hasBeenDuplicated: false,\n        hasHitCommonBoundingBoxOfSelectedElements:\n          this.isHittingCommonBoundingBoxOfSelectedElements(origin, selectedElements),\n      },\n      drag: {\n        hasOccurred: false,\n        offset: null,\n        origin: { ...origin },\n        blockDragging: false,\n      },\n      eventListeners: {\n        onMove: null,\n        onUp: null,\n        onKeyUp: null,\n        onKeyDown: null,\n      },\n      boxSelection: {\n        hasOccurred: false,\n      },\n    };\n  }\n\n  // Returns whether the event is a dragging a scrollbar\n  private handleDraggingScrollBar(\n    event: React.PointerEvent<HTMLElement>,\n    pointerDownState: PointerDownState\n  ): boolean {\n    if (!(pointerDownState.scrollbars.isOverEither && !this.state.multiElement)) {\n      return false;\n    }\n    isDraggingScrollBar = true;\n    pointerDownState.lastCoords.x = event.clientX;\n    pointerDownState.lastCoords.y = event.clientY;\n    const onPointerMove = withBatchedUpdatesThrottled((event: PointerEvent) => {\n      const target = event.target;\n      if (!(target instanceof HTMLElement)) {\n        return;\n      }\n\n      this.handlePointerMoveOverScrollbars(event, pointerDownState);\n    });\n    const onPointerUp = withBatchedUpdates(() => {\n      lastPointerUp = null;\n      isDraggingScrollBar = false;\n      setCursorForShape(this.interactiveCanvas, this.state);\n      this.setState({\n        cursorButton: \"up\",\n      });\n      this.savePointer(event.clientX, event.clientY, \"up\");\n      window.removeEventListener(EVENT.POINTER_MOVE, onPointerMove);\n      window.removeEventListener(EVENT.POINTER_UP, onPointerUp);\n      onPointerMove.flush();\n    });\n\n    lastPointerUp = onPointerUp;\n\n    window.addEventListener(EVENT.POINTER_MOVE, onPointerMove);\n    window.addEventListener(EVENT.POINTER_UP, onPointerUp);\n    return true;\n  }\n\n  private clearSelectionIfNotUsingSelection = (): void => {\n    if (!isSelectionLikeTool(this.state.activeTool.type)) {\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds({}, this.state),\n        selectedGroupIds: {},\n        editingGroupId: null,\n        activeEmbeddable: null,\n      });\n    }\n  };\n\n  /**\n   * @returns whether the pointer event has been completely handled\n   */\n  private handleSelectionOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    pointerDownState: PointerDownState\n  ): boolean => {\n    if (isSelectionLikeTool(this.state.activeTool.type)) {\n      const elements = this.scene.getNonDeletedElements();\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      const selectedElements = this.scene.getSelectedElements(this.state);\n\n      if (\n        selectedElements.length === 1 &&\n        !this.state.selectedLinearElement?.isEditing &&\n        !isElbowArrow(selectedElements[0]) &&\n        !(\n          isLinearElement(selectedElements[0]) &&\n          (this.editorInterface.userAgent.isMobileDevice || selectedElements[0].points.length === 2)\n        ) &&\n        !(\n          this.state.selectedLinearElement &&\n          this.state.selectedLinearElement.hoverPointIndex !== -1\n        )\n      ) {\n        const elementWithTransformHandleType = getElementWithTransformHandleType(\n          elements,\n          this.state,\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n          this.state.zoom,\n          event.pointerType,\n          this.scene.getNonDeletedElementsMap(),\n          this.editorInterface\n        );\n        if (elementWithTransformHandleType != null) {\n          if (elementWithTransformHandleType.transformHandleType === \"rotation\") {\n            this.setState({\n              resizingElement: elementWithTransformHandleType.element,\n            });\n            pointerDownState.resize.handleType = elementWithTransformHandleType.transformHandleType;\n          } else if (this.state.croppingElementId) {\n            pointerDownState.resize.handleType = elementWithTransformHandleType.transformHandleType;\n          } else {\n            this.setState({\n              resizingElement: elementWithTransformHandleType.element,\n            });\n            pointerDownState.resize.handleType = elementWithTransformHandleType.transformHandleType;\n          }\n        }\n      } else if (selectedElements.length > 1) {\n        pointerDownState.resize.handleType = getTransformHandleTypeFromCoords(\n          getCommonBounds(selectedElements),\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n          this.state.zoom,\n          event.pointerType,\n          this.editorInterface\n        );\n      }\n      if (pointerDownState.resize.handleType) {\n        pointerDownState.resize.isResizing = true;\n        pointerDownState.resize.offset = tupleToCoors(\n          getResizeOffsetXY(\n            pointerDownState.resize.handleType,\n            selectedElements,\n            elementsMap,\n            pointerDownState.origin.x,\n            pointerDownState.origin.y\n          )\n        );\n        if (\n          selectedElements.length === 1 &&\n          isLinearElement(selectedElements[0]) &&\n          selectedElements[0].points.length === 2\n        ) {\n          pointerDownState.resize.arrowDirection = getResizeArrowDirection(\n            pointerDownState.resize.handleType,\n            selectedElements[0]\n          );\n        }\n      } else {\n        if (this.state.selectedLinearElement) {\n          const linearElementEditor = this.state.selectedLinearElement;\n          const ret = LinearElementEditor.handlePointerDown(\n            event,\n            this,\n            this.store,\n            pointerDownState.origin,\n            linearElementEditor,\n            this.scene\n          );\n          if (ret.hitElement) {\n            pointerDownState.hit.element = ret.hitElement;\n          }\n          if (ret.linearElementEditor) {\n            this.setState({ selectedLinearElement: ret.linearElementEditor });\n          }\n          if (ret.didAddPoint) {\n            return true;\n          }\n\n          // Also check at current pointer position if focus point is being hovered\n          // (in case we're clicking directly without a prior move event)\n          const elementsMap = this.scene.getNonDeletedElementsMap();\n          const arrow = LinearElementEditor.getElement(\n            linearElementEditor.elementId,\n            elementsMap\n          ) as any;\n\n          if (arrow && isBindingElement(arrow)) {\n            const { hitFocusPoint, pointerOffset } = handleFocusPointPointerDown(\n              arrow,\n              pointerDownState,\n              elementsMap,\n              this.state\n            );\n\n            // If focus point is hit, update state and prevent element selection\n            if (hitFocusPoint) {\n              this.setState({\n                selectedLinearElement: {\n                  ...linearElementEditor,\n                  hoveredFocusPointBinding: hitFocusPoint,\n                  draggedFocusPointBinding: hitFocusPoint,\n                  pointerOffset,\n                },\n              });\n              return false;\n            }\n          }\n        }\n\n        const allHitElements = this.getElementsAtPosition(\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n          {\n            includeLockedElements: true,\n          }\n        );\n        const unlockedHitElements = allHitElements.filter(e => !e.locked);\n\n        // Cannot set preferSelected in getElementAtPosition as we do in pointer move; consider:\n        // A & B: both unlocked, A selected, B on top, A & B overlaps in some way\n        // we want to select B when clicking on the overlapping area\n        const hitElementMightBeLocked = this.getElementAtPosition(\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n          {\n            allHitElements,\n          }\n        );\n\n        if (!hitElementMightBeLocked || hitElementMightBeLocked.id !== this.state.activeLockedId) {\n          this.setState({\n            activeLockedId: null,\n          });\n        }\n\n        if (\n          hitElementMightBeLocked &&\n          hitElementMightBeLocked.locked &&\n          !unlockedHitElements.some(el => this.state.selectedElementIds[el.id])\n        ) {\n          pointerDownState.hit.element = null;\n        } else {\n          // hitElement may already be set above, so check first\n          pointerDownState.hit.element =\n            pointerDownState.hit.element ??\n            this.getElementAtPosition(pointerDownState.origin.x, pointerDownState.origin.y);\n        }\n\n        this.hitLinkElement = this.getElementLinkAtPosition(\n          pointerDownState.origin,\n          hitElementMightBeLocked\n        );\n\n        if (this.hitLinkElement) {\n          return true;\n        }\n\n        if (\n          this.state.croppingElementId &&\n          pointerDownState.hit.element?.id !== this.state.croppingElementId\n        ) {\n          this.finishImageCropping();\n        }\n\n        if (pointerDownState.hit.element) {\n          // Early return if pointer is hitting link icon\n          const hitLinkElement = this.getElementLinkAtPosition(\n            {\n              x: pointerDownState.origin.x,\n              y: pointerDownState.origin.y,\n            },\n            pointerDownState.hit.element\n          );\n          if (hitLinkElement) {\n            return false;\n          }\n        }\n\n        // For overlapped elements one position may hit\n        // multiple elements\n        pointerDownState.hit.allHitElements = unlockedHitElements;\n\n        const hitElement = pointerDownState.hit.element;\n        const someHitElementIsSelected = pointerDownState.hit.allHitElements.some(element =>\n          this.isASelectedElement(element)\n        );\n        if (\n          (hitElement === null || !someHitElementIsSelected) &&\n          !event.shiftKey &&\n          !pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements &&\n          (!this.state.selectedLinearElement?.isEditing ||\n            (hitElement && hitElement?.id !== this.state.selectedLinearElement?.elementId))\n        ) {\n          this.clearSelection(hitElement);\n        }\n\n        if (this.state.selectedLinearElement?.isEditing) {\n          this.setState(prevState => ({\n            selectedLinearElement: prevState.selectedLinearElement\n              ? {\n                  ...prevState.selectedLinearElement,\n                  isEditing:\n                    !!hitElement && hitElement.id === this.state.selectedLinearElement?.elementId,\n                }\n              : null,\n            selectedElementIds: prevState.selectedLinearElement\n              ? makeNextSelectedElementIds(\n                  {\n                    [prevState.selectedLinearElement.elementId]: true,\n                  },\n                  this.state\n                )\n              : makeNextSelectedElementIds({}, prevState),\n          }));\n          // If we click on something\n        } else if (hitElement != null) {\n          // == deep selection ==\n          // on CMD/CTRL, drill down to hit element regardless of groups etc.\n          if (event[KEYS.CTRL_OR_CMD]) {\n            if (event.altKey) {\n              // ctrl + alt means we're lasso selecting - start lasso trail and switch to lasso tool\n\n              // Close any open dialogs that might interfere with lasso selection\n              if (this.state.openDialog?.name === \"elementLinkSelector\") {\n                this.setOpenDialog(null);\n              }\n              this.lassoTrail.startPath(\n                pointerDownState.origin.x,\n                pointerDownState.origin.y,\n                event.shiftKey\n              );\n              this.setActiveTool({ type: \"lasso\", fromSelection: true });\n              return false;\n            }\n            if (!this.state.selectedElementIds[hitElement.id]) {\n              pointerDownState.hit.wasAddedToSelection = true;\n            }\n            this.setState(prevState => ({\n              ...editGroupForSelectedElement(prevState, hitElement),\n              previousSelectedElementIds: this.state.selectedElementIds,\n            }));\n            // mark as not completely handled so as to allow dragging etc.\n            return false;\n          }\n\n          // deselect if item is selected\n          // if shift is not clicked, this will always return true\n          // otherwise, it will trigger selection based on current\n          // state of the box\n          if (!this.state.selectedElementIds[hitElement.id]) {\n            // if we are currently editing a group, exiting editing mode and deselect the group.\n            if (\n              this.state.editingGroupId &&\n              !isElementInGroup(hitElement, this.state.editingGroupId)\n            ) {\n              this.setState({\n                selectedElementIds: makeNextSelectedElementIds({}, this.state),\n                selectedGroupIds: {},\n                editingGroupId: null,\n                activeEmbeddable: null,\n              });\n            }\n\n            // Add hit element to selection. At this point if we're not holding\n            // SHIFT the previously selected element(s) were deselected above\n            // (make sure you use setState updater to use latest state)\n            // With shift-selection, we want to make sure that frames and their containing\n            // elements are not selected at the same time.\n            if (\n              !someHitElementIsSelected &&\n              !pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements\n            ) {\n              this.setState(prevState => {\n                let nextSelectedElementIds: { [id: string]: true } = {\n                  ...prevState.selectedElementIds,\n                  [hitElement.id]: true,\n                };\n\n                const previouslySelectedElements: JsonDrawElement[] = [];\n\n                Object.keys(prevState.selectedElementIds).forEach(id => {\n                  const element = this.scene.getElement(id);\n                  element && previouslySelectedElements.push(element);\n                });\n\n                // if hitElement is frame-like, deselect all of its elements\n                // if they are selected\n                if (isFrameLikeElement(hitElement)) {\n                  getFrameChildren(previouslySelectedElements, hitElement.id).forEach(element => {\n                    delete nextSelectedElementIds[element.id];\n                  });\n                } else if (hitElement.frameId) {\n                  // if hitElement is in a frame and its frame has been selected\n                  // disable selection for the given element\n                  if (nextSelectedElementIds[hitElement.frameId]) {\n                    delete nextSelectedElementIds[hitElement.id];\n                  }\n                } else {\n                  // hitElement is neither a frame nor an element in a frame\n                  // but since hitElement could be in a group with some frames\n                  // this means selecting hitElement will have the frames selected as well\n                  // because we want to keep the invariant:\n                  // - frames and their elements are not selected at the same time\n                  // we deselect elements in those frames that were previously selected\n\n                  const groupIds = hitElement.groupIds;\n                  const framesInGroups = new Set(\n                    groupIds\n                      .flatMap(gid => getElementsInGroup(this.scene.getNonDeletedElements(), gid))\n                      .filter(element => isFrameLikeElement(element))\n                      .map(frame => frame.id)\n                  );\n\n                  if (framesInGroups.size > 0) {\n                    previouslySelectedElements.forEach(element => {\n                      if (element.frameId && framesInGroups.has(element.frameId)) {\n                        // deselect element and groups containing the element\n                        delete nextSelectedElementIds[element.id];\n                        element.groupIds\n                          .flatMap(gid =>\n                            getElementsInGroup(this.scene.getNonDeletedElements(), gid)\n                          )\n                          .forEach(element => {\n                            delete nextSelectedElementIds[element.id];\n                          });\n                      }\n                    });\n                  }\n                }\n\n                // Finally, in shape selection mode, we'd like to\n                // keep only one shape or group selected at a time.\n                // This means, if the hitElement is a different shape or group\n                // than the previously selected ones, we deselect the previous ones\n                // and select the hitElement\n                if (prevState.openDialog?.name === \"elementLinkSelector\") {\n                  if (!hitElement.groupIds.some(gid => prevState.selectedGroupIds[gid])) {\n                    nextSelectedElementIds = {\n                      [hitElement.id]: true,\n                    };\n                  }\n                }\n\n                return {\n                  ...selectGroupsForSelectedElements(\n                    {\n                      editingGroupId: prevState.editingGroupId,\n                      selectedElementIds: nextSelectedElementIds,\n                    },\n                    this.scene.getNonDeletedElements(),\n                    prevState,\n                    this\n                  ),\n                  showHyperlinkPopup:\n                    hitElement.link || isEmbeddableElement(hitElement) ? \"info\" : false,\n                };\n              });\n              pointerDownState.hit.wasAddedToSelection = true;\n            }\n          }\n        }\n\n        this.setState({\n          previousSelectedElementIds: this.state.selectedElementIds,\n        });\n      }\n    }\n    return false;\n  };\n\n  private isASelectedElement(hitElement: JsonDrawElement | null): boolean {\n    return hitElement != null && this.state.selectedElementIds[hitElement.id];\n  }\n\n  private isHittingCommonBoundingBoxOfSelectedElements(\n    point: Readonly<{ x: number; y: number }>,\n    selectedElements: readonly JsonDrawElement[]\n  ): boolean {\n    if (selectedElements.length < 2) {\n      return false;\n    }\n\n    // How many pixels off the shape boundary we still consider a hit\n    const threshold = Math.max(DEFAULT_COLLISION_THRESHOLD / this.state.zoom.value, 1);\n    const [x1, y1, x2, y2] = getCommonBounds(selectedElements);\n    return (\n      point.x > x1 - threshold &&\n      point.x < x2 + threshold &&\n      point.y > y1 - threshold &&\n      point.y < y2 + threshold\n    );\n  }\n\n  private handleTextOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    pointerDownState: PointerDownState\n  ): void => {\n    // if we're currently still editing text, clicking outside\n    // should only finalize it, not create another (irrespective\n    // of state.activeTool.locked)\n    if (this.state.editingTextElement) {\n      return;\n    }\n    let sceneX = pointerDownState.origin.x;\n    let sceneY = pointerDownState.origin.y;\n\n    const element = this.getElementAtPosition(sceneX, sceneY, {\n      includeBoundTextElement: true,\n    });\n\n    // FIXME\n    let container = this.getTextBindableContainerAtPosition(sceneX, sceneY);\n\n    if (hasBoundTextElement(element)) {\n      container = element as JsonDrawTextContainer;\n      sceneX = element.x + element.width / 2;\n      sceneY = element.y + element.height / 2;\n    }\n    this.startTextEditing({\n      sceneX,\n      sceneY,\n      insertAtParentCenter: !event.altKey,\n      container,\n      autoEdit: false,\n    });\n\n    resetCursor(this.interactiveCanvas);\n    if (!this.state.activeTool.locked) {\n      this.setState({\n        activeTool: updateActiveTool(this.state, {\n          type: this.state.preferredSelectionTool.type,\n        }),\n      });\n    }\n  };\n\n  private handleFreeDrawElementOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    elementType: JsonDrawFreeDrawElement[\"type\"],\n    pointerDownState: PointerDownState\n  ) => {\n    // Begin a mark capture. This does not have to update state yet.\n    const [gridX, gridY] = getGridPoint(pointerDownState.origin.x, pointerDownState.origin.y, null);\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n      x: gridX,\n      y: gridY,\n    });\n\n    const simulatePressure = event.pressure === 0.5;\n\n    const element = newFreeDrawElement({\n      type: elementType,\n      x: gridX,\n      y: gridY,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      opacity: this.state.currentItemOpacity,\n      roundness: null,\n      simulatePressure,\n      locked: false,\n      frameId: topLayerFrame ? topLayerFrame.id : null,\n      points: [pointFrom<LocalPoint>(0, 0)],\n      pressures: simulatePressure ? [] : [event.pressure],\n    });\n\n    this.scene.insertElement(element);\n\n    this.setState(prevState => {\n      const nextSelectedElementIds = {\n        ...prevState.selectedElementIds,\n      };\n      delete nextSelectedElementIds[element.id];\n      return {\n        selectedElementIds: makeNextSelectedElementIds(nextSelectedElementIds, prevState),\n      };\n    });\n\n    const boundElement = getHoveredElementForBinding(\n      pointFrom<GlobalPoint>(pointerDownState.origin.x, pointerDownState.origin.y),\n      this.scene.getNonDeletedElements(),\n      this.scene.getNonDeletedElementsMap()\n    );\n\n    this.setState({\n      newElement: element,\n      startBoundElement: boundElement,\n      suggestedBinding: null,\n    });\n  };\n\n  public insertIframeElement = ({\n    sceneX,\n    sceneY,\n    width,\n    height,\n  }: {\n    sceneX: number;\n    sceneY: number;\n    width: number;\n    height: number;\n  }) => {\n    const [gridX, gridY] = getGridPoint(\n      sceneX,\n      sceneY,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const element = newIframeElement({\n      type: \"iframe\",\n      x: gridX,\n      y: gridY,\n      strokeColor: \"transparent\",\n      backgroundColor: \"transparent\",\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      roundness: this.getCurrentItemRoundness(\"iframe\"),\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      width,\n      height,\n    });\n\n    this.scene.insertElement(element);\n\n    return element;\n  };\n\n  //create rectangle element with youtube top left on nearest grid point width / hight 640/360\n  public insertEmbeddableElement = ({\n    sceneX,\n    sceneY,\n    link,\n  }: {\n    sceneX: number;\n    sceneY: number;\n    link: string;\n  }) => {\n    const [gridX, gridY] = getGridPoint(\n      sceneX,\n      sceneY,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const embedLink = getEmbedLink(link);\n\n    if (!embedLink) {\n      return;\n    }\n\n    if (embedLink.error instanceof URIError) {\n      this.setToast({\n        message: t(\"toast.unrecognizedLinkFormat\"),\n        closable: true,\n      });\n    }\n\n    const element = newEmbeddableElement({\n      type: \"embeddable\",\n      x: gridX,\n      y: gridY,\n      strokeColor: \"transparent\",\n      backgroundColor: \"transparent\",\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      roundness: this.getCurrentItemRoundness(\"embeddable\"),\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      width: embedLink.intrinsicSize.w,\n      height: embedLink.intrinsicSize.h,\n      link,\n    });\n\n    this.scene.insertElement(element);\n\n    return element;\n  };\n\n  private newImagePlaceholder = ({\n    sceneX,\n    sceneY,\n    addToFrameUnderCursor = true,\n  }: {\n    sceneX: number;\n    sceneY: number;\n    addToFrameUnderCursor?: boolean;\n  }) => {\n    const [gridX, gridY] = getGridPoint(\n      sceneX,\n      sceneY,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const topLayerFrame = addToFrameUnderCursor\n      ? this.getTopLayerFrameAtSceneCoords({\n          x: gridX,\n          y: gridY,\n        })\n      : null;\n\n    const placeholderSize = 100 / this.state.zoom.value;\n\n    return newImageElement({\n      type: \"image\",\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      roundness: null,\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      frameId: topLayerFrame ? topLayerFrame.id : null,\n      x: gridX - placeholderSize / 2,\n      y: gridY - placeholderSize / 2,\n      width: placeholderSize,\n      height: placeholderSize,\n    });\n  };\n\n  private handleLinearElementOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    elementType: JsonDrawLinearElement[\"type\"],\n    pointerDownState: PointerDownState\n  ): void => {\n    if (event.ctrlKey) {\n      flushSync(() => {\n        this.setState({ isBindingEnabled: false });\n      });\n    }\n\n    if (this.state.multiElement) {\n      const { multiElement, selectedLinearElement } = this.state;\n\n      invariant(selectedLinearElement, \"selectedLinearElement is expected to be set\");\n\n      // finalize if completing a loop\n      if (multiElement.type === \"line\" && isPathALoop(multiElement.points, this.state.zoom.value)) {\n        flushSync(() => {\n          this.setState({\n            selectedLinearElement: {\n              ...selectedLinearElement,\n              lastCommittedPoint: multiElement.points[multiElement.points.length - 1],\n              initialState: {\n                ...selectedLinearElement.initialState,\n                lastClickedPoint: -1, // Disable dragging\n              },\n            },\n          });\n        });\n        this.actionManager.executeAction(actionFinalize);\n        return;\n      }\n\n      // Elbow arrows cannot be created by putting down points\n      // only the start and end points can be defined\n      if (isElbowArrow(multiElement) && multiElement.points.length > 1) {\n        this.actionManager.executeAction(actionFinalize, \"ui\", {\n          event: event.nativeEvent,\n          sceneCoords: {\n            x: pointerDownState.origin.x,\n            y: pointerDownState.origin.y,\n          },\n        });\n        return;\n      }\n\n      const { x: rx, y: ry } = multiElement;\n      const { lastCommittedPoint } = selectedLinearElement;\n\n      const hoveredElementForBinding =\n        isBindingEnabled(this.state) &&\n        getHoveredElementForBinding(\n          pointFrom<GlobalPoint>(\n            this.lastPointerMoveCoords?.x ??\n              rx + multiElement.points[multiElement.points.length - 1][0],\n            this.lastPointerMoveCoords?.y ??\n              ry + multiElement.points[multiElement.points.length - 1][1]\n          ),\n          this.scene.getNonDeletedElements(),\n          this.scene.getNonDeletedElementsMap()\n        );\n\n      // clicking inside commit zone  finalize arrow\n      if (\n        (isBindingElement(multiElement) && hoveredElementForBinding) ||\n        (multiElement.points.length > 1 &&\n          lastCommittedPoint &&\n          pointDistance(\n            pointFrom(pointerDownState.origin.x - rx, pointerDownState.origin.y - ry),\n            lastCommittedPoint\n          ) < LINE_CONFIRM_THRESHOLD)\n      ) {\n        this.actionManager.executeAction(actionFinalize, \"ui\", {\n          event: event.nativeEvent,\n          sceneCoords: {\n            x: pointerDownState.origin.x,\n            y: pointerDownState.origin.y,\n          },\n        });\n        return;\n      }\n\n      this.setState(prevState => ({\n        selectedElementIds: makeNextSelectedElementIds(\n          {\n            ...prevState.selectedElementIds,\n            [multiElement.id]: true,\n          },\n          prevState\n        ),\n      }));\n\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n    } else {\n      const [gridX, gridY] = getGridPoint(\n        pointerDownState.origin.x,\n        pointerDownState.origin.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n      );\n\n      const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n        x: gridX,\n        y: gridY,\n      });\n\n      /* If arrow is pre-arrowheads, it will have undefined for both start and end arrowheads.\n      If so, we want it to be null for start and \"arrow\" for end. If the linear item is not\n      an arrow, we want it to be null for both. Otherwise, we want it to use the\n      values from appState. */\n\n      const { currentItemStartArrowhead, currentItemEndArrowhead } = this.state;\n      const [startArrowhead, endArrowhead] =\n        elementType === \"arrow\"\n          ? [currentItemStartArrowhead, currentItemEndArrowhead]\n          : [null, null];\n\n      const element =\n        elementType === \"arrow\"\n          ? newArrowElement({\n              type: elementType,\n              x: gridX,\n              y: gridY,\n              strokeColor: this.state.currentItemStrokeColor,\n              backgroundColor: this.state.currentItemBackgroundColor,\n              fillStyle: this.state.currentItemFillStyle,\n              strokeWidth: this.state.currentItemStrokeWidth,\n              strokeStyle: this.state.currentItemStrokeStyle,\n              roughness: this.state.currentItemRoughness,\n              opacity: this.state.currentItemOpacity,\n              roundness:\n                this.state.currentItemArrowType === ARROW_TYPE.round\n                  ? { type: ROUNDNESS.PROPORTIONAL_RADIUS }\n                  : // note, roundness doesn't have any effect for elbow arrows,\n                    // but it's best to set it to null as well\n                    null,\n              startArrowhead,\n              endArrowhead,\n              locked: false,\n              frameId: topLayerFrame ? topLayerFrame.id : null,\n              elbowed: this.state.currentItemArrowType === ARROW_TYPE.elbow,\n              fixedSegments: this.state.currentItemArrowType === ARROW_TYPE.elbow ? [] : null,\n            })\n          : newLinearElement({\n              type: elementType,\n              x: gridX,\n              y: gridY,\n              strokeColor: this.state.currentItemStrokeColor,\n              backgroundColor: this.state.currentItemBackgroundColor,\n              fillStyle: this.state.currentItemFillStyle,\n              strokeWidth: this.state.currentItemStrokeWidth,\n              strokeStyle: this.state.currentItemStrokeStyle,\n              roughness: this.state.currentItemRoughness,\n              opacity: this.state.currentItemOpacity,\n              roundness:\n                this.state.currentItemRoundness === \"round\"\n                  ? { type: ROUNDNESS.PROPORTIONAL_RADIUS }\n                  : null,\n              locked: false,\n              frameId: topLayerFrame ? topLayerFrame.id : null,\n            });\n\n      const point = pointFrom<GlobalPoint>(pointerDownState.origin.x, pointerDownState.origin.y);\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      const boundElement = isBindingEnabled(this.state)\n        ? getHoveredElementForBinding(point, this.scene.getNonDeletedElements(), elementsMap)\n        : null;\n\n      this.scene.mutateElement(element, {\n        points: [pointFrom<LocalPoint>(0, 0), pointFrom<LocalPoint>(0, 0)],\n      });\n\n      this.scene.insertElement(element);\n\n      if (isBindingElement(element)) {\n        // Do the initial binding so the binding strategy has the initial state\n        bindOrUnbindBindingElement(\n          element,\n          new Map([\n            [\n              0,\n              {\n                point: pointFrom<LocalPoint>(0, 0),\n                isDragging: false,\n              },\n            ],\n          ]),\n          point[0],\n          point[1],\n          this.scene,\n          this.state,\n          {\n            newArrow: true,\n            altKey: event.altKey,\n            initialBinding: true,\n            angleLocked: shouldRotateWithDiscreteAngle(event.nativeEvent),\n          }\n        );\n      }\n\n      // NOTE: We need the flushSync here for the\n      // delayed bind mode change to see the right state\n      // (specifically the `newElement`)\n      flushSync(() => {\n        this.setState(prevState => {\n          let linearElementEditor: LinearElementEditor | null = null;\n          let nextSelectedElementIds = prevState.selectedElementIds;\n          if (isLinearElement(element)) {\n            linearElementEditor = new LinearElementEditor(\n              element,\n              this.scene.getNonDeletedElementsMap()\n            );\n\n            const endIdx = element.points.length - 1;\n            linearElementEditor = {\n              ...linearElementEditor,\n              selectedPointsIndices: [endIdx],\n              initialState: {\n                ...linearElementEditor.initialState,\n                arrowStartIsInside: event.altKey,\n                lastClickedPoint: endIdx,\n                origin: pointFrom<GlobalPoint>(\n                  pointerDownState.origin.x,\n                  pointerDownState.origin.y\n                ),\n              },\n            };\n          }\n\n          nextSelectedElementIds = !this.state.activeTool.locked\n            ? makeNextSelectedElementIds({ [element.id]: true }, prevState)\n            : prevState.selectedElementIds;\n\n          return {\n            ...prevState,\n            bindMode: \"orbit\",\n            newElement: element,\n            startBoundElement: boundElement,\n            suggestedBinding:\n              boundElement && isBindingElement(element)\n                ? {\n                    element: boundElement,\n                    midPoint: getSnapOutlineMidPoint(\n                      point,\n                      boundElement,\n                      elementsMap,\n                      this.state.zoom\n                    ),\n                  }\n                : null,\n            selectedElementIds: nextSelectedElementIds,\n            selectedLinearElement: linearElementEditor,\n          };\n        });\n      });\n\n      if (isBindingElement(element) && getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n        this.handleDelayedBindModeChange(element, boundElement);\n      }\n    }\n  };\n\n  private getCurrentItemRoundness(\n    elementType: \"selection\" | \"rectangle\" | \"diamond\" | \"ellipse\" | \"iframe\" | \"embeddable\"\n  ) {\n    return this.state.currentItemRoundness === \"round\"\n      ? {\n          type: isUsingAdaptiveRadius(elementType)\n            ? ROUNDNESS.ADAPTIVE_RADIUS\n            : ROUNDNESS.PROPORTIONAL_RADIUS,\n        }\n      : null;\n  }\n\n  private createGenericElementOnPointerDown = (\n    elementType: JsonDrawGenericElement[\"type\"] | \"embeddable\",\n    pointerDownState: PointerDownState\n  ): void => {\n    const [gridX, gridY] = getGridPoint(\n      pointerDownState.origin.x,\n      pointerDownState.origin.y,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n      x: gridX,\n      y: gridY,\n    });\n\n    const baseElementAttributes = {\n      x: gridX,\n      y: gridY,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      opacity: this.state.currentItemOpacity,\n      roundness: this.getCurrentItemRoundness(elementType),\n      locked: false,\n      frameId: topLayerFrame ? topLayerFrame.id : null,\n    } as const;\n\n    let element;\n    if (elementType === \"embeddable\") {\n      element = newEmbeddableElement({\n        type: \"embeddable\",\n        ...baseElementAttributes,\n      });\n    } else {\n      element = newElement({\n        type: elementType,\n        ...baseElementAttributes,\n      });\n    }\n\n    if (element.type === \"selection\") {\n      this.setState({\n        selectionElement: element,\n      });\n    } else {\n      this.scene.insertElement(element);\n      this.setState({\n        multiElement: null,\n        newElement: element,\n      });\n    }\n  };\n\n  private createFrameElementOnPointerDown = (\n    pointerDownState: PointerDownState,\n    type: Extract<ToolType, \"frame\" | \"magicframe\">\n  ): void => {\n    const [gridX, gridY] = getGridPoint(\n      pointerDownState.origin.x,\n      pointerDownState.origin.y,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const constructorOpts = {\n      x: gridX,\n      y: gridY,\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      ...FRAME_STYLE,\n    } as const;\n\n    const frame =\n      type === TOOL_TYPE.magicframe\n        ? newMagicFrameElement(constructorOpts)\n        : newFrameElement(constructorOpts);\n\n    this.scene.insertElement(frame);\n\n    this.setState({\n      multiElement: null,\n      newElement: frame,\n    });\n  };\n\n  private maybeCacheReferenceSnapPoints(\n    event: KeyboardModifiersObject,\n    selectedElements: JsonDrawElement[],\n    recomputeAnyways: boolean = false\n  ) {\n    if (\n      isSnappingEnabled({\n        event,\n        app: this,\n        selectedElements,\n      }) &&\n      (recomputeAnyways || !SnapCache.getReferenceSnapPoints())\n    ) {\n      SnapCache.setReferenceSnapPoints(\n        getReferenceSnapPoints(\n          this.scene.getNonDeletedElements(),\n          selectedElements,\n          this.state,\n          this.scene.getNonDeletedElementsMap()\n        )\n      );\n    }\n  }\n\n  private maybeCacheVisibleGaps(\n    event: KeyboardModifiersObject,\n    selectedElements: JsonDrawElement[],\n    recomputeAnyways: boolean = false\n  ) {\n    if (\n      isSnappingEnabled({\n        event,\n        app: this,\n        selectedElements,\n      }) &&\n      (recomputeAnyways || !SnapCache.getVisibleGaps())\n    ) {\n      SnapCache.setVisibleGaps(\n        getVisibleGaps(\n          this.scene.getNonDeletedElements(),\n          selectedElements,\n          this.state,\n          this.scene.getNonDeletedElementsMap()\n        )\n      );\n    }\n  }\n\n  private onKeyDownFromPointerDownHandler(\n    pointerDownState: PointerDownState\n  ): (event: KeyboardEvent) => void {\n    return withBatchedUpdates((event: KeyboardEvent) => {\n      if (this.maybeHandleResize(pointerDownState, event)) {\n        return;\n      }\n      this.maybeDragNewGenericElement(pointerDownState, event);\n    });\n  }\n\n  private onKeyUpFromPointerDownHandler(\n    pointerDownState: PointerDownState\n  ): (event: KeyboardEvent) => void {\n    return withBatchedUpdates((event: KeyboardEvent) => {\n      // Prevents focus from escaping jsondraw tab\n      event.key === KEYS.ALT && event.preventDefault();\n      if (this.maybeHandleResize(pointerDownState, event)) {\n        return;\n      }\n      this.maybeDragNewGenericElement(pointerDownState, event);\n    });\n  }\n\n  private onPointerMoveFromPointerDownHandler(pointerDownState: PointerDownState) {\n    return withBatchedUpdatesThrottled((event: PointerEvent) => {\n      if (this.state.openDialog?.name === \"elementLinkSelector\") {\n        return;\n      }\n      const pointerCoords = viewportCoordsToSceneCoords(event, this.state);\n\n      if (this.state.activeLockedId) {\n        this.setState({\n          activeLockedId: null,\n        });\n      }\n\n      if (\n        this.state.selectedLinearElement &&\n        this.state.selectedLinearElement.elbowed &&\n        this.state.selectedLinearElement.initialState.segmentMidpoint.index\n      ) {\n        const [gridX, gridY] = getGridPoint(\n          pointerCoords.x,\n          pointerCoords.y,\n          event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n        );\n\n        let index = this.state.selectedLinearElement.initialState.segmentMidpoint.index;\n        if (index < 0) {\n          const nextCoords = LinearElementEditor.getSegmentMidpointHitCoords(\n            {\n              ...this.state.selectedLinearElement,\n              segmentMidPointHoveredCoords: null,\n            },\n            { x: gridX, y: gridY },\n            this.state,\n            this.scene.getNonDeletedElementsMap()\n          );\n          index = nextCoords\n            ? LinearElementEditor.getSegmentMidPointIndex(\n                this.state.selectedLinearElement,\n                this.state,\n                nextCoords,\n                this.scene.getNonDeletedElementsMap()\n              )\n            : -1;\n        }\n\n        const ret = LinearElementEditor.moveFixedSegment(\n          this.state.selectedLinearElement,\n          index,\n          gridX,\n          gridY,\n          this.scene\n        );\n\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            isDragging: true,\n            segmentMidPointHoveredCoords: ret.segmentMidPointHoveredCoords,\n            initialState: ret.initialState,\n          },\n        });\n        return;\n      }\n\n      const lastPointerCoords = this.previousPointerMoveCoords ?? pointerDownState.origin;\n      this.previousPointerMoveCoords = pointerCoords;\n\n      // We need to initialize dragOffsetXY only after we've updated\n      // `state.selectedElementIds` on pointerDown. Doing it here in pointerMove\n      // event handler should hopefully ensure we're already working with\n      // the updated state.\n      if (pointerDownState.drag.offset === null) {\n        pointerDownState.drag.offset = tupleToCoors(\n          getDragOffsetXY(\n            this.scene.getSelectedElements(this.state),\n            pointerDownState.origin.x,\n            pointerDownState.origin.y\n          )\n        );\n      }\n      const target = event.target;\n      if (!(target instanceof HTMLElement)) {\n        return;\n      }\n\n      if (this.handlePointerMoveOverScrollbars(event, pointerDownState)) {\n        return;\n      }\n\n      if (isEraserActive(this.state)) {\n        this.handleEraser(event, pointerCoords);\n        return;\n      }\n\n      if (this.state.activeTool.type === \"laser\") {\n        this.laserTrails.addPointToPath(pointerCoords.x, pointerCoords.y);\n      }\n\n      const [gridX, gridY] = getGridPoint(\n        pointerCoords.x,\n        pointerCoords.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n      );\n\n      if (pointerDownState.resize.isResizing) {\n        pointerDownState.lastCoords.x = pointerCoords.x;\n        pointerDownState.lastCoords.y = pointerCoords.y;\n        if (this.maybeHandleCrop(pointerDownState, event)) {\n          return true;\n        }\n        if (this.maybeHandleResize(pointerDownState, event)) {\n          return true;\n        }\n      }\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n\n      if (this.state.selectedLinearElement) {\n        const linearElementEditor = this.state.selectedLinearElement;\n\n        // Handle focus point dragging if needed\n        if (linearElementEditor.draggedFocusPointBinding) {\n          handleFocusPointDrag(\n            linearElementEditor,\n            elementsMap,\n            pointerCoords,\n            this.scene,\n            this.state,\n            this.getEffectiveGridSize(),\n            event.altKey\n          );\n          this.setState({\n            selectedLinearElement: {\n              ...linearElementEditor,\n              isDragging: false,\n              selectedPointsIndices: [],\n              initialState: {\n                ...linearElementEditor.initialState,\n                lastClickedPoint: -1,\n              },\n            },\n          });\n          return;\n        }\n\n        if (\n          LinearElementEditor.shouldAddMidpoint(\n            this.state.selectedLinearElement,\n            pointerCoords,\n            this.state,\n            elementsMap\n          )\n        ) {\n          const ret = LinearElementEditor.addMidpoint(\n            this.state.selectedLinearElement,\n            pointerCoords,\n            this,\n            !event[KEYS.CTRL_OR_CMD],\n            this.scene\n          );\n          if (!ret) {\n            return;\n          }\n\n          // Since we are reading from previous state which is not possible with\n          // automatic batching in React 18 hence using flush sync to synchronously\n          // update the state. Check https://github.com/jsondraw/jsondraw/pull/5508 for more details.\n\n          flushSync(() => {\n            if (this.state.selectedLinearElement) {\n              this.setState({\n                selectedLinearElement: {\n                  ...this.state.selectedLinearElement,\n                  initialState: ret.pointerDownState,\n                  selectedPointsIndices: ret.selectedPointsIndices,\n                  segmentMidPointHoveredCoords: null,\n                },\n              });\n            }\n          });\n\n          return;\n        } else if (\n          linearElementEditor.initialState.segmentMidpoint.value !== null &&\n          !linearElementEditor.initialState.segmentMidpoint.added\n        ) {\n          return;\n        } else if (linearElementEditor.initialState.lastClickedPoint > -1) {\n          const element = LinearElementEditor.getElement(\n            linearElementEditor.elementId,\n            elementsMap\n          );\n\n          if (element?.isDeleted) {\n            return;\n          }\n\n          if (isBindingElement(element)) {\n            const hoveredElement = getHoveredElementForBinding(\n              pointFrom<GlobalPoint>(pointerCoords.x, pointerCoords.y),\n              this.scene.getNonDeletedElements(),\n              elementsMap\n            );\n\n            if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n              this.handleDelayedBindModeChange(element, hoveredElement);\n            }\n          }\n\n          if (\n            event.altKey &&\n            !this.state.selectedLinearElement?.initialState?.arrowStartIsInside &&\n            getFeatureFlag(\"COMPLEX_BINDINGS\")\n          ) {\n            this.handleSkipBindMode();\n          }\n\n          // Ignore drag requests if the arrow modification already happened\n          if (linearElementEditor.initialState.lastClickedPoint === -1) {\n            return;\n          }\n\n          const newState = LinearElementEditor.handlePointDragging(\n            event,\n            this,\n            pointerCoords.x,\n            pointerCoords.y,\n            linearElementEditor\n          );\n\n          if (newState) {\n            pointerDownState.lastCoords.x = pointerCoords.x;\n            pointerDownState.lastCoords.y = pointerCoords.y;\n            pointerDownState.drag.hasOccurred = true;\n\n            // NOTE: Optimize setState calls because it\n            // affects history and performance\n            if (\n              newState.suggestedBinding !== this.state.suggestedBinding ||\n              !isShallowEqual(\n                newState.selectedLinearElement?.selectedPointsIndices ?? [],\n                this.state.selectedLinearElement?.selectedPointsIndices ?? []\n              ) ||\n              newState.selectedLinearElement?.hoverPointIndex !==\n                this.state.selectedLinearElement?.hoverPointIndex ||\n              newState.selectedLinearElement?.customLineAngle !==\n                this.state.selectedLinearElement?.customLineAngle ||\n              this.state.selectedLinearElement.isDragging !==\n                newState.selectedLinearElement?.isDragging ||\n              this.state.selectedLinearElement?.initialState?.altFocusPoint !==\n                newState.selectedLinearElement?.initialState?.altFocusPoint\n            ) {\n              this.setState(newState);\n            }\n\n            return;\n          }\n        }\n      }\n\n      const hasHitASelectedElement = pointerDownState.hit.allHitElements.some(element =>\n        this.isASelectedElement(element)\n      );\n\n      const isSelectingPointsInLineEditor =\n        this.state.selectedLinearElement?.isEditing &&\n        event.shiftKey &&\n        this.state.selectedLinearElement.elementId === pointerDownState.hit.element?.id;\n\n      if (\n        (hasHitASelectedElement ||\n          pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements) &&\n        !isSelectingPointsInLineEditor &&\n        !pointerDownState.drag.blockDragging\n      ) {\n        const selectedElements = this.scene.getSelectedElements(this.state);\n        if (selectedElements.length > 0 && selectedElements.every(element => element.locked)) {\n          return;\n        }\n\n        const selectedElementsHasAFrame = selectedElements.find(e => isFrameLikeElement(e));\n        const topLayerFrame = this.getTopLayerFrameAtSceneCoords(pointerCoords);\n        const frameToHighlight = topLayerFrame && !selectedElementsHasAFrame ? topLayerFrame : null;\n        // Only update the state if there is a difference\n        if (this.state.frameToHighlight !== frameToHighlight) {\n          flushSync(() => {\n            this.setState({ frameToHighlight });\n          });\n        }\n\n        // Marking that click was used for dragging to check\n        // if elements should be deselected on pointerup\n        pointerDownState.drag.hasOccurred = true;\n\n        // prevent immediate dragging during lasso selection to avoid element displacement\n        // only allow dragging if we're not in the middle of lasso selection\n        // (on mobile, allow dragging if we hit an element)\n        if (\n          this.state.activeTool.type === \"lasso\" &&\n          this.lassoTrail.hasCurrentTrail &&\n          !(this.editorInterface.formFactor !== \"desktop\" && pointerDownState.hit.element) &&\n          !this.state.activeTool.fromSelection\n        ) {\n          return;\n        }\n\n        // Clear lasso trail when starting to drag selected elements with lasso tool\n        // Only clear if we're actually dragging (not during lasso selection)\n        if (\n          this.state.activeTool.type === \"lasso\" &&\n          selectedElements.length > 0 &&\n          pointerDownState.drag.hasOccurred &&\n          !this.state.activeTool.fromSelection\n        ) {\n          this.lassoTrail.endPath();\n        }\n\n        // prevent dragging even if we're no longer holding cmd/ctrl otherwise\n        // it would have weird results (stuff jumping all over the screen)\n        // Checking for editingTextElement to avoid jump while editing on mobile #6503\n        if (\n          selectedElements.length > 0 &&\n          !pointerDownState.withCmdOrCtrl &&\n          !this.state.editingTextElement &&\n          this.state.activeEmbeddable?.state !== \"active\"\n        ) {\n          const dragOffset = {\n            x: pointerCoords.x - pointerDownState.drag.origin.x,\n            y: pointerCoords.y - pointerDownState.drag.origin.y,\n          };\n\n          const originalElements = [...pointerDownState.originalElements.values()];\n\n          // We only drag in one direction if shift is pressed\n          const lockDirection = event.shiftKey;\n\n          if (lockDirection) {\n            const distanceX = Math.abs(dragOffset.x);\n            const distanceY = Math.abs(dragOffset.y);\n\n            const lockX = lockDirection && distanceX < distanceY;\n            const lockY = lockDirection && distanceX > distanceY;\n\n            if (lockX) {\n              dragOffset.x = 0;\n            }\n\n            if (lockY) {\n              dragOffset.y = 0;\n            }\n          }\n\n          // #region move crop region\n          if (this.state.croppingElementId) {\n            const croppingElement = this.scene\n              .getNonDeletedElementsMap()\n              .get(this.state.croppingElementId);\n\n            if (\n              croppingElement &&\n              isImageElement(croppingElement) &&\n              croppingElement.crop !== null &&\n              pointerDownState.hit.element === croppingElement\n            ) {\n              const crop = croppingElement.crop;\n              const image =\n                isInitializedImageElement(croppingElement) &&\n                this.imageCache.get(croppingElement.fileId)?.image;\n\n              if (image && !(image instanceof Promise)) {\n                const uncroppedSize = getUncroppedWidthAndHeight(croppingElement);\n                const instantDragOffset = vector(\n                  pointerCoords.x - lastPointerCoords.x,\n                  pointerCoords.y - lastPointerCoords.y\n                );\n\n                // to reduce cursor:image drift, we need to take into account\n                // the canvas image element scaling so we can accurately\n                // track the pixels on movement\n                instantDragOffset[0] *= image.naturalWidth / uncroppedSize.width;\n                instantDragOffset[1] *= image.naturalHeight / uncroppedSize.height;\n\n                const [x1, y1, x2, y2, cx, cy] = getElementAbsoluteCoords(\n                  croppingElement,\n                  elementsMap\n                );\n\n                const topLeft = vectorFromPoint(\n                  pointRotateRads(pointFrom(x1, y1), pointFrom(cx, cy), croppingElement.angle)\n                );\n                const topRight = vectorFromPoint(\n                  pointRotateRads(pointFrom(x2, y1), pointFrom(cx, cy), croppingElement.angle)\n                );\n                const bottomLeft = vectorFromPoint(\n                  pointRotateRads(pointFrom(x1, y2), pointFrom(cx, cy), croppingElement.angle)\n                );\n                const topEdge = vectorNormalize(vectorSubtract(topRight, topLeft));\n                const leftEdge = vectorNormalize(vectorSubtract(bottomLeft, topLeft));\n\n                // project instantDrafOffset onto leftEdge and topEdge to decompose\n                const offsetVector = vector(\n                  vectorDot(instantDragOffset, topEdge),\n                  vectorDot(instantDragOffset, leftEdge)\n                );\n\n                const nextCrop = {\n                  ...crop,\n                  x: clamp(\n                    crop.x - offsetVector[0] * Math.sign(croppingElement.scale[0]),\n                    0,\n                    image.naturalWidth - crop.width\n                  ),\n                  y: clamp(\n                    crop.y - offsetVector[1] * Math.sign(croppingElement.scale[1]),\n                    0,\n                    image.naturalHeight - crop.height\n                  ),\n                };\n\n                this.scene.mutateElement(croppingElement, {\n                  crop: nextCrop,\n                });\n\n                return;\n              }\n            }\n          }\n\n          // Snap cache *must* be synchronously popuplated before initial drag,\n          // otherwise the first drag even will not snap, causing a jump before\n          // it snaps to its position if previously snapped already.\n          this.maybeCacheVisibleGaps(event, selectedElements);\n          this.maybeCacheReferenceSnapPoints(event, selectedElements);\n\n          const { snapOffset, snapLines } = snapDraggedElements(\n            originalElements,\n            dragOffset,\n            this,\n            event,\n            this.scene.getNonDeletedElementsMap()\n          );\n\n          this.setState({ snapLines });\n\n          // when we're editing the name of a frame, we want the user to be\n          // able to select and interact with the text input\n          if (!this.state.editingFrame) {\n            dragSelectedElements(\n              pointerDownState,\n              selectedElements,\n              dragOffset,\n              this.scene,\n              snapOffset,\n              event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n            );\n          }\n\n          this.setState({\n            selectedElementsAreBeingDragged: true,\n            // element is being dragged and selectionElement that was created on pointer down\n            // should be removed\n            selectionElement: null,\n          });\n\n          // We duplicate the selected element if alt is pressed on pointer move\n          if (event.altKey && !pointerDownState.hit.hasBeenDuplicated) {\n            // Move the currently selected elements to the top of the z index stack, and\n            // put the duplicates where the selected elements used to be.\n            // (the origin point where the dragging started)\n\n            pointerDownState.hit.hasBeenDuplicated = true;\n\n            const elements = this.scene.getElementsIncludingDeleted();\n            const hitElement = pointerDownState.hit.element;\n            const selectedElements = this.scene.getSelectedElements({\n              selectedElementIds: this.state.selectedElementIds,\n              includeBoundTextElement: true,\n              includeElementsInFrames: true,\n            });\n            if (\n              hitElement &&\n              // hit element may not end up being selected\n              // if we're alt-dragging a common bounding box\n              // over the hit element\n              pointerDownState.hit.wasAddedToSelection &&\n              !selectedElements.find(el => el.id === hitElement.id)\n            ) {\n              selectedElements.push(hitElement);\n            }\n\n            const idsOfElementsToDuplicate = new Map(selectedElements.map(el => [el.id, el]));\n\n            const {\n              duplicatedElements,\n              duplicateElementsMap,\n              elementsWithDuplicates,\n              origIdToDuplicateId,\n            } = duplicateElements({\n              type: \"in-place\",\n              elements,\n              appState: this.state,\n              randomizeSeed: true,\n              idsOfElementsToDuplicate,\n              overrides: ({ duplicateElement, origElement }) => {\n                return {\n                  // reset to the original element's frameId (unless we've\n                  // duplicated alongside a frame in which case we need to\n                  // keep the duplicate frame's id) so that the element\n                  // frame membership is refreshed on pointerup\n                  // NOTE this is a hacky solution and should be done\n                  // differently\n                  frameId: duplicateElement.frameId ?? origElement.frameId,\n                  seed: randomInteger(),\n                };\n              },\n            });\n            duplicatedElements.forEach(element => {\n              pointerDownState.originalElements.set(element.id, deepCopyElement(element));\n            });\n\n            const mappedClonedElements = elementsWithDuplicates.map(el => {\n              if (idsOfElementsToDuplicate.has(el.id)) {\n                const origEl = pointerDownState.originalElements.get(el.id);\n\n                if (origEl) {\n                  return newElementWith(el, {\n                    x: origEl.x,\n                    y: origEl.y,\n                  });\n                }\n              }\n              return el;\n            });\n\n            const mappedNewSceneElements = this.props.onDuplicate?.(mappedClonedElements, elements);\n\n            const elementsWithIndices = syncMovedIndices(\n              mappedNewSceneElements || mappedClonedElements,\n              arrayToMap(duplicatedElements)\n            );\n\n            // we need to update synchronously so as to keep pointerDownState,\n            // appState, and scene elements in sync\n            flushSync(() => {\n              // swap hit element with the duplicated one\n              if (pointerDownState.hit.element) {\n                const cloneId = origIdToDuplicateId.get(pointerDownState.hit.element.id);\n                const clonedElement = cloneId && duplicateElementsMap.get(cloneId);\n                pointerDownState.hit.element = clonedElement || null;\n              }\n              // swap hit elements with the duplicated ones\n              pointerDownState.hit.allHitElements = pointerDownState.hit.allHitElements.reduce(\n                (acc: typeof pointerDownState.hit.allHitElements, origHitElement) => {\n                  const cloneId = origIdToDuplicateId.get(origHitElement.id);\n                  const clonedElement = cloneId && duplicateElementsMap.get(cloneId);\n                  if (clonedElement) {\n                    acc.push(clonedElement);\n                  }\n\n                  return acc;\n                },\n                []\n              );\n\n              // update drag origin to the position at which we started\n              // the duplication so that the drag offset is correct\n              pointerDownState.drag.origin = viewportCoordsToSceneCoords(event, this.state);\n\n              // switch selected elements to the duplicated ones\n              this.setState(prevState => ({\n                ...getSelectionStateForElements(\n                  duplicatedElements,\n                  this.scene.getNonDeletedElements(),\n                  prevState\n                ),\n              }));\n\n              this.scene.replaceAllElements(elementsWithIndices);\n              selectedElements.forEach(element => {\n                if (\n                  isBindableElement(element) &&\n                  element.boundElements?.some(other => other.type === \"arrow\")\n                ) {\n                  updateBoundElements(element, this.scene, {\n                    indirectArrowUpdate: true,\n                  });\n                }\n              });\n\n              this.maybeCacheVisibleGaps(event, selectedElements, true);\n              this.maybeCacheReferenceSnapPoints(event, selectedElements, true);\n            });\n          }\n\n          return;\n        }\n      }\n\n      if (this.state.selectionElement) {\n        pointerDownState.lastCoords.x = pointerCoords.x;\n        pointerDownState.lastCoords.y = pointerCoords.y;\n        if (event.altKey) {\n          this.setActiveTool({ type: \"lasso\", fromSelection: true }, event.shiftKey);\n          this.lassoTrail.startPath(\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n            event.shiftKey\n          );\n          this.setAppState({\n            selectionElement: null,\n          });\n          return;\n        }\n        this.maybeDragNewGenericElement(pointerDownState, event);\n      } else if (this.state.activeTool.type === \"lasso\") {\n        if (!event.altKey && this.state.activeTool.fromSelection) {\n          this.setActiveTool({ type: \"selection\" });\n          this.createGenericElementOnPointerDown(\"selection\", pointerDownState);\n          pointerDownState.lastCoords.x = pointerCoords.x;\n          pointerDownState.lastCoords.y = pointerCoords.y;\n          this.maybeDragNewGenericElement(pointerDownState, event);\n          this.lassoTrail.endPath();\n        } else {\n          this.lassoTrail.addPointToPath(pointerCoords.x, pointerCoords.y, event.shiftKey);\n        }\n      } else {\n        // It is very important to read this.state within each move event,\n        // otherwise we would read a stale one!\n        const newElement = this.state.newElement;\n\n        if (!newElement) {\n          return;\n        }\n\n        if (newElement.type === \"freedraw\") {\n          const points = newElement.points;\n          const dx = pointerCoords.x - newElement.x;\n          const dy = pointerCoords.y - newElement.y;\n\n          const lastPoint = points.length > 0 && points[points.length - 1];\n          const discardPoint = lastPoint && lastPoint[0] === dx && lastPoint[1] === dy;\n\n          if (!discardPoint) {\n            const pressures = newElement.simulatePressure\n              ? newElement.pressures\n              : [...newElement.pressures, event.pressure];\n\n            this.scene.mutateElement(\n              newElement,\n              {\n                points: [...points, pointFrom<LocalPoint>(dx, dy)],\n                pressures,\n              },\n              {\n                informMutation: false,\n                isDragging: false,\n              }\n            );\n\n            this.setState({\n              newElement,\n            });\n          }\n        } else if (isLinearElement(newElement) && !newElement.isDeleted) {\n          pointerDownState.drag.hasOccurred = true;\n          const points = newElement.points;\n\n          invariant(points.length > 1, \"Do not create linear elements with less than 2 points\");\n\n          let linearElementEditor = this.state.selectedLinearElement;\n          if (!linearElementEditor) {\n            linearElementEditor = new LinearElementEditor(\n              newElement,\n              this.scene.getNonDeletedElementsMap()\n            );\n            linearElementEditor = {\n              ...linearElementEditor,\n              selectedPointsIndices: [1],\n              initialState: {\n                ...linearElementEditor.initialState,\n                lastClickedPoint: 1,\n              },\n            };\n          }\n          this.setState({\n            newElement,\n            ...LinearElementEditor.handlePointDragging(\n              event,\n              this,\n              gridX,\n              gridY,\n              linearElementEditor\n            )!,\n          });\n        } else {\n          pointerDownState.lastCoords.x = pointerCoords.x;\n          pointerDownState.lastCoords.y = pointerCoords.y;\n          this.maybeDragNewGenericElement(pointerDownState, event, false);\n        }\n      }\n\n      if (this.state.activeTool.type === \"selection\") {\n        pointerDownState.boxSelection.hasOccurred = true;\n\n        const elements = this.scene.getNonDeletedElements();\n\n        // box-select line editor points\n        if (this.state.selectedLinearElement?.isEditing) {\n          LinearElementEditor.handleBoxSelection(\n            event,\n            this.state,\n            this.setState.bind(this),\n            this.scene.getNonDeletedElementsMap()\n          );\n          // regular box-select\n        } else {\n          let shouldReuseSelection = true;\n\n          if (!event.shiftKey && isSomeElementSelected(elements, this.state)) {\n            if (pointerDownState.withCmdOrCtrl && pointerDownState.hit.element) {\n              this.setState(prevState =>\n                selectGroupsForSelectedElements(\n                  {\n                    ...prevState,\n                    selectedElementIds: {\n                      [pointerDownState.hit.element!.id]: true,\n                    },\n                  },\n                  this.scene.getNonDeletedElements(),\n                  prevState,\n                  this\n                )\n              );\n            } else {\n              shouldReuseSelection = false;\n            }\n          }\n          const elementsWithinSelection = this.state.selectionElement\n            ? getElementsWithinSelection(\n                elements,\n                this.state.selectionElement,\n                this.scene.getNonDeletedElementsMap(),\n                false\n              )\n            : [];\n\n          this.setState(prevState => {\n            const nextSelectedElementIds = {\n              ...(shouldReuseSelection && prevState.selectedElementIds),\n              ...elementsWithinSelection.reduce(\n                (acc: Record<JsonDrawElement[\"id\"], true>, element) => {\n                  acc[element.id] = true;\n                  return acc;\n                },\n                {}\n              ),\n            };\n\n            if (pointerDownState.hit.element) {\n              // if using ctrl/cmd, select the hitElement only if we\n              // haven't box-selected anything else\n              if (!elementsWithinSelection.length) {\n                nextSelectedElementIds[pointerDownState.hit.element.id] = true;\n              } else {\n                delete nextSelectedElementIds[pointerDownState.hit.element.id];\n              }\n            }\n\n            prevState = !shouldReuseSelection\n              ? { ...prevState, selectedGroupIds: {}, editingGroupId: null }\n              : prevState;\n\n            return {\n              ...selectGroupsForSelectedElements(\n                {\n                  editingGroupId: prevState.editingGroupId,\n                  selectedElementIds: nextSelectedElementIds,\n                },\n                this.scene.getNonDeletedElements(),\n                prevState,\n                this\n              ),\n              // select linear element only when we haven't box-selected anything else\n              selectedLinearElement:\n                elementsWithinSelection.length === 1 && isLinearElement(elementsWithinSelection[0])\n                  ? new LinearElementEditor(\n                      elementsWithinSelection[0],\n                      this.scene.getNonDeletedElementsMap()\n                    )\n                  : null,\n              showHyperlinkPopup:\n                elementsWithinSelection.length === 1 &&\n                (elementsWithinSelection[0].link || isEmbeddableElement(elementsWithinSelection[0]))\n                  ? \"info\"\n                  : false,\n            };\n          });\n        }\n      }\n    });\n  }\n\n  // Returns whether the pointer move happened over either scrollbar\n  private handlePointerMoveOverScrollbars(\n    event: PointerEvent,\n    pointerDownState: PointerDownState\n  ): boolean {\n    if (pointerDownState.scrollbars.isOverHorizontal) {\n      const x = event.clientX;\n      const dx = x - pointerDownState.lastCoords.x;\n      this.translateCanvas({\n        scrollX:\n          this.state.scrollX -\n          (dx * (currentScrollBars.horizontal?.deltaMultiplier || 1)) / this.state.zoom.value,\n      });\n      pointerDownState.lastCoords.x = x;\n      return true;\n    }\n\n    if (pointerDownState.scrollbars.isOverVertical) {\n      const y = event.clientY;\n      const dy = y - pointerDownState.lastCoords.y;\n      this.translateCanvas({\n        scrollY:\n          this.state.scrollY -\n          (dy * (currentScrollBars.vertical?.deltaMultiplier || 1)) / this.state.zoom.value,\n      });\n      pointerDownState.lastCoords.y = y;\n      return true;\n    }\n    return false;\n  }\n\n  private onPointerUpFromPointerDownHandler(\n    pointerDownState: PointerDownState\n  ): (event: PointerEvent) => void {\n    return withBatchedUpdates((childEvent: PointerEvent) => {\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n\n      this.removePointer(childEvent);\n      pointerDownState.drag.blockDragging = false;\n      if (pointerDownState.eventListeners.onMove) {\n        pointerDownState.eventListeners.onMove.flush();\n      }\n      const {\n        newElement,\n        resizingElement,\n        croppingElementId,\n        multiElement,\n        activeTool,\n        isResizing,\n        isRotating,\n        isCropping,\n      } = this.state;\n\n      this.setState(prevState => ({\n        isResizing: false,\n        isRotating: false,\n        isCropping: false,\n        resizingElement: null,\n        selectionElement: null,\n        frameToHighlight: null,\n        elementsToHighlight: null,\n        cursorButton: \"up\",\n        snapLines: updateStable(prevState.snapLines, []),\n        originSnapOffset: null,\n      }));\n\n      // just in case, tool changes mid drag, always clean up\n      this.lassoTrail.endPath();\n      this.previousPointerMoveCoords = null;\n\n      SnapCache.setReferenceSnapPoints(null);\n      SnapCache.setVisibleGaps(null);\n\n      this.savePointer(childEvent.clientX, childEvent.clientY, \"up\");\n\n      // if current elements are still selected\n      // and the pointer is just over a locked element\n      // do not allow activeLockedId to be set\n\n      const hitElements = pointerDownState.hit.allHitElements;\n\n      const sceneCoords = viewportCoordsToSceneCoords(\n        { clientX: childEvent.clientX, clientY: childEvent.clientY },\n        this.state\n      );\n\n      if (\n        this.state.activeTool.type === \"selection\" &&\n        !pointerDownState.boxSelection.hasOccurred &&\n        !pointerDownState.resize.isResizing &&\n        !hitElements.some(el => this.state.selectedElementIds[el.id])\n      ) {\n        const hitLockedElement = this.getElementAtPosition(sceneCoords.x, sceneCoords.y, {\n          includeLockedElements: true,\n        });\n\n        this.store.scheduleCapture();\n\n        if (hitLockedElement?.locked) {\n          this.setState({\n            activeLockedId:\n              hitLockedElement.groupIds.length > 0\n                ? hitLockedElement.groupIds.at(-1) || \"\"\n                : hitLockedElement.id,\n          });\n        } else {\n          this.setState({\n            activeLockedId: null,\n          });\n        }\n      } else {\n        this.setState({\n          activeLockedId: null,\n        });\n      }\n\n      if (getFeatureFlag(\"COMPLEX_BINDINGS\")) {\n        this.resetDelayedBindMode();\n      }\n\n      this.setState({\n        selectedElementsAreBeingDragged: false,\n        bindMode: \"orbit\",\n      });\n\n      if (pointerDownState.drag.hasOccurred && pointerDownState.hit?.element?.id) {\n        const element = elementsMap.get(pointerDownState.hit.element.id);\n        if (isBindableElement(element)) {\n          // Renormalize elbow arrows when they are changed via indirect move\n          element.boundElements\n            ?.filter(e => e.type === \"arrow\")\n            .map(e => elementsMap.get(e.id))\n            .filter(e => isElbowArrow(e))\n            .forEach(e => {\n              !!e && this.scene.mutateElement(e, {});\n            });\n        }\n      }\n\n      // Handle end of dragging a point of a linear element, might close a loop\n      // and sets binding element\n      if (\n        this.state.selectedLinearElement?.isEditing &&\n        !this.state.newElement &&\n        this.state.selectedLinearElement.draggedFocusPointBinding === null\n      ) {\n        if (\n          !pointerDownState.boxSelection.hasOccurred &&\n          pointerDownState.hit?.element?.id !== this.state.selectedLinearElement.elementId &&\n          this.state.selectedLinearElement.draggedFocusPointBinding === null\n        ) {\n          this.actionManager.executeAction(actionFinalize);\n        } else {\n          const editingLinearElement = LinearElementEditor.handlePointerUp(\n            childEvent,\n            this.state.selectedLinearElement,\n            this.state,\n            this.scene\n          );\n          this.actionManager.executeAction(actionFinalize, \"ui\", {\n            event: childEvent,\n            sceneCoords,\n          });\n          if (editingLinearElement !== this.state.selectedLinearElement) {\n            this.setState({\n              selectedLinearElement: editingLinearElement,\n              suggestedBinding: null,\n            });\n          }\n        }\n      } else if (this.state.selectedLinearElement) {\n        // Normalize elbow arrow points, remove close parallel segments\n        if (this.state.selectedLinearElement.elbowed) {\n          const element = LinearElementEditor.getElement(\n            this.state.selectedLinearElement.elementId,\n            this.scene.getNonDeletedElementsMap()\n          );\n          if (element) {\n            this.scene.mutateElement(element as JsonDrawElbowArrowElement, {});\n          }\n        }\n\n        if (this.state.selectedLinearElement.draggedFocusPointBinding) {\n          handleFocusPointPointerUp(this.state.selectedLinearElement, this.scene);\n          this.setState({\n            selectedLinearElement: {\n              ...this.state.selectedLinearElement,\n              draggedFocusPointBinding: null,\n            },\n          });\n        } else if (\n          pointerDownState.hit?.element?.id !== this.state.selectedLinearElement.elementId\n        ) {\n          const selectedELements = this.scene.getSelectedElements(this.state);\n          // set selectedLinearElement to null if there is more than one element selected since we don't want to show linear element handles\n          if (selectedELements.length > 1) {\n            this.setState({ selectedLinearElement: null });\n          }\n        } else if (this.state.selectedLinearElement.isDragging) {\n          this.setState({\n            selectedLinearElement: {\n              ...this.state.selectedLinearElement,\n              isDragging: false,\n            },\n          });\n          this.actionManager.executeAction(actionFinalize, \"ui\", {\n            event: childEvent,\n            sceneCoords,\n          });\n        }\n\n        if (\n          this.state.newElement &&\n          this.state.multiElement &&\n          isLinearElement(this.state.newElement) &&\n          this.state.selectedLinearElement\n        ) {\n          const { multiElement } = this.state;\n\n          this.setState({\n            selectedLinearElement: {\n              ...this.state.selectedLinearElement,\n              lastCommittedPoint: multiElement.points[multiElement.points.length - 1],\n            },\n          });\n        }\n      }\n\n      this.missingPointerEventCleanupEmitter.clear();\n\n      window.removeEventListener(EVENT.POINTER_MOVE, pointerDownState.eventListeners.onMove!);\n      window.removeEventListener(EVENT.POINTER_UP, pointerDownState.eventListeners.onUp!);\n      window.removeEventListener(EVENT.KEYDOWN, pointerDownState.eventListeners.onKeyDown!);\n      window.removeEventListener(EVENT.KEYUP, pointerDownState.eventListeners.onKeyUp!);\n\n      this.props?.onPointerUp?.(activeTool, pointerDownState);\n      this.onPointerUpEmitter.trigger(this.state.activeTool, pointerDownState, childEvent);\n\n      if (newElement?.type === \"freedraw\") {\n        const pointerCoords = viewportCoordsToSceneCoords(childEvent, this.state);\n\n        const points = newElement.points;\n        let dx = pointerCoords.x - newElement.x;\n        let dy = pointerCoords.y - newElement.y;\n\n        // Allows dots to avoid being flagged as infinitely small\n        if (dx === points[0][0] && dy === points[0][1]) {\n          dy += 0.0001;\n          dx += 0.0001;\n        }\n\n        const pressures = newElement.simulatePressure\n          ? []\n          : [...newElement.pressures, childEvent.pressure];\n\n        this.scene.mutateElement(newElement, {\n          points: [...points, pointFrom<LocalPoint>(dx, dy)],\n          pressures,\n        });\n\n        this.actionManager.executeAction(actionFinalize);\n\n        return;\n      }\n\n      if (isLinearElement(newElement)) {\n        if (\n          newElement!.points.length > 1 &&\n          newElement.points[1][0] !== 0 &&\n          newElement.points[1][1] !== 0\n        ) {\n          this.store.scheduleCapture();\n        }\n        const pointerCoords = viewportCoordsToSceneCoords(childEvent, this.state);\n\n        const dragDistance =\n          pointDistance(\n            pointFrom(pointerCoords.x, pointerCoords.y),\n            pointFrom(pointerDownState.origin.x, pointerDownState.origin.y)\n          ) * this.state.zoom.value;\n\n        if (\n          (!pointerDownState.drag.hasOccurred || dragDistance < MINIMUM_ARROW_SIZE) &&\n          newElement &&\n          !multiElement\n        ) {\n          if (this.editorInterface.isTouchScreen) {\n            const FIXED_DELTA_X = Math.min((this.state.width * 0.7) / this.state.zoom.value, 100);\n\n            this.scene.mutateElement(\n              newElement,\n              {\n                x: newElement.x - FIXED_DELTA_X / 2,\n                points: [pointFrom<LocalPoint>(0, 0), pointFrom<LocalPoint>(FIXED_DELTA_X, 0)],\n              },\n              { informMutation: false, isDragging: false }\n            );\n\n            this.actionManager.executeAction(actionFinalize);\n          } else {\n            const dx = pointerCoords.x - newElement.x;\n            const dy = pointerCoords.y - newElement.y;\n\n            this.scene.mutateElement(\n              newElement,\n              {\n                points: [newElement.points[0], pointFrom<LocalPoint>(dx, dy)],\n              },\n              { informMutation: false, isDragging: false }\n            );\n\n            this.setState({\n              multiElement: newElement,\n              newElement,\n            });\n          }\n        } else if (pointerDownState.drag.hasOccurred && !multiElement) {\n          if (isLinearElement(newElement)) {\n            this.actionManager.executeAction(actionFinalize, \"ui\", {\n              event: childEvent,\n              sceneCoords,\n            });\n          }\n          this.setState({ suggestedBinding: null, startBoundElement: null });\n          if (!activeTool.locked) {\n            resetCursor(this.interactiveCanvas);\n            this.setState(prevState => ({\n              newElement: null,\n              activeTool: updateActiveTool(this.state, {\n                type: this.state.preferredSelectionTool.type,\n              }),\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  ...prevState.selectedElementIds,\n                  [newElement.id]: true,\n                },\n                prevState\n              ),\n              selectedLinearElement: new LinearElementEditor(\n                newElement,\n                this.scene.getNonDeletedElementsMap()\n              ),\n            }));\n          } else {\n            this.setState(prevState => ({\n              newElement: null,\n            }));\n          }\n          // so that the scene gets rendered again to display the newly drawn linear as well\n          this.scene.triggerUpdate();\n        }\n        return;\n      }\n\n      if (isTextElement(newElement)) {\n        const minWidth = getMinTextElementWidth(\n          getFontString({\n            fontSize: newElement.fontSize,\n            fontFamily: newElement.fontFamily,\n          }),\n          newElement.lineHeight\n        );\n\n        if (newElement.width < minWidth) {\n          this.scene.mutateElement(newElement, {\n            autoResize: true,\n          });\n        }\n\n        this.resetCursor();\n\n        this.handleTextWysiwyg(newElement, {\n          isExistingElement: true,\n        });\n      }\n\n      if (activeTool.type !== \"selection\" && newElement && isInvisiblySmallElement(newElement)) {\n        // remove invisible element which was added in onPointerDown\n        // update the store snapshot, so that invisible elements are not captured by the store\n        this.updateScene({\n          elements: this.scene.getElementsIncludingDeleted().filter(el => el.id !== newElement.id),\n          appState: {\n            newElement: null,\n          },\n          captureUpdate: CaptureUpdateAction.NEVER,\n        });\n\n        return;\n      }\n\n      if (isFrameLikeElement(newElement)) {\n        const elementsInsideFrame = getElementsInNewFrame(\n          this.scene.getElementsIncludingDeleted(),\n          newElement,\n          this.scene.getNonDeletedElementsMap()\n        );\n\n        this.scene.replaceAllElements(\n          addElementsToFrame(\n            this.scene.getElementsMapIncludingDeleted(),\n            elementsInsideFrame,\n            newElement,\n            this.state\n          )\n        );\n      }\n\n      if (newElement) {\n        this.scene.mutateElement(newElement, getNormalizedDimensions(newElement), {\n          informMutation: false,\n          isDragging: false,\n        });\n        // the above does not guarantee the scene to be rendered again, hence the trigger below\n        this.scene.triggerUpdate();\n      }\n\n      if (pointerDownState.drag.hasOccurred) {\n        const sceneCoords = viewportCoordsToSceneCoords(childEvent, this.state);\n\n        // when editing the points of a linear element, we check if the\n        // linear element still is in the frame afterwards\n        // if not, the linear element will be removed from its frame (if any)\n        if (this.state.selectedLinearElement && this.state.selectedLinearElement.isDragging) {\n          const linearElement = this.scene.getElement(this.state.selectedLinearElement.elementId);\n\n          if (linearElement?.frameId) {\n            const frame = getContainingFrame(linearElement, elementsMap);\n\n            if (frame && linearElement) {\n              if (\n                !elementOverlapsWithFrame(\n                  linearElement,\n                  frame,\n                  this.scene.getNonDeletedElementsMap()\n                )\n              ) {\n                // remove the linear element from all groups\n                // before removing it from the frame as well\n                this.scene.mutateElement(linearElement, {\n                  groupIds: [],\n                });\n\n                removeElementsFromFrame([linearElement], this.scene.getNonDeletedElementsMap());\n\n                this.scene.triggerUpdate();\n              }\n            }\n          }\n        } else {\n          // update the relationships between selected elements and frames\n          const topLayerFrame = this.getTopLayerFrameAtSceneCoords(sceneCoords);\n\n          const selectedElements = this.scene.getSelectedElements(this.state);\n          let nextElements = this.scene.getElementsMapIncludingDeleted();\n\n          const updateGroupIdsAfterEditingGroup = (elements: JsonDrawElement[]) => {\n            if (elements.length > 0) {\n              for (const element of elements) {\n                const index = element.groupIds.indexOf(this.state.editingGroupId!);\n\n                this.scene.mutateElement(\n                  element,\n                  {\n                    groupIds: element.groupIds.slice(0, index),\n                  },\n                  { informMutation: false, isDragging: false }\n                );\n              }\n\n              nextElements.forEach(element => {\n                if (\n                  element.groupIds.length &&\n                  getElementsInGroup(nextElements, element.groupIds[element.groupIds.length - 1])\n                    .length < 2\n                ) {\n                  this.scene.mutateElement(\n                    element,\n                    {\n                      groupIds: [],\n                    },\n                    { informMutation: false, isDragging: false }\n                  );\n                }\n              });\n\n              this.setState({\n                editingGroupId: null,\n              });\n            }\n          };\n\n          if (topLayerFrame && !this.state.selectedElementIds[topLayerFrame.id]) {\n            const elementsToAdd = selectedElements.filter(\n              element =>\n                element.frameId !== topLayerFrame.id &&\n                isElementInFrame(element, nextElements, this.state)\n            );\n\n            if (this.state.editingGroupId) {\n              updateGroupIdsAfterEditingGroup(elementsToAdd);\n            }\n\n            nextElements = addElementsToFrame(\n              nextElements,\n              elementsToAdd,\n              topLayerFrame,\n              this.state\n            );\n          } else if (!topLayerFrame) {\n            if (this.state.editingGroupId) {\n              const elementsToRemove = selectedElements.filter(\n                element => element.frameId && !isElementInFrame(element, nextElements, this.state)\n              );\n\n              updateGroupIdsAfterEditingGroup(elementsToRemove);\n            }\n          }\n\n          nextElements = updateFrameMembershipOfSelectedElements(nextElements, this.state, this);\n\n          this.scene.replaceAllElements(nextElements);\n        }\n      }\n\n      if (resizingElement) {\n        this.store.scheduleCapture();\n      }\n\n      if (resizingElement && isInvisiblySmallElement(resizingElement)) {\n        // update the store snapshot, so that invisible elements are not captured by the store\n        this.updateScene({\n          elements: this.scene\n            .getElementsIncludingDeleted()\n            .filter(el => el.id !== resizingElement.id),\n          captureUpdate: CaptureUpdateAction.NEVER,\n        });\n      }\n\n      // handle frame membership for resizing frames and/or selected elements\n      if (pointerDownState.resize.isResizing) {\n        let nextElements = updateFrameMembershipOfSelectedElements(\n          this.scene.getElementsIncludingDeleted(),\n          this.state,\n          this\n        );\n\n        const selectedFrames = this.scene\n          .getSelectedElements(this.state)\n          .filter((element): element is JsonDrawFrameLikeElement => isFrameLikeElement(element));\n\n        for (const frame of selectedFrames) {\n          nextElements = replaceAllElementsInFrame(\n            nextElements,\n            getElementsInResizingFrame(\n              this.scene.getElementsIncludingDeleted(),\n              frame,\n              this.state,\n              elementsMap\n            ),\n            frame,\n            this\n          );\n        }\n\n        this.scene.replaceAllElements(nextElements);\n      }\n\n      // Code below handles selection when element(s) weren't\n      // drag or added to selection on pointer down phase.\n      const hitElement = pointerDownState.hit.element;\n      if (\n        this.state.selectedLinearElement?.elementId !== hitElement?.id &&\n        isLinearElement(hitElement)\n      ) {\n        const selectedElements = this.scene.getSelectedElements(this.state);\n        // set selectedLinearElement when no other element selected except\n        // the one we've hit\n        if (selectedElements.length === 1) {\n          this.setState({\n            selectedLinearElement: new LinearElementEditor(\n              hitElement,\n              this.scene.getNonDeletedElementsMap()\n            ),\n          });\n        }\n      }\n\n      // click outside the cropping region to exit\n      if (\n        // not in the cropping mode at all\n        !croppingElementId ||\n        // in the cropping mode\n        (croppingElementId &&\n          // not cropping and no hit element\n          ((!hitElement && !isCropping) ||\n            // hitting something else\n            (hitElement && hitElement.id !== croppingElementId)))\n      ) {\n        this.finishImageCropping();\n      }\n\n      const pointerStart = this.lastPointerDownEvent;\n      const pointerEnd = this.lastPointerUpEvent || this.lastPointerMoveEvent;\n\n      if (isEraserActive(this.state) && pointerStart && pointerEnd) {\n        this.eraserTrail.endPath();\n\n        const draggedDistance = pointDistance(\n          pointFrom(pointerStart.clientX, pointerStart.clientY),\n          pointFrom(pointerEnd.clientX, pointerEnd.clientY)\n        );\n\n        if (draggedDistance === 0) {\n          const scenePointer = viewportCoordsToSceneCoords(\n            {\n              clientX: pointerEnd.clientX,\n              clientY: pointerEnd.clientY,\n            },\n            this.state\n          );\n          const hitElements = this.getElementsAtPosition(scenePointer.x, scenePointer.y);\n          hitElements.forEach(hitElement => this.elementsPendingErasure.add(hitElement.id));\n        }\n        this.eraseElements();\n        return;\n      } else if (this.elementsPendingErasure.size) {\n        this.restoreReadyToEraseElements();\n      }\n\n      if (\n        hitElement &&\n        !pointerDownState.drag.hasOccurred &&\n        !pointerDownState.hit.wasAddedToSelection &&\n        // if we're editing a line, pointerup shouldn't switch selection if\n        // box selected\n        (!this.state.selectedLinearElement?.isEditing ||\n          !pointerDownState.boxSelection.hasOccurred) &&\n        // hitElement can be set when alt + ctrl to toggle lasso and we will\n        // just respect the selected elements from lasso instead\n        this.state.activeTool.type !== \"lasso\"\n      ) {\n        // when inside line editor, shift selects points instead\n        if (childEvent.shiftKey && !this.state.selectedLinearElement?.isEditing) {\n          if (this.state.selectedElementIds[hitElement.id]) {\n            if (isSelectedViaGroup(this.state, hitElement)) {\n              this.setState(_prevState => {\n                const nextSelectedElementIds = {\n                  ..._prevState.selectedElementIds,\n                };\n\n                // We want to unselect all groups hitElement is part of\n                // as well as all elements that are part of the groups\n                // hitElement is part of\n                for (const groupedElement of hitElement.groupIds.flatMap(groupId =>\n                  getElementsInGroup(this.scene.getNonDeletedElements(), groupId)\n                )) {\n                  delete nextSelectedElementIds[groupedElement.id];\n                }\n\n                return {\n                  selectedGroupIds: {\n                    ..._prevState.selectedElementIds,\n                    ...hitElement.groupIds\n                      .map(gId => ({ [gId]: false }))\n                      .reduce((prev, acc) => ({ ...prev, ...acc }), {}),\n                  },\n                  selectedElementIds: makeNextSelectedElementIds(\n                    nextSelectedElementIds,\n                    _prevState\n                  ),\n                };\n              });\n              // if not dragging a linear element point (outside editor)\n            } else if (!this.state.selectedLinearElement?.isDragging) {\n              // remove element from selection while\n              // keeping prev elements selected\n\n              this.setState(prevState => {\n                const newSelectedElementIds = {\n                  ...prevState.selectedElementIds,\n                };\n                delete newSelectedElementIds[hitElement!.id];\n                const newSelectedElements = getSelectedElements(\n                  this.scene.getNonDeletedElements(),\n                  { selectedElementIds: newSelectedElementIds }\n                );\n\n                return {\n                  ...selectGroupsForSelectedElements(\n                    {\n                      editingGroupId: prevState.editingGroupId,\n                      selectedElementIds: newSelectedElementIds,\n                    },\n                    this.scene.getNonDeletedElements(),\n                    prevState,\n                    this\n                  ),\n                  // set selectedLinearElement only if thats the only element selected\n                  selectedLinearElement:\n                    newSelectedElements.length === 1 && isLinearElement(newSelectedElements[0])\n                      ? new LinearElementEditor(\n                          newSelectedElements[0],\n                          this.scene.getNonDeletedElementsMap()\n                        )\n                      : prevState.selectedLinearElement,\n                };\n              });\n            }\n          } else if (hitElement.frameId && this.state.selectedElementIds[hitElement.frameId]) {\n            // when hitElement is part of a selected frame, deselect the frame\n            // to avoid frame and containing elements selected simultaneously\n            this.setState(prevState => {\n              const nextSelectedElementIds: {\n                [id: string]: true;\n              } = {\n                ...prevState.selectedElementIds,\n                [hitElement.id]: true,\n              };\n              // deselect the frame\n              delete nextSelectedElementIds[hitElement.frameId!];\n\n              // deselect groups containing the frame\n              (this.scene.getElement(hitElement.frameId!)?.groupIds ?? [])\n                .flatMap(gid => getElementsInGroup(this.scene.getNonDeletedElements(), gid))\n                .forEach(element => {\n                  delete nextSelectedElementIds[element.id];\n                });\n\n              return {\n                ...selectGroupsForSelectedElements(\n                  {\n                    editingGroupId: prevState.editingGroupId,\n                    selectedElementIds: nextSelectedElementIds,\n                  },\n                  this.scene.getNonDeletedElements(),\n                  prevState,\n                  this\n                ),\n                showHyperlinkPopup:\n                  hitElement.link || isEmbeddableElement(hitElement) ? \"info\" : false,\n              };\n            });\n          } else {\n            // add element to selection while keeping prev elements selected\n            this.setState(_prevState => ({\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  ..._prevState.selectedElementIds,\n                  [hitElement!.id]: true,\n                },\n                _prevState\n              ),\n            }));\n          }\n        } else {\n          this.setState(prevState => ({\n            ...selectGroupsForSelectedElements(\n              {\n                editingGroupId: prevState.editingGroupId,\n                selectedElementIds: { [hitElement.id]: true },\n              },\n              this.scene.getNonDeletedElements(),\n              prevState,\n              this\n            ),\n            selectedLinearElement:\n              isLinearElement(hitElement) &&\n              // Don't set `selectedLinearElement` if its same as the hitElement, this is mainly to prevent resetting the `hoverPointIndex` to -1.\n              // Future we should update the API to take care of setting the correct `hoverPointIndex` when initialized\n              prevState.selectedLinearElement?.elementId !== hitElement.id\n                ? new LinearElementEditor(hitElement, this.scene.getNonDeletedElementsMap())\n                : prevState.selectedLinearElement,\n          }));\n        }\n      }\n\n      if (\n        // do not clear selection if lasso is active\n        this.state.activeTool.type !== \"lasso\" &&\n        // not elbow midpoint dragged\n        !(hitElement && isElbowArrow(hitElement)) &&\n        // not dragged\n        !pointerDownState.drag.hasOccurred &&\n        // not resized\n        !this.state.isResizing &&\n        // only hitting the bounding box of the previous hit element\n        ((hitElement &&\n          hitElementBoundingBoxOnly(\n            {\n              point: pointFrom(pointerDownState.origin.x, pointerDownState.origin.y),\n              element: hitElement,\n              elementsMap,\n              threshold: this.getElementHitThreshold(hitElement),\n              frameNameBound: isFrameLikeElement(hitElement)\n                ? this.frameNameBoundsCache.get(hitElement)\n                : null,\n            },\n            elementsMap\n          )) ||\n          (!hitElement && pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements))\n      ) {\n        if (this.state.selectedLinearElement?.isEditing) {\n          // Exit editing mode but keep the element selected\n          this.actionManager.executeAction(actionToggleLinearEditor);\n        } else {\n          // Deselect selected elements\n          this.setState({\n            selectedElementIds: makeNextSelectedElementIds({}, this.state),\n            selectedGroupIds: {},\n            editingGroupId: null,\n            activeEmbeddable: null,\n          });\n        }\n        // reset cursor\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n        return;\n      }\n\n      if (!activeTool.locked && activeTool.type !== \"freedraw\" && newElement) {\n        this.setState(prevState => ({\n          selectedElementIds: makeNextSelectedElementIds(\n            {\n              ...prevState.selectedElementIds,\n              [newElement.id]: true,\n            },\n            prevState\n          ),\n          showHyperlinkPopup:\n            isEmbeddableElement(newElement) && !newElement.link\n              ? \"editor\"\n              : prevState.showHyperlinkPopup,\n        }));\n      }\n\n      if (\n        activeTool.type !== \"selection\" ||\n        isSomeElementSelected(this.scene.getNonDeletedElements(), this.state) ||\n        !isShallowEqual(this.state.previousSelectedElementIds, this.state.selectedElementIds)\n      ) {\n        this.store.scheduleCapture();\n      }\n\n      if (\n        (pointerDownState.drag.hasOccurred && !this.state.selectedLinearElement) ||\n        isResizing ||\n        isRotating ||\n        isCropping\n      ) {\n        // We only allow binding via linear elements, specifically via dragging\n        // the endpoints (\"start\" or \"end\").\n        const linearElements = this.scene.getSelectedElements(this.state).filter(isArrowElement);\n\n        bindOrUnbindBindingElements(linearElements, this.scene, this.state);\n      }\n\n      if (activeTool.type === \"laser\") {\n        this.laserTrails.endPath();\n        return;\n      }\n\n      if (\n        !activeTool.locked &&\n        activeTool.type !== \"freedraw\" &&\n        (activeTool.type !== \"lasso\" ||\n          // if lasso is turned on but from selection => reset to selection\n          (activeTool.type === \"lasso\" && activeTool.fromSelection))\n      ) {\n        resetCursor(this.interactiveCanvas);\n        this.setState({\n          newElement: null,\n          suggestedBinding: null,\n          activeTool: updateActiveTool(this.state, {\n            type: this.state.preferredSelectionTool.type,\n          }),\n        });\n      } else {\n        this.setState({\n          newElement: null,\n          suggestedBinding: null,\n        });\n      }\n\n      if (\n        hitElement &&\n        this.lastPointerUpEvent &&\n        this.lastPointerDownEvent &&\n        this.lastPointerUpEvent.timeStamp - this.lastPointerDownEvent.timeStamp < 300 &&\n        gesture.pointers.size <= 1 &&\n        isIframeLikeElement(hitElement) &&\n        this.isIframeLikeElementCenter(\n          hitElement,\n          this.lastPointerUpEvent,\n          pointerDownState.origin.x,\n          pointerDownState.origin.y\n        )\n      ) {\n        this.handleEmbeddableCenterClick(hitElement);\n      }\n    });\n  }\n\n  private restoreReadyToEraseElements = () => {\n    this.elementsPendingErasure = new Set();\n    this.triggerRender();\n  };\n\n  private eraseElements = () => {\n    let didChange = false;\n\n    // Binding is double accounted on both elements and if one of them is\n    // deleted, the binding should be removed\n    this.elementsPendingErasure.forEach(id => {\n      const element = this.scene.getElement(id);\n      if (isBindingElement(element)) {\n        if (element.startBinding) {\n          const bindable = this.scene.getElement(element.startBinding.elementId)!;\n          // NOTE: We use the raw mutateElement() because we don't want history\n          // entries or multiplayer updates\n          mutateElement(bindable, this.scene.getElementsMapIncludingDeleted(), {\n            boundElements: bindable.boundElements!.filter(e => e.id !== element.id),\n          });\n        }\n        if (element.endBinding) {\n          const bindable = this.scene.getElement(element.endBinding.elementId)!;\n          // NOTE: We use the raw mutateElement() because we don't want history\n          // entries or multiplayer updates\n          mutateElement(bindable, this.scene.getElementsMapIncludingDeleted(), {\n            boundElements: bindable.boundElements!.filter(e => e.id !== element.id),\n          });\n        }\n      } else if (isBindableElement(element)) {\n        element.boundElements?.forEach(boundElement => {\n          if (boundElement.type === \"arrow\") {\n            const arrow = this.scene.getElement(boundElement.id) as JsonDrawArrowElement;\n            if (arrow?.startBinding?.elementId === element.id) {\n              // NOTE: We use the raw mutateElement() because we don't want history\n              // entries or multiplayer updates\n              mutateElement(arrow, this.scene.getElementsMapIncludingDeleted(), {\n                startBinding: null,\n              });\n            }\n            if (arrow?.endBinding?.elementId === element.id) {\n              // NOTE: We use the raw mutateElement() because we don't want history\n              // entries or multiplayer updates\n              mutateElement(arrow, this.scene.getElementsMapIncludingDeleted(), {\n                endBinding: null,\n              });\n            }\n          }\n        });\n      }\n    });\n\n    const elements = this.scene.getElementsIncludingDeleted().map(ele => {\n      if (\n        this.elementsPendingErasure.has(ele.id) ||\n        (ele.frameId && this.elementsPendingErasure.has(ele.frameId)) ||\n        (isBoundToContainer(ele) && this.elementsPendingErasure.has(ele.containerId))\n      ) {\n        didChange = true;\n        return newElementWith(ele, { isDeleted: true });\n      }\n      return ele;\n    });\n\n    this.elementsPendingErasure = new Set();\n\n    if (didChange) {\n      this.store.scheduleCapture();\n      this.scene.replaceAllElements(elements);\n    }\n  };\n\n  private initializeImage = async (\n    placeholderImageElement: JsonDrawImageElement,\n    imageFile: File\n  ) => {\n    // at this point this should be guaranteed image file, but we do this check\n    // to satisfy TS down the line\n    if (!isSupportedImageFile(imageFile)) {\n      throw new Error(t(\"errors.unsupportedFileType\"));\n    }\n    const mimeType = imageFile.type;\n\n    setCursor(this.interactiveCanvas, \"wait\");\n\n    if (mimeType === MIME_TYPES.svg) {\n      try {\n        imageFile = SVGStringToFile(normalizeSVG(await imageFile.text()), imageFile.name);\n      } catch (error: any) {\n        console.warn(error);\n        throw new Error(t(\"errors.svgImageInsertError\"));\n      }\n    }\n\n    // generate image id (by default the file digest) before any\n    // resizing/compression takes place to keep it more portable\n    const fileId = await ((this.props.generateIdForFile?.(imageFile) as Promise<FileId>) ||\n      generateIdFromFile(imageFile));\n\n    if (!fileId) {\n      console.warn(\n        \"Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one.\"\n      );\n      throw new Error(t(\"errors.imageInsertError\"));\n    }\n\n    const existingFileData = this.files[fileId];\n    if (!existingFileData?.dataURL) {\n      try {\n        imageFile = await resizeImageFile(imageFile, {\n          maxWidthOrHeight: DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT,\n        });\n      } catch (error: any) {\n        console.error(\"Error trying to resizing image file on insertion\", error);\n      }\n\n      if (imageFile.size > MAX_ALLOWED_FILE_BYTES) {\n        throw new Error(\n          t(\"errors.fileTooBig\", {\n            maxSize: `${Math.trunc(MAX_ALLOWED_FILE_BYTES / 1024 / 1024)}MB`,\n          })\n        );\n      }\n    }\n\n    const dataURL = this.files[fileId]?.dataURL || (await getDataURL(imageFile));\n\n    return new Promise<NonDeleted<InitializedJsonDrawImageElement>>(async (resolve, reject) => {\n      try {\n        let initializedImageElement = this.getLatestInitializedImageElement(\n          placeholderImageElement,\n          fileId\n        );\n\n        this.addMissingFiles([\n          {\n            mimeType,\n            id: fileId,\n            dataURL,\n            created: Date.now(),\n            lastRetrieved: Date.now(),\n          },\n        ]);\n\n        if (!this.imageCache.get(fileId)) {\n          this.addNewImagesToImageCache();\n\n          const { erroredFiles } = await this.updateImageCache([initializedImageElement]);\n\n          if (erroredFiles.size) {\n            throw new Error(\"Image cache update resulted with an error.\");\n          }\n        }\n\n        const imageHTML = await this.imageCache.get(fileId)?.image;\n\n        if (imageHTML && this.state.newElement?.id !== initializedImageElement.id) {\n          initializedImageElement = this.getLatestInitializedImageElement(\n            placeholderImageElement,\n            fileId\n          );\n\n          const naturalDimensions = this.getImageNaturalDimensions(\n            initializedImageElement,\n            imageHTML\n          );\n\n          // no need to create a new instance anymore, just assign the natural dimensions\n          Object.assign(initializedImageElement, naturalDimensions);\n        }\n\n        resolve(initializedImageElement);\n      } catch (error: any) {\n        console.error(error);\n        reject(new Error(t(\"errors.imageInsertError\")));\n      }\n    });\n  };\n\n  /**\n   * use during async image initialization,\n   * when the placeholder image could have been modified in the meantime,\n   * and when you don't want to loose those modifications\n   */\n  private getLatestInitializedImageElement = (\n    imagePlaceholder: JsonDrawImageElement,\n    fileId: FileId\n  ) => {\n    const latestImageElement = this.scene.getElement(imagePlaceholder.id) ?? imagePlaceholder;\n\n    return newElementWith(latestImageElement as InitializedJsonDrawImageElement, {\n      fileId,\n    });\n  };\n\n  private onImageToolbarButtonClick = async () => {\n    try {\n      const clientX = this.state.width / 2 + this.state.offsetLeft;\n      const clientY = this.state.height / 2 + this.state.offsetTop;\n\n      const { x, y } = viewportCoordsToSceneCoords({ clientX, clientY }, this.state);\n\n      const imageFiles = await fileOpen({\n        description: \"Image\",\n        extensions: Object.keys(IMAGE_MIME_TYPES) as (keyof typeof IMAGE_MIME_TYPES)[],\n        multiple: true,\n      });\n\n      this.insertImages(imageFiles, x, y);\n    } catch (error: any) {\n      if (error.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      this.setState(\n        {\n          newElement: null,\n          activeTool: updateActiveTool(this.state, {\n            type: this.state.preferredSelectionTool.type,\n          }),\n        },\n        () => {\n          this.actionManager.executeAction(actionFinalize);\n        }\n      );\n    }\n  };\n\n  private getImageNaturalDimensions = (\n    imageElement: JsonDrawImageElement,\n    imageHTML: HTMLImageElement\n  ) => {\n    const minHeight = Math.max(this.state.height - 120, 160);\n    // max 65% of canvas height, clamped to <300px, vh - 120px>\n    const maxHeight = Math.min(\n      minHeight,\n      Math.floor(this.state.height * 0.5) / this.state.zoom.value\n    );\n\n    const height = Math.min(imageHTML.naturalHeight, maxHeight);\n    const width = height * (imageHTML.naturalWidth / imageHTML.naturalHeight);\n\n    // add current imageElement width/height to account for previous centering\n    // of the placeholder image\n    const x = imageElement.x + imageElement.width / 2 - width / 2;\n    const y = imageElement.y + imageElement.height / 2 - height / 2;\n\n    return {\n      x,\n      y,\n      width,\n      height,\n      crop: null,\n    };\n  };\n\n  /** updates image cache, refreshing updated elements and/or setting status\n      to error for images that fail during <img> element creation */\n  private updateImageCache = async (\n    elements: readonly InitializedJsonDrawImageElement[],\n    files = this.files\n  ) => {\n    const { updatedFiles, erroredFiles } = await _updateImageCache({\n      imageCache: this.imageCache,\n      fileIds: elements.map(element => element.fileId),\n      files,\n    });\n\n    if (erroredFiles.size) {\n      this.store.scheduleAction(CaptureUpdateAction.NEVER);\n      this.scene.replaceAllElements(\n        this.scene.getElementsIncludingDeleted().map(element => {\n          if (isInitializedImageElement(element) && erroredFiles.has(element.fileId)) {\n            return newElementWith(element, {\n              status: \"error\",\n            });\n          }\n          return element;\n        })\n      );\n    }\n\n    return { updatedFiles, erroredFiles };\n  };\n\n  /** adds new images to imageCache and re-renders if needed */\n  private addNewImagesToImageCache = async (\n    imageElements: InitializedJsonDrawImageElement[] = getInitializedImageElements(\n      this.scene.getNonDeletedElements()\n    ),\n    files: BinaryFiles = this.files\n  ) => {\n    const uncachedImageElements = imageElements.filter(\n      element => !element.isDeleted && !this.imageCache.has(element.fileId)\n    );\n\n    if (uncachedImageElements.length) {\n      const { updatedFiles } = await this.updateImageCache(uncachedImageElements, files);\n\n      if (updatedFiles.size) {\n        for (const element of uncachedImageElements) {\n          if (updatedFiles.has(element.fileId)) {\n            ShapeCache.delete(element);\n          }\n        }\n      }\n\n      if (updatedFiles.size) {\n        this.scene.triggerUpdate();\n      }\n    }\n  };\n\n  /** generally you should use `addNewImagesToImageCache()` directly if you need\n   *  to render new images. This is just a failsafe  */\n  private scheduleImageRefresh = throttle(() => {\n    this.addNewImagesToImageCache();\n  }, IMAGE_RENDER_TIMEOUT);\n\n  private updateBindingEnabledOnPointerMove = (event: React.PointerEvent<HTMLElement>) => {\n    const shouldEnableBinding = shouldEnableBindingForPointerEvent(event);\n    if (this.state.isBindingEnabled !== shouldEnableBinding) {\n      this.setState({ isBindingEnabled: shouldEnableBinding });\n    }\n  };\n\n  private clearSelection(hitElement: JsonDrawElement | null): void {\n    this.setState(prevState => ({\n      selectedElementIds: makeNextSelectedElementIds({}, prevState),\n      activeEmbeddable: null,\n      selectedGroupIds: {},\n      // Continue editing the same group if the user selected a different\n      // element from it\n      editingGroupId:\n        prevState.editingGroupId &&\n        hitElement != null &&\n        isElementInGroup(hitElement, prevState.editingGroupId)\n          ? prevState.editingGroupId\n          : null,\n    }));\n    this.setState({\n      selectedElementIds: makeNextSelectedElementIds({}, this.state),\n      activeEmbeddable: null,\n      previousSelectedElementIds: this.state.selectedElementIds,\n      selectedLinearElement: null,\n    });\n  }\n\n  private handleInteractiveCanvasRef = (canvas: HTMLCanvasElement | null) => {\n    // canvas is null when unmounting\n    if (canvas !== null) {\n      this.interactiveCanvas = canvas;\n\n      // -----------------------------------------------------------------------\n      // NOTE wheel, touchstart, touchend events must be registered outside\n      // of react because react binds them them passively (so we can't prevent\n      // default on them)\n      this.interactiveCanvas.addEventListener(EVENT.TOUCH_START, this.onTouchStart, {\n        passive: false,\n      });\n      this.interactiveCanvas.addEventListener(EVENT.TOUCH_END, this.onTouchEnd);\n      // -----------------------------------------------------------------------\n    } else {\n      this.interactiveCanvas?.removeEventListener(EVENT.TOUCH_START, this.onTouchStart);\n      this.interactiveCanvas?.removeEventListener(EVENT.TOUCH_END, this.onTouchEnd);\n    }\n  };\n\n  private insertImages = async (imageFiles: File[], sceneX: number, sceneY: number) => {\n    const gridPadding = 50 / this.state.zoom.value;\n    // Create, position, and insert placeholders\n    const placeholders = positionElementsOnGrid(\n      imageFiles.map(() => this.newImagePlaceholder({ sceneX, sceneY })),\n      sceneX,\n      sceneY,\n      gridPadding\n    );\n    placeholders.forEach(el => this.scene.insertElement(el));\n\n    // Create, position, insert and select initialized (replacing placeholders)\n    const initialized = await Promise.all(\n      placeholders.map(async (placeholder, i) => {\n        try {\n          return await this.initializeImage(placeholder, await normalizeFile(imageFiles[i]));\n        } catch (error: any) {\n          this.setState({\n            errorMessage: error.message || t(\"errors.imageInsertError\"),\n          });\n          return newElementWith(placeholder, { isDeleted: true });\n        }\n      })\n    );\n    const initializedMap = arrayToMap(initialized);\n\n    const positioned = positionElementsOnGrid(\n      initialized.filter(el => !el.isDeleted),\n      sceneX,\n      sceneY,\n      gridPadding\n    );\n    const positionedMap = arrayToMap(positioned);\n\n    const nextElements = this.scene\n      .getElementsIncludingDeleted()\n      .map(el => positionedMap.get(el.id) ?? initializedMap.get(el.id) ?? el);\n\n    this.updateScene({\n      appState: {\n        selectedElementIds: makeNextSelectedElementIds(\n          Object.fromEntries(positioned.map(el => [el.id, true])),\n          this.state\n        ),\n      },\n      elements: nextElements,\n      captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n    });\n\n    this.setState({}, () => {\n      // actionFinalize after all state values have been updated\n      this.actionManager.executeAction(actionFinalize);\n    });\n  };\n\n  private handleAppOnDrop = async (event: React.DragEvent<HTMLDivElement>) => {\n    const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(event, this.state);\n    const dataTransferList = await parseDataTransferEvent(event);\n\n    // must be retrieved first, in the same frame\n    const fileItems = dataTransferList.getFiles();\n\n    if (fileItems.length === 1) {\n      const { file, fileHandle } = fileItems[0];\n\n      if (file && (file.type === MIME_TYPES.png || file.type === MIME_TYPES.svg)) {\n        try {\n          const scene = await loadFromBlob(\n            file,\n            this.state,\n            this.scene.getElementsIncludingDeleted(),\n            fileHandle\n          );\n          this.syncActionResult({\n            ...scene,\n            appState: {\n              ...(scene.appState || this.state),\n              isLoading: false,\n            },\n            replaceFiles: true,\n            captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n          });\n          return;\n        } catch (error: any) {\n          if (error.name !== \"EncodingError\") {\n            throw new Error(t(\"alerts.couldNotLoadInvalidFile\"));\n          }\n          // if EncodingError, fall through to insert as regular image\n        }\n      }\n    }\n\n    const imageFiles = fileItems.map(data => data.file).filter(file => isSupportedImageFile(file));\n\n    if (imageFiles.length > 0 && this.isToolSupported(\"image\")) {\n      return this.insertImages(imageFiles, sceneX, sceneY);\n    }\n    const jsondrawLibrary_ids = dataTransferList.getData(MIME_TYPES.jsondrawlibIds);\n    const jsondrawLibrary_data = dataTransferList.getData(MIME_TYPES.jsondrawlib);\n    if (jsondrawLibrary_ids || jsondrawLibrary_data) {\n      try {\n        let libraryItems: LibraryItems | null = null;\n        if (jsondrawLibrary_ids) {\n          const { itemIds } = JSON.parse(jsondrawLibrary_ids) as JsonDrawLibraryIds;\n          const allLibraryItems = await this.library.getLatestLibrary();\n          libraryItems = allLibraryItems.filter(item => itemIds.includes(item.id));\n          // legacy library dataTransfer format\n        } else if (jsondrawLibrary_data) {\n          libraryItems = parseLibraryJSON(jsondrawLibrary_data);\n        }\n        if (libraryItems?.length) {\n          libraryItems = libraryItems.map(item => ({\n            ...item,\n            // #6465\n            elements: duplicateElements({\n              type: \"everything\",\n              elements: item.elements,\n              randomizeSeed: true,\n            }).duplicatedElements,\n          }));\n\n          this.addElementsFromPasteOrLibrary({\n            elements: distributeLibraryItemsOnSquareGrid(libraryItems),\n            position: event,\n            files: null,\n          });\n        }\n      } catch (error: any) {\n        this.setState({ errorMessage: error.message });\n      }\n      return;\n    }\n\n    if (fileItems.length > 0) {\n      const { file, fileHandle } = fileItems[0];\n      if (file) {\n        // Attempt to parse an jsondraw/jsondrawlib file\n        await this.loadFileToCanvas(file, fileHandle);\n      }\n    }\n\n    const textItem = dataTransferList.findByType(MIME_TYPES.text);\n\n    if (textItem) {\n      const text = textItem.value;\n      if (\n        text &&\n        embeddableURLValidator(text, this.props.validateEmbeddable) &&\n        (/^(http|https):\\/\\/[^\\s/$.?#].[^\\s]*$/.test(text) || getEmbedLink(text)?.type === \"video\")\n      ) {\n        const embeddable = this.insertEmbeddableElement({\n          sceneX,\n          sceneY,\n          link: normalizeLink(text),\n        });\n        if (embeddable) {\n          this.store.scheduleCapture();\n          this.setState({ selectedElementIds: { [embeddable.id]: true } });\n        }\n      }\n    }\n  };\n\n  loadFileToCanvas = async (file: File, fileHandle: FileSystemHandle | null) => {\n    file = await normalizeFile(file);\n    try {\n      const elements = this.scene.getElementsIncludingDeleted();\n      let ret;\n      try {\n        ret = await loadSceneOrLibraryFromBlob(file, this.state, elements, fileHandle);\n      } catch (error: any) {\n        const imageSceneDataError = error instanceof ImageSceneDataError;\n        if (\n          imageSceneDataError &&\n          error.code === \"IMAGE_NOT_CONTAINS_SCENE_DATA\" &&\n          !this.isToolSupported(\"image\")\n        ) {\n          this.setState({\n            isLoading: false,\n            errorMessage: t(\"errors.imageToolNotSupported\"),\n          });\n          return;\n        }\n        const errorMessage = imageSceneDataError\n          ? t(\"alerts.cannotRestoreFromImage\")\n          : t(\"alerts.couldNotLoadInvalidFile\");\n        this.setState({\n          isLoading: false,\n          errorMessage,\n        });\n      }\n      if (!ret) {\n        return;\n      }\n\n      if (ret.type === MIME_TYPES.jsondraw) {\n        // restore the fractional indices by mutating elements\n        syncInvalidIndices(elements.concat(ret.data.elements));\n\n        // don't capture and only update the store snapshot for old elements,\n        // otherwise we would end up with duplicated fractional indices on undo\n        this.store.scheduleMicroAction({\n          action: CaptureUpdateAction.NEVER,\n          elements,\n          appState: undefined,\n        });\n\n        this.setState({ isLoading: true });\n        this.syncActionResult({\n          ...ret.data,\n          appState: {\n            ...(ret.data.appState || this.state),\n            isLoading: false,\n          },\n          replaceFiles: true,\n          captureUpdate: CaptureUpdateAction.IMMEDIATELY,\n        });\n      } else if (ret.type === MIME_TYPES.jsondrawlib) {\n        await this.library\n          .updateLibrary({\n            libraryItems: file,\n            merge: true,\n            openLibraryMenu: true,\n          })\n          .catch(error => {\n            console.error(error);\n            this.setState({ errorMessage: t(\"errors.importLibraryError\") });\n          });\n      }\n    } catch (error: any) {\n      this.setState({ isLoading: false, errorMessage: error.message });\n    }\n  };\n\n  private handleCanvasContextMenu = (event: React.MouseEvent<HTMLElement | HTMLCanvasElement>) => {\n    event.preventDefault();\n\n    if (\n      ((\"pointerType\" in event.nativeEvent && event.nativeEvent.pointerType === \"touch\") ||\n        (\"pointerType\" in event.nativeEvent &&\n          event.nativeEvent.pointerType === \"pen\" &&\n          // always allow if user uses a pen secondary button\n          event.button !== POINTER_BUTTON.SECONDARY)) &&\n      this.state.activeTool.type !== this.state.preferredSelectionTool.type\n    ) {\n      return;\n    }\n\n    const { x, y } = viewportCoordsToSceneCoords(event, this.state);\n    const element = this.getElementAtPosition(x, y, {\n      preferSelected: true,\n      includeLockedElements: true,\n    });\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const isHittingCommonBoundBox = this.isHittingCommonBoundingBoxOfSelectedElements(\n      { x, y },\n      selectedElements\n    );\n\n    const type = element || isHittingCommonBoundBox ? \"element\" : \"canvas\";\n\n    const container = this.jsondrawContainerRef.current!;\n    const { top: offsetTop, left: offsetLeft } = container.getBoundingClientRect();\n    const left = event.clientX - offsetLeft;\n    const top = event.clientY - offsetTop;\n\n    trackEvent(\"contextMenu\", \"openContextMenu\", type);\n\n    this.setState(\n      {\n        ...(element && !this.state.selectedElementIds[element.id]\n          ? {\n              ...this.state,\n              ...selectGroupsForSelectedElements(\n                {\n                  editingGroupId: this.state.editingGroupId,\n                  selectedElementIds: { [element.id]: true },\n                },\n                this.scene.getNonDeletedElements(),\n                this.state,\n                this\n              ),\n              selectedLinearElement: isLinearElement(element)\n                ? new LinearElementEditor(element, this.scene.getNonDeletedElementsMap())\n                : null,\n            }\n          : this.state),\n        showHyperlinkPopup: false,\n      },\n      () => {\n        this.setState({\n          contextMenu: { top, left, items: this.getContextMenuItems(type) },\n        });\n      }\n    );\n  };\n\n  private maybeDragNewGenericElement = (\n    pointerDownState: PointerDownState,\n    event: MouseEvent | KeyboardEvent,\n    informMutation = true\n  ): void => {\n    const selectionElement = this.state.selectionElement;\n    const pointerCoords = pointerDownState.lastCoords;\n    if (\n      selectionElement &&\n      pointerDownState.boxSelection.hasOccurred &&\n      this.state.activeTool.type !== \"eraser\"\n    ) {\n      dragNewElement({\n        newElement: selectionElement,\n        elementType: this.state.activeTool.type,\n        originX: pointerDownState.origin.x,\n        originY: pointerDownState.origin.y,\n        x: pointerCoords.x,\n        y: pointerCoords.y,\n        width: distance(pointerDownState.origin.x, pointerCoords.x),\n        height: distance(pointerDownState.origin.y, pointerCoords.y),\n        shouldMaintainAspectRatio: shouldMaintainAspectRatio(event),\n        shouldResizeFromCenter: false,\n        scene: this.scene,\n        zoom: this.state.zoom.value,\n        informMutation: false,\n      });\n      return;\n    }\n\n    const newElement = this.state.newElement;\n    if (!newElement) {\n      return;\n    }\n\n    let [gridX, gridY] = getGridPoint(\n      pointerCoords.x,\n      pointerCoords.y,\n      event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const image =\n      isInitializedImageElement(newElement) && this.imageCache.get(newElement.fileId)?.image;\n    const aspectRatio = image && !(image instanceof Promise) ? image.width / image.height : null;\n\n    this.maybeCacheReferenceSnapPoints(event, [newElement]);\n\n    const { snapOffset, snapLines } = snapNewElement(\n      newElement,\n      this,\n      event,\n      {\n        x: pointerDownState.originInGrid.x + (this.state.originSnapOffset?.x ?? 0),\n        y: pointerDownState.originInGrid.y + (this.state.originSnapOffset?.y ?? 0),\n      },\n      {\n        x: gridX - pointerDownState.originInGrid.x,\n        y: gridY - pointerDownState.originInGrid.y,\n      },\n      this.scene.getNonDeletedElementsMap()\n    );\n\n    gridX += snapOffset.x;\n    gridY += snapOffset.y;\n\n    this.setState({\n      snapLines,\n    });\n\n    if (!isBindingElement(newElement)) {\n      dragNewElement({\n        newElement,\n        elementType: this.state.activeTool.type,\n        originX: pointerDownState.originInGrid.x,\n        originY: pointerDownState.originInGrid.y,\n        x: gridX,\n        y: gridY,\n        width: distance(pointerDownState.originInGrid.x, gridX),\n        height: distance(pointerDownState.originInGrid.y, gridY),\n        shouldMaintainAspectRatio: isImageElement(newElement)\n          ? !shouldMaintainAspectRatio(event)\n          : shouldMaintainAspectRatio(event),\n        shouldResizeFromCenter: shouldResizeFromCenter(event),\n        zoom: this.state.zoom.value,\n        scene: this.scene,\n        widthAspectRatio: aspectRatio,\n        originOffset: this.state.originSnapOffset,\n        informMutation,\n      });\n    }\n\n    this.setState({\n      newElement,\n    });\n\n    // highlight elements that are to be added to frames on frames creation\n    if (\n      this.state.activeTool.type === TOOL_TYPE.frame ||\n      this.state.activeTool.type === TOOL_TYPE.magicframe\n    ) {\n      this.setState({\n        elementsToHighlight: getElementsInResizingFrame(\n          this.scene.getNonDeletedElements(),\n          newElement as JsonDrawFrameLikeElement,\n          this.state,\n          this.scene.getNonDeletedElementsMap()\n        ),\n      });\n    }\n  };\n\n  private maybeHandleCrop = (\n    pointerDownState: PointerDownState,\n    event: MouseEvent | KeyboardEvent\n  ): boolean => {\n    // to crop, we must already be in the cropping mode, where croppingElement has been set\n    if (!this.state.croppingElementId) {\n      return false;\n    }\n\n    const transformHandleType = pointerDownState.resize.handleType;\n    const pointerCoords = pointerDownState.lastCoords;\n    const [x, y] = getGridPoint(\n      pointerCoords.x - pointerDownState.resize.offset.x,\n      pointerCoords.y - pointerDownState.resize.offset.y,\n      event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const croppingElement = this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);\n\n    if (transformHandleType && croppingElement && isImageElement(croppingElement)) {\n      const croppingAtStateStart = pointerDownState.originalElements.get(croppingElement.id);\n\n      const image =\n        isInitializedImageElement(croppingElement) &&\n        this.imageCache.get(croppingElement.fileId)?.image;\n\n      if (\n        croppingAtStateStart &&\n        isImageElement(croppingAtStateStart) &&\n        image &&\n        !(image instanceof Promise)\n      ) {\n        const [gridX, gridY] = getGridPoint(\n          pointerCoords.x,\n          pointerCoords.y,\n          event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n        );\n\n        const dragOffset = {\n          x: gridX - pointerDownState.originInGrid.x,\n          y: gridY - pointerDownState.originInGrid.y,\n        };\n\n        this.maybeCacheReferenceSnapPoints(event, [croppingElement]);\n\n        const { snapOffset, snapLines } = snapResizingElements(\n          [croppingElement],\n          [croppingAtStateStart],\n          this,\n          event,\n          dragOffset,\n          transformHandleType\n        );\n\n        this.scene.mutateElement(\n          croppingElement,\n          cropElement(\n            croppingElement,\n            this.scene.getNonDeletedElementsMap(),\n            transformHandleType,\n            image.naturalWidth,\n            image.naturalHeight,\n            x + snapOffset.x,\n            y + snapOffset.y,\n            event.shiftKey ? croppingAtStateStart.width / croppingAtStateStart.height : undefined\n          )\n        );\n\n        updateBoundElements(croppingElement, this.scene);\n\n        this.setState({\n          isCropping: transformHandleType && transformHandleType !== \"rotation\",\n          snapLines,\n        });\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  private maybeHandleResize = (\n    pointerDownState: PointerDownState,\n    event: MouseEvent | KeyboardEvent\n  ): boolean => {\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const selectedFrames = selectedElements.filter((element): element is JsonDrawFrameLikeElement =>\n      isFrameLikeElement(element)\n    );\n\n    const transformHandleType = pointerDownState.resize.handleType;\n\n    if (\n      // Frames cannot be rotated.\n      (selectedFrames.length > 0 && transformHandleType === \"rotation\") ||\n      // Elbow arrows cannot be transformed (resized or rotated).\n      (selectedElements.length === 1 && isElbowArrow(selectedElements[0])) ||\n      // Do not resize when in crop mode\n      this.state.croppingElementId\n    ) {\n      return false;\n    }\n\n    this.setState({\n      // TODO: rename this state field to \"isScaling\" to distinguish\n      // it from the generic \"isResizing\" which includes scaling and\n      // rotating\n      isResizing: transformHandleType && transformHandleType !== \"rotation\",\n      isRotating: transformHandleType === \"rotation\",\n      activeEmbeddable: null,\n    });\n    const pointerCoords = pointerDownState.lastCoords;\n    let [resizeX, resizeY] = getGridPoint(\n      pointerCoords.x - pointerDownState.resize.offset.x,\n      pointerCoords.y - pointerDownState.resize.offset.y,\n      event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n    );\n\n    const frameElementsOffsetsMap = new Map<\n      string,\n      {\n        x: number;\n        y: number;\n      }\n    >();\n\n    selectedFrames.forEach(frame => {\n      const elementsInFrame = getFrameChildren(this.scene.getNonDeletedElements(), frame.id);\n\n      elementsInFrame.forEach(element => {\n        frameElementsOffsetsMap.set(frame.id + element.id, {\n          x: element.x - frame.x,\n          y: element.y - frame.y,\n        });\n      });\n    });\n\n    // check needed for avoiding flickering when a key gets pressed\n    // during dragging\n    if (!this.state.selectedElementsAreBeingDragged) {\n      const [gridX, gridY] = getGridPoint(\n        pointerCoords.x,\n        pointerCoords.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()\n      );\n\n      const dragOffset = {\n        x: gridX - pointerDownState.originInGrid.x,\n        y: gridY - pointerDownState.originInGrid.y,\n      };\n\n      const originalElements = [...pointerDownState.originalElements.values()];\n\n      this.maybeCacheReferenceSnapPoints(event, selectedElements);\n\n      const { snapOffset, snapLines } = snapResizingElements(\n        selectedElements,\n        getSelectedElements(originalElements, this.state),\n        this,\n        event,\n        dragOffset,\n        transformHandleType\n      );\n\n      resizeX += snapOffset.x;\n      resizeY += snapOffset.y;\n\n      this.setState({\n        snapLines,\n      });\n    }\n\n    if (\n      transformElements(\n        pointerDownState.originalElements,\n        transformHandleType,\n        selectedElements,\n        this.scene,\n        shouldRotateWithDiscreteAngle(event),\n        shouldResizeFromCenter(event),\n        selectedElements.some(element => isImageElement(element))\n          ? !shouldMaintainAspectRatio(event)\n          : shouldMaintainAspectRatio(event),\n        resizeX,\n        resizeY,\n        pointerDownState.resize.center.x,\n        pointerDownState.resize.center.y\n      )\n    ) {\n      const elementsToHighlight = new Set<JsonDrawElement>();\n      selectedFrames.forEach(frame => {\n        getElementsInResizingFrame(\n          this.scene.getNonDeletedElements(),\n          frame,\n          this.state,\n          this.scene.getNonDeletedElementsMap()\n        ).forEach(element => elementsToHighlight.add(element));\n      });\n\n      this.setState({\n        elementsToHighlight: [...elementsToHighlight],\n      });\n\n      return true;\n    }\n    return false;\n  };\n\n  private getContextMenuItems = (type: \"canvas\" | \"element\"): ContextMenuItems => {\n    const options: ContextMenuItems = [];\n\n    options.push(actionCopyAsPng, actionCopyAsSvg);\n\n    // canvas contextMenu\n    // -------------------------------------------------------------------------\n\n    if (type === \"canvas\") {\n      if (this.state.viewModeEnabled) {\n        return [\n          ...options,\n          actionToggleGridMode,\n          actionToggleZenMode,\n          actionToggleViewMode,\n          actionToggleStats,\n        ];\n      }\n\n      return [\n        actionPaste,\n        CONTEXT_MENU_SEPARATOR,\n        actionCopyAsPng,\n        actionCopyAsSvg,\n        copyText,\n        CONTEXT_MENU_SEPARATOR,\n        actionSelectAll,\n        actionUnlockAllElements,\n        CONTEXT_MENU_SEPARATOR,\n        actionToggleGridMode,\n        actionToggleObjectsSnapMode,\n        actionToggleZenMode,\n        actionToggleViewMode,\n        actionToggleStats,\n      ];\n    }\n\n    // element contextMenu\n    // -------------------------------------------------------------------------\n\n    options.push(copyText);\n\n    if (this.state.viewModeEnabled) {\n      return [actionCopy, ...options];\n    }\n\n    const zIndexActions: ContextMenuItems =\n      this.editorInterface.formFactor === \"desktop\"\n        ? [\n            CONTEXT_MENU_SEPARATOR,\n            actionSendBackward,\n            actionBringForward,\n            actionSendToBack,\n            actionBringToFront,\n          ]\n        : [];\n\n    return [\n      CONTEXT_MENU_SEPARATOR,\n      actionCut,\n      actionCopy,\n      actionPaste,\n      CONTEXT_MENU_SEPARATOR,\n      actionSelectAllElementsInFrame,\n      actionRemoveAllElementsFromFrame,\n      actionWrapSelectionInFrame,\n      CONTEXT_MENU_SEPARATOR,\n      actionToggleCropEditor,\n      CONTEXT_MENU_SEPARATOR,\n      ...options,\n      CONTEXT_MENU_SEPARATOR,\n      actionCopyStyles,\n      actionPasteStyles,\n      CONTEXT_MENU_SEPARATOR,\n      actionGroup,\n      actionTextAutoResize,\n      actionUnbindText,\n      actionBindText,\n      actionWrapTextInContainer,\n      actionUngroup,\n      CONTEXT_MENU_SEPARATOR,\n      actionAddToLibrary,\n      ...zIndexActions,\n      CONTEXT_MENU_SEPARATOR,\n      actionFlipHorizontal,\n      actionFlipVertical,\n      CONTEXT_MENU_SEPARATOR,\n      actionToggleLinearEditor,\n      CONTEXT_MENU_SEPARATOR,\n      actionLink,\n      actionCopyElementLink,\n      CONTEXT_MENU_SEPARATOR,\n      actionDuplicateSelection,\n      actionToggleElementLock,\n      CONTEXT_MENU_SEPARATOR,\n      actionDeleteSelected,\n    ];\n  };\n\n  private handleWheel = withBatchedUpdates(\n    (event: WheelEvent | React.WheelEvent<HTMLDivElement | HTMLCanvasElement>) => {\n      if (\n        !(\n          event.target instanceof HTMLCanvasElement ||\n          event.target instanceof HTMLTextAreaElement ||\n          event.target instanceof HTMLIFrameElement ||\n          (event.target instanceof HTMLElement &&\n            event.target.classList.contains(CLASSES.FRAME_NAME))\n        )\n      ) {\n        // prevent zooming the browser (but allow scrolling DOM)\n        if (event[KEYS.CTRL_OR_CMD]) {\n          event.preventDefault();\n        }\n\n        return;\n      }\n\n      event.preventDefault();\n\n      if (isPanning) {\n        return;\n      }\n\n      const { deltaX, deltaY } = event;\n      // note that event.ctrlKey is necessary to handle pinch zooming\n      if (event.metaKey || event.ctrlKey) {\n        const sign = Math.sign(deltaY);\n        const MAX_STEP = ZOOM_STEP * 100;\n        const absDelta = Math.abs(deltaY);\n        let delta = deltaY;\n        if (absDelta > MAX_STEP) {\n          delta = MAX_STEP * sign;\n        }\n\n        let newZoom = this.state.zoom.value - delta / 100;\n        // increase zoom steps the more zoomed-in we are (applies to >100% only)\n        newZoom +=\n          Math.log10(Math.max(1, this.state.zoom.value)) *\n          -sign *\n          // reduced amplification for small deltas (small movements on a trackpad)\n          Math.min(1, absDelta / 20);\n\n        this.translateCanvas(state => ({\n          ...getStateForZoom(\n            {\n              viewportX: this.lastViewportPosition.x,\n              viewportY: this.lastViewportPosition.y,\n              nextZoom: getNormalizedZoom(newZoom),\n            },\n            state\n          ),\n          shouldCacheIgnoreZoom: true,\n        }));\n        this.resetShouldCacheIgnoreZoomDebounced();\n        return;\n      }\n\n      // scroll horizontally when shift pressed\n      if (event.shiftKey) {\n        this.translateCanvas(({ zoom, scrollX }) => ({\n          // on Mac, shift+wheel tends to result in deltaX\n          scrollX: scrollX - (deltaY || deltaX) / zoom.value,\n        }));\n        return;\n      }\n\n      this.translateCanvas(({ zoom, scrollX, scrollY }) => ({\n        scrollX: scrollX - deltaX / zoom.value,\n        scrollY: scrollY - deltaY / zoom.value,\n      }));\n    }\n  );\n\n  private getTextWysiwygSnappedToCenterPosition(\n    x: number,\n    y: number,\n    appState: AppState,\n    container?: JsonDrawTextContainer | null\n  ) {\n    if (container) {\n      let elementCenterX = container.x + container.width / 2;\n      let elementCenterY = container.y + container.height / 2;\n\n      const elementCenter = getContainerCenter(\n        container,\n        appState,\n        this.scene.getNonDeletedElementsMap()\n      );\n      if (elementCenter) {\n        elementCenterX = elementCenter.x;\n        elementCenterY = elementCenter.y;\n      }\n      const distanceToCenter = Math.hypot(x - elementCenterX, y - elementCenterY);\n      const isSnappedToCenter = distanceToCenter < TEXT_TO_CENTER_SNAP_THRESHOLD;\n      if (isSnappedToCenter) {\n        const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n          { sceneX: elementCenterX, sceneY: elementCenterY },\n          appState\n        );\n        return { viewportX, viewportY, elementCenterX, elementCenterY };\n      }\n    }\n  }\n\n  private savePointer = (x: number, y: number, button: \"up\" | \"down\") => {\n    if (!x || !y) {\n      return;\n    }\n    const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n      { clientX: x, clientY: y },\n      this.state\n    );\n\n    if (isNaN(sceneX) || isNaN(sceneY)) {\n      // sometimes the pointer goes off screen\n    }\n\n    const pointer: CollaboratorPointer = {\n      x: sceneX,\n      y: sceneY,\n      tool: this.state.activeTool.type === \"laser\" ? \"laser\" : \"pointer\",\n    };\n\n    this.props.onPointerUpdate?.({\n      pointer,\n      button,\n      pointersMap: gesture.pointers,\n    });\n  };\n\n  private resetShouldCacheIgnoreZoomDebounced = debounce(() => {\n    if (!this.unmounted) {\n      this.setState({ shouldCacheIgnoreZoom: false });\n    }\n  }, 300);\n\n  private updateDOMRect = (cb?: () => void) => {\n    if (this.jsondrawContainerRef?.current) {\n      const jsondrawContainer = this.jsondrawContainerRef.current;\n      const {\n        width,\n        height,\n        left: offsetLeft,\n        top: offsetTop,\n      } = jsondrawContainer.getBoundingClientRect();\n      const {\n        width: currentWidth,\n        height: currentHeight,\n        offsetTop: currentOffsetTop,\n        offsetLeft: currentOffsetLeft,\n      } = this.state;\n\n      if (\n        width === currentWidth &&\n        height === currentHeight &&\n        offsetLeft === currentOffsetLeft &&\n        offsetTop === currentOffsetTop\n      ) {\n        if (cb) {\n          cb();\n        }\n        return;\n      }\n\n      this.setState(\n        {\n          width,\n          height,\n          offsetLeft,\n          offsetTop,\n        },\n        () => {\n          cb && cb();\n        }\n      );\n    }\n  };\n\n  public refresh = () => {\n    this.setState({ ...this.getCanvasOffsets() });\n  };\n\n  private getCanvasOffsets(): Pick<AppState, \"offsetTop\" | \"offsetLeft\"> {\n    if (this.jsondrawContainerRef?.current) {\n      const jsondrawContainer = this.jsondrawContainerRef.current;\n      const { left, top } = jsondrawContainer.getBoundingClientRect();\n      return {\n        offsetLeft: left,\n        offsetTop: top,\n      };\n    }\n    return {\n      offsetLeft: 0,\n      offsetTop: 0,\n    };\n  }\n\n  watchState = () => {};\n\n  private async updateLanguage() {\n    const currentLang = languages.find(lang => lang.code === this.props.langCode) || defaultLang;\n    await setLanguage(currentLang);\n    this.setAppState({});\n  }\n}\n\n// -----------------------------------------------------------------------------\n// TEST HOOKS\n// -----------------------------------------------------------------------------\ndeclare global {\n  interface Window {\n    h: {\n      scene: Scene;\n      elements: readonly JsonDrawElement[];\n      state: AppState;\n      setState: React.Component<any, AppState>[\"setState\"];\n      watchState: (prev: any, next: any) => void | undefined;\n      app: InstanceType<typeof App>;\n      history: History;\n      store: Store;\n    };\n  }\n}\n\nexport const createTestHook = () => {\n  if (isTestEnv() || isDevEnv()) {\n    window.h = window.h || ({} as Window[\"h\"]);\n\n    Object.defineProperties(window.h, {\n      elements: {\n        configurable: true,\n        get() {\n          return this.app?.scene.getElementsIncludingDeleted();\n        },\n        set(elements: JsonDrawElement[]) {\n          return this.app?.scene.replaceAllElements(syncInvalidIndices(elements));\n        },\n      },\n      scene: {\n        configurable: true,\n        get() {\n          return this.app?.scene;\n        },\n      },\n    });\n  }\n};\n\ncreateTestHook();\nexport default App;\n","import React, { useEffect, useState } from \"react\";\nimport type { Theme } from \"@jsondraw/element/types\";\nimport { defaultLang, languages, setLanguage } from \"../i18n\";\nimport type { Language } from \"../i18n\";\nimport { LoadingMessage } from \"./ui/LoadingMessage\";\n\ninterface Props {\n  langCode: Language[\"code\"];\n  children: React.ReactElement;\n  theme?: Theme;\n}\n\nexport const InitializeApp = (props: Props) => {\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const updateLang = async () => {\n      await setLanguage(currentLang);\n      setLoading(false);\n    };\n    const currentLang = languages.find(lang => lang.code === props.langCode) || defaultLang;\n    updateLang();\n  }, [props.langCode]);\n\n  return loading ? <LoadingMessage theme={props.theme} /> : props.children;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FooterCenter.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./FooterCenter.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import clsx from \"clsx\";\n\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useUIAppState } from \"../../context/ui-appState\";\n\nimport \"./FooterCenter.scss\";\n\nconst FooterCenter = ({ children }: { children?: React.ReactNode }) => {\n  const { FooterCenterTunnel } = useTunnels();\n  const appState = useUIAppState();\n  return (\n    <FooterCenterTunnel.In>\n      <div\n        className={clsx(\"footer-center zen-mode-transition\", {\n          \"layer-ui__wrapper__footer-left--transition-bottom\":\n            appState.zenModeEnabled,\n        })}\n      >\n        {children}\n      </div>\n    </FooterCenterTunnel.In>\n  );\n};\n\nexport default FooterCenter;\nFooterCenter.displayName = \"FooterCenter\";\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LiveCollaborationTrigger.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./LiveCollaborationTrigger.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { MQ_MIN_WIDTH_DESKTOP, type EditorInterface } from \"@jsondraw/common\";\nimport clsx from \"clsx\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { t } from \"../../i18n\";\nimport { share } from \"../icons\";\nimport { Button } from \"../ui/Button\";\nimport \"./LiveCollaborationTrigger.scss\";\n\nconst LiveCollaborationTrigger = ({\n  isCollaborating,\n  onSelect,\n  editorInterface,\n  ...rest\n}: {\n  isCollaborating: boolean;\n  onSelect: () => void;\n  editorInterface?: EditorInterface;\n} & React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  const appState = useUIAppState();\n\n  const showIconOnly =\n    editorInterface?.formFactor !== \"desktop\" || appState.width < MQ_MIN_WIDTH_DESKTOP;\n\n  return (\n    <Button\n      {...rest}\n      className={clsx(\"collab-button\", { active: isCollaborating })}\n      type=\"button\"\n      onSelect={onSelect}\n      style={{ position: \"relative\", width: showIconOnly ? undefined : \"auto\" }}\n      title={t(\"labels.liveCollaboration\")}\n    >\n      {showIconOnly ? share : t(\"labels.share\")}\n      {appState.collaborators.size > 0 && (\n        <div className=\"CollabButton-collaborators\">{appState.collaborators.size}</div>\n      )}\n    </Button>\n  );\n};\n\nexport default LiveCollaborationTrigger;\nLiveCollaborationTrigger.displayName = \"LiveCollaborationTrigger\";\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./JsonDrawLogo.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./JsonDrawLogo.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import \"./JsonDrawLogo.scss\";\n\nconst LogoIcon = () => (\n  <svg\n    viewBox=\"0 0 40 40\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"JsonDrawLogo-icon\"\n  >\n    <path\n      d=\"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nconst LogoText = () => (\n  <svg\n    viewBox=\"0 0 450 55\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    className=\"JsonDrawLogo-text\"\n  >\n    <path\n      d=\"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n    <path\n      d=\"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n    <path\n      d=\"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n    <path\n      d=\"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z\"\n      fill=\"currentColor\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n  </svg>\n);\n\ntype LogoSize = \"xs\" | \"small\" | \"normal\" | \"large\" | \"custom\" | \"mobile\";\n\ninterface LogoProps {\n  size?: LogoSize;\n  withText?: boolean;\n  style?: React.CSSProperties;\n  /**\n   * If true, the logo will not be wrapped in a Link component.\n   * The link prop will be ignored as well.\n   * It will merely be a plain div.\n   */\n  isNotLink?: boolean;\n}\n\nexport const JsonDrawLogo = ({\n  style,\n  size = \"small\",\n  withText,\n}: LogoProps) => {\n  return (\n    <div className={`JsonDrawLogo is-${size}`} style={style}>\n      <LogoIcon />\n      {withText && <LogoText />}\n    </div>\n  );\n};\n","import type { JSX } from \"react\";\nimport { actionLoadScene, actionShortcuts } from \"../../actions\";\nimport { getShortcutFromShortcutName } from \"../../actions/shortcuts\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { t, useI18n } from \"../../i18n\";\nimport { useEditorInterface, useJsonDrawActionManager } from \"../App\";\nimport { JsonDrawLogo } from \"../branding/JsonDrawLogo\";\nimport { HelpIcon, LoadIcon, usersIcon } from \"../icons\";\n\nconst WelcomeScreenMenuItemContent = ({\n  icon,\n  shortcut,\n  children,\n}: {\n  icon?: JSX.Element;\n  shortcut?: string | null;\n  children: React.ReactNode;\n}) => {\n  const editorInterface = useEditorInterface();\n  return (\n    <>\n      <div className=\"welcome-screen-menu-item__icon\">{icon}</div>\n      <div className=\"welcome-screen-menu-item__text\">{children}</div>\n      {shortcut && editorInterface.formFactor !== \"phone\" && (\n        <div className=\"welcome-screen-menu-item__shortcut\">{shortcut}</div>\n      )}\n    </>\n  );\n};\nWelcomeScreenMenuItemContent.displayName = \"WelcomeScreenMenuItemContent\";\n\nconst WelcomeScreenMenuItem = ({\n  onSelect,\n  children,\n  icon,\n  shortcut,\n  className = \"\",\n  ...props\n}: {\n  onSelect: () => void;\n  children: React.ReactNode;\n  icon?: JSX.Element;\n  shortcut?: string | null;\n} & React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  return (\n    <button\n      {...props}\n      type=\"button\"\n      className={`welcome-screen-menu-item ${className}`}\n      onClick={onSelect}\n    >\n      <WelcomeScreenMenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </WelcomeScreenMenuItemContent>\n    </button>\n  );\n};\nWelcomeScreenMenuItem.displayName = \"WelcomeScreenMenuItem\";\n\nconst WelcomeScreenMenuItemLink = ({\n  children,\n  href,\n  icon,\n  shortcut,\n  className = \"\",\n  ...props\n}: {\n  children: React.ReactNode;\n  href: string;\n  icon?: JSX.Element;\n  shortcut?: string | null;\n} & React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  return (\n    <a\n      {...props}\n      className={`welcome-screen-menu-item ${className}`}\n      href={href}\n      target=\"_blank\"\n      rel=\"noopener\"\n    >\n      <WelcomeScreenMenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </WelcomeScreenMenuItemContent>\n    </a>\n  );\n};\nWelcomeScreenMenuItemLink.displayName = \"WelcomeScreenMenuItemLink\";\n\nconst Center = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenCenterTunnel } = useTunnels();\n  return (\n    <WelcomeScreenCenterTunnel.In>\n      <div className=\"welcome-screen-center\">\n        {children || (\n          <>\n            <Logo />\n            <Heading>{t(\"welcomeScreen.defaults.center_heading\")}</Heading>\n            <Menu>\n              <MenuItemLoadScene />\n              <MenuItemHelp />\n            </Menu>\n          </>\n        )}\n      </div>\n    </WelcomeScreenCenterTunnel.In>\n  );\n};\nCenter.displayName = \"Center\";\n\nconst Logo = ({ children }: { children?: React.ReactNode }) => {\n  return (\n    <div className=\"welcome-screen-center__logo Excalifont welcome-screen-decor\">\n      {children || <JsonDrawLogo withText />}\n    </div>\n  );\n};\nLogo.displayName = \"Logo\";\n\nconst Heading = ({ children }: { children: React.ReactNode }) => {\n  return (\n    <div className=\"welcome-screen-center__heading welcome-screen-decor Excalifont\">{children}</div>\n  );\n};\nHeading.displayName = \"Heading\";\n\nconst Menu = ({ children }: { children?: React.ReactNode }) => {\n  return <div className=\"welcome-screen-menu\">{children}</div>;\n};\nMenu.displayName = \"Menu\";\n\nconst MenuItemHelp = () => {\n  const actionManager = useJsonDrawActionManager();\n\n  return (\n    <WelcomeScreenMenuItem\n      onSelect={() => actionManager.executeAction(actionShortcuts)}\n      shortcut=\"?\"\n      icon={HelpIcon}\n    >\n      {t(\"helpDialog.title\")}\n    </WelcomeScreenMenuItem>\n  );\n};\nMenuItemHelp.displayName = \"MenuItemHelp\";\n\nconst MenuItemLoadScene = () => {\n  const appState = useUIAppState();\n  const actionManager = useJsonDrawActionManager();\n\n  if (appState.viewModeEnabled) {\n    return null;\n  }\n\n  return (\n    <WelcomeScreenMenuItem\n      onSelect={() => actionManager.executeAction(actionLoadScene)}\n      shortcut={getShortcutFromShortcutName(\"loadScene\")}\n      icon={LoadIcon}\n    >\n      {t(\"buttons.load\")}\n    </WelcomeScreenMenuItem>\n  );\n};\nMenuItemLoadScene.displayName = \"MenuItemLoadScene\";\n\nconst MenuItemLiveCollaborationTrigger = ({ onSelect }: { onSelect: () => any }) => {\n  const { t } = useI18n();\n  return (\n    <WelcomeScreenMenuItem shortcut={null} onSelect={onSelect} icon={usersIcon}>\n      {t(\"labels.liveCollaboration\")}\n    </WelcomeScreenMenuItem>\n  );\n};\nMenuItemLiveCollaborationTrigger.displayName = \"MenuItemLiveCollaborationTrigger\";\n\n// -----------------------------------------------------------------------------\n\nCenter.Logo = Logo;\nCenter.Heading = Heading;\nCenter.Menu = Menu;\nCenter.MenuItem = WelcomeScreenMenuItem;\nCenter.MenuItemLink = WelcomeScreenMenuItemLink;\nCenter.MenuItemHelp = MenuItemHelp;\nCenter.MenuItemLoadScene = MenuItemLoadScene;\nCenter.MenuItemLiveCollaborationTrigger = MenuItemLiveCollaborationTrigger;\n\nexport { Center };\n","import { useTunnels } from \"../../context/tunnels\";\nimport { t } from \"../../i18n\";\nimport {\n  WelcomeScreenHelpArrow,\n  WelcomeScreenMenuArrow,\n  WelcomeScreenTopToolbarArrow,\n} from \"../icons\";\n\nconst MenuHint = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenMenuHintTunnel } = useTunnels();\n  return (\n    <WelcomeScreenMenuHintTunnel.In>\n      <div className=\"Excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu\">\n        {WelcomeScreenMenuArrow}\n        <div className=\"welcome-screen-decor-hint__label\">\n          {children || t(\"welcomeScreen.defaults.menuHint\")}\n        </div>\n      </div>\n    </WelcomeScreenMenuHintTunnel.In>\n  );\n};\nMenuHint.displayName = \"MenuHint\";\n\nconst ToolbarHint = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenToolbarHintTunnel } = useTunnels();\n  return (\n    <WelcomeScreenToolbarHintTunnel.In>\n      <div className=\"Excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar\">\n        <div className=\"welcome-screen-decor-hint__label\">\n          {children || t(\"welcomeScreen.defaults.toolbarHint\")}\n        </div>\n        {WelcomeScreenTopToolbarArrow}\n      </div>\n    </WelcomeScreenToolbarHintTunnel.In>\n  );\n};\nToolbarHint.displayName = \"ToolbarHint\";\n\nconst HelpHint = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenHelpHintTunnel } = useTunnels();\n  return (\n    <WelcomeScreenHelpHintTunnel.In>\n      <div className=\"Excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help\">\n        <div>{children || t(\"welcomeScreen.defaults.helpHint\")}</div>\n        {WelcomeScreenHelpArrow}\n      </div>\n    </WelcomeScreenHelpHintTunnel.In>\n  );\n};\nHelpHint.displayName = \"HelpHint\";\n\nexport { HelpHint, MenuHint, ToolbarHint };\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./WelcomeScreen.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./WelcomeScreen.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Center } from \"./WelcomeScreen.Center\";\nimport { MenuHint, ToolbarHint, HelpHint } from \"./WelcomeScreen.Hints\";\n\nimport \"./WelcomeScreen.scss\";\n\nconst WelcomeScreen = (props: { children?: React.ReactNode }) => {\n  return (\n    <>\n      {props.children || (\n        <>\n          <Center />\n          <MenuHint />\n          <ToolbarHint />\n          <HelpHint />\n        </>\n      )}\n    </>\n  );\n};\n\nWelcomeScreen.displayName = \"WelcomeScreen\";\n\nWelcomeScreen.Center = Center;\nWelcomeScreen.Hints = { MenuHint, ToolbarHint, HelpHint };\n\nexport default WelcomeScreen;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./app.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./app.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./fonts.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[9].oneOf[0].use[2]!./fonts.css\";\n       export default content && content.locals ? content.locals : undefined;\n","const polyfill = () => {\n  if (!Array.prototype.at) {\n    // Taken from https://github.com/tc39/proposal-relative-indexing-method#polyfill so that it works in tests\n    /* eslint-disable */\n    Object.defineProperty(Array.prototype, \"at\", {\n      value: function (n: number) {\n        // ToInteger() abstract op\n        n = Math.trunc(n) || 0;\n        // Allow negative indexing from the end\n        if (n < 0) {\n          n += this.length;\n        }\n        // OOB access is guaranteed to return undefined\n        if (n < 0 || n >= this.length) {\n          return undefined;\n        }\n        // Otherwise, this is just normal property access\n        return this[n];\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    });\n  }\n\n  if (!Element.prototype.replaceChildren) {\n    Element.prototype.replaceChildren = function (...nodes) {\n      this.innerHTML = \"\";\n      this.append(...nodes);\n    };\n  }\n};\nexport default polyfill;\n","import throttle from \"lodash.throttle\";\n\nimport { arrayToMap, isDevEnv, isTestEnv } from \"@jsondraw/common\";\n\nimport {\n  orderByFractionalIndex,\n  syncInvalidIndices,\n  validateFractionalIndices,\n} from \"@jsondraw/element\";\n\nimport type { OrderedJsonDrawElement } from \"@jsondraw/element/types\";\n\nimport type { MakeBrand } from \"@jsondraw/common/utility-types\";\n\nimport type { AppState } from \"../types\";\n\nexport type ReconciledJsonDrawElement = OrderedJsonDrawElement &\n  MakeBrand<\"ReconciledElement\">;\n\nexport type RemoteJsonDrawElement = OrderedJsonDrawElement &\n  MakeBrand<\"RemoteJsonDrawElement\">;\n\nexport const shouldDiscardRemoteElement = (\n  localAppState: AppState,\n  local: OrderedJsonDrawElement | undefined,\n  remote: RemoteJsonDrawElement,\n): boolean => {\n  if (\n    local &&\n    // local element is being edited\n    (local.id === localAppState.editingTextElement?.id ||\n      local.id === localAppState.resizingElement?.id ||\n      local.id === localAppState.newElement?.id ||\n      // local element is newer\n      local.version > remote.version ||\n      // resolve conflicting edits deterministically by taking the one with\n      // the lowest versionNonce\n      (local.version === remote.version &&\n        local.versionNonce <= remote.versionNonce))\n  ) {\n    return true;\n  }\n  return false;\n};\n\nconst validateIndicesThrottled = throttle(\n  (\n    orderedElements: readonly OrderedJsonDrawElement[],\n    localElements: readonly OrderedJsonDrawElement[],\n    remoteElements: readonly RemoteJsonDrawElement[],\n  ) => {\n    if (isDevEnv() || isTestEnv() || window?.DEBUG_FRACTIONAL_INDICES) {\n      // create new instances due to the mutation\n      const elements = syncInvalidIndices(\n        orderedElements.map((x) => ({ ...x })),\n      );\n\n      validateFractionalIndices(elements, {\n        // throw in dev & test only, to remain functional on `DEBUG_FRACTIONAL_INDICES`\n        shouldThrow: isTestEnv() || isDevEnv(),\n        includeBoundTextValidation: true,\n        reconciliationContext: {\n          localElements,\n          remoteElements,\n        },\n      });\n    }\n  },\n  1000 * 60,\n  { leading: true, trailing: false },\n);\n\nexport const reconcileElements = (\n  localElements: readonly OrderedJsonDrawElement[],\n  remoteElements: readonly RemoteJsonDrawElement[],\n  localAppState: AppState,\n): ReconciledJsonDrawElement[] => {\n  const localElementsMap = arrayToMap(localElements);\n  const reconciledElements: OrderedJsonDrawElement[] = [];\n  const added = new Set<string>();\n\n  // process remote elements\n  for (const remoteElement of remoteElements) {\n    if (!added.has(remoteElement.id)) {\n      const localElement = localElementsMap.get(remoteElement.id);\n      const discardRemoteElement = shouldDiscardRemoteElement(\n        localAppState,\n        localElement,\n        remoteElement,\n      );\n\n      if (localElement && discardRemoteElement) {\n        reconciledElements.push(localElement);\n        added.add(localElement.id);\n      } else {\n        reconciledElements.push(remoteElement);\n        added.add(remoteElement.id);\n      }\n    }\n  }\n\n  // process remaining local elements\n  for (const localElement of localElements) {\n    if (!added.has(localElement.id)) {\n      reconciledElements.push(localElement);\n      added.add(localElement.id);\n    }\n  }\n\n  const orderedElements = orderByFractionalIndex(reconciledElements);\n\n  validateIndicesThrottled(orderedElements, localElements, remoteElements);\n\n  // de-duplicate indices\n  syncInvalidIndices(orderedElements);\n\n  return orderedElements as ReconciledJsonDrawElement[];\n};\n","import { trackEvent } from \"../../analytics\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useI18n } from \"../../i18n\";\nimport { useJsonDrawSetAppState } from \"../App\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\nimport { brainIcon } from \"../icons\";\n\nimport type { JSX, ReactNode } from \"react\";\n\nexport const TTDDialogTrigger = ({\n  children,\n  icon,\n}: {\n  children?: ReactNode;\n  icon?: JSX.Element;\n}) => {\n  const { t } = useI18n();\n  const { TTDDialogTriggerTunnel } = useTunnels();\n  const setAppState = useJsonDrawSetAppState();\n\n  return (\n    <TTDDialogTriggerTunnel.In>\n      <DropdownMenu.Item\n        onSelect={() => {\n          trackEvent(\"ai\", \"dialog open\", \"ttd\");\n          setAppState({ openDialog: { name: \"ttd\", tab: \"text-to-diagram\" } });\n        }}\n        icon={icon ?? brainIcon}\n        badge={<DropdownMenu.Item.Badge>AI</DropdownMenu.Item.Badge>}\n      >\n        {children ?? t(\"labels.textToDiagram\")}\n      </DropdownMenu.Item>\n    </TTDDialogTriggerTunnel.In>\n  );\n};\nTTDDialogTrigger.displayName = \"TTDDialogTrigger\";\n","import { RequestError } from \"@jsondraw/jsondraw/errors\";\n\nimport type {\n  LLMMessage,\n  TTTDDialog,\n} from \"@jsondraw/jsondraw/components/TTDDialog/types\";\n\ninterface RateLimitInfo {\n  rateLimit?: number;\n  rateLimitRemaining?: number;\n}\n\ninterface StreamingOptions {\n  url: string;\n  messages: readonly LLMMessage[];\n  onChunk?: (chunk: string) => void;\n  extractRateLimits?: boolean;\n  signal?: AbortSignal;\n  onStreamCreated?: () => void;\n}\n\nexport type StreamChunk =\n  | {\n      type: \"content\";\n      delta: string;\n    }\n  | {\n      type: \"done\";\n      finishReason: \"stop\" | \"length\" | \"content_filter\" | \"tool_calls\" | null;\n    }\n  | {\n      type: \"error\";\n      error: {\n        message: string;\n        status?: number;\n      };\n    };\n\nfunction extractRateLimitHeaders(headers: Headers): RateLimitInfo {\n  const rateLimit = headers.get(\"X-Ratelimit-Limit\");\n  const rateLimitRemaining = headers.get(\"X-Ratelimit-Remaining\");\n\n  return {\n    rateLimit: rateLimit ? parseInt(rateLimit, 10) : undefined,\n    rateLimitRemaining: rateLimitRemaining\n      ? parseInt(rateLimitRemaining, 10)\n      : undefined,\n  };\n}\n\nasync function* parseSSEStream(\n  reader: ReadableStreamDefaultReader<Uint8Array>,\n): AsyncGenerator<string, void, unknown> {\n  const decoder = new TextDecoder();\n  let buffer = \"\";\n\n  try {\n    while (true) {\n      const { done, value } = await reader.read();\n\n      if (done) {\n        break;\n      }\n\n      buffer += decoder.decode(value, { stream: true });\n\n      const lines = buffer.split(\"\\n\");\n      buffer = lines.pop() || \"\";\n\n      for (const line of lines) {\n        const trimmedLine = line.trim();\n        if (!trimmedLine) {\n          continue;\n        }\n\n        if (trimmedLine.startsWith(\"data: \")) {\n          const data = trimmedLine.slice(6);\n          yield data;\n        }\n      }\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport async function TTDStreamFetch(\n  options: StreamingOptions,\n): Promise<TTTDDialog.OnTextSubmitRetValue> {\n  const {\n    url,\n    messages,\n    onChunk,\n    onStreamCreated,\n    extractRateLimits = true,\n    signal,\n  } = options;\n\n  try {\n    let fullResponse = \"\";\n    let rateLimitInfo: RateLimitInfo = {};\n    let error: RequestError | null = null;\n\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"text/event-stream\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ messages }),\n      signal,\n    });\n\n    if (extractRateLimits) {\n      rateLimitInfo = extractRateLimitHeaders(response.headers);\n    }\n\n    if (!response.ok) {\n      if (response.status === 429) {\n        return {\n          ...rateLimitInfo,\n          error: new RequestError({\n            message: \"Rate limit exceeded\",\n            status: 429,\n          }),\n        };\n      }\n\n      const text = await response.text();\n      throw new RequestError({\n        message: text || \"Generation failed...\",\n        status: response.status,\n      });\n    }\n\n    const reader = response.body?.getReader();\n\n    if (!reader) {\n      throw new RequestError({\n        message: \"Couldn't get reader from response body\",\n        status: 500,\n      });\n    }\n\n    onStreamCreated?.();\n\n    try {\n      for await (const data of parseSSEStream(reader)) {\n        if (data === \"[DONE]\") {\n          break;\n        }\n\n        try {\n          const chunk: StreamChunk = JSON.parse(data);\n\n          if (chunk === null) {\n            break;\n          }\n\n          switch (chunk.type) {\n            case \"content\": {\n              const delta = chunk.delta;\n              if (delta) {\n                fullResponse += delta;\n                onChunk?.(delta);\n              }\n              break;\n            }\n            case \"error\":\n              error = new RequestError({\n                message: chunk.error.message,\n                status: 500,\n              });\n              break;\n            case \"done\":\n              break;\n          }\n        } catch (e) {\n          console.warn(\"Failed to parse SSE data:\", data, e);\n        }\n      }\n    } catch (streamError: any) {\n      if (streamError.name === \"AbortError\") {\n        error = new RequestError({ message: \"Request aborted\", status: 499 });\n      } else {\n        error = new RequestError({\n          message: streamError.message || \"Streaming error\",\n          status: 500,\n        });\n      }\n    }\n\n    if (error) {\n      return {\n        ...rateLimitInfo,\n        error,\n      };\n    }\n\n    if (!fullResponse) {\n      return {\n        ...rateLimitInfo,\n        error: new RequestError({\n          message: \"Generation failed...\",\n          status: response.status,\n        }),\n      };\n    }\n\n    return {\n      generatedResponse: fullResponse,\n      error: null,\n      ...rateLimitInfo,\n    };\n  } catch (err: any) {\n    if (err.name === \"AbortError\") {\n      return {\n        error: new RequestError({ message: \"Request aborted\", status: 499 }),\n      };\n    }\n    return {\n      error: new RequestError({\n        message: err.message || \"Request failed\",\n        status: 500,\n      }),\n    };\n  }\n}\n","import { useLayoutEffect } from \"react\";\n\nimport { useApp } from \"../App\";\n\nimport type { GenerateDiagramToCode } from \"../../types\";\n\nexport const DiagramToCodePlugin = (props: {\n  generate: GenerateDiagramToCode;\n}) => {\n  const app = useApp();\n\n  useLayoutEffect(() => {\n    app.setPlugins({\n      diagramToCode: { generate: props.generate },\n    });\n  }, [app, props.generate]);\n\n  return null;\n};\n","import React, { useEffect } from \"react\";\nimport { DEFAULT_UI_OPTIONS, isShallowEqual } from \"@jsondraw/common\";\nimport App from \"./components/App\";\nimport { InitializeApp } from \"./components/InitializeApp\";\nimport Footer from \"./components/footer/FooterCenter\";\nimport LiveCollaborationTrigger from \"./components/live-collaboration/LiveCollaborationTrigger\";\nimport MainMenu from \"./components/main-menu/MainMenu\";\nimport WelcomeScreen from \"./components/welcome-screen/WelcomeScreen\";\nimport \"./css/app.scss\";\nimport \"./css/styles.scss\";\nimport { EditorJotaiProvider, editorJotaiStore } from \"./editor-jotai\";\nimport \"./fonts/fonts.css\";\nimport { defaultLang } from \"./i18n\";\nimport polyfill from \"./polyfill\";\nimport type { AppProps, JsonDrawProps } from \"./types\";\n\npolyfill();\n\nconst JsonDrawBase = (props: JsonDrawProps) => {\n  const {\n    onChange,\n    onIncrement,\n    initialData,\n    jsondrawAPI,\n    isCollaborating = false,\n    onPointerUpdate,\n    renderTopLeftUI,\n    renderTopRightUI,\n    langCode = defaultLang.code,\n    viewModeEnabled,\n    zenModeEnabled,\n    gridModeEnabled,\n    libraryReturnUrl,\n    theme,\n    name,\n    renderCustomStats,\n    onPaste,\n    detectScroll = true,\n    handleKeyboardGlobally = false,\n    onLibraryChange,\n    autoFocus = false,\n    generateIdForFile,\n    onLinkOpen,\n    generateLinkForSelection,\n    onPointerDown,\n    onPointerUp,\n    onScrollChange,\n    onDuplicate,\n    children,\n    validateEmbeddable,\n    renderEmbeddable,\n    aiEnabled,\n    showDeprecatedFonts,\n    renderScrollbars,\n  } = props;\n\n  const canvasActions = props.UIOptions?.canvasActions;\n\n  // FIXME normalize/set defaults in parent component so that the memo resolver\n  // compares the same values\n  const UIOptions: AppProps[\"UIOptions\"] = {\n    ...props.UIOptions,\n    canvasActions: {\n      ...DEFAULT_UI_OPTIONS.canvasActions,\n      ...canvasActions,\n    },\n    tools: {\n      image: props.UIOptions?.tools?.image ?? true,\n    },\n  };\n\n  if (canvasActions?.export) {\n    UIOptions.canvasActions.export.saveFileToDisk =\n      canvasActions.export?.saveFileToDisk ??\n      DEFAULT_UI_OPTIONS.canvasActions.export.saveFileToDisk;\n  }\n\n  if (UIOptions.canvasActions.toggleTheme === null && typeof theme === \"undefined\") {\n    UIOptions.canvasActions.toggleTheme = true;\n  }\n\n  useEffect(() => {\n    const importPolyfill = async () => {\n      //@ts-ignore\n      await import(\"canvas-roundrect-polyfill\");\n    };\n\n    importPolyfill();\n\n    // Block pinch-zooming on iOS outside of the content area\n    const handleTouchMove = (event: TouchEvent) => {\n      // @ts-ignore\n      if (typeof event.scale === \"number\" && event.scale !== 1) {\n        event.preventDefault();\n      }\n    };\n\n    document.addEventListener(\"touchmove\", handleTouchMove, {\n      passive: false,\n    });\n\n    return () => {\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n    };\n  }, []);\n\n  return (\n    <EditorJotaiProvider store={editorJotaiStore}>\n      <InitializeApp langCode={langCode} theme={theme}>\n        <App\n          onChange={onChange}\n          onIncrement={onIncrement}\n          initialData={initialData}\n          jsondrawAPI={jsondrawAPI}\n          isCollaborating={isCollaborating}\n          onPointerUpdate={onPointerUpdate}\n          renderTopLeftUI={renderTopLeftUI}\n          renderTopRightUI={renderTopRightUI}\n          langCode={langCode}\n          viewModeEnabled={viewModeEnabled}\n          zenModeEnabled={zenModeEnabled}\n          gridModeEnabled={gridModeEnabled}\n          libraryReturnUrl={libraryReturnUrl}\n          theme={theme}\n          name={name}\n          renderCustomStats={renderCustomStats}\n          UIOptions={UIOptions}\n          onPaste={onPaste}\n          detectScroll={detectScroll}\n          handleKeyboardGlobally={handleKeyboardGlobally}\n          onLibraryChange={onLibraryChange}\n          autoFocus={autoFocus}\n          generateIdForFile={generateIdForFile}\n          onLinkOpen={onLinkOpen}\n          generateLinkForSelection={generateLinkForSelection}\n          onPointerDown={onPointerDown}\n          onPointerUp={onPointerUp}\n          onScrollChange={onScrollChange}\n          onDuplicate={onDuplicate}\n          validateEmbeddable={validateEmbeddable}\n          renderEmbeddable={renderEmbeddable}\n          aiEnabled={aiEnabled !== false}\n          showDeprecatedFonts={showDeprecatedFonts}\n          renderScrollbars={renderScrollbars}\n        >\n          {children}\n        </App>\n      </InitializeApp>\n    </EditorJotaiProvider>\n  );\n};\n\nconst areEqual = (prevProps: JsonDrawProps, nextProps: JsonDrawProps) => {\n  // short-circuit early\n  if (prevProps.children !== nextProps.children) {\n    return false;\n  }\n\n  const { initialData: prevInitialData, UIOptions: prevUIOptions = {}, ...prev } = prevProps;\n  const { initialData: nextInitialData, UIOptions: nextUIOptions = {}, ...next } = nextProps;\n\n  // comparing UIOptions\n  const prevUIOptionsKeys = Object.keys(prevUIOptions) as (keyof Partial<\n    typeof DEFAULT_UI_OPTIONS\n  >)[];\n  const nextUIOptionsKeys = Object.keys(nextUIOptions) as (keyof Partial<\n    typeof DEFAULT_UI_OPTIONS\n  >)[];\n\n  if (prevUIOptionsKeys.length !== nextUIOptionsKeys.length) {\n    return false;\n  }\n\n  const isUIOptionsSame = prevUIOptionsKeys.every(key => {\n    if (key === \"getFormFactor\") {\n      return true;\n    }\n    if (key === \"canvasActions\") {\n      const canvasOptionKeys = Object.keys(prevUIOptions.canvasActions!) as (keyof Partial<\n        typeof DEFAULT_UI_OPTIONS.canvasActions\n      >)[];\n      return canvasOptionKeys.every(key => {\n        if (\n          key === \"export\" &&\n          prevUIOptions?.canvasActions?.export &&\n          nextUIOptions?.canvasActions?.export\n        ) {\n          return (\n            prevUIOptions.canvasActions.export.saveFileToDisk ===\n            nextUIOptions.canvasActions.export.saveFileToDisk\n          );\n        }\n        return prevUIOptions?.canvasActions?.[key] === nextUIOptions?.canvasActions?.[key];\n      });\n    }\n    return prevUIOptions[key] === nextUIOptions[key];\n  });\n\n  return isUIOptionsSame && isShallowEqual(prev, next);\n};\n\nexport const JsonDraw = React.memo(JsonDrawBase, areEqual);\nJsonDraw.displayName = \"JsonDraw\";\n\nexport {\n  getSceneVersion,\n  hashElementsVersion,\n  hashString,\n  getNonDeletedElements,\n} from \"@jsondraw/element\";\n\nexport { getTextFromElements } from \"@jsondraw/element\";\nexport { isInvisiblySmallElement } from \"@jsondraw/element\";\n\nexport { defaultLang, useI18n, languages } from \"./i18n\";\nexport {\n  restoreAppState,\n  restoreElement,\n  restoreElements,\n  restoreLibraryItems,\n} from \"./data/restore\";\n\nexport { reconcileElements } from \"./data/reconcile\";\n\nexport {\n  exportToCanvas,\n  exportToBlob,\n  exportToSvg,\n  exportToClipboard,\n} from \"@jsondraw/utils/export\";\n\nexport { serializeAsJSON, serializeLibraryAsJSON } from \"./data/json\";\nexport { loadFromBlob, loadSceneOrLibraryFromBlob, loadLibraryFromBlob } from \"./data/blob\";\nexport { mergeLibraryItems, getLibraryItemsHash } from \"./data/library\";\nexport { isLinearElement } from \"@jsondraw/element\";\n\nexport {\n  FONT_FAMILY,\n  THEME,\n  MIME_TYPES,\n  ROUNDNESS,\n  DEFAULT_LASER_COLOR,\n  UserIdleState,\n  normalizeLink,\n  sceneCoordsToViewportCoords,\n  viewportCoordsToSceneCoords,\n  getFormFactor,\n} from \"@jsondraw/common\";\n\nexport { mutateElement, newElementWith, bumpVersion } from \"@jsondraw/element\";\n\nexport { CaptureUpdateAction } from \"@jsondraw/element\";\n\nexport { parseLibraryTokensFromUrl, useHandleLibrary } from \"./data/library\";\n\nexport { Sidebar } from \"./components/Sidebar/Sidebar\";\nexport { Button } from \"./components/ui/Button\";\nexport { Footer };\nexport { MainMenu };\nexport { Ellipsify } from \"./components/ui/Ellipsify\";\nexport { useEditorInterface, useStylesPanelMode } from \"./components/App\";\nexport { WelcomeScreen };\nexport { LiveCollaborationTrigger };\nexport { Stats } from \"./components/Stats\";\n\nexport { DefaultSidebar } from \"./components/layout/DefaultSidebar\";\nexport { TTDDialog } from \"./components/TTDDialog/TTDDialog\";\nexport { TTDDialogTrigger } from \"./components/TTDDialog/TTDDialogTrigger\";\nexport { TTDStreamFetch } from \"./components/TTDDialog/utils/TTDStreamFetch\";\nexport type { TTDPersistenceAdapter, SavedChat, SavedChats } from \"./components/TTDDialog/types\";\n\nexport { zoomToFitBounds } from \"./actions/actionCanvas\";\nexport {\n  getCommonBounds,\n  getVisibleSceneBounds,\n  convertToJsonDrawElements,\n} from \"@jsondraw/element\";\n\nexport {\n  elementsOverlappingBBox,\n  isElementInsideBBox,\n  elementPartiallyOverlapsWithOrContainsBBox,\n} from \"@jsondraw/utils/withinBounds\";\n\nexport { DiagramToCodePlugin } from \"./components/DiagramToCodePlugin/DiagramToCodePlugin\";\nexport { getDataURL } from \"./data/blob\";\nexport { isElementLink } from \"@jsondraw/element\";\n\nexport { setCustomTextMetricsProvider } from \"@jsondraw/element\";\n\nexport { CommandPalette } from \"./components/CommandPalette/CommandPalette\";\n","// src/jsondraw/index.ts\n// Public API gateway  Json-viz imports JsonDraw only through this file\n\nexport { JsonDraw } from \"./packages/jsondraw\";\nexport type {\n  JsonDrawImperativeAPI,\n  AppState,\n  BinaryFiles,\n  JsonDrawInitialDataState,\n  JsonDrawProps,\n} from \"./packages/jsondraw/types\";\nexport type { JsonDrawElement, JsonDrawArrowElement } from \"./packages/element/types\";\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .ConvertElementTypePopup{display:flex;flex-wrap:wrap;justify-content:center;gap:.2rem;border-radius:.5rem;background:var(--island-bg-color);box-shadow:var(--shadow-island);padding:.5rem}.jsondraw .ConvertElementTypePopup:focus{outline:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/popups/ConvertElementTypePopup.scss\"],\"names\":[],\"mappings\":\"AAGE,mCACE,YAAA,CACA,cAAA,CACA,sBAAA,CACA,SAAA,CACA,mBAAA,CACA,iCAAA,CACA,+BAAA,CACA,aAAA,CAEA,yCACE,YAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .ConvertElementTypePopup {\\n    display: flex;\\n    flex-wrap: wrap;\\n    justify-content: center;\\n    gap: 0.2rem;\\n    border-radius: 0.5rem;\\n    background: var(--island-bg-color);\\n    box-shadow: var(--shadow-island);\\n    padding: 0.5rem;\\n\\n    &:focus {\\n      outline: none;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--avatar-size: 1.75rem;--avatarList-gap: 0.625rem;--userList-padding: var(--space-factor);--userlist-hint-bg-color: var(--color-gray-10);--userlist-hint-heading-color: var(--color-gray-80);--userlist-hint-text-color: var(--color-gray-60);--userlist-collaborators-border-color: var(--color-gray-20)}.jsondraw.theme--dark{--userlist-hint-bg-color: var(--color-gray-90);--userlist-hint-heading-color: var(--color-gray-30);--userlist-hint-text-color: var(--color-gray-40);--userlist-collaborators-border-color: var(--color-gray-80)}.jsondraw .UserList__wrapper{display:flex;width:100%;justify-content:flex-end;align-items:center;pointer-events:none !important}.jsondraw .UserList{pointer-events:none;padding:var(--userList-padding);display:flex;flex-wrap:wrap;justify-content:flex-end;align-items:center;gap:var(--avatarList-gap);box-sizing:border-box;--max-size: calc( var(--avatar-size) * var(--max-avatars, 2) + var(--avatarList-gap) * (var(--max-avatars, 2) - 1) + var(--userList-padding) * 2 );max-height:var(--max-size);max-width:var(--max-size)}.jsondraw .UserList>*{pointer-events:var(--ui-pointerEvents)}.jsondraw .UserList_mobile{padding:0;justify-content:normal;margin:.5rem 0;max-width:none;max-height:none}.jsondraw .UserList__more{width:var(--avatar-size, 1.5rem);height:var(--avatar-size, 1.5rem);position:relative;border-radius:100%;outline-offset:2px;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:.75rem;font-weight:700;line-height:1;color:var(--color-gray-90);flex:0 0 auto}.jsondraw .UserList__more:active{transform:scale(0.94)}.jsondraw .UserList__more-img{width:100%;height:100%;border-radius:100%}.jsondraw .UserList__more::before{content:\"\";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;border-radius:100%}.jsondraw .UserList__more.is-followed::before{border-color:var(--color-primary-hover);box-shadow:0 0 0 1px var(--color-primary-hover)}.jsondraw .UserList__more.is-current-user{cursor:auto}.jsondraw .UserList__more{background-color:var(--color-gray-20);border:0 !important;font-size:.625rem;font-weight:400;flex-shrink:0;color:var(--color-gray-100);font-weight:bold}.jsondraw .UserList__collaborator-name{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.jsondraw .UserList__collaborator--avatar-only{position:relative;display:flex;flex:0 0 auto}.jsondraw .UserList__collaborator--avatar-only .UserList__collaborator-status-icon{--size: 14px;position:absolute;display:flex;flex:0 0 auto;bottom:-0.25rem;right:-0.25rem;width:var(--size);height:var(--size)}.jsondraw .UserList__collaborator--avatar-only .UserList__collaborator-status-icon svg{flex:0 0 auto;width:var(--size);height:var(--size)}.jsondraw .UserList__collaborator-status-icons{margin-left:auto;flex:0 0 auto;min-width:2.25rem;gap:.25rem;justify-content:flex-end;display:flex}.jsondraw .UserList__collaborator.is-muted .UserList__collaborator-status-icon-microphone-muted{color:var(--color-danger);filter:drop-shadow(0px 0px 0px rgba(0, 0, 0, 0.5))}.jsondraw .UserList__collaborator-status-icon-speaking-indicator{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between;width:1rem;padding:0 3px;box-sizing:border-box}.jsondraw .UserList__collaborator-status-icon-speaking-indicator div{width:.125rem;height:.4rem;background-color:#a2f1a6}.jsondraw .UserList__collaborator-status-icon-speaking-indicator div:nth-of-type(1){animation:speaking-indicator-anim 1s -0.45s ease-in-out infinite}.jsondraw .UserList__collaborator-status-icon-speaking-indicator div:nth-of-type(2){animation:speaking-indicator-anim 1s -0.9s ease-in-out infinite}.jsondraw .UserList__collaborator-status-icon-speaking-indicator div:nth-of-type(3){animation:speaking-indicator-anim 1s -0.15s ease-in-out infinite}@keyframes speaking-indicator-anim{0%,100%{transform:scaleY(1)}50%{transform:scaleY(2)}}.jsondraw .UserList__collaborators{top:auto;max-height:50vh}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/user/UserList.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,sBAAA,CACA,0BAAA,CACA,uCAAA,CAEA,8CAAA,CACA,mDAAA,CACA,gDAAA,CACA,2DAAA,CAEA,sBACE,8CAAA,CACA,mDAAA,CACA,gDAAA,CACA,2DAAA,CAGF,6BACE,YAAA,CACA,UAAA,CACA,wBAAA,CACA,kBAAA,CACA,8BAAA,CAGF,oBACE,mBAAA,CACA,+BAAA,CACA,YAAA,CACA,cAAA,CACA,wBAAA,CACA,kBAAA,CACA,yBAAA,CAEA,qBAAA,CAEA,kJAAA,CAMA,0BAAA,CACA,yBAAA,CAKF,sBACE,sCAAA,CAGF,2BACE,SAAA,CACA,sBAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,0BCgHA,gCAAA,CACA,iCAAA,CACA,iBAAA,CACA,kBAAA,CACA,kBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,cAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CACA,0BAAA,CACA,aAAA,CAEA,iCACE,qBAAA,CAGF,8BACE,UAAA,CACA,WAAA,CACA,kBAAA,CAGF,kCACE,UAAA,CACA,iBAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,kBAAA,CAGF,8CACE,uCAAA,CACA,+CAAA,CAEF,0CACE,WAAA,CDrJA,0BACE,qCAAA,CACA,mBAAA,CACA,iBAAA,CACA,eAAA,CACA,aAAA,CACA,2BAAA,CACA,gBAAA,CAIJ,uCACE,sBAAA,CACA,eAAA,CACA,kBAAA,CAGF,+CACE,iBAAA,CACA,YAAA,CACA,aAAA,CACA,mFACE,YAAA,CACA,iBAAA,CACA,YAAA,CACA,aAAA,CACA,eAAA,CACA,cAAA,CACA,iBAAA,CACA,kBAAA,CACA,uFACE,aAAA,CACA,iBAAA,CACA,kBAAA,CAKN,+CACE,gBAAA,CACA,aAAA,CACA,iBAAA,CACA,UAAA,CACA,wBAAA,CACA,YAAA,CAGF,gGACE,yBAAA,CACA,kDAAA,CAGF,iEACE,YAAA,CACA,oBAAA,CACA,kBAAA,CACA,6BAAA,CACA,UAAA,CACA,aAAA,CACA,qBAAA,CAEA,qEACE,aAAA,CACA,YAAA,CAEA,wBAAA,CAGF,oFACE,gEAAA,CAGF,oFACE,+DAAA,CAGF,oFACE,gEAAA,CAIJ,mCACE,QAEE,mBAAA,CAGF,IACE,mBAAA,CAAA,CAIJ,mCACE,QAAA,CACA,eAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --avatar-size: 1.75rem;\\n  --avatarList-gap: 0.625rem;\\n  --userList-padding: var(--space-factor);\\n\\n  --userlist-hint-bg-color: var(--color-gray-10);\\n  --userlist-hint-heading-color: var(--color-gray-80);\\n  --userlist-hint-text-color: var(--color-gray-60);\\n  --userlist-collaborators-border-color: var(--color-gray-20);\\n\\n  &.theme--dark {\\n    --userlist-hint-bg-color: var(--color-gray-90);\\n    --userlist-hint-heading-color: var(--color-gray-30);\\n    --userlist-hint-text-color: var(--color-gray-40);\\n    --userlist-collaborators-border-color: var(--color-gray-80);\\n  }\\n\\n  .UserList__wrapper {\\n    display: flex;\\n    width: 100%;\\n    justify-content: flex-end;\\n    align-items: center;\\n    pointer-events: none !important;\\n  }\\n\\n  .UserList {\\n    pointer-events: none;\\n    padding: var(--userList-padding);\\n    display: flex;\\n    flex-wrap: wrap;\\n    justify-content: flex-end;\\n    align-items: center;\\n    gap: var(--avatarList-gap);\\n\\n    box-sizing: border-box;\\n\\n    --max-size: calc(\\n      var(--avatar-size) * var(--max-avatars, 2) + var(--avatarList-gap) *\\n        (var(--max-avatars, 2) - 1) + var(--userList-padding) * 2\\n    );\\n\\n    // max width & height set to fix the max-avatars\\n    max-height: var(--max-size);\\n    max-width: var(--max-size);\\n\\n    // Tweak in 30px increments to fit more/fewer avatars in a row/column ^^\\n  }\\n\\n  .UserList > * {\\n    pointer-events: var(--ui-pointerEvents);\\n  }\\n\\n  .UserList_mobile {\\n    padding: 0;\\n    justify-content: normal;\\n    margin: 0.5rem 0;\\n    max-width: none;\\n    max-height: none;\\n  }\\n\\n  .UserList__more {\\n    @include avatarStyles;\\n\\n    & {\\n      background-color: var(--color-gray-20);\\n      border: 0 !important;\\n      font-size: 0.625rem;\\n      font-weight: 400;\\n      flex-shrink: 0;\\n      color: var(--color-gray-100);\\n      font-weight: bold;\\n    }\\n  }\\n\\n  .UserList__collaborator-name {\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n  }\\n\\n  .UserList__collaborator--avatar-only {\\n    position: relative;\\n    display: flex;\\n    flex: 0 0 auto;\\n    .UserList__collaborator-status-icon {\\n      --size: 14px;\\n      position: absolute;\\n      display: flex;\\n      flex: 0 0 auto;\\n      bottom: -0.25rem;\\n      right: -0.25rem;\\n      width: var(--size);\\n      height: var(--size);\\n      svg {\\n        flex: 0 0 auto;\\n        width: var(--size);\\n        height: var(--size);\\n      }\\n    }\\n  }\\n\\n  .UserList__collaborator-status-icons {\\n    margin-left: auto;\\n    flex: 0 0 auto;\\n    min-width: 2.25rem;\\n    gap: 0.25rem;\\n    justify-content: flex-end;\\n    display: flex;\\n  }\\n\\n  .UserList__collaborator.is-muted .UserList__collaborator-status-icon-microphone-muted {\\n    color: var(--color-danger);\\n    filter: drop-shadow(0px 0px 0px rgba(0, 0, 0, 0.5));\\n  }\\n\\n  .UserList__collaborator-status-icon-speaking-indicator {\\n    display: flex;\\n    flex-flow: row nowrap;\\n    align-items: center;\\n    justify-content: space-between;\\n    width: 1rem;\\n    padding: 0 3px;\\n    box-sizing: border-box;\\n\\n    div {\\n      width: 0.125rem;\\n      height: 0.4rem;\\n      // keep this in sync with constants.ts\\n      background-color: #a2f1a6;\\n    }\\n\\n    div:nth-of-type(1) {\\n      animation: speaking-indicator-anim 1s -0.45s ease-in-out infinite;\\n    }\\n\\n    div:nth-of-type(2) {\\n      animation: speaking-indicator-anim 1s -0.9s ease-in-out infinite;\\n    }\\n\\n    div:nth-of-type(3) {\\n      animation: speaking-indicator-anim 1s -0.15s ease-in-out infinite;\\n    }\\n  }\\n\\n  @keyframes speaking-indicator-anim {\\n    0%,\\n    100% {\\n      transform: scaleY(1);\\n    }\\n\\n    50% {\\n      transform: scaleY(2);\\n    }\\n  }\\n\\n  .UserList__collaborators {\\n    top: auto;\\n    max-height: 50vh;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .library-unit{align-items:center;border:1px solid rgba(0,0,0,0);display:flex;justify-content:center;position:relative;width:55px;height:55px;box-sizing:border-box;border-radius:var(--border-radius-lg)}.jsondraw .library-unit svg{pointer-events:none}.jsondraw .library-unit--hover{background-color:var(--color-surface-mid)}.jsondraw .library-unit:active:not(:has(.library-unit__checkbox:hover)),.jsondraw .library-unit--selected{background-color:var(--color-surface-high)}.jsondraw .library-unit--skeleton{opacity:.5;background:linear-gradient(-45deg, var(--color-gray-10), var(--color-gray-20), var(--color-gray-10));background-size:200% 200%;animation:library-unit__skeleton-opacity-animation .2s linear}.jsondraw.theme--dark .library-unit--skeleton{background-image:linear-gradient(-45deg, var(--color-gray-100), var(--color-gray-80), var(--color-gray-100))}.jsondraw .library-unit__dragger{display:flex;align-items:center;justify-content:center;height:100%;width:100%}.jsondraw .library-unit__dragger>svg{filter:var(--theme-filter);flex-grow:1;max-height:100%;max-width:100%}.jsondraw .library-unit__checkbox-container,.jsondraw .library-unit__checkbox-container:hover,.jsondraw .library-unit__checkbox-container:active{align-items:center;background:none;border:none;color:var(--icon-fill-color);display:flex;justify-content:center;margin:0;padding:.5rem;position:absolute;left:2rem;bottom:2rem;cursor:pointer}.jsondraw .library-unit__checkbox-container input,.jsondraw .library-unit__checkbox-container:hover input,.jsondraw .library-unit__checkbox-container:active input{cursor:pointer}.jsondraw .library-unit__checkbox{position:absolute;top:.125rem;right:.125rem;margin:0}.jsondraw .library-unit__checkbox .Checkbox-box{margin:0;width:1rem;height:1rem;border-radius:4px;background-color:var(--color-primary-light);border:1px solid var(--color-primary);box-shadow:none !important;padding:2px}.jsondraw .library-unit__checkbox.Checkbox:hover .Checkbox-box{background-color:var(--color-primary-light)}.jsondraw .library-unit__checkbox.is-checked .Checkbox-box{background-color:var(--color-primary) !important}.jsondraw .library-unit__checkbox.is-checked .Checkbox-box svg{color:var(--color-primary-light)}.jsondraw .library-unit__removeFromLibrary>svg{height:16px;width:16px}.jsondraw .library-unit__adder{transform:scale(1);animation:library-unit__adder-animation 1s ease-in infinite;position:absolute;width:1.5rem;height:1.5rem;background-color:var(--color-primary);border-radius:var(--border-radius-md);display:flex;justify-content:center;align-items:center;pointer-events:none}.jsondraw .library-unit__adder svg{color:var(--color-primary-light);width:1rem;height:1rem}.jsondraw .library-unit:active .library-unit__adder{animation:none;transform:scale(0.8)}.jsondraw .library-unit__active{cursor:pointer}@keyframes library-unit__adder-animation{0%{transform:scale(0.85)}50%{transform:scale(1)}100%{transform:scale(0.85)}}@keyframes library-unit__skeleton-opacity-animation{0%{opacity:0}75%{opacity:0}100%{opacity:.5}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/library/LibraryUnit.scss\"],\"names\":[],\"mappings\":\"AAGE,wBACE,kBAAA,CACA,8BAAA,CACA,YAAA,CACA,sBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,qCAAA,CAEA,4BAEE,mBAAA,CAGF,+BACE,yCAAA,CAGF,0GAEE,0CAAA,CAGF,kCACE,UAAA,CACA,oGAAA,CAMA,yBAAA,CACA,6DAAA,CAIJ,8CACE,4GAAA,CAQF,iCACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,UAAA,CAGF,qCACE,0BAAA,CACA,WAAA,CACA,eAAA,CACA,cAAA,CAGF,iJAGE,kBAAA,CACA,eAAA,CACA,WAAA,CACA,4BAAA,CACA,YAAA,CACA,sBAAA,CACA,QAAA,CACA,aAAA,CACA,iBAAA,CACA,SAAA,CACA,WAAA,CACA,cAAA,CAEA,mKACE,cAAA,CAIJ,kCACE,iBAAA,CACA,WAAA,CACA,aAAA,CACA,QAAA,CAEA,gDACE,QAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,2CAAA,CACA,qCAAA,CACA,0BAAA,CACA,WAAA,CAIA,+DACE,2CAAA,CAKF,2DACE,gDAAA,CAEA,+DACE,gCAAA,CAMR,+CACE,WAAA,CACA,UAAA,CAGF,+BACE,kBAAA,CACA,2DAAA,CAEA,iBAAA,CACA,YAAA,CACA,aAAA,CACA,qCAAA,CACA,qCAAA,CAEA,YAAA,CACA,sBAAA,CACA,kBAAA,CAEA,mBAAA,CAEA,mCACE,gCAAA,CACA,UAAA,CACA,WAAA,CAIJ,oDACE,cAAA,CACA,oBAAA,CAGF,gCACE,cAAA,CAGF,yCACE,GACE,qBAAA,CAGF,IACE,kBAAA,CAGF,KACE,qBAAA,CAAA,CAIJ,oDACE,GACE,SAAA,CAGF,IACE,SAAA,CAGF,KACE,UAAA,CAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .library-unit {\\n    align-items: center;\\n    border: 1px solid transparent;\\n    display: flex;\\n    justify-content: center;\\n    position: relative;\\n    width: 55px;\\n    height: 55px;\\n    box-sizing: border-box;\\n    border-radius: var(--border-radius-lg);\\n\\n    svg {\\n      // to prevent clicks on links and such\\n      pointer-events: none;\\n    }\\n\\n    &--hover {\\n      background-color: var(--color-surface-mid);\\n    }\\n\\n    &:active:not(:has(.library-unit__checkbox:hover)),\\n    &--selected {\\n      background-color: var(--color-surface-high);\\n    }\\n\\n    &--skeleton {\\n      opacity: 0.5;\\n      background: linear-gradient(\\n        -45deg,\\n        var(--color-gray-10),\\n        var(--color-gray-20),\\n        var(--color-gray-10)\\n      );\\n      background-size: 200% 200%;\\n      animation: library-unit__skeleton-opacity-animation 0.2s linear;\\n    }\\n  }\\n\\n  &.theme--dark .library-unit--skeleton {\\n    background-image: linear-gradient(\\n      -45deg,\\n      var(--color-gray-100),\\n      var(--color-gray-80),\\n      var(--color-gray-100)\\n    );\\n  }\\n\\n  .library-unit__dragger {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    height: 100%;\\n    width: 100%;\\n  }\\n\\n  .library-unit__dragger > svg {\\n    filter: var(--theme-filter);\\n    flex-grow: 1;\\n    max-height: 100%;\\n    max-width: 100%;\\n  }\\n\\n  .library-unit__checkbox-container,\\n  .library-unit__checkbox-container:hover,\\n  .library-unit__checkbox-container:active {\\n    align-items: center;\\n    background: none;\\n    border: none;\\n    color: var(--icon-fill-color);\\n    display: flex;\\n    justify-content: center;\\n    margin: 0;\\n    padding: 0.5rem;\\n    position: absolute;\\n    left: 2rem;\\n    bottom: 2rem;\\n    cursor: pointer;\\n\\n    input {\\n      cursor: pointer;\\n    }\\n  }\\n\\n  .library-unit__checkbox {\\n    position: absolute;\\n    top: 0.125rem;\\n    right: 0.125rem;\\n    margin: 0;\\n\\n    .Checkbox-box {\\n      margin: 0;\\n      width: 1rem;\\n      height: 1rem;\\n      border-radius: 4px;\\n      background-color: var(--color-primary-light);\\n      border: 1px solid var(--color-primary);\\n      box-shadow: none !important;\\n      padding: 2px;\\n    }\\n\\n    &.Checkbox:hover {\\n      .Checkbox-box {\\n        background-color: var(--color-primary-light);\\n      }\\n    }\\n\\n    &.is-checked {\\n      .Checkbox-box {\\n        background-color: var(--color-primary) !important;\\n\\n        svg {\\n          color: var(--color-primary-light);\\n        }\\n      }\\n    }\\n  }\\n\\n  .library-unit__removeFromLibrary > svg {\\n    height: 16px;\\n    width: 16px;\\n  }\\n\\n  .library-unit__adder {\\n    transform: scale(1);\\n    animation: library-unit__adder-animation 1s ease-in infinite;\\n\\n    position: absolute;\\n    width: 1.5rem;\\n    height: 1.5rem;\\n    background-color: var(--color-primary);\\n    border-radius: var(--border-radius-md);\\n\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n\\n    pointer-events: none;\\n\\n    svg {\\n      color: var(--color-primary-light);\\n      width: 1rem;\\n      height: 1rem;\\n    }\\n  }\\n\\n  .library-unit:active .library-unit__adder {\\n    animation: none;\\n    transform: scale(0.8);\\n  }\\n\\n  .library-unit__active {\\n    cursor: pointer;\\n  }\\n\\n  @keyframes library-unit__adder-animation {\\n    0% {\\n      transform: scale(0.85);\\n    }\\n\\n    50% {\\n      transform: scale(1);\\n    }\\n\\n    100% {\\n      transform: scale(0.85);\\n    }\\n  }\\n\\n  @keyframes library-unit__skeleton-opacity-animation {\\n    0% {\\n      opacity: 0;\\n    }\\n\\n    75% {\\n      opacity: 0;\\n    }\\n\\n    100% {\\n      opacity: 0.5;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--slider-thumb-size: 16px}.jsondraw .range-wrapper{position:relative;padding-top:10px;padding-bottom:25px}.jsondraw .range-input{width:100%;height:4px;-webkit-appearance:none;background:var(--color-slider-track);border-radius:2px;outline:none}.jsondraw .range-input::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:var(--slider-thumb-size);height:var(--slider-thumb-size);background:var(--color-slider-thumb);border-radius:50%;cursor:pointer;border:none}.jsondraw .range-input::-moz-range-thumb{width:var(--slider-thumb-size);height:var(--slider-thumb-size);background:var(--color-slider-thumb);border-radius:50%;cursor:pointer;border:none}.jsondraw .value-bubble{position:absolute;bottom:0;transform:translateX(-50%);font-size:12px;color:var(--text-primary-color)}.jsondraw .zero-label{position:absolute;bottom:0;left:4px;font-size:12px;color:var(--text-primary-color)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Range.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,yBAAA,CAEA,yBACE,iBAAA,CACA,gBAAA,CACA,mBAAA,CAGF,uBACE,UAAA,CACA,UAAA,CACA,uBAAA,CACA,oCAAA,CACA,iBAAA,CACA,YAAA,CAGF,6CACE,uBAAA,CACA,eAAA,CACA,8BAAA,CACA,+BAAA,CACA,oCAAA,CACA,iBAAA,CACA,cAAA,CACA,WAAA,CAGF,yCACE,8BAAA,CACA,+BAAA,CACA,oCAAA,CACA,iBAAA,CACA,cAAA,CACA,WAAA,CAGF,wBACE,iBAAA,CACA,QAAA,CACA,0BAAA,CACA,cAAA,CACA,+BAAA,CAGF,sBACE,iBAAA,CACA,QAAA,CACA,QAAA,CACA,cAAA,CACA,+BAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --slider-thumb-size: 16px;\\n\\n  .range-wrapper {\\n    position: relative;\\n    padding-top: 10px;\\n    padding-bottom: 25px;\\n  }\\n\\n  .range-input {\\n    width: 100%;\\n    height: 4px;\\n    -webkit-appearance: none;\\n    background: var(--color-slider-track);\\n    border-radius: 2px;\\n    outline: none;\\n  }\\n\\n  .range-input::-webkit-slider-thumb {\\n    -webkit-appearance: none;\\n    appearance: none;\\n    width: var(--slider-thumb-size);\\n    height: var(--slider-thumb-size);\\n    background: var(--color-slider-thumb);\\n    border-radius: 50%;\\n    cursor: pointer;\\n    border: none;\\n  }\\n\\n  .range-input::-moz-range-thumb {\\n    width: var(--slider-thumb-size);\\n    height: var(--slider-thumb-size);\\n    background: var(--color-slider-thumb);\\n    border-radius: 50%;\\n    cursor: pointer;\\n    border: none;\\n  }\\n\\n  .value-bubble {\\n    position: absolute;\\n    bottom: 0;\\n    transform: translateX(-50%);\\n    font-size: 12px;\\n    color: var(--text-primary-color);\\n  }\\n\\n  .zero-label {\\n    position: absolute;\\n    bottom: 0;\\n    left: 4px;\\n    font-size: 12px;\\n    color: var(--text-primary-color);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--RadioGroup-background: var(--island-bg-color);--RadioGroup-border: var(--color-surface-high);--RadioGroup-choice-color-off: var(--color-primary);--RadioGroup-choice-color-off-hover: var(--color-brand-hover);--RadioGroup-choice-background-off: var(--island-bg-color);--RadioGroup-choice-background-off-active: var(--color-surface-high);--RadioGroup-choice-color-on: var(--color-surface-lowest);--RadioGroup-choice-background-on: var(--color-primary);--RadioGroup-choice-background-on-hover: var(--color-brand-hover);--RadioGroup-choice-background-on-active: var(--color-brand-active)}.jsondraw .RadioGroup{box-sizing:border-box;display:flex;flex-direction:row;align-items:flex-start;padding:3px;border-radius:10px;background:var(--RadioGroup-background);border:1px solid var(--RadioGroup-border)}.jsondraw .RadioGroup__choice{position:relative;display:flex;align-items:center;justify-content:center;width:32px;height:24px;color:var(--RadioGroup-choice-color-off);background:var(--RadioGroup-choice-background-off);border-radius:8px;font-family:\"Assistant\";font-style:normal;font-weight:600;font-size:.75rem;line-height:100%;user-select:none;letter-spacing:.4px;transition:all 75ms ease-out}.jsondraw .RadioGroup__choice:hover{color:var(--RadioGroup-choice-color-off-hover)}.jsondraw .RadioGroup__choice:active{background:var(--RadioGroup-choice-background-off-active)}.jsondraw .RadioGroup__choice.active{color:var(--RadioGroup-choice-color-on);background:var(--RadioGroup-choice-background-on)}.jsondraw .RadioGroup__choice.active:hover{background:var(--RadioGroup-choice-background-on-hover)}.jsondraw .RadioGroup__choice.active:active{background:var(--RadioGroup-choice-background-on-active)}.jsondraw .RadioGroup__choice input{z-index:1;position:absolute;width:100%;height:100%;margin:0;padding:0;border-radius:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/RadioGroup.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,+CAAA,CACA,8CAAA,CAEA,mDAAA,CACA,6DAAA,CACA,0DAAA,CACA,oEAAA,CAEA,yDAAA,CACA,uDAAA,CACA,iEAAA,CACA,mEAAA,CAEA,sBACE,qBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,WAAA,CACA,kBAAA,CAEA,uCAAA,CACA,yCAAA,CAEA,8BACE,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,UAAA,CACA,WAAA,CAEA,wCAAA,CACA,kDAAA,CAEA,iBAAA,CAEA,uBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,mBAAA,CAEA,4BAAA,CAEA,oCACE,8CAAA,CAGF,qCACE,yDAAA,CAGF,qCACE,uCAAA,CACA,iDAAA,CAEA,2CACE,uDAAA,CAGF,4CACE,wDAAA,CAIJ,oCACE,SAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,SAAA,CAEA,iBAAA,CAEA,uBAAA,CACA,oBAAA,CACA,eAAA,CAEA,cAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --RadioGroup-background: var(--island-bg-color);\\n  --RadioGroup-border: var(--color-surface-high);\\n\\n  --RadioGroup-choice-color-off: var(--color-primary);\\n  --RadioGroup-choice-color-off-hover: var(--color-brand-hover);\\n  --RadioGroup-choice-background-off: var(--island-bg-color);\\n  --RadioGroup-choice-background-off-active: var(--color-surface-high);\\n\\n  --RadioGroup-choice-color-on: var(--color-surface-lowest);\\n  --RadioGroup-choice-background-on: var(--color-primary);\\n  --RadioGroup-choice-background-on-hover: var(--color-brand-hover);\\n  --RadioGroup-choice-background-on-active: var(--color-brand-active);\\n\\n  .RadioGroup {\\n    box-sizing: border-box;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: flex-start;\\n\\n    padding: 3px;\\n    border-radius: 10px;\\n\\n    background: var(--RadioGroup-background);\\n    border: 1px solid var(--RadioGroup-border);\\n\\n    &__choice {\\n      position: relative;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      width: 32px;\\n      height: 24px;\\n\\n      color: var(--RadioGroup-choice-color-off);\\n      background: var(--RadioGroup-choice-background-off);\\n\\n      border-radius: 8px;\\n\\n      font-family: \\\"Assistant\\\";\\n      font-style: normal;\\n      font-weight: 600;\\n      font-size: 0.75rem;\\n      line-height: 100%;\\n      user-select: none;\\n      letter-spacing: 0.4px;\\n\\n      transition: all 75ms ease-out;\\n\\n      &:hover {\\n        color: var(--RadioGroup-choice-color-off-hover);\\n      }\\n\\n      &:active {\\n        background: var(--RadioGroup-choice-background-off-active);\\n      }\\n\\n      &.active {\\n        color: var(--RadioGroup-choice-color-on);\\n        background: var(--RadioGroup-choice-background-on);\\n\\n        &:hover {\\n          background: var(--RadioGroup-choice-background-on-hover);\\n        }\\n\\n        &:active {\\n          background: var(--RadioGroup-choice-background-on-active);\\n        }\\n      }\\n\\n      & input {\\n        z-index: 1;\\n        position: absolute;\\n        width: 100%;\\n        height: 100%;\\n        margin: 0;\\n        padding: 0;\\n\\n        border-radius: 8px;\\n\\n        -webkit-appearance: none;\\n        -moz-appearance: none;\\n        appearance: none;\\n\\n        cursor: pointer;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .dropdown-menu{max-width:16rem;z-index:1}.jsondraw .dropdown-menu--placement-top{margin-bottom:.5rem}.jsondraw .dropdown-menu__submenu-trigger[aria-expanded=true] .dropdown-menu-item{background-color:var(--button-hover-bg)}.jsondraw .dropdown-menu__submenu-trigger-icon{margin-left:auto;opacity:.5}.jsondraw .dropdown-menu__submenu-trigger-icon svg g{stroke-width:2}.jsondraw .dropdown-menu--mobile{width:100%;row-gap:.75rem}.jsondraw .dropdown-menu--mobile.main-menu{min-width:232px;margin-top:0;margin-bottom:0}@media screen and (orientation: landscape){.jsondraw .dropdown-menu--mobile.main-menu{max-width:232px}}.jsondraw .dropdown-menu--mobile .dropdown-menu-container{padding:8px 8px;box-sizing:border-box;border-radius:var(--border-radius-lg);position:relative;transition:box-shadow .5s ease-in-out;display:flex;flex-direction:column;overflow-y:auto}.jsondraw .dropdown-menu--mobile .dropdown-menu-container.zen-mode{box-shadow:none}.jsondraw .dropdown-menu .dropdown-menu-container{background-color:var(--island-bg-color);overflow-y:auto;display:flex;flex-direction:column;gap:1px;box-shadow:var(--box-shadow, var(--shadow-island));max-height:calc(100svh - var(--editor-container-padding)*2 - 2.25rem)}.jsondraw.theme--dark.jsondraw .dropdown-menu .dropdown-menu-container{box-shadow:var(--box-shadow, var(--shadow-island)),0 0 0 1px rgba(0,0,0,.15)}.jsondraw .dropdown-menu .dropdown-menu-item-base{display:flex;column-gap:.625rem;padding:0 .5rem;font-size:.875rem;color:var(--color-on-surface);width:100%;box-sizing:border-box;font-weight:400;font-family:inherit}.jsondraw .dropdown-menu.manual-hover .dropdown-menu-item:hover{background-color:rgba(0,0,0,0)}.jsondraw .dropdown-menu.manual-hover .dropdown-menu-item--hovered{background-color:var(--button-hover-bg) !important}.jsondraw .dropdown-menu.manual-hover .dropdown-menu-item--selected{background-color:var(--color-primary-light) !important}.jsondraw .dropdown-menu.fonts{margin-top:1rem;max-height:calc(7*(2rem + 2px) + 2.95rem + 1rem)}@media screen and (min-width: 1921px){.jsondraw .dropdown-menu.fonts{max-height:calc(7*(2.25rem + 2px) + 2.95rem + 1rem)}}.jsondraw .dropdown-menu.fonts .dropdown-menu-item-base{display:inline-flex}.jsondraw .dropdown-menu.fonts .dropdown-menu-group:not(:first-child){margin-top:1rem}.jsondraw .dropdown-menu.fonts .dropdown-menu-group-title{font-size:.75rem;text-align:left;font-weight:400;margin:0 0 .5rem;line-height:1.3}.jsondraw .dropdown-menu .dropdown-menu-item{height:2rem;padding:0 .5rem;background-color:rgba(0,0,0,0);border:none;align-items:center;cursor:pointer;border-radius:var(--border-radius-md);flex:1 0 auto}@media screen and (min-width: 1921px){.jsondraw .dropdown-menu .dropdown-menu-item{height:2.25rem}}.jsondraw .dropdown-menu .dropdown-menu-item__text{display:flex;align-items:center;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;gap:.75rem}.jsondraw .dropdown-menu .dropdown-menu-item__shortcut{margin-inline-start:auto;opacity:.5}.jsondraw .dropdown-menu .dropdown-menu-item__shortcut--orphaned{text-align:right;font-size:.875rem;padding:0 .625rem}.jsondraw .dropdown-menu .dropdown-menu-item--selected{background:var(--color-primary-light);--icon-fill-color: var(--color-primary-darker)}.jsondraw .dropdown-menu .dropdown-menu-item:hover{background-color:var(--button-hover-bg);text-decoration:none}.jsondraw .dropdown-menu .dropdown-menu-item:active{background-color:var(--button-hover-bg);box-shadow:0 0 0 1px var(--color-brand-active)}.jsondraw .dropdown-menu .dropdown-menu-item svg{width:1rem;height:1rem;display:block}.jsondraw .dropdown-menu .dropdown-menu-item-bare{align-items:center;height:2rem;justify-content:space-between}@media screen and (min-width: 1921px){.jsondraw .dropdown-menu .dropdown-menu-item-bare{height:2.25rem}}.jsondraw .dropdown-menu .dropdown-menu-item-bare svg{width:1rem;height:1rem;display:block}.jsondraw .dropdown-menu .dropdown-menu-item-custom{margin-top:.5rem}.jsondraw .dropdown-menu .dropdown-menu-group-title{font-size:14px;text-align:left;margin:10px 0;font-weight:500}.jsondraw .dropdown-menu-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .dropdown-menu-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .dropdown-menu-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .dropdown-menu-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .dropdown-menu-button.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .dropdown-menu-button.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .dropdown-menu-button.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .dropdown-menu-button{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw .dropdown-menu-button{width:var(--lg-button-size);height:var(--lg-button-size);--background: var(--color-surface-mid);background-color:var(--background)}.jsondraw.theme--dark.jsondraw .dropdown-menu-button{--background: var(--color-surface-high)}.jsondraw.theme--dark.jsondraw .dropdown-menu-button:hover{--background: #363541}.jsondraw .dropdown-menu-button:hover{--background: var(--color-surface-high);background-color:var(--background);text-decoration:none}.jsondraw .dropdown-menu-button:active{box-shadow:0 0 0 1px var(--color-primary)}.jsondraw .dropdown-menu-button[disabled]{cursor:not-allowed}.jsondraw .dropdown-menu-button[disabled]:hover{--background: var(--color-surface-mid);background-color:var(--background)}.jsondraw .dropdown-menu-button[disabled]:active{box-shadow:none}.jsondraw.theme--dark.jsondraw .dropdown-menu-button[disabled]:hover{--background: var(--color-surface-high)}.jsondraw .dropdown-menu-button svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.jsondraw .dropdown-menu-button--mobile{border:none;margin:0;padding:0;width:var(--default-button-size);height:var(--default-button-size)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dropdownMenu/DropdownMenu.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,yBACE,eAAA,CACA,SAAA,CAEA,wCACE,mBAAA,CAKE,kFACE,uCAAA,CAKN,+CACE,gBAAA,CACA,UAAA,CACA,qDACE,cAAA,CAIJ,iCACE,UAAA,CACA,cAAA,CAGA,2CACE,eAAA,CACA,YAAA,CACA,eAAA,CAEA,2CALF,2CAMI,eAAA,CAAA,CAIJ,0DACE,eAAA,CACA,qBAAA,CACA,qCAAA,CACA,iBAAA,CACA,qCAAA,CACA,YAAA,CACA,qBAAA,CACA,eAAA,CAEA,mEACE,eAAA,CAKN,kDACE,uCAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,kDAAA,CAEA,qEAAA,CAES,uEACP,4EAAA,CAKJ,kDACE,YAAA,CACA,kBAAA,CACA,eAAA,CACA,iBAAA,CACA,6BAAA,CACA,UAAA,CACA,qBAAA,CACA,eAAA,CACA,mBAAA,CAME,gEACE,8BAAA,CAGF,mEACE,kDAAA,CAGF,oEACE,sDAAA,CAKN,+BACE,eAAA,CAGA,gDAAA,CAEA,sCANF,+BAOI,mDAAA,CAAA,CAKF,wDACE,mBAAA,CAGF,sEACE,eAAA,CAGF,0DACE,gBAAA,CACA,eAAA,CACA,eAAA,CACA,gBAAA,CACA,eAAA,CAIJ,6CACE,WAAA,CACA,eAAA,CACA,8BAAA,CACA,WAAA,CACA,kBAAA,CACA,cAAA,CACA,qCAAA,CACA,aAAA,CAEA,sCAVF,6CAWI,cAAA,CAAA,CAGF,mDACE,YAAA,CACA,kBAAA,CACA,UAAA,CACA,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,UAAA,CAGF,uDACE,wBAAA,CACA,UAAA,CAEA,iEACE,gBAAA,CACA,iBAAA,CACA,iBAAA,CAIJ,uDACE,qCAAA,CACA,8CAAA,CAGF,mDACE,uCAAA,CACA,oBAAA,CAGF,oDACE,uCAAA,CACA,8CAAA,CAGF,iDACE,UAAA,CACA,WAAA,CACA,aAAA,CAIJ,kDACE,kBAAA,CACA,WAAA,CACA,6BAAA,CAEA,sCALF,kDAMI,cAAA,CAAA,CAGF,sDACE,UAAA,CACA,WAAA,CACA,aAAA,CAIJ,oDACE,gBAAA,CAGF,oDACE,cAAA,CACA,eAAA,CACA,aAAA,CACA,eAAA,CAIJ,gCClIA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,qDAAA,CACA,uDAAA,CACA,qBAAA,CACA,gBAAA,CACA,kBAAA,CACA,8DAAA,CACA,qCAAA,CACA,cAAA,CACA,yDAAA,CACA,kDAAA,CACA,0BAAA,CAEA,oCACE,8CAAA,CACA,gDAAA,CAGF,sCACE,+DAAA,CACA,0FAAA,CAIA,wFAAA,CAMF,uCACE,gEAAA,CACA,sEAAA,CAGF,uCACE,kFAAA,CAIA,kFAAA,CAKA,6CACE,wFAAA,CAMF,2CACE,4DAAA,CAtHK,iDA2HP,kEAAA,CACA,mEAAA,CDoEF,gCAEE,2BAAA,CACA,4BAAA,CAEA,sCAAA,CAEA,kCAAA,CAES,qDACP,uCAAA,CACA,2DACE,qBAAA,CAIJ,sCACE,uCAAA,CACA,kCAAA,CACA,oBAAA,CAGF,uCACE,yCAAA,CAGF,0CACE,kBAAA,CAEA,gDACE,sCAAA,CACA,kCAAA,CAGF,iDACE,eAAA,CAIA,qEACE,uCAAA,CAKN,oCACE,yBAAA,CACA,0BAAA,CAGF,wCACE,WAAA,CACA,QAAA,CACA,SAAA,CACA,gCAAA,CACA,iCAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .dropdown-menu {\\n    max-width: 16rem;\\n    z-index: 1;\\n\\n    &--placement-top {\\n      margin-bottom: 0.5rem;\\n    }\\n\\n    &__submenu-trigger {\\n      &[aria-expanded=\\\"true\\\"] {\\n        .dropdown-menu-item {\\n          background-color: var(--button-hover-bg);\\n        }\\n      }\\n    }\\n\\n    &__submenu-trigger-icon {\\n      margin-left: auto;\\n      opacity: 0.5;\\n      svg g {\\n        stroke-width: 2;\\n      }\\n    }\\n\\n    &--mobile {\\n      width: 100%;\\n      row-gap: 0.75rem;\\n\\n      // When main menu is in the top toolbar, position relative to trigger\\n      &.main-menu {\\n        min-width: 232px;\\n        margin-top: 0;\\n        margin-bottom: 0;\\n\\n        @media screen and (orientation: landscape) {\\n          max-width: 232px;\\n        }\\n      }\\n\\n      .dropdown-menu-container {\\n        padding: 8px 8px;\\n        box-sizing: border-box;\\n        border-radius: var(--border-radius-lg);\\n        position: relative;\\n        transition: box-shadow 0.5s ease-in-out;\\n        display: flex;\\n        flex-direction: column;\\n        overflow-y: auto;\\n\\n        &.zen-mode {\\n          box-shadow: none;\\n        }\\n      }\\n    }\\n\\n    .dropdown-menu-container {\\n      background-color: var(--island-bg-color);\\n      overflow-y: auto;\\n      display: flex;\\n      flex-direction: column;\\n      gap: 1px;\\n\\n      box-shadow: var(--box-shadow, var(--shadow-island));\\n\\n      max-height: calc(100svh - var(--editor-container-padding) * 2 - 2.25rem);\\n\\n      @at-root .jsondraw.theme--dark#{&} {\\n        box-shadow: var(--box-shadow, var(--shadow-island)),\\n          0 0 0 1px rgba(0, 0, 0, 0.15);\\n      }\\n    }\\n\\n    .dropdown-menu-item-base {\\n      display: flex;\\n      column-gap: 0.625rem;\\n      padding: 0 0.5rem;\\n      font-size: 0.875rem;\\n      color: var(--color-on-surface);\\n      width: 100%;\\n      box-sizing: border-box;\\n      font-weight: 400;\\n      font-family: inherit;\\n    }\\n\\n    &.manual-hover {\\n      // disable built-in hover due to keyboard navigation\\n      .dropdown-menu-item {\\n        &:hover {\\n          background-color: transparent;\\n        }\\n\\n        &--hovered {\\n          background-color: var(--button-hover-bg) !important;\\n        }\\n\\n        &--selected {\\n          background-color: var(--color-primary-light) !important;\\n        }\\n      }\\n    }\\n\\n    &.fonts {\\n      margin-top: 1rem;\\n      // display max 7 items per list, where each has 2rem (2.25) height and 1px margin top & bottom\\n      // count in 2 groups, where each allocates 1.3*0.75rem font-size and 0.5rem margin bottom, plus one extra 1rem margin top\\n      max-height: calc(7 * (2rem + 2px) + 2 * (0.5rem + 1.3 * 0.75rem) + 1rem);\\n\\n      @media screen and (min-width: 1921px) {\\n        max-height: calc(\\n          7 * (2.25rem + 2px) + 2 * (0.5rem + 1.3 * 0.75rem) + 1rem\\n        );\\n      }\\n\\n      .dropdown-menu-item-base {\\n        display: inline-flex;\\n      }\\n\\n      .dropdown-menu-group:not(:first-child) {\\n        margin-top: 1rem;\\n      }\\n\\n      .dropdown-menu-group-title {\\n        font-size: 0.75rem;\\n        text-align: left;\\n        font-weight: 400;\\n        margin: 0 0 0.5rem;\\n        line-height: 1.3;\\n      }\\n    }\\n\\n    .dropdown-menu-item {\\n      height: 2rem;\\n      padding: 0 0.5rem;\\n      background-color: transparent;\\n      border: none;\\n      align-items: center;\\n      cursor: pointer;\\n      border-radius: var(--border-radius-md);\\n      flex: 1 0 auto;\\n\\n      @media screen and (min-width: 1921px) {\\n        height: 2.25rem;\\n      }\\n\\n      &__text {\\n        display: flex;\\n        align-items: center;\\n        width: 100%;\\n        text-overflow: ellipsis;\\n        overflow: hidden;\\n        white-space: nowrap;\\n        gap: 0.75rem;\\n      }\\n\\n      &__shortcut {\\n        margin-inline-start: auto;\\n        opacity: 0.5;\\n\\n        &--orphaned {\\n          text-align: right;\\n          font-size: 0.875rem;\\n          padding: 0 0.625rem;\\n        }\\n      }\\n\\n      &--selected {\\n        background: var(--color-primary-light);\\n        --icon-fill-color: var(--color-primary-darker);\\n      }\\n\\n      &:hover {\\n        background-color: var(--button-hover-bg);\\n        text-decoration: none;\\n      }\\n\\n      &:active {\\n        background-color: var(--button-hover-bg);\\n        box-shadow: 0 0 0 1px var(--color-brand-active);\\n      }\\n\\n      svg {\\n        width: 1rem;\\n        height: 1rem;\\n        display: block;\\n      }\\n    }\\n\\n    .dropdown-menu-item-bare {\\n      align-items: center;\\n      height: 2rem;\\n      justify-content: space-between;\\n\\n      @media screen and (min-width: 1921px) {\\n        height: 2.25rem;\\n      }\\n\\n      svg {\\n        width: 1rem;\\n        height: 1rem;\\n        display: block;\\n      }\\n    }\\n\\n    .dropdown-menu-item-custom {\\n      margin-top: 0.5rem;\\n    }\\n\\n    .dropdown-menu-group-title {\\n      font-size: 14px;\\n      text-align: left;\\n      margin: 10px 0;\\n      font-weight: 500;\\n    }\\n  }\\n\\n  .dropdown-menu-button {\\n    @include outlineButtonStyles;\\n    width: var(--lg-button-size);\\n    height: var(--lg-button-size);\\n\\n    --background: var(--color-surface-mid);\\n\\n    background-color: var(--background);\\n\\n    @at-root .jsondraw.theme--dark#{&} {\\n      --background: var(--color-surface-high);\\n      &:hover {\\n        --background: #363541;\\n      }\\n    }\\n\\n    &:hover {\\n      --background: var(--color-surface-high);\\n      background-color: var(--background);\\n      text-decoration: none;\\n    }\\n\\n    &:active {\\n      box-shadow: 0 0 0 1px var(--color-primary);\\n    }\\n\\n    &[disabled] {\\n      cursor: not-allowed;\\n\\n      &:hover {\\n        --background: var(--color-surface-mid);\\n        background-color: var(--background);\\n      }\\n\\n      &:active {\\n        box-shadow: none;\\n      }\\n\\n      @at-root .jsondraw.theme--dark#{&} {\\n        &:hover {\\n          --background: var(--color-surface-high);\\n        }\\n      }\\n    }\\n\\n    svg {\\n      width: var(--lg-icon-size);\\n      height: var(--lg-icon-size);\\n    }\\n\\n    &--mobile {\\n      border: none;\\n      margin: 0;\\n      padding: 0;\\n      width: var(--default-button-size);\\n      height: var(--default-button-size);\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path fill=\\\"%23ced4da\\\" d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--mobile-action-button-bg: rgba(255, 255, 255, 0.35);--mobile-color-border: var(--default-border-color);--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url(${___CSS_LOADER_URL_REPLACEMENT_0___});--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-on-surface);--icon-green-fill-color: #2b8a3e;--default-bg-color: #fff;--input-bg-color: #fff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: #ffffff;--island-bg-color-alt: #fff;--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--link-color-hover: #1971c2;--link-color-active: #a5d8ff;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: var(--island-bg-color);--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000;--popup-text-inverted-color: #fff;--select-highlight-color: #339af0;--shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17), 0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08), 0px 7px 14px 0px rgba(0, 0, 0, 0.05);--button-hover-bg: var(--color-surface-high);--button-active-bg: var(--color-surface-high);--button-active-border: var(--color-brand-active);--default-border-color: var(--color-surface-high);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--mobile-action-button-size: 2rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--color-slider-track: hsl(240, 100%, 90%);--color-slider-thumb: var(--color-gray-80);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-surface-high);--sidebar-bg-color: var(--island-bg-color);--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--chat-msg-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-on-surface);--color-selection: #6965db;--color-icon-white: #fff;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-primary-light-darker: #d7d5ff;--color-primary-hover: #5753d0;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-disabled: var(--color-gray-40);--color-warning: #fceeca;--color-warning-dark: #f5c354;--color-warning-darker: #f3ab2c;--color-warning-darkest: #ec8b14;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-danger-dark: #db6965;--color-danger-darker: #d65550;--color-danger-darkest: #d1413c;--color-danger-text: black;--color-danger-background: #fff0f0;--color-danger-icon-background: #ffdad6;--color-danger-color: #700000;--color-danger-icon-color: #700000;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--text-primary-color);--color-warning-icon-color: var(--text-primary-color);--color-muted: var(--color-gray-30);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-100);--color-muted-background: var(--color-gray-80);--color-muted-background-darker: var(--color-gray-100);--color-promo: var(--color-primary);--color-success: #cafccc;--color-success-darker: #bafabc;--color-success-darkest: #a5eba8;--color-success-text: #268029;--color-success-contrast: #65bb6a;--color-success-contrast-hover: #6bcf70;--color-success-contrast-active: #6edf74;--color-logo-icon: var(--color-primary);--color-logo-text: #190064;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem;--color-surface-high: #f1f0ff;--color-surface-mid: #f6f6f9;--color-surface-low: #ececf4;--color-surface-lowest: #ffffff;--color-on-surface: #1b1b1f;--color-brand-hover: #5753d0;--color-on-primary-container: #030064;--color-surface-primary-container: #e0dfff;--color-brand-active: #4440bf;--color-border-outline: #767680;--color-border-outline-variant: #c5c5d0;--color-surface-primary-container: #e0dfff;--color-badge: #0b6513;--background-color-badge: #d3ffd2}.jsondraw--mobile.jsondraw{--editor-container-padding: 0.75rem}@media screen and (min-device-width: 1921px){.jsondraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.jsondraw.theme--dark.theme--dark-background-none{background:none}.jsondraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--mobile-action-button-bg: var(--island-bg-color);--mobile-color-border: rgba(255, 255, 255, 0.85);--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url(${___CSS_LOADER_URL_REPLACEMENT_1___});--focus-highlight-color: #228be6;--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #232329;--island-bg-color-alt: hsl(240, 12%, 12%);--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17), 0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08), 0px 7px 14px 0px rgba(0, 0, 0, 0.05);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-slider-track: hsl(244, 23%, 39%);--color-selection: #3530c4;--color-icon-white: var(--color-gray-90);--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-primary-light-darker: #43415e;--color-primary-hover: #bbb8ff;--color-disabled: var(--color-gray-70);--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-danger-dark: #672120;--color-danger-darker: #8f2625;--color-danger-darkest: #ac2b29;--color-danger-text: #fbcbcc;--color-danger-background: #fbcbcc;--color-danger-icon-background: #672120;--color-danger-color: #261919;--color-danger-icon-color: #fbcbcc;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--color-gray-80);--color-warning-icon-color: var(--color-gray-80);--color-muted: var(--color-gray-80);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-20);--color-muted-background: var(--color-gray-40);--color-muted-background-darker: var(--color-gray-20);--color-logo-text: #e2dfff;--color-surface-high: #2e2d39;--color-surface-low: hsl(240, 8%, 15%);--color-surface-mid: hsl(240 6% 10%);--color-surface-lowest: hsl(0, 0%, 7%);--color-on-surface: #e3e3e8;--color-brand-hover: #bbb8ff;--color-on-primary-container: #e0dfff;--color-surface-primary-container: #403e6a;--color-brand-active: #d0ccff;--color-border-outline: #8e8d9c;--color-border-outline-variant: #46464f;--color-surface-primary-container: #403e6a}:root{--zIndex-canvas: 1;--zIndex-interactiveCanvas: 2;--zIndex-svgLayer: 3;--zIndex-wysiwyg: 3;--zIndex-canvasButtons: 3;--zIndex-layerUI: 4;--zIndex-eyeDropperBackdrop: 5;--zIndex-eyeDropperPreview: 6;--zIndex-hyperlinkContainer: 7;--zIndex-ui-bottom: 60;--zIndex-ui-context-menu: 90;--zIndex-ui-styles-popup: 100;--zIndex-ui-top: 100;--zIndex-ui-main-menu: 110;--zIndex-ui-library: 120;--zIndex-modal: 1000;--zIndex-popup: 1001;--zIndex-toast: 999999;--sab: env(safe-area-inset-bottom);--sal: env(safe-area-inset-left);--sar: env(safe-area-inset-right);--sat: env(safe-area-inset-top)}body.jsondraw-cursor-resize,body.jsondraw-cursor-resize a:hover,body.jsondraw-cursor-resize *{cursor:ew-resize}.jsondraw{--ui-font: Excalifont, \"Excalifont Fallback\", Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;font-family:var(--ui-font);position:relative;overflow:hidden;color:var(--text-primary-color);display:flex;top:0;bottom:0;left:0;right:0;height:100%;width:100%}.jsondraw button{font-size:.8333rem}.jsondraw button,.jsondraw label{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none;user-select:none}.jsondraw button{cursor:pointer;user-select:none}.jsondraw:focus{outline:none}.jsondraw{user-select:none}.jsondraw .jsondraw-link,.jsondraw a{font-weight:500;text-decoration:none;color:var(--link-color);user-select:none;cursor:pointer}.jsondraw .jsondraw-link:hover,.jsondraw a:hover{text-decoration:underline}.jsondraw .jsondraw-link:active,.jsondraw a:active{text-decoration:none}.jsondraw canvas{touch-action:none;image-rendering:pixelated;image-rendering:-moz-crisp-edges;z-index:var(--zIndex-canvas)}.jsondraw canvas.interactive{z-index:var(--zIndex-interactiveCanvas);filter:var(--theme-filter)}.jsondraw__canvas-wrapper,.jsondraw__canvas.static{pointer-events:none}.jsondraw__canvas{position:absolute}.jsondraw__embeddable{width:100%;height:100%;border:0}.jsondraw__embeddable-container{position:absolute;z-index:2;transform-origin:top left;pointer-events:none}.jsondraw .FixedSideContainer{padding-top:var(--sat, 0);padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0)}.jsondraw .panelRow{display:flex;justify-content:space-between}.jsondraw .selected-shape-actions{display:flex;flex-direction:column;row-gap:.75rem}.jsondraw .selected-shape-actions h3,.jsondraw .selected-shape-actions legend,.jsondraw .selected-shape-actions .control-label{margin:0;margin-bottom:.25rem;font-size:.75rem;color:var(--text-primary-color);font-weight:400;display:block}.jsondraw .selected-shape-actions .control-label input{display:block;width:100%}.jsondraw .selected-shape-actions legend{padding:0}.jsondraw .selected-shape-actions .iconSelectList{flex-wrap:wrap;position:relative}.jsondraw .selected-shape-actions .buttonList{flex-wrap:wrap;display:flex;column-gap:.5rem;row-gap:.5rem}.jsondraw .selected-shape-actions .buttonList label{font-size:.75rem}.jsondraw .selected-shape-actions .buttonList input[type=radio],.jsondraw .selected-shape-actions .buttonList input[type=button]{opacity:0;position:absolute;pointer-events:none}.jsondraw .selected-shape-actions .buttonList .iconRow{margin-top:8px}.jsondraw .selected-shape-actions fieldset{margin:0;padding:0;border:none}.jsondraw .divider{width:1px;background-color:#e9ecef;margin:1px}.jsondraw .welcome-screen-menu-item:focus-visible,.jsondraw .dropdown-menu-item:focus-visible,.jsondraw button:focus-visible,.jsondraw .buttonList label:focus-within,.jsondraw input:focus-visible{outline:rgba(0,0,0,0);box-shadow:0 0 0 1px var(--color-brand-hover)}.jsondraw [data-radix-collection-item]:focus-visible{box-shadow:none !important}.jsondraw .buttonList .ToolIcon__icon{all:unset !important;display:flex !important}.jsondraw .buttonList button{background-color:rgba(0,0,0,0)}.jsondraw .buttonList label,.jsondraw .buttonList button,.jsondraw .buttonList .zIndexButton{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .buttonList label svg,.jsondraw .buttonList button svg,.jsondraw .buttonList .zIndexButton svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .buttonList label:hover,.jsondraw .buttonList button:hover,.jsondraw .buttonList .zIndexButton:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .buttonList label:active,.jsondraw .buttonList button:active,.jsondraw .buttonList .zIndexButton:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .buttonList label.active,.jsondraw .buttonList button.active,.jsondraw .buttonList .zIndexButton.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .buttonList label.active:hover,.jsondraw .buttonList button.active:hover,.jsondraw .buttonList .zIndexButton.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .buttonList label.active svg,.jsondraw .buttonList button.active svg,.jsondraw .buttonList .zIndexButton.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .buttonList label,.jsondraw .buttonList button,.jsondraw .buttonList .zIndexButton{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw .buttonList label,.jsondraw .buttonList button,.jsondraw .buttonList .zIndexButton{padding:0}.jsondraw .buttonList label svg,.jsondraw .buttonList button svg,.jsondraw .buttonList .zIndexButton svg{width:var(--default-icon-size);height:var(--default-icon-size)}.jsondraw .App-top-bar{z-index:var(--zIndex-ui-top);display:flex;flex-direction:column}.jsondraw .App-welcome-screen{z-index:var(--zIndex-layerUI)}.jsondraw .App-bottom-bar{position:absolute;width:calc(100% - 28px);max-width:450px;bottom:0;left:50%;transform:translateX(-50%);--bar-padding: calc(4 * var(--space-factor));z-index:var(--zIndex-ui-bottom);display:flex;flex-direction:column;pointer-events:none;justify-content:center}.jsondraw .App-bottom-bar>.Island{box-sizing:border-box;max-height:100%;padding:4px;display:flex;flex-direction:column;pointer-events:var(--ui-pointerEvents)}.jsondraw .App-toolbar{display:flex;justify-content:center}.jsondraw .App-toolbar .eraser.ToolIcon:hover{--icon-fill-color: #fff;--keybinding-color: #fff}.jsondraw .App-toolbar .eraser.active{background-color:var(--color-primary)}.jsondraw .jsondraw-ui-top-left,.jsondraw .jsondraw-ui-top-right{display:flex;align-items:center;gap:.5rem}.jsondraw .App-toolbar-content{display:flex;flex-direction:column;pointer-events:none}.jsondraw .App-toolbar-content>*{pointer-events:var(--ui-pointerEvents)}.jsondraw .App-mobile-menu{width:100%;overflow-x:visible;overflow-y:auto;box-sizing:border-box;margin-bottom:var(--bar-padding)}.jsondraw .App-mobile-menu .selected-shape-actions{padding:8px 8px 0 8px}.jsondraw .App-menu{display:grid;color:var(--icon-fill-color)}.jsondraw .shapes-section{display:flex;justify-content:center;pointer-events:none !important}.jsondraw .shapes-section>*{pointer-events:var(--ui-pointerEvents)}.jsondraw .App-menu_top{grid-template-columns:1fr 2fr 1fr;grid-gap:1rem;align-items:flex-start;cursor:default;pointer-events:none !important}.jsondraw .App-menu_top>*{pointer-events:var(--ui-pointerEvents)}@media(min-width: 1536px){.jsondraw .App-menu_top{grid-template-columns:1fr 1fr 1fr;grid-gap:3rem}}.jsondraw .App-menu_top>*:first-child{justify-self:flex-start}.jsondraw .selected-shape-actions-container{width:fit-content}.jsondraw .selected-shape-actions-container--compact{min-width:48px}.jsondraw .App-menu_top>*:last-child{justify-self:flex-end}.jsondraw .App-menu_bottom{position:absolute;bottom:1rem;display:flex;justify-content:space-between;align-items:flex-start;cursor:default;pointer-events:none !important;box-sizing:border-box;padding:0 1rem}.jsondraw .App-menu_bottom--transition-left section{width:185px}.jsondraw .App-menu_bottom section{display:flex}.jsondraw .App-menu_bottom>*:first-child{justify-self:flex-start}.jsondraw .App-menu_bottom>*:last-child{justify-self:flex-end}.jsondraw .App-menu_left{grid-template-rows:1fr auto 1fr;height:100%}.jsondraw .App-menu_right{grid-template-rows:1fr;height:100%}.jsondraw .App-menu__left{overflow-y:auto;padding:.75rem;width:12.5rem;box-sizing:border-box;position:absolute}.jsondraw .dropdown-select{height:1.5rem;padding:0;padding-inline-start:.5rem;padding-inline-end:1.5rem;color:var(--icon-fill-color);background-color:var(--button-gray-1);border-radius:var(--space-factor);border:1px solid var(--button-gray-2);font-size:.8rem;font-family:inherit;outline:none;appearance:none;background-image:var(--dropdown-icon);background-repeat:no-repeat;background-position:right .7rem top 50%,0 0}:root[dir=rtl] .jsondraw .dropdown-select{background-position:left .7rem top 50%,0 0}.jsondraw .dropdown-select{background-size:.65em auto,100%}.jsondraw .dropdown-select:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.jsondraw .dropdown-select:hover{background-color:var(--button-gray-2)}.jsondraw .dropdown-select:active{background-color:var(--button-gray-2)}.jsondraw .dropdown-select__language{height:2rem;background-color:var(--island-bg-color);border-color:var(--default-border-color) !important;cursor:pointer}.jsondraw .dropdown-select__language:hover{background-color:var(--island-bg-color)}.jsondraw .scroll-back-to-content{border-radius:var(--border-radius-lg);background-color:var(--island-bg-color);color:var(--icon-fill-color);border:1px solid var(--default-border-color);padding:10px 20px;position:absolute;left:50%;bottom:30px;transform:translateX(-50%);pointer-events:var(--ui-pointerEvents);font-family:inherit}.jsondraw .scroll-back-to-content:hover{background-color:var(--button-hover-bg)}.jsondraw .scroll-back-to-content:active{border:1px solid var(--button-active-border)}.jsondraw .help-icon{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .help-icon svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .help-icon:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .help-icon:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .help-icon.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .help-icon.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .help-icon.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .help-icon{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw .help-icon{border:none;box-shadow:0 0 0 1px var(--color-surface-lowest);background-color:var(--color-surface-low)}.jsondraw .help-icon:active{box-shadow:0 0 0 1px var(--color-brand-active)}.jsondraw--mobile.jsondraw .help-icon{width:var(--mobile-action-button-size, 2rem);height:var(--mobile-action-button-size, 2rem)}.jsondraw .help-icon{width:var(--lg-button-size);height:var(--lg-button-size)}.jsondraw .help-icon svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.jsondraw .reset-zoom-button{font-family:var(--ui-font)}.jsondraw .finalize-button{display:grid;grid-auto-flow:column;gap:.4em;margin-top:auto;margin-bottom:auto;margin-inline-start:.6em}.jsondraw .undo-redo-buttons,.jsondraw .eraser-buttons{display:grid;grid-auto-flow:column;margin-top:auto;margin-bottom:auto;margin-inline-start:.6em}.jsondraw--mobile.jsondraw aside{display:none}.jsondraw--mobile.jsondraw .scroll-back-to-content{bottom:calc(100px + var(--sab, 0));z-index:-1}:root[dir=rtl] .jsondraw .rtl-mirror{transform:scaleX(-1)}.jsondraw .zen-mode-visibility{visibility:visible;opacity:1;height:auto;width:auto;transition:opacity .5s}.jsondraw .zen-mode-visibility.zen-mode-visibility--hidden{visibility:hidden;opacity:0;height:0;width:0;transition:opacity .5s}.jsondraw .disable-pointerEvents{pointer-events:none !important}.jsondraw.jsondraw--view-mode .App-menu{display:flex;justify-content:space-between}.jsondraw input.is-redacted{-webkit-text-security:disc}.jsondraw input[type=text],.jsondraw textarea:not(.jsondraw-wysiwyg){color:var(--text-primary-color);border:1.5px solid var(--input-border-color);padding:.75rem;white-space:nowrap;border-radius:var(--space-factor);background-color:var(--input-bg-color)}.jsondraw input[type=text]:not(:focus):hover,.jsondraw textarea:not(.jsondraw-wysiwyg):not(:focus):hover{border-color:var(--color-brand-hover)}.jsondraw input[type=text]:focus,.jsondraw textarea:not(.jsondraw-wysiwyg):focus{outline:none;border-color:var(--color-brand-hover)}.jsondraw textarea.jsondraw-wysiwyg{font-family:Excalifont,\"Excalifont Fallback\",Assistant,system-ui !important}@media print{.jsondraw .App-bottom-bar,.jsondraw .FixedSideContainer,.jsondraw .layer-ui__wrapper{display:none}}.jsondraw ::-webkit-scrollbar{width:4px;height:3px}.jsondraw select::-webkit-scrollbar{width:10px}.jsondraw ::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:10px}.jsondraw ::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}.jsondraw ::-webkit-scrollbar-thumb:active{background:var(--scrollbar-thumb)}.jsondraw .mobile-misc-tools-container{position:absolute;top:calc(5rem - var(--editor-container-padding));right:calc(var(--editor-container-padding)*-1);display:flex;flex-direction:column;border:1px solid var(--sidebar-border-color);border-top-left-radius:var(--border-radius-lg);border-bottom-left-radius:var(--border-radius-lg);border-right:0;overflow:hidden;background-color:var(--island-bg-color)}.jsondraw .mobile-misc-tools-container .ToolIcon__icon{width:2rem;height:2rem;border-radius:0}.jsondraw .mobile-misc-tools-container .default-sidebar-trigger{border:0}.jsondraw .App-toolbar--mobile{overflow:visible;max-width:98vw}.jsondraw .App-toolbar--mobile .ToolIcon__keybinding{display:none}.jsondraw .UserList-Wrapper{margin:0;padding:0;border:none;text-align:left}.jsondraw .UserList-Wrapper legend{display:block;font-size:.75rem;font-weight:400;margin:0 0 .25rem;padding:0}.jsondraw .main-menu{z-index:var(--zIndex-ui-main-menu)}.jsondraw .main-menu-trigger{border:none;box-shadow:0 0 0 1px var(--color-surface-lowest);background-color:var(--color-surface-low)}.jsondraw .main-menu-trigger:active{box-shadow:0 0 0 1px var(--color-brand-active)}.jsondraw--mobile.jsondraw .main-menu-trigger{width:var(--mobile-action-button-size, 2rem);height:var(--mobile-action-button-size, 2rem)}.jsondraw .App-mobile-menu,.jsondraw .App-menu__left{--button-border: transparent;--button-bg: var(--color-surface-mid)}.jsondraw.theme--dark.jsondraw .App-mobile-menu,.jsondraw.theme--dark.jsondraw .App-menu__left{--button-hover-bg: #363541;--button-bg: var(--color-surface-high)}.jsondraw .App-menu__left .buttonList{padding:.25rem 0}.jsondraw .jsondraw__paragraph{margin:1rem 0}.jsondraw .Modal__content .jsondraw__paragraph:first-child{margin-top:0}.jsondraw .Modal__content .jsondraw__paragraph+.jsondraw__paragraph{margin-top:0rem}.jsondraw .link-button{display:flex;text-decoration:none !important}.ErrorSplash.jsondraw{min-height:100vh;padding:20px 0;overflow:auto;display:flex;align-items:center;justify-content:center;user-select:text}.ErrorSplash.jsondraw .ErrorSplash-messageContainer{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background-color:#ffe3e3;border:3px solid #c92a2a}.ErrorSplash.jsondraw .ErrorSplash-paragraph{margin:15px 0;max-width:600px}.ErrorSplash.jsondraw .ErrorSplash-paragraph.align-center{text-align:center}.ErrorSplash.jsondraw .bigger,.ErrorSplash.jsondraw .bigger button{font-size:1.1em}.ErrorSplash.jsondraw .smaller,.ErrorSplash.jsondraw .smaller button{font-size:.9em}.ErrorSplash.jsondraw .ErrorSplash-details{display:flex;flex-direction:column;align-items:flex-start}.ErrorSplash.jsondraw .ErrorSplash-details textarea{width:100%;margin:10px 0;font-family:\"Cascadia\";font-size:.8em}.jsondraw__embeddable-container .jsondraw__embeddable-container__inner{overflow:hidden;display:flex;align-items:center;justify-content:center;border-radius:var(--embeddable-radius)}.jsondraw__embeddable-container .jsondraw__embeddable__outer{width:100%;height:100%}.jsondraw__embeddable-container .jsondraw__embeddable__outer>*{border-radius:var(--embeddable-radius)}.jsondraw__embeddable-container .jsondraw__embeddable-hint{position:absolute;z-index:1;background:rgba(0,0,0,.5);padding:1rem 1.6rem;border-radius:12px;color:#fff;font-weight:700;letter-spacing:.6px;font-family:\"Assistant\"}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/css/theme.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/styles.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"./variables.module\\\" as *;\\n@forward \\\"./variables.module\\\";\\n\\n.jsondraw {\\n  --theme-filter: none;\\n  --button-destructive-bg-color: #{$color-red-1};\\n  --button-destructive-color: #{$color-red-9};\\n  --button-gray-1: #{$color-gray-2};\\n  --button-gray-2: #{$color-gray-4};\\n  --button-gray-3: #{$color-gray-5};\\n  --mobile-action-button-bg: rgba(255, 255, 255, 0.35);\\n  --mobile-color-border: var(--default-border-color);\\n  --button-special-active-bg-color: #{$color-green-0};\\n  --dialog-border-color: var(--color-gray-20);\\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>');\\n  --focus-highlight-color: #{$color-blue-2};\\n  --icon-fill-color: var(--color-on-surface);\\n  --icon-green-fill-color: #{$color-green-9};\\n  --default-bg-color: #fff;\\n  --input-bg-color: #fff;\\n  --input-border-color: #{$color-gray-4};\\n  --input-hover-bg-color: #{$color-gray-1};\\n  --input-label-color: #{$color-gray-7};\\n  --island-bg-color: #ffffff;\\n  --island-bg-color-alt: #fff;\\n  --keybinding-color: var(--color-gray-40);\\n  --link-color: #{$color-blue-7};\\n  --link-color-hover: #{$color-blue-8};\\n  --link-color-active: #{$color-blue-2};\\n  --overlay-bg-color: #{color.adjust(#fff, $alpha: -0.12)};\\n  --popup-bg-color: var(--island-bg-color);\\n  --popup-secondary-bg-color: #{$color-gray-1};\\n  --popup-text-color: #000;\\n  --popup-text-inverted-color: #fff;\\n  --select-highlight-color: #{$color-blue-5};\\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\\n\\n  --button-hover-bg: var(--color-surface-high);\\n  --button-active-bg: var(--color-surface-high);\\n  --button-active-border: var(--color-brand-active);\\n  --default-border-color: var(--color-surface-high);\\n\\n  --default-button-size: 2rem;\\n  --default-icon-size: 1rem;\\n  --lg-button-size: 2.25rem;\\n  --lg-icon-size: 1rem;\\n  --editor-container-padding: 1rem;\\n  --mobile-action-button-size: 2rem;\\n\\n  --scrollbar-thumb: var(--button-gray-2);\\n  --scrollbar-thumb-hover: var(--button-gray-3);\\n\\n  --color-slider-track: hsl(240, 100%, 90%);\\n  --color-slider-thumb: var(--color-gray-80);\\n\\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n  --avatar-border-color: var(--color-gray-20);\\n  --sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n  --sidebar-border-color: var(--color-surface-high);\\n  --sidebar-bg-color: var(--island-bg-color);\\n  --library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01),\\n    0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09),\\n    0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);\\n  --chat-msg-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\\n\\n  --space-factor: 0.25rem;\\n  --text-primary-color: var(--color-on-surface);\\n\\n  --color-selection: #6965db;\\n\\n  --color-icon-white: #fff;\\n\\n  --color-primary: #6965db;\\n  --color-primary-darker: #5b57d1;\\n  --color-primary-darkest: #4a47b1;\\n  --color-primary-light: #e3e2fe;\\n  --color-primary-light-darker: #d7d5ff;\\n  --color-primary-hover: #5753d0;\\n\\n  --color-gray-10: #f5f5f5;\\n  --color-gray-20: #ebebeb;\\n  --color-gray-30: #d6d6d6;\\n  --color-gray-40: #b8b8b8;\\n  --color-gray-50: #999999;\\n  --color-gray-60: #7a7a7a;\\n  --color-gray-70: #5c5c5c;\\n  --color-gray-80: #3d3d3d;\\n  --color-gray-85: #242424;\\n  --color-gray-90: #1e1e1e;\\n  --color-gray-100: #121212;\\n\\n  --color-disabled: var(--color-gray-40);\\n\\n  --color-warning: #fceeca;\\n  --color-warning-dark: #f5c354;\\n  --color-warning-darker: #f3ab2c;\\n  --color-warning-darkest: #ec8b14;\\n  --color-text-warning: var(--text-primary-color);\\n\\n  --color-danger: #db6965;\\n  --color-danger-dark: #db6965;\\n  --color-danger-darker: #d65550;\\n  --color-danger-darkest: #d1413c;\\n  --color-danger-text: black;\\n\\n  --color-danger-background: #fff0f0;\\n  --color-danger-icon-background: #ffdad6;\\n  --color-danger-color: #700000;\\n  --color-danger-icon-color: #700000;\\n\\n  --color-warning-background: var(--color-warning);\\n  --color-warning-icon-background: var(--color-warning-dark);\\n  --color-warning-color: var(--text-primary-color);\\n  --color-warning-icon-color: var(--text-primary-color);\\n\\n  --color-muted: var(--color-gray-30);\\n  --color-muted-darker: var(--color-gray-60);\\n  --color-muted-darkest: var(--color-gray-100);\\n  --color-muted-background: var(--color-gray-80);\\n  --color-muted-background-darker: var(--color-gray-100);\\n\\n  --color-promo: var(--color-primary);\\n\\n  --color-success: #cafccc;\\n  --color-success-darker: #bafabc;\\n  --color-success-darkest: #a5eba8;\\n  --color-success-text: #268029;\\n  --color-success-contrast: #65bb6a;\\n  --color-success-contrast-hover: #6bcf70;\\n  --color-success-contrast-active: #6edf74;\\n\\n  --color-logo-icon: var(--color-primary);\\n  --color-logo-text: #190064;\\n\\n  --border-radius-md: 0.375rem;\\n  --border-radius-lg: 0.5rem;\\n\\n  --color-surface-high: #f1f0ff;\\n  --color-surface-mid: #f6f6f9;\\n  --color-surface-low: #ececf4;\\n  --color-surface-lowest: #ffffff;\\n  --color-on-surface: #1b1b1f;\\n  --color-brand-hover: #5753d0;\\n  --color-on-primary-container: #030064;\\n  --color-surface-primary-container: #e0dfff;\\n  --color-brand-active: #4440bf;\\n  --color-border-outline: #767680;\\n  --color-border-outline-variant: #c5c5d0;\\n  --color-surface-primary-container: #e0dfff;\\n\\n  --color-badge: #0b6513;\\n  --background-color-badge: #d3ffd2;\\n\\n  @include isMobile {\\n    --editor-container-padding: 0.75rem;\\n  }\\n\\n  @media screen and (min-device-width: 1921px) {\\n    --lg-button-size: 2.5rem;\\n    --lg-icon-size: 1.25rem;\\n    --default-button-size: 2.25rem;\\n    --default-icon-size: 1.25rem;\\n  }\\n\\n  &.theme--dark {\\n    &.theme--dark-background-none {\\n      background: none;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    --theme-filter: invert(93%) hue-rotate(180deg);\\n    --button-destructive-bg-color: #5a0000;\\n    --button-destructive-color: #{$color-red-3};\\n\\n    --button-gray-1: #363636;\\n    --button-gray-2: #272727;\\n    --button-gray-3: #222;\\n    --mobile-action-button-bg: var(--island-bg-color);\\n    --mobile-color-border: rgba(255, 255, 255, 0.85);\\n    --button-special-active-bg-color: #204624;\\n    --dialog-border-color: var(--color-gray-80);\\n    --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path fill=\\\"%23ced4da\\\" d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>');\\n    --focus-highlight-color: #{$color-blue-6};\\n    --icon-green-fill-color: #{$color-green-4};\\n    --default-bg-color: #121212;\\n    --input-bg-color: #121212;\\n    --input-border-color: #2e2e2e;\\n    --input-hover-bg-color: #181818;\\n    --input-label-color: #{$color-gray-2};\\n    --island-bg-color: #232329;\\n    --island-bg-color-alt: hsl(240, 12%, 12%);\\n    --keybinding-color: var(--color-gray-60);\\n    --link-color: #{$color-blue-4};\\n    --overlay-bg-color: #{color.adjust($color-gray-8, $alpha: -0.88)};\\n    --popup-secondary-bg-color: #222;\\n    --popup-text-color: #{$color-gray-4};\\n    --popup-text-inverted-color: #2c2c2c;\\n    --select-highlight-color: #{$color-blue-4};\\n    --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\\n      0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\\n      0px 7px 14px 0px rgba(0, 0, 0, 0.05);\\n\\n    --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n      0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n      0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n      0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n      0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n      0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n    --avatar-border-color: var(--color-gray-85);\\n\\n    --scrollbar-thumb: #{$color-gray-8};\\n    --scrollbar-thumb-hover: #{$color-gray-7};\\n\\n    --color-slider-track: hsl(244, 23%, 39%);\\n\\n    // will be inverted to a lighter color.\\n    --color-selection: #3530c4;\\n\\n    --color-icon-white: var(--color-gray-90);\\n\\n    --color-primary: #a8a5ff;\\n    --color-primary-darker: #b2aeff;\\n    --color-primary-darkest: #beb9ff;\\n    --color-primary-light: #4f4d6f;\\n    --color-primary-light-darker: #43415e;\\n    --color-primary-hover: #bbb8ff;\\n\\n    --color-disabled: var(--color-gray-70);\\n\\n    --color-text-warning: var(--color-gray-80);\\n\\n    --color-danger: #ffa8a5;\\n    --color-danger-dark: #672120;\\n    --color-danger-darker: #8f2625;\\n    --color-danger-darkest: #ac2b29;\\n    --color-danger-text: #fbcbcc;\\n\\n    --color-danger-background: #fbcbcc;\\n    --color-danger-icon-background: #672120;\\n    --color-danger-color: #261919;\\n    --color-danger-icon-color: #fbcbcc;\\n\\n    --color-warning-background: var(--color-warning);\\n    --color-warning-icon-background: var(--color-warning-dark);\\n    --color-warning-color: var(--color-gray-80);\\n    --color-warning-icon-color: var(--color-gray-80);\\n\\n    --color-muted: var(--color-gray-80);\\n    --color-muted-darker: var(--color-gray-60);\\n    --color-muted-darkest: var(--color-gray-20);\\n    --color-muted-background: var(--color-gray-40);\\n    --color-muted-background-darker: var(--color-gray-20);\\n\\n    --color-logo-text: #e2dfff;\\n\\n    --color-surface-high: #2e2d39;\\n    --color-surface-low: hsl(240, 8%, 15%);\\n    --color-surface-mid: hsl(240 6% 10%);\\n    --color-surface-lowest: hsl(0, 0%, 7%);\\n    --color-on-surface: #e3e3e8;\\n    --color-brand-hover: #bbb8ff;\\n    --color-on-primary-container: #e0dfff;\\n    --color-surface-primary-container: #403e6a;\\n    --color-brand-active: #d0ccff;\\n    --color-border-outline: #8e8d9c;\\n    --color-border-outline-variant: #46464f;\\n    --color-surface-primary-container: #403e6a;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\",\"@use \\\"./variables.module\\\" as *;\\n@use \\\"./theme\\\";\\n\\n:root {\\n  --zIndex-canvas: 1;\\n  --zIndex-interactiveCanvas: 2;\\n  --zIndex-svgLayer: 3;\\n  --zIndex-wysiwyg: 3;\\n  --zIndex-canvasButtons: 3;\\n  --zIndex-layerUI: 4;\\n  --zIndex-eyeDropperBackdrop: 5;\\n  --zIndex-eyeDropperPreview: 6;\\n  --zIndex-hyperlinkContainer: 7;\\n\\n  --zIndex-ui-bottom: 60;\\n  --zIndex-ui-context-menu: 90;\\n  --zIndex-ui-styles-popup: 100;\\n  --zIndex-ui-top: 100;\\n  --zIndex-ui-main-menu: 110;\\n  --zIndex-ui-library: 120;\\n\\n  --zIndex-modal: 1000;\\n  --zIndex-popup: 1001;\\n  --zIndex-toast: 999999;\\n\\n  --sab: env(safe-area-inset-bottom);\\n  --sal: env(safe-area-inset-left);\\n  --sar: env(safe-area-inset-right);\\n  --sat: env(safe-area-inset-top);\\n}\\n\\nbody.jsondraw-cursor-resize,\\nbody.jsondraw-cursor-resize a:hover,\\nbody.jsondraw-cursor-resize * {\\n  cursor: ew-resize;\\n}\\n\\n.jsondraw {\\n  --ui-font:\\n    Excalifont, \\\"Excalifont Fallback\\\", Assistant, system-ui, BlinkMacSystemFont, -apple-system,\\n    Segoe UI, Roboto, Helvetica, Arial, sans-serif;\\n  font-family: var(--ui-font);\\n\\n  position: relative;\\n  overflow: hidden;\\n  color: var(--text-primary-color);\\n  display: flex;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  height: 100%;\\n  width: 100%;\\n\\n  button {\\n    // browser default. Looks kinda good on low-dpi.\\n    font-size: 0.8333rem;\\n  }\\n\\n  button,\\n  label {\\n    @include buttonNoHighlight;\\n  }\\n\\n  button {\\n    cursor: pointer;\\n    user-select: none;\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\\n  // serves 2 purposes:\\n  // 1. prevent selecting text outside the component when double-clicking or\\n  //    dragging inside it (e.g. on canvas)\\n  // 2. prevent selecting UI, both from the inside, and from outside the\\n  //    component (e.g. if you select text in a sidebar)\\n  user-select: none;\\n\\n  .jsondraw-link,\\n  a {\\n    font-weight: 500;\\n    text-decoration: none;\\n    color: var(--link-color);\\n    user-select: none;\\n    cursor: pointer;\\n\\n    &:hover {\\n      text-decoration: underline;\\n    }\\n    &:active {\\n      text-decoration: none;\\n    }\\n  }\\n\\n  canvas {\\n    touch-action: none;\\n\\n    // following props improve blurriness at certain devicePixelRatios.\\n    // AFAIK it doesn't affect export (in fact, export seems sharp either way).\\n\\n    image-rendering: pixelated; // chromium\\n    // NOTE: must be declared *after* the above\\n    image-rendering: -moz-crisp-edges; // FF\\n\\n    z-index: var(--zIndex-canvas);\\n\\n    &.interactive {\\n      z-index: var(--zIndex-interactiveCanvas);\\n      // Apply theme filter only to interactive canvas for UI elements\\n      // (resize handles, selection boxes, etc.)\\n      filter: var(--theme-filter);\\n    }\\n\\n    // Remove the main canvas from document flow to avoid resizeObserver\\n    // feedback loop (see https://github.com/jsondraw/jsondraw/pull/3379)\\n  }\\n\\n  &__canvas-wrapper,\\n  &__canvas.static {\\n    pointer-events: none;\\n  }\\n\\n  &__canvas {\\n    position: absolute;\\n  }\\n\\n  &__embeddable {\\n    width: 100%;\\n    height: 100%;\\n    border: 0;\\n  }\\n\\n  &__embeddable-container {\\n    position: absolute;\\n    z-index: 2;\\n    transform-origin: top left;\\n    pointer-events: none;\\n  }\\n\\n  .FixedSideContainer {\\n    padding-top: var(--sat, 0);\\n    padding-right: var(--sar, 0);\\n    padding-bottom: var(--sab, 0);\\n    padding-left: var(--sal, 0);\\n  }\\n\\n  .panelRow {\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n\\n  .selected-shape-actions {\\n    display: flex;\\n    flex-direction: column;\\n    row-gap: 0.75rem;\\n\\n    h3,\\n    legend,\\n    .control-label {\\n      margin: 0;\\n      margin-bottom: 0.25rem;\\n      font-size: 0.75rem;\\n      color: var(--text-primary-color);\\n      font-weight: 400;\\n      display: block;\\n    }\\n\\n    .control-label input {\\n      display: block;\\n      width: 100%;\\n    }\\n\\n    legend {\\n      padding: 0;\\n    }\\n\\n    .iconSelectList {\\n      flex-wrap: wrap;\\n      position: relative;\\n    }\\n\\n    .buttonList {\\n      flex-wrap: wrap;\\n      display: flex;\\n      column-gap: 0.5rem;\\n      row-gap: 0.5rem;\\n\\n      label {\\n        font-size: 0.75rem;\\n      }\\n\\n      input[type=\\\"radio\\\"],\\n      input[type=\\\"button\\\"] {\\n        opacity: 0;\\n        position: absolute;\\n        pointer-events: none;\\n      }\\n\\n      .iconRow {\\n        margin-top: 8px;\\n      }\\n    }\\n\\n    fieldset {\\n      margin: 0;\\n      padding: 0;\\n      border: none;\\n    }\\n  }\\n\\n  .divider {\\n    width: 1px;\\n    background-color: $color-gray-2;\\n    margin: 1px;\\n  }\\n\\n  .welcome-screen-menu-item:focus-visible,\\n  .dropdown-menu-item:focus-visible,\\n  button:focus-visible,\\n  .buttonList label:focus-within,\\n  input:focus-visible {\\n    outline: transparent;\\n    box-shadow: 0 0 0 1px var(--color-brand-hover);\\n  }\\n\\n  // radix doesn't allow differntiating between hover and keyboard active\\n  // states (it's forcing :focus on both).\\n  //\\n  // proper handling would be to disable :focus-visible by default, and enable\\n  // on keyboard arrows (it'd then have to be disabled again, e.g. on keydown\\n  // or container focus)\\n  //\\n  // alas, that is left for another day\\n  [data-radix-collection-item]:focus-visible {\\n    box-shadow: none !important;\\n  }\\n\\n  .buttonList {\\n    .ToolIcon__icon {\\n      all: unset !important;\\n      display: flex !important;\\n    }\\n\\n    button {\\n      background-color: transparent;\\n    }\\n\\n    label,\\n    button,\\n    .zIndexButton {\\n      @include outlineButtonIconStyles;\\n    }\\n  }\\n\\n  .App-top-bar {\\n    z-index: var(--zIndex-ui-top);\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\\n  .App-welcome-screen {\\n    z-index: var(--zIndex-layerUI);\\n  }\\n\\n  .App-bottom-bar {\\n    position: absolute;\\n    // account for margins\\n    width: calc(100% - 28px);\\n    max-width: 450px;\\n    bottom: 0;\\n    left: 50%;\\n    transform: translateX(-50%);\\n    --bar-padding: calc(4 * var(--space-factor));\\n    z-index: var(--zIndex-ui-bottom);\\n    display: flex;\\n    flex-direction: column;\\n\\n    pointer-events: none;\\n    justify-content: center;\\n\\n    > .Island {\\n      box-sizing: border-box;\\n      max-height: 100%;\\n      padding: 4px;\\n      display: flex;\\n      flex-direction: column;\\n      pointer-events: var(--ui-pointerEvents);\\n    }\\n  }\\n\\n  .App-toolbar {\\n    display: flex;\\n    justify-content: center;\\n\\n    .eraser {\\n      &.ToolIcon:hover {\\n        --icon-fill-color: #fff;\\n        --keybinding-color: #fff;\\n      }\\n      &.active {\\n        background-color: var(--color-primary);\\n      }\\n    }\\n  }\\n\\n  .jsondraw-ui-top-left,\\n  .jsondraw-ui-top-right {\\n    display: flex;\\n    align-items: center;\\n    gap: 0.5rem;\\n  }\\n\\n  .App-toolbar-content {\\n    display: flex;\\n    flex-direction: column;\\n\\n    pointer-events: none;\\n\\n    & > * {\\n      pointer-events: var(--ui-pointerEvents);\\n    }\\n  }\\n\\n  .App-mobile-menu {\\n    width: 100%;\\n    overflow-x: visible;\\n    overflow-y: auto;\\n    box-sizing: border-box;\\n    margin-bottom: var(--bar-padding);\\n\\n    .selected-shape-actions {\\n      padding: 8px 8px 0 8px;\\n    }\\n  }\\n\\n  .App-menu {\\n    display: grid;\\n    color: var(--icon-fill-color);\\n  }\\n\\n  .shapes-section {\\n    display: flex;\\n    justify-content: center;\\n    pointer-events: none !important;\\n\\n    & > * {\\n      pointer-events: var(--ui-pointerEvents);\\n    }\\n  }\\n\\n  .App-menu_top {\\n    grid-template-columns: 1fr 2fr 1fr;\\n    grid-gap: 1rem;\\n    align-items: flex-start;\\n    cursor: default;\\n    pointer-events: none !important;\\n\\n    & > * {\\n      pointer-events: var(--ui-pointerEvents);\\n    }\\n\\n    @media (min-width: 1536px) {\\n      grid-template-columns: 1fr 1fr 1fr;\\n      grid-gap: 3rem;\\n    }\\n  }\\n\\n  .App-menu_top > *:first-child {\\n    justify-self: flex-start;\\n  }\\n\\n  .selected-shape-actions-container {\\n    width: fit-content;\\n\\n    &--compact {\\n      min-width: 48px;\\n    }\\n  }\\n\\n  .App-menu_top > *:last-child {\\n    justify-self: flex-end;\\n  }\\n\\n  .App-menu_bottom {\\n    position: absolute;\\n    bottom: 1rem;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n    cursor: default;\\n    pointer-events: none !important;\\n    box-sizing: border-box;\\n    padding: 0 1rem;\\n\\n    &--transition-left {\\n      section {\\n        width: 185px;\\n      }\\n    }\\n\\n    section {\\n      display: flex;\\n    }\\n  }\\n\\n  .App-menu_bottom > *:first-child {\\n    justify-self: flex-start;\\n  }\\n\\n  .App-menu_bottom > *:last-child {\\n    justify-self: flex-end;\\n  }\\n\\n  .App-menu_left {\\n    grid-template-rows: 1fr auto 1fr;\\n    height: 100%;\\n  }\\n\\n  .App-menu_right {\\n    grid-template-rows: 1fr;\\n    height: 100%;\\n  }\\n\\n  .App-menu__left {\\n    overflow-y: auto;\\n    padding: 0.75rem;\\n    width: 12.5rem;\\n    box-sizing: border-box;\\n    position: absolute;\\n  }\\n\\n  .dropdown-select {\\n    height: 1.5rem;\\n    padding: 0;\\n    padding-inline-start: 0.5rem;\\n    padding-inline-end: 1.5rem;\\n    color: var(--icon-fill-color);\\n    background-color: var(--button-gray-1);\\n    border-radius: var(--space-factor);\\n    border: 1px solid var(--button-gray-2);\\n    font-size: 0.8rem;\\n    font-family: inherit;\\n    outline: none;\\n    appearance: none;\\n    background-image: var(--dropdown-icon);\\n    background-repeat: no-repeat;\\n    background-position:\\n      right 0.7rem top 50%,\\n      0 0;\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      background-position:\\n        left 0.7rem top 50%,\\n        0 0;\\n    }\\n\\n    background-size:\\n      0.65em auto,\\n      100%;\\n\\n    &:focus {\\n      box-shadow: 0 0 0 2px var(--focus-highlight-color);\\n    }\\n\\n    &:hover {\\n      background-color: var(--button-gray-2);\\n    }\\n\\n    &:active {\\n      background-color: var(--button-gray-2);\\n    }\\n\\n    &__language {\\n      height: 2rem;\\n      background-color: var(--island-bg-color);\\n      border-color: var(--default-border-color) !important;\\n      cursor: pointer;\\n\\n      &:hover {\\n        background-color: var(--island-bg-color);\\n      }\\n    }\\n  }\\n\\n  .scroll-back-to-content {\\n    border-radius: var(--border-radius-lg);\\n    background-color: var(--island-bg-color);\\n    color: var(--icon-fill-color);\\n\\n    border: 1px solid var(--default-border-color);\\n    padding: 10px 20px;\\n    position: absolute;\\n    left: 50%;\\n    bottom: 30px;\\n    transform: translateX(-50%);\\n    pointer-events: var(--ui-pointerEvents);\\n    font-family: inherit;\\n\\n    &:hover {\\n      background-color: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      border: 1px solid var(--button-active-border);\\n    }\\n  }\\n\\n  .help-icon {\\n    @include outlineButtonStyles;\\n    @include filledButtonOnCanvas;\\n\\n    width: var(--lg-button-size);\\n    height: var(--lg-button-size);\\n\\n    svg {\\n      width: var(--lg-icon-size);\\n      height: var(--lg-icon-size);\\n    }\\n  }\\n\\n  .reset-zoom-button {\\n    font-family: var(--ui-font);\\n  }\\n\\n  .finalize-button {\\n    display: grid;\\n    grid-auto-flow: column;\\n    gap: 0.4em;\\n    margin-top: auto;\\n    margin-bottom: auto;\\n    margin-inline-start: 0.6em;\\n  }\\n\\n  .undo-redo-buttons,\\n  .eraser-buttons {\\n    display: grid;\\n    grid-auto-flow: column;\\n    margin-top: auto;\\n    margin-bottom: auto;\\n    margin-inline-start: 0.6em;\\n  }\\n\\n  @include isMobile {\\n    aside {\\n      display: none;\\n    }\\n    .scroll-back-to-content {\\n      bottom: calc(100px + var(--sab, 0));\\n      z-index: -1;\\n    }\\n  }\\n\\n  .rtl-mirror {\\n    :root[dir=\\\"rtl\\\"] & {\\n      transform: scaleX(-1);\\n    }\\n  }\\n\\n  .zen-mode-visibility {\\n    visibility: visible;\\n    opacity: 1;\\n    height: auto;\\n    width: auto;\\n    transition: opacity 0.5s;\\n\\n    &.zen-mode-visibility--hidden {\\n      visibility: hidden;\\n      opacity: 0;\\n      height: 0;\\n      width: 0;\\n      transition: opacity 0.5s;\\n    }\\n  }\\n\\n  .disable-pointerEvents {\\n    pointer-events: none !important;\\n  }\\n\\n  &.jsondraw--view-mode {\\n    .App-menu {\\n      display: flex;\\n      justify-content: space-between;\\n    }\\n  }\\n\\n  input.is-redacted {\\n    // we don't use type=password because browsers (chrome?) prompt\\n    // you to save it which is annoying\\n    -webkit-text-security: disc;\\n  }\\n\\n  input[type=\\\"text\\\"],\\n  textarea:not(.jsondraw-wysiwyg) {\\n    color: var(--text-primary-color);\\n    border: 1.5px solid var(--input-border-color);\\n    padding: 0.75rem;\\n    white-space: nowrap;\\n    border-radius: var(--space-factor);\\n    background-color: var(--input-bg-color);\\n\\n    &:not(:focus) {\\n      &:hover {\\n        border-color: var(--color-brand-hover);\\n      }\\n    }\\n\\n    &:focus {\\n      outline: none;\\n      border-color: var(--color-brand-hover);\\n    }\\n  }\\n\\n  textarea.jsondraw-wysiwyg {\\n    font-family: Excalifont, \\\"Excalifont Fallback\\\", Assistant, system-ui !important;\\n  }\\n\\n  @media print {\\n    .App-bottom-bar,\\n    .FixedSideContainer,\\n    .layer-ui__wrapper {\\n      display: none;\\n    }\\n  }\\n\\n  // use custom, minimalistic scrollbar\\n  // (doesn't work in Firefox)\\n  ::-webkit-scrollbar {\\n    width: 4px;\\n    height: 3px;\\n  }\\n\\n  select::-webkit-scrollbar {\\n    width: 10px;\\n  }\\n\\n  ::-webkit-scrollbar-thumb {\\n    background: var(--scrollbar-thumb);\\n    border-radius: 10px;\\n  }\\n  ::-webkit-scrollbar-thumb:hover {\\n    background: var(--scrollbar-thumb-hover);\\n  }\\n  ::-webkit-scrollbar-thumb:active {\\n    background: var(--scrollbar-thumb);\\n  }\\n\\n  .mobile-misc-tools-container {\\n    position: absolute;\\n    top: calc(5rem - var(--editor-container-padding));\\n    right: calc(var(--editor-container-padding) * -1);\\n    display: flex;\\n    flex-direction: column;\\n    border: 1px solid var(--sidebar-border-color);\\n    border-top-left-radius: var(--border-radius-lg);\\n    border-bottom-left-radius: var(--border-radius-lg);\\n    border-right: 0;\\n    overflow: hidden;\\n\\n    background-color: var(--island-bg-color);\\n\\n    .ToolIcon__icon {\\n      width: 2rem;\\n      height: 2rem;\\n      border-radius: 0;\\n    }\\n\\n    .default-sidebar-trigger {\\n      border: 0;\\n    }\\n  }\\n\\n  .App-toolbar--mobile {\\n    overflow: visible;\\n    max-width: 98vw;\\n\\n    .ToolIcon__keybinding {\\n      display: none;\\n    }\\n  }\\n  .UserList-Wrapper {\\n    margin: 0;\\n    padding: 0;\\n    border: none;\\n    text-align: left;\\n\\n    legend {\\n      display: block;\\n      font-size: 0.75rem;\\n      font-weight: 400;\\n      margin: 0 0 0.25rem;\\n      padding: 0;\\n    }\\n  }\\n\\n  .main-menu {\\n    z-index: var(--zIndex-ui-main-menu);\\n  }\\n  .main-menu-trigger {\\n    @include filledButtonOnCanvas;\\n  }\\n\\n  .App-mobile-menu,\\n  .App-menu__left {\\n    --button-border: transparent;\\n    --button-bg: var(--color-surface-mid);\\n  }\\n\\n  @at-root .jsondraw.theme--dark#{&} {\\n    .App-mobile-menu,\\n    .App-menu__left {\\n      --button-hover-bg: #363541;\\n      --button-bg: var(--color-surface-high);\\n    }\\n  }\\n\\n  .App-menu__left {\\n    .buttonList {\\n      padding: 0.25rem 0;\\n    }\\n  }\\n\\n  .jsondraw__paragraph {\\n    margin: 1rem 0;\\n  }\\n\\n  .Modal__content {\\n    .jsondraw__paragraph:first-child {\\n      margin-top: 0;\\n    }\\n    .jsondraw__paragraph + .jsondraw__paragraph {\\n      margin-top: 0rem;\\n    }\\n  }\\n\\n  .link-button {\\n    display: flex;\\n    text-decoration: none !important;\\n  }\\n}\\n\\n.ErrorSplash.jsondraw {\\n  min-height: 100vh;\\n  padding: 20px 0;\\n  overflow: auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  user-select: text;\\n\\n  .ErrorSplash-messageContainer {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    justify-content: center;\\n\\n    padding: 40px;\\n    background-color: $color-red-1;\\n    border: 3px solid $color-red-9;\\n  }\\n\\n  .ErrorSplash-paragraph {\\n    margin: 15px 0;\\n    max-width: 600px;\\n\\n    &.align-center {\\n      text-align: center;\\n    }\\n  }\\n\\n  .bigger,\\n  .bigger button {\\n    font-size: 1.1em;\\n  }\\n\\n  .smaller,\\n  .smaller button {\\n    font-size: 0.9em;\\n  }\\n\\n  .ErrorSplash-details {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n\\n    textarea {\\n      width: 100%;\\n      margin: 10px 0;\\n      font-family: \\\"Cascadia\\\";\\n      font-size: 0.8em;\\n    }\\n  }\\n}\\n\\n.jsondraw__embeddable-container {\\n  .jsondraw__embeddable-container__inner {\\n    overflow: hidden;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    border-radius: var(--embeddable-radius);\\n  }\\n\\n  .jsondraw__embeddable__outer {\\n    width: 100%;\\n    height: 100%;\\n    & > * {\\n      border-radius: var(--embeddable-radius);\\n    }\\n  }\\n\\n  .jsondraw__embeddable-hint {\\n    position: absolute;\\n    z-index: 1;\\n    background: rgba(0, 0, 0, 0.5);\\n    padding: 1rem 1.6rem;\\n    border-radius: 12px;\\n    color: #fff;\\n    font-weight: 700;\\n    letter-spacing: 0.6px;\\n    font-family: \\\"Assistant\\\";\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .TextInput{display:inline-block}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/TextInput.scss\"],\"names\":[],\"mappings\":\"AAGE,qBACE,oBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .TextInput {\\n    display: inline-block;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Card{display:flex;flex-direction:column;align-items:center;max-width:290px;margin:1em;text-align:center}.jsondraw .Card .Card-icon{font-size:2.6em;display:flex;flex:0 0 auto;padding:1.4rem;border-radius:50%;background:var(--card-color);color:#fff}.jsondraw .Card .Card-icon svg{width:2.8rem;height:2.8rem}.jsondraw .Card .Card-details{font-size:.96em;min-height:90px;padding:0 1em;margin-bottom:auto}.jsondraw .Card .Card-button.ToolIcon_type_button{height:2.5rem;margin-top:1em;margin-bottom:.3em;background-color:var(--card-color)}.jsondraw .Card .Card-button.ToolIcon_type_button:hover{background-color:var(--card-color-darker)}.jsondraw .Card .Card-button.ToolIcon_type_button:active{background-color:var(--card-color-darkest)}.jsondraw .Card .Card-button.ToolIcon_type_button .ToolIcon__label{color:#fff}.jsondraw .Card .Card-button.ToolIcon_type_button .Spinner{--spinner-color: #fff}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Card.scss\"],\"names\":[],\"mappings\":\"AAGE,gBACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAEA,eAAA,CAEA,UAAA,CAEA,iBAAA,CAEA,2BACE,eAAA,CACA,YAAA,CACA,aAAA,CACA,cAAA,CACA,iBAAA,CACA,4BAAA,CACA,UAAA,CAEA,+BACE,YAAA,CACA,aAAA,CAIJ,8BACE,eAAA,CACA,eAAA,CACA,aAAA,CACA,kBAAA,CAGF,kDACE,aAAA,CACA,cAAA,CACA,kBAAA,CACA,kCAAA,CACA,wDACE,yCAAA,CAEF,yDACE,0CAAA,CAEF,mEACE,UAAA,CAGF,2DACE,qBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module.scss\\\" as *;\\n\\n.jsondraw {\\n  .Card {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n\\n    max-width: 290px;\\n\\n    margin: 1em;\\n\\n    text-align: center;\\n\\n    .Card-icon {\\n      font-size: 2.6em;\\n      display: flex;\\n      flex: 0 0 auto;\\n      padding: 1.4rem;\\n      border-radius: 50%;\\n      background: var(--card-color);\\n      color: #fff;\\n\\n      svg {\\n        width: 2.8rem;\\n        height: 2.8rem;\\n      }\\n    }\\n\\n    .Card-details {\\n      font-size: 0.96em;\\n      min-height: 90px;\\n      padding: 0 1em;\\n      margin-bottom: auto;\\n    }\\n\\n    & .Card-button.ToolIcon_type_button {\\n      height: 2.5rem;\\n      margin-top: 1em;\\n      margin-bottom: 0.3em;\\n      background-color: var(--card-color);\\n      &:hover {\\n        background-color: var(--card-color-darker);\\n      }\\n      &:active {\\n        background-color: var(--card-color-darkest);\\n      }\\n      .ToolIcon__label {\\n        color: #fff;\\n      }\\n\\n      .Spinner {\\n        --spinner-color: #fff;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .context-menu-popover{z-index:var(--zIndex-ui-context-menu)}.jsondraw .context-menu{position:relative;border-radius:4px;box-shadow:0 3px 10px rgba(0,0,0,.2);padding:0;list-style:none;user-select:none;margin:-0.25rem 0 0 .125rem;padding:.5rem 0;background-color:var(--popup-secondary-bg-color);border:1px solid var(--button-gray-3);cursor:default}.jsondraw .context-menu button{color:var(--popup-text-color)}.jsondraw .context-menu-item{position:relative;width:100%;min-width:9.5rem;margin:0;padding:.25rem 1rem .25rem 1.25rem;text-align:start;border-radius:0;background-color:rgba(0,0,0,0);border:none;white-space:nowrap;font-family:inherit;display:grid;grid-template-columns:1fr .2fr;align-items:center}.jsondraw .context-menu-item.checkmark::before{position:absolute;left:6px;margin-bottom:1px;content:\"\"}.jsondraw .context-menu-item.dangerous .context-menu-item__label{color:#f03e3e}.jsondraw .context-menu-item .context-menu-item__label{justify-self:start;margin-inline-end:20px}.jsondraw .context-menu-item .context-menu-item__shortcut{justify-self:end;opacity:.6;font-family:inherit;font-size:.7rem}.jsondraw .context-menu-item:hover{color:var(--popup-bg-color);background-color:var(--select-highlight-color)}.jsondraw .context-menu-item:hover.dangerous .context-menu-item__label{color:var(--popup-bg-color)}.jsondraw .context-menu-item:hover.dangerous{background-color:#fa5252}.jsondraw .context-menu-item:focus{z-index:1}.jsondraw--mobile.jsondraw .context-menu-item{display:block}.jsondraw--mobile.jsondraw .context-menu-item .context-menu-item__label{margin-inline-end:0}.jsondraw--mobile.jsondraw .context-menu-item .context-menu-item__shortcut{display:none}.jsondraw .context-menu-item-separator{border:none;border-top:1px solid #adb5bd}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ContextMenu.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAAA,gCAIE,qCACE,CAAA,wBAGF,iBACE,CAAA,iBACA,CAAA,oCACA,CAAA,SACA,CAAA,eACA,CAAA,gBACA,CAAA,2BACA,CAAA,eACA,CAAA,gDACA,CAAA,qCACA,CAAA,cACA,CAAA,+BAGF,6BACE,CAAA,6BAGF,iBACE,CAAA,UACA,CAAA,gBACA,CAAA,QACA,CAAA,kCACA,CAAA,gBACA,CAAA,eACA,CAAA,8BACA,CAAA,WACA,CAAA,kBACA,CAAA,mBACA,CAAA,YAEA,CAAA,8BACA,CAAA,kBACA,CAAA,+CAEA,iBACE,CAAA,QACA,CAAA,iBACA,CAAA,WACA,CAAA,iEAIA,aChDQ,CAAA,uDDqDV,kBACE,CAAA,sBACA,CAAA,0DAEF,gBACE,CAAA,UACA,CAAA,mBACA,CAAA,eACA,CAAA,mCAIJ,2BACE,CAAA,8CACA,CAAA,uEAGE,2BACE,CAAA,6CAFJ,wBCtEU,CAAA,mCD8EZ,SACE,CAAA,8CAIA,aACE,CAAA,wEAEA,mBACE,CAAA,2EAGF,YACE,CAAA,uCAKN,WACE,CAAA,4BACA\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .context-menu-popover {\\n    z-index: var(--zIndex-ui-context-menu);\\n  }\\n\\n  .context-menu {\\n    position: relative;\\n    border-radius: 4px;\\n    box-shadow: 0 3px 10px color.adjust(#000, $alpha: -0.8);\\n    padding: 0;\\n    list-style: none;\\n    user-select: none;\\n    margin: -0.25rem 0 0 0.125rem;\\n    padding: 0.5rem 0;\\n    background-color: var(--popup-secondary-bg-color);\\n    border: 1px solid var(--button-gray-3);\\n    cursor: default;\\n  }\\n\\n  .context-menu button {\\n    color: var(--popup-text-color);\\n  }\\n\\n  .context-menu-item {\\n    position: relative;\\n    width: 100%;\\n    min-width: 9.5rem;\\n    margin: 0;\\n    padding: 0.25rem 1rem 0.25rem 1.25rem;\\n    text-align: start;\\n    border-radius: 0;\\n    background-color: transparent;\\n    border: none;\\n    white-space: nowrap;\\n    font-family: inherit;\\n\\n    display: grid;\\n    grid-template-columns: 1fr 0.2fr;\\n    align-items: center;\\n\\n    &.checkmark::before {\\n      position: absolute;\\n      left: 6px;\\n      margin-bottom: 1px;\\n      content: \\\"\\\\2713\\\";\\n    }\\n\\n    &.dangerous {\\n      .context-menu-item__label {\\n        color: $color-red-7;\\n      }\\n    }\\n\\n    .context-menu-item__label {\\n      justify-self: start;\\n      margin-inline-end: 20px;\\n    }\\n    .context-menu-item__shortcut {\\n      justify-self: end;\\n      opacity: 0.6;\\n      font-family: inherit;\\n      font-size: 0.7rem;\\n    }\\n  }\\n\\n  .context-menu-item:hover {\\n    color: var(--popup-bg-color);\\n    background-color: var(--select-highlight-color);\\n\\n    &.dangerous {\\n      .context-menu-item__label {\\n        color: var(--popup-bg-color);\\n      }\\n      background-color: $color-red-6;\\n    }\\n  }\\n\\n  .context-menu-item:focus {\\n    z-index: 1;\\n  }\\n\\n  @include isMobile {\\n    .context-menu-item {\\n      display: block;\\n\\n      .context-menu-item__label {\\n        margin-inline-end: 0;\\n      }\\n\\n      .context-menu-item__shortcut {\\n        display: none;\\n      }\\n    }\\n  }\\n\\n  .context-menu-item-separator {\\n    border: none;\\n    border-top: 1px solid $color-gray-5;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw-tooltip{--ui-font: Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;font-family:var(--ui-font);position:fixed;z-index:var(--zIndex-popup);padding:8px;border-radius:6px;box-sizing:border-box;pointer-events:none;word-wrap:break-word;background:#000;line-height:1.5;text-align:center;font-size:13px;font-weight:500;color:#fff;display:none}.jsondraw-tooltip.jsondraw-tooltip--visible{display:block}.jsondraw-tooltip-wrapper{display:flex}.jsondraw-tooltip-icon{width:.9em;height:.9em;margin-left:5px;margin-top:1px;display:flex}.jsondraw--mobile.jsondraw-tooltip-icon{display:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Tooltip.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGA,kBACE,kHAAA,CAGA,0BAAA,CACA,cAAA,CACA,2BAAA,CAEA,WAAA,CACA,iBAAA,CACA,qBAAA,CACA,mBAAA,CACA,oBAAA,CAEA,eAAA,CAEA,eAAA,CACA,iBAAA,CACA,cAAA,CACA,eAAA,CACA,UAAA,CAEA,YAAA,CAEA,4CACE,aAAA,CAKJ,0BACE,YAAA,CAGF,uBACE,UAAA,CACA,WAAA,CACA,eAAA,CACA,cAAA,CACA,YAAA,CChBS,wCDmBP,YAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n// container in body where the actual tooltip is appended to\\n.jsondraw-tooltip {\\n  --ui-font:\\n    Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial,\\n    sans-serif;\\n  font-family: var(--ui-font);\\n  position: fixed;\\n  z-index: var(--zIndex-popup);\\n\\n  padding: 8px;\\n  border-radius: 6px;\\n  box-sizing: border-box;\\n  pointer-events: none;\\n  word-wrap: break-word;\\n\\n  background: #000;\\n\\n  line-height: 1.5;\\n  text-align: center;\\n  font-size: 13px;\\n  font-weight: 500;\\n  color: #fff;\\n\\n  display: none;\\n\\n  &.jsondraw-tooltip--visible {\\n    display: block;\\n  }\\n}\\n\\n// wraps the element we want to apply the tooltip to\\n.jsondraw-tooltip-wrapper {\\n  display: flex;\\n}\\n\\n.jsondraw-tooltip-icon {\\n  width: 0.9em;\\n  height: 0.9em;\\n  margin-left: 5px;\\n  margin-top: 1px;\\n  display: flex;\\n\\n  @include isMobile {\\n    display: none;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw.jsondraw-modal-container{position:absolute;z-index:var(--zIndex-modal)}.jsondraw .Modal{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;overflow:auto;padding:calc(var(--space-factor)*10);display:flex;flex-direction:column}.jsondraw .Modal .Island{padding:2.5rem;border:0;box-shadow:none;border-radius:0}.jsondraw .Modal.animations-disabled .Modal__background{animation:none}.jsondraw .Modal.animations-disabled .Modal__content{animation:none;opacity:1}.jsondraw .Modal__background{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1;background-color:rgba(18,18,18,.2);animation:Modal__background__fade-in .1s linear forwards}.jsondraw .Modal__content{position:relative;z-index:2;width:100%;max-width:var(--max-width);max-height:100%;opacity:0;transform:translateY(10px);animation:Modal__content_fade-in .025s ease-out 0s forwards;position:relative;overflow-y:auto;background:var(--island-bg-color);border:1px solid var(--dialog-border-color);box-shadow:var(--modal-shadow);border-radius:.75rem;box-sizing:border-box}.jsondraw .Modal__content:focus{outline:none}@keyframes Modal__background__fade-in{from{opacity:0}to{opacity:1}}@keyframes Modal__content_fade-in{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}.jsondraw .Modal__close{color:var(--icon-fill-color);margin:0;padding:.375rem;position:absolute;top:1rem;right:1rem;border:0;background-color:rgba(0,0,0,0);line-height:0;cursor:pointer}.jsondraw .Modal__close svg{width:1.5rem;height:1.5rem}.jsondraw .Dialog--fullscreen .Modal{padding:0}.jsondraw .Dialog--fullscreen .Modal__content{position:absolute;top:0;left:0;right:0;bottom:0;max-width:100%;border:0;border-radius:0}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/Modal.scss\"],\"names\":[],\"mappings\":\"AAGE,mCACE,iBAAA,CACA,2BAAA,CAGF,iBACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,OAAA,CACA,QAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,aAAA,CACA,oCAAA,CAEA,YAAA,CACA,qBAAA,CAEA,yBACE,cAAA,CACA,QAAA,CACA,eAAA,CACA,eAAA,CAIA,wDACE,cAAA,CAGF,qDACE,cAAA,CACA,SAAA,CAKN,6BACE,cAAA,CACA,KAAA,CACA,MAAA,CACA,OAAA,CACA,QAAA,CACA,SAAA,CACA,kCAAA,CAEA,wDAAA,CAGF,0BACE,iBAAA,CACA,SAAA,CACA,UAAA,CACA,0BAAA,CACA,eAAA,CAEA,SAAA,CACA,0BAAA,CACA,2DAAA,CAEA,iBAAA,CACA,eAAA,CAGA,iCAAA,CAEA,2CAAA,CACA,8BAAA,CACA,oBAAA,CACA,qBAAA,CAEA,gCACE,YAAA,CAIJ,sCACE,KACE,SAAA,CAEF,GACE,SAAA,CAAA,CAIJ,kCACE,KACE,SAAA,CACA,oBAAA,CAEF,GACE,SAAA,CACA,kBAAA,CAAA,CAIJ,wBACE,4BAAA,CACA,QAAA,CACA,eAAA,CACA,iBAAA,CACA,QAAA,CACA,UAAA,CACA,QAAA,CACA,8BAAA,CACA,aAAA,CACA,cAAA,CAEA,4BACE,YAAA,CACA,aAAA,CAKF,qCACE,SAAA,CAGF,8CACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,OAAA,CACA,QAAA,CACA,cAAA,CACA,QAAA,CACA,eAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  &.jsondraw-modal-container {\\n    position: absolute;\\n    z-index: var(--zIndex-modal);\\n  }\\n\\n  .Modal {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    overflow: auto;\\n    padding: calc(var(--space-factor) * 10);\\n\\n    display: flex;\\n    flex-direction: column;\\n\\n    .Island {\\n      padding: 2.5rem;\\n      border: 0;\\n      box-shadow: none;\\n      border-radius: 0;\\n    }\\n\\n    &.animations-disabled {\\n      .Modal__background {\\n        animation: none;\\n      }\\n\\n      .Modal__content {\\n        animation: none;\\n        opacity: 1;\\n      }\\n    }\\n  }\\n\\n  .Modal__background {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    z-index: 1;\\n    background-color: rgba(#121212, 0.2);\\n\\n    animation: Modal__background__fade-in 0.1s linear forwards;\\n  }\\n\\n  .Modal__content {\\n    position: relative;\\n    z-index: 2;\\n    width: 100%;\\n    max-width: var(--max-width);\\n    max-height: 100%;\\n\\n    opacity: 0;\\n    transform: translateY(10px);\\n    animation: Modal__content_fade-in 0.025s ease-out 0s forwards;\\n\\n    position: relative;\\n    overflow-y: auto;\\n\\n    // for modals, reset blurry bg\\n    background: var(--island-bg-color);\\n\\n    border: 1px solid var(--dialog-border-color);\\n    box-shadow: var(--modal-shadow);\\n    border-radius: 0.75rem;\\n    box-sizing: border-box;\\n\\n    &:focus {\\n      outline: none;\\n    }\\n  }\\n\\n  @keyframes Modal__background__fade-in {\\n    from {\\n      opacity: 0;\\n    }\\n    to {\\n      opacity: 1;\\n    }\\n  }\\n\\n  @keyframes Modal__content_fade-in {\\n    from {\\n      opacity: 0;\\n      transform: scale(0.9);\\n    }\\n    to {\\n      opacity: 1;\\n      transform: scale(1);\\n    }\\n  }\\n\\n  .Modal__close {\\n    color: var(--icon-fill-color);\\n    margin: 0;\\n    padding: 0.375rem;\\n    position: absolute;\\n    top: 1rem;\\n    right: 1rem;\\n    border: 0;\\n    background-color: transparent;\\n    line-height: 0;\\n    cursor: pointer;\\n\\n    svg {\\n      width: 1.5rem;\\n      height: 1.5rem;\\n    }\\n  }\\n\\n  .Dialog--fullscreen {\\n    .Modal {\\n      padding: 0;\\n    }\\n\\n    .Modal__content {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      max-width: 100%;\\n      border: 0;\\n      border-radius: 0;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Dialog{user-select:text;cursor:auto}.jsondraw .Dialog__title{margin:0;text-align:left;font-size:1.25rem;border-bottom:1px solid var(--dialog-border-color);padding:0 0 .75rem;margin-bottom:1.5rem}.jsondraw .Dialog__close{color:var(--color-gray-40);margin:0;position:absolute;top:.75rem;right:.5rem;border:0;background-color:rgba(0,0,0,0);line-height:0;cursor:pointer}.jsondraw .Dialog__close:hover{color:var(--color-gray-60)}.jsondraw .Dialog__close:active{color:var(--color-gray-40)}.jsondraw .Dialog__close svg{width:1.5rem;height:1.5rem}.jsondraw .Dialog__close+.Dialog__content{--offset: 28px;height:calc(100% - var(--offset)) !important;margin-top:var(--offset) !important}.jsondraw .Dialog--fullscreen .Dialog__close{top:1.25rem;right:1.25rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/Dialog.scss\"],\"names\":[],\"mappings\":\"AAGE,kBACE,gBAAA,CACA,WAAA,CAGF,yBACE,QAAA,CACA,eAAA,CACA,iBAAA,CACA,kDAAA,CACA,kBAAA,CACA,oBAAA,CAGF,yBACE,0BAAA,CACA,QAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,8BAAA,CACA,aAAA,CACA,cAAA,CAEA,+BACE,0BAAA,CAEF,gCACE,0BAAA,CAGF,6BACE,YAAA,CACA,aAAA,CAGF,0CACE,cAAA,CACA,4CAAA,CACA,mCAAA,CAKF,6CACE,WAAA,CACA,aAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .Dialog {\\n    user-select: text;\\n    cursor: auto;\\n  }\\n\\n  .Dialog__title {\\n    margin: 0;\\n    text-align: left;\\n    font-size: 1.25rem;\\n    border-bottom: 1px solid var(--dialog-border-color);\\n    padding: 0 0 0.75rem;\\n    margin-bottom: 1.5rem;\\n  }\\n\\n  .Dialog__close {\\n    color: var(--color-gray-40);\\n    margin: 0;\\n    position: absolute;\\n    top: 0.75rem;\\n    right: 0.5rem;\\n    border: 0;\\n    background-color: transparent;\\n    line-height: 0;\\n    cursor: pointer;\\n\\n    &:hover {\\n      color: var(--color-gray-60);\\n    }\\n    &:active {\\n      color: var(--color-gray-40);\\n    }\\n\\n    svg {\\n      width: 1.5rem;\\n      height: 1.5rem;\\n    }\\n\\n    & + .Dialog__content {\\n      --offset: 28px;\\n      height: calc(100% - var(--offset)) !important;\\n      margin-top: var(--offset) !important;\\n    }\\n  }\\n\\n  .Dialog--fullscreen {\\n    .Dialog__close {\\n      top: 1.25rem;\\n      right: 1.25rem;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.ProjectName{margin:auto;display:flex;align-items:center}.ProjectName .TextInput{height:calc(1rem - 3px);width:200px;overflow:hidden;text-align:center;margin-left:8px;text-overflow:ellipsis}.ProjectName .TextInput--readonly{background:none;border:none}.ProjectName .TextInput--readonly:hover{background:none}.ProjectName .TextInput--readonly{width:auto;max-width:200px;padding-left:2px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/branding/ProjectName.scss\"],\"names\":[],\"mappings\":\"AAAA,aACE,WAAA,CACA,YAAA,CACA,kBAAA,CAEA,wBACE,uBAAA,CACA,WAAA,CACA,eAAA,CACA,iBAAA,CACA,eAAA,CACA,sBAAA,CAEA,kCACE,eAAA,CACA,WAAA,CACA,wCACE,eAAA,CAJJ,kCAME,UAAA,CACA,eAAA,CACA,gBAAA\",\"sourcesContent\":[\".ProjectName {\\n  margin: auto;\\n  display: flex;\\n  align-items: center;\\n\\n  .TextInput {\\n    height: calc(1rem - 3px);\\n    width: 200px;\\n    overflow: hidden;\\n    text-align: center;\\n    margin-left: 8px;\\n    text-overflow: ellipsis;\\n\\n    &--readonly {\\n      background: none;\\n      border: none;\\n      &:hover {\\n        background: none;\\n      }\\n      width: auto;\\n      max-width: 200px;\\n      padding-left: 2px;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .layer-ui__wrapper.animate{transition:width .1s ease-in-out}.jsondraw .layer-ui__wrapper{position:absolute;width:100%;height:100%;pointer-events:none;z-index:var(--zIndex-layerUI)}.jsondraw .layer-ui__wrapper__top-right{display:flex;width:100%;justify-content:flex-end;gap:.75rem;pointer-events:none !important}.jsondraw .layer-ui__wrapper__top-right--compact{gap:.5rem}.jsondraw .layer-ui__wrapper__top-right>*{pointer-events:var(--ui-pointerEvents)}.jsondraw .layer-ui__wrapper__footer{width:100%}.jsondraw .layer-ui__wrapper__footer-right{z-index:100;display:flex}.jsondraw .layer-ui__wrapper .zen-mode-transition{transition:transform .5s ease-in-out}:root[dir=ltr] .jsondraw .layer-ui__wrapper .zen-mode-transition.transition-left{transform:translate(-999px, 0)}:root[dir=ltr] .jsondraw .layer-ui__wrapper .zen-mode-transition.transition-right{transform:translate(999px, 0)}:root[dir=rtl] .jsondraw .layer-ui__wrapper .zen-mode-transition.transition-left{transform:translate(999px, 0)}:root[dir=rtl] .jsondraw .layer-ui__wrapper .zen-mode-transition.transition-right{transform:translate(-999px, 0)}.jsondraw .layer-ui__wrapper .zen-mode-transition.layer-ui__wrapper__footer-left--transition-bottom{transform:translate(0, 92px)}.jsondraw .layer-ui__wrapper .disable-zen-mode{padding:10px;position:absolute;bottom:0}[dir=ltr] .jsondraw .layer-ui__wrapper .disable-zen-mode{right:1rem}[dir=rtl] .jsondraw .layer-ui__wrapper .disable-zen-mode{left:1rem}.jsondraw .layer-ui__wrapper .disable-zen-mode{opacity:0;visibility:hidden;transition:visibility 0s linear 0s,opacity .5s;font-family:var(--ui-font);font-size:.75rem;font-weight:500;line-height:1;border-radius:var(--border-radius-lg);border:1px solid var(--default-border-color);background-color:var(--island-bg-color);color:var(--text-primary-color)}.jsondraw .layer-ui__wrapper .disable-zen-mode:hover{background-color:var(--button-hover-bg)}.jsondraw .layer-ui__wrapper .disable-zen-mode:active{border-color:var(--color-primary)}.jsondraw .layer-ui__wrapper .disable-zen-mode--visible{opacity:1;visibility:visible;transition:visibility 0s linear 300ms,opacity .5s;transition-delay:.8s;pointer-events:var(--ui-pointerEvents)}.jsondraw .layer-ui__wrapper .layer-ui__wrapper__footer-left>*,.jsondraw .layer-ui__wrapper .footer-center>*,.jsondraw .layer-ui__wrapper .layer-ui__wrapper__footer-right>*{pointer-events:var(--ui-pointerEvents)}.jsondraw .layer-ui__wrapper .layer-ui__wrapper__footer-right{margin-top:auto;margin-bottom:auto}.jsondraw .disable-view-mode{display:flex;justify-content:center;cursor:pointer;align-items:center;border:1px solid var(--color-primary);padding:.5rem;border-radius:var(--border-radius-lg);background-color:var(--island-bg-color);text-decoration:none !important;font-family:var(--ui-font);font-size:.8333rem;box-sizing:border-box;width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size));border:none;box-shadow:0 0 0 1px var(--color-surface-lowest);background-color:var(--color-surface-low);color:var(--button-color, var(--color-on-surface)) !important}.jsondraw .disable-view-mode:active{box-shadow:0 0 0 1px var(--color-brand-active)}.jsondraw .disable-view-mode:hover{background-color:var(--color-primary);color:#fff !important}.jsondraw .disable-view-mode:active{background-color:var(--color-primary-darker)}.jsondraw .disable-view-mode svg{width:20px;height:20px}.jsondraw .theme--dark .plus-banner:hover{color:#000 !important}.jsondraw .default-sidebar-trigger{display:none !important}.jsondraw .App-toolbar__extra-tools-trigger{display:none !important}.jsondraw .App-toolbar__divider{display:none !important}.jsondraw .ToolIcon__lock{display:none !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/layout/LayerUI.scss\"],\"names\":[],\"mappings\":\"AAGE,qCACE,gCAAA,CAEF,6BAME,iBAAA,CACA,UAAA,CACA,WAAA,CACA,mBAAA,CACA,6BAAA,CAEA,wCACE,YAAA,CACA,UAAA,CACA,wBAAA,CACA,UAAA,CACA,8BAAA,CAEA,iDACE,SAAA,CAGF,0CACE,sCAAA,CAIJ,qCACE,UAAA,CAEA,2CACE,WAAA,CACA,YAAA,CAIJ,kDACE,oCAAA,CAEA,iFACE,8BAAA,CAGF,kFACE,6BAAA,CAGF,iFACE,6BAAA,CAGF,kFACE,8BAAA,CAGF,oGACE,4BAAA,CAIJ,+CACE,YAAA,CACA,iBAAA,CACA,QAAA,CACA,yDACE,UAAA,CAEF,yDACE,SAAA,CARJ,+CAUE,SAAA,CACA,iBAAA,CACA,8CACE,CAGF,0BAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CAEA,qCAAA,CACA,4CAAA,CACA,uCAAA,CACA,+BAAA,CAEA,qDACE,uCAAA,CAEF,sDACE,iCAAA,CAGF,wDACE,SAAA,CACA,kBAAA,CACA,iDACE,CAEF,oBAAA,CAEA,sCAAA,CAOF,6KACE,sCAAA,CAIJ,8DACE,eAAA,CACA,kBAAA,CAIJ,6BACE,YAAA,CACA,sBAAA,CACA,cAAA,CACA,kBAAA,CACA,qCAAA,CACA,aAAA,CACA,qCAAA,CACA,uCAAA,CACA,+BAAA,CAEA,0BAAA,CACA,kBAAA,CACA,qBAAA,CAEA,kEAAA,CACA,mEAAA,CAEA,WAAA,CACA,gDAAA,CACA,yCAAA,CACA,6DAAA,CAEA,oCACE,8CAAA,CAGF,mCACE,qCAAA,CACA,qBAAA,CAEF,oCACE,4CAAA,CAGF,iCACE,UAAA,CACA,WAAA,CAMA,0CACE,qBAAA,CAMN,mCACE,uBAAA,CAIF,4CACE,uBAAA,CAIF,gCACE,uBAAA,CAIF,0BACE,uBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .layer-ui__wrapper.animate {\\n    transition: width 0.1s ease-in-out;\\n  }\\n  .layer-ui__wrapper {\\n    // when the rightside sidebar is docked, we need to resize the UI by its\\n    // width, making the nested UI content shift to the left. To do this,\\n    // we need the UI container to actually have dimensions set, but\\n    // then we also need to disable pointer events else the canvas below\\n    // wouldn't be interactive.\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    pointer-events: none;\\n    z-index: var(--zIndex-layerUI);\\n\\n    &__top-right {\\n      display: flex;\\n      width: 100%;\\n      justify-content: flex-end;\\n      gap: 0.75rem;\\n      pointer-events: none !important;\\n\\n      &--compact {\\n        gap: 0.5rem;\\n      }\\n\\n      & > * {\\n        pointer-events: var(--ui-pointerEvents);\\n      }\\n    }\\n\\n    &__footer {\\n      width: 100%;\\n\\n      &-right {\\n        z-index: 100;\\n        display: flex;\\n      }\\n    }\\n\\n    .zen-mode-transition {\\n      transition: transform 0.5s ease-in-out;\\n\\n      :root[dir=\\\"ltr\\\"] &.transition-left {\\n        transform: translate(-999px, 0);\\n      }\\n\\n      :root[dir=\\\"ltr\\\"] &.transition-right {\\n        transform: translate(999px, 0);\\n      }\\n\\n      :root[dir=\\\"rtl\\\"] &.transition-left {\\n        transform: translate(999px, 0);\\n      }\\n\\n      :root[dir=\\\"rtl\\\"] &.transition-right {\\n        transform: translate(-999px, 0);\\n      }\\n\\n      &.layer-ui__wrapper__footer-left--transition-bottom {\\n        transform: translate(0, 92px);\\n      }\\n    }\\n\\n    .disable-zen-mode {\\n      padding: 10px;\\n      position: absolute;\\n      bottom: 0;\\n      [dir=\\\"ltr\\\"] & {\\n        right: 1rem;\\n      }\\n      [dir=\\\"rtl\\\"] & {\\n        left: 1rem;\\n      }\\n      opacity: 0;\\n      visibility: hidden;\\n      transition:\\n        visibility 0s linear 0s,\\n        opacity 0.5s;\\n\\n      font-family: var(--ui-font);\\n      font-size: 0.75rem;\\n      font-weight: 500;\\n      line-height: 1;\\n\\n      border-radius: var(--border-radius-lg);\\n      border: 1px solid var(--default-border-color);\\n      background-color: var(--island-bg-color);\\n      color: var(--text-primary-color);\\n\\n      &:hover {\\n        background-color: var(--button-hover-bg);\\n      }\\n      &:active {\\n        border-color: var(--color-primary);\\n      }\\n\\n      &--visible {\\n        opacity: 1;\\n        visibility: visible;\\n        transition:\\n          visibility 0s linear 300ms,\\n          opacity 0.5s;\\n        transition-delay: 0.8s;\\n\\n        pointer-events: var(--ui-pointerEvents);\\n      }\\n    }\\n\\n    .layer-ui__wrapper__footer-left,\\n    .footer-center,\\n    .layer-ui__wrapper__footer-right {\\n      & > * {\\n        pointer-events: var(--ui-pointerEvents);\\n      }\\n    }\\n\\n    .layer-ui__wrapper__footer-right {\\n      margin-top: auto;\\n      margin-bottom: auto;\\n    }\\n  }\\n\\n  .disable-view-mode {\\n    display: flex;\\n    justify-content: center;\\n    cursor: pointer;\\n    align-items: center;\\n    border: 1px solid var(--color-primary);\\n    padding: 0.5rem;\\n    border-radius: var(--border-radius-lg);\\n    background-color: var(--island-bg-color);\\n    text-decoration: none !important;\\n\\n    font-family: var(--ui-font);\\n    font-size: 0.8333rem;\\n    box-sizing: border-box;\\n\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n\\n    border: none;\\n    box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n    background-color: var(--color-surface-low);\\n    color: var(--button-color, var(--color-on-surface)) !important;\\n\\n    &:active {\\n      box-shadow: 0 0 0 1px var(--color-brand-active);\\n    }\\n\\n    &:hover {\\n      background-color: var(--color-primary);\\n      color: white !important;\\n    }\\n    &:active {\\n      background-color: var(--color-primary-darker);\\n    }\\n\\n    svg {\\n      width: 20px;\\n      height: 20px;\\n    }\\n  }\\n\\n  .theme--dark {\\n    .plus-banner {\\n      &:hover {\\n        color: black !important;\\n      }\\n    }\\n  }\\n\\n  /* n Nt m th vin (Library) theo yu cu ca user */\\n  .default-sidebar-trigger {\\n    display: none !important;\\n  }\\n\\n  /* n nt Cng c khc ()  cui cng bn phi thanh toolbar theo yu cu ca user */\\n  .App-toolbar__extra-tools-trigger {\\n    display: none !important;\\n  }\\n\\n  /* n ng phn cch k bn nt Cng c khc */\\n  .App-toolbar__divider {\\n    display: none !important;\\n  }\\n\\n  /* n nt  kho (Lock)  ngoi cng bn tri thanh toolbar theo yu cu ca user */\\n  .ToolIcon__lock {\\n    display: none !important;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Avatar{width:var(--avatar-size, 1.5rem);height:var(--avatar-size, 1.5rem);position:relative;border-radius:100%;outline-offset:2px;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:.75rem;font-weight:700;line-height:1;color:var(--color-gray-90);flex:0 0 auto}.jsondraw .Avatar:active{transform:scale(0.94)}.jsondraw .Avatar-img{width:100%;height:100%;border-radius:100%}.jsondraw .Avatar::before{content:\"\";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;border-radius:100%}.jsondraw .Avatar.is-followed::before{border-color:var(--color-primary-hover);box-shadow:0 0 0 1px var(--color-primary-hover)}.jsondraw .Avatar.is-current-user{cursor:auto}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/user/Avatar.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,kBC2KA,gCAAA,CACA,iCAAA,CACA,iBAAA,CACA,kBAAA,CACA,kBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,cAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CACA,0BAAA,CACA,aAAA,CAEA,yBACE,qBAAA,CAGF,sBACE,UAAA,CACA,WAAA,CACA,kBAAA,CAGF,0BACE,UAAA,CACA,iBAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,kBAAA,CAGF,sCACE,uCAAA,CACA,+CAAA,CAEF,kCACE,WAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .Avatar {\\n    @include avatarStyles;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path fill=\\\"%23ced4da\\\" d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--mobile-action-button-bg: rgba(255, 255, 255, 0.35);--mobile-color-border: var(--default-border-color);--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url(${___CSS_LOADER_URL_REPLACEMENT_0___});--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-on-surface);--icon-green-fill-color: #2b8a3e;--default-bg-color: #fff;--input-bg-color: #fff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: #ffffff;--island-bg-color-alt: #fff;--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--link-color-hover: #1971c2;--link-color-active: #a5d8ff;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: var(--island-bg-color);--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000;--popup-text-inverted-color: #fff;--select-highlight-color: #339af0;--shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17), 0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08), 0px 7px 14px 0px rgba(0, 0, 0, 0.05);--button-hover-bg: var(--color-surface-high);--button-active-bg: var(--color-surface-high);--button-active-border: var(--color-brand-active);--default-border-color: var(--color-surface-high);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--mobile-action-button-size: 2rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--color-slider-track: hsl(240, 100%, 90%);--color-slider-thumb: var(--color-gray-80);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-surface-high);--sidebar-bg-color: var(--island-bg-color);--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--chat-msg-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-on-surface);--color-selection: #6965db;--color-icon-white: #fff;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-primary-light-darker: #d7d5ff;--color-primary-hover: #5753d0;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-disabled: var(--color-gray-40);--color-warning: #fceeca;--color-warning-dark: #f5c354;--color-warning-darker: #f3ab2c;--color-warning-darkest: #ec8b14;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-danger-dark: #db6965;--color-danger-darker: #d65550;--color-danger-darkest: #d1413c;--color-danger-text: black;--color-danger-background: #fff0f0;--color-danger-icon-background: #ffdad6;--color-danger-color: #700000;--color-danger-icon-color: #700000;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--text-primary-color);--color-warning-icon-color: var(--text-primary-color);--color-muted: var(--color-gray-30);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-100);--color-muted-background: var(--color-gray-80);--color-muted-background-darker: var(--color-gray-100);--color-promo: var(--color-primary);--color-success: #cafccc;--color-success-darker: #bafabc;--color-success-darkest: #a5eba8;--color-success-text: #268029;--color-success-contrast: #65bb6a;--color-success-contrast-hover: #6bcf70;--color-success-contrast-active: #6edf74;--color-logo-icon: var(--color-primary);--color-logo-text: #190064;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem;--color-surface-high: #f1f0ff;--color-surface-mid: #f6f6f9;--color-surface-low: #ececf4;--color-surface-lowest: #ffffff;--color-on-surface: #1b1b1f;--color-brand-hover: #5753d0;--color-on-primary-container: #030064;--color-surface-primary-container: #e0dfff;--color-brand-active: #4440bf;--color-border-outline: #767680;--color-border-outline-variant: #c5c5d0;--color-surface-primary-container: #e0dfff;--color-badge: #0b6513;--background-color-badge: #d3ffd2}.jsondraw--mobile.jsondraw{--editor-container-padding: 0.75rem}@media screen and (min-device-width: 1921px){.jsondraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.jsondraw.theme--dark.theme--dark-background-none{background:none}.jsondraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--mobile-action-button-bg: var(--island-bg-color);--mobile-color-border: rgba(255, 255, 255, 0.85);--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url(${___CSS_LOADER_URL_REPLACEMENT_1___});--focus-highlight-color: #228be6;--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #232329;--island-bg-color-alt: hsl(240, 12%, 12%);--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17), 0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08), 0px 7px 14px 0px rgba(0, 0, 0, 0.05);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-slider-track: hsl(244, 23%, 39%);--color-selection: #3530c4;--color-icon-white: var(--color-gray-90);--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-primary-light-darker: #43415e;--color-primary-hover: #bbb8ff;--color-disabled: var(--color-gray-70);--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-danger-dark: #672120;--color-danger-darker: #8f2625;--color-danger-darkest: #ac2b29;--color-danger-text: #fbcbcc;--color-danger-background: #fbcbcc;--color-danger-icon-background: #672120;--color-danger-color: #261919;--color-danger-icon-color: #fbcbcc;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--color-gray-80);--color-warning-icon-color: var(--color-gray-80);--color-muted: var(--color-gray-80);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-20);--color-muted-background: var(--color-gray-40);--color-muted-background-darker: var(--color-gray-20);--color-logo-text: #e2dfff;--color-surface-high: #2e2d39;--color-surface-low: hsl(240, 8%, 15%);--color-surface-mid: hsl(240 6% 10%);--color-surface-lowest: hsl(0, 0%, 7%);--color-on-surface: #e3e3e8;--color-brand-hover: #bbb8ff;--color-on-primary-container: #e0dfff;--color-surface-primary-container: #403e6a;--color-brand-active: #d0ccff;--color-border-outline: #8e8d9c;--color-border-outline-variant: #46464f;--color-surface-primary-container: #403e6a}.jsondraw .jsondraw-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .jsondraw-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .jsondraw-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .jsondraw-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .jsondraw-button.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .jsondraw-button.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .jsondraw-button.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .jsondraw-button{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/css/theme.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\",\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Button.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"./variables.module\\\" as *;\\n@forward \\\"./variables.module\\\";\\n\\n.jsondraw {\\n  --theme-filter: none;\\n  --button-destructive-bg-color: #{$color-red-1};\\n  --button-destructive-color: #{$color-red-9};\\n  --button-gray-1: #{$color-gray-2};\\n  --button-gray-2: #{$color-gray-4};\\n  --button-gray-3: #{$color-gray-5};\\n  --mobile-action-button-bg: rgba(255, 255, 255, 0.35);\\n  --mobile-color-border: var(--default-border-color);\\n  --button-special-active-bg-color: #{$color-green-0};\\n  --dialog-border-color: var(--color-gray-20);\\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>');\\n  --focus-highlight-color: #{$color-blue-2};\\n  --icon-fill-color: var(--color-on-surface);\\n  --icon-green-fill-color: #{$color-green-9};\\n  --default-bg-color: #fff;\\n  --input-bg-color: #fff;\\n  --input-border-color: #{$color-gray-4};\\n  --input-hover-bg-color: #{$color-gray-1};\\n  --input-label-color: #{$color-gray-7};\\n  --island-bg-color: #ffffff;\\n  --island-bg-color-alt: #fff;\\n  --keybinding-color: var(--color-gray-40);\\n  --link-color: #{$color-blue-7};\\n  --link-color-hover: #{$color-blue-8};\\n  --link-color-active: #{$color-blue-2};\\n  --overlay-bg-color: #{color.adjust(#fff, $alpha: -0.12)};\\n  --popup-bg-color: var(--island-bg-color);\\n  --popup-secondary-bg-color: #{$color-gray-1};\\n  --popup-text-color: #000;\\n  --popup-text-inverted-color: #fff;\\n  --select-highlight-color: #{$color-blue-5};\\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\\n\\n  --button-hover-bg: var(--color-surface-high);\\n  --button-active-bg: var(--color-surface-high);\\n  --button-active-border: var(--color-brand-active);\\n  --default-border-color: var(--color-surface-high);\\n\\n  --default-button-size: 2rem;\\n  --default-icon-size: 1rem;\\n  --lg-button-size: 2.25rem;\\n  --lg-icon-size: 1rem;\\n  --editor-container-padding: 1rem;\\n  --mobile-action-button-size: 2rem;\\n\\n  --scrollbar-thumb: var(--button-gray-2);\\n  --scrollbar-thumb-hover: var(--button-gray-3);\\n\\n  --color-slider-track: hsl(240, 100%, 90%);\\n  --color-slider-thumb: var(--color-gray-80);\\n\\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n  --avatar-border-color: var(--color-gray-20);\\n  --sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n  --sidebar-border-color: var(--color-surface-high);\\n  --sidebar-bg-color: var(--island-bg-color);\\n  --library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01),\\n    0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09),\\n    0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);\\n  --chat-msg-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\\n\\n  --space-factor: 0.25rem;\\n  --text-primary-color: var(--color-on-surface);\\n\\n  --color-selection: #6965db;\\n\\n  --color-icon-white: #fff;\\n\\n  --color-primary: #6965db;\\n  --color-primary-darker: #5b57d1;\\n  --color-primary-darkest: #4a47b1;\\n  --color-primary-light: #e3e2fe;\\n  --color-primary-light-darker: #d7d5ff;\\n  --color-primary-hover: #5753d0;\\n\\n  --color-gray-10: #f5f5f5;\\n  --color-gray-20: #ebebeb;\\n  --color-gray-30: #d6d6d6;\\n  --color-gray-40: #b8b8b8;\\n  --color-gray-50: #999999;\\n  --color-gray-60: #7a7a7a;\\n  --color-gray-70: #5c5c5c;\\n  --color-gray-80: #3d3d3d;\\n  --color-gray-85: #242424;\\n  --color-gray-90: #1e1e1e;\\n  --color-gray-100: #121212;\\n\\n  --color-disabled: var(--color-gray-40);\\n\\n  --color-warning: #fceeca;\\n  --color-warning-dark: #f5c354;\\n  --color-warning-darker: #f3ab2c;\\n  --color-warning-darkest: #ec8b14;\\n  --color-text-warning: var(--text-primary-color);\\n\\n  --color-danger: #db6965;\\n  --color-danger-dark: #db6965;\\n  --color-danger-darker: #d65550;\\n  --color-danger-darkest: #d1413c;\\n  --color-danger-text: black;\\n\\n  --color-danger-background: #fff0f0;\\n  --color-danger-icon-background: #ffdad6;\\n  --color-danger-color: #700000;\\n  --color-danger-icon-color: #700000;\\n\\n  --color-warning-background: var(--color-warning);\\n  --color-warning-icon-background: var(--color-warning-dark);\\n  --color-warning-color: var(--text-primary-color);\\n  --color-warning-icon-color: var(--text-primary-color);\\n\\n  --color-muted: var(--color-gray-30);\\n  --color-muted-darker: var(--color-gray-60);\\n  --color-muted-darkest: var(--color-gray-100);\\n  --color-muted-background: var(--color-gray-80);\\n  --color-muted-background-darker: var(--color-gray-100);\\n\\n  --color-promo: var(--color-primary);\\n\\n  --color-success: #cafccc;\\n  --color-success-darker: #bafabc;\\n  --color-success-darkest: #a5eba8;\\n  --color-success-text: #268029;\\n  --color-success-contrast: #65bb6a;\\n  --color-success-contrast-hover: #6bcf70;\\n  --color-success-contrast-active: #6edf74;\\n\\n  --color-logo-icon: var(--color-primary);\\n  --color-logo-text: #190064;\\n\\n  --border-radius-md: 0.375rem;\\n  --border-radius-lg: 0.5rem;\\n\\n  --color-surface-high: #f1f0ff;\\n  --color-surface-mid: #f6f6f9;\\n  --color-surface-low: #ececf4;\\n  --color-surface-lowest: #ffffff;\\n  --color-on-surface: #1b1b1f;\\n  --color-brand-hover: #5753d0;\\n  --color-on-primary-container: #030064;\\n  --color-surface-primary-container: #e0dfff;\\n  --color-brand-active: #4440bf;\\n  --color-border-outline: #767680;\\n  --color-border-outline-variant: #c5c5d0;\\n  --color-surface-primary-container: #e0dfff;\\n\\n  --color-badge: #0b6513;\\n  --background-color-badge: #d3ffd2;\\n\\n  @include isMobile {\\n    --editor-container-padding: 0.75rem;\\n  }\\n\\n  @media screen and (min-device-width: 1921px) {\\n    --lg-button-size: 2.5rem;\\n    --lg-icon-size: 1.25rem;\\n    --default-button-size: 2.25rem;\\n    --default-icon-size: 1.25rem;\\n  }\\n\\n  &.theme--dark {\\n    &.theme--dark-background-none {\\n      background: none;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    --theme-filter: invert(93%) hue-rotate(180deg);\\n    --button-destructive-bg-color: #5a0000;\\n    --button-destructive-color: #{$color-red-3};\\n\\n    --button-gray-1: #363636;\\n    --button-gray-2: #272727;\\n    --button-gray-3: #222;\\n    --mobile-action-button-bg: var(--island-bg-color);\\n    --mobile-color-border: rgba(255, 255, 255, 0.85);\\n    --button-special-active-bg-color: #204624;\\n    --dialog-border-color: var(--color-gray-80);\\n    --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"292.4\\\" height=\\\"292.4\\\" viewBox=\\\"0 0 292 292\\\"><path fill=\\\"%23ced4da\\\" d=\\\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\\\"/></svg>');\\n    --focus-highlight-color: #{$color-blue-6};\\n    --icon-green-fill-color: #{$color-green-4};\\n    --default-bg-color: #121212;\\n    --input-bg-color: #121212;\\n    --input-border-color: #2e2e2e;\\n    --input-hover-bg-color: #181818;\\n    --input-label-color: #{$color-gray-2};\\n    --island-bg-color: #232329;\\n    --island-bg-color-alt: hsl(240, 12%, 12%);\\n    --keybinding-color: var(--color-gray-60);\\n    --link-color: #{$color-blue-4};\\n    --overlay-bg-color: #{color.adjust($color-gray-8, $alpha: -0.88)};\\n    --popup-secondary-bg-color: #222;\\n    --popup-text-color: #{$color-gray-4};\\n    --popup-text-inverted-color: #2c2c2c;\\n    --select-highlight-color: #{$color-blue-4};\\n    --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\\n      0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\\n      0px 7px 14px 0px rgba(0, 0, 0, 0.05);\\n\\n    --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\\n      0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\\n      0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\\n      0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\\n      0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\\n      0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\\n    --avatar-border-color: var(--color-gray-85);\\n\\n    --scrollbar-thumb: #{$color-gray-8};\\n    --scrollbar-thumb-hover: #{$color-gray-7};\\n\\n    --color-slider-track: hsl(244, 23%, 39%);\\n\\n    // will be inverted to a lighter color.\\n    --color-selection: #3530c4;\\n\\n    --color-icon-white: var(--color-gray-90);\\n\\n    --color-primary: #a8a5ff;\\n    --color-primary-darker: #b2aeff;\\n    --color-primary-darkest: #beb9ff;\\n    --color-primary-light: #4f4d6f;\\n    --color-primary-light-darker: #43415e;\\n    --color-primary-hover: #bbb8ff;\\n\\n    --color-disabled: var(--color-gray-70);\\n\\n    --color-text-warning: var(--color-gray-80);\\n\\n    --color-danger: #ffa8a5;\\n    --color-danger-dark: #672120;\\n    --color-danger-darker: #8f2625;\\n    --color-danger-darkest: #ac2b29;\\n    --color-danger-text: #fbcbcc;\\n\\n    --color-danger-background: #fbcbcc;\\n    --color-danger-icon-background: #672120;\\n    --color-danger-color: #261919;\\n    --color-danger-icon-color: #fbcbcc;\\n\\n    --color-warning-background: var(--color-warning);\\n    --color-warning-icon-background: var(--color-warning-dark);\\n    --color-warning-color: var(--color-gray-80);\\n    --color-warning-icon-color: var(--color-gray-80);\\n\\n    --color-muted: var(--color-gray-80);\\n    --color-muted-darker: var(--color-gray-60);\\n    --color-muted-darkest: var(--color-gray-20);\\n    --color-muted-background: var(--color-gray-40);\\n    --color-muted-background-darker: var(--color-gray-20);\\n\\n    --color-logo-text: #e2dfff;\\n\\n    --color-surface-high: #2e2d39;\\n    --color-surface-low: hsl(240, 8%, 15%);\\n    --color-surface-mid: hsl(240 6% 10%);\\n    --color-surface-lowest: hsl(0, 0%, 7%);\\n    --color-on-surface: #e3e3e8;\\n    --color-brand-hover: #bbb8ff;\\n    --color-on-primary-container: #e0dfff;\\n    --color-surface-primary-container: #403e6a;\\n    --color-brand-active: #d0ccff;\\n    --color-border-outline: #8e8d9c;\\n    --color-border-outline-variant: #46464f;\\n    --color-surface-primary-container: #403e6a;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\",\"@use \\\"../../css/theme\\\" as *;\\n\\n.jsondraw {\\n  .jsondraw-button {\\n    @include outlineButtonStyles;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .mobile-toolbar{display:flex;flex:1;align-items:center;padding:0px;gap:4px;border-radius:var(--space-factor);overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none;justify-content:space-between}.jsondraw .mobile-toolbar::-webkit-scrollbar{display:none}.jsondraw .mobile-toolbar .ToolIcon{min-width:2rem;min-height:2rem;border-radius:4px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.jsondraw .mobile-toolbar .ToolIcon .ToolIcon__icon{width:2.25rem;height:2.25rem}.jsondraw .mobile-toolbar .ToolIcon .ToolIcon__icon:hover{background-color:rgba(0,0,0,0)}.jsondraw .mobile-toolbar .ToolIcon.active{background:var(--color-surface-primary-container, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .mobile-toolbar .ToolIcon svg{width:1rem;height:1rem}.jsondraw .mobile-toolbar .App-toolbar__extra-tools-dropdown{min-width:160px;z-index:var(--zIndex-layerUI)}.jsondraw .mobile-toolbar-separator{width:1px;height:24px;background:var(--default-border-color);margin:0 2px;flex-shrink:0}.jsondraw .mobile-toolbar-undo{display:flex;align-items:center}.jsondraw .mobile-toolbar-undo .ToolIcon{min-width:32px;min-height:32px;width:32px;height:32px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/toolbar/MobileToolBar.scss\"],\"names\":[],\"mappings\":\"AAGE,0BACE,YAAA,CACA,MAAA,CACA,kBAAA,CACA,WAAA,CACA,OAAA,CACA,iCAAA,CACA,eAAA,CACA,oBAAA,CACA,uBAAA,CACA,6BAAA,CAGF,6CACE,YAAA,CAGF,oCACE,cAAA,CACA,eAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,aAAA,CAEA,oDACE,aAAA,CACA,cAAA,CAEA,0DACE,8BAAA,CAIJ,2CACE,yEAAA,CACA,sEAAA,CAGF,wCACE,UAAA,CACA,WAAA,CAIJ,6DACE,eAAA,CACA,6BAAA,CAGF,oCACE,SAAA,CACA,WAAA,CACA,sCAAA,CACA,YAAA,CACA,aAAA,CAGF,+BACE,YAAA,CACA,kBAAA,CAGF,yCACE,cAAA,CACA,eAAA,CACA,UAAA,CACA,WAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .mobile-toolbar {\\n    display: flex;\\n    flex: 1;\\n    align-items: center;\\n    padding: 0px;\\n    gap: 4px;\\n    border-radius: var(--space-factor);\\n    overflow-x: auto;\\n    scrollbar-width: none;\\n    -ms-overflow-style: none;\\n    justify-content: space-between;\\n  }\\n\\n  .mobile-toolbar::-webkit-scrollbar {\\n    display: none;\\n  }\\n\\n  .mobile-toolbar .ToolIcon {\\n    min-width: 2rem;\\n    min-height: 2rem;\\n    border-radius: 4px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    flex-shrink: 0;\\n\\n    .ToolIcon__icon {\\n      width: 2.25rem;\\n      height: 2.25rem;\\n\\n      &:hover {\\n        background-color: transparent;\\n      }\\n    }\\n\\n    &.active {\\n      background: var(--color-surface-primary-container, var(--island-bg-color));\\n      border-color: var(--button-active-border, var(--color-primary-darkest));\\n    }\\n\\n    svg {\\n      width: 1rem;\\n      height: 1rem;\\n    }\\n  }\\n\\n  .mobile-toolbar .App-toolbar__extra-tools-dropdown {\\n    min-width: 160px;\\n    z-index: var(--zIndex-layerUI);\\n  }\\n\\n  .mobile-toolbar-separator {\\n    width: 1px;\\n    height: 24px;\\n    background: var(--default-border-color);\\n    margin: 0 2px;\\n    flex-shrink: 0;\\n  }\\n\\n  .mobile-toolbar-undo {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .mobile-toolbar-undo .ToolIcon {\\n    min-width: 32px;\\n    min-height: 32px;\\n    width: 32px;\\n    height: 32px;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .follow-mode{position:absolute;box-sizing:border-box;pointer-events:none;border:2px solid var(--color-primary-hover);z-index:9999;display:flex;align-items:flex-end;justify-content:center}.jsondraw .follow-mode__badge{background-color:var(--color-primary-hover);color:var(--color-primary-light);padding:.25rem .5rem;margin-bottom:.5rem;border-radius:.5rem;pointer-events:all;font-size:.75rem;display:flex;gap:.5rem;align-items:center}.jsondraw .follow-mode__badge__label{display:flex;white-space:pre-wrap;line-height:1}.jsondraw .follow-mode__badge__username{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100px}.jsondraw .follow-mode__disconnect-btn{all:unset;cursor:pointer;border-radius:.25rem}.jsondraw .follow-mode__disconnect-btn:hover{background-color:var(--color-primary-darker)}.jsondraw .follow-mode__disconnect-btn:active{background-color:var(--color-primary-darkest)}.jsondraw .follow-mode__disconnect-btn svg{display:block;width:1rem;height:1rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/FollowMode/FollowMode.scss\"],\"names\":[],\"mappings\":\"AACE,uBACE,iBAAA,CACA,qBAAA,CACA,mBAAA,CACA,2CAAA,CACA,YAAA,CACA,YAAA,CACA,oBAAA,CACA,sBAAA,CAEA,8BACE,2CAAA,CACA,gCAAA,CACA,oBAAA,CACA,mBAAA,CACA,mBAAA,CACA,kBAAA,CACA,gBAAA,CACA,YAAA,CACA,SAAA,CACA,kBAAA,CAEA,qCACE,YAAA,CACA,oBAAA,CACA,aAAA,CAGF,wCACE,aAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,eAAA,CAIJ,uCACE,SAAA,CACA,cAAA,CACA,oBAAA,CAEA,6CACE,4CAAA,CAGF,8CACE,6CAAA,CAGF,2CACE,aAAA,CACA,UAAA,CACA,WAAA\",\"sourcesContent\":[\".jsondraw {\\n  .follow-mode {\\n    position: absolute;\\n    box-sizing: border-box;\\n    pointer-events: none;\\n    border: 2px solid var(--color-primary-hover);\\n    z-index: 9999;\\n    display: flex;\\n    align-items: flex-end;\\n    justify-content: center;\\n\\n    &__badge {\\n      background-color: var(--color-primary-hover);\\n      color: var(--color-primary-light);\\n      padding: 0.25rem 0.5rem;\\n      margin-bottom: 0.5rem;\\n      border-radius: 0.5rem;\\n      pointer-events: all;\\n      font-size: 0.75rem;\\n      display: flex;\\n      gap: 0.5rem;\\n      align-items: center;\\n\\n      &__label {\\n        display: flex;\\n        white-space: pre-wrap;\\n        line-height: 1;\\n      }\\n\\n      &__username {\\n        display: block;\\n        white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        max-width: 100px;\\n      }\\n    }\\n\\n    &__disconnect-btn {\\n      all: unset;\\n      cursor: pointer;\\n      border-radius: 0.25rem;\\n\\n      &:hover {\\n        background-color: var(--color-primary-darker);\\n      }\\n\\n      &:active {\\n        background-color: var(--color-primary-darkest);\\n      }\\n\\n      svg {\\n        display: block;\\n        width: 1rem;\\n        height: 1rem;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .collab-button{--button-bg: var(--color-primary);--button-color: var(--color-surface-lowest);--button-border: var(--color-primary);--button-width: var(--lg-button-size);--button-height: var(--lg-button-size);--button-hover-bg: var(--color-primary-darker);--button-hover-border: var(--color-primary-darker);--button-active-bg: var(--color-primary-darker);box-shadow:0 0 0 1px var(--color-surface-lowest);flex-shrink:0}.jsondraw .collab-button.active.active{background-color:#0fb884;border-color:#0fb884}.jsondraw .collab-button.active.active svg{color:#fff}.jsondraw .collab-button.active.active:hover,.jsondraw .collab-button.active.active:active{background-color:#0fb884;border-color:#0fb884}.jsondraw .CollabButton.is-collaborating{background-color:var(--button-special-active-bg-color)}.jsondraw .CollabButton.is-collaborating .ToolIcon__icon svg,.jsondraw .CollabButton.is-collaborating .ToolIcon__label{color:var(--icon-green-fill-color)}:root[dir=ltr] .jsondraw .CollabButton-collaborators{right:-5px}:root[dir=rtl] .jsondraw .CollabButton-collaborators{left:-5px}.jsondraw .CollabButton-collaborators{min-width:1em;min-height:1em;line-height:1;position:absolute;bottom:-5px;padding:3px;border-radius:50%;background-color:#b2f2bb;color:#2b8a3e;font-size:.6rem;font-family:\"Cascadia\"}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/live-collaboration/LiveCollaborationTrigger.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,yBACE,iCAAA,CACA,2CAAA,CACA,qCAAA,CAEA,qCAAA,CACA,sCAAA,CAEA,8CAAA,CACA,kDAAA,CAEA,+CAAA,CAEA,gDAAA,CAEA,aAAA,CAGA,uCACE,wBAAA,CACA,oBAAA,CAEA,2CACE,UAAA,CAGF,2FAEE,wBAAA,CACA,oBAAA,CAKN,yCACE,sDAAA,CAEA,uHAEE,kCAAA,CAKF,qDACE,UAAA,CAEF,qDACE,SAAA,CALJ,sCAOE,aAAA,CACA,cAAA,CACA,aAAA,CACA,iBAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CACA,wBC9CY,CD+CZ,aC7CY,CD8CZ,eAAA,CACA,sBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .collab-button {\\n    --button-bg: var(--color-primary);\\n    --button-color: var(--color-surface-lowest);\\n    --button-border: var(--color-primary);\\n\\n    --button-width: var(--lg-button-size);\\n    --button-height: var(--lg-button-size);\\n\\n    --button-hover-bg: var(--color-primary-darker);\\n    --button-hover-border: var(--color-primary-darker);\\n\\n    --button-active-bg: var(--color-primary-darker);\\n\\n    box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n\\n    flex-shrink: 0;\\n\\n    // double .active to force specificity\\n    &.active.active {\\n      background-color: #0fb884;\\n      border-color: #0fb884;\\n\\n      svg {\\n        color: #fff;\\n      }\\n\\n      &:hover,\\n      &:active {\\n        background-color: #0fb884;\\n        border-color: #0fb884;\\n      }\\n    }\\n  }\\n\\n  .CollabButton.is-collaborating {\\n    background-color: var(--button-special-active-bg-color);\\n\\n    .ToolIcon__icon svg,\\n    .ToolIcon__label {\\n      color: var(--icon-green-fill-color);\\n    }\\n  }\\n\\n  .CollabButton-collaborators {\\n    :root[dir=\\\"ltr\\\"] & {\\n      right: -5px;\\n    }\\n    :root[dir=\\\"rtl\\\"] & {\\n      left: -5px;\\n    }\\n    min-width: 1em;\\n    min-height: 1em;\\n    line-height: 1;\\n    position: absolute;\\n    bottom: -5px;\\n    padding: 3px;\\n    border-radius: 50%;\\n    background-color: $color-green-2;\\n    color: $color-green-9;\\n    font-size: 0.6rem;\\n    font-family: \\\"Cascadia\\\";\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Stack{--gap: 0;display:grid;gap:calc(var(--space-factor)*var(--gap))}.jsondraw .Stack_vertical{grid-template-columns:auto;grid-auto-flow:row;grid-auto-rows:min-content}.jsondraw .Stack_horizontal{grid-template-rows:auto;grid-auto-flow:column;grid-auto-columns:min-content}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/layout/Stack.scss\"],\"names\":[],\"mappings\":\"AACE,iBACE,QAAA,CACA,YAAA,CACA,wCAAA,CAGF,0BACE,0BAAA,CACA,kBAAA,CACA,0BAAA,CAGF,4BACE,uBAAA,CACA,qBAAA,CACA,6BAAA\",\"sourcesContent\":[\".jsondraw {\\n  .Stack {\\n    --gap: 0;\\n    display: grid;\\n    gap: calc(var(--space-factor) * var(--gap));\\n  }\\n\\n  .Stack_vertical {\\n    grid-template-columns: auto;\\n    grid-auto-flow: row;\\n    grid-auto-rows: min-content;\\n  }\\n\\n  .Stack_horizontal {\\n    grid-template-rows: auto;\\n    grid-auto-flow: column;\\n    grid-auto-columns: min-content;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--Switch-disabled-color: var(--color-border-outline);--Switch-disabled-toggled-background: var(--color-border-outline-variant);--Switch-disabled-border: var(--color-border-outline-variant);--Switch-track-background: var(--island-bg-color);--Switch-thumb-background: var(--color-on-surface);--Switch-hover-background: var(--color-brand-hover);--Switch-active-background: var(--color-brand-active)}.jsondraw .Switch{position:relative;box-sizing:border-box;width:40px;height:20px;border-radius:12px;transition-property:background,border;transition-duration:150ms;transition-timing-function:ease-out;background:var(--Switch-track-background);border:1px solid var(--Switch-disabled-color)}.jsondraw .Switch:hover{background:var(--Switch-track-background);border:1px solid var(--Switch-hover-background)}.jsondraw .Switch:active{border:1px solid var(--Switch-active-background)}.jsondraw .Switch.toggled{background:var(--color-primary);border:1px solid var(--color-primary)}.jsondraw .Switch.toggled:hover{background:var(--color-primary-darker);border:1px solid var(--color-primary-darker)}.jsondraw .Switch.disabled{background:var(--Switch-track-background);border:1px solid var(--Switch-disabled-border)}.jsondraw .Switch.disabled.toggled{background:var(--Switch-disabled-toggled-background);border:1px solid var(--Switch-disabled-toggled-background)}.jsondraw .Switch:before{content:\"\";box-sizing:border-box;display:block;pointer-events:none;position:absolute;border-radius:100%;transition:all 150ms ease-out;width:10px;height:10px;top:4px;left:4px;background:var(--Switch-thumb-background)}.jsondraw .Switch:active:before{width:12px}.jsondraw .Switch.toggled:before{width:14px;height:14px;left:22px;top:2px;background:var(--Switch-track-background)}.jsondraw .Switch.toggled:active:before{width:16px;left:20px}.jsondraw .Switch.disabled:before{background:var(--Switch-disabled-color)}.jsondraw .Switch.disabled.toggled:before{background:var(--Switch-disabled-color)}.jsondraw .Switch input{width:100%;height:100%;margin:0;border-radius:12px;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.jsondraw .Switch input:disabled{cursor:unset}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Switch.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,oDAAA,CACA,yEAAA,CACA,6DAAA,CACA,iDAAA,CACA,kDAAA,CACA,mDAAA,CACA,qDAAA,CAEA,kBACE,iBAAA,CACA,qBAAA,CAEA,UAAA,CACA,WAAA,CACA,kBAAA,CAEA,qCAAA,CACA,yBAAA,CACA,mCAAA,CAEA,yCAAA,CACA,6CAAA,CAEA,wBACE,yCAAA,CACA,+CAAA,CAGF,yBACE,gDAAA,CAGF,0BACE,+BAAA,CACA,qCAAA,CAEA,gCACE,sCAAA,CACA,4CAAA,CAIJ,2BACE,yCAAA,CACA,8CAAA,CAEA,mCACE,oDAAA,CACA,0DAAA,CAIJ,yBACE,UAAA,CACA,qBAAA,CACA,aAAA,CACA,mBAAA,CACA,iBAAA,CAEA,kBAAA,CACA,6BAAA,CAEA,UAAA,CACA,WAAA,CACA,OAAA,CACA,QAAA,CAEA,yCAAA,CAGF,gCACE,UAAA,CAGF,iCACE,UAAA,CACA,WAAA,CACA,SAAA,CACA,OAAA,CAEA,yCAAA,CAGF,wCACE,UAAA,CACA,SAAA,CAGF,kCACE,uCAAA,CAGF,0CACE,uCAAA,CAGF,wBACE,UAAA,CACA,WAAA,CACA,QAAA,CAEA,kBAAA,CAEA,uBAAA,CACA,oBAAA,CACA,eAAA,CAEA,cAAA,CAEA,iCACE,YAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --Switch-disabled-color: var(--color-border-outline);\\n  --Switch-disabled-toggled-background: var(--color-border-outline-variant);\\n  --Switch-disabled-border: var(--color-border-outline-variant);\\n  --Switch-track-background: var(--island-bg-color);\\n  --Switch-thumb-background: var(--color-on-surface);\\n  --Switch-hover-background: var(--color-brand-hover);\\n  --Switch-active-background: var(--color-brand-active);\\n\\n  .Switch {\\n    position: relative;\\n    box-sizing: border-box;\\n\\n    width: 40px;\\n    height: 20px;\\n    border-radius: 12px;\\n\\n    transition-property: background, border;\\n    transition-duration: 150ms;\\n    transition-timing-function: ease-out;\\n\\n    background: var(--Switch-track-background);\\n    border: 1px solid var(--Switch-disabled-color);\\n\\n    &:hover {\\n      background: var(--Switch-track-background);\\n      border: 1px solid var(--Switch-hover-background);\\n    }\\n\\n    &:active {\\n      border: 1px solid var(--Switch-active-background);\\n    }\\n\\n    &.toggled {\\n      background: var(--color-primary);\\n      border: 1px solid var(--color-primary);\\n\\n      &:hover {\\n        background: var(--color-primary-darker);\\n        border: 1px solid var(--color-primary-darker);\\n      }\\n    }\\n\\n    &.disabled {\\n      background: var(--Switch-track-background);\\n      border: 1px solid var(--Switch-disabled-border);\\n\\n      &.toggled {\\n        background: var(--Switch-disabled-toggled-background);\\n        border: 1px solid var(--Switch-disabled-toggled-background);\\n      }\\n    }\\n\\n    &:before {\\n      content: \\\"\\\";\\n      box-sizing: border-box;\\n      display: block;\\n      pointer-events: none;\\n      position: absolute;\\n\\n      border-radius: 100%;\\n      transition: all 150ms ease-out;\\n\\n      width: 10px;\\n      height: 10px;\\n      top: 4px;\\n      left: 4px;\\n\\n      background: var(--Switch-thumb-background);\\n    }\\n\\n    &:active:before {\\n      width: 12px;\\n    }\\n\\n    &.toggled:before {\\n      width: 14px;\\n      height: 14px;\\n      left: 22px;\\n      top: 2px;\\n\\n      background: var(--Switch-track-background);\\n    }\\n\\n    &.toggled:active:before {\\n      width: 16px;\\n      left: 20px;\\n    }\\n\\n    &.disabled:before {\\n      background: var(--Switch-disabled-color);\\n    }\\n\\n    &.disabled.toggled:before {\\n      background: var(--Switch-disabled-color);\\n    }\\n\\n    & input {\\n      width: 100%;\\n      height: 100%;\\n      margin: 0;\\n\\n      border-radius: 12px;\\n\\n      -webkit-appearance: none;\\n      -moz-appearance: none;\\n      appearance: none;\\n\\n      cursor: pointer;\\n\\n      &:disabled {\\n        cursor: unset;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--ImageExportModal-preview-border: #d6d6d6}.jsondraw.theme--dark{--ImageExportModal-preview-border: #5c5c5c}.jsondraw .ImageExportModal{display:flex;flex-direction:row;justify-content:space-between;user-select:none}.jsondraw .ImageExportModal h3{font-family:\"Assistant\";font-style:normal;font-weight:700;font-size:1.313rem;line-height:130%;padding:0;margin:0}.jsondraw--mobile.jsondraw .ImageExportModal h3{display:none}.jsondraw .ImageExportModal>h3{display:none}.jsondraw--mobile.jsondraw .ImageExportModal>h3{display:block}.jsondraw--mobile.jsondraw .ImageExportModal{flex-direction:column;height:calc(100vh - 5rem)}.jsondraw .ImageExportModal__preview{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;height:360px;width:55%;margin-right:1.5rem}.jsondraw--mobile.jsondraw .ImageExportModal__preview{max-width:unset;margin-right:unset;width:100%;height:unset;flex-grow:1}.jsondraw .ImageExportModal__preview__filename>input{margin-top:1rem}.jsondraw .ImageExportModal__preview__canvas{box-sizing:border-box;width:100%;height:100%;display:flex;flex-grow:1;justify-content:center;align-items:center;background:url(${___CSS_LOADER_URL_REPLACEMENT_0___}) left center;border:1px solid var(--ImageExportModal-preview-border);border-radius:12px;overflow:hidden;padding:1rem}.jsondraw .ImageExportModal__preview__canvas>canvas{max-width:calc(100% - 2rem);max-height:calc(100% - 2rem);filter:none !important}.jsondraw--mobile.jsondraw .ImageExportModal__preview__canvas>canvas{max-height:100%}.jsondraw--mobile.jsondraw .ImageExportModal__preview__canvas{margin-top:24px;max-width:unset}.jsondraw .ImageExportModal__settings{display:flex;flex-direction:column;flex-wrap:wrap;gap:18px}.jsondraw--mobile.jsondraw .ImageExportModal__settings{margin-left:unset;margin-top:1rem;flex-direction:row;gap:6px 34px;align-content:flex-start}.jsondraw .ImageExportModal__settings__setting{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.jsondraw--mobile.jsondraw .ImageExportModal__settings__setting{flex-direction:column;align-items:start;justify-content:unset;height:52px}.jsondraw .ImageExportModal__settings__setting__label{display:flex;flex-direction:row;align-items:center;font-family:\"Assistant\";font-weight:600;font-size:1rem;line-height:150%}.jsondraw .ImageExportModal__settings__setting__label svg{width:20px;height:20px;margin-left:10px}.jsondraw .ImageExportModal__settings__setting__content{display:flex;height:100%;align-items:center}.jsondraw .ImageExportModal__settings__buttons{flex-grow:1;flex-wrap:wrap;display:flex;flex-direction:row;gap:11px;align-items:flex-end;align-content:flex-end}.jsondraw--mobile.jsondraw .ImageExportModal__settings__buttons{padding-top:32px;flex-basis:100%;justify-content:center}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/export/ImageExportDialog.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,0CAAA,CAEA,sBACE,0CAAA,CAGF,4BACE,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,gBAAA,CAEA,+BACE,uBAAA,CACA,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,gBAAA,CACA,SAAA,CACA,QAAA,CCGK,gDAAA,YAAA,CDIP,+BACE,YAAA,CCLK,gDDQH,aAAA,CCRG,6CDaL,qBAAA,CACA,yBAAA,CAGF,qCACE,qBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,YAAA,CACA,SAAA,CAEA,mBAAA,CCzBK,sDD4BH,eAAA,CACA,kBAAA,CAEA,UAAA,CACA,YAAA,CACA,WAAA,CAIA,qDACE,eAAA,CAIJ,6CACE,qBAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,WAAA,CACA,sBAAA,CACA,kBAAA,CAEA,8DAAA,CAGA,uDAAA,CACA,kBAAA,CAEA,eAAA,CACA,YAAA,CAEA,oDACE,2BAAA,CACA,4BAAA,CAEA,sBAAA,CChEC,qEDmEC,eAAA,CCnED,8DDwED,eAAA,CACA,eAAA,CAKN,sCACE,YAAA,CACA,qBAAA,CACA,cAAA,CACA,QAAA,CClFK,uDDqFH,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,YAAA,CAEA,wBAAA,CAGF,+CACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CCjGG,gEDoGD,qBAAA,CACA,iBAAA,CACA,qBAAA,CACA,WAAA,CAGF,sDACE,YAAA,CACA,kBAAA,CACA,kBAAA,CAEA,uBAAA,CACA,eAAA,CACA,cAAA,CACA,gBAAA,CAEA,0DACE,UAAA,CACA,WAAA,CACA,gBAAA,CAIJ,wDACE,YAAA,CACA,WAAA,CACA,kBAAA,CAIJ,+CACE,WAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CACA,QAAA,CAEA,oBAAA,CACA,sBAAA,CC1IG,gED6ID,gBAAA,CACA,eAAA,CACA,sBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --ImageExportModal-preview-border: #d6d6d6;\\n\\n  &.theme--dark {\\n    --ImageExportModal-preview-border: #5c5c5c;\\n  }\\n\\n  .ImageExportModal {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-between;\\n\\n    user-select: none;\\n\\n    & h3 {\\n      font-family: \\\"Assistant\\\";\\n      font-style: normal;\\n      font-weight: 700;\\n      font-size: 1.313rem;\\n      line-height: 130%;\\n      padding: 0;\\n      margin: 0;\\n\\n      @include isMobile {\\n        display: none;\\n      }\\n    }\\n\\n    & > h3 {\\n      display: none;\\n\\n      @include isMobile {\\n        display: block;\\n      }\\n    }\\n\\n    @include isMobile {\\n      flex-direction: column;\\n      height: calc(100vh - 5rem);\\n    }\\n\\n    &__preview {\\n      box-sizing: border-box;\\n      display: flex;\\n      flex-direction: column;\\n      align-items: center;\\n      height: 360px;\\n      width: 55%;\\n\\n      margin-right: 1.5rem;\\n\\n      @include isMobile {\\n        max-width: unset;\\n        margin-right: unset;\\n\\n        width: 100%;\\n        height: unset;\\n        flex-grow: 1;\\n      }\\n\\n      &__filename {\\n        & > input {\\n          margin-top: 1rem;\\n        }\\n      }\\n\\n      &__canvas {\\n        box-sizing: border-box;\\n        width: 100%;\\n        height: 100%;\\n        display: flex;\\n        flex-grow: 1;\\n        justify-content: center;\\n        align-items: center;\\n\\n        background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\\\")\\n          left center;\\n\\n        border: 1px solid var(--ImageExportModal-preview-border);\\n        border-radius: 12px;\\n\\n        overflow: hidden;\\n        padding: 1rem;\\n\\n        & > canvas {\\n          max-width: calc(100% - 2rem);\\n          max-height: calc(100% - 2rem);\\n\\n          filter: none !important;\\n\\n          @include isMobile {\\n            max-height: 100%;\\n          }\\n        }\\n\\n        @include isMobile {\\n          margin-top: 24px;\\n          max-width: unset;\\n        }\\n      }\\n    }\\n\\n    &__settings {\\n      display: flex;\\n      flex-direction: column;\\n      flex-wrap: wrap;\\n      gap: 18px;\\n\\n      @include isMobile {\\n        margin-left: unset;\\n        margin-top: 1rem;\\n        flex-direction: row;\\n        gap: 6px 34px;\\n\\n        align-content: flex-start;\\n      }\\n\\n      &__setting {\\n        display: flex;\\n        flex-direction: row;\\n        justify-content: space-between;\\n        align-items: center;\\n\\n        @include isMobile {\\n          flex-direction: column;\\n          align-items: start;\\n          justify-content: unset;\\n          height: 52px;\\n        }\\n\\n        &__label {\\n          display: flex;\\n          flex-direction: row;\\n          align-items: center;\\n\\n          font-family: \\\"Assistant\\\";\\n          font-weight: 600;\\n          font-size: 1rem;\\n          line-height: 150%;\\n\\n          & svg {\\n            width: 20px;\\n            height: 20px;\\n            margin-left: 10px;\\n          }\\n        }\\n\\n        &__content {\\n          display: flex;\\n          height: 100%;\\n          align-items: center;\\n        }\\n      }\\n\\n      &__buttons {\\n        flex-grow: 1;\\n        flex-wrap: wrap;\\n        display: flex;\\n        flex-direction: row;\\n        gap: 11px;\\n\\n        align-items: flex-end;\\n        align-content: flex-end;\\n\\n        @include isMobile {\\n          padding-top: 32px;\\n          flex-basis: 100%;\\n          justify-content: center;\\n        }\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .sidebar-trigger{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--color-on-surface));font-family:var(--ui-font)}.jsondraw .sidebar-trigger svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.jsondraw .sidebar-trigger:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.jsondraw .sidebar-trigger:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.jsondraw .sidebar-trigger.active{background-color:var(--button-selected-bg, var(--color-surface-primary-container));border-color:var(--button-selected-border, var(--color-surface-primary-container))}.jsondraw .sidebar-trigger.active:hover{background-color:var(--button-selected-hover-bg, var(--color-surface-primary-container))}.jsondraw .sidebar-trigger.active svg{color:var(--button-color, var(--color-on-primary-container))}.jsondraw--mobile.jsondraw .sidebar-trigger{width:var(--mobile-action-button-size, var(--default-button-size));height:var(--mobile-action-button-size, var(--default-button-size))}.jsondraw .sidebar-trigger{border:none;box-shadow:0 0 0 1px var(--color-surface-lowest);background-color:var(--color-surface-low)}.jsondraw .sidebar-trigger:active{box-shadow:0 0 0 1px var(--color-brand-active)}.jsondraw--mobile.jsondraw .sidebar-trigger{width:var(--mobile-action-button-size, 2rem);height:var(--mobile-action-button-size, 2rem)}.jsondraw .sidebar-trigger{width:auto;height:var(--lg-button-size);display:flex;align-items:center;gap:.5rem;line-height:0;font-size:.75rem;letter-spacing:.4px}.jsondraw .sidebar-trigger svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.jsondraw .sidebar-trigger__label-element{align-self:flex-start}.jsondraw .default-sidebar-trigger .sidebar-trigger__label{display:block;white-space:nowrap}.jsondraw.jsondraw--mobile .default-sidebar-trigger .sidebar-trigger__label{display:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/Sidebar/SidebarTrigger.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,2BCqFA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,qDAAA,CACA,uDAAA,CACA,qBAAA,CACA,gBAAA,CACA,kBAAA,CACA,8DAAA,CACA,qCAAA,CACA,cAAA,CACA,yDAAA,CACA,kDAAA,CACA,0BAAA,CAEA,+BACE,8CAAA,CACA,gDAAA,CAGF,iCACE,+DAAA,CACA,0FAAA,CAIA,wFAAA,CAMF,kCACE,gEAAA,CACA,sEAAA,CAGF,kCACE,kFAAA,CAIA,kFAAA,CAKA,wCACE,wFAAA,CAMF,sCACE,4DAAA,CAtHK,4CA2HP,kEAAA,CACA,mEAAA,CDnJF,2BCwNA,WAAA,CACA,gDAAA,CACA,yCAAA,CAEA,kCACE,8CAAA,CAtMO,4CA0MP,4CAAA,CACA,6CAAA,CDlOF,2BAIE,UAAA,CACA,4BAAA,CAEA,YAAA,CACA,kBAAA,CACA,SAAA,CAEA,aAAA,CAEA,gBAAA,CACA,mBAAA,CAEA,+BACE,yBAAA,CACA,0BAAA,CAGF,0CACE,qBAAA,CAIJ,2DACE,aAAA,CACA,kBAAA,CAGF,4EACE,YAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .sidebar-trigger {\\n    @include outlineButtonStyles;\\n    @include filledButtonOnCanvas;\\n\\n    width: auto;\\n    height: var(--lg-button-size);\\n\\n    display: flex;\\n    align-items: center;\\n    gap: 0.5rem;\\n\\n    line-height: 0;\\n\\n    font-size: 0.75rem;\\n    letter-spacing: 0.4px;\\n\\n    svg {\\n      width: var(--lg-icon-size);\\n      height: var(--lg-icon-size);\\n    }\\n\\n    &__label-element {\\n      align-self: flex-start;\\n    }\\n  }\\n\\n  .default-sidebar-trigger .sidebar-trigger__label {\\n    display: block;\\n    white-space: nowrap;\\n  }\\n\\n  &.jsondraw--mobile .default-sidebar-trigger .sidebar-trigger__label {\\n    display: none;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--list-border-color: var(--color-gray-20)}.jsondraw .QuickSearch__wrapper{position:relative;height:2.6rem;border-bottom:1px solid var(--list-border-color)}.jsondraw .QuickSearch__wrapper svg{position:absolute;top:47.5%;transform:translateY(-50%);left:.75rem;width:1.25rem;height:1.25rem;color:var(--color-gray-40);z-index:1}.jsondraw.theme--dark{--list-border-color: var(--color-gray-80)}.jsondraw.theme--dark .QuickSearch__wrapper{border-bottom:none}.jsondraw .QuickSearch__input{position:absolute;top:0;left:0;width:100%;box-sizing:border-box;border:0 !important;font-size:.875rem;padding-left:2.5rem !important;padding-right:.75rem !important}.jsondraw .QuickSearch__input::placeholder{color:var(--color-gray-40)}.jsondraw .QuickSearch__input:focus{box-shadow:none !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/search/QuickSearch.scss\"],\"names\":[],\"mappings\":\"AAAA,UACE,yCAAA,CAEA,gCACE,iBAAA,CACA,aAAA,CACA,gDAAA,CAEA,oCACE,iBAAA,CACA,SAAA,CACA,0BAAA,CACA,WAAA,CACA,aAAA,CACA,cAAA,CACA,0BAAA,CACA,SAAA,CAIJ,sBACE,yCAAA,CAEA,4CACE,kBAAA,CAIJ,8BACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,qBAAA,CACA,mBAAA,CACA,iBAAA,CACA,8BAAA,CACA,+BAAA,CAEA,2CACE,0BAAA,CAGF,oCACE,0BAAA\",\"sourcesContent\":[\".jsondraw {\\n  --list-border-color: var(--color-gray-20);\\n\\n  .QuickSearch__wrapper {\\n    position: relative;\\n    height: 2.6rem; // added +0.1 due to Safari\\n    border-bottom: 1px solid var(--list-border-color);\\n\\n    svg {\\n      position: absolute;\\n      top: 47.5%; // 50% is not exactly in the center of the input\\n      transform: translateY(-50%);\\n      left: 0.75rem;\\n      width: 1.25rem;\\n      height: 1.25rem;\\n      color: var(--color-gray-40);\\n      z-index: 1;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    --list-border-color: var(--color-gray-80);\\n\\n    .QuickSearch__wrapper {\\n      border-bottom: none;\\n    }\\n  }\\n\\n  .QuickSearch__input {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    box-sizing: border-box;\\n    border: 0 !important;\\n    font-size: 0.875rem;\\n    padding-left: 2.5rem !important;\\n    padding-right: 0.75rem !important;\\n\\n    &::placeholder {\\n      color: var(--color-gray-40);\\n    }\\n\\n    &:focus {\\n      box-shadow: none !important;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.footer-center{pointer-events:none;display:flex;width:100%;justify-content:flex-start;margin-inline-end:.6rem}.footer-center>*{pointer-events:var(--ui-pointerEvents)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/footer/FooterCenter.scss\"],\"names\":[],\"mappings\":\"AAAA,eACE,mBAAA,CAEA,YAAA,CACA,UAAA,CACA,0BAAA,CACA,uBAAA,CAEA,iBACE,sCAAA\",\"sourcesContent\":[\".footer-center {\\n  pointer-events: none;\\n\\n  display: flex;\\n  width: 100%;\\n  justify-content: flex-start;\\n  margin-inline-end: 0.6rem;\\n\\n  & > * {\\n    pointer-events: var(--ui-pointerEvents);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .dialog-mermaid-title{margin-block:.25rem;font-size:1.25rem;font-weight:700;padding-inline:2.5rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/TTDDialog/MermaidToJsonDraw.scss\"],\"names\":[],\"mappings\":\"AAEI,gCACE,mBAAA,CACA,iBAAA,CACA,eAAA,CACA,qBAAA\",\"sourcesContent\":[\".jsondraw {\\n  .dialog-mermaid {\\n    &-title {\\n      margin-block: 0.25rem;\\n      font-size: 1.25rem;\\n      font-weight: 700;\\n      padding-inline: 2.5rem;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .layer-ui__library{display:flex;flex-direction:column;flex:1 1 auto}.jsondraw .library-actions-counter{background-color:var(--color-primary);color:var(--color-primary-light);font-weight:700;display:flex;align-items:center;justify-content:center;border-radius:50%;width:1rem;height:1rem;position:absolute;bottom:-0.25rem;right:-0.25rem;font-size:.625rem;pointer-events:none}.jsondraw .layer-ui__library-message{padding:2rem;min-width:200px;display:flex;flex-direction:column;align-items:center;flex-grow:1;justify-content:center}.jsondraw .layer-ui__library-message span{font-size:.8em}.jsondraw .publish-library-success .Dialog__content{display:flex;flex-direction:column}.jsondraw .publish-library-success-close.ToolIcon_type_button{background-color:#228be6;align-self:flex-end}.jsondraw .publish-library-success-close.ToolIcon_type_button:hover{background-color:#1971c2}.jsondraw .publish-library-success-close.ToolIcon_type_button .ToolIcon__icon{width:auto;font-size:1rem;color:#fff;padding:0 .5rem}.jsondraw .library-menu-control-buttons{display:flex;align-items:center;justify-content:center;gap:.625rem;position:relative}.jsondraw .library-menu-control-buttons--at-bottom::before{content:\"\";width:calc(100% - 1.5rem);height:1px;position:absolute;top:-1px;background:var(--sidebar-border-color)}.jsondraw .library-menu-browse-button{flex:1;height:var(--lg-button-size);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;border-radius:var(--border-radius-lg);background-color:var(--color-primary);color:#fff;text-align:center;white-space:nowrap;text-decoration:none !important;font-weight:600;font-size:.75rem}.jsondraw .library-menu-browse-button:hover{background-color:var(--color-brand-hover)}.jsondraw .library-menu-browse-button:active{background-color:var(--color-brand-active)}.jsondraw.theme--dark .library-menu-browse-button{color:var(--color-gray-100)}.jsondraw.jsondraw--mobile .library-menu-browse-button{height:var(--default-button-size)}.jsondraw .layer-ui__library .dropdown-menu{width:auto;top:initial;right:0;left:initial;bottom:100%;margin-bottom:.625rem}.jsondraw .layer-ui__library .dropdown-menu .dropdown-menu-container{width:196px;border-radius:var(--border-radius-lg);padding:.25rem .5rem;--box-shadow: var(--library-dropdown-shadow)}.jsondraw .layer-ui__library .library-menu-dropdown-container{z-index:1;position:relative}.jsondraw .layer-ui__library .library-menu-dropdown-container--in-heading{margin-left:auto}.jsondraw .layer-ui__library .library-menu-dropdown-container--in-heading .dropdown-menu{top:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/library/LibraryMenu.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,6BACE,YAAA,CACA,qBAAA,CAEA,aAAA,CAGF,mCACE,qCAAA,CACA,gCAAA,CACA,eAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CACA,cAAA,CACA,iBAAA,CACA,mBAAA,CAGF,qCACE,YAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,WAAA,CACA,sBAAA,CAEA,0CACE,cAAA,CAKF,oDACE,YAAA,CACA,qBAAA,CAGF,8DACE,wBC3BS,CD4BT,mBAAA,CACA,oEACE,wBC5BO,CD8BT,8EACE,UAAA,CACA,cAAA,CACA,UAAA,CACA,eAAA,CAKN,wCACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,iBAAA,CAEA,2DACE,UAAA,CACA,yBAAA,CACA,UAAA,CACA,iBAAA,CACA,QAAA,CACA,sCAAA,CAIJ,sCACE,MAAA,CAEA,4BAAA,CAEA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,iBAAA,CAEA,qCAAA,CACA,qCAAA,CACA,UAAA,CACA,iBAAA,CACA,kBAAA,CACA,+BAAA,CAEA,eAAA,CACA,gBAAA,CAEA,4CACE,yCAAA,CAEF,6CACE,0CAAA,CAKF,kDACE,2BAAA,CAIJ,uDACE,iCAAA,CAGF,4CACE,UAAA,CACA,WAAA,CACA,OAAA,CACA,YAAA,CACA,WAAA,CACA,qBAAA,CAEA,qEACE,WAAA,CACA,qCAAA,CACA,oBAAA,CAEA,4CAAA,CAIJ,8DACE,SAAA,CACA,iBAAA,CACA,0EACE,gBAAA,CACA,yFACE,QAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .layer-ui__library {\\n    display: flex;\\n    flex-direction: column;\\n\\n    flex: 1 1 auto;\\n  }\\n\\n  .library-actions-counter {\\n    background-color: var(--color-primary);\\n    color: var(--color-primary-light);\\n    font-weight: 700;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    border-radius: 50%;\\n    width: 1rem;\\n    height: 1rem;\\n    position: absolute;\\n    bottom: -0.25rem;\\n    right: -0.25rem;\\n    font-size: 0.625rem;\\n    pointer-events: none;\\n  }\\n\\n  .layer-ui__library-message {\\n    padding: 2rem;\\n    min-width: 200px;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    flex-grow: 1;\\n    justify-content: center;\\n\\n    span {\\n      font-size: 0.8em;\\n    }\\n  }\\n\\n  .publish-library-success {\\n    .Dialog__content {\\n      display: flex;\\n      flex-direction: column;\\n    }\\n\\n    &-close.ToolIcon_type_button {\\n      background-color: $color-blue-6;\\n      align-self: flex-end;\\n      &:hover {\\n        background-color: $color-blue-8;\\n      }\\n      .ToolIcon__icon {\\n        width: auto;\\n        font-size: 1rem;\\n        color: #fff;\\n        padding: 0 0.5rem;\\n      }\\n    }\\n  }\\n\\n  .library-menu-control-buttons {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    gap: 0.625rem;\\n    position: relative;\\n\\n    &--at-bottom::before {\\n      content: \\\"\\\";\\n      width: calc(100% - 1.5rem);\\n      height: 1px;\\n      position: absolute;\\n      top: -1px;\\n      background: var(--sidebar-border-color);\\n    }\\n  }\\n\\n  .library-menu-browse-button {\\n    flex: 1;\\n\\n    height: var(--lg-button-size);\\n\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    overflow: hidden;\\n    position: relative;\\n\\n    border-radius: var(--border-radius-lg);\\n    background-color: var(--color-primary);\\n    color: #fff;\\n    text-align: center;\\n    white-space: nowrap;\\n    text-decoration: none !important;\\n\\n    font-weight: 600;\\n    font-size: 0.75rem;\\n\\n    &:hover {\\n      background-color: var(--color-brand-hover);\\n    }\\n    &:active {\\n      background-color: var(--color-brand-active);\\n    }\\n  }\\n\\n  &.theme--dark {\\n    .library-menu-browse-button {\\n      color: var(--color-gray-100);\\n    }\\n  }\\n\\n  &.jsondraw--mobile .library-menu-browse-button {\\n    height: var(--default-button-size);\\n  }\\n\\n  .layer-ui__library .dropdown-menu {\\n    width: auto;\\n    top: initial;\\n    right: 0;\\n    left: initial;\\n    bottom: 100%;\\n    margin-bottom: 0.625rem;\\n\\n    .dropdown-menu-container {\\n      width: 196px;\\n      border-radius: var(--border-radius-lg);\\n      padding: 0.25rem 0.5rem;\\n\\n      --box-shadow: var(--library-dropdown-shadow);\\n    }\\n  }\\n\\n  .layer-ui__library .library-menu-dropdown-container {\\n    z-index: 1;\\n    position: relative;\\n    &--in-heading {\\n      margin-left: auto;\\n      .dropdown-menu {\\n        top: 100%;\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .FontPicker__container{display:grid;grid-template-columns:calc(1rem + 3*var(--default-button-size)) 1rem 1fr;align-items:center}.jsondraw--mobile.jsondraw .FontPicker__container{max-width:calc(2rem + 4*var(--default-button-size))}.jsondraw .FontPicker__container--compact{display:block;grid-template-columns:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/FontPicker/FontPicker.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,iCACE,YAAA,CACA,wEAAA,CACA,kBAAA,CCoBO,kDDjBL,mDAAA,CAKF,0CACE,aAAA,CACA,0BAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .FontPicker__container {\\n    display: grid;\\n    grid-template-columns: calc(1rem + 3 * var(--default-button-size)) 1rem 1fr; // calc ~ 2 gaps + 4 buttons\\n    align-items: center;\\n\\n    @include isMobile {\\n      max-width: calc(\\n        2rem + 4 * var(--default-button-size)\\n      ); // 4 gaps + 4 buttons\\n    }\\n\\n    &--compact {\\n      display: block;\\n      grid-template-columns: none;\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .HintViewer{pointer-events:none;box-sizing:border-box;position:absolute;display:flex;flex-direction:column;justify-content:center;left:0;top:100%;max-width:100%;width:100%;margin-top:.5rem;text-align:center;color:var(--color-gray-40);font-size:.75rem}.jsondraw--mobile.jsondraw .HintViewer{position:static;padding-right:2rem}.jsondraw .HintViewer>span{padding:.25rem}.jsondraw .HintViewer kbd{display:inline-block;margin:0 1px;font-family:monospace;border:1px solid var(--color-gray-40);border-radius:4px;padding:1px 3px;font-size:10px}.jsondraw.theme--dark .HintViewer{color:var(--color-gray-60)}.jsondraw.theme--dark .HintViewer kbd{border-color:var(--color-gray-60)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/popups/HintViewer.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAME,sBACE,mBAAA,CACA,qBAAA,CACA,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,MAAA,CACA,QAAA,CACA,cAAA,CACA,UAAA,CACA,gBAAA,CACA,iBAAA,CACA,0BAAA,CACA,gBAAA,CCMO,uCDHL,eAAA,CACA,kBAAA,CAGF,2BACE,cAAA,CAGF,0BACE,oBAAA,CACA,YAAA,CACA,qBAAA,CACA,qCAAA,CACA,iBAAA,CACA,eAAA,CACA,cAAA,CAKF,kCACE,0BAAA,CACA,sCACE,iCAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n// this is loosely based on the longest hint text\\n$wide-viewport-width: 1000px;\\n\\n.jsondraw {\\n  .HintViewer {\\n    pointer-events: none;\\n    box-sizing: border-box;\\n    position: absolute;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    left: 0;\\n    top: 100%;\\n    max-width: 100%;\\n    width: 100%;\\n    margin-top: 0.5rem;\\n    text-align: center;\\n    color: var(--color-gray-40);\\n    font-size: 0.75rem;\\n\\n    @include isMobile {\\n      position: static;\\n      padding-right: 2rem;\\n    }\\n\\n    > span {\\n      padding: 0.25rem;\\n    }\\n\\n    kbd {\\n      display: inline-block;\\n      margin: 0 1px;\\n      font-family: monospace;\\n      border: 1px solid var(--color-gray-40);\\n      border-radius: 4px;\\n      padding: 1px 3px;\\n      font-size: 10px;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    .HintViewer {\\n      color: var(--color-gray-60);\\n      kbd {\\n        border-color: var(--color-gray-60);\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw--mobile.jsondraw .PasteChartDialog .Island{display:flex;flex-direction:column}.jsondraw .PasteChartDialog .container{display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap}.jsondraw--mobile.jsondraw .PasteChartDialog .container{flex-direction:column;justify-content:center}.jsondraw .PasteChartDialog .ChartPreview{margin:8px;text-align:center;width:192px;height:128px;border-radius:2px;padding:1px;border:1px solid #ced4da;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0)}.jsondraw .PasteChartDialog .ChartPreview div{display:inline-block}.jsondraw .PasteChartDialog .ChartPreview svg{max-height:120px;max-width:186px}.jsondraw .PasteChartDialog .ChartPreview:hover{padding:0;border:2px solid #339af0}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/PasteChartDialog.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAKM,qDACE,YAAA,CACA,qBAAA,CAGJ,uCACE,YAAA,CACA,kBAAA,CACA,4BAAA,CACA,cAAA,CCYK,wDDVH,qBAAA,CACA,sBAAA,CAGJ,0CACE,UAAA,CACA,iBAAA,CACA,WAAA,CACA,YAAA,CACA,iBAAA,CACA,WAAA,CACA,wBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,wBAAA,CACA,8CACE,oBAAA,CAEF,8CACE,gBAAA,CACA,eAAA,CAEF,gDACE,SAAA,CACA,wBAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .PasteChartDialog {\\n    @include isMobile {\\n      .Island {\\n        display: flex;\\n        flex-direction: column;\\n      }\\n    }\\n    .container {\\n      display: flex;\\n      align-items: center;\\n      justify-content: space-around;\\n      flex-wrap: wrap;\\n      @include isMobile {\\n        flex-direction: column;\\n        justify-content: center;\\n      }\\n    }\\n    .ChartPreview {\\n      margin: 8px;\\n      text-align: center;\\n      width: 192px;\\n      height: 128px;\\n      border-radius: 2px;\\n      padding: 1px;\\n      border: 1px solid $color-gray-4;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      background: transparent;\\n      div {\\n        display: inline-block;\\n      }\\n      svg {\\n        max-height: 120px;\\n        max-width: 186px;\\n      }\\n      &:hover {\\n        padding: 0;\\n        border: 2px solid $color-blue-5;\\n      }\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.zoom-actions,.undo-redo-buttons{background-color:var(--island-bg-color);border-radius:var(--border-radius-lg);box-shadow:0 0 0 1px var(--color-surface-lowest)}.zoom-button,.undo-redo-buttons button{border-radius:0 !important;background-color:var(--color-surface-low) !important;font-size:.875rem !important;width:var(--lg-button-size);height:var(--lg-button-size)}.zoom-button svg,.undo-redo-buttons button svg{width:var(--lg-icon-size) !important;height:var(--lg-icon-size) !important}.zoom-button .ToolIcon__icon,.undo-redo-buttons button .ToolIcon__icon{width:100%;height:100%}.reset-zoom-button{border-left:0 !important;border-right:0 !important;padding:0 .625rem !important;width:3.75rem !important;justify-content:center;color:var(--text-primary-color)}.zoom-out-button{border-top-left-radius:var(--border-radius-lg) !important;border-bottom-left-radius:var(--border-radius-lg) !important}:root[dir=rtl] .zoom-out-button{transform:scaleX(-1)}.zoom-out-button .ToolIcon__icon{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.zoom-in-button{border-top-right-radius:var(--border-radius-lg) !important;border-bottom-right-radius:var(--border-radius-lg) !important}:root[dir=rtl] .zoom-in-button{transform:scaleX(-1)}.zoom-in-button .ToolIcon__icon{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.undo-redo-buttons .undo-button-container button{border-top-left-radius:var(--border-radius-lg) !important;border-bottom-left-radius:var(--border-radius-lg) !important;border-right:0 !important}:root[dir=rtl] .undo-redo-buttons .undo-button-container button{transform:scaleX(-1)}.undo-redo-buttons .undo-button-container button .ToolIcon__icon{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.undo-redo-buttons .redo-button-container button{border-top-right-radius:var(--border-radius-lg) !important;border-bottom-right-radius:var(--border-radius-lg) !important}:root[dir=rtl] .undo-redo-buttons .redo-button-container button{transform:scaleX(-1)}.undo-redo-buttons .redo-button-container button .ToolIcon__icon{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.compact-shape-actions{display:flex;flex-direction:column;gap:.5rem;max-height:calc(100vh - 200px);overflow-y:auto;padding:.5rem}.compact-shape-actions .compact-action-item{position:relative;display:flex;justify-content:center;align-items:center;min-height:2.5rem;pointer-events:auto;--default-button-size: 2rem}.compact-shape-actions .compact-action-item .compact-action-button{width:var(--mobile-action-button-size);height:var(--mobile-action-button-size);border:none;border-radius:var(--border-radius-lg);color:var(--color-on-surface);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;background:var(--mobile-action-button-bg)}.compact-shape-actions .compact-action-item .compact-action-button svg{width:1rem;height:1rem;flex:0 0 auto}.compact-shape-actions .compact-action-item .compact-action-button.active{background:var(--color-surface-primary-container, var(--mobile-action-button-bg))}.compact-shape-actions .compact-action-item .compact-popover-content .popover-section{margin-bottom:1rem}.compact-shape-actions .compact-action-item .compact-popover-content .popover-section:last-child{margin-bottom:0}.compact-shape-actions .compact-action-item .compact-popover-content .popover-section .popover-section-title{font-size:.75rem;font-weight:600;color:var(--color-text-secondary);margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.compact-shape-actions .compact-action-item .compact-popover-content .popover-section .buttonList{display:flex;flex-wrap:wrap;gap:.25rem}.compact-shape-actions .ToolIcon .ToolIcon__icon{width:var(--mobile-action-button-size);height:var(--mobile-action-button-size);background:var(--mobile-action-button-bg)}.compact-shape-actions .ToolIcon .ToolIcon__icon:hover{background-color:rgba(0,0,0,0)}.compact-shape-actions-island{width:fit-content;overflow-x:hidden}.mobile-shape-actions{z-index:999;display:flex;flex-direction:row;justify-content:space-between;width:100%;background:rgba(0,0,0,0);border-radius:var(--border-radius-lg);box-shadow:none;overflow:none;scrollbar-width:none;-ms-overflow-style:none}.shape-actions-theme-scope{--button-border: transparent;--button-bg: var(--color-surface-mid)}:root.theme--dark .shape-actions-theme-scope{--button-hover-bg: #363541;--button-bg: var(--color-surface-high)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/toolbar/Actions.scss\"],\"names\":[],\"mappings\":\"AAAA,iCAEE,uCAAA,CACA,qCAAA,CACA,gDAAA,CAGF,uCAEE,0BAAA,CACA,oDAAA,CACA,4BAAA,CACA,2BAAA,CACA,4BAAA,CAEA,+CACE,oCAAA,CACA,qCAAA,CAGF,uEACE,UAAA,CACA,WAAA,CAIJ,mBACE,wBAAA,CACA,yBAAA,CACA,4BAAA,CACA,wBAAA,CACA,sBAAA,CACA,+BAAA,CAGF,iBACE,yDAAA,CACA,4DAAA,CAEA,gCACE,oBAAA,CAGF,iCACE,oCAAA,CACA,uCAAA,CAIJ,gBACE,0DAAA,CACA,6DAAA,CAEA,+BACE,oBAAA,CAGF,gCACE,mCAAA,CACA,sCAAA,CAKF,iDACE,yDAAA,CACA,4DAAA,CACA,yBAAA,CAEA,gEACE,oBAAA,CAGF,iEACE,oCAAA,CACA,uCAAA,CAIJ,iDACE,0DAAA,CACA,6DAAA,CAEA,gEACE,oBAAA,CAGF,iEACE,mCAAA,CACA,sCAAA,CAKN,uBACE,YAAA,CACA,qBAAA,CACA,SAAA,CACA,8BAAA,CACA,eAAA,CACA,aAAA,CAEA,4CACE,iBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,iBAAA,CACA,mBAAA,CAEA,2BAAA,CAEA,mEACE,sCAAA,CACA,uCAAA,CACA,WAAA,CACA,qCAAA,CACA,6BAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,uBAAA,CAEA,yCAAA,CAEA,uEACE,UAAA,CACA,WAAA,CACA,aAAA,CAGF,0EACE,iFAAA,CAQF,sFACE,kBAAA,CAEA,iGACE,eAAA,CAGF,6GACE,gBAAA,CACA,eAAA,CACA,iCAAA,CACA,mBAAA,CACA,wBAAA,CACA,mBAAA,CAGF,kGACE,YAAA,CACA,cAAA,CACA,UAAA,CAON,iDACE,sCAAA,CACA,uCAAA,CAEA,yCAAA,CAEA,uDACE,8BAAA,CAMR,8BACE,iBAAA,CACA,iBAAA,CAGF,sBACE,WAAA,CACA,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,UAAA,CACA,wBAAA,CACA,qCAAA,CACA,eAAA,CACA,aAAA,CACA,oBAAA,CACA,uBAAA,CAGF,2BACE,4BAAA,CACA,qCAAA,CAGF,6CACE,0BAAA,CACA,sCAAA\",\"sourcesContent\":[\".zoom-actions,\\n.undo-redo-buttons {\\n  background-color: var(--island-bg-color);\\n  border-radius: var(--border-radius-lg);\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n}\\n\\n.zoom-button,\\n.undo-redo-buttons button {\\n  border-radius: 0 !important;\\n  background-color: var(--color-surface-low) !important;\\n  font-size: 0.875rem !important;\\n  width: var(--lg-button-size);\\n  height: var(--lg-button-size);\\n\\n  svg {\\n    width: var(--lg-icon-size) !important;\\n    height: var(--lg-icon-size) !important;\\n  }\\n\\n  .ToolIcon__icon {\\n    width: 100%;\\n    height: 100%;\\n  }\\n}\\n\\n.reset-zoom-button {\\n  border-left: 0 !important;\\n  border-right: 0 !important;\\n  padding: 0 0.625rem !important;\\n  width: 3.75rem !important;\\n  justify-content: center;\\n  color: var(--text-primary-color);\\n}\\n\\n.zoom-out-button {\\n  border-top-left-radius: var(--border-radius-lg) !important;\\n  border-bottom-left-radius: var(--border-radius-lg) !important;\\n\\n  :root[dir=\\\"rtl\\\"] & {\\n    transform: scaleX(-1);\\n  }\\n\\n  .ToolIcon__icon {\\n    border-top-right-radius: 0 !important;\\n    border-bottom-right-radius: 0 !important;\\n  }\\n}\\n\\n.zoom-in-button {\\n  border-top-right-radius: var(--border-radius-lg) !important;\\n  border-bottom-right-radius: var(--border-radius-lg) !important;\\n\\n  :root[dir=\\\"rtl\\\"] & {\\n    transform: scaleX(-1);\\n  }\\n\\n  .ToolIcon__icon {\\n    border-top-left-radius: 0 !important;\\n    border-bottom-left-radius: 0 !important;\\n  }\\n}\\n\\n.undo-redo-buttons {\\n  .undo-button-container button {\\n    border-top-left-radius: var(--border-radius-lg) !important;\\n    border-bottom-left-radius: var(--border-radius-lg) !important;\\n    border-right: 0 !important;\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      transform: scaleX(-1);\\n    }\\n\\n    .ToolIcon__icon {\\n      border-top-right-radius: 0 !important;\\n      border-bottom-right-radius: 0 !important;\\n    }\\n  }\\n\\n  .redo-button-container button {\\n    border-top-right-radius: var(--border-radius-lg) !important;\\n    border-bottom-right-radius: var(--border-radius-lg) !important;\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      transform: scaleX(-1);\\n    }\\n\\n    .ToolIcon__icon {\\n      border-top-left-radius: 0 !important;\\n      border-bottom-left-radius: 0 !important;\\n    }\\n  }\\n}\\n\\n.compact-shape-actions {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 0.5rem;\\n  max-height: calc(100vh - 200px);\\n  overflow-y: auto;\\n  padding: 0.5rem;\\n\\n  .compact-action-item {\\n    position: relative;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    min-height: 2.5rem;\\n    pointer-events: auto;\\n\\n    --default-button-size: 2rem;\\n\\n    .compact-action-button {\\n      width: var(--mobile-action-button-size);\\n      height: var(--mobile-action-button-size);\\n      border: none;\\n      border-radius: var(--border-radius-lg);\\n      color: var(--color-on-surface);\\n      cursor: pointer;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      transition: all 0.2s ease;\\n\\n      background: var(--mobile-action-button-bg);\\n\\n      svg {\\n        width: 1rem;\\n        height: 1rem;\\n        flex: 0 0 auto;\\n      }\\n\\n      &.active {\\n        background: var(\\n          --color-surface-primary-container,\\n          var(--mobile-action-button-bg)\\n        );\\n      }\\n    }\\n\\n    .compact-popover-content {\\n      .popover-section {\\n        margin-bottom: 1rem;\\n\\n        &:last-child {\\n          margin-bottom: 0;\\n        }\\n\\n        .popover-section-title {\\n          font-size: 0.75rem;\\n          font-weight: 600;\\n          color: var(--color-text-secondary);\\n          margin-bottom: 0.5rem;\\n          text-transform: uppercase;\\n          letter-spacing: 0.5px;\\n        }\\n\\n        .buttonList {\\n          display: flex;\\n          flex-wrap: wrap;\\n          gap: 0.25rem;\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon {\\n    .ToolIcon__icon {\\n      width: var(--mobile-action-button-size);\\n      height: var(--mobile-action-button-size);\\n\\n      background: var(--mobile-action-button-bg);\\n\\n      &:hover {\\n        background-color: transparent;\\n      }\\n    }\\n  }\\n}\\n\\n.compact-shape-actions-island {\\n  width: fit-content;\\n  overflow-x: hidden;\\n}\\n\\n.mobile-shape-actions {\\n  z-index: 999;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  width: 100%;\\n  background: transparent;\\n  border-radius: var(--border-radius-lg);\\n  box-shadow: none;\\n  overflow: none;\\n  scrollbar-width: none;\\n  -ms-overflow-style: none;\\n}\\n\\n.shape-actions-theme-scope {\\n  --button-border: transparent;\\n  --button-bg: var(--color-surface-mid);\\n}\\n\\n:root.theme--dark .shape-actions-theme-scope {\\n  --button-hover-bg: #363541;\\n  --button-bg: var(--color-surface-high);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Dialog__action-button{position:relative;display:flex;column-gap:.5rem;align-items:center;padding:.5rem 1.5rem;border:1px solid var(--default-border-color);background-color:rgba(0,0,0,0);height:3rem;border-radius:var(--border-radius-lg);letter-spacing:.4px;color:inherit;font-family:inherit;font-size:.875rem;font-weight:600;user-select:none}.jsondraw .Dialog__action-button svg{display:block;width:1rem;height:1rem}.jsondraw .Dialog__action-button--danger{background-color:var(--color-danger);border-color:var(--color-danger);color:#fff}.jsondraw .Dialog__action-button--primary{background-color:var(--color-primary);border-color:var(--color-primary);color:#fff}.jsondraw.theme--dark .Dialog__action-button--danger{color:var(--color-gray-100)}.jsondraw.theme--dark .Dialog__action-button--primary{color:var(--color-gray-100)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/dialogs/DialogActionButton.scss\"],\"names\":[],\"mappings\":\"AACE,iCACE,iBAAA,CACA,YAAA,CACA,gBAAA,CACA,kBAAA,CACA,oBAAA,CACA,4CAAA,CACA,8BAAA,CACA,WAAA,CACA,qCAAA,CACA,mBAAA,CACA,aAAA,CACA,mBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CAEA,qCACE,aAAA,CACA,UAAA,CACA,WAAA,CAGF,yCACE,oCAAA,CACA,gCAAA,CACA,UAAA,CAGF,0CACE,qCAAA,CACA,iCAAA,CACA,UAAA,CAKF,qDACE,2BAAA,CAGF,sDACE,2BAAA\",\"sourcesContent\":[\".jsondraw {\\n  .Dialog__action-button {\\n    position: relative;\\n    display: flex;\\n    column-gap: 0.5rem;\\n    align-items: center;\\n    padding: 0.5rem 1.5rem;\\n    border: 1px solid var(--default-border-color);\\n    background-color: transparent;\\n    height: 3rem;\\n    border-radius: var(--border-radius-lg);\\n    letter-spacing: 0.4px;\\n    color: inherit;\\n    font-family: inherit;\\n    font-size: 0.875rem;\\n    font-weight: 600;\\n    user-select: none;\\n\\n    svg {\\n      display: block;\\n      width: 1rem;\\n      height: 1rem;\\n    }\\n\\n    &--danger {\\n      background-color: var(--color-danger);\\n      border-color: var(--color-danger);\\n      color: #fff;\\n    }\\n\\n    &--primary {\\n      background-color: var(--color-primary);\\n      border-color: var(--color-primary);\\n      color: #fff;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    .Dialog__action-button--danger {\\n      color: var(--color-gray-100);\\n    }\\n\\n    .Dialog__action-button--primary {\\n      color: var(--color-gray-100);\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw{--container-padding-y: 1rem;--container-padding-x: 0.75rem}.jsondraw .library-menu-items-header{display:flex;padding-top:1rem;padding-bottom:.5rem;gap:.5rem}.jsondraw .library-menu-items__no-items{text-align:center;color:var(--color-gray-70);line-height:1.5;font-size:.875rem;width:100%;min-height:55px;display:flex;flex-direction:column;align-items:center;justify-content:center}.jsondraw .library-menu-items__no-items__label{color:var(--color-primary);font-weight:700;font-size:1.125rem;margin-bottom:.25rem}.jsondraw .library-menu-items__no-items__hint{color:var(--color-border-outline);padding:.75rem 1rem}.jsondraw.theme--dark .library-menu-items__no-items{color:var(--color-gray-40)}.jsondraw .library-menu-items-container{width:100%;display:flex;flex-grow:1;flex-shrink:1;flex-basis:0;overflow-y:auto;flex-direction:column;height:100%;justify-content:flex-start;margin:0;position:relative}.jsondraw .library-menu-items-container>div{padding-left:.75rem;padding-right:.75rem}.jsondraw .library-menu-items-container__row{display:grid;grid-template-columns:repeat(4, 1fr);gap:1rem}.jsondraw .library-menu-items-container__items{position:relative;row-gap:.5rem;padding:1rem 0 var(--container-padding-y) 0;flex:1;overflow-y:auto;overflow-x:hidden}.jsondraw .library-menu-items-container__header{display:flex;align-items:center;flex:1 1 auto;color:var(--color-primary);font-size:1.125rem;font-weight:700;margin-bottom:.75rem;width:100%;box-sizing:border-box}.jsondraw .library-menu-items-container__header--excal{margin-top:2rem}.jsondraw .library-menu-items-container__header__hint{margin-left:auto;font-size:10px;color:var(--color-border-outline);font-weight:400}.jsondraw .library-menu-items-container__header__hint kbd{font-family:monospace;border:1px solid var(--color-border-outline);border-radius:4px;padding:1px 3px}.jsondraw .library-menu-items-container__grid{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:1rem}.jsondraw .library-menu-items-container__search{flex:1 1 auto;margin:0}.jsondraw .library-menu-items-container__search .ExcTextField__input{height:var(--lg-button-size)}.jsondraw .library-menu-items-container__search .ExcTextField__input input{font-size:.875rem}.jsondraw .library-menu-items-container__search.hideCancelButton input::-webkit-search-cancel-button{-webkit-appearance:none;appearance:none;display:none}.jsondraw .library-menu-items-container .separator{width:100%;display:flex;align-items:center;font-weight:500;font-size:.9rem;margin:.6em .2em;color:var(--text-primary-color)}.jsondraw .library-menu-items-private-library-container{min-height:3.75rem;width:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/library/LibraryMenuItems.scss\"],\"names\":[],\"mappings\":\"AAEA,UACE,2BAAA,CACA,8BAAA,CAEA,qCACE,YAAA,CACA,gBAAA,CACA,oBAAA,CACA,SAAA,CAGF,wCACE,iBAAA,CACA,0BAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,eAAA,CAEA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CAEA,+CACE,0BAAA,CACA,eAAA,CACA,kBAAA,CACA,oBAAA,CAIJ,8CACE,iCAAA,CACA,mBAAA,CAIA,oDACE,0BAAA,CAIJ,wCACE,UAAA,CACA,YAAA,CACA,WAAA,CACA,aAAA,CACA,YAAA,CACA,eAAA,CACA,qBAAA,CACA,WAAA,CACA,0BAAA,CACA,QAAA,CAEA,iBAAA,CAEA,4CACE,mBAAA,CACA,oBAAA,CAGF,6CACE,YAAA,CACA,oCAAA,CACA,QAAA,CAGF,+CAEE,iBAAA,CAEA,aAAA,CACA,2CAAA,CACA,MAAA,CACA,eAAA,CACA,iBAAA,CAGF,gDACE,YAAA,CACA,kBAAA,CACA,aAAA,CAEA,0BAAA,CACA,kBAAA,CACA,eAAA,CACA,oBAAA,CACA,UAAA,CACA,qBAAA,CAEA,uDACE,eAAA,CAGF,sDACE,gBAAA,CACA,cAAA,CACA,iCAAA,CACA,eAAA,CAEA,0DACE,qBAAA,CACA,4CAAA,CACA,iBAAA,CACA,eAAA,CAKN,8CACE,YAAA,CACA,qCAAA,CACA,aAAA,CAGF,gDACE,aAAA,CACA,QAAA,CAEA,qEACE,4BAAA,CACA,2EACE,iBAAA,CAIJ,qGACE,uBAAA,CACA,eAAA,CACA,YAAA,CAIJ,mDACE,UAAA,CACA,YAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CACA,gBAAA,CACA,+BAAA,CAIJ,wDAGE,kBAAA,CACA,UAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  --container-padding-y: 1rem;\\n  --container-padding-x: 0.75rem;\\n\\n  .library-menu-items-header {\\n    display: flex;\\n    padding-top: 1rem;\\n    padding-bottom: 0.5rem;\\n    gap: 0.5rem;\\n  }\\n\\n  .library-menu-items__no-items {\\n    text-align: center;\\n    color: var(--color-gray-70);\\n    line-height: 1.5;\\n    font-size: 0.875rem;\\n    width: 100%;\\n    min-height: 55px;\\n\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    justify-content: center;\\n\\n    &__label {\\n      color: var(--color-primary);\\n      font-weight: 700;\\n      font-size: 1.125rem;\\n      margin-bottom: 0.25rem;\\n    }\\n  }\\n\\n  .library-menu-items__no-items__hint {\\n    color: var(--color-border-outline);\\n    padding: 0.75rem 1rem;\\n  }\\n\\n  &.theme--dark {\\n    .library-menu-items__no-items {\\n      color: var(--color-gray-40);\\n    }\\n  }\\n\\n  .library-menu-items-container {\\n    width: 100%;\\n    display: flex;\\n    flex-grow: 1;\\n    flex-shrink: 1;\\n    flex-basis: 0;\\n    overflow-y: auto;\\n    flex-direction: column;\\n    height: 100%;\\n    justify-content: flex-start;\\n    margin: 0;\\n\\n    position: relative;\\n\\n    & > div {\\n      padding-left: 0.75rem;\\n      padding-right: 0.75rem;\\n    }\\n\\n    &__row {\\n      display: grid;\\n      grid-template-columns: repeat(4, 1fr);\\n      gap: 1rem;\\n    }\\n\\n    &__items {\\n      // so that spinner is relative-positioned to this container\\n      position: relative;\\n\\n      row-gap: 0.5rem;\\n      padding: 1rem 0 var(--container-padding-y) 0;\\n      flex: 1;\\n      overflow-y: auto;\\n      overflow-x: hidden;\\n    }\\n\\n    &__header {\\n      display: flex;\\n      align-items: center;\\n      flex: 1 1 auto;\\n\\n      color: var(--color-primary);\\n      font-size: 1.125rem;\\n      font-weight: 700;\\n      margin-bottom: 0.75rem;\\n      width: 100%;\\n      box-sizing: border-box;\\n\\n      &--excal {\\n        margin-top: 2rem;\\n      }\\n\\n      &__hint {\\n        margin-left: auto;\\n        font-size: 10px;\\n        color: var(--color-border-outline);\\n        font-weight: 400;\\n\\n        kbd {\\n          font-family: monospace;\\n          border: 1px solid var(--color-border-outline);\\n          border-radius: 4px;\\n          padding: 1px 3px;\\n        }\\n      }\\n    }\\n\\n    &__grid {\\n      display: grid;\\n      grid-template-columns: 1fr 1fr 1fr 1fr;\\n      grid-gap: 1rem;\\n    }\\n\\n    &__search {\\n      flex: 1 1 auto;\\n      margin: 0;\\n\\n      .ExcTextField__input {\\n        height: var(--lg-button-size);\\n        input {\\n          font-size: 0.875rem;\\n        }\\n      }\\n\\n      &.hideCancelButton input::-webkit-search-cancel-button {\\n        -webkit-appearance: none;\\n        appearance: none;\\n        display: none;\\n      }\\n    }\\n\\n    .separator {\\n      width: 100%;\\n      display: flex;\\n      align-items: center;\\n      font-weight: 500;\\n      font-size: 0.9rem;\\n      margin: 0.6em 0.2em;\\n      color: var(--text-primary-color);\\n    }\\n  }\\n\\n  .library-menu-items-private-library-container {\\n    // so that when you toggle between pending item and no items, there's\\n    // no layout shift (this is hardcoded and works only with ENG locale)\\n    min-height: 3.75rem;\\n    width: 100%;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .tool-popover-content{display:flex;flex-direction:row;gap:.25rem;border-radius:.5rem;background:var(--island-bg-color);box-shadow:var(--shadow-island);padding:.5rem;z-index:var(--zIndex-layerUI)}.jsondraw:focus{outline:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/toolbar/ToolPopover.scss\"],\"names\":[],\"mappings\":\"AAGE,gCACE,YAAA,CACA,kBAAA,CACA,UAAA,CACA,mBAAA,CACA,iCAAA,CACA,+BAAA,CACA,aAAA,CACA,6BAAA,CAGF,gBACE,YAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .tool-popover-content {\\n    display: flex;\\n    flex-direction: row;\\n    gap: 0.25rem;\\n    border-radius: 0.5rem;\\n    background: var(--island-bg-color);\\n    box-shadow: var(--shadow-island);\\n    padding: 0.5rem;\\n    z-index: var(--zIndex-layerUI);\\n  }\\n\\n  &:focus {\\n    outline: none;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .JsonDrawLogo{--logo-icon--mobile: 1rem;--logo-text--mobile: 0.75rem;--logo-icon--xs: 2rem;--logo-text--xs: 1.5rem;--logo-icon--small: 2.5rem;--logo-text--small: 1.75rem;--logo-icon--normal: 3rem;--logo-text--normal: 2.2rem;--logo-icon--large: 90px;--logo-text--large: 65px;display:flex;align-items:center}.jsondraw .JsonDrawLogo svg{flex:0 0 auto}.jsondraw .JsonDrawLogo .JsonDrawLogo-icon{width:auto;color:var(--color-logo-icon)}.jsondraw .JsonDrawLogo .JsonDrawLogo-text{margin-left:.75rem;width:auto;color:var(--color-logo-text)}.jsondraw .JsonDrawLogo.is-mobile .JsonDrawLogo-icon{height:var(--logo-icon--mobile)}.jsondraw .JsonDrawLogo.is-mobile .JsonDrawLogo-text{height:var(--logo-text--mobile);margin-left:.5rem}.jsondraw .JsonDrawLogo.is-xs .JsonDrawLogo-icon{height:var(--logo-icon--xs)}.jsondraw .JsonDrawLogo.is-xs .JsonDrawLogo-text{height:var(--logo-text--xs)}.jsondraw .JsonDrawLogo.is-small .JsonDrawLogo-icon{height:var(--logo-icon--small)}.jsondraw .JsonDrawLogo.is-small .JsonDrawLogo-text{height:var(--logo-text--small)}.jsondraw .JsonDrawLogo.is-normal .JsonDrawLogo-icon{height:var(--logo-icon--normal)}.jsondraw .JsonDrawLogo.is-normal .JsonDrawLogo-text{height:var(--logo-text--normal)}.jsondraw .JsonDrawLogo.is-large .JsonDrawLogo-icon{height:var(--logo-icon--large)}.jsondraw .JsonDrawLogo.is-large .JsonDrawLogo-text{height:var(--logo-text--large)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/branding/JsonDrawLogo.scss\"],\"names\":[],\"mappings\":\"AACE,wBACE,yBAAA,CACA,4BAAA,CAEA,qBAAA,CACA,uBAAA,CAEA,0BAAA,CACA,2BAAA,CAEA,yBAAA,CACA,2BAAA,CAEA,wBAAA,CACA,wBAAA,CAEA,YAAA,CACA,kBAAA,CAEA,4BACE,aAAA,CAGF,2CACE,UAAA,CACA,4BAAA,CAGF,2CACE,kBAAA,CACA,UAAA,CACA,4BAAA,CAIA,qDACE,+BAAA,CAGF,qDACE,+BAAA,CACA,iBAAA,CAKF,iDACE,2BAAA,CAGF,iDACE,2BAAA,CAKF,oDACE,8BAAA,CAGF,oDACE,8BAAA,CAKF,qDACE,+BAAA,CAGF,qDACE,+BAAA,CAKF,oDACE,8BAAA,CAGF,oDACE,8BAAA\",\"sourcesContent\":[\".jsondraw {\\n  .JsonDrawLogo {\\n    --logo-icon--mobile: 1rem;\\n    --logo-text--mobile: 0.75rem;\\n\\n    --logo-icon--xs: 2rem;\\n    --logo-text--xs: 1.5rem;\\n\\n    --logo-icon--small: 2.5rem;\\n    --logo-text--small: 1.75rem;\\n\\n    --logo-icon--normal: 3rem;\\n    --logo-text--normal: 2.2rem;\\n\\n    --logo-icon--large: 90px;\\n    --logo-text--large: 65px;\\n\\n    display: flex;\\n    align-items: center;\\n\\n    svg {\\n      flex: 0 0 auto;\\n    }\\n\\n    .JsonDrawLogo-icon {\\n      width: auto;\\n      color: var(--color-logo-icon);\\n    }\\n\\n    .JsonDrawLogo-text {\\n      margin-left: 0.75rem;\\n      width: auto;\\n      color: var(--color-logo-text);\\n    }\\n\\n    &.is-mobile {\\n      .JsonDrawLogo-icon {\\n        height: var(--logo-icon--mobile);\\n      }\\n\\n      .JsonDrawLogo-text {\\n        height: var(--logo-text--mobile);\\n        margin-left: 0.5rem;\\n      }\\n    }\\n\\n    &.is-xs {\\n      .JsonDrawLogo-icon {\\n        height: var(--logo-icon--xs);\\n      }\\n\\n      .JsonDrawLogo-text {\\n        height: var(--logo-text--xs);\\n      }\\n    }\\n\\n    &.is-small {\\n      .JsonDrawLogo-icon {\\n        height: var(--logo-icon--small);\\n      }\\n\\n      .JsonDrawLogo-text {\\n        height: var(--logo-text--small);\\n      }\\n    }\\n\\n    &.is-normal {\\n      .JsonDrawLogo-icon {\\n        height: var(--logo-icon--normal);\\n      }\\n\\n      .JsonDrawLogo-text {\\n        height: var(--logo-text--normal);\\n      }\\n    }\\n\\n    &.is-large {\\n      .JsonDrawLogo-icon {\\n        height: var(--logo-icon--large);\\n      }\\n\\n      .JsonDrawLogo-text {\\n        height: var(--logo-text--large);\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .jsondraw-canvas-buttons{position:absolute;box-shadow:0px 2px 4px 0 rgba(0,0,0,.3);z-index:var(--zIndex-canvasButtons);background:var(--island-bg-color);border-radius:var(--border-radius-lg);display:flex;flex-direction:column;gap:.375rem}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/canvases/ElementCanvasButtons.scss\"],\"names\":[],\"mappings\":\"AACE,mCACE,iBAAA,CAEA,uCAAA,CACA,mCAAA,CACA,iCAAA,CACA,qCAAA,CAEA,YAAA,CACA,qBAAA,CACA,WAAA\",\"sourcesContent\":[\".jsondraw {\\n  .jsondraw-canvas-buttons {\\n    position: absolute;\\n\\n    box-shadow: 0px 2px 4px 0 rgb(0 0 0 / 30%);\\n    z-index: var(--zIndex-canvasButtons);\\n    background: var(--island-bg-color);\\n    border-radius: var(--border-radius-lg);\\n\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.375rem;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .ExportDialog__preview{--preview-padding: calc(var(--space-factor) * 4);background:url(${___CSS_LOADER_URL_REPLACEMENT_0___}) left center;text-align:center;padding:var(--preview-padding);margin-bottom:calc(var(--space-factor)*3);display:flex;justify-content:center;align-items:center}.jsondraw .ExportDialog__preview canvas{max-width:calc(100% - var(--preview-padding)*2);max-height:25rem}.jsondraw.theme--dark .ExportDialog__preview canvas{filter:none}.jsondraw .ExportDialog__actions{width:100%;display:flex;grid-gap:calc(var(--space-factor)*2);align-items:top;justify-content:space-between}.jsondraw--mobile.jsondraw .ExportDialog{display:flex;flex-direction:column}.jsondraw--mobile.jsondraw .ExportDialog__actions{flex-direction:column;align-items:center}.jsondraw--mobile.jsondraw .ExportDialog__actions>*{margin-bottom:calc(var(--space-factor)*3)}.jsondraw--mobile.jsondraw .ExportDialog__preview canvas{max-height:30vh}.jsondraw--mobile.jsondraw .ExportDialog__dialog,.jsondraw--mobile.jsondraw .ExportDialog__dialog .Island{height:100%;box-sizing:border-box}.jsondraw--mobile.jsondraw .ExportDialog__dialog .Island{overflow-y:auto}.jsondraw .ExportDialog--json .ExportDialog-cards{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));justify-items:center;row-gap:2em}@media(max-width: 460px){.jsondraw .ExportDialog--json .ExportDialog-cards{grid-template-columns:repeat(auto-fit, minmax(240px, 1fr))}.jsondraw .ExportDialog--json .ExportDialog-cards .Card-details{min-height:40px}}.jsondraw .ExportDialog--json .ExportDialog-cards .ProjectName{width:fit-content;margin:1em auto;align-items:flex-start;flex-direction:column}.jsondraw .ExportDialog--json .ExportDialog-cards .ProjectName .TextInput{width:auto}.jsondraw .ExportDialog--json .ExportDialog-cards .ProjectName-label{margin:.625em 0;font-weight:bold}.jsondraw button.ExportDialog-imageExportButton{border:0;width:5rem;height:5rem;margin:0 .2em;padding:0;display:flex;align-items:center;justify-content:center;border-radius:1rem;background-color:var(--button-color);box-shadow:0 3px 5px -1px rgba(0,0,0,.28),0 6px 10px 0 rgba(0,0,0,.14);font-family:Cascadia;font-size:1.8em;color:#fff}.jsondraw button.ExportDialog-imageExportButton:hover{background-color:var(--button-color-darker)}.jsondraw button.ExportDialog-imageExportButton:active{background-color:var(--button-color-darkest);box-shadow:none}.jsondraw button.ExportDialog-imageExportButton svg{width:.9em}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/export/ExportDialog.scss\"],\"names\":[],\"mappings\":\"AAGE,iCACE,gDAAA,CAEA,8DAAA,CAEA,iBAAA,CACA,8BAAA,CACA,yCAAA,CAEA,YAAA,CACA,sBAAA,CACA,kBAAA,CAGF,wCACE,+CAAA,CACA,gBAAA,CAGF,oDACE,WAAA,CAGF,iCACE,UAAA,CACA,YAAA,CACA,oCAAA,CACA,eAAA,CACA,6BAAA,CAIA,yCACE,YAAA,CACA,qBAAA,CAGF,kDACE,qBAAA,CACA,kBAAA,CAGF,oDACE,yCAAA,CAGF,yDACE,eAAA,CAGF,0GAEE,WAAA,CACA,qBAAA,CAGF,yDACE,eAAA,CAKF,kDACE,YAAA,CACA,0DAAA,CACA,oBAAA,CACA,WAAA,CAEA,yBANF,kDAOI,0DAAA,CACA,gEACE,eAAA,CAAA,CAIJ,+DACE,iBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CAEA,0EACE,UAAA,CAIJ,qEACE,eAAA,CACA,gBAAA,CAKN,gDACE,QAAA,CAEA,UAAA,CACA,WAAA,CACA,aAAA,CACA,SAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,kBAAA,CACA,oCAAA,CACA,sEAAA,CAGA,oBAAA,CACA,eAAA,CACA,UAAA,CAEA,sDACE,2CAAA,CAEF,uDACE,4CAAA,CACA,eAAA,CAGF,oDACE,UAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .ExportDialog__preview {\\n    --preview-padding: calc(var(--space-factor) * 4);\\n\\n    background: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\\\")\\n      left center;\\n    text-align: center;\\n    padding: var(--preview-padding);\\n    margin-bottom: calc(var(--space-factor) * 3);\\n\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  }\\n\\n  .ExportDialog__preview canvas {\\n    max-width: calc(100% - var(--preview-padding) * 2);\\n    max-height: 25rem;\\n  }\\n\\n  &.theme--dark .ExportDialog__preview canvas {\\n    filter: none;\\n  }\\n\\n  .ExportDialog__actions {\\n    width: 100%;\\n    display: flex;\\n    grid-gap: calc(var(--space-factor) * 2);\\n    align-items: top;\\n    justify-content: space-between;\\n  }\\n\\n  @include isMobile {\\n    .ExportDialog {\\n      display: flex;\\n      flex-direction: column;\\n    }\\n\\n    .ExportDialog__actions {\\n      flex-direction: column;\\n      align-items: center;\\n    }\\n\\n    .ExportDialog__actions > * {\\n      margin-bottom: calc(var(--space-factor) * 3);\\n    }\\n\\n    .ExportDialog__preview canvas {\\n      max-height: 30vh;\\n    }\\n\\n    .ExportDialog__dialog,\\n    .ExportDialog__dialog .Island {\\n      height: 100%;\\n      box-sizing: border-box;\\n    }\\n\\n    .ExportDialog__dialog .Island {\\n      overflow-y: auto;\\n    }\\n  }\\n\\n  .ExportDialog--json {\\n    .ExportDialog-cards {\\n      display: grid;\\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\\n      justify-items: center;\\n      row-gap: 2em;\\n\\n      @media (max-width: 460px) {\\n        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\\n        .Card-details {\\n          min-height: 40px;\\n        }\\n      }\\n\\n      .ProjectName {\\n        width: fit-content;\\n        margin: 1em auto;\\n        align-items: flex-start;\\n        flex-direction: column;\\n\\n        .TextInput {\\n          width: auto;\\n        }\\n      }\\n\\n      .ProjectName-label {\\n        margin: 0.625em 0;\\n        font-weight: bold;\\n      }\\n    }\\n  }\\n\\n  button.ExportDialog-imageExportButton {\\n    border: 0;\\n\\n    width: 5rem;\\n    height: 5rem;\\n    margin: 0 0.2em;\\n    padding: 0;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n\\n    border-radius: 1rem;\\n    background-color: var(--button-color);\\n    box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.28),\\n      0 6px 10px 0 rgba(0, 0, 0, 0.14);\\n\\n    font-family: Cascadia;\\n    font-size: 1.8em;\\n    color: #fff;\\n\\n    &:hover {\\n      background-color: var(--button-color-darker);\\n    }\\n    &:active {\\n      background-color: var(--button-color-darkest);\\n      box-shadow: none;\\n    }\\n\\n    svg {\\n      width: 0.9em;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../fonts/Assistant/Assistant-Regular.woff2\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"../fonts/Assistant/Assistant-Medium.woff2\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"../fonts/Assistant/Assistant-SemiBold.woff2\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"../fonts/Assistant/Assistant-Bold.woff2\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"./Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"./Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@font-face{font-family:\"Assistant\";src:url(${___CSS_LOADER_URL_REPLACEMENT_0___}) format(\"woff2\");font-weight:400;style:normal;display:swap}@font-face{font-family:\"Assistant\";src:url(${___CSS_LOADER_URL_REPLACEMENT_1___}) format(\"woff2\");font-weight:500;style:normal;display:swap}@font-face{font-family:\"Assistant\";src:url(${___CSS_LOADER_URL_REPLACEMENT_2___}) format(\"woff2\");font-weight:600;style:normal;display:swap}@font-face{font-family:\"Assistant\";src:url(${___CSS_LOADER_URL_REPLACEMENT_3___}) format(\"woff2\");font-weight:700;style:normal;display:swap}@font-face{font-family:\"Excalifont\";src:url(${___CSS_LOADER_URL_REPLACEMENT_4___}) format(\"woff2\");font-weight:400;font-style:normal;display:swap}@font-face{font-family:\"Excalifont\";src:url(${___CSS_LOADER_URL_REPLACEMENT_5___}) format(\"woff2\");font-weight:400;font-style:normal;display:swap}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/fonts/fonts.css\"],\"names\":[],\"mappings\":\"AAIA,WACE,uBAAA,CACA,2DAAA,CACA,eAAA,CACA,YAAA,CACA,YAAA,CAGF,WACE,uBAAA,CACA,2DAAA,CACA,eAAA,CACA,YAAA,CACA,YAAA,CAGF,WACE,uBAAA,CACA,2DAAA,CACA,eAAA,CACA,YAAA,CACA,YAAA,CAGF,WACE,uBAAA,CACA,2DAAA,CACA,eAAA,CACA,YAAA,CACA,YAAA,CAGF,WACE,wBAAA,CACA,2DAAA,CACA,eAAA,CACA,iBAAA,CACA,YAAA,CAGF,WACE,wBAAA,CACA,2DAAA,CACA,eAAA,CACA,iBAAA,CACA,YAAA\",\"sourcesContent\":[\"/* Only UI fonts here, which are needed before the editor initializes. */\\n/* These cannot be dynamically prepended with `JSONDRAW_ASSET_PATH`. */\\n/* WARN: The following content is replaced during jsondraw-app build  */\\n\\n@font-face {\\n  font-family: \\\"Assistant\\\";\\n  src: url(../fonts/Assistant/Assistant-Regular.woff2) format(\\\"woff2\\\");\\n  font-weight: 400;\\n  style: normal;\\n  display: swap;\\n}\\n\\n@font-face {\\n  font-family: \\\"Assistant\\\";\\n  src: url(../fonts/Assistant/Assistant-Medium.woff2) format(\\\"woff2\\\");\\n  font-weight: 500;\\n  style: normal;\\n  display: swap;\\n}\\n\\n@font-face {\\n  font-family: \\\"Assistant\\\";\\n  src: url(../fonts/Assistant/Assistant-SemiBold.woff2) format(\\\"woff2\\\");\\n  font-weight: 600;\\n  style: normal;\\n  display: swap;\\n}\\n\\n@font-face {\\n  font-family: \\\"Assistant\\\";\\n  src: url(../fonts/Assistant/Assistant-Bold.woff2) format(\\\"woff2\\\");\\n  font-weight: 700;\\n  style: normal;\\n  display: swap;\\n}\\n\\n@font-face {\\n  font-family: \\\"Excalifont\\\";\\n  src: url(\\\"./Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2\\\") format(\\\"woff2\\\");\\n  font-weight: 400;\\n  font-style: normal;\\n  display: swap;\\n}\\n\\n@font-face {\\n  font-family: \\\"Excalifont\\\";\\n  src: url(\\\"./Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2\\\") format(\\\"woff2\\\");\\n  font-weight: 400;\\n  font-style: normal;\\n  display: swap;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .SVGLayer{pointer-events:none;width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:var(--zIndex-svgLayer)}.jsondraw .SVGLayer svg{image-rendering:auto;overflow:visible;position:absolute;width:100%;height:100%;top:0;left:0}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/canvases/SVGLayer.scss\"],\"names\":[],\"mappings\":\"AAGE,oBACE,mBAAA,CACA,WAAA,CACA,YAAA,CACA,cAAA,CACA,KAAA,CACA,MAAA,CAEA,8BAAA,CAEA,wBACE,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .SVGLayer {\\n    pointer-events: none;\\n    width: 100vw;\\n    height: 100vh;\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n\\n    z-index: var(--zIndex-svgLayer);\\n\\n    & svg {\\n      image-rendering: auto;\\n      overflow: visible;\\n      position: absolute;\\n      width: 100%;\\n      height: 100%;\\n      top: 0;\\n      left: 0;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Spinner{display:flex;align-items:center;justify-content:center;height:100%;margin-left:auto;margin-right:auto;--spinner-color: var(--icon-fill-color)}.jsondraw .Spinner svg{animation:rotate 1.6s linear infinite;animation-delay:var(--spinner-delay);transform-origin:center center}.jsondraw .Spinner circle{stroke:var(--spinner-color);animation:dash 1.6s linear 0s infinite;stroke-linecap:round}@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,300;stroke-dashoffset:0}50%{stroke-dasharray:150,300;stroke-dashoffset:-200}100%{stroke-dasharray:1,300;stroke-dashoffset:-280}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/Spinner.scss\"],\"names\":[],\"mappings\":\"AAKE,mBACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CAEA,uCAAA,CAEA,uBACE,qCAAA,CACA,oCAAA,CACA,8BAAA,CAGF,0BACE,2BAAA,CACA,sCAAA,CACA,oBAAA,CAIJ,kBACE,KACE,wBAAA,CAAA,CAIJ,gBACE,GACE,sBAAA,CACA,mBAAA,CAEF,IACE,wBAAA,CACA,sBAAA,CAEF,KACE,sBAAA,CACA,sBAAA,CAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n$duration: 1.6s;\\n\\n.jsondraw {\\n  .Spinner {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    height: 100%;\\n    margin-left: auto;\\n    margin-right: auto;\\n\\n    --spinner-color: var(--icon-fill-color);\\n\\n    svg {\\n      animation: rotate $duration linear infinite;\\n      animation-delay: var(--spinner-delay);\\n      transform-origin: center center;\\n    }\\n\\n    circle {\\n      stroke: var(--spinner-color);\\n      animation: dash $duration linear 0s infinite;\\n      stroke-linecap: round;\\n    }\\n  }\\n\\n  @keyframes rotate {\\n    100% {\\n      transform: rotate(360deg);\\n    }\\n  }\\n\\n  @keyframes dash {\\n    0% {\\n      stroke-dasharray: 1, 300;\\n      stroke-dashoffset: 0;\\n    }\\n    50% {\\n      stroke-dasharray: 150, 300;\\n      stroke-dashoffset: -200;\\n    }\\n    100% {\\n      stroke-dasharray: 1, 300;\\n      stroke-dashoffset: -280;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.exc-stats{width:204px;position:absolute;top:60px;font-size:12px;z-index:var(--zIndex-layerUI);pointer-events:var(--ui-pointerEvents)}:root[dir=rtl] .exc-stats{left:12px;right:initial}.exc-stats h2{font-size:1.5em;margin-block-start:.83em;margin-block-end:.83em;font-weight:bold}.exc-stats h3{white-space:nowrap;font-size:1.17em;margin:0;font-weight:bold}.exc-stats__rows{display:flex;flex-direction:column;gap:.3125rem}.exc-stats__row{display:flex;justify-content:space-between;align-items:center;display:grid;gap:4px}.exc-stats__row div+div{text-align:right}.exc-stats__row:empty{display:none}.exc-stats__row--heading{text-align:center;font-weight:bold;margin:.25rem 0}.exc-stats .title{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.exc-stats .title h2{margin:0}.exc-stats .close{height:16px;width:16px;cursor:pointer}.exc-stats .close svg{width:100%;height:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/Stats/Stats.scss\"],\"names\":[],\"mappings\":\"AAAA,WACE,WAAA,CACA,iBAAA,CACA,QAAA,CACA,cAAA,CACA,6BAAA,CACA,sCAAA,CAEA,0BACE,SAAA,CACA,aAAA,CAGF,cACE,eAAA,CACA,wBAAA,CACA,sBAAA,CACA,gBAAA,CAEF,cACE,kBAAA,CACA,gBAAA,CACA,QAAA,CACA,gBAAA,CAGF,iBACE,YAAA,CACA,qBAAA,CACA,YAAA,CAGF,gBACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAEA,YAAA,CACA,OAAA,CAEA,wBACE,gBAAA,CAGF,sBACE,YAAA,CAIJ,yBACE,iBAAA,CACA,gBAAA,CACA,eAAA,CAGF,kBACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CAEA,qBACE,QAAA,CAIJ,kBACE,WAAA,CACA,UAAA,CACA,cAAA,CACA,sBACE,UAAA,CACA,WAAA\",\"sourcesContent\":[\".exc-stats {\\n  width: 204px;\\n  position: absolute;\\n  top: 60px;\\n  font-size: 12px;\\n  z-index: var(--zIndex-layerUI);\\n  pointer-events: var(--ui-pointerEvents);\\n\\n  :root[dir=\\\"rtl\\\"] & {\\n    left: 12px;\\n    right: initial;\\n  }\\n\\n  h2 {\\n    font-size: 1.5em;\\n    margin-block-start: 0.83em;\\n    margin-block-end: 0.83em;\\n    font-weight: bold;\\n  }\\n  h3 {\\n    white-space: nowrap;\\n    font-size: 1.17em;\\n    margin: 0;\\n    font-weight: bold;\\n  }\\n\\n  &__rows {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.3125rem;\\n  }\\n\\n  &__row {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n\\n    display: grid;\\n    gap: 4px;\\n\\n    div + div {\\n      text-align: right;\\n    }\\n\\n    &:empty {\\n      display: none;\\n    }\\n  }\\n\\n  &__row--heading {\\n    text-align: center;\\n    font-weight: bold;\\n    margin: 0.25rem 0;\\n  }\\n\\n  .title {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    margin-bottom: 12px;\\n\\n    h2 {\\n      margin: 0;\\n    }\\n  }\\n\\n  .close {\\n    height: 16px;\\n    width: 16px;\\n    cursor: pointer;\\n    svg {\\n      width: 100%;\\n      height: 100%;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .command-palette-dialog{user-select:none}.jsondraw .command-palette-dialog .Modal__content{height:auto;max-height:100%}@media screen and (min-width: 861px){.jsondraw .command-palette-dialog .Modal__content{max-height:750px;height:100%}}.jsondraw .command-palette-dialog .Modal__content .Island{height:100%;padding:1.5rem}.jsondraw .command-palette-dialog .Modal__content .Dialog__content{height:100%;display:flex;flex-direction:column}.jsondraw .command-palette-dialog .shortcuts-wrapper{display:flex;justify-content:center;align-items:center;margin-top:12px;gap:1.5rem}.jsondraw .command-palette-dialog .shortcut{display:flex;justify-content:center;align-items:center;height:16px;font-size:10px;gap:.25rem}.jsondraw .command-palette-dialog .shortcut .shortcut-wrapper{display:flex}.jsondraw .command-palette-dialog .shortcut .shortcut-plus{margin:0px 4px}.jsondraw .command-palette-dialog .shortcut .shortcut-key{padding:0px 4px;height:16px;border-radius:4px;display:flex;justify-content:center;align-items:center;background-color:var(--color-primary-light)}.jsondraw .command-palette-dialog .shortcut .shortcut-desc{margin-left:4px;color:var(--color-gray-50)}.jsondraw .command-palette-dialog .commands{overflow-y:auto;box-sizing:border-box;margin-top:12px;color:var(--popup-text-color);user-select:none}.jsondraw .command-palette-dialog .commands .command-category{display:flex;flex-direction:column;padding:12px 0px;margin-right:.25rem}.jsondraw .command-palette-dialog .commands .command-category-title{font-size:1rem;font-weight:600;margin-bottom:6px;display:flex;align-items:center}.jsondraw .command-palette-dialog .commands .command-item{color:var(--popup-text-color);height:2.5rem;display:flex;justify-content:space-between;align-items:center;box-sizing:border-box;padding:0 .5rem;border-radius:var(--border-radius-lg);cursor:pointer;--icon-size: 1rem}.jsondraw .command-palette-dialog .commands .command-item.command-item-large{height:2.75rem;--icon-size: 1.5rem}.jsondraw .command-palette-dialog .commands .command-item.command-item-large .icon{width:var(--icon-size);height:var(--icon-size);margin-right:.625rem}.jsondraw .command-palette-dialog .commands .command-item:active{background-color:var(--color-surface-low)}.jsondraw .command-palette-dialog .commands .command-item .name{display:flex;align-items:center;gap:.25rem;overflow:hidden}.jsondraw .command-palette-dialog .commands .item-selected{background-color:var(--color-surface-mid)}.jsondraw .command-palette-dialog .commands .item-disabled{opacity:.3;cursor:not-allowed}.jsondraw .command-palette-dialog .commands .no-match{display:flex;justify-content:center;align-items:center;margin-top:36px}.jsondraw .command-palette-dialog .icon{width:var(--icon-size, 1rem);height:var(--icon-size, 1rem);margin-right:.375rem}.jsondraw .command-palette-dialog .icon .library-item-icon{display:flex;align-items:center;justify-content:center;height:100%;width:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/CommandPalette/CommandPalette.scss\"],\"names\":[],\"mappings\":\"AAKE,kCACE,gBAAA,CAEA,kDACE,WAAA,CACA,eAAA,CAEA,qCAJF,kDAKI,gBAAA,CACA,WAAA,CAAA,CAGF,0DACE,WAAA,CACA,cAAA,CAGF,mEACE,WAAA,CACA,YAAA,CACA,qBAAA,CAIJ,qDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,UAAA,CAGF,4CACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,WAAA,CACA,cAAA,CACA,UAAA,CAEA,8DACE,YAAA,CAGF,2DACE,cAAA,CAGF,0DACE,eAAA,CACA,WAAA,CACA,iBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,2CAAA,CAGF,2DACE,eAAA,CACA,0BAAA,CAIJ,4CACE,eAAA,CACA,qBAAA,CACA,eAAA,CACA,6BAAA,CACA,gBAAA,CAEA,8DACE,YAAA,CACA,qBAAA,CACA,gBAAA,CACA,mBAAA,CAGF,oEACE,cAAA,CACA,eAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CAGF,0DACE,6BAAA,CACA,aAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,qBAAA,CACA,eAAA,CACA,qCAAA,CACA,cAAA,CAEA,iBAAA,CAEA,6EACE,cAAA,CACA,mBAAA,CAEA,mFACE,sBAAA,CACA,uBAAA,CACA,oBAAA,CAIJ,iEACE,yCAAA,CAGF,gEACE,YAAA,CACA,kBAAA,CACA,UAAA,CACA,eAAA,CAIJ,2DACE,yCAAA,CAGF,2DACE,UAAA,CACA,kBAAA,CAGF,sDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAIJ,wCACE,4BAAA,CACA,6BAAA,CACA,oBAAA,CAEA,2DACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,UAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n$verticalBreakpoint: 861px;\\n\\n.jsondraw {\\n  .command-palette-dialog {\\n    user-select: none;\\n\\n    .Modal__content {\\n      height: auto;\\n      max-height: 100%;\\n\\n      @media screen and (min-width: $verticalBreakpoint) {\\n        max-height: 750px;\\n        height: 100%;\\n      }\\n\\n      .Island {\\n        height: 100%;\\n        padding: 1.5rem;\\n      }\\n\\n      .Dialog__content {\\n        height: 100%;\\n        display: flex;\\n        flex-direction: column;\\n      }\\n    }\\n\\n    .shortcuts-wrapper {\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      margin-top: 12px;\\n      gap: 1.5rem;\\n    }\\n\\n    .shortcut {\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      height: 16px;\\n      font-size: 10px;\\n      gap: 0.25rem;\\n\\n      .shortcut-wrapper {\\n        display: flex;\\n      }\\n\\n      .shortcut-plus {\\n        margin: 0px 4px;\\n      }\\n\\n      .shortcut-key {\\n        padding: 0px 4px;\\n        height: 16px;\\n        border-radius: 4px;\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        background-color: var(--color-primary-light);\\n      }\\n\\n      .shortcut-desc {\\n        margin-left: 4px;\\n        color: var(--color-gray-50);\\n      }\\n    }\\n\\n    .commands {\\n      overflow-y: auto;\\n      box-sizing: border-box;\\n      margin-top: 12px;\\n      color: var(--popup-text-color);\\n      user-select: none;\\n\\n      .command-category {\\n        display: flex;\\n        flex-direction: column;\\n        padding: 12px 0px;\\n        margin-right: 0.25rem;\\n      }\\n\\n      .command-category-title {\\n        font-size: 1rem;\\n        font-weight: 600;\\n        margin-bottom: 6px;\\n        display: flex;\\n        align-items: center;\\n      }\\n\\n      .command-item {\\n        color: var(--popup-text-color);\\n        height: 2.5rem;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        box-sizing: border-box;\\n        padding: 0 0.5rem;\\n        border-radius: var(--border-radius-lg);\\n        cursor: pointer;\\n\\n        --icon-size: 1rem;\\n\\n        &.command-item-large {\\n          height: 2.75rem;\\n          --icon-size: 1.5rem;\\n\\n          .icon {\\n            width: var(--icon-size);\\n            height: var(--icon-size);\\n            margin-right: 0.625rem;\\n          }\\n        }\\n\\n        &:active {\\n          background-color: var(--color-surface-low);\\n        }\\n\\n        .name {\\n          display: flex;\\n          align-items: center;\\n          gap: 0.25rem;\\n          overflow: hidden;\\n        }\\n      }\\n\\n      .item-selected {\\n        background-color: var(--color-surface-mid);\\n      }\\n\\n      .item-disabled {\\n        opacity: 0.3;\\n        cursor: not-allowed;\\n      }\\n\\n      .no-match {\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        margin-top: 36px;\\n      }\\n    }\\n\\n    .icon {\\n      width: var(--icon-size, 1rem);\\n      height: var(--icon-size, 1rem);\\n      margin-right: 0.375rem;\\n\\n      .library-item-icon {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        height: 100%;\\n        width: 100%;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Excalifont{font-family:\"Excalifont\",\"Xiaolai\"}.jsondraw .welcome-screen-decor{pointer-events:none;color:var(--color-gray-40)}.jsondraw .welcome-screen-decor a{--color: var(--color-primary);color:var(--color);text-decoration:none;margin-bottom:-6px}.jsondraw.theme--dark .welcome-screen-decor{color:var(--color-gray-60)}@media(max-height: 780px){.jsondraw .welcome-screen-decor-hint{display:none !important}}@media(max-width: 1024px),(max-width: 800px){.jsondraw .welcome-screen-decor-hint .welcome-screen-decor--help,.jsondraw .welcome-screen-decor-hint .welcome-screen-decor--menu{display:none}}.jsondraw .welcome-screen-decor-hint--help{display:flex;position:absolute;right:0;bottom:100%}:root[dir=rtl] .jsondraw .welcome-screen-decor-hint--help{left:0;right:auto}.jsondraw .welcome-screen-decor-hint--help svg{margin-top:.5rem;width:85px;height:71px;transform:scaleX(-1) rotate(80deg)}:root[dir=rtl] .jsondraw .welcome-screen-decor-hint--help svg{transform:rotate(80deg)}.jsondraw .welcome-screen-decor-hint--toolbar{position:absolute;top:100%;left:50%;transform:translateX(-50%);margin-top:2.5rem;display:flex;align-items:baseline}.jsondraw .welcome-screen-decor-hint--toolbar .welcome-screen-decor-hint__label{width:120px;position:relative;top:-0.5rem}.jsondraw .welcome-screen-decor-hint--toolbar svg{width:38px;height:78px}:root[dir=rtl] .jsondraw .welcome-screen-decor-hint--toolbar svg{transform:scaleX(-1)}.jsondraw .welcome-screen-decor-hint--menu{position:absolute;width:320px;font-size:1rem;top:100%;margin-top:.25rem;margin-inline-start:.6rem;display:flex;align-items:flex-end;gap:.5rem}.jsondraw .welcome-screen-decor-hint--menu svg{width:41px;height:94px}:root[dir=rtl] .jsondraw .welcome-screen-decor-hint--menu svg{transform:scaleX(-1)}@media(max-width: 860px){.jsondraw .welcome-screen-decor-hint--menu .welcome-screen-decor-hint__label{max-width:160px}}.jsondraw .welcome-screen-center{display:flex;flex-direction:column;gap:2rem;justify-content:center;align-items:center;position:absolute;pointer-events:none;left:1rem;top:1rem;right:1rem;bottom:1rem}.jsondraw .welcome-screen-center__logo{display:flex;align-items:center;column-gap:.75rem;font-size:2.25rem}.jsondraw .welcome-screen-center__heading{font-size:1.125rem;text-align:center;line-height:1.35rem}.jsondraw .welcome-screen-menu{display:flex;flex-direction:column;gap:2px;justify-content:center;align-items:center}.jsondraw .welcome-screen-menu-item{box-sizing:border-box;pointer-events:var(--ui-pointerEvents);color:var(--color-gray-50);font-size:.875rem;width:100%;min-width:300px;max-width:400px;display:grid;align-items:center;justify-content:space-between;background:none;border:1px solid rgba(0,0,0,0);padding:.75rem;border-radius:var(--border-radius-md);grid-template-columns:calc(var(--default-icon-size) + .5rem) 1fr 3rem}.jsondraw .welcome-screen-menu-item__text{display:flex;align-items:center;margin-right:auto;text-align:left;column-gap:.5rem}.jsondraw .welcome-screen-menu-item__icon{width:var(--default-icon-size);height:var(--default-icon-size)}.jsondraw .welcome-screen-menu-item__shortcut{margin-left:auto;color:var(--color-gray-40);font-size:.75rem}.jsondraw .welcome-screen-menu-item:hover{text-decoration:none;background:var(--button-hover-bg)}.jsondraw .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut,.jsondraw .welcome-screen-menu-item:hover .welcome-screen-menu-item__icon,.jsondraw .welcome-screen-menu-item:hover .welcome-screen-menu-item__text{color:var(--color-gray-100)}.jsondraw .welcome-screen-menu-item:active{background:var(--button-hover-bg);border-color:var(--color-brand-active)}.jsondraw .welcome-screen-menu-item:active .welcome-screen-menu-item__shortcut,.jsondraw .welcome-screen-menu-item:active .welcome-screen-menu-item__icon,.jsondraw .welcome-screen-menu-item:active .welcome-screen-menu-item__text{color:var(--color-gray-100)}.jsondraw.theme--dark .welcome-screen-menu-item{color:var(--color-gray-60)}.jsondraw.theme--dark .welcome-screen-menu-item__shortcut{color:var(--color-gray-60)}.jsondraw.theme--dark .welcome-screen-menu-item:hover{background-color:var(--color-surface-low)}.jsondraw.theme--dark .welcome-screen-menu-item:hover .welcome-screen-menu-item__icon,.jsondraw.theme--dark .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut,.jsondraw.theme--dark .welcome-screen-menu-item:hover .welcome-screen-menu-item__text{color:var(--color-gray-10)}.jsondraw.theme--dark .welcome-screen-menu-item:active .welcome-screen-menu-item__icon,.jsondraw.theme--dark .welcome-screen-menu-item:active .welcome-screen-menu-item__shortcut,.jsondraw.theme--dark .welcome-screen-menu-item:active .welcome-screen-menu-item__text{color:var(--color-gray-10)}.jsondraw.jsondraw--mobile .welcome-screen-center{margin-bottom:2rem}@media(max-height: 500px),(max-width: 320px){.jsondraw .welcome-screen-center{display:none}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/welcome-screen/WelcomeScreen.scss\"],\"names\":[],\"mappings\":\"AACE,sBACE,kCAAA,CAMF,gCACE,mBAAA,CAEA,0BAAA,CAEA,kCACE,6BAAA,CACA,kBAAA,CACA,oBAAA,CACA,kBAAA,CAKF,4CACE,0BAAA,CAQF,0BADF,qCAEI,uBAAA,CAAA,CAGF,6CAEI,kIAEE,YAAA,CAAA,CAKN,2CACE,YAAA,CACA,iBAAA,CACA,OAAA,CACA,WAAA,CAEA,0DACE,MAAA,CACA,UAAA,CAGF,+CACE,gBAAA,CACA,UAAA,CACA,WAAA,CAEA,kCAAA,CAEA,8DACE,uBAAA,CAKN,8CACE,iBAAA,CACA,QAAA,CACA,QAAA,CACA,0BAAA,CACA,iBAAA,CACA,YAAA,CACA,oBAAA,CAEA,gFACE,WAAA,CACA,iBAAA,CACA,WAAA,CAGF,kDACE,UAAA,CACA,WAAA,CAEA,iEACE,oBAAA,CAKN,2CACE,iBAAA,CACA,WAAA,CACA,cAAA,CAEA,QAAA,CACA,iBAAA,CACA,yBAAA,CAEA,YAAA,CACA,oBAAA,CACA,SAAA,CAEA,+CACE,UAAA,CACA,WAAA,CAEA,8DACE,oBAAA,CAIJ,yBACE,6EACE,eAAA,CAAA,CASR,iCACE,YAAA,CACA,qBAAA,CACA,QAAA,CACA,sBAAA,CACA,kBAAA,CACA,iBAAA,CACA,mBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CAGF,uCACE,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,iBAAA,CAGF,0CACE,kBAAA,CACA,iBAAA,CACA,mBAAA,CAGF,+BACE,YAAA,CACA,qBAAA,CACA,OAAA,CACA,sBAAA,CACA,kBAAA,CAGF,oCACE,qBAAA,CAEA,sCAAA,CAEA,0BAAA,CACA,iBAAA,CAEA,UAAA,CACA,eAAA,CACA,eAAA,CACA,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,eAAA,CACA,8BAAA,CAEA,cAAA,CAEA,qCAAA,CAEA,qEAAA,CAEA,0CACE,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CAGF,0CACE,8BAAA,CACA,+BAAA,CAGF,8CACE,gBAAA,CACA,0BAAA,CACA,gBAAA,CAIJ,0CACE,oBAAA,CACA,iCAAA,CAEA,kOAGE,2BAAA,CAIJ,2CACE,iCAAA,CACA,sCAAA,CAEA,qOAGE,2BAAA,CAKF,gDACE,0BAAA,CAEA,0DACE,0BAAA,CAIJ,sDACE,yCAAA,CAEA,sQAGE,0BAAA,CAKF,yQAGE,0BAAA,CAMJ,kDACE,kBAAA,CAIJ,6CACE,iCACE,YAAA,CAAA\",\"sourcesContent\":[\".jsondraw {\\n  .Excalifont {\\n    font-family: \\\"Excalifont\\\", \\\"Xiaolai\\\";\\n  }\\n\\n  // WelcomeSreen common\\n  // ---------------------------------------------------------------------------\\n\\n  .welcome-screen-decor {\\n    pointer-events: none;\\n\\n    color: var(--color-gray-40);\\n\\n    a {\\n      --color: var(--color-primary);\\n      color: var(--color);\\n      text-decoration: none;\\n      margin-bottom: -6px;\\n    }\\n  }\\n\\n  &.theme--dark {\\n    .welcome-screen-decor {\\n      color: var(--color-gray-60);\\n    }\\n  }\\n\\n  // WelcomeScreen.Hints\\n  // ---------------------------------------------------------------------------\\n\\n  .welcome-screen-decor-hint {\\n    @media (max-height: 780px) {\\n      display: none !important;\\n    }\\n\\n    @media (max-width: 1024px), (max-width: 800px) {\\n      .welcome-screen-decor {\\n        &--help,\\n        &--menu {\\n          display: none;\\n        }\\n      }\\n    }\\n\\n    &--help {\\n      display: flex;\\n      position: absolute;\\n      right: 0;\\n      bottom: 100%;\\n\\n      :root[dir=\\\"rtl\\\"] & {\\n        left: 0;\\n        right: auto;\\n      }\\n\\n      svg {\\n        margin-top: 0.5rem;\\n        width: 85px;\\n        height: 71px;\\n\\n        transform: scaleX(-1) rotate(80deg);\\n\\n        :root[dir=\\\"rtl\\\"] & {\\n          transform: rotate(80deg);\\n        }\\n      }\\n    }\\n\\n    &--toolbar {\\n      position: absolute;\\n      top: 100%;\\n      left: 50%;\\n      transform: translateX(-50%);\\n      margin-top: 2.5rem;\\n      display: flex;\\n      align-items: baseline;\\n\\n      .welcome-screen-decor-hint__label {\\n        width: 120px;\\n        position: relative;\\n        top: -0.5rem;\\n      }\\n\\n      svg {\\n        width: 38px;\\n        height: 78px;\\n\\n        :root[dir=\\\"rtl\\\"] & {\\n          transform: scaleX(-1);\\n        }\\n      }\\n    }\\n\\n    &--menu {\\n      position: absolute;\\n      width: 320px;\\n      font-size: 1rem;\\n\\n      top: 100%;\\n      margin-top: 0.25rem;\\n      margin-inline-start: 0.6rem;\\n\\n      display: flex;\\n      align-items: flex-end;\\n      gap: 0.5rem;\\n\\n      svg {\\n        width: 41px;\\n        height: 94px;\\n\\n        :root[dir=\\\"rtl\\\"] & {\\n          transform: scaleX(-1);\\n        }\\n      }\\n\\n      @media (max-width: 860px) {\\n        .welcome-screen-decor-hint__label {\\n          max-width: 160px;\\n        }\\n      }\\n    }\\n  }\\n\\n  // WelcomeSreen.Center\\n  // ---------------------------------------------------------------------------\\n\\n  .welcome-screen-center {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 2rem;\\n    justify-content: center;\\n    align-items: center;\\n    position: absolute;\\n    pointer-events: none;\\n    left: 1rem;\\n    top: 1rem;\\n    right: 1rem;\\n    bottom: 1rem;\\n  }\\n\\n  .welcome-screen-center__logo {\\n    display: flex;\\n    align-items: center;\\n    column-gap: 0.75rem;\\n    font-size: 2.25rem;\\n  }\\n\\n  .welcome-screen-center__heading {\\n    font-size: 1.125rem;\\n    text-align: center;\\n    line-height: 1.35rem;\\n  }\\n\\n  .welcome-screen-menu {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 2px;\\n    justify-content: center;\\n    align-items: center;\\n  }\\n\\n  .welcome-screen-menu-item {\\n    box-sizing: border-box;\\n\\n    pointer-events: var(--ui-pointerEvents);\\n\\n    color: var(--color-gray-50);\\n    font-size: 0.875rem;\\n\\n    width: 100%;\\n    min-width: 300px;\\n    max-width: 400px;\\n    display: grid;\\n    align-items: center;\\n    justify-content: space-between;\\n\\n    background: none;\\n    border: 1px solid transparent;\\n\\n    padding: 0.75rem;\\n\\n    border-radius: var(--border-radius-md);\\n\\n    grid-template-columns: calc(var(--default-icon-size) + 0.5rem) 1fr 3rem;\\n\\n    &__text {\\n      display: flex;\\n      align-items: center;\\n      margin-right: auto;\\n      text-align: left;\\n      column-gap: 0.5rem;\\n    }\\n\\n    &__icon {\\n      width: var(--default-icon-size);\\n      height: var(--default-icon-size);\\n    }\\n\\n    &__shortcut {\\n      margin-left: auto;\\n      color: var(--color-gray-40);\\n      font-size: 0.75rem;\\n    }\\n  }\\n\\n  .welcome-screen-menu-item:hover {\\n    text-decoration: none;\\n    background: var(--button-hover-bg);\\n\\n    .welcome-screen-menu-item__shortcut,\\n    .welcome-screen-menu-item__icon,\\n    .welcome-screen-menu-item__text {\\n      color: var(--color-gray-100);\\n    }\\n  }\\n\\n  .welcome-screen-menu-item:active {\\n    background: var(--button-hover-bg);\\n    border-color: var(--color-brand-active);\\n\\n    .welcome-screen-menu-item__shortcut,\\n    .welcome-screen-menu-item__icon,\\n    .welcome-screen-menu-item__text {\\n      color: var(--color-gray-100);\\n    }\\n  }\\n\\n  &.theme--dark {\\n    .welcome-screen-menu-item {\\n      color: var(--color-gray-60);\\n\\n      &__shortcut {\\n        color: var(--color-gray-60);\\n      }\\n    }\\n\\n    .welcome-screen-menu-item:hover {\\n      background-color: var(--color-surface-low);\\n\\n      .welcome-screen-menu-item__icon,\\n      .welcome-screen-menu-item__shortcut,\\n      .welcome-screen-menu-item__text {\\n        color: var(--color-gray-10);\\n      }\\n    }\\n\\n    .welcome-screen-menu-item:active {\\n      .welcome-screen-menu-item__icon,\\n      .welcome-screen-menu-item__shortcut,\\n      .welcome-screen-menu-item__text {\\n        color: var(--color-gray-10);\\n      }\\n    }\\n  }\\n\\n  &.jsondraw--mobile {\\n    .welcome-screen-center {\\n      margin-bottom: 2rem;\\n    }\\n  }\\n\\n  @media (max-height: 500px), (max-width: 320px) {\\n    .welcome-screen-center {\\n      display: none;\\n    }\\n  }\\n\\n  // ---------------------------------------------------------------------------\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .jsondraw-eye-dropper-container,.jsondraw .jsondraw-eye-dropper-backdrop{position:absolute;width:100%;height:100%;z-index:var(--zIndex-eyeDropperBackdrop);touch-action:none}.jsondraw .jsondraw-eye-dropper-container{pointer-events:none}.jsondraw .jsondraw-eye-dropper-backdrop{pointer-events:all}.jsondraw .jsondraw-eye-dropper-preview{pointer-events:none;width:3rem;height:3rem;position:fixed;z-index:var(--zIndex-eyeDropperPreview);border-radius:1rem;border:1px solid var(--default-border-color);filter:var(--theme-filter)}.jsondraw .jsondraw-eye-dropper-trigger{width:1.25rem;height:1.25rem;cursor:pointer;padding:4px;margin-right:-4px;margin-left:-2px;border-radius:.5rem;color:var(--icon-fill-color)}.jsondraw .jsondraw-eye-dropper-trigger:hover{background:var(--button-hover-bg)}.jsondraw .jsondraw-eye-dropper-trigger.selected{color:var(--color-primary);background:var(--color-primary-light)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/canvases/EyeDropper.scss\"],\"names\":[],\"mappings\":\"AACE,mFAEE,iBAAA,CACA,UAAA,CACA,WAAA,CACA,wCAAA,CACA,iBAAA,CAGF,0CACE,mBAAA,CAGF,yCACE,kBAAA,CAGF,wCACE,mBAAA,CACA,UAAA,CACA,WAAA,CACA,cAAA,CACA,uCAAA,CACA,kBAAA,CACA,4CAAA,CACA,0BAAA,CAGF,wCACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,gBAAA,CACA,mBAAA,CACA,4BAAA,CAEA,8CACE,iCAAA,CAEF,iDACE,0BAAA,CACA,qCAAA\",\"sourcesContent\":[\".jsondraw {\\n  .jsondraw-eye-dropper-container,\\n  .jsondraw-eye-dropper-backdrop {\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    z-index: var(--zIndex-eyeDropperBackdrop);\\n    touch-action: none;\\n  }\\n\\n  .jsondraw-eye-dropper-container {\\n    pointer-events: none;\\n  }\\n\\n  .jsondraw-eye-dropper-backdrop {\\n    pointer-events: all;\\n  }\\n\\n  .jsondraw-eye-dropper-preview {\\n    pointer-events: none;\\n    width: 3rem;\\n    height: 3rem;\\n    position: fixed;\\n    z-index: var(--zIndex-eyeDropperPreview);\\n    border-radius: 1rem;\\n    border: 1px solid var(--default-border-color);\\n    filter: var(--theme-filter);\\n  }\\n\\n  .jsondraw-eye-dropper-trigger {\\n    width: 1.25rem;\\n    height: 1.25rem;\\n    cursor: pointer;\\n    padding: 4px;\\n    margin-right: -4px;\\n    margin-left: -2px;\\n    border-radius: 0.5rem;\\n    color: var(--icon-fill-color);\\n\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n    &.selected {\\n      color: var(--color-primary);\\n      background: var(--color-primary-light);\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .Checkbox{margin:4px .3em;display:flex;align-items:center;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.jsondraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus){box-shadow:0 0 0 2px #4dabf7}.jsondraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus) svg{display:block;opacity:.3}.jsondraw .Checkbox:active .Checkbox-box{box-shadow:0 0 2px 1px inset #1c7ed6 !important}.jsondraw .Checkbox:hover .Checkbox-box{background-color:rgba(208,235,255,.2)}.jsondraw .Checkbox.is-checked .Checkbox-box{background-color:#d0ebff}.jsondraw .Checkbox.is-checked .Checkbox-box svg{display:block}.jsondraw .Checkbox.is-checked:hover .Checkbox-box{background-color:#a5d8ff}.jsondraw .Checkbox .Checkbox-box{width:22px;height:22px;padding:0;flex:0 0 auto;margin:0 1em;display:flex;align-items:center;justify-content:center;box-shadow:0 0 0 2px #1c7ed6;background-color:rgba(0,0,0,0);border-radius:4px;color:#1c7ed6;border:0}.jsondraw .Checkbox .Checkbox-box:focus{box-shadow:0 0 0 3px #1c7ed6}.jsondraw .Checkbox .Checkbox-box svg{display:none;width:16px;height:16px;stroke-width:3px}.jsondraw .Checkbox .Checkbox-label{display:flex;align-items:center}.jsondraw .Checkbox .jsondraw-tooltip-icon{width:1em;height:1em}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/CheckboxItem.scss\"],\"names\":[],\"mappings\":\"AAIE,oBACE,eAAA,CACA,YAAA,CACA,kBAAA,CAEA,cAAA,CACA,gBAAA,CAEA,yCAAA,CAEA,qEACE,4BAAA,CAIA,yEACE,aAAA,CACA,UAAA,CAKF,yCACE,+CAAA,CAKF,wCACE,qCAAA,CAKF,6CACE,wBAAA,CACA,iDACE,aAAA,CAGJ,mDACE,wBAAA,CAIJ,kCACE,UAAA,CACA,WAAA,CACA,SAAA,CACA,aAAA,CAEA,YAAA,CAEA,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,4BAAA,CACA,8BAAA,CACA,iBAAA,CAEA,aAAA,CAEA,QAAA,CAEA,wCACE,4BAAA,CAGF,sCACE,YAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAIJ,oCACE,YAAA,CACA,kBAAA,CAGF,2CACE,SAAA,CACA,UAAA\",\"sourcesContent\":[\"@use \\\"sass:color\\\";\\n@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .Checkbox {\\n    margin: 4px 0.3em;\\n    display: flex;\\n    align-items: center;\\n\\n    cursor: pointer;\\n    user-select: none;\\n\\n    -webkit-tap-highlight-color: transparent;\\n\\n    &:hover:not(.is-checked) .Checkbox-box:not(:focus) {\\n      box-shadow: 0 0 0 2px #{$color-blue-4};\\n    }\\n\\n    &:hover:not(.is-checked) .Checkbox-box:not(:focus) {\\n      svg {\\n        display: block;\\n        opacity: 0.3;\\n      }\\n    }\\n\\n    &:active {\\n      .Checkbox-box {\\n        box-shadow: 0 0 2px 1px inset #{$color-blue-7} !important;\\n      }\\n    }\\n\\n    &:hover {\\n      .Checkbox-box {\\n        background-color: color.adjust($color-blue-1, $alpha: -0.8);\\n      }\\n    }\\n\\n    &.is-checked {\\n      .Checkbox-box {\\n        background-color: #{$color-blue-1};\\n        svg {\\n          display: block;\\n        }\\n      }\\n      &:hover .Checkbox-box {\\n        background-color: #{$color-blue-2};\\n      }\\n    }\\n\\n    .Checkbox-box {\\n      width: 22px;\\n      height: 22px;\\n      padding: 0;\\n      flex: 0 0 auto;\\n\\n      margin: 0 1em;\\n\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n\\n      box-shadow: 0 0 0 2px #{$color-blue-7};\\n      background-color: transparent;\\n      border-radius: 4px;\\n\\n      color: #{$color-blue-7};\\n\\n      border: 0;\\n\\n      &:focus {\\n        box-shadow: 0 0 0 3px #{$color-blue-7};\\n      }\\n\\n      svg {\\n        display: none;\\n        width: 16px;\\n        height: 16px;\\n        stroke-width: 3px;\\n      }\\n    }\\n\\n    .Checkbox-label {\\n      display: flex;\\n      align-items: center;\\n    }\\n\\n    .jsondraw-tooltip-icon {\\n      width: 1em;\\n      height: 1em;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .ScrollableList__wrapper{position:static !important;border:none;font-size:.875rem;overflow-y:auto}.jsondraw .ScrollableList__wrapper>.empty,.jsondraw .ScrollableList__wrapper>.hint{display:flex;justify-content:center;align-items:center;padding:.5rem;font-size:.75rem;color:var(--color-gray-60);overflow:hidden;text-align:center;line-height:150%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/ui/ScrollableList.scss\"],\"names\":[],\"mappings\":\"AACE,mCACE,0BAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CAEA,mFAEE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,aAAA,CACA,gBAAA,CACA,0BAAA,CACA,eAAA,CACA,iBAAA,CACA,gBAAA\",\"sourcesContent\":[\".jsondraw {\\n  .ScrollableList__wrapper {\\n    position: static !important;\\n    border: none;\\n    font-size: 0.875rem;\\n    overflow-y: auto;\\n\\n    & > .empty,\\n    & > .hint {\\n      display: flex;\\n      justify-content: center;\\n      align-items: center;\\n      padding: 0.5rem;\\n      font-size: 0.75rem;\\n      color: var(--color-gray-60);\\n      overflow: hidden;\\n      text-align: center;\\n      line-height: 150%;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .ActiveFile .ActiveFile__fileName{display:flex;align-items:center}.jsondraw .ActiveFile .ActiveFile__fileName span{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:9.3em}.jsondraw .ActiveFile .ActiveFile__fileName svg{width:1.15em;margin-inline-end:.3em;transform:scaleY(0.9)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/main-menu/DefaultItems.scss\"],\"names\":[],\"mappings\":\"AAEI,4CACE,YAAA,CACA,kBAAA,CAEA,iDACE,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,WAAA,CAGF,gDACE,YAAA,CACA,sBAAA,CACA,qBAAA\",\"sourcesContent\":[\".jsondraw {\\n  .ActiveFile {\\n    .ActiveFile__fileName {\\n      display: flex;\\n      align-items: center;\\n\\n      span {\\n        text-overflow: ellipsis;\\n        overflow: hidden;\\n        white-space: nowrap;\\n        width: 9.3em;\\n      }\\n\\n      svg {\\n        width: 1.15em;\\n        margin-inline-end: 0.3em;\\n        transform: scaleY(0.9);\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw .ToolIcon{border-radius:var(--border-radius-lg);display:inline-flex;align-items:center;position:relative;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);user-select:none}.jsondraw .ToolIcon__hidden{display:none !important}.jsondraw .ToolIcon.fillable .ToolIcon_type_radio:checked+.ToolIcon__icon,.jsondraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked+.ToolIcon__icon{--icon-fill-color: var(--color-on-primary-container)}.jsondraw .ToolIcon.fillable .ToolIcon_type_radio:checked+.ToolIcon__icon svg,.jsondraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked+.ToolIcon__icon svg{fill:var(--icon-fill-color)}.jsondraw .ToolIcon .ToolIcon_type_radio:checked+.ToolIcon__icon,.jsondraw .ToolIcon .ToolIcon_type_checkbox:checked+.ToolIcon__icon{background:var(--color-surface-primary-container);--keybinding-color: var(--color-on-primary-container)}.jsondraw .ToolIcon .ToolIcon_type_radio:checked+.ToolIcon__icon svg,.jsondraw .ToolIcon .ToolIcon_type_checkbox:checked+.ToolIcon__icon svg{color:var(--color-on-primary-container)}.jsondraw .ToolIcon .ToolIcon__keybinding{bottom:4px;right:4px}.jsondraw .ToolIcon .ToolIcon__icon:hover{background:var(--button-hover-bg)}.jsondraw .ToolIcon .ToolIcon__icon:active{background:var(--button-hover-bg);border:1px solid var(--button-active-border)}.jsondraw .ToolIcon .ToolIcon__icon:active svg{color:var(--color-on-primary-container)}.jsondraw .ToolIcon .ToolIcon__icon[aria-disabled=true]{background:initial;border:none}.jsondraw .ToolIcon .ToolIcon__icon[aria-disabled=true] svg{color:var(--color-disabled)}.jsondraw .ToolIcon--plain{background-color:rgba(0,0,0,0)}.jsondraw .ToolIcon--plain .ToolIcon__icon{width:2rem;height:2rem}.jsondraw .ToolIcon_type_radio,.jsondraw .ToolIcon_type_checkbox{position:absolute;opacity:0;pointer-events:none}.jsondraw .ToolIcon__icon{box-sizing:border-box;width:var(--default-button-size);height:var(--default-button-size);color:var(--icon-fill-color);display:flex;justify-content:center;align-items:center;border-radius:var(--border-radius-lg)}.jsondraw .ToolIcon__icon+.ToolIcon__label{margin-inline-start:0}.jsondraw .ToolIcon__icon svg{position:relative;width:var(--default-icon-size);height:var(--default-icon-size);color:var(--icon-fill-color)}.jsondraw .ToolIcon__label{display:flex;align-items:center;color:var(--icon-fill-color);font-family:var(--ui-font);margin:0 .8em;text-overflow:ellipsis}.jsondraw .ToolIcon__label .Spinner{margin-left:.6em}.jsondraw .ToolIcon_size_small .ToolIcon__icon{width:2rem;height:2rem;font-size:.8em}.jsondraw .ToolIcon_type_button,.jsondraw .Modal .ToolIcon_type_button{padding:0;border:none;margin:0;font-size:inherit;background-color:initial}.jsondraw .ToolIcon_type_button:focus-visible,.jsondraw .Modal .ToolIcon_type_button:focus-visible{box-shadow:0 0 0 2px var(--focus-highlight-color)}.jsondraw .ToolIcon_type_button.ToolIcon--selected,.jsondraw .Modal .ToolIcon_type_button.ToolIcon--selected{background-color:var(--button-gray-2)}.jsondraw .ToolIcon_type_button.ToolIcon--selected:active,.jsondraw .Modal .ToolIcon_type_button.ToolIcon--selected:active{background-color:var(--button-gray-3)}.jsondraw .ToolIcon_type_button:active,.jsondraw .Modal .ToolIcon_type_button:active{background-color:var(--button-gray-3)}.jsondraw .ToolIcon_type_button:disabled,.jsondraw .Modal .ToolIcon_type_button:disabled{cursor:default}.jsondraw .ToolIcon_type_button:disabled:active,.jsondraw .ToolIcon_type_button:disabled:focus-visible,.jsondraw .ToolIcon_type_button:disabled:hover,.jsondraw .Modal .ToolIcon_type_button:disabled:active,.jsondraw .Modal .ToolIcon_type_button:disabled:focus-visible,.jsondraw .Modal .ToolIcon_type_button:disabled:hover{background-color:initial;border:none;box-shadow:none}.jsondraw .ToolIcon_type_button:disabled svg,.jsondraw .Modal .ToolIcon_type_button:disabled svg{color:var(--color-disabled)}.jsondraw .ToolIcon_type_button--show,.jsondraw .Modal .ToolIcon_type_button--show{visibility:visible}.jsondraw .ToolIcon_type_button--hide,.jsondraw .Modal .ToolIcon_type_button--hide{display:none !important}.jsondraw .ToolIcon_type_floating{background-color:rgba(0,0,0,0)}.jsondraw .ToolIcon_type_floating:hover{background-color:rgba(0,0,0,0)}.jsondraw .ToolIcon_type_floating:active{background-color:rgba(0,0,0,0)}.jsondraw .ToolIcon_type_floating .ToolIcon__icon{background-color:var(--button-gray-1)}.jsondraw .ToolIcon_type_floating .ToolIcon__icon:hover{background-color:var(--button-gray-2)}.jsondraw .ToolIcon_type_floating .ToolIcon__icon:active{background-color:var(--button-gray-3)}.jsondraw .ToolIcon_type_floating .ToolIcon__icon{width:2rem;height:2rem}.jsondraw .ToolIcon__keybinding{position:absolute;bottom:2px;right:3px;font-size:.625rem;color:var(--keybinding-color);font-family:var(--ui-font);user-select:none}:root[dir=ltr] .jsondraw .unlocked-icon{left:2px}:root[dir=rtl] .jsondraw .unlocked-icon{right:2px}.jsondraw .App-toolbar-container .ToolIcon__icon{width:var(--lg-button-size);height:var(--lg-button-size)}@media screen and (max-width: 450px){.jsondraw .App-toolbar-container .ToolIcon__icon{width:1.8rem;height:1.8rem}}@media screen and (max-width: 379px){.jsondraw .App-toolbar-container .ToolIcon__icon{width:1.5rem;height:1.5rem}}.jsondraw .App-toolbar-container .ToolIcon__icon svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.jsondraw .App-toolbar-container .ToolIcon__LaserPointer .ToolIcon__icon,.jsondraw .App-toolbar-container .ToolIcon__MagicButton .ToolIcon__icon{width:var(--default-button-size);height:var(--default-button-size)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/toolbar/ToolIcon.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAGE,oBACE,qCAAA,CACA,mBAAA,CACA,kBAAA,CACA,iBAAA,CACA,cAAA,CACA,yCAAA,CACA,gBAAA,CAEA,4BACE,uBAAA,CCsBA,uJACE,oDAAA,CAEA,+JACE,2BAAA,CAQN,qIACE,iDAAA,CACA,qDAAA,CAEA,6IACE,uCAAA,CAKN,0CACE,UAAA,CACA,SAAA,CAIA,0CACE,iCAAA,CAGF,2CACE,iCAAA,CACA,4CAAA,CAEA,+CACE,uCAAA,CAIJ,wDACE,kBAAA,CACA,WAAA,CAEA,4DACE,2BAAA,CD9DN,2BACE,8BAAA,CACA,2CACE,UAAA,CACA,WAAA,CAIJ,iEAEE,iBAAA,CACA,SAAA,CACA,mBAAA,CAGF,0BACE,qBAAA,CACA,gCAAA,CACA,iCAAA,CACA,4BAAA,CAEA,YAAA,CACA,sBAAA,CACA,kBAAA,CAEA,qCAAA,CAEA,2CACE,qBAAA,CAGF,8BACE,iBAAA,CACA,8BAAA,CACA,+BAAA,CACA,4BAAA,CAIJ,2BACE,YAAA,CACA,kBAAA,CACA,4BAAA,CACA,0BAAA,CACA,aAAA,CACA,sBAAA,CAEA,oCACE,gBAAA,CAIJ,+CACE,UAAA,CACA,WAAA,CACA,cAAA,CAGF,uEAEE,SAAA,CACA,WAAA,CACA,QAAA,CACA,iBAAA,CACA,wBAAA,CAEA,mGACE,iDAAA,CAGF,6GACE,qCAAA,CAEA,2HACE,qCAAA,CAIJ,qFACE,qCAAA,CAGF,yFACE,cAAA,CAEA,iUAGE,wBAAA,CACA,WAAA,CACA,eAAA,CAGF,iGACE,2BAAA,CAIJ,mFACE,kBAAA,CAGF,mFACE,uBAAA,CAIJ,kCACE,8BAAA,CAEA,wCACE,8BAAA,CAGF,yCACE,8BAAA,CAGF,kDACE,qCAAA,CACA,wDACE,qCAAA,CAEF,yDACE,qCAAA,CANJ,kDASE,UAAA,CACA,WAAA,CAIJ,gCACE,iBAAA,CACA,UAAA,CACA,SAAA,CACA,iBAAA,CACA,6BAAA,CACA,0BAAA,CACA,gBAAA,CAIA,wCACE,QAAA,CAGF,wCACE,SAAA,CAKF,iDACE,2BAAA,CACA,4BAAA,CAEA,qCAJF,iDAKI,YAAA,CACA,aAAA,CAAA,CAEF,qCARF,iDASI,YAAA,CACA,aAAA,CAAA,CAGF,qDACE,yBAAA,CACA,0BAAA,CAIJ,iJAEE,gCAAA,CACA,iCAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw {\\n  .ToolIcon {\\n    border-radius: var(--border-radius-lg);\\n    display: inline-flex;\\n    align-items: center;\\n    position: relative;\\n    cursor: pointer;\\n    -webkit-tap-highlight-color: transparent;\\n    user-select: none;\\n\\n    &__hidden {\\n      display: none !important;\\n    }\\n\\n    @include toolbarButtonColorStates;\\n  }\\n\\n  .ToolIcon--plain {\\n    background-color: transparent;\\n    .ToolIcon__icon {\\n      width: 2rem;\\n      height: 2rem;\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    position: absolute;\\n    opacity: 0;\\n    pointer-events: none;\\n  }\\n\\n  .ToolIcon__icon {\\n    box-sizing: border-box;\\n    width: var(--default-button-size);\\n    height: var(--default-button-size);\\n    color: var(--icon-fill-color);\\n\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n\\n    border-radius: var(--border-radius-lg);\\n\\n    & + .ToolIcon__label {\\n      margin-inline-start: 0;\\n    }\\n\\n    svg {\\n      position: relative;\\n      width: var(--default-icon-size);\\n      height: var(--default-icon-size);\\n      color: var(--icon-fill-color);\\n    }\\n  }\\n\\n  .ToolIcon__label {\\n    display: flex;\\n    align-items: center;\\n    color: var(--icon-fill-color);\\n    font-family: var(--ui-font);\\n    margin: 0 0.8em;\\n    text-overflow: ellipsis;\\n\\n    .Spinner {\\n      margin-left: 0.6em;\\n    }\\n  }\\n\\n  .ToolIcon_size_small .ToolIcon__icon {\\n    width: 2rem;\\n    height: 2rem;\\n    font-size: 0.8em;\\n  }\\n\\n  .ToolIcon_type_button,\\n  .Modal .ToolIcon_type_button {\\n    padding: 0;\\n    border: none;\\n    margin: 0;\\n    font-size: inherit;\\n    background-color: initial;\\n\\n    &:focus-visible {\\n      box-shadow: 0 0 0 2px var(--focus-highlight-color);\\n    }\\n\\n    &.ToolIcon--selected {\\n      background-color: var(--button-gray-2);\\n\\n      &:active {\\n        background-color: var(--button-gray-3);\\n      }\\n    }\\n\\n    &:active {\\n      background-color: var(--button-gray-3);\\n    }\\n\\n    &:disabled {\\n      cursor: default;\\n\\n      &:active,\\n      &:focus-visible,\\n      &:hover {\\n        background-color: initial;\\n        border: none;\\n        box-shadow: none;\\n      }\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n\\n    &--show {\\n      visibility: visible;\\n    }\\n\\n    &--hide {\\n      display: none !important;\\n    }\\n  }\\n\\n  .ToolIcon_type_floating {\\n    background-color: transparent;\\n\\n    &:hover {\\n      background-color: transparent;\\n    }\\n\\n    &:active {\\n      background-color: transparent;\\n    }\\n\\n    .ToolIcon__icon {\\n      background-color: var(--button-gray-1);\\n      &:hover {\\n        background-color: var(--button-gray-2);\\n      }\\n      &:active {\\n        background-color: var(--button-gray-3);\\n      }\\n\\n      width: 2rem;\\n      height: 2rem;\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    position: absolute;\\n    bottom: 2px;\\n    right: 3px;\\n    font-size: 0.625rem;\\n    color: var(--keybinding-color);\\n    font-family: var(--ui-font);\\n    user-select: none;\\n  }\\n\\n  .unlocked-icon {\\n    :root[dir=\\\"ltr\\\"] & {\\n      left: 2px;\\n    }\\n\\n    :root[dir=\\\"rtl\\\"] & {\\n      right: 2px;\\n    }\\n  }\\n\\n  .App-toolbar-container {\\n    .ToolIcon__icon {\\n      width: var(--lg-button-size);\\n      height: var(--lg-button-size);\\n\\n      @media screen and (max-width: 450px) {\\n        width: 1.8rem;\\n        height: 1.8rem;\\n      }\\n      @media screen and (max-width: 379px) {\\n        width: 1.5rem;\\n        height: 1.5rem;\\n      }\\n\\n      svg {\\n        width: var(--lg-icon-size);\\n        height: var(--lg-icon-size);\\n      }\\n    }\\n\\n    .ToolIcon__LaserPointer .ToolIcon__icon,\\n    .ToolIcon__MagicButton .ToolIcon__icon {\\n      width: var(--default-button-size);\\n      height: var(--default-button-size);\\n    }\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jsondraw-hyperlinkContainer{display:flex;align-items:center;justify-content:space-between;position:absolute;box-shadow:0px 2px 4px 0 rgba(0,0,0,.3);z-index:var(--zIndex-hyperlinkContainer);background:var(--island-bg-color);border-radius:var(--border-radius-md);box-sizing:border-box;min-height:42px}.jsondraw-hyperlinkContainer-input,.jsondraw-hyperlinkContainer button{z-index:100}.jsondraw-hyperlinkContainer-input,.jsondraw-hyperlinkContainer-link{height:24px;padding:0 8px;line-height:24px;font-size:.9rem;font-weight:500;font-family:var(--ui-font)}.jsondraw-hyperlinkContainer-input{width:18rem;border:none;background-color:rgba(0,0,0,0);color:var(--text-primary-color);outline:none;border:none;box-shadow:none !important}.jsondraw-hyperlinkContainer-link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:15rem}.jsondraw-hyperlinkContainer button{color:#228be6;background-color:rgba(0,0,0,0) !important;font-weight:500}.jsondraw-hyperlinkContainer button.jsondraw-hyperlinkContainer--remove{color:#c92a2a}.jsondraw-hyperlinkContainer--remove .ToolIcon__icon svg{color:#fa5252}.jsondraw-hyperlinkContainer .ToolIcon__icon{width:2rem;height:2rem}.jsondraw-hyperlinkContainer__buttons{flex:0 0 auto}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/jsondraw/packages/jsondraw/components/hyperlink/Hyperlink.scss\",\"webpack://./src/jsondraw/packages/jsondraw/css/variables.module.scss\"],\"names\":[],\"mappings\":\"AAEA,6BACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iBAAA,CACA,uCAAA,CACA,wCAAA,CACA,iCAAA,CACA,qCAAA,CACA,qBAAA,CAEA,eAAA,CAEA,uEAEE,WAAA,CAGF,qEAEE,WAAA,CACA,aAAA,CACA,gBAAA,CACA,eAAA,CACA,eAAA,CACA,0BAAA,CAGF,mCACE,WAAA,CACA,WAAA,CACA,8BAAA,CACA,+BAAA,CAEA,YAAA,CACA,WAAA,CACA,0BAAA,CAGF,kCACE,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGF,oCACE,aC5BW,CD6BX,yCAAA,CACA,eAAA,CACA,wEACE,aChDQ,CDoDZ,yDACE,aCxDU,CD2DZ,6CACE,UAAA,CACA,WAAA,CAGF,sCACE,aAAA\",\"sourcesContent\":[\"@use \\\"../../css/variables.module\\\" as *;\\n\\n.jsondraw-hyperlinkContainer {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  position: absolute;\\n  box-shadow: 0px 2px 4px 0 rgb(0 0 0 / 30%);\\n  z-index: var(--zIndex-hyperlinkContainer);\\n  background: var(--island-bg-color);\\n  border-radius: var(--border-radius-md);\\n  box-sizing: border-box;\\n  // to account for LS due to rendering icons after new link created\\n  min-height: 42px;\\n\\n  &-input,\\n  button {\\n    z-index: 100;\\n  }\\n\\n  &-input,\\n  &-link {\\n    height: 24px;\\n    padding: 0 8px;\\n    line-height: 24px;\\n    font-size: 0.9rem;\\n    font-weight: 500;\\n    font-family: var(--ui-font);\\n  }\\n\\n  &-input {\\n    width: 18rem;\\n    border: none;\\n    background-color: transparent;\\n    color: var(--text-primary-color);\\n\\n    outline: none;\\n    border: none;\\n    box-shadow: none !important;\\n  }\\n\\n  &-link {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    max-width: 15rem;\\n  }\\n\\n  button {\\n    color: $color-blue-6;\\n    background-color: transparent !important;\\n    font-weight: 500;\\n    &.jsondraw-hyperlinkContainer--remove {\\n      color: $color-red-9;\\n    }\\n  }\\n\\n  &--remove .ToolIcon__icon svg {\\n    color: $color-red-6;\\n  }\\n\\n  .ToolIcon__icon {\\n    width: 2rem;\\n    height: 2rem;\\n  }\\n\\n  &__buttons {\\n    flex: 0 0 auto;\\n  }\\n}\\n\",\"$color-red-1: #ffe3e3;\\n$color-red-3: #ffa8a8;\\n$color-red-6: #fa5252;\\n$color-red-7: #f03e3e;\\n$color-red-8: #e03131;\\n$color-red-9: #c92a2a;\\n$color-gray-1: #f1f3f5;\\n$color-gray-2: #e9ecef;\\n$color-gray-4: #ced4da;\\n$color-gray-5: #adb5bd;\\n$color-gray-6: #868e96;\\n$color-gray-7: #495057;\\n$color-gray-8: #343a40;\\n$color-green-0: #ebfbee;\\n$color-green-2: #b2f2bb;\\n$color-green-4: #69db7c;\\n$color-green-9: #2b8a3e;\\n$color-blue-1: #d0ebff;\\n$color-blue-2: #a5d8ff;\\n$color-blue-4: #4dabf7;\\n$color-blue-5: #339af0;\\n$color-blue-6: #228be6;\\n$color-blue-7: #1c7ed6;\\n$color-blue-8: #1971c2;\\n\\n@mixin isMobile() {\\n  @at-root .jsondraw--mobile#{&} {\\n    @content;\\n  }\\n}\\n\\n@mixin toolbarButtonColorStates {\\n  &.fillable {\\n    .ToolIcon_type_radio,\\n    .ToolIcon_type_checkbox {\\n      &:checked + .ToolIcon__icon {\\n        --icon-fill-color: var(--color-on-primary-container);\\n\\n        svg {\\n          fill: var(--icon-fill-color);\\n        }\\n      }\\n    }\\n  }\\n\\n  .ToolIcon_type_radio,\\n  .ToolIcon_type_checkbox {\\n    &:checked + .ToolIcon__icon {\\n      background: var(--color-surface-primary-container);\\n      --keybinding-color: var(--color-on-primary-container);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n  }\\n\\n  .ToolIcon__keybinding {\\n    bottom: 4px;\\n    right: 4px;\\n  }\\n\\n  .ToolIcon__icon {\\n    &:hover {\\n      background: var(--button-hover-bg);\\n    }\\n\\n    &:active {\\n      background: var(--button-hover-bg);\\n      border: 1px solid var(--button-active-border);\\n\\n      svg {\\n        color: var(--color-on-primary-container);\\n      }\\n    }\\n\\n    &[aria-disabled=\\\"true\\\"] {\\n      background: initial;\\n      border: none;\\n\\n      svg {\\n        color: var(--color-disabled);\\n      }\\n    }\\n  }\\n}\\n\\n@mixin outlineButtonStyles {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 0.625rem;\\n  width: var(--button-width, var(--default-button-size));\\n  height: var(--button-height, var(--default-button-size));\\n  box-sizing: border-box;\\n  border-width: 1px;\\n  border-style: solid;\\n  border-color: var(--button-border, var(--default-border-color));\\n  border-radius: var(--border-radius-lg);\\n  cursor: pointer;\\n  background-color: var(--button-bg, var(--island-bg-color));\\n  color: var(--button-color, var(--color-on-surface));\\n  font-family: var(--ui-font);\\n\\n  svg {\\n    width: var(--button-width, var(--lg-icon-size));\\n    height: var(--button-height, var(--lg-icon-size));\\n  }\\n\\n  &:hover {\\n    background-color: var(--button-hover-bg, var(--island-bg-color));\\n    border-color: var(\\n      --button-hover-border,\\n      var(--button-border, var(--default-border-color))\\n    );\\n    color: var(\\n      --button-hover-color,\\n      var(--button-color, var(--text-primary-color, inherit))\\n    );\\n  }\\n\\n  &:active {\\n    background-color: var(--button-active-bg, var(--island-bg-color));\\n    border-color: var(--button-active-border, var(--color-primary-darkest));\\n  }\\n\\n  &.active {\\n    background-color: var(\\n      --button-selected-bg,\\n      var(--color-surface-primary-container)\\n    );\\n    border-color: var(\\n      --button-selected-border,\\n      var(--color-surface-primary-container)\\n    );\\n\\n    &:hover {\\n      background-color: var(\\n        --button-selected-hover-bg,\\n        var(--color-surface-primary-container)\\n      );\\n    }\\n\\n    svg {\\n      color: var(--button-color, var(--color-on-primary-container));\\n    }\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, var(--default-button-size));\\n    height: var(--mobile-action-button-size, var(--default-button-size));\\n  }\\n}\\n\\n@mixin buttonNoHighlight {\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-touch-callout: none;\\n  user-select: none;\\n}\\n\\n@mixin outlineButtonIconStyles {\\n  @include outlineButtonStyles;\\n\\n  & {\\n    padding: 0;\\n  }\\n\\n  svg {\\n    width: var(--default-icon-size);\\n    height: var(--default-icon-size);\\n  }\\n}\\n\\n@mixin avatarStyles {\\n  width: var(--avatar-size, 1.5rem);\\n  height: var(--avatar-size, 1.5rem);\\n  position: relative;\\n  border-radius: 100%;\\n  outline-offset: 2px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-size: 0.75rem;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: var(--color-gray-90);\\n  flex: 0 0 auto;\\n\\n  &:active {\\n    transform: scale(0.94);\\n  }\\n\\n  &-img {\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 100%;\\n  }\\n\\n  &::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: -3px;\\n    right: -3px;\\n    bottom: -3px;\\n    left: -3px;\\n    border-radius: 100%;\\n  }\\n\\n  &.is-followed::before {\\n    border-color: var(--color-primary-hover);\\n    box-shadow: 0 0 0 1px var(--color-primary-hover);\\n  }\\n  &.is-current-user {\\n    cursor: auto;\\n  }\\n}\\n\\n@mixin filledButtonOnCanvas {\\n  border: none;\\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\\n  background-color: var(--color-surface-low);\\n\\n  &:active {\\n    box-shadow: 0 0 0 1px var(--color-brand-active);\\n  }\\n\\n  @include isMobile() {\\n    width: var(--mobile-action-button-size, 2rem);\\n    height: var(--mobile-action-button-size, 2rem);\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["getTEXtChunk","blob","metadataChunk","decodePng","Uint8Array","blobToArrayBuffer","find","chunk","name","tEXt","data","encodePngMetadata","metadata","chunks","MIME_TYPES","jsondraw","JSON","stringify","encode","text","compress","splice","Blob","encodePng","type","png","keyword","encodedData","parse","EXPORT_DATA_TYPES","decode","error","console","Error","handlerColor","theme","THEME","LIGHT","createIcon","d","opts","width","height","mirror","style","rest","svg","aria-hidden","focusable","role","viewBox","className","clsx","path","fill","strokeWidth","stroke","strokeLinecap","strokeLinejoin","modifiedTablerIconProps","g","rect","x","y","rx","line","x1","y1","x2","y2","tablerIconProps","LibraryIcon","PlusIcon","DotsIcon","circle","cx","cy","r","DotsHorizontalIcon","PinIcon","polygonIcon","UnlockedIcon","mask","id","maskType","maskUnits","LockedIcon","LockedIconFilled","fillRule","clipRule","SelectionIcon","DiamondIcon","EllipseIcon","ArrowIcon","LineIcon","PenModeIcon","FreedrawIcon","TextIcon","polyline","points","TextSizeIcon","ImageIcon","EraserIcon","ZoomInIcon","ZoomOutIcon","ZoomResetIcon","TrashIcon","EmbedIcon","DuplicateIcon","MoonIcon","SunIcon","ExportIcon","HelpIcon","HelpIconThin","ExternalLinkIcon","GithubIcon","DiscordIcon","XBrandIcon","checkIcon","LinkIcon","save","bucketFillIcon","slashIcon","ExportImageIcon","exportToFileIcon","done","UndoIcon","RedoIcon","questionCircle","arrowBarToTopJSX","arrownNarrowUpJSX","BringForwardIcon","SendBackwardIcon","transform","SendToBackIcon","clipPath","defs","AlignBottomIcon","AlignLeftIcon","AlignRightIcon","DistributeHorizontallyIcon","DistributeVerticallyIcon","CenterVerticallyIcon","CenterHorizontallyIcon","usersIcon","stop","GroupIcon","React","iconFillColor","UngroupIcon","FillHachureIcon","FillCrossHatchIcon","FillSolidIcon","StrokeWidthBoldIcon","StrokeWidthExtraBoldIcon","StrokeStyleDashedIcon","StrokeStyleDottedIcon","SloppinessArchitectIcon","SloppinessArtistIcon","SloppinessCartoonistIcon","EdgeSharpIcon","EdgeRoundIcon","ArrowheadNoneIcon","opacity","ArrowheadArrowIcon","flip","ArrowheadCircleOutlineIcon","ArrowheadBarIcon","ArrowheadTriangleOutlineIcon","ArrowheadDiamondIcon","FontSizeMediumIcon","FontSizeLargeIcon","FontSizeExtraLargeIcon","fontSizeIcon","FontFamilyHeadingIcon","FontFamilyNormalIcon","codeIcon","TextAlignLeftIcon","TextAlignCenterIcon","TextAlignRightIcon","TextAlignTopIcon","TextAlignBottomIcon","TextAlignMiddleIcon","angleIcon","publishIcon","handIcon","downloadIcon","copyIcon","cutIcon","helpIcon","tablerCheckIcon","alertTriangleIcon","eyeDropperIcon","extraToolsIcon","frameToolIcon","mermaidLogoIcon","stackPushIcon","ArrowRightIcon","laserPointerToolIcon","MagicIcon","fullscreenIcon","eyeIcon","eyeClosedIcon","brainIconThin","searchIcon","historyCommandIcon","historyIcon","microphoneIcon","microphoneMutedIcon","boltIcon","selectAllIcon","abacusIcon","flipVertical","flipHorizontal","paintIcon","zoomAreaIcon","svgIcon","pngIcon","magnetIcon","coffeeIcon","DeviceDesktopIcon","gridIcon","lineEditorIcon","sharpArrowIcon","elbowArrowIcon","roundArrowIcon","collapseDownIcon","collapseUpIcon","upIcon","cropIcon","elementLinkIcon","adjustmentsIcon","strokeIcon","pencilIcon","sidebarRightIcon","emptyIcon","div","settingsIcon","size","Spinner","circleWidth","synchronized","mountDelay","mountTime","Date","now","current","strokeMiterlimit","ToolButton","visible","props","ref","excalId","useJsonDrawContainer","innerRef","sizeCn","isLoading","setIsLoading","useState","isMountedRef","useRef","onClick","event","ret","isPromiseLike","AbortError","warn","useEffect","lastPointerTypeRef","button","hidden","ToolIcon","selected","data-testid","title","aria-label","disabled","icon","label","aria-disabled","keyBindingLabel","span","showAriaLabel","children","onPointerDown","pointerType","onPointerUp","requestAnimationFrame","input","aria-keyshortcuts","onChange","checked","displayName","actions","action","concat","handleGroupEditingState","appState","elements","editingGroupId","siblingElements","getElementsInGroup","getNonDeletedElements","length","selectedElementIds","actionDeleteSelected","register","trackEvent","category","perform","formData","app","selectedLinearElement","isEditing","elementId","selectedPointsIndices","elementsMap","scene","getNonDeletedElementsMap","linearElement","LinearElementEditor","getElement","nextElements","map","el","newElementWith","isDeleted","nextAppState","captureUpdate","CaptureUpdateAction","IMMEDIATELY","deletePoints","deleteSelectedElements","framesToBeDeleted","Set","getSelectedElements","filter","isFrameLikeElement","processedElements","frameId","getFrameChildren","frameChildren","has","isBoundToContainer","containerElement","getContainerElement","add","shouldSelectEditingGroup","boundElement","boundElements","forEach","candidate","bound","get","isElbowArrow","mutateElement","startBinding","endBinding","containerId","nextEditingGroupId","elems","lastElementInGroup","editingGroupIdx","groupIds","findIndex","groupId","superGroupId","selectGroupsForSelectedElements","fixBindingsAfterDeletion","activeTool","updateActiveTool","state","preferredSelectionTool","multiElement","newElement","activeEmbeddable","isSomeElementSelected","EVENTUALLY","keyTest","key","KEYS","BACKSPACE","DELETE","CTRL_OR_CMD","PanelComponent","updateData","isMobile","useStylesPanelMode","t","openPopup","MOBILE_ACTION_BUTTON_BG","shortcut","replace","isDarwin","keywords","value","moveOneLeft","keyPriority","shiftKey","code","CODES","BRACKET_LEFT","getShortcutKey","moveOneRight","BRACKET_RIGHT","moveAllLeft","altKey","BringToFrontIcon","moveAllRight","viewMode","element","isTextElement","locked","reduce","Object","keys","isLinearElement","arrayToMap","A","selectedElementsAreBeingDragged","newAppState","duplicateSelectedPoints","duplicatedElements","elementsWithDuplicates","duplicateElements","idsOfElementsToDuplicate","includeBoundTextElement","includeElementsInFrames","randomizeSeed","overrides","origElement","origIdToDuplicateId","duplicateFrameId","DEFAULT_GRID_SIZE","onDuplicate","mappedElements","syncMovedIndices","getSelectionStateForElements","D","saveCaretPosition","textEditor","querySelector","getTextEditor","start","selectionStart","end","selectionEnd","restoreCaretPosition","setTimeout","focus","position","callback","isCompactMode","isEditingText","onPreventClose","savedPosition","setDiv","editorInterface","useEditorInterface","useUIAppState","container","jsondrawContainer","useLayoutEffect","classList","split","toggle","formFactor","DARK","parentSelector","document","body","createElement","appendChild","removeChild","useOutsideClick","isInside","onOutsideClick","isInsideOverride","_event","contains","target","documentElement","closest","pointerEvents","addEventListener","EVENT","POINTER_DOWN","TOUCH_START","removeEventListener","useStable","assign","activeEyeDropperAtom","atom","onCancel","EyeDropper","onSelect","colorPickerType","eyeDropperContainer","useCreatePortalContainer","useJsonDrawElements","useApp","stableProps","selectedElements","colorPreviewDiv","canvas","isHoldingPointerDown","ctx","getContext","getCurrentColor","clientX","clientY","pixel","getImageData","offsetLeft","window","devicePixelRatio","offsetTop","rgbToHex","mouseMoveListener","top","left","currentColor","background","pointerDownListener","stopImmediatePropagation","pointerUpListener","preventDefault","color","keyDownListener","ESCAPE","tabIndex","lastViewportPosition","KEYDOWN","POINTER_UP","passive","BLUR","createPortal","backgroundColor","margin","Island","padding","onClose","onKeyDown","onFocusOutside","onPointerLeave","onPointerDownOutside","preventAutoFocusOnTouch","isMobilePortrait","isLandscape","Popover","data-prevent-outside-click","side","align","alignOffset","sideOffset","collisionBoundary","undefined","zIndex","marginLeft","onOpenAutoFocus","e","isTouchScreen","onCloseAutoFocus","stopPropagation","isInteractive","activeElement","palette","colorName","colorVal","entries","Array","isArray","shade","indexOf","flat","values","includes","activeColorPickerSectionAtom","placeholder","innerValue","setInnerValue","activeSection","setActiveColorPickerSection","useAtom","changeColor","useCallback","inputValue","toLowerCase","normalizeInputColor","inputRef","eyeDropperTriggerRef","eyeDropperState","setEyeDropperState","border","spellCheck","onBlur","onFocus","TAB","s","keepOpenOnAlt","I","toLocaleUpperCase","keyLabel","HotkeyLabel","isShade","isColorDark","CustomColorList","colors","activeColorPickerSection","btnRef","c","i","active","PickerColorList","activeShade","showHotKey","colorObj","getColorNameAndShadeFromColor","index","keybinding","colorPickerHotkeyBindings","startsWith","PickerHeading","ShadeList","shades","right","bottom","display","alignItems","justifyContent","textAlign","fontSize","arrowHandler","eventKey","currentIndex","rows","Math","ceil","COLORS_PER_ROW","prevIndex","nextIndex","newIndex","Picker","showTitle","onEyeDropperToggle","onEscape","customColors","elementColorTypeMap","elementBackground","elementStroke","colorCountMap","Map","set","sort","a","b","slice","MAX_CUSTOM_COLORS_USED_IN_CANVAS","isCustom","isCustomColor","setActiveShade","DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX","DEFAULT_ELEMENT_STROKE_COLOR_INDEX","keyup","ALT","KEYUP","capture","pickerRef","useImperativeHandle","aria-modal","colorPickerKeyNavHandler","sections","sectionsMap","custom","baseColors","hex","acc","push","activeSectionIndex","indexOffset","nextSectionIndex","nextSection","baseColorName","COLOR_PALETTE","black","hotkeyHandler","newShade","Number","paletteKey","paletteValue","colorNames","indexOfColorName","newColorIndex","newColorNameValue","indexOfColor","newColor","TopPicks","activeColor","topPicks","DEFAULT_ELEMENT_STROKE_PICKS","DEFAULT_ELEMENT_BACKGROUND_PICKS","DEFAULT_CANVAS_BACKGROUND_PICKS","COLOR_OUTLINE_CONTRAST_THRESHOLD","getOpenPopup","stylesPanelMode","colorInputJSX","ColorInput","colorPickerContentRef","PropertiesPopover","maxWidth","editingTextElement","isWritableElement","changedColor","savedSelection","force","isMobileMode","ColorPickerTrigger","mode","onToggle","data-openpopup","handleClick","temporarilyDisableTextEditorBlur","duration","originalOnBlur","onblur","ColorPicker","openRef","ButtonSeparator","open","onOpenChange","ColorPickerPopupContent","ButtonIcon","forwardRef","testId","standalone","options","option","group","MenuGroup","p","DropdownMenuContentPropsContext","hovered","trim","useHandleDropdownMenuItemSelect","DropdownMenuContentProps","useContext","composeEventHandlers","textOverflow","overflow","whiteSpace","textStyle","MenuItemContent","badge","Ellipsify","DropdownMenuItem","handleSelect","DropdownMenuPrimitive","asChild","getDropdownMenuItemClassName","DropDownMenuItemBadgeType","DropDownMenuItemBadge","useJsonDrawAppState","borderRadius","fontFamily","GREEN","RED","BLUE","Badge","QuickSearch","ScrollableList","isEmpty","Children","count","selectedFontFamily","hoveredFontFamily","onHover","onLeave","onOpen","fonts","showDeprecatedFonts","useAppProps","searchTerm","setSearchTerm","allFonts","useMemo","from","Fonts","registered","_","private","fallback","familyId","fontFaces","fontDescriptor","getFontFamilyIcon","FONT_FAMILY","Excalifont","Virgil","Nunito","Helvetica","Cascadia","FontFamilyCodeIcon","fontFace","family","deprecated","sceneFamilies","getSceneFamilies","sceneFonts","font","availableFonts","filteredFonts","arrayToList","hoveredFont","wrappedOnSelect","fontPickerKeyHandler","F","ENTER","ARROW_DOWN","next","ARROW_UP","prev","sceneFilteredFonts","availableFilteredFonts","FontPickerListItem","order","isHovered","isSelected","scrollIntoView","block","currentTarget","onMouseMove","getFontFamilyString","groups","DropdownMenuGroup","debounce","isOpened","compactMode","setAppState","useJsonDrawSetAppState","compactStyle","FontPicker","onPopupChange","defaultFonts","DEFAULT_FONTS","onSelectCallback","RadioSelection","FontPickerTrigger","FontPickerList","lineHeight","verticalAlign","flex","openTrigger","Collapsible","showCollapsedIcon","cursor","InlineIcon","flexDirection","moreOptionsAtom","numberOfOptionsToAlwaysShow","showMoreOptions","setShowMoreOptions","alwaysVisibleOptions","moreOptions","some","renderOptions","keyBinding","toUpperCase","handleKeyDown","pressedOption","metaKey","ctrlKey","isArrowKey","isRTL","getLanguage","rtl","ARROW_LEFT","ARROW_RIGHT","nativeEvent","IconPicker","isActive","setActive","rPickerButton","Range","rangeRef","valueRef","hasCommonOpacity","firstElement","at","currentItemOpacity","rangeElement","valueElement","inputWidth","offsetWidth","thumbWidth","min","max","step","deriveStylesPanelMode","isCompact","changeProperty","includeBoundText","getAttribute","isRelevantElement","defaultValue","nonDeletedElements","targetElements","reduceToCommonValue","getNewFontSize","fallbackValue","newFontSizes","updatedElements","oldElement","newFontSize","redrawTextBoundingBox","nextElement","offsetElementAfterFontResize","autoResize","prevElement","updateBoundElements","currentItemFontSize","currentItemStrokeColor","hasStrokeColor","strokeColor","getStylesPanelInfo","h3","DEFAULT_ELEMENT_STROKE_COLOR_PALETTE","getFormValue","hasSelection","currentItemBackgroundColor","isTransparent","every","isLineElement","canBecomePolygon","selectedElementsMap","toggleLinePolygonState","DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE","fillStyle","currentItemFillStyle","allElementsZigZag","fieldset","legend","FillZigZagIcon","hasOwnProperty","nextValue","currentItemStrokeWidth","STROKE_WIDTH","thin","StrokeWidthBaseIcon","bold","extraBold","seed","randomInteger","roughness","currentItemRoughness","strokeStyle","currentItemStrokeStyle","changeFontSize","invariant","FONT_SIZES","sm","FontSizeSmallIcon","md","lg","xl","boundTextElement","getBoundTextElement","DEFAULT_FONT_SIZE","withCaretPositionPreservation","actionDecreaseFontSize","round","FONT_SIZE_RELATIVE_INCREASE_STEP","CHEVRON_LEFT","COMMA","CHEVRON_RIGHT","PERIOD","nextFontFamily","cachedElements","resetAll","resetContainers","cachedElement","NEVER","currentItemFontFamily","currentHoveredFontFamily","nextCaptureUpdateAction","skipOnHoverRender","selectedTextElements","textLengthAccumulator","textElement","originalText","result","elementContainerMapping","uniqueChars","skipFontFaceCheck","fontsCache","loadedFontsCache","sig","getLineHeight","cachedContainer","fontString","chars","join","check","load","then","latestElement","latestContainer","onLoaded","cachedElementsRef","prevSelectedFontFamilyRef","batchedData","setBatchedData","isUnmounted","getFontFamily","elementsArray","DEFAULT_FONT_FAMILY","clear","latesteditingTextElement","fontFamilyData","currentItemTextAlign","VERTICAL_ALIGN","TOP","MIDDLE","BOTTOM","roundness","isUsingAdaptiveRadius","ROUNDNESS","ADAPTIVE_RADIUS","PROPORTIONAL_RADIUS","currentItemRoundness","renderAction","hasLegacyRoundness","getTargetElements","LEGACY","isArrowElement","getArrowheadOptions","ArrowheadTriangleIcon","ArrowheadCircleIcon","ArrowheadDiamondOutlineIcon","ArrowheadCrowfootOneIcon","ArrowheadCrowfootIcon","ArrowheadCrowfootOneOrManyIcon","startArrowhead","endArrowhead","canHaveArrowheads","currentItemStartArrowhead","currentItemEndArrowhead","newElements","startPoint","getPointAtIndexGlobalCoordinates","endPoint","ARROW_TYPE","elbow","elbowed","angle","pointFromAbsoluteCoords","fixedSegments","dismissLinearEditor","startGlobalPoint","endGlobalPoint","startElement","endElement","calculateFixedPointForElbowArrowBinding","updateElbowArrowPoints","pointFrom","bindBindingElement","bindMode","newState","currentItemArrowType","selectedId","sharp","getTooltipDiv","existingDiv","tooltip","item","tooltipRect","getBoundingClientRect","viewportWidth","innerWidth","viewportHeight","innerHeight","Tooltip","long","remove","onPointerEnter","updateTooltip","minWidth","textContent","itemRect","laserPointerCursorSVG_tag","laserPointerCursorIconSVG","laserPointerCursorDataURL_lightMode","encodeURIComponent","laserPointerCursorDataURL_darkMode","laserPointerCursorBackgroundSVG","resetCursor","interactiveCanvas","setEraserCursor","eraserCanvasCache","isDarkTheme","cursorImageSizePx","context","lineWidth","beginPath","arc","PI","previewDataURL","toDataURL","setCursor","isHandToolActive","CURSOR_TYPE","GRAB","isEraserActive","url","AUTO","CROSSHAIR","getStateForZoom","viewportX","viewportY","nextZoom","appLayerX","appLayerY","currentZoom","zoom","scrollX","baseScrollX","zoomOffsetScrollX","scrollY","zoomOffsetScrollY","predicate","UIOptions","canvasActions","changeViewBackgroundColor","viewModeEnabled","viewBackgroundColor","appProps","actionClearCanvas","clearCanvas","openDialog","imageCache","getDefaultAppState","files","penMode","penDetected","exportBackground","exportEmbedScene","gridSize","gridStep","gridModeEnabled","stats","pasteDialog","_elements","getNormalizedZoom","ZOOM_STEP","userToFollow","MAX_ZOOM","EQUAL","NUM_ADD","MIN_ZOOM","MINUS","NUM_SUBTRACT","actionResetZoom","toFixed","ZERO","NUM_ZERO","canvasOffsets","fitToViewport","viewportZoomFactor","minZoom","maxZoom","zoomToFitBounds","bounds","Infinity","adjustedZoomValue","clamp","canvasOffsetLeft","canvasOffsetTop","canvasOffsetRight","canvasOffsetBottom","effectiveCanvasWidth","effectiveCanvasHeight","zoomValueToFitBoundsOnViewport","viewportDimensions","commonBoundsHeight","zoomValueForWidth","commonBoundsWidth","zoomValueForHeight","newZoomValue","roundToStep","centerScroll","centerScrollOn","scenePoint","offsets","getCommonBounds","zoomToFit","getEditorUIOffsets","TWO","THREE","ONE","actionToggleTheme","toggleTheme","lastActiveTool","lastActiveToolBeforeEraser","selectedGroupIds","E","LassoIcon","fromSelection","actionToggleHandTool","H","nextActiveTool","setCursorForShape","actionFinalize","focusContainer","sceneCoords","linearElementEditor","handlePointerUp","isBindingElement","segmentMidPointHoveredCoords","newArrow","draggedPoints","point","pointerOffset","bindOrUnbindBindingElement","angleLocked","shouldRotateWithDiscreteAngle","isValidPolygon","polygon","isInvisiblySmallElement","activeToolLocked","cursorButton","initialState","lastClickedPoint","selectionElement","suggestedBinding","HTMLElement","lastPointerDownWith","lastCommittedPoint","isFreeDrawElement","isPathALoop","linePoints","firstPoint","origin","startBoundElement","ProjectName","fileName","setFileName","htmlFor","handleBlur","ignoreFocus","focusNearestParent","isComposing","keyCode","blur","CheckboxItem","aria-checked","DarkModeToggle","ICONS","MOON","SUN","resaveAsImageWithScene","fileHandle","fileHandleType","getFileHandleType","isImageFileHandleType","exportedElements","exportingFrame","prepareElementsForExport","exportCanvas","actionChangeProjectName","getName","exportScale","allElements","exportSelected","EXPORT_SCALES","getExportSize","DEFAULT_EXPORT_PADDING","scaleButtonTitle","saveToActiveFile","fileHandleExists","isImageFileHandle","saveAsJSON","toast","message","S","saveAs","nativeFileSystemSupported","loadScene","loadedElements","loadedAppState","loadFromJSON","errorMessage","O","exportWithDarkMode","marginTop","marginBottom","elementsCopied","hasBoundTextElement","copiedStyles","C","actionPasteStyles","pastedElement","isJsonDrawElement","elementStylesToCopyFrom","canApplyRoundnessTypeToElement","getDefaultRoundnessTypeForElement","DEFAULT_TEXT_ALIGN","V","actionShortcuts","openMenu","QUESTION_MARK","allElementsInSameGroup","isElementInGroup","frameAndChildrenSelectedTogether","actionGroup","getRootElements","getSelectedGroupIds","selectedGroupId","elementIdsInGroup","groupByFrameLikes","elementsInFrame","removeElementsFromFrame","newGroupId","randomId","selectElementIds","addToGroup","elementsInGroup","lastGroupElementIndex","lastIndexOf","elementsAfterGroup","elementsBeforeGroup","updatedElement","reorderedElements","selectGroup","enableActionGroup","G","boundTextElementIds","nextGroupIds","removeFromSelectedGroups","updateAppState","selectedElementFrameIds","targetFrames","getFrameLikeElements","frame","replaceAllElementsInFrame","getElementsInResizingFrame","radius","moveTo","lineTo","quadraticCurveTo","closePath","socketId","collaborator","hash","abs","hashToInteger","charCodeAt","char","hue","saturation","lightness","Avatar","src","shortName","firstCodePoint","getNameInitial","codePointAt","String","fromCodePoint","setError","loadImg","img","alt","referrerPolicy","onError","isCurrentUser","username","withName","isBeingFollowed","getClientColor","statusClassNames","isSpeaking","isInCall","isMuted","statusIconJSX","avatarUrl","actionAddToLibrary","LIBRARY_DISABLED_TYPES","library","getLatestLibrary","setLibrary","status","deepCopyElement","created","items","catch","getSelectedElementsByGroup","alignSelectedElements","alignment","alignElements","updatedElementsMap","updateFrameMembershipOfSelectedElements","AlignTopIcon","alignActionsPredicate","axis","distributeSelectedElements","distribution","distributeElements","space","actionFlipHorizontal","flipSelectedElements","flipDirection","flipElements","_element","midX","midY","getCommonBoundingBox","resizeMultipleElements","flipByX","flipByY","shouldResizeFromCenter","shouldMaintainAspectRatio","bindOrUnbindBindingElements","elbowArrows","otherElements","newMidX","newMidY","diffX","diffY","actionCopy","elementsToCopy","copyToClipboard","types","readSystemClipboard","isFirefox","pasteFromClipboard","createPasteEvent","X","actionCopyAsSvg","_data","exportSelection","exportColorScheme","probablySupportsClipboardWriteText","probablySupportsClipboardBlob","copyTextToSystemClipboard","getTextFromElements","objectsSnapModeEnabled","QUOTE","zenModeEnabled","Z","SLASH","measureText","getFontString","originalContainerHeight","getOriginalContainerHeightFromCache","resetOriginalContainerCache","computeBoundTextPosition","ele","bindingContainer","isTextBindableContainer","TEXT_ALIGN","CENTER","updateOriginalContainerCache","pushTextAboveContainer","textElementIndex","containerIndex","pushContainerBelowText","actionWrapTextInContainer","someTextElements","containerIds","BOUND_TEXT_PADDING","computeContainerDimensionForBoundText","linearElementIds","IS_HYPERLINK_TOOLTIP_VISIBLE","embeddableLinkCache","Hyperlink","onLinkOpen","setToast","updateEmbedValidationStatus","link","inputVal","setInputVal","linkVal","showHyperlinkPopup","handleSubmit","normalizeLink","isEmbeddableElement","embeddableURLValidator","validateEmbeddable","embedLink","getEmbedLink","URIError","closable","ar","intrinsicSize","w","h","hasLinkChanged","delete","select","timeoutId","handlePointerMove","clearTimeout","shouldHideLinkPopup","AUTO_HIDE_TIMEOUT","POINTER_MOVE","handleRemove","getCoordsForPopover","contextMenu","resizingElement","isRotating","POPUP_WIDTH","POPUP_PADDING","autoFocus","K","href","isLocalLink","customEvent","wrapEvent","JSONDRAW_LINK","defaultPrevented","rel","onEdit","sourceElementId","getElementAbsoluteCoords","sceneCoordsToViewportCoords","sceneX","sceneY","SPACE_BOTTOM","getContextMenuLabel","hideHyperlinkToolip","HYPERLINK_TOOLTIP_TIMEOUT_ID","viewportCoordsToSceneCoords","threshold","hitElementBoundingBox","popoverX","popoverY","POPUP_HEIGHT","actionToggleElementLock","shouldLock","nextLockState","isAGroup","elementsAreInSameGroup","nextLockedMultiSelections","lockedMultiSelections","nextElementsMap","nextSelectedElementIds","fromEntries","unlockedSelectedElements","nextSelectedGroupIds","selectGroupsFromGivenElements","activeLockedId","toLocaleLowerCase","L","lockedElements","gid","unlockedElements","GENERIC_TYPES","LINEAR_TYPES","CONVERTIBLE_GENERIC_TYPES","CONVERTIBLE_LINEAR_TYPES","isConvertibleGenericType","elementType","isConvertibleLinearType","convertElementTypePopupAtom","LINEAR_ELEMENT_CONVERSION_CACHE","Panel","conversionType","getConversionTypeFromElements","genericElements","filterGenericConvetibleElements","linearElements","filterLinearConvertibleElements","sameType","getLinearElementSubType","panelPosition","setPanelPosition","positionRef","panelRef","bottomLeft","localeCompare","newPositionRef","pointRotateRads","minX","maxY","cacheKey","toCacheKey","getConvertibleType","FONT_SIZE_CONVERSION_CACHE","boundText","SHAPES","RectangleIcon","GAP_HORIZONTAL","CLASSES","CONVERT_ELEMENT_TYPE_POPUP","convertElementTypes","nextType","version","adjustBoundTextSize","getBoundTextMaxWidth","maxHeight","getBoundTextMaxHeight","wrappedText","wrapText","metrics","nextFontSize","_updatedTextElement","direction","advancement","convertibleGenericElements","convertedElements","convertedElement","convertElementType","getElementsIncludingDeleted","replaceAllElements","setState","prevState","convertibleLinearElements","commonSubType","getElementsMapIncludingDeleted","converted","nextPoints","convertLineToElbow","updates","similarCachedLinearElement","mapFind","convertedSelectedLinearElements","canBeLinear","isEligibleLinearElement","isArrowBoundToElement","convertitleType","isVert","isHorz","dist","ortho","sanitizePoints","THRESHOLD","trimmed","clean","v1","v2","d1","d2","k","sanitized","targetType","isValidConversion","isProdEnv","ShapeCache","bumpVersion","updateBindings","newLinearElement","newArrowElement","assertNever","startType","ConvertElementTypePopup","elementsCategoryRef","updateEditorAtom","actionToggleShapeSwitch","editorJotaiStore","actionCopyElementLink","location","idAndType","getLinkIdAndTypeFromSelection","generateLinkForSelection","defaultGetElementLinkFromSelection","canCreateLinkFromElements","saveScene","imageExport","commandPalette","cut","copy","paste","copyStyles","pasteStyles","selectAll","sendBackward","bringForward","sendToBack","bringToFront","copyAsPng","ungroup","gridMode","zenMode","objectsSnapMode","addToLibrary","hyperlink","toggleElementLock","resetZoom","zoomOut","zoomIn","zoomToFitSelection","zoomToFitSelectionInViewport","toggleEraserTool","toggleHandTool","setFrameAsActiveTool","saveFileToDisk","toggleShortcuts","searchMenu","wrapSelectionInFrame","toolLock","getShortcutFromShortcutName","idx","shortcuts","shortcutMap","exportToCanvas","maxWidthOrHeight","getDimensions","exportPadding","restoredElements","restoreElements","deleteInvisibleElements","restoredAppState","restoreAppState","_exportToCanvas","scale","renderEmbeddables","skipInliningFonts","reuseImages","exportAppState","_exportToSvg","exportLibraryItemToSvg","exportToSvg","white","useLibraryItemSvg","svgCache","setSvg","cachedSvg","exportedSvg","node","innerHTML","outerHTML","libraryItemSvgsCache","clearLibraryCache","deleteItemsFromLibraryCache","Emitter","libraryItemsAtom","isInitialized","libraryItems","cloneJSON","isUniqueItem","existingLibraryItems","targetLibraryItem","libraryItem","libItemJsonDrawItem","versionNonce","Library","currLibraryItems","prevLibraryItems","cloneLibraryItems","updateQueue","getLastUpdateTask","notifyListeners","nextLibraryItems","onLibraryChange","onLibraryUpdateEmitter","trigger","createLibraryUpdate","nextItemsMap","update","deletedItems","addedItems","updatedItems","prevItemsMap","prevItem","getLibraryItemHash","destroy","resetLibrary","Promise","resolve","updateLibrary","prompt","merge","openLibraryMenu","defaultStatus","openSidebar","DEFAULT_SIDEBAR","tab","LIBRARY_SIDEBAR_TAB","reject","nextItems","source","loadLibraryFromBlob","restoreLibraryItems","confirm","numShapes","localItems","otherItems","newItems","task","finally","_task","distributeLibraryItemsOnSquareGrid","ITEMS_PER_ROW","sqrt","resElements","getMaxHeightPerRow","row","getMaxWidthPerCol","currCol","targetCol","colOffsetX","rowOffsetY","maxHeightCurrRow","maxWidthCurrCol","col","PADDING","minY","offsetCenterX","offsetCenterY","AdapterTransaction","queue","Queue","getLibraryItems","adapter","_queue","run","fn","transaction","hashElementsVersion","reComboMark","RegExp","rsComboRange","reLatin","deburredLetters","deburr","str","useStableCallback","stableRef","userFn","stableFn","args","Modal","closeOnClickOutside","modalRoot","animationsDisabledRef","handleKeydown","onCloseRequest","aria-labelledby","labelledBy","libraryReturnUrl","referrer","LibraryMenuBrowseButton","pathname","VERSIONS","jsondrawLibrary","LibraryMenuControlButtons","scrollPositionAtom","RowStack","gap","ColStack","justifyItems","Button","TextField","fullWidth","readonly","selectOnRender","isRedacted","isTemporarilyUnredacted","setIsTemporarilyUnredacted","readOnly","userSelect","onClickOutside","menuRef","callbacksRef","DROPDOWN_MENU_EVENT_WRAPPER","classNames","Provider","Stack","Col","MenuContent","DropdownMenuItemLink","MenuSeparator","DropdownMenuSubContent","parentContainer","parentRect","menuWidth","spaceRemaining","setSideOffset","setAlignOffset","BASE_ALIGN_OFFSET","BASE_SIDE_OFFSET","collisionPadding","DropdownMenuSubTrigger","chevronRight","getMenuComponent","comp","toArray","child","component","getMenuTriggerComponent","getSubMenuTriggerComponent","MenuTriggerComp","MenuContentComp","getSubMenuContentComponent","DropdownMenuSub","Trigger","Content","MenuTrigger","DropdownMenuItemCheckbox","DropdownMenu","getMenuContentComponent","MenuContentWithState","modal","DropdownMenuTrigger","DropdownMenuContent","Item","ItemCheckbox","ItemLink","ItemCustom","DropdownMenuItemCustom","Group","Separator","Sub","SPLIT_REGEX","KEY_REGEXP","TAG_START_REGEXP","TAG_END_REGEXP","Trans","i18nKey","useI18n","format","stack","Boolean","match","tagStartMatch","tagEndMatch","keyMatch","pop","itemChildren","EditorLocalStorage","localStorage","getItem","setItem","removeItem","DialogActionButton","actionType","cs","visibility","inset","generatePreviewImage","BOX_PADDING","BOX_SIZE","BORDER_WIDTH","MAX_ITEMS_PER_ROW","fillRect","itemCanvas","rowOffset","floor","colOffset","drawImage","strokeRect","resizeImageFile","File","canvasToBlob","outputType","jpg","SingleLibraryItem","libItem","onRemove","svgRef","CloseIcon","bind","fontWeight","PublishLibrary","onSuccess","updateItemsInStorage","libraryData","setLibraryData","authorName","githubHandle","description","twitterHandle","website","isSubmitting","setIsSubmitting","EDITOR_LS_KEYS","PUBLISH_LIBRARY","clonedLibItems","setClonedLibItems","onInputChange","onSubmit","erroredLibItems","isError","previewImage","lib","getExportSource","FormData","append","fetch","method","response","ok","json","statusText","err","onDialogClose","shouldRenderForm","containsPublishedItems","Dialog","form","val","required","textarea","pattern","LibraryDropdownMenuButton","selectedItems","onRemoveFromLibrary","onSelectItems","libraryItemsData","isLibraryMenuOpen","setIsLibraryMenuOpen","isLibraryMenuOpenAtom","showRemoveLibAlert","setShowRemoveLibAlert","itemsSelected","resetLabel","showPublishLibraryDialog","setShowPublishLibraryDialog","publishLibSuccess","setPublishLibSuccess","renderPublishSuccess","onLibraryImport","fileOpen","onLibraryExport","saveLibraryAsJSON","muteFSAbortError","LoadIcon","content","ConfirmDialog","onConfirm","getSelectedItems","onPublishLibSuccess","nextLibItems","alert","_id","LibraryDropdownMenu","useLibraryCache","removeFromLibrary","useTransition","useTransitionPolyfill","LibraryUnit","memo","isPending","onDrag","setIsHovered","adder","onMouseEnter","onMouseLeave","draggable","onDragStart","LibraryMenuSection","onItemSelectToggle","onItemDrag","isItemSelected","itemsRenderedPerBatch","startTransition","setIndex","EmptyLibraryUnit","LibraryMenuItems","onAddToLibrary","onInsertLibraryItems","pendingElements","libraryContainerRef","scrollPosition","useScrollPosition","elementRef","setScrollPosition","handleScroll","throttle","scrollTop","cancel","scrollTo","lastSelectedItem","setLastSelectedItem","searchInputValue","setSearchInputValue","IS_LIBRARY_EMPTY","IS_SEARCHING","filteredItems","searchQuery","itemName","unpublishedItems","publishedItems","shouldSelect","orderedItems","rangeStart","rangeEnd","selectedItemsMap","minRange","maxRange","getInsertedElements","itemIds","dataTransfer","setData","jsondrawlibIds","onAddToLibraryClick","onItemClick","CACHED_ITEMS_RENDERED_PER_BATCH","searchInputRef","ITEMS_RENDERED_PER_BATCH","nextAnimationFrame","JSX_whenNotSearching","LibraryMenuSectionGrid","JSX_whenSearching","kbd","borderBottom","hideCancelButton","LibraryMenuWrapper","LibraryMenuContent","_onAddToLibrary","showBtn","getPendingElements","pending","LibraryMenu","onInsertElements","setSelectedItems","memoizedLibrary","selectedElementVersions","isShallowEqual","currVersion","SIDEBAR","HTMLInputElement","elementUnderCursor","elementFromPoint","deselectItems","islandNode","refValue","setRefValue","useCallbackRefState","lastActiveElement","isFullscreen","focusableElements","queryFocusableElements","autofocus","useSetAtom","getDialogSize","setIslandNode","h2","confirmText","cancelText","flushSync","activeConfirmDialogAtom","activeConfirmDialog","setActiveConfirmDialog","actionManager","useJsonDrawActionManager","executeAction","numericKey","fillable","R","P","T","actionToggleViewMode","TunnelsContext","createIsolation","ToolPopover","defaultOption","namePrefix","dataTestId","onToolChange","displayedOption","isPopupOpen","setIsPopupOpen","currentType","o","unsubscribe","onPointerDownEmitter","on","v","SIDE_OFFSET","capitalizeString","setActiveTool","SHAPE_ACTIONS_THEME_SCOPE","canChangeStrokeColor","commonSelectedType","hasBackground","SelectedShapeActions","isSingleElementBoundContainer","isEditingTextOrNewElement","showFillIcons","showLinkIcon","showLineEditorAction","showCropEditorAction","croppingElementId","isImageElement","showAlignActions","canChangeBackgroundColor","hasStrokeWidth","hasStrokeStyle","canChangeRoundness","toolIsArrow","suppportsHorizontalAlign","shouldAllowVerticalAlign","flexBasis","flexWrap","CombinedShapeProperties","shouldShowCombinedProperties","isOpen","PROPERTIES_CLASSES","CombinedArrowProperties","showShowArrowProperties","arrowType","CombinedTextProperties","useTextEditorFocus","savedCaretPosition","setSavedCaretPosition","clearSavedPosition","hasSavedPosition","CombinedExtraActions","showDuplicate","showDelete","LinearEditorAction","CompactShapeActions","mobileActionsRef","ACTIONS_WIDTH","showDeleteOutside","MIN_WIDTH","showDuplicateOutside","ADDITIONAL_WIDTH","boxShadow","WIDTH","GAP","isExtraToolsMenuOpen","setIsExtraToolsMenuOpen","isFullStylesPanel","isCompactStylesPanel","SELECTION_TOOLS","frameToolSelected","laserToolSelected","lassoToolSelected","embeddableToolSelected","TTDDialogTriggerTunnel","useTunnels","getToolbarTools","tools","letter","initialized","tool","togglePenMode","isCollaborating","aiEnabled","Out","setOpenDialog","plugins","diagramToCode","onMagicframeToolSelect","ZOOM_ACTIONS","Row","showExitZenModeBtn","actionToggleZenMode","getCategoryOrder","DEFAULT_CATEGORIES","export","editor","links","CommandShortcutHint","isCommandPaletteToggleShortcut","CommandPalette","uiAppState","commandPaletteShortcut","nextState","CommandPaletteInner","defaultItems","customCommandPaletteItems","lastUsed","lastUsedPaletteItem","allCommands","setAllCommands","stableDeps","libraryCommands","LibraryItemIcon","haystack","getActionLabel","getActionIcon","commandsFromActions","actionToCommand","transformer","command","elementsCommands","alignTop","alignBottom","alignLeft","alignRight","alignVerticallyCentered","alignHorizontallyCentered","duplicateSelection","increaseFontSize","decreaseFontSize","toggleLinearEditor","cropEditor","togglePolygon","actionLink","actionLinkToElement","toolCommands","toggleLassoTool","editorCommands","undo","redo","unlockAllElements","exportCommands","copyAsSvg","defaultTab","actionToggleSearchMenu","shape","Q","toggleLock","setLastUsed","commandSearch","setCommandSearch","currentCommand","setCurrentCommand","commandsByCategory","setCommandsByCategory","closeCommandPalette","cb","executeCommand","isCommandAvailable","ignoreAlphanumerics","matchingCommands","shouldConsiderLastUsed","nextItem","test","nextCommandsByCategory","commands","showLastUsed","getNextCommandsByCategory","_query","fuzzy","extract","score","original","CommandItem","showShortcut","noop","actionToggleLinearEditor","selectedElement","nextPolygonState","targetElementsMap","allPolygon","CANVAS_SEARCH_TAB","searchInput","jsondrawContainerValue","SEARCH_MENU_INPUT_WRAPPER","isCropping","actionSelectAllElementsInFrame","isSingleFrameSelected","removeAllElementsFromFrame","frameRendering","enabled","actionWrapSelectionInFrame","newFrameElement","elementInGroup","addElementsToFrame","HistoryDelta","StoreDelta","snapshot","elementsContainVisibleChange","applyTo","appStateContainsVisibleChange","calculate","prevSnapshot","nextSnapshot","inverse","delta","applyLatestChanges","prevElements","modifierOptions","HistoryChangedEvent","isUndoStackEmpty","isRedoStackEmpty","History","undoStack","redoStack","store","onHistoryChangedEmitter","historyDelta","entry","containsVisibleChange","maybeClone","change","StoreChange","create","scheduleMicroAction","inversedEntry","useEmitter","emitter","setEvent","updater","flowChartCreator","isCreatingChart","orderByFractionalIndex","actionTextAutoResize","trackAction","ActionManager","getAppState","formState","isActionEnabled","actionResult","registerAction","registerAll","AnimationFrameHandler","targets","stopped","scheduleFrame","cancelFrame","constructFrame","shouldAbort","onFrame","timestamp","rafId","rafIds","cancelAnimationFrame","WeakMap","AnimatedTrail","animationFrameHandler","pastTrails","trailElement","createElementNS","SVG_NS","animateTrail","trailAnimation","setAttribute","hasCurrentTrail","currentTrail","hasLastPoint","len","originalPoints","parentNode","startPath","LaserPointer","addPoint","performance","addPointToPath","endPath","close","keepHead","getCurrentTrail","clearTrails","paths","trail","drawTrail","currentPath","getStrokeOutline","svgPaths","_stroke","getSvgPathFromStroke","EraserTrail","streamline","sizeMapping","pressure","DECAY_TIME","l","DECAY_LENGTH","totalLength","easeOut","elementsToErase","groupsToErase","restore","elementsToEraser","updateElementsToBeErased","restoreToErase","eraserPath","pathSegment","lineSegment","candidateElements","visibleElements","candidateElementsMap","eraserTest","shallowestGroupId","getBoundTextElementId","lastPoint","segmentBounds","origElementBounds","getElementBounds","elementBounds","doBoundsIntersect","shouldTestInside","isPointInElement","outlinePoints","getFreedrawOutlinePoints","strokeSegments","getFreedrawOutlineAsSegments","tolerance","seg","lineSegmentsDistance","poly","polygonIncludesPointNonZero","getElementLineSegments","segments","intersectElementWithLineSegment","getCenter","allCoords","pointers","sum","coords","hypot","array","mapper","LaserTrails","collabTrails","localTrail","getTrailOptions","DEFAULT_LASER_COLOR","simplify","updateCollabTrails","collaborators","pointer","laserColor","enclosureTest","lassoPath","elementsSegments","lassoPolygon","polygonFromPoints","segment","intersectionTest","lassoSegments","lassoSegment","LassoTrail","intersectedElements","enclosedElements","canvasTranslate","keepPreviousSelection","selectElementsFromIds","ids","getNonDeletedElement","nextSelection","selectedIds","updateSelection","currentCanvasTranslate","visibleElementsMap","getLassoSelectedElementIds","simplifyDistance","lassoBounds","results","withBatchedUpdates","unstable_batchedUpdates","func","throttleRAF","isRenderThrottlingEnabled","IS_REACT_18_AND_UP","ReactVersion","hasWarned","JSONDRAW_THROTTLE_RENDER","Renderer","getRenderableElements","memoize","newElementId","sceneNonce","_sceneNonce","toBrandedType","getVisibleCanvasElements","isElementInViewport","renderStaticSceneThrottled","isOverScrollBars","scrollBars","isOverHorizontal","isOverVertical","horizontal","vertical","scrollBar","isOverEither","SnapCache","referenceSnapPoints","visibleGaps","setReferenceSnapPoints","snapPoints","getReferenceSnapPoints","setVisibleGaps","gaps","getVisibleGaps","isGridModeEnabled","isLassoDragging","omitCenter","boundingBoxCorners","dragOffset","halfWidth","halfHeight","topLeft","topRight","bottomRight","center","leftMid","topMid","rightMid","bottomMid","maxX","getDraggedElementsBounds","getVisibleAndNonSelectedElements","getGapSnaps","nearestSnapsX","nearestSnapsY","minOffset","isSnappingEnabled","horizontalGaps","verticalGaps","centerX","centerY","rangesOverlap","rangeInclusive","overlap","centerOffset","startSide","snap","offset","endMaxX","endBounds","distanceToEndElementX","sideOffsetRight","startMinX","startBounds","sideOffsetLeft","distanceToStartElementX","startMinY","sideOffsetTop","endMaxY","distanceToEndElementY","sideOffsetBottom","getPointSnaps","selectionSnapPoints","thisSnapPoint","otherSnapPoint","offsetX","offsetY","decimalPlaces","dedupePoints","createPointSnapLines","snapsX","snapsY","snapResizingElements","selectedOriginalElements","transformHandle","areRoughlyEqual","precision","snapOffset","snapLines","snapDistance","getSnapDistance","pointSnapLines","BraveMeasureTextError","issueLink","discordLink","fitInViewport","popoverRef","lastInitializedPosRef","overflowX","overflowY","handler","ContextMenu","ul","onContextMenu","CONTEXT_MENU_SEPARATOR","hr","actionName","li","dangerous","checkmark","FollowMode","onDisconnect","SidebarPropsContext","renderDockButton","canFitSidebar","shouldRenderDockButton","onDock","docked","SidebarTabTrigger","RadixTabs","SidebarTabTriggers","SidebarTrigger","SidebarTabs","onValueChange","SidebarTab","isSidebarDockedAtom","SidebarInner","isDevEnv","setIsSidebarDockedAtom","headerPropsRef","isDocked","updateObject","islandRef","closeLibrary","Sidebar","onStateChange","refPrevOpenSidebar","mounted","setMounted","shouldRender","Header","SidebarHeader","TabTriggers","TabTrigger","Tabs","Tab","AnimationController","isRunning","animations","animation","deltaTime","lastTime","tick","running","drawPointsSnapLine","pointSnapLine","drawCross","drawPointerSnapLine","pointerSnapLine","SNAP_CROSS_SIZE","drawLine","to","drawGapLine","FULL","HALF","QUARTER","halfPoint","highlightPoint","fillCircle","POINT_HANDLE_SIZE","renderSingleLinearPoint","isPhantomPoint","isOverlappingPoint","setLineDash","renderSelectionBorder","elementProperties","selectionColors","dashed","elementWidth","elementHeight","linePadding","DEFAULT_TRANSFORM_HANDLE_SPACING","spaceWidth","translate","lineDashOffset","strokeRectWithRotation_simple","renderElementsBoxHighlight","config","individualElements","elementsInGroups","getSelectionFromElements","groupElements","selection","renderLinearPointHandles","getPointsGlobalCoordinates","_isElbowArrow","_isLineElement","pointsEqual","isSegmentTooShort","getEditorMidPoints","midPoint","midPoints","segmentMidPoint","renderFocusPointIndicator","arrow","binding","bindableElement","isBindableElement","focusPoint","getGlobalFixedPointForBindableElement","fixedPoint","isFocusPointVisible","linearState","isDragging","pointIndex","pointSelected","hoveredFocusPointBinding","draggedFocusPointBinding","arrowPoint","fromPoint","toPoint","FOCUS_POINT_SIZE","renderTransformHandles","renderConfig","transformHandles","selectionColor","roundRect","INTERACTIVE_SCENE_ANIMATION_KEY","frameToHighlight","isBindingEnabled","elementsToHighlight","searchMatches","hoveredElementIds","shouldCacheIgnoreZoom","isComponentMounted","areEqual","rendererParams","remotePointerButton","remotePointerViewportCoords","remoteSelectedElementIds","remotePointerUsernames","remotePointerUserStates","user","renderCursor","userState","containerRef","getComputedStyle","getPropertyValue","allElementsMap","renderScrollbars","renderInteractiveSceneCallback","animationState","bindingHighlight","nextAnimationState","renderInteractiveScene","_renderInteractiveScene","editingLinearElement","atLeastOneVisibleElement","normalizedWidth","normalizedHeight","getNormalizedCanvasDimensions","bootstrapCanvas","renderSelectionElement","rotate","shiftY","renderBindingHighlightForBindableElement","getFeatureFlag","renderBindingHighlightForBindableElement_complex","countdownInProgress","bindModeHandler","remainingTime","BIND_MODE_TIMEOUT","runtime","enclosingFrame","FRAME_STYLE","clip","elementCenterPoint","ellipse","curves","deconstructDiamondElement","control1","control2","curve","bezierCurveTo","deconstructRectanguloidElement","midpoints","PROGRESS_RATIO","midpointRadius","cutoutRadius","bezierEquation","rotatedPoint","globalPoint","clearRect","midpoint","renderBindingHighlightForBindableElement_simple","pointerCoords","insideBindable","hitElementItself","overrideShouldTestInside","getDiamondBaseCorners","highlightedPoint","HEADING_RIGHT","HEADING_DOWN","HEADING_LEFT","HEADING_UP","compareHeading","headingForPoint","lastPointerMoveCoords","isFrameSelected","renderElbowArrowMidPointHighlight","hoverPointIndex","showBoundingBox","hasBoundingBox","isSingleLinearElementSelected","locallySelectedIds","selections","remoteClients","isSelectedViaGroup","addSelectionForGroupId","getTransformHandles","getOmitSidesForEditorInterface","croppingElement","renderCropHandles","ZOOMED_LINE_WIDTH","ZOOMED_HALF_LINE_WIDTH","HALF_WIDTH","HALF_HEIGHT","HORIZONTAL_LINE_LENGTH","LINE_LENGTH","VERTICAL_LINE_LENGTH","x1s","y1s","x1t","y1t","x2s","y2s","x2t","y2t","handle","dashedLinePadding","initialLineDash","getLineDash","getTransformHandlesFromCoords","rotation","matches","matchedLines","elementX1","elementY1","zoomFactor","matchedLine","showOnCanvas","renderSnaps","snapColor","SNAP_COLOR_LIGHT","snapWidth","SNAP_COLOR_DARK","SNAP_WIDTH","snapLine","renderRemoteCursors","isOutOfBounds","isInactive","UserIdleState","IDLE","AWAY","globalAlpha","IS_SPEAKING_COLOR","COLOR_VOICE_CALL","lineJoin","COLOR_WHITE","measure","measureHeight","actualBoundingBoxDescent","actualBoundingBoxAscent","finalHeight","boxX","boxY","boxWidth","paddingHorizontal","boxHeight","paddingVertical","COLOR_CHARCOAL_BLACK","fillText","barheight","getScrollBars","elementsMinX","elementsMinY","elementsMaxX","elementsMaxY","viewportWidthWithZoom","viewportHeightWithZoom","safeArea","parseInt","getGlobalCSSVariable","viewportMinX","viewportMinY","viewportMaxX","viewportMaxY","sceneMinX","sceneMinY","sceneMaxX","sceneMaxY","extendedSceneWidth","extendedSceneHeight","scrollWidthOffset","SCROLLBAR_MARGIN","SCROLLBAR_WIDTH","scrollbarWidth","scrollbarHeightOffset","scrollbarHeight","horizontalDeltaMultiplier","sceneWidth","verticalDeltaMultiplier","sceneHeight","deltaMultiplier","SCROLLBAR_COLOR","handleCanvasRef","onPointerMove","onPointerCancel","onTouchMove","onDoubleClick","prevProps","nextProps","selectionNonce","getRelevantAppStateProps","wrapperRef","wrapper","replaceChildren","renderStaticScene","rc","ElementCanvasButtons","getContainerCoords","CONTAINER_PADDING","getTargetFrame","shouldApplyFrameClip","frameClip","renderElement","renderNewElementSceneThrottled","_renderNewElementScene","trailing","canvasRef","NewElementCanvas","renderNewElementScene","SVGLayer","trails","componentName","Component","renderAtom","WrapperComponent","tunnelsJotai","setCounter","metaRef","preferHost","counter","meta","__fallback","FilledButton","variant","_onClick","timer","_status","Action","actionLabel","h4","Actions","ExportToImage","actionChangeExportEmbedScene","SaveToDisk","actionSaveFileToDisk","overwriteConfirmStateAtom","openConfirmModal","onReject","OverwriteConfirmDialog","withInternalFallback","OverwriteConfirmDialogTunnel","overwriteConfirmState","hasActions","In","handleClose","handleConfirm","isPropertyEditable","property","getStepSizedValue","stepSize","atomicUnit","originalElementsMap","latest","moveElement","newTopLeftX","newTopLeftY","originalElement","shouldInformMutation","DRAGGING_THRESHOLD","unbindBindingElement","topLeftX","topLeftY","changeInX","changeInY","informMutation","latestBoundTextElement","originalChildren","latestChildElement","childCX","childCY","childTopLeftX","childTopLeftY","childNewTopLeftX","childNewTopLeftY","childX","childY","simultaneouslyUpdated","_atomicUnits","isInGroup","dragInputCallback","StatsDragInput","editable","shouldKeepAspectRatio","sensitivity","dragFinishedCallback","labelRef","setInputValue","toString","stateRef","originalAppState","originalElements","lastUpdatedValue","updatePending","handleInputValue","updatedValue","parsed","isNaN","rounded","SMALLEST_DELTA","accumulatedChange","instantChange","shouldChangeByStepSize","syncActionResult","callbacks","startValue","lastPointer","stepChange","sign","autoComplete","eventTarget","handleDegreeChange","nextAngle","degreesToRadians","nextAngleInDegrees","originalAngleInDegrees","radiansToDegrees","changeInDegrees","STEP_SIZE","Angle","DragInput","CanvasGrid","nextGridStep","getNormalizedGridStep","handleDimensionChange","keepAspectRatio","aspectRatio","_shouldKeepAspectRatio","crop","nextCrop","isFlippedByX","isFlippedByY","uncroppedWidth","uncroppedHeight","getUncroppedWidthAndHeight","naturalToUncroppedWidthRatio","naturalWidth","naturalToUncroppedHeightRatio","naturalHeight","MAX_POSSIBLE_WIDTH","MAX_POSSIBLE_HEIGHT","MINIMAL_CROP_SIZE","MIN_HEIGHT","nextValueInNatural","nextCropWidth","nextCropHeight","changeInWidth","changeInHeight","nextWidth","MIN_WIDTH_OR_HEIGHT","nextHeight","resizeSingleElement","nextElementsInFrame","handleDragFinished","DimensionDragInput","ratio","handleFontSizeChange","MIN_FONT_SIZE","changeInFontSize","FontSize","editableLatestIndividualElements","editableOriginalIndividualElements","triggerUpdate","MultiAngle","angles","resizeElementInGroup","anchorX","anchorY","getResizedUpdates","rescalePointsInElement","handleBindTextResize","resizeGroup","initialHeight","anchor","latestElements","atomicUnits","getAtomicUnits","elementsInUnit","getElementsInAtomicUnit","initialWidth","MultiDimension","sizes","latestTextElements","MultiFontSize","getApplicableTextElements","fontSizes","textEl","moveGroupTo","nextX","nextY","handlePositionChange","changeInTopX","changeInTopY","moveElements","MultiPosition","positions","Position","flipAdjustedPosition","getFlipAdjustedCropPosition","Stats","StatsInner","columns","heading","gridTemplateColumns","StatsRow","StatsRows","renderCustomStats","singleElement","multipleElements","cropMode","unCroppedDimension","sceneDimension","setSceneDimension","throttledSetSceneDimension","boundingBox","STATS_TIMEOUT","_frameAndChildrenSelectedTogether","panels","STATS_PANELS","generalStats","Dimension","TTDDialogInput","onKeyboardSubmit","callbackRef","loaded","hideErrorDetails","invisible","panelActions","onTextSubmitInProgess","renderTopRight","renderSubmitShortcut","panelActionJustifyContent","panelAction","Fragment","renderPanelAction","TTDDialogPanels","TTDDialogSubmitShortcut","resetPreview","canvasNode","parent","parentElement","mermaidToJsonDrawLib","mermaidDefinition","success","api","parseMermaidToExcalidraw","convertToJsonDrawElements","regenerateIds","offsetHeight","MERMAID_TO_JSONDRAW","shouldSaveMermaidDataToStorage","addElementsFromPasteOrLibrary","fitToContent","saveMermaidDataToStorage","MermaidToJsonDraw","setText","MERMAID_EXAMPLE","deferredText","useDeferredValue","doRender","convertMermaidToJsonDraw","debouncedSaveMermaidDefinition","flush","onInsertToEditor","insertToEditor","flowchartLink","sequenceLink","classLink","TTDDialogPanel","TTDDialogOutput","TTDWelcomeMessage","ChatMessage","onMermaidTabClick","onAiRepairClick","onDeleteMessage","onInsertMessage","onRetry","rateLimitRemaining","isLastMessage","renderWarning","allowFixingParseError","canRetry","setCanRetry","lastAttemptAt","timeSinceLastAttempt","formatTime","date","toLocaleTimeString","hour","minute","customOverride","warningType","errorType","isGenerating","RetryIcon","ChatInterface","chatId","messages","currentPrompt","onPromptChange","onGenerate","rateLimits","onAbort","renderWelcomeScreen","messagesEndRef","textareaRef","trimmedPrompt","canSend","canStop","borderColor","handleInputChange","cols","onInput","ev","scrollHeight","StopIcon","errorAtom","chatHistory","payload","lastAssistantIndex","findLastIndex","msg","lastMessage","updatedMessages","newMessages","useChatAgent","setChatHistory","chatHistoryAtom","addUserMessage","addMessages","addAssistantMessage","setAssistantError","errorDetails","serializedErrorDetails","updateAssistantContent","setLastRetryAttempt","chatsLoadedAtom","useTTDChatStorage","persistenceAdapter","savedChats","setSavedChats","savedChatsAtom","isLoadingChatsAtom","chatsLoaded","setChatsLoaded","savedChatsRef","lastMessageInHistory","loadChats","chats","saveCurrentChat","firstUserMessage","generateChatTitle","substring","currentSavedChats","existingChat","chat","messagesChanged","chatToSave","updatedChats","saveChats","deleteChat","restoreChat","createNewChatId","ChatHistoryMenu","onNewChat","onRestoreChat","onDeleteChat","isNewChatBtnVisible","activeSessionId","TTDChatPanel","generatedResponse","isMenuOpen","onMenuToggle","onMenuClose","onViewAsMermaid","rateLimitsAtom","getPanelActionFlexProp","onInsert","onTextSubmit","showPreview","useAtomValue","showPreviewAtom","lastAssistantMessage","getLastAssistantMessage","useMermaidRenderer","setShowPreview","isRenderingRef","lastAssistantMessageRef","lastRenderTimeRef","pendingContentRef","hasErrorOffsetRef","currentThrottleDelayRef","FAST_THROTTLE_DELAY","renderMermaid","renderStartTime","RENDER_SPEED_THRESHOLD","SLOW_THROTTLE_DELAY","throttledRenderMermaid","timeSinceLastRender","throttleDelay","isValidMermaidSyntax","openBrackets","closeBrackets","openBraces","closeBraces","openParens","closeParens","lastLine","PARSE_FAIL_DELAY","resetThrottleState","handleAbort","useTextGeneration","setRateLimits","streamingAbortControllerRef","isRepairFlow","validatePrompt","MAX_PROMPT_LENGTH","MIN_PROMPT_LENGTH","abort","abortController","AbortController","getMessagesForLLM","rateLimit","onStreamCreated","onChunk","signal","isFiniteNumber","lastMsgIdx","removeLastAssistantMessage","isAborted","aborted","_error","handleDeleteChat","handleNewChat","handleMenuToggle","handleMenuClose","useChatManagement","setIsMenuOpen","applyChatToState","restoredMessages","history","lastAssistantMsg","resetChatState","newSessionId","restoredChat","isDeletingActiveChat","nextChat","handleInsertMessage","mermaidContent","tempDataRef","handleAiRepairClick","repairPrompt","handleRetry","messageIndex","previousMessage","newPrompt","handlePromptChange","handleMermaidTabClick","handleDeleteMessage","assistantMessageIndex","messageId","remainingMessages","TTDPreviewPanel","handleInsertToEditor","TextToDiagram","TextToDiagramContent","TTDDialogTabs","rootRef","minHeightRef","modalContentNode","currHeight","minHeight","dialog","isMemberOf","TTDDialogTabTriggers","TTDDialogTabTrigger","TTDDialogTab","TTDDialog","TTDDialogBase","WelcomeMessage","setMermaidToJsonDrawLib","ElementLinkDialog","originalLink","nextLink","setNextLink","linkEdited","setLinkEdited","elementToLink","marginRight","ErrorDialog","modalIsShown","setModalIsShown","Section","ShortcutIsland","caption","Shortcut","isOr","splitShortcutKeys","endsWith","ShortcutKey","upperCaseSingleChars","intersperse","delim","first","as","HelpDialog","langCode","handleLanguageChange","nextLang","languages","lang","setLanguage","language","isWindows","ChartPreviewBtn","previewRef","chartElements","setChartElements","spreadsheet","renderSpreadsheet","chartType","previewNode","PasteChartDialog","handleChartClick","currentChartType","shown","RadioGroup","choices","choice","ariaLabel","Switch","toggled","ErrorCanvasPreview","em","ImageExportModal","appStateSnapshot","elementsSnapshot","onExportImage","projectName","setProjectName","exportSelectionOnly","setExportSelectionOnly","exportWithBackground","setExportWithBackground","exportDarkMode","setExportDarkMode","embedScene","setEmbedScene","setExportScale","renderError","setRenderError","onCopy","copyStatus","resetCopyStatus","useCopyStatus","setCopyStatus","timeoutRef","TIMEOUT","ExportSetting","actionChangeExportBackground","actionExportWithDarkMode","actionChangeExportScale","EXPORT_IMAGE_TYPES","clipboard","ImageExportDialog","COLOR_MAP","primary","base","darker","darkest","lime","pink","Card","JSONExportModal","exportOpts","onExportToBackend","getFrame","renderCustomUI","JSONExportDialog","HelpButton","header","section","FooterCenterTunnel","WelcomeScreenHelpHintTunnel","footer","ZoomActions","UndoRedoActions","ExitZenModeButton","Footer","ConditionalTooltipWrapper","shouldWrap","renderCollaborator","shouldWrapWithTooltip","avatarJSX","collaboratorComparatorKeys","UserList","mobile","uniqueCollaboratorsMap","userId","uniqueCollaboratorsArray","filteredCollaborators","userListWrapper","updateMaxAvatars","setMaxAvatars","maxAvatars","clientWidth","supportsResizeObserver","resizeObserver","ResizeObserver","contentRect","observe","disconnect","firstNAvatarsJSX","SHOW_COLLABORATORS_FILTER_AT","nextCollaboratorSocketIds","nextCollaborator","DropdownMenuItemContentRadio","LoadScene","actionLoadScene","strong","br","SaveToActiveFile","actionSaveToActiveFile","SaveAsImage","SearchMenu","Help","ClearCanvas","ToggleTheme","allowSystemTheme","ChangeCanvasBackground","Export","Socials","LiveCollaborationTrigger","PreferencesToggleToolLockItem","PreferencesToggleSnapModeItem","actionToggleObjectsSnapMode","PreferencesToggleGridModeItem","actionToggleGridMode","PreferencesToggleElementPropertiesItem","actionToggleStats","Preferences","additionalItems","PreferencesToggleZenModeItem","PreferencesToggleViewModeItem","ToggleToolLock","ToggleSnapMode","ToggleGridMode","ToggleZenMode","ToggleViewMode","ToggleElementProperties","MainMenu","MainMenuTunnel","HamburgerMenuIcon","DefaultItems","getTaggedShortcutKey","HintViewer","hints","isResizing","multiMode","shortcut_1","shortcut_2","targetElement","bindTextToElement","createFlowchart","isFlowchartNodeElement","isNodeInFlowchart","hintJSX","hint","part","shortcutMatch","LaserPointerButton","DEFAULT_SIZE","LockButton","PenModeButton","CHECKED","UNCHECKED","LoadingMessage","delay","isWaiting","setIsWaiting","HamsterLoader","searchQueryAtom","searchItemInFocusAtom","isSearching","setIsSearching","setSearchMatches","nonce","searchedQueryRef","lastSceneNonceRef","focusIndex","setFocusIndex","getSceneNonce","handleSearch","matchItems","focusedId","searchMatch","goToNextItem","goToPreviousItem","zoomValue","matchAsElement","newTextElement","nameFontSize","Assistant","isTextTiny","isElementCompletelyInViewport","FONT_SIZE_LEGIBILITY_THRESHOLD","zoomOptions","scrollToContent","animate","stableState","eventHandler","matchCount","MatchList","preview","moreBefore","previewText","indexInSearchQuery","moreAfter","highlighted","behavior","flatMap","MatchListBase","frameNameMatches","textMatches","ListItem","getMatchPreview","substrBeforeQuery","wordsBeforeQuery","isQueryCompleteBefore","startWordIndex","WORDS_BEFORE","wordsBeforeAsString","MAX_ALLOWED_CHARS","substrAfterQuery","wordsAfter","isQueryCompleteAfter","numberOfWordsToTake","WORDS_AFTER","wordsAfterAsString","getMatchedLines","lines","normalizedText","wrappedLines","normalizedLines","originalIndex","currentLine","nextLine","nextLineIndexInOriginal","j","lineIndexRanges","lineNumber","startIndex","endIndex","remainingQuery","lineIndexRange","matchCapacity","textToStart","matchedWord","lineLength","spaceToStart","getMatchInFrame","getDefaultFrameName","matchedText","prefixText","matchedMetrics","texts","frames","regex","string","exec","frameMatches","visibleIds","visibleElement","matchItem","SEARCH_DEBOUNCE","DefaultSidebarTrigger","DefaultSidebarTriggerTunnel","DefaultTabTriggers","DefaultSidebarTabTriggersTunnel","DefaultSidebar","isForceDocked","defaultSidebarDockedPreference","FixedSideContainer","SHAPE_TOOLS","LINEAR_ELEMENT_TOOLS","MobileToolBar","onHandToolToggle","isOtherShapesMenuOpen","setIsOtherShapesMenuOpen","lastActiveGenericShape","setLastActiveGenericShape","lastActiveLinearElement","setLastActiveLinearElement","handleToolChange","toolType","toolbarWidth","setToolbarWidth","showTextToolOutside","showImageToolOutside","showFrameToolOutside","extraToolSelected","extraIcon","HandButton","renderTopLeftUI","renderTopRightUI","renderSidebars","onPenModeToggle","WelcomeScreenCenterTunnel","MobileShapeActions","renderToolbar","scrolledOutside","calculateScrollCenter","renderAppTopBar","topRightUI","ExitViewModeButton","topLeftUI","onClearDrawing","DefaultOverwriteConfirmDialog","stripIrrelevantAppStateProps","LayerUI","onLockToggle","tunnels","useInitializeTunnels","tunnel","WelcomeScreenMenuHintTunnel","WelcomeScreenToolbarHintTunnel","spacing","menuTopGap","toolbarColGap","toolbarRowGap","toolbarInnerRowGap","islandPadding","collabMarginLeft","TunnelsJotaiProvider","renderJSONExportDialog","renderImageExportDialog","saveAsImage","isSidebarDocked","layerUIJSX","DefaultMainMenu","clearDrawing","swapPreviewOnAlt","ActiveConfirmDialog","MobileMenu","shouldRenderSelectedShapeActions","showSelectedShapeActions","shouldShowStats","renderSelectedShapeActions","SHAPE_ACTIONS_MENU","ShapesSwitcher","alignSelf","TOOL_TYPE","laser","UIAppStateContext","_pC","prevAppState","_nC","UnlockPopup","viewX","viewY","ElementCanvasButton","DEFAULT_TOAST_TIMEOUT","Toast","timerRef","shouldAutoClose","scheduleTimeout","AppPropsContext","editorInterfaceContextInitialValue","desktopUIMode","userAgent","createUserAgentDescriptor","navigator","EditorInterfaceContext","JsonDrawContainerContext","JsonDrawElementsContext","JsonDrawAppStateContext","JsonDrawSetAppStateContext","JsonDrawActionManagerContext","AppContext","didTapTwice","tappedTwiceTimer","firstTapPosition","isHoldingSpace","isPanning","isDraggingScrollBar","currentScrollBars","touchTimeout","invalidateContextMenu","YOUTUBE_VIDEO_STATES","IS_PLAIN_PASTE","IS_PLAIN_PASTE_TIMER","PLAIN_PASTE_TOAST_SHOWN","lastPointerUp","gesture","lastCenter","initialDistance","initialScale","App","unmounted","jsondrawContainerRef","iFrameRefs","embedsValidationStatus","initializedEmbeds","handleToastClose","elementsPendingErasure","FlowChartCreator","flowChartNavigator","FlowChartNavigator","lastPointerDownEvent","lastPointerUpEvent","lastPointerMoveEvent","previousPointerMoveCoords","laserTrails","eraserTrail","lassoTrail","onChangeEmitter","onPointerUpEmitter","onUserFollowEmitter","onScrollChangeEmitter","missingPointerEventCleanupEmitter","onRemoveEventListenersEmitter","triggerRender","previousHoveredBindableElement","getEffectiveGridSize","updateEmbeddables","iframeLikes","updated","validated","isIframeElement","getFrameNameDOMId","frameElement","frameNameBoundsCache","_cache","frameNameDiv","getElementById","box","boxSceneTopLeft","boxSceneBottomRight","resetEditingFrame","editingFrame","renderFrameNames","nonDeletedFramesLikes","getNonDeletedFramesLikes","focusedSearchMatch","f","frameNameJSX","frameName","getFrameLikeTitle","frameNameInEdit","applyDarkModeFilter","FRAME_NAME_EDIT_PADDING","nameColorDarkTheme","nameColorLightTheme","dir","autoCapitalize","autoCorrect","FRAME_NAME","nameOffsetY","nameLineHeight","MOVE","POINTER_EVENTS","handleCanvasPointerDown","onWheel","handleWheel","handleCanvasContextMenu","getSceneElementsIncludingDeleted","getSceneElementsMapIncludingDeleted","getSceneElements","magicGenerations","updateMagicGeneration","customData","generationData","magicframe","selectedMagicFrame","isMagicFrameElement","newMagicFrameElement","insertElement","onMagicFrameGenerate","openEyeDropper","shouldUpdateStrokeColor","updateScene","scheduleAction","didUpdate","addMissingFiles","replaceFiles","addNewImagesToImageCache","isNonDeletedElement","actionAppState","onUnload","disableEvent","resetHistory","resetStore","resetScene","resetLoadingState","initializeScene","launchQueue","setConsumer","launchParams","getFile","loadFileToCanvas","initialData","repairBindings","clearImageShapeCache","loadSceneFonts","isElementLink","getFormFactor","editorWidth","editorHeight","refreshEditorInterface","storedDesktopUIMode","loadDesktopUIModePreference","userAgentDescriptor","sidebarBreakpoint","dockedSidebarBreakpoint","MQ_RIGHT_SIDEBAR_MIN_WIDTH","nextEditorInterface","reconcileStylesPanelMode","nextStylesPanelMode","prevStylesPanelMode","setDesktopUIMode","nextMode","onResize","updateDOMRect","onFullscreenChange","fullscreenElement","scheduleImageRefresh","onScroll","getCanvasOffsets","SCROLL_TIMEOUT","onCut","actionCut","isJsonDrawActive","onTouchStart","isIOS","touches","resetTapTwice","TAP_TWICE_TIMEOUT","touch","pointDistance","DOUBLE_TAP_POSITION_THRESHOLD","deselectElements","handleCanvasDoubleClick","makeNextSelectedElementIds","onTouchEnd","resetContextMenuTimer","previousSelectedElementIds","isPlainPaste","HTMLCanvasElement","dataTransferList","parseDataTransferEvent","filesList","getFiles","parseClipboard","onPaste","insertClipboardContent","elementsCenterX","distance","elementsCenterY","gridX","gridY","getGridPoint","dy","retainSeed","topLayerFrame","getTopLayerFrameAtSceneCoords","eligibleElements","filterElementsEligibleAsFrameChildren","isSafari","loadElementsFonts","nextElementsToSelect","excludeElementsInFramesFromSelection","scheduleCapture","removePointer","pointerId","updateFrameRendering","outline","zoomCanvas","cancelInProgressAnimation","parseElementLinkFromURL","getElementsFromId","scroll","origScrollX","origScrollY","origZoom","easeToValuesRAF","fromValues","toValues","interpolateValue","progress","pow","onStep","onStart","onEnd","maybeUnfollowRemoteUser","translateCanvas","restoreFileFromShare","webShareTargetCache","caches","file","replaceState","APP_NAME","addFiles","addedFiles","nextFiles","fileData","_files","mimeType","restoredDataURL","getDataURL_sync","normalizeSVG","dataURLToString","dataURL","sceneData","observedAppState","getObservedAppState","applyDeltas","deltas","aggregatedDelta","squash","toggleSidebar","nextName","updateCurrentCursorPosition","toolbarBottom","sidebarRect","propertiesPanelRect","Proxy","prop","isInputLike","finishImageCropping","startImageCropping","arrowKeyPressed","createNodes","getLinkDirectionFromKey","pendingNodes","nextId","exploreByDirection","nextNode","PAGE_UP","PAGE_DOWN","handleSkipBindMode","maybeHandleArrowPointlikeDrag","resetDelayedBindMode","arrowIdsToRemove","startElementNotInSelection","endElementNotInSelection","ELEMENT_TRANSLATE_AMOUNT","ELEMENT_SHIFT_TRANSLATE_AMOUNT","isValidTextContainer","getContainerCenter","startTextEditing","SPACE","lowerCased","isPickingStroke","isPickingBackground","onKeyUp","isSelectionLikeTool","scenePointer","hoveredElement","getHoveredElementForBinding","handleDelayedBindModeChange","isSimpleArrow","calculateFixedPointForNonElbowArrowBinding","isExploring","insertElements","firstNode","isToolSupported","keepSelection","isToolIcon","isLinearElementType","onImageToolbarButtonClick","commonResets","originSnapOffset","dialogType","isTouchScreenMultiTouchGesture","getDateTime","onGestureStart","onGestureChange","onGestureEnd","insertAtParentCenter","autoEdit","shouldBindToContainer","parentCenterPosition","getTextWysiwygSnappedToCenterPosition","boundTextElementToContainer","existingTextElement","getTextElementAtPosition","getApproxMinLineWidth","getApproxMinLineHeight","newHeight","newWidth","elementCenterX","elementCenterY","DEFAULT_VERTICAL_ALIGN","getElementIndex","insertElementAtIndex","handleTextWysiwyg","isExistingElement","image","hitCoords","getSegmentMidpointHitCoords","getSegmentMidPointIndex","deleteFixedSegment","nextCoords","segmentMidpoint","added","hitElement","getElementAtPosition","getSelectedGroupIdForElement","isIframeLikeElement","getTextBindableContainerAtPosition","getElementHitThreshold","getElementLinkAtPosition","hitElementMightBeLocked","hitElementIndex","isPointHittingLink","redirectToLink","draggedDistance","hitLinkElement","lastPointerDownCoords","lastPointerDownHittingLinkIcon","lastPointerUpCoords","lastPointerUpHittingLinkIcon","newWindow","opener","isCursorInFrame","handleCanvasPointerMove","activeToolType","savePointer","scenePointerX","scenePointerY","deltaX","deltaY","getDistance","scaleFactor","zoomState","resetShouldCacheIgnoreZoomDebounced","isOverScrollBar","isActiveToolNonLinearSnappable","rectangle","diamond","originOffset","getSnapLinesAtPointer","referenceElements","horizontalSnapLines","verticalSnapLines","referenceElement","corner","getElementsCorners","corners","nextSnapLines","updateStable","nextOriginOffset","handlePointerMoveInEditMode","isBindingElementType","maxBindingDistance_simple","getSnapOutlineMidPoint","ry","LINE_CONFIRM_THRESHOLD","POINTER","hit","hasDeselectedButton","buttons","transformHandleType","getTransformHandleTypeFromCoords","getCursorForResizingElement","handleHoverSelectedLinearElement","isMobileDevice","elementWithTransformHandleType","getElementWithTransformHandleType","preferSelected","includeLockedElements","renderTooltip","tooltipDiv","linkX","linkY","linkWidth","linkHeight","getLinkHandleFromCoords","linkViewportCoords","updateTooltipPosition","HYPERLINK_TOOLTIP_DELAY","TEXT","isHittingCommonBoundingBoxOfSelectedElements","isIframeLikeElementCenter","handleEraser","handleTouchMove","setPointerCapture","maybeCleanupAfterMissingPointerUp","updateGestureOnPointerDown","obj","getSelection","anchorNode","removeAllRanges","maybeOpenContextMenuAfterPointerDownOnTouchDevices","handleCanvasPanUsingWheelOrSpaceDrag","POINTER_BUTTON","ERASER","eraser","unsubCleanup","unsubPointerUp","once","MAIN","TOUCH","pointerDownState","initialPointerDownState","handleDraggingScrollBar","clearSelectionIfNotUsingSelection","updateBindingEnabledOnPointerMove","handleSelectionOnPointerDown","allowOnPointerDown","hitSelectedElement","isASelectedElement","hasHitCommonBoundingBoxOfSelectedElements","handleType","drag","blockDragging","previouslySelectedElements","framesInGroups","wasAddedToSelection","handleTextOnPointerDown","handleLinearElementOnPointerDown","handleFreeDrawElementOnPointerDown","createFrameElementOnPointerDown","lastCoords","createGenericElementOnPointerDown","onPointerMoveFromPointerDownHandler","onPointerUpFromPointerDownHandler","onKeyDownFromPointerDownHandler","onKeyUpFromPointerDownHandler","eventListeners","onMove","onUp","handleCanvasPointerUp","clicklength","timeStamp","handleEmbeddableCenterClick","isPointHittingLinkIcon","TOUCH_CTX_MENU_TIMEOUT","WHEEL","nextPastePrevented","isLinux","platform","GRABBING","lastX","lastY","withBatchedUpdatesThrottled","preventNextPaste","PASTE","enableNextPaste","teardown","resize","tupleToCoors","getResizeOffsetXY","arrowDirection","getResizeArrowDirection","handlePointerDown","didAddPoint","hitFocusPoint","handleFocusPointPointerDown","allHitElements","getElementsAtPosition","unlockedHitElements","someHitElementIsSelected","clearSelection","editGroupForSelectedElement","simulatePressure","newFreeDrawElement","pressures","insertIframeElement","newIframeElement","getCurrentItemRoundness","insertEmbeddableElement","newEmbeddableElement","newImagePlaceholder","addToFrameUnderCursor","placeholderSize","newImageElement","hoveredElementForBinding","initialBinding","endIdx","arrowStartIsInside","baseElementAttributes","constructorOpts","restoreReadyToEraseElements","eraseElements","didChange","bindable","initializeImage","placeholderImageElement","imageFile","isSupportedImageFile","SVGStringToFile","fileId","generateIdForFile","generateIdFromFile","existingFileData","DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT","MAX_ALLOWED_FILE_BYTES","maxSize","trunc","getDataURL","initializedImageElement","getLatestInitializedImageElement","lastRetrieved","erroredFiles","updateImageCache","imageHTML","naturalDimensions","getImageNaturalDimensions","imagePlaceholder","latestImageElement","imageFiles","extensions","IMAGE_MIME_TYPES","multiple","insertImages","imageElement","updatedFiles","_updateImageCache","fileIds","isInitializedImageElement","imageElements","getInitializedImageElements","uncachedImageElements","IMAGE_RENDER_TIMEOUT","shouldEnableBinding","shouldEnableBindingForPointerEvent","handleInteractiveCanvasRef","TOUCH_END","gridPadding","placeholders","positionElementsOnGrid","all","normalizeFile","initializedMap","positioned","positionedMap","handleAppOnDrop","fileItems","loadFromBlob","jsondrawLibrary_ids","getData","jsondrawLibrary_data","jsondrawlib","allLibraryItems","parseLibraryJSON","textItem","findByType","embeddable","loadSceneOrLibraryFromBlob","imageSceneDataError","ImageSceneDataError","syncInvalidIndices","SECONDARY","isHittingCommonBoundBox","getContextMenuItems","maybeDragNewGenericElement","boxSelection","hasOccurred","dragNewElement","originX","originY","maybeCacheReferenceSnapPoints","snapNewElement","originInGrid","widthAspectRatio","maybeHandleCrop","croppingAtStateStart","cropElement","maybeHandleResize","selectedFrames","resizeX","resizeY","frameElementsOffsetsMap","transformElements","actionCopyAsPng","actionPaste","actionSelectAll","copyText","actionUnlockAllElements","zIndexActions","actionSendBackward","actionBringForward","actionSendToBack","actionBringToFront","actionRemoveAllElementsFromFrame","actionToggleCropEditor","actionCopyStyles","actionUnbindText","actionBindText","actionUngroup","actionFlipVertical","actionDuplicateSelection","HTMLTextAreaElement","HTMLIFrameElement","MAX_STEP","absDelta","newZoom","log10","onPointerUpdate","pointersMap","currentWidth","currentHeight","currentOffsetTop","currentOffsetLeft","refresh","watchState","defaultAppState","jsondrawAPI","nanoid","Scene","rough","renderer","Store","getEditorInterface","onIncrement","onStoreIncrementEmitter","onScrollChange","onUserFollow","createUndoAction","executeHistoryAction","matchKey","createRedoAction","__","Y","onWindowMessage","iframes","querySelectorAll","iframe","contentWindow","postMessage","info","playerState","YOUTUBE_STATES","handlePointDragging","effector","startDragged","endDragged","isOverlapping","currentBinding","otherBinding","isAlreadyInsideBindingToSameElement","cacheEmbeddableRef","getHTMLIFrameElement","UNSTARTED","PLAYING","BUFFERING","embeddableElements","isVisible","hasBeenInitialized","html","srcdoc","createSrcDoc","red","toValidURL","getRenderOpacity","getContainingFrame","DEFAULT_REDUCED_GLOBAL_ALPHA","getCornerRadius","renderEmbeddable","srcDoc","scrolling","allow","allowFullScreen","sandbox","allowSameOrigin","toggleOverscrollBehavior","overscrollBehaviorX","render","shouldBlockPointerEvents","prototype","firstSelectedElement","showShapeSwitchPanel","onDrop","handleKeyboardGlobally","showWelcomeScreen","onIframeSrcCopy","requestFullscreen","StaticCanvas","isExporting","renderGrid","canvasBackgroundColor","pendingFlowchartNodes","InteractiveCanvas","setPlugins","magicFrame","generateDiagramToCode","generate","magicFrameChildren","getElementsOverlappingFrame","parsedHtml","filesMap","componentDidMount","isTestEnv","defineProperties","configurable","onDurableIncrementEmitter","increment","record","onUpdate","addEventListeners","URLSearchParams","search","isBrave","isMeasureTextSupported","componentWillUnmount","removeEventListeners","clearCache","MESSAGE","COPY","fontfaces","GESTURE_START","GESTURE_CHANGE","GESTURE_END","FOCUS","FULLSCREENCHANGE","CUT","RESIZE","UNLOAD","DRAG_OVER","DROP","detectScroll","getNearestScrollableContainer","SCROLL","componentDidUpdate","updateLanguage","commit","dataTransferFiles","mixedContent","addElementsFromMixedContentPaste","trimmedText","programmaticAPI","isMaybeMermaidDefinition","chartTypes","skeletonElements","nonEmptyLines","normalizeEOL","embbeddableUrls","maybeParseEmbedSrc","embeddables","prevEmbeddable","addTextFromPaste","imageURLs","responses","ImageURLToFile","cause","textNodes","textElementProps","getVisibleSceneBounds","maxTextWidth","currentY","textElements","normalizeText","isTextUnwrapped","startX","startY","LINE_GAP","getLineHeightInPx","updateElement","nextOriginalText","refreshTextDimensions","textWysiwyg","getViewportCoords","autoSelect","LAST_THEME","updateWysiwygStyle","updatedTextElement","coordX","coordY","originalContainerData","boundTextCoords","getBoundTextElementPosition","textPropertiesUpdated","currentFont","originalContainerCache","targetContainerHeight","editorMaxHeight","getTransform","degree","translateX","translateY","getTextElementAngle","dataset","wrap","wordBreak","backfaceVisibility","overflowWrap","boxSizing","onpaste","mimeTypes","parseDataTransferEventMimeTypes","dataList","jsondrawClipboard","dispatchEvent","Event","getTextWidth","oninput","normalized","onkeydown","actionZoomIn","actionZoomOut","actionIncreaseFontSize","submittedViaKeyboard","outdent","indent","repeat","TAB_SIZE","RE_LEADING_TAB","linesStartIndices","getSelectedLinesStartIndices","endValue","removedTabs","tabMatch","startOffset","startIndices","reverse","stopEvent","isDestroyed","cleanup","boundTextElementId","viaKeyboard","observer","bindBlurEvent","unbindUpdate","unsubOnChange","unbindOnScroll","isPropertiesTrigger","isPropertiesContent","SVGElement","inShapeActionsMenu","temporarilyDisableSubmit","isPopupOpened","onpointerdown","elementIdToSelect","elementWithHighestZIndex","frameNameBound","containingFrame","DEFAULT_COLLISION_THRESHOLD","considerBoundingBox","hitElementBoundText","getPointIndexUnderCursor","isHoveringAPointHandle","arePointsEqual","handleFocusPointHover","isElbowArrowOnly","withCmdOrCtrl","scrollbars","hasBeenDuplicated","handlePointerMoveOverScrollbars","recomputeAnyways","getReferenceElements","getMaximumGroups","elementsGroup","elementGroup","maybeCacheVisibleGaps","referenceBounds","horizontallySorted","VISIBLE_GAPS_LIMIT_PER_AXIS","startMaxX","endMinX","endMinY","startMaxY","endSide","rangeIntersection","verticallySorted","moveFixedSegment","lastPointerCoords","getDragOffsetXY","handleFocusPointDrag","shouldAddMidpoint","addMidpoint","customLineAngle","altFocusPoint","hasHitASelectedElement","isSelectingPointsInLineEditor","selectedElementsHasAFrame","lockDirection","distanceX","distanceY","lockX","lockY","uncroppedSize","instantDragOffset","vector","vectorFromPoint","topEdge","vectorNormalize","vectorSubtract","leftEdge","offsetVector","vectorDot","snapDraggedElements","selectionPoints","newDragOffset","gapSnaps","gapSnapLines","gapSnap","verticalIntersection","horizontalGapIntersection","gapLineY","gapLineX","gapSnapLine","dragSelectedElements","duplicateElementsMap","duplicateElement","mappedClonedElements","origEl","mappedNewSceneElements","elementsWithIndices","cloneId","clonedElement","origHitElement","other","indirectArrowUpdate","dx","handleBoxSelection","shouldReuseSelection","elementsWithinSelection","getElementsWithinSelection","childEvent","hitElements","hitLockedElement","handleFocusPointPointerUp","selectedELements","dragDistance","MINIMUM_ARROW_SIZE","FIXED_DELTA_X","getMinTextElementWidth","elementsInsideFrame","getElementsInNewFrame","getNormalizedDimensions","elementOverlapsWithFrame","updateGroupIdsAfterEditingGroup","elementsToAdd","isElementInFrame","elementsToRemove","pointerStart","pointerEnd","_prevState","groupedElement","gId","newSelectedElementIds","newSelectedElements","hitElementBoundingBoxOnly","elementCenter","isSnappedToCenter","distanceToCenter","TEXT_TO_CENTER_SNAP_THRESHOLD","currentLang","defaultLang","InitializeApp","loading","setLoading","updateLang","LogoIcon","xmlns","LogoText","JsonDrawLogo","withText","WelcomeScreenMenuItemContent","WelcomeScreenMenuItem","WelcomeScreenMenuItemLink","Center","Logo","Heading","Menu","MenuItemLoadScene","MenuItemHelp","MenuItemLiveCollaborationTrigger","MenuItem","MenuItemLink","MenuHint","WelcomeScreenMenuArrow","ToolbarHint","WelcomeScreenTopToolbarArrow","HelpHint","WelcomeScreenHelpArrow","WelcomeScreen","orderedElements","localElements","remoteElements","DEBUG_FRACTIONAL_INDICES","validateFractionalIndices","shouldThrow","includeBoundTextValidation","reconciliationContext","leading","defineProperty","n","writable","enumerable","nodes","JsonDraw","DEFAULT_UI_OPTIONS","importPolyfill","EditorJotaiProvider","prevInitialData","prevUIOptions","nextInitialData","nextUIOptions","prevUIOptionsKeys","nextUIOptionsKeys"],"sourceRoot":"","ignoreList":[]}