{"version":3,"file":"static/chunks/pages/widget-cb308b7b302c9639.js","mappings":"6HAkBA,wCAA8C,GAA0B,CACxE,0BACA,CAAC,EACD,SAAgC,cAAQ,CACxC,IATA,8CACA,kBAQA,GARA,SAmBA,MATE,eAAS,MACX,IACA,2BACA,iBAxBA,EAyBA,gBAxBA,IAEA,OAsBA,EAvBA,6BACA,qCACA,CAAI,SAEJ,OAmBA,EApBA,eACA,uBACA,CAmBA,CAAM,SACN,MACA,CACA,CAAG,MACH,KACA,mBCjCA,4CACA,UACA,WACA,OAAe,EAAQ,KAA+B,CACtD,EACA,SAFsB,6MCmBtB,IAAMA,EAAkBC,IAAQ,IAAM,iJAA4C,0CAChFC,KAAK,IAGDC,EAAYF,IAChB,IAAM,+NAA4C,CAACG,IAAI,CAACC,GAAKA,EAAEF,SAAS,2CAEtED,KAAK,IAuDT,EAnDmB,KACjB,GAAM,OAAEI,CAAK,MAAEC,CAAI,KAkDNC,IAlDQC,CAAO,CAAE,CAAGC,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,GACpC,gBAAEC,CAAc,CAAE,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,CAAqBA,GAC1C,CAACC,EAAOC,EAAS,CAAGC,EAAAA,QAAc,CAAmB,QACrDC,EAAqBC,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACC,GAASA,EAAMF,kBAAkB,EAC9DG,EAAcF,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACC,GAASA,EAAMC,WAAW,EAChDC,EAAeC,CAAAA,EAAAA,EAAAA,CAAAA,CAAQA,CAACH,GAASA,EAAME,YAAY,EACnDE,EAAaD,CAAAA,EAAAA,EAAAA,CAAAA,CAAQA,CAACH,GAASA,EAAMI,UAAU,EAmCrD,OAjCAP,EAAAA,SAAe,CAAC,KACVN,IACyB,KADhB,KACP,OAAOH,GAAOiB,KAAmBP,EAAmBV,EAAMiB,IAAI,EAAE,GAC/DD,IAELE,OAAOC,MAAM,CAACC,WAAW,CAACF,OAAOG,YAAY,EAAEC,aAAa,MAAO,KAEvE,EAAG,CAACN,EAAYN,EAAoBP,EAASF,EAAMD,EAAMiB,IAAI,CAAEjB,EAAMuB,OAAO,CAAC,EAE7Ed,EAAAA,SAAe,CAAC,KACd,IAAMe,EAAU,IACd,GAAI,CACF,GAAI,CAACC,EAAMC,IAAI,EAAET,KAAM,QACnBQ,EAAMC,IAAI,EAAEC,SAASpB,QAAU,SAAWkB,EAAMC,IAAI,EAAEC,SAASpB,QAAU,SAAQ,EAC1EkB,EAAMC,IAAI,CAACC,OAAO,CAACpB,KAAK,EAGnCM,EAAY,CAAEe,SAAUH,EAAMC,IAAI,CAACT,IAAI,CAAEY,WAAY,EAAM,GAC3Df,EAAaW,EAAMC,IAAI,CAACC,OAAO,EAAEG,WAAa,QAChD,CAAE,MAAOC,EAAO,CACdC,QAAQD,KAAK,CAACA,GACdE,EAAAA,EAAKA,CAACF,KAAK,CAAC,gBACd,CACF,EAGA,OADAb,OAAOgB,gBAAgB,CAAC,UAAWV,GAC5B,IAAMN,OAAOiB,mBAAmB,CAAC,UAAWX,EACrD,EAAG,CAACnB,EAAgBQ,EAAaC,EAAcP,EAAM,EAErDE,EAAAA,SAAe,CAAC,KACdJ,EAAeE,EACjB,EAAG,CAACF,EAAgBE,EAAM,EAGxB,WAAC6B,EAAAA,EAAaA,CAAAA,CAAC7B,MAAiB,SAAVA,EAAmB8B,EAAAA,EAASA,CAAGC,EAAAA,EAAUA,WAC7D,UAACC,IAAIA,UAAEC,CAAAA,EAAAA,EAAAA,CAAAA,CAAeA,CAAC,CAAEC,SAAS,EAAMC,UAAU,CAAK,IAAlDH,CACL,UAAC7C,EAAAA,CAAAA,GACD,UAACG,EAAAA,CAAU8C,QAAQ,QAGzB,iDClFA,WACA","sources":["webpack://_N_E/./node_modules/@mantine/hooks/esm/use-media-query/use-media-query.mjs","webpack://_N_E/?acfb","webpack://_N_E/./src/pages/widget.tsx","webpack://_N_E/./node_modules/@mantine/core/esm/core/utils/noop/noop.mjs"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\n\nfunction attachMediaListener(query, callback) {\n  try {\n    query.addEventListener(\"change\", callback);\n    return () => query.removeEventListener(\"change\", callback);\n  } catch (e) {\n    query.addListener(callback);\n    return () => query.removeListener(callback);\n  }\n}\nfunction getInitialValue(query, initialValue) {\n  if (typeof window !== \"undefined\" && \"matchMedia\" in window) {\n    return window.matchMedia(query).matches;\n  }\n  return false;\n}\nfunction useMediaQuery(query, initialValue, { getInitialValueInEffect } = {\n  getInitialValueInEffect: true\n}) {\n  const [matches, setMatches] = useState(\n    getInitialValueInEffect ? initialValue : getInitialValue(query)\n  );\n  useEffect(() => {\n    try {\n      const mediaQuery = window.matchMedia(query);\n      setMatches(mediaQuery.matches);\n      return attachMediaListener(mediaQuery, (event) => setMatches(event.matches));\n    } catch (e) {\n      return void 0;\n    }\n  }, [query]);\n  return matches || false;\n}\n\nexport { useMediaQuery };\n//# sourceMappingURL=use-media-query.mjs.map\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/widget\",\n      function () {\n        return require(\"private-next-pages/widget.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/widget\"])\n      });\n    }\n  ","import React from \"react\";\nimport dynamic from \"next/dynamic\";\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport { useMantineColorScheme } from \"@mantine/core\";\nimport { ThemeProvider } from \"styled-components\";\nimport { generateNextSeo } from \"next-seo/pages\";\nimport toast from \"react-hot-toast\";\nimport { darkTheme, lightTheme } from \"../constants/theme\";\nimport useGraph from \"../features/editor/views/GraphView/stores/useGraph\";\nimport useFile from \"../store/useFile\";\nimport type { LayoutDirection } from \"../types/graph\";\n\ninterface EmbedMessage {\n  data: {\n    json?: string;\n    options?: {\n      theme?: \"light\" | \"dark\";\n      direction?: LayoutDirection;\n    };\n  };\n}\n\nconst ModalController = dynamic(() => import(\"../features/modals/ModalController\"), {\n  ssr: false,\n});\n\nconst GraphView = dynamic(\n  () => import(\"../features/editor/views/GraphView\").then(c => c.GraphView),\n  {\n    ssr: false,\n  }\n);\n\nconst WidgetPage = () => {\n  const { query, push, isReady } = useRouter();\n  const { setColorScheme } = useMantineColorScheme();\n  const [theme, setTheme] = React.useState<\"dark\" | \"light\">(\"dark\");\n  const checkEditorSession = useFile(state => state.checkEditorSession);\n  const setContents = useFile(state => state.setContents);\n  const setDirection = useGraph(state => state.setDirection);\n  const clearGraph = useGraph(state => state.clearGraph);\n\n  React.useEffect(() => {\n    if (isReady) {\n      if (typeof query?.json === \"string\") checkEditorSession(query.json, true);\n      else clearGraph();\n\n      window.parent.postMessage(window.frameElement?.getAttribute(\"id\"), \"*\");\n    }\n  }, [clearGraph, checkEditorSession, isReady, push, query.json, query.partner]);\n\n  React.useEffect(() => {\n    const handler = (event: EmbedMessage) => {\n      try {\n        if (!event.data?.json) return;\n        if (event.data?.options?.theme === \"light\" || event.data?.options?.theme === \"dark\") {\n          setTheme(event.data.options.theme);\n        }\n\n        setContents({ contents: event.data.json, hasChanges: false });\n        setDirection(event.data.options?.direction || \"RIGHT\");\n      } catch (error) {\n        console.error(error);\n        toast.error(\"Invalid JSON!\");\n      }\n    };\n\n    window.addEventListener(\"message\", handler);\n    return () => window.removeEventListener(\"message\", handler);\n  }, [setColorScheme, setContents, setDirection, theme]);\n\n  React.useEffect(() => {\n    setColorScheme(theme);\n  }, [setColorScheme, theme]);\n\n  return (\n    <ThemeProvider theme={theme === \"dark\" ? darkTheme : lightTheme}>\n      <Head>{generateNextSeo({ noindex: true, nofollow: true })}</Head>\n      <ModalController />\n      <GraphView isWidget />\n    </ThemeProvider>\n  );\n};\n\nexport default WidgetPage;\n","'use client';\nconst noop = () => {\n};\n\nexport { noop };\n//# sourceMappingURL=noop.mjs.map\n"],"names":["ModalController","dynamic","ssr","GraphView","then","c","query","push","WidgetPage","isReady","useRouter","setColorScheme","useMantineColorScheme","theme","setTheme","React","checkEditorSession","useFile","state","setContents","setDirection","useGraph","clearGraph","json","window","parent","postMessage","frameElement","getAttribute","partner","handler","event","data","options","contents","hasChanges","direction","error","console","toast","addEventListener","removeEventListener","ThemeProvider","darkTheme","lightTheme","Head","generateNextSeo","noindex","nofollow","isWidget"],"sourceRoot":"","ignoreList":[0,3]}