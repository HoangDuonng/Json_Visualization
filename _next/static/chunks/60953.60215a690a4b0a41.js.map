{"version":3,"file":"static/chunks/60953.60215a690a4b0a41.js","mappings":"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","sources":["webpack://_N_E/./src/jsondraw/packages/jsondraw/components/ui/HamsterLoader.tsx","webpack://_N_E/./src/features/editor/TextEditor.tsx"],"sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nconst HamsterLoader = () => {\n  return (\n    <StyledWrapper>\n      <div\n        aria-label=\"Orange and tan hamster running in a metal wheel\"\n        role=\"img\"\n        className=\"wheel-and-hamster\"\n      >\n        <div className=\"wheel\" />\n        <div className=\"hamster\">\n          <div className=\"hamster__body\">\n            <div className=\"hamster__head\">\n              <div className=\"hamster__ear\" />\n              <div className=\"hamster__eye\" />\n              <div className=\"hamster__nose\" />\n            </div>\n            <div className=\"hamster__limb hamster__limb--fr\" />\n            <div className=\"hamster__limb hamster__limb--fl\" />\n            <div className=\"hamster__limb hamster__limb--br\" />\n            <div className=\"hamster__limb hamster__limb--bl\" />\n            <div className=\"hamster__tail\" />\n          </div>\n        </div>\n        <div className=\"spoke\" />\n      </div>\n    </StyledWrapper>\n  );\n};\n\nconst StyledWrapper = styled.div`\n  .wheel-and-hamster {\n    --dur: 1s;\n    position: relative;\n    width: 12em;\n    height: 12em;\n    font-size: 14px;\n  }\n\n  .wheel,\n  .hamster,\n  .hamster div,\n  .spoke {\n    position: absolute;\n  }\n\n  .wheel,\n  .spoke {\n    border-radius: 50%;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  .wheel {\n    background: radial-gradient(\n      100% 100% at center,\n      hsla(0, 0%, 60%, 0) 47.8%,\n      hsl(0, 0%, 60%) 48%\n    );\n    z-index: 2;\n  }\n\n  .hamster {\n    animation: hamster var(--dur) ease-in-out infinite;\n    top: 50%;\n    left: calc(50% - 3.5em);\n    width: 7em;\n    height: 3.75em;\n    transform: rotate(4deg) translate(-0.8em, 1.85em);\n    transform-origin: 50% 0;\n    z-index: 1;\n  }\n\n  .hamster__head {\n    animation: hamsterHead var(--dur) ease-in-out infinite;\n    background: hsl(30, 90%, 55%);\n    border-radius: 70% 30% 0 100% / 40% 25% 25% 60%;\n    box-shadow:\n      0 -0.25em 0 hsl(30, 90%, 80%) inset,\n      0.75em -1.55em 0 hsl(30, 90%, 90%) inset;\n    top: 0;\n    left: -2em;\n    width: 2.75em;\n    height: 2.5em;\n    transform-origin: 100% 50%;\n  }\n\n  .hamster__ear {\n    animation: hamsterEar var(--dur) ease-in-out infinite;\n    background: hsl(0, 90%, 85%);\n    border-radius: 50%;\n    box-shadow: -0.25em 0 hsl(30, 90%, 55%) inset;\n    top: -0.25em;\n    right: -0.25em;\n    width: 0.75em;\n    height: 0.75em;\n    transform-origin: 50% 75%;\n  }\n\n  .hamster__eye {\n    animation: hamsterEye var(--dur) linear infinite;\n    background-color: hsl(0, 0%, 0%);\n    border-radius: 50%;\n    top: 0.375em;\n    left: 1.25em;\n    width: 0.5em;\n    height: 0.5em;\n  }\n\n  .hamster__nose {\n    background: hsl(0, 90%, 75%);\n    border-radius: 35% 65% 85% 15% / 70% 50% 50% 30%;\n    top: 0.75em;\n    left: 0;\n    width: 0.2em;\n    height: 0.25em;\n  }\n\n  .hamster__body {\n    animation: hamsterBody var(--dur) ease-in-out infinite;\n    background: hsl(30, 90%, 90%);\n    border-radius: 50% 30% 50% 30% / 15% 60% 40% 40%;\n    box-shadow:\n      0.1em 0.75em 0 hsl(30, 90%, 55%) inset,\n      0.15em -0.5em 0 hsl(30, 90%, 80%) inset;\n    top: 0.25em;\n    left: 2em;\n    width: 4.5em;\n    height: 3em;\n    transform-origin: 17% 50%;\n    transform-style: preserve-3d;\n  }\n\n  .hamster__limb--fr,\n  .hamster__limb--fl {\n    clip-path: polygon(0 0, 100% 0, 70% 80%, 60% 100%, 0% 100%, 40% 80%);\n    top: 2em;\n    left: 0.5em;\n    width: 1em;\n    height: 1.5em;\n    transform-origin: 50% 0;\n  }\n\n  .hamster__limb--fr {\n    animation: hamsterFRLimb var(--dur) linear infinite;\n    background: linear-gradient(hsl(30, 90%, 80%) 80%, hsl(0, 90%, 75%) 80%);\n    transform: rotate(15deg) translateZ(-1px);\n  }\n\n  .hamster__limb--fl {\n    animation: hamsterFLLimb var(--dur) linear infinite;\n    background: linear-gradient(hsl(30, 90%, 90%) 80%, hsl(0, 90%, 85%) 80%);\n    transform: rotate(15deg);\n  }\n\n  .hamster__limb--br,\n  .hamster__limb--bl {\n    border-radius: 0.75em 0.75em 0 0;\n    clip-path: polygon(0 0, 100% 0, 100% 30%, 70% 90%, 70% 100%, 30% 100%, 40% 90%, 0% 30%);\n    top: 1em;\n    left: 2.8em;\n    width: 1.5em;\n    height: 2.5em;\n    transform-origin: 50% 30%;\n  }\n\n  .hamster__limb--br {\n    animation: hamsterBRLimb var(--dur) linear infinite;\n    background: linear-gradient(hsl(30, 90%, 80%) 90%, hsl(0, 90%, 75%) 90%);\n    transform: rotate(-25deg) translateZ(-1px);\n  }\n\n  .hamster__limb--bl {\n    animation: hamsterBLLimb var(--dur) linear infinite;\n    background: linear-gradient(hsl(30, 90%, 90%) 90%, hsl(0, 90%, 85%) 90%);\n    transform: rotate(-25deg);\n  }\n\n  .hamster__tail {\n    animation: hamsterTail var(--dur) linear infinite;\n    background: hsl(0, 90%, 85%);\n    border-radius: 0.25em 50% 50% 0.25em;\n    box-shadow: 0 -0.2em 0 hsl(0, 90%, 75%) inset;\n    top: 1.5em;\n    right: -0.5em;\n    width: 1em;\n    height: 0.5em;\n    transform: rotate(30deg) translateZ(-1px);\n    transform-origin: 0.25em 0.25em;\n  }\n\n  .spoke {\n    animation: spoke var(--dur) linear infinite;\n    background:\n      radial-gradient(100% 100% at center, hsl(0, 0%, 60%) 4.8%, hsla(0, 0%, 60%, 0) 5%),\n      linear-gradient(hsla(0, 0%, 55%, 0) 46.9%, hsl(0, 0%, 65%) 47% 52.9%, hsla(0, 0%, 65%, 0) 53%)\n        50% 50% / 99% 99% no-repeat;\n  }\n\n  @keyframes hamster {\n    from,\n    to {\n      transform: rotate(4deg) translate(-0.8em, 1.85em);\n    }\n\n    50% {\n      transform: rotate(0) translate(-0.8em, 1.85em);\n    }\n  }\n\n  @keyframes hamsterHead {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(0);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(8deg);\n    }\n  }\n\n  @keyframes hamsterEye {\n    from,\n    90%,\n    to {\n      transform: scaleY(1);\n    }\n\n    95% {\n      transform: scaleY(0);\n    }\n  }\n\n  @keyframes hamsterEar {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(0);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(12deg);\n    }\n  }\n\n  @keyframes hamsterBody {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(0);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(-2deg);\n    }\n  }\n\n  @keyframes hamsterFRLimb {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(50deg) translateZ(-1px);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(-30deg) translateZ(-1px);\n    }\n  }\n\n  @keyframes hamsterFLLimb {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(-30deg);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(50deg);\n    }\n  }\n\n  @keyframes hamsterBRLimb {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(-60deg) translateZ(-1px);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(20deg) translateZ(-1px);\n    }\n  }\n\n  @keyframes hamsterBLLimb {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(20deg);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(-60deg);\n    }\n  }\n\n  @keyframes hamsterTail {\n    from,\n    25%,\n    50%,\n    75%,\n    to {\n      transform: rotate(30deg) translateZ(-1px);\n    }\n\n    12.5%,\n    37.5%,\n    62.5%,\n    87.5% {\n      transform: rotate(10deg) translateZ(-1px);\n    }\n  }\n\n  @keyframes spoke {\n    from {\n      transform: rotate(0);\n    }\n\n    to {\n      transform: rotate(-1turn);\n    }\n  }\n`;\n\nexport default HamsterLoader;\n","import React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport Editor, { type EditorProps, loader, type OnMount, useMonaco } from \"@monaco-editor/react\";\nimport HamsterLoader from \"../../jsondraw/packages/jsondraw/components/ui/HamsterLoader\";\nimport useConfig from \"../../store/useConfig\";\nimport useFile from \"../../store/useFile\";\n\nloader.config({\n  paths: {\n    vs: \"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/vs\",\n  },\n});\n\nconst editorOptions: EditorProps[\"options\"] = {\n  formatOnPaste: true,\n  tabSize: 2,\n  formatOnType: true,\n  minimap: { enabled: false },\n  stickyScroll: { enabled: false },\n  scrollBeyondLastLine: false,\n  placeholder: \"Start typing...\",\n};\n\nconst TextEditor = () => {\n  const monaco = useMonaco();\n  const contents = useFile(state => state.contents);\n  const setContents = useFile(state => state.setContents);\n  const setError = useFile(state => state.setError);\n  const jsonSchema = useFile(state => state.jsonSchema);\n  const getHasChanges = useFile(state => state.getHasChanges);\n  const theme = useConfig(state => (state.darkmodeEnabled ? \"vs-dark\" : \"light\"));\n  const fileType = useFile(state => state.format);\n\n  React.useEffect(() => {\n    monaco?.languages.json.jsonDefaults.setDiagnosticsOptions({\n      validate: true,\n      allowComments: true,\n      enableSchemaRequest: true,\n      ...(jsonSchema && {\n        schemas: [\n          {\n            uri: \"http://myserver/foo-schema.json\",\n            fileMatch: [\"*\"],\n            schema: jsonSchema,\n          },\n        ],\n      }),\n    });\n  }, [jsonSchema, monaco?.languages.json.jsonDefaults]);\n\n  React.useEffect(() => {\n    const beforeunload = (e: BeforeUnloadEvent) => {\n      if (getHasChanges()) {\n        const confirmationMessage =\n          \"Unsaved changes, if you leave before saving  your changes will be lost\";\n\n        (e || window.event).returnValue = confirmationMessage; //Gecko + IE\n        return confirmationMessage;\n      }\n    };\n\n    window.addEventListener(\"beforeunload\", beforeunload);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", beforeunload);\n    };\n  }, [getHasChanges]);\n\n  const handleMount: OnMount = useCallback(editor => {\n    editor.onDidPaste(() => {\n      editor.getAction(\"editor.action.formatDocument\")?.run();\n    });\n  }, []);\n\n  return (\n    <StyledEditorWrapper>\n      <StyledWrapper>\n        <Editor\n          height=\"100%\"\n          language={fileType}\n          theme={theme}\n          value={contents}\n          options={editorOptions}\n          onMount={handleMount}\n          onValidate={errors => setError(errors[0]?.message || \"\")}\n          onChange={contents => setContents({ contents, skipUpdate: true })}\n          loading={\n            <LoadingFallback>\n              <HamsterLoader />\n            </LoadingFallback>\n          }\n        />\n      </StyledWrapper>\n    </StyledEditorWrapper>\n  );\n};\n\nexport default TextEditor;\n\nconst StyledEditorWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  user-select: none;\n`;\n\nconst StyledWrapper = styled.div`\n  display: grid;\n  height: 100%;\n  grid-template-columns: 100%;\n  grid-template-rows: minmax(0, 1fr);\n`;\n\nconst LoadingFallback = styled.div`\n  display: grid;\n  place-items: center;\n  height: 100%;\n  width: 100%;\n`;\n"],"names":["StyledWrapper","styled","div","HamsterLoader","aria-label","role","className","loader","config","paths","vs","editorOptions","formatOnPaste","tabSize","formatOnType","minimap","enabled","stickyScroll","scrollBeyondLastLine","placeholder","monaco","useMonaco","contents","useFile","TextEditor","state","setContents","setError","jsonSchema","getHasChanges","theme","useConfig","darkmodeEnabled","fileType","format","React","languages","json","jsonDefaults","setDiagnosticsOptions","validate","allowComments","enableSchemaRequest","schemas","uri","fileMatch","schema","beforeunload","confirmationMessage","e","window","event","returnValue","addEventListener","removeEventListener","handleMount","useCallback","editor","onDidPaste","getAction","run","StyledEditorWrapper","Editor","height","language","value","options","onMount","onValidate","errors","message","onChange","skipUpdate","loading","LoadingFallback"],"sourceRoot":"","ignoreList":[]}