{"version":3,"file":"static/chunks/60953.6ec48d234c0aac09.js","mappings":"6MAOAA,EAAAA,EAAMA,CAACC,MAAM,CAAC,CACZC,MAAO,CACLC,GAAI,oEACN,CACF,GAEA,IAAMC,EAAwC,CAC5CC,eAAe,EACfC,QAAS,EACTC,aAAc,GACdC,QAAS,CAAEC,SAAS,CAAM,EAC1BC,aAAc,CAAED,SAAS,CAAM,EAC/BE,sBAAsB,EACtBC,YAAa,iBACf,EA4EA,EA1EmB,KACjB,IAAMC,EAASC,CAAAA,EAAAA,EAAAA,EAAAA,CAASA,GAClBC,EAAWC,CAAAA,EAAAA,CAwEJC,CAxEID,CAAAA,CAAOA,CAACE,GAASA,EAAMH,CAwEjBE,EAAC,KAxEwB,EAC1CE,EAAcH,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACE,GAASA,EAAMC,WAAW,EAChDC,EAAWJ,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACE,GAASA,EAAME,QAAQ,EAC1CC,EAAaL,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACE,GAASA,EAAMG,UAAU,EAC9CC,EAAgBN,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACE,GAASA,EAAMI,aAAa,EACpDC,EAAQC,CAAAA,EAAAA,EAAAA,CAAAA,CAASA,CAACN,GAAUA,EAAMO,eAAe,CAAG,UAAY,SAChEC,EAAWV,CAAAA,EAAAA,EAAAA,CAAAA,CAAOA,CAACE,GAASA,EAAMS,MAAM,EAE9CC,EAAAA,SAAe,CAAC,KACdf,GAAQgB,UAAUC,KAAKC,aAAaC,sBAAsB,CACxDC,UAAU,EACVC,eAAe,EACfC,qBAAqB,EACrB,GAAId,GAAc,CAChBe,QAAS,CACP,CACEC,IAAK,kCACLC,UAAW,CAAC,IAAI,CAChBC,OAAQlB,CACV,EACD,CACF,EAEL,EAAG,CAACA,EAAYR,GAAQgB,UAAUC,KAAKC,aAAa,EAEpDH,EAAAA,SAAe,CAAC,KACd,IAAMY,EAAe,IACnB,GAAIlB,IAAiB,CACnB,IAAMmB,EACJ,yEAGF,MADCC,CAAAA,GAAKC,OAAOC,KAAAA,EAAOC,WAAW,CAAGJ,EAC3BA,CACT,CACF,EAIA,OAFAE,OAAOG,CALoD,YAAY,GAKhD,CAAC,eAAgBN,GAEjC,KACLG,OAAOI,mBAAmB,CAAC,eAAgBP,EAC7C,CACF,EAAG,CAAClB,EAAc,EAElB,IAAM0B,EAAuBC,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAACC,IACvCA,EAAOC,UAAU,CAAC,KAChBD,EAAOE,SAAS,CAAC,iCAAiCC,KACpD,EACF,EAAG,EAAE,EAEL,MACE,UAACC,EAAAA,UACC,UAACC,EAAAA,UACC,UAACC,EAAAA,EAAMA,CAAAA,CACLC,OAAO,OACPC,SAAUhC,EACVH,MAAOA,EACPoC,MAAO5C,EACP6C,QAASxD,EACTyD,QAASb,EACTc,WAAYC,GAAU3C,EAAS2C,CAAM,CAAC,EAAE,EAAEC,SAAW,IACrDC,SAAUlD,GAAYI,EAAY,UAAEJ,EAAUmD,YAAY,CAAK,GAC/DC,QACE,UAACC,EAAAA,UACC,UAACC,EAAAA,aAAaA,CAAAA,CAAAA,UAO5B,EAIMf,EAAsBgB,EAAAA,EAAMA,CAACC,GAAG,iHAOhChB,EAAgBe,EAAAA,EAAMA,CAACC,GAAG,sIAO1BH,EAAkBE,EAAAA,EAAMA,CAACC,GAAG","sources":["webpack://_N_E/./src/features/editor/TextEditor.tsx"],"sourcesContent":["import React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport Editor, { type EditorProps, loader, type OnMount, useMonaco } from \"@monaco-editor/react\";\nimport { HamsterLoader } from \"../../jsondraw\";\nimport useConfig from \"../../store/useConfig\";\nimport useFile from \"../../store/useFile\";\n\nloader.config({\n  paths: {\n    vs: \"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/vs\",\n  },\n});\n\nconst editorOptions: EditorProps[\"options\"] = {\n  formatOnPaste: true,\n  tabSize: 2,\n  formatOnType: true,\n  minimap: { enabled: false },\n  stickyScroll: { enabled: false },\n  scrollBeyondLastLine: false,\n  placeholder: \"Start typing...\",\n};\n\nconst TextEditor = () => {\n  const monaco = useMonaco();\n  const contents = useFile(state => state.contents);\n  const setContents = useFile(state => state.setContents);\n  const setError = useFile(state => state.setError);\n  const jsonSchema = useFile(state => state.jsonSchema);\n  const getHasChanges = useFile(state => state.getHasChanges);\n  const theme = useConfig(state => (state.darkmodeEnabled ? \"vs-dark\" : \"light\"));\n  const fileType = useFile(state => state.format);\n\n  React.useEffect(() => {\n    monaco?.languages.json.jsonDefaults.setDiagnosticsOptions({\n      validate: true,\n      allowComments: true,\n      enableSchemaRequest: true,\n      ...(jsonSchema && {\n        schemas: [\n          {\n            uri: \"http://myserver/foo-schema.json\",\n            fileMatch: [\"*\"],\n            schema: jsonSchema,\n          },\n        ],\n      }),\n    });\n  }, [jsonSchema, monaco?.languages.json.jsonDefaults]);\n\n  React.useEffect(() => {\n    const beforeunload = (e: BeforeUnloadEvent) => {\n      if (getHasChanges()) {\n        const confirmationMessage =\n          \"Unsaved changes, if you leave before saving  your changes will be lost\";\n\n        (e || window.event).returnValue = confirmationMessage; //Gecko + IE\n        return confirmationMessage;\n      }\n    };\n\n    window.addEventListener(\"beforeunload\", beforeunload);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", beforeunload);\n    };\n  }, [getHasChanges]);\n\n  const handleMount: OnMount = useCallback(editor => {\n    editor.onDidPaste(() => {\n      editor.getAction(\"editor.action.formatDocument\")?.run();\n    });\n  }, []);\n\n  return (\n    <StyledEditorWrapper>\n      <StyledWrapper>\n        <Editor\n          height=\"100%\"\n          language={fileType}\n          theme={theme}\n          value={contents}\n          options={editorOptions}\n          onMount={handleMount}\n          onValidate={errors => setError(errors[0]?.message || \"\")}\n          onChange={contents => setContents({ contents, skipUpdate: true })}\n          loading={\n            <LoadingFallback>\n              <HamsterLoader />\n            </LoadingFallback>\n          }\n        />\n      </StyledWrapper>\n    </StyledEditorWrapper>\n  );\n};\n\nexport default TextEditor;\n\nconst StyledEditorWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  user-select: none;\n`;\n\nconst StyledWrapper = styled.div`\n  display: grid;\n  height: 100%;\n  grid-template-columns: 100%;\n  grid-template-rows: minmax(0, 1fr);\n`;\n\nconst LoadingFallback = styled.div`\n  display: grid;\n  place-items: center;\n  height: 100%;\n  width: 100%;\n`;\n"],"names":["loader","config","paths","vs","editorOptions","formatOnPaste","tabSize","formatOnType","minimap","enabled","stickyScroll","scrollBeyondLastLine","placeholder","monaco","useMonaco","contents","useFile","TextEditor","state","setContents","setError","jsonSchema","getHasChanges","theme","useConfig","darkmodeEnabled","fileType","format","React","languages","json","jsonDefaults","setDiagnosticsOptions","validate","allowComments","enableSchemaRequest","schemas","uri","fileMatch","schema","beforeunload","confirmationMessage","e","window","event","returnValue","addEventListener","removeEventListener","handleMount","useCallback","editor","onDidPaste","getAction","run","StyledEditorWrapper","StyledWrapper","Editor","height","language","value","options","onMount","onValidate","errors","message","onChange","skipUpdate","loading","LoadingFallback","HamsterLoader","styled","div"],"sourceRoot":"","ignoreList":[]}