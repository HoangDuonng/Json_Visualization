{"version":3,"file":"static/chunks/94505-3b8c8a1b79ae0a64.js","mappings":"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","sources":["webpack://_N_E/./src/features/editor/views/GraphView/lib/jsonParser.ts","webpack://_N_E/./src/features/editor/views/GraphView/stores/useGraph.ts","webpack://_N_E/./src/store/useJson.ts","webpack://_N_E/./src/enums/file.enum.ts","webpack://_N_E/./src/constants/graph.ts","webpack://_N_E/./src/store/useConfig.ts","webpack://_N_E/./src/features/editor/views/GraphView/lib/utils/calculateNodeSize.ts","webpack://_N_E/./src/lib/utils/jsonAdapter.ts","webpack://_N_E/./src/lib/utils/helpers.ts","webpack://_N_E/./src/store/useFile.ts"],"sourcesContent":["/**\n * Copyright (c) JSON Visualization\n * This source code is licensed under the Apache 2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { parseTree, getNodePath, type Node } from \"jsonc-parser\";\nimport type { EdgeData, NodeData, NodeRow } from \"../../../../../types/graph\";\nimport { calculateNodeSize } from \"./utils/calculateNodeSize\";\n\nexport type Graph = {\n  nodes: NodeData[];\n  edges: EdgeData[];\n};\n\nexport const parser = (json: string): Graph => {\n  const jsonTree = parseTree(json);\n  if (!jsonTree) return { nodes: [], edges: [] };\n\n  const nodes: NodeData[] = [];\n  const edges: EdgeData[] = [];\n  let nodeId = 1;\n  let edgeId = 1;\n\n  function traverse(node: Node, parentId?: string) {\n    const id = String(nodeId++);\n    const text: NodeRow[] = [];\n\n    // If parentId is provided, create an edge from parentId to the current node id\n    if (parentId !== undefined && node.parent?.type === \"array\") {\n      edges.push({\n        id: String(edgeId++),\n        from: parentId,\n        to: id,\n        text: \"\",\n      });\n    }\n\n    const isArray = node.type === \"array\";\n    const isRootArray = !node.parent || node.parent.type === \"array\";\n    if (isArray && isRootArray) {\n      const { width, height } = calculateNodeSize(`[${node.children?.length ?? \"0\"} items]`);\n      nodes.push({\n        id,\n        text: [\n          {\n            key: null,\n            value: `[${node.children?.length ?? 0} items]`,\n            type: \"array\",\n            childrenCount: node.children?.length,\n          },\n        ],\n        width,\n        height,\n        path: [],\n      });\n\n      node.children?.forEach(child => {\n        traverse(child, id);\n      });\n\n      return id;\n    }\n\n    node.children?.forEach(child => {\n      if (!child.children || !child.children[1]) return traverse(child, id);\n\n      const key = child.children[0].value ?? null;\n      const valueNode = child.children[1];\n      const type = valueNode.type;\n\n      if (type === \"array\") {\n        const targetIds: string[] = [];\n\n        valueNode.children?.forEach(arrayChild => {\n          const arrayChildId = traverse(arrayChild, undefined);\n          if (arrayChildId) targetIds.push(arrayChildId);\n        });\n\n        text.push({\n          key,\n          value: valueNode.value,\n          type,\n          to: targetIds.length > 0 ? targetIds : undefined,\n          childrenCount: valueNode.children?.length,\n        });\n\n        targetIds.forEach(targetId => {\n          edges.push({\n            id: String(edgeId++),\n            from: id,\n            to: targetId,\n            text: key ?? null,\n          });\n        });\n      } else if (type === \"object\") {\n        const objectNodeId = traverse(valueNode, id);\n        text.push({\n          key,\n          value: valueNode.value,\n          type,\n          childrenCount: Object.keys(valueNode.children ?? {}).length,\n          ...(objectNodeId && { to: [objectNodeId] }),\n        });\n\n        if (objectNodeId) {\n          edges.push({\n            id: String(edgeId++),\n            from: id,\n            to: objectNodeId,\n            text: key ?? null,\n          });\n        }\n      } else {\n        text.push({\n          key,\n          value: valueNode.value,\n          type,\n        });\n      }\n    });\n\n    // to handle case where empty object inside array [{}]\n    if (node.parent?.type === \"array\" && node.type === \"object\" && node.children?.length === 0) {\n      text.push({\n        key: null,\n        value: \"{0 keys}\",\n        type: \"object\",\n        childrenCount: 0,\n      });\n    }\n\n    const appendParentKey = () => {\n      const getParentKey = (targetNode: any) => {\n        const path = getNodePath(targetNode);\n        return path?.pop()?.toString();\n      };\n\n      if (!node.parent) {\n        return { parentKey: getParentKey(node), parentType: node.type };\n      }\n\n      if (node.parent.type === \"array\") {\n        return { parentKey: getParentKey(node.parent), parentType: \"array\" };\n      }\n\n      if (node.parent.type === \"property\") {\n        return { parentKey: getParentKey(node), parentType: \"object\" };\n      }\n\n      return {\n        parentKey: getParentKey(node),\n        parentType: node.parent.type.replace(\"property\", \"object\"),\n      };\n    };\n\n    // its for singular text like string, number, boolean, null\n    if (text.length === 0) {\n      if (typeof node.value === \"undefined\") return;\n      const { width, height } = calculateNodeSize(node.value);\n\n      nodes.push({\n        id,\n        text: [\n          {\n            key: null,\n            value: node.value,\n            type: node.type,\n          },\n        ],\n        width,\n        height,\n        path: getNodePath(node),\n        ...appendParentKey(),\n      });\n    } else {\n      let t: string | [string, string][] = \"\";\n\n      if (text.some(t => t.key !== null)) {\n        t = text.map(t => {\n          const keyStr = t.key === null ? \"\" : t.key;\n          if (t.type === \"object\") return [keyStr, `{${t.childrenCount ?? 0} keys}`];\n          if (t.type === \"array\") return [keyStr, `[${t.childrenCount ?? 0} items]`];\n          if (t.value === null) return [keyStr, \"null\"];\n\n          return [keyStr, `${t.value}`];\n        });\n      } else {\n        t = `${text[0].value}`;\n      }\n\n      const { width, height } = calculateNodeSize(t);\n      nodes.push({\n        id,\n        text,\n        width,\n        height,\n        path: getNodePath(node),\n        ...appendParentKey(),\n      });\n    }\n\n    return id; // Return the current id for referencing in the parent node\n  }\n\n  traverse(jsonTree);\n  return { nodes, edges };\n};\n","import type { ViewPort } from \"react-zoomable-ui\";\nimport type { CanvasDirection } from \"reaflow\";\nimport { create } from \"zustand\";\nimport { SUPPORTED_LIMIT } from \"../../../../../constants/graph\";\nimport useJson from \"../../../../../store/useJson\";\nimport type { EdgeData, NodeData } from \"../../../../../types/graph\";\nimport { parser } from \"../lib/jsonParser\";\n\nexport interface Graph {\n  viewPort: ViewPort | null;\n  direction: CanvasDirection;\n  loading: boolean;\n  fullscreen: boolean;\n  nodes: NodeData[];\n  edges: EdgeData[];\n  selectedNode: NodeData | null;\n  path: string;\n  aboveSupportedLimit: boolean;\n}\n\nconst initialStates: Graph = {\n  viewPort: null,\n  direction: \"RIGHT\",\n  loading: true,\n  fullscreen: false,\n  nodes: [],\n  edges: [],\n  selectedNode: null,\n  path: \"\",\n  aboveSupportedLimit: false,\n};\n\ninterface GraphActions {\n  setGraph: (json?: string, options?: Partial<Graph>[]) => void;\n  setLoading: (loading: boolean) => void;\n  setDirection: (direction: CanvasDirection) => void;\n  setViewPort: (ref: ViewPort) => void;\n  setSelectedNode: (nodeData: NodeData) => void;\n  focusFirstNode: () => void;\n  toggleFullscreen: (value: boolean) => void;\n  zoomIn: () => void;\n  zoomOut: () => void;\n  centerView: () => void;\n  clearGraph: () => void;\n  setZoomFactor: (zoomFactor: number) => void;\n}\n\nconst useGraph = create<Graph & GraphActions>((set, get) => ({\n  ...initialStates,\n  clearGraph: () => set({ nodes: [], edges: [], loading: false }),\n  setSelectedNode: nodeData => set({ selectedNode: nodeData }),\n  setGraph: (data, options) => {\n    const { nodes, edges } = parser(data ?? useJson.getState().json);\n\n    if (nodes.length > SUPPORTED_LIMIT) {\n      return set({\n        aboveSupportedLimit: true,\n        ...options,\n        loading: false,\n      });\n    }\n\n    set({\n      nodes,\n      edges,\n      aboveSupportedLimit: false,\n      ...options,\n    });\n  },\n  setDirection: (direction = \"RIGHT\") => {\n    set({ direction });\n    setTimeout(() => get().centerView(), 200);\n  },\n  setLoading: loading => set({ loading }),\n  focusFirstNode: () => {\n    const rootNode = document.querySelector(\"g[id$='node-1']\");\n    get().viewPort?.camera?.centerFitElementIntoView(rootNode as HTMLElement, {\n      elementExtraMarginForZoom: 100,\n    });\n  },\n  setZoomFactor: zoomFactor => {\n    const viewPort = get().viewPort;\n    viewPort?.camera?.recenter(viewPort.centerX, viewPort.centerY, zoomFactor);\n  },\n  zoomIn: () => {\n    const viewPort = get().viewPort;\n    viewPort?.camera?.recenter(viewPort.centerX, viewPort.centerY, viewPort.zoomFactor + 0.1);\n  },\n  zoomOut: () => {\n    const viewPort = get().viewPort;\n    viewPort?.camera?.recenter(viewPort.centerX, viewPort.centerY, viewPort.zoomFactor - 0.1);\n  },\n  centerView: () => {\n    const viewPort = get().viewPort;\n    viewPort?.updateContainerSize();\n\n    const canvas = document.querySelector(\".jsoncrack-canvas\") as HTMLElement | null;\n    if (canvas) {\n      viewPort?.camera?.centerFitElementIntoView(canvas);\n    }\n  },\n  toggleFullscreen: fullscreen => set({ fullscreen }),\n  setViewPort: viewPort => set({ viewPort }),\n}));\n\nexport default useGraph;\n","import { create } from \"zustand\";\nimport useGraph from \"../features/editor/views/GraphView/stores/useGraph\";\n\ninterface JsonActions {\n  setJson: (json: string) => void;\n  getJson: () => string;\n  clear: () => void;\n}\n\nconst initialStates = {\n  json: \"{}\",\n  loading: true,\n};\n\nexport type JsonStates = typeof initialStates;\n\nconst useJson = create<JsonStates & JsonActions>()((set, get) => ({\n  ...initialStates,\n  getJson: () => get().json,\n  setJson: json => {\n    set({ json, loading: false });\n    useGraph.getState().setGraph(json);\n  },\n  clear: () => {\n    set({ json: \"\", loading: false });\n    useGraph.getState().clearGraph();\n  },\n}));\n\nexport default useJson;\n","export enum FileFormat {\n  \"JSON\" = \"json\",\n  \"YAML\" = \"yaml\",\n  \"XML\" = \"xml\",\n  \"CSV\" = \"csv\",\n}\n\nexport const formats = [\n  { value: FileFormat.JSON, label: \"JSON\" },\n  { value: FileFormat.YAML, label: \"YAML\" },\n  { value: FileFormat.XML, label: \"XML\" },\n  { value: FileFormat.CSV, label: \"CSV\" },\n];\n\nexport enum TypeLanguage {\n  TypeScript = \"typescript\",\n  TypeScript_Combined = \"typescript/typealias\",\n  Go = \"go\",\n  JSON_SCHEMA = \"json_schema\",\n  Kotlin = \"kotlin\",\n  Rust = \"rust\",\n}\n\nexport const typeOptions = [\n  {\n    label: \"TypeScript\",\n    value: TypeLanguage.TypeScript,\n    lang: \"typescript\",\n  },\n  {\n    label: \"TypeScript (merged)\",\n    value: TypeLanguage.TypeScript_Combined,\n    lang: \"typescript\",\n  },\n  {\n    label: \"Go\",\n    value: TypeLanguage.Go,\n    lang: \"go\",\n  },\n  {\n    label: \"JSON Schema\",\n    value: TypeLanguage.JSON_SCHEMA,\n    lang: \"json\",\n  },\n  {\n    label: \"Kotlin\",\n    value: TypeLanguage.Kotlin,\n    lang: \"kotlin\",\n  },\n  {\n    label: \"Rust\",\n    value: TypeLanguage.Rust,\n    lang: \"rust\",\n  },\n];\n","export const NODE_DIMENSIONS = {\n  ROW_HEIGHT: 30, // Regular row height\n  PARENT_HEIGHT: 36, // Height for parent nodes\n} as const;\n\nexport const SUPPORTED_LIMIT = +(process.env.NEXT_PUBLIC_NODE_LIMIT as string);\n","import { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nimport useGraph from \"../features/editor/views/GraphView/stores/useGraph\";\n\nconst initialStates = {\n  darkmodeEnabled: true,\n  imagePreviewEnabled: true,\n  liveTransformEnabled: true,\n  gesturesEnabled: false,\n  rulersEnabled: true,\n};\n\nexport interface ConfigActions {\n  toggleDarkMode: (value: boolean) => void;\n  toggleImagePreview: (value: boolean) => void;\n  toggleLiveTransform: (value: boolean) => void;\n  toggleGestures: (value: boolean) => void;\n  toggleRulers: (value: boolean) => void;\n}\n\nconst useConfig = create(\n  persist<typeof initialStates & ConfigActions>(\n    set => ({\n      ...initialStates,\n      toggleRulers: rulersEnabled => set({ rulersEnabled }),\n      toggleGestures: gesturesEnabled => set({ gesturesEnabled }),\n      toggleLiveTransform: liveTransformEnabled => set({ liveTransformEnabled }),\n      toggleDarkMode: darkmodeEnabled => set({ darkmodeEnabled }),\n      toggleImagePreview: imagePreviewEnabled => {\n        set({ imagePreviewEnabled });\n        useGraph.getState().setGraph();\n      },\n    }),\n    {\n      name: \"config\",\n    }\n  )\n);\n\nexport default useConfig;\n","import { NODE_DIMENSIONS } from \"../../../../../../constants/graph\";\nimport useConfig from \"../../../../../../store/useConfig\";\n\ntype Text = number | string | [string, string][];\ntype Size = { width: number; height: number };\n\nexport const isContentImage = (value: Text) => {\n  if (typeof value !== \"string\") return false;\n\n  const isImageURL = /(https?:\\/\\/.*\\.(?:png|jpg|gif|svg))/i.test(value);\n  const isBase64 = value.startsWith(\"data:image/\") && value.includes(\"base64\");\n\n  return isImageURL || isBase64;\n};\n\nconst calculateLines = (text: Text): string => {\n  if (Array.isArray(text)) {\n    return text.map(([k, v]) => `${k}: ${JSON.stringify(v).slice(0, 80)}`).join(\"\\n\");\n  }\n\n  return `${text}`;\n};\n\nconst calculateWidthAndHeight = (str: string, single = false) => {\n  if (!str) return { width: 45, height: 45 };\n\n  const dummyElement = document.createElement(\"div\");\n  dummyElement.style.whiteSpace = single ? \"nowrap\" : \"pre-wrap\";\n  dummyElement.innerText = str;\n  dummyElement.style.fontSize = \"12px\";\n  dummyElement.style.width = \"fit-content\";\n  dummyElement.style.padding = \"0 10px\";\n  dummyElement.style.fontWeight = \"500\";\n  dummyElement.style.fontFamily = \"monospace\";\n  document.body.appendChild(dummyElement);\n\n  const clientRect = dummyElement.getBoundingClientRect();\n  const lines = str.split(\"\\n\").length;\n\n  const width = clientRect.width + 4;\n  // Use parent height for single line nodes that are parents\n  const height = single ? NODE_DIMENSIONS.PARENT_HEIGHT : lines * NODE_DIMENSIONS.ROW_HEIGHT;\n\n  document.body.removeChild(dummyElement);\n  return { width, height };\n};\n\nconst sizeCache = new Map<Text, Size>();\n\n// clear cache every 2 mins\nsetInterval(() => sizeCache.clear(), 120_000);\n\nexport const calculateNodeSize = (text: Text, isParent = false) => {\n  const { imagePreviewEnabled } = useConfig.getState();\n  const isImage = isContentImage(text) && imagePreviewEnabled;\n\n  const cacheKey = [text, isParent].toString();\n\n  // check cache if data already exists\n  if (sizeCache.has(cacheKey)) {\n    const size = sizeCache.get(cacheKey);\n    if (size) return size;\n  }\n\n  const lines = calculateLines(text);\n  const sizes = calculateWidthAndHeight(lines, typeof text === \"string\");\n\n  if (isImage) {\n    sizes.width = 80;\n    sizes.height = 80;\n  }\n\n  if (isParent) sizes.width += 80;\n  if (sizes.width > 700) sizes.width = 700;\n\n  sizeCache.set(cacheKey, sizes);\n  return sizes;\n};\n","import type { ParseError } from \"jsonc-parser\";\nimport { FileFormat } from \"../../enums/file.enum\";\n\nexport const contentToJson = (value: string, format = FileFormat.JSON): Promise<object> => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      if (!value) return resolve({});\n\n      if (format === FileFormat.JSON) {\n        const { parse } = await import(\"jsonc-parser\");\n        const errors: ParseError[] = [];\n        const result = parse(value, errors);\n        if (errors.length > 0) JSON.parse(value);\n        return resolve(result);\n      }\n\n      if (format === FileFormat.YAML) {\n        const { load } = await import(\"js-yaml\");\n        return resolve(load(value) as object);\n      }\n\n      if (format === FileFormat.XML) {\n        const { XMLParser } = await import(\"fast-xml-parser\");\n        const parser = new XMLParser({\n          attributeNamePrefix: \"$\",\n          ignoreAttributes: false,\n          allowBooleanAttributes: true,\n          parseAttributeValue: true,\n          trimValues: true,\n          parseTagValue: true,\n        });\n        return resolve(parser.parse(value));\n      }\n\n      if (format === FileFormat.CSV) {\n        const { csv2json } = await import(\"json-2-csv\");\n        const result = csv2json(value, {\n          trimFieldValues: true,\n          trimHeaderFields: true,\n          wrapBooleans: true,\n          excelBOM: true,\n        });\n        return resolve(result);\n      }\n\n      return resolve({});\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"Failed to parse content\";\n      return reject(errorMessage);\n    }\n  });\n};\n\nexport const jsonToContent = async (json: string, format: FileFormat): Promise<string> => {\n  return new Promise(async resolve => {\n    try {\n      if (!json) return resolve(\"\");\n\n      if (format === FileFormat.JSON) {\n        const parsedJson = JSON.parse(json);\n        return resolve(JSON.stringify(parsedJson, null, 2));\n      }\n\n      if (format === FileFormat.YAML) {\n        const { dump } = await import(\"js-yaml\");\n        const { parse } = await import(\"jsonc-parser\");\n        return resolve(dump(parse(json)));\n      }\n\n      if (format === FileFormat.XML) {\n        const { XMLBuilder } = await import(\"fast-xml-parser\");\n        const builder = new XMLBuilder({\n          format: true,\n          attributeNamePrefix: \"$\",\n          ignoreAttributes: false,\n        });\n\n        return resolve(builder.build(JSON.parse(json)));\n      }\n\n      if (format === FileFormat.CSV) {\n        const { json2csv } = await import(\"json-2-csv\");\n        const parsedJson = JSON.parse(json);\n\n        const data = Array.isArray(parsedJson) ? parsedJson : [parsedJson];\n        return resolve(\n          json2csv(data, {\n            expandArrayObjects: true,\n            expandNestedObjects: true,\n            excelBOM: true,\n            wrapBooleans: true,\n            trimFieldValues: true,\n            trimHeaderFields: true,\n          })\n        );\n      }\n\n      return resolve(json);\n    } catch (error) {\n      console.error(json, error);\n      return resolve(json);\n    }\n  });\n};\n","export function isIframe() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return true;\n  }\n}\n","import debounce from \"lodash.debounce\";\nimport { event as gaEvent } from \"nextjs-google-analytics\";\nimport { toast } from \"react-hot-toast\";\nimport { create } from \"zustand\";\nimport exampleJson from \"../data/example.json\";\nimport { FileFormat } from \"../enums/file.enum\";\nimport useGraph from \"../features/editor/views/GraphView/stores/useGraph\";\nimport { isIframe } from \"../lib/utils/helpers\";\nimport { contentToJson, jsonToContent } from \"../lib/utils/jsonAdapter\";\nimport useConfig from \"./useConfig\";\nimport useJson from \"./useJson\";\n\nconst defaultJson = JSON.stringify(exampleJson, null, 2);\n\ntype SetContents = {\n  contents?: string;\n  hasChanges?: boolean;\n  skipUpdate?: boolean;\n  format?: FileFormat;\n};\n\ntype Query = string | string[] | undefined;\n\ninterface JsonActions {\n  getContents: () => string;\n  getFormat: () => FileFormat;\n  getHasChanges: () => boolean;\n  setError: (error: string | null) => void;\n  setHasChanges: (hasChanges: boolean) => void;\n  setContents: (data: SetContents) => void;\n  fetchUrl: (url: string) => void;\n  setFormat: (format: FileFormat) => void;\n  clear: () => void;\n  setFile: (fileData: File) => void;\n  setJsonSchema: (jsonSchema: object | null) => void;\n  checkEditorSession: (url: Query, widget?: boolean) => void;\n}\n\nexport type File = {\n  id: string;\n  views: number;\n  owner_email: string;\n  name: string;\n  content: string;\n  private: boolean;\n  format: FileFormat;\n  created_at: string;\n  updated_at: string;\n};\n\nconst initialStates = {\n  fileData: null as File | null,\n  format: FileFormat.JSON,\n  contents: defaultJson,\n  error: null as any,\n  hasChanges: false,\n  jsonSchema: null as object | null,\n};\n\nexport type FileStates = typeof initialStates;\n\nconst isURL = (value: string) => {\n  return /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi.test(\n    value\n  );\n};\n\nconst debouncedUpdateJson = debounce((value: unknown) => {\n  useGraph.getState().setLoading(true);\n  useJson.getState().setJson(JSON.stringify(value, null, 2));\n}, 400);\n\nconst useFile = create<FileStates & JsonActions>()((set, get) => ({\n  ...initialStates,\n  clear: () => {\n    set({ contents: \"\" });\n    useJson.getState().clear();\n  },\n  setJsonSchema: jsonSchema => set({ jsonSchema }),\n  setFile: fileData => {\n    set({ fileData, format: fileData.format || FileFormat.JSON });\n    get().setContents({ contents: fileData.content, hasChanges: false });\n    gaEvent(\"set_content\", { label: fileData.format });\n  },\n  getContents: () => get().contents,\n  getFormat: () => get().format,\n  getHasChanges: () => get().hasChanges,\n  setFormat: async format => {\n    try {\n      const prevFormat = get().format;\n\n      set({ format });\n      const contentJson = await contentToJson(get().contents, prevFormat);\n      const jsonContent = await jsonToContent(JSON.stringify(contentJson, null, 2), format);\n\n      get().setContents({ contents: jsonContent });\n    } catch {\n      get().clear();\n      console.warn(\"The content was unable to be converted, so it was cleared instead.\");\n    }\n  },\n  setContents: async ({ contents, hasChanges = true, skipUpdate = false, format }) => {\n    try {\n      set({\n        ...(contents && { contents }),\n        error: null,\n        hasChanges,\n        format: format ?? get().format,\n      });\n\n      const isFetchURL = window.location.href.includes(\"?\");\n      const json = await contentToJson(get().contents, get().format);\n\n      if (!useConfig.getState().liveTransformEnabled && skipUpdate) return;\n\n      if (get().hasChanges && contents && contents.length < 80_000 && !isIframe() && !isFetchURL) {\n        sessionStorage.setItem(\"content\", contents);\n        sessionStorage.setItem(\"format\", get().format);\n        set({ hasChanges: true });\n      }\n\n      debouncedUpdateJson(json);\n    } catch (error: any) {\n      if (error?.mark?.snippet) return set({ error: error.mark.snippet });\n      if (error?.message) set({ error: error.message });\n      useJson.setState({ loading: false });\n      useGraph.setState({ loading: false });\n    }\n  },\n  setError: error => set({ error }),\n  setHasChanges: hasChanges => set({ hasChanges }),\n  fetchUrl: async url => {\n    try {\n      const res = await fetch(url);\n      const json = await res.json();\n      const jsonStr = JSON.stringify(json, null, 2);\n\n      get().setContents({ contents: jsonStr });\n      return useJson.setState({ json: jsonStr, loading: false });\n    } catch {\n      get().clear();\n      toast.error(\"Failed to fetch document from URL!\");\n    }\n  },\n  checkEditorSession: (url, widget) => {\n    if (url && typeof url === \"string\" && isURL(url)) {\n      return get().fetchUrl(url);\n    }\n\n    let contents = defaultJson;\n    const sessionContent = sessionStorage.getItem(\"content\") as string | null;\n    const format = sessionStorage.getItem(\"format\") as FileFormat | null;\n    if (sessionContent && !widget) contents = sessionContent;\n\n    if (format) set({ format });\n    get().setContents({ contents, hasChanges: false });\n  },\n}));\n\nexport default useFile;\n"],"names":["initialStates","viewPort","direction","loading","fullscreen","nodes","edges","selectedNode","path","aboveSupportedLimit","create","set","get","clearGraph","useGraph","setSelectedNode","nodeData","setGraph","data","options","parser","jsonTree","parseTree","json","nodeId","edgeId","traverse","node","parentId","id","String","text","undefined","parent","type","push","from","to","isArray","isRootArray","width","height","calculateNodeSize","children","length","key","value","childrenCount","forEach","child","valueNode","targetIds","arrayChild","arrayChildId","targetId","objectNodeId","Object","keys","appendParentKey","getParentKey","getNodePath","targetNode","pop","toString","parentKey","parentType","replace","t","some","map","keyStr","useJson","getState","SUPPORTED_LIMIT","setDirection","setTimeout","centerView","setLoading","focusFirstNode","rootNode","document","querySelector","camera","centerFitElementIntoView","elementExtraMarginForZoom","setZoomFactor","zoomFactor","recenter","centerX","centerY","zoomIn","zoomOut","updateContainerSize","canvas","toggleFullscreen","setViewPort","getJson","setJson","clear","TypeLanguage","FileFormat","formats","label","typeOptions","lang","NODE_DIMENSIONS","ROW_HEIGHT","PARENT_HEIGHT","process","darkmodeEnabled","imagePreviewEnabled","liveTransformEnabled","gesturesEnabled","rulersEnabled","persist","toggleRulers","useConfig","toggleGestures","toggleLiveTransform","toggleDarkMode","toggleImagePreview","name","isContentImage","isImageURL","test","isBase64","startsWith","includes","Map","setInterval","sizeCache","isParent","isImage","cacheKey","has","size","sizes","calculateWidthAndHeight","str","single","lines","dummyElement","createElement","style","whiteSpace","innerText","fontSize","padding","fontWeight","fontFamily","body","appendChild","clientRect","getBoundingClientRect","split","removeChild","k","v","JSON","stringify","slice","join","contentToJson","format","Promise","resolve","reject","parse","errors","result","YAML","load","XML","XMLParser","attributeNamePrefix","ignoreAttributes","allowBooleanAttributes","parseAttributeValue","trimValues","parseTagValue","CSV","csv2json","trimFieldValues","trimHeaderFields","wrapBooleans","excelBOM","error","errorMessage","Error","message","jsonToContent","parsedJson","dump","XMLBuilder","builder","build","json2csv","Array","expandArrayObjects","expandNestedObjects","console","defaultJson","exampleJson","fileData","contents","hasChanges","jsonSchema","debouncedUpdateJson","debounce","useFile","setJsonSchema","setFile","setContents","content","gaEvent","getContents","getFormat","getHasChanges","setFormat","prevFormat","contentJson","jsonContent","warn","skipUpdate","isFetchURL","window","location","href","isIframe","self","top","sessionStorage","setItem","mark","snippet","setState","setError","setHasChanges","fetchUrl","url","res","fetch","jsonStr","toast","checkEditorSession","widget","isURL","sessionContent","getItem"],"sourceRoot":"","ignoreList":[]}