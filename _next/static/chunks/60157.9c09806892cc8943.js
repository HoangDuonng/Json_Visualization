"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60157],{4368:(e,t,n)=>{function r(e,t,n=0,a=0){return[e-n,t-a]}function a(e,t=[0,0],n,o=[0,1]){let i=r(e[0]-t[0],e[1]-t[1]);return n&&c(i)<n*n?o:i}function o(e,t){return e[0]*t[1]-t[0]*e[1]}function i(e,t){return e[0]*t[0]+e[1]*t[1]}function l(e,t){return[e[0]+t[0],e[1]+t[1]]}function s(e,t){return[e[0]-t[0],e[1]-t[1]]}function u(e,t){return r(e[0]*t,e[1]*t)}function c(e){return e[0]*e[0]+e[1]*e[1]}n.d(t,{Lb:()=>d,No:()=>i,Yj:()=>a,_J:()=>o,at:()=>s,cb:()=>u,dC:()=>l,i1:()=>r,zN:()=>f});let d=e=>{let t=Math.sqrt(c(e));return 0===t?r(0,0):r(e[0]/t,e[1]/t)},f=e=>r(e[1],-e[0])},4861:(e,t,n)=>{n.d(t,{Pk:()=>r.Pk,G8:()=>r.G8,OY:()=>p,qE:()=>r.qE,e8:()=>m,PN:()=>v,SG:()=>b,cb:()=>M,Ok:()=>y,Dy:()=>S,H7:()=>w,tR:()=>o,MQ:()=>L,yl:()=>r.yl,Bf:()=>r.Bf,B7:()=>c.B7,cH:()=>l,wd:()=>j,_r:()=>_,Q4:()=>F,AI:()=>a,SM:()=>c.SM,cK:()=>c.cK,ks:()=>c.ks,_U:()=>c.Hx,m3:()=>c.m3,$p:()=>c.$p,O$:()=>c.O$,V5:()=>P,A:()=>c.A,PU:()=>c.PU,VM:()=>c.VM,E4:()=>c.E4,n1:()=>x,Ao:()=>O,f:()=>T,VV:()=>s,M6:()=>u,nv:()=>i,_s:()=>I,UB:()=>N,$C:()=>U,g6:()=>k,YC:()=>D,LI:()=>r.LI,yw:()=>r.yw,iD:()=>H,i1:()=>d.i1,dC:()=>d.dC,_J:()=>d._J,No:()=>d.No,Yj:()=>d.Yj,Lb:()=>d.Lb,LP:()=>d.cb,at:()=>d.at});var r=n(42212);let a=e=>e<0?e%(2*Math.PI)+2*Math.PI:e%(2*Math.PI);function o(e){return e*Math.PI/180}function i(e){return 180*e/Math.PI}function l(e){return Math.abs(Math.sin(2*e))<r.Pk}function s(e,t,n){return(e=a(e),(t=a(t))<(n=a(n)))?e>=t&&e<=n:e>=t||e<=n}function u(e,t){let n=(e=a(e))-(t=a(t));return n<-Math.PI?n+=2*Math.PI:n>Math.PI&&(n-=2*Math.PI),Math.abs(n)}var c=n(91139),d=n(4368);let f=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],h=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function m(e,t,n,r){return[e,t,n,r]}let p=(e,t)=>(0,c.Hx)((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]),g=[[.5,0],[.2,0],[.8,0]],E=([e,t],n,r)=>{let a=function(e,t,n,r,a=.001,o=10){let i=1/0,l=0;for(;i>=a;){if(l>=o)return null;let s=1-n,u=s*s,c=u*s,d=n*n,f=d*n,h=c*e[0][0]+3*u*n*e[1][0]+3*s*d*e[2][0]+f*e[3][0],m=c*e[0][1]+3*u*n*e[1][1]+3*s*d*e[2][1]+f*e[3][1],p=t[0][0]+r*(t[1][0]-t[0][0]),g=t[0][1]+r*(t[1][1]-t[0][1]),E=h-p,b=m-g;if((i=Math.abs(E)+Math.abs(b))<a)break;let w=-3*u*e[0][0]+3*u*e[1][0]-6*s*n*e[1][0]-3*d*e[2][0]+6*s*n*e[2][0]+3*d*e[3][0],A=-3*u*e[0][1]+3*u*e[1][1]-6*s*n*e[1][1]-3*d*e[2][1]+6*s*n*e[2][1]+3*d*e[3][1],v=-(t[1][0]-t[0][0]),y=-(t[1][1]-t[0][1]),M=w*y-v*A;if(1e-12>Math.abs(M))return null;let S=1/M,x=S*(-(y*E)- -(v*b)),O=S*(-(-A*E)+-(w*b));n+=x,r+=O,l+=1}return[n,r]}(r,n,e,t,.01,4);if(!a)return null;let[o,i]=a;return o<0||o>1||i<0||i>1?null:p(r,o)};function b(e,t){let n=E(g[0],t,e);return n||(n=E(g[1],t,e))||(n=E(g[2],t,e))?[n]:[]}function w(e,t){let n=function(e,t,n=.001){let r=0;for(let n=1/0,a=0;a<30;a++){let o=(0,c.cK)(t,p(e,a/30));o<n&&(n=o,r=a)}let a=((e,t,r,a=n)=>{let o,i=e,l=t;for(;l-i>a;)r((o=(l+i)/2)-a)<r(o+a)?l=o:i=o;return o})(Math.max((r-1)/30,0),Math.min((r+1)/30,1),n=>(0,c.cK)(t,p(e,n)));return a?p(e,a):null}(e,t);return n?(0,c.cK)(t,n):0}function A([e,t,n,r],a){return(0,d.i1)(-3*(1-a)*(1-a)*e[0]+3*(1-a)*(1-a)*t[0]-6*a*(1-a)*t[0]-3*a*a*n[0]+6*a*(1-a)*n[0]+3*a*a*r[0],-3*(1-a)*(1-a)*e[1]+3*(1-a)*(1-a)*t[1]-6*a*(1-a)*t[1]-3*a*a*n[1]+6*a*(1-a)*n[1]+3*a*a*r[1])}function v(e,t=.5){if(e.length<2)return;let n=[];for(let o=0;o<e.length-1;o++){var r,a;let i=e[o-1<0?0:o-1],l=e[o],s=e[o+1>=e.length?e.length-1:o+1],u=e[o+2>=e.length?e.length-1:o+2],d=[(s[0]-i[0])*t,(s[1]-i[1])*t],f=[(u[0]-l[0])*t,(u[1]-l[1])*t],h=l[0]+d[0]/3,m=l[1]+d[1]/3,p=s[0]-f[0]/3,g=s[1]-f[1]/3;n.push((r=(0,c.Hx)(l[0],l[1]),a=(0,c.Hx)(h,m),[r,a,(0,c.Hx)(p,g),(0,c.Hx)(s[0],s[1])]))}return n}function y([e,t,n,r],a,o=50){let i=[];for(let l=0;l<=o;l++){let s=l/o,u=[e,t,n,r],f=p(u,s),h=(0,d.Lb)(A(u,s)),m=(0,d.zN)(h);i.push((0,c.O$)((0,d.cb)(m,a),f))}return i}function M(e){let t=0;for(let n=0;n<24;n++){let r=A(e,.5*f[n]+.5),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);t+=h[n]*a}return .5*t}function S(e,t){if(t<=0)return p(e,0);if(t>=1)return p(e,1);let n=M(e),r=n*t,a=0,o=1,i=t,l=0,s=1e-4*n;for(let t=0;t<20&&!(Math.abs((l=function(e,t){if(t<=0)return 0;if(t>=1)return M(e);let n=t/2,r=t/2,a=0;for(let t=0;t<24;t++){let o=A(e,n*f[t]+r),i=Math.sqrt(o[0]*o[0]+o[1]*o[1]);a+=h[t]*i}return n*a}(e,i))-r)<s);t++)l<r?a=i:o=i,i=(a+o)/2;return p(e,i)}function x(...e){return C(e)}function O(e){return C(e)}let T=(e,t)=>{let[n,r]=e,a=0;for(let e=0;e<t.length;e++){let o=(e+1)%t.length,[i,l]=t[e],[s,u]=t[o];l<=r?u>r&&(s-i)*(r-l)-(n-i)*(u-l)>0&&a++:u<=r&&(s-i)*(r-l)-(n-i)*(u-l)<0&&a--}return 0!==a};function C(e){var t;return(t=e,(0,c.E4)(t[0],t[t.length-1]))?e:[...e,e[0]]}var R=n(70528);function N(e,t){return(0,R.cHA)([e,t])}let k=([e,t],[n,r])=>e<=n?t>=n:e>=n&&r>=e,U=([e,t],[n,r])=>{let a=Math.max(e,n),o=Math.min(t,r);return a<=o?(0,R.cHA)([a,o]):null},I=(e,[t,n])=>e>=t&&e<=n;function D(e,t){return[e,t]}function j(e,t){return[e,t]}let P=(e,t,n=r.Pk)=>{let a=L(e,t);return 0===a||a<n},L=(e,t)=>{let n,r,[a,o]=e,[[i,l],[s,u]]=t,c=s-i,d=u-l,f=c*c+d*d,h=-1;0!==f&&(h=((a-i)*c+(o-l)*d)/f),h<0?(n=i,r=l):h>1?(n=s,r=u):(n=i+h*c,r=l+h*d);let m=a-n,p=o-r;return Math.sqrt(m*m+p*p)};function _(e,t,n){let r=function(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],a=t[1][1]-t[0][1],o=t[0][0]-t[1][0],i=n*o-a*r;if(0!==i){let l=n*e[0][0]+r*e[0][1],s=a*t[0][0]+o*t[0][1];return(0,c.Hx)((l*o-s*r)/i,(n*s-a*l)/i)}return null}([e[0],e[1]],[t[0],t[1]]);return r&&P(r,t,n)&&P(r,e,n)?r:null}function F(e,t){return _(e,t)?0:Math.min(L(e[0],t),L(e[1],t),L(t[0],e),L(t[1],e))}function H([e,t,n],r){let a=(e,t,n)=>(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1]),o=a(r,e,t),i=a(r,t,n),l=a(r,n,e);return!((o<0||i<0||l<0)&&(o>0||i>0||l>0))}},42212:(e,t,n)=>{n.d(t,{Bf:()=>s,G8:()=>l,LI:()=>o,Pk:()=>r,qE:()=>a,yl:()=>u,yw:()=>i});let r=1e-4,a=(e,t,n)=>Math.min(Math.max(e,t),n),o=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},i=(e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r},l=(e,t)=>(e+t)/2,s=e=>"number"==typeof e&&Number.isFinite(e),u=(e,t,n=r)=>Math.abs(e-t)<n},60157:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(37876),a=n(14232),o=n(38335),i=n(33686),l=n(68371),s=n(95171),u=n(99649),c=n(44969),d=n(79021),f=n(45050),h=n(44193),m=n(97685),p=n(66480),g=n(9456),E=n(70528);let b=()=>Math.floor(2e9*Math.random()),w=()=>Math.floor(2e9*Math.random()),A=e=>e.text&&0!==e.text.length?e.text.map(e=>null!==e.key&&void 0!==e.key?"object"===e.type?`${e.key}: {${e.childrenCount??0} keys}`:"array"===e.type?`${e.key}: [${e.childrenCount??0} items]`:null===e.value?`${e.key}: null`:`${e.key}: ${e.value}`:`${e.value??""}`).join("\n"):"",v=(e,t)=>{let n=[],r=((e,t)=>{let n=new Map;if(0===e.length)return n;let r=new Map,a=new Set;for(let e of t){let t=r.get(e.from)??[];t.push(e.to),r.set(e.from,t),a.add(e.to)}let o=e.filter(e=>!a.has(e.id)).map(e=>e.id);0===o.length&&e.length>0&&o.push(e[0].id);let i=new Map(e.map(e=>[e.id,e])),l=[],s=new Set,u=[...o];for(;u.length>0;){let e=[],t=[];for(let n of u)if(!s.has(n))for(let a of(s.add(n),e.push(n),r.get(n)??[]))s.has(a)||t.push(a);e.length>0&&l.push(e),u=t}let c=e.filter(e=>!s.has(e.id)).map(e=>e.id);c.length>0&&l.push(c);let d=50;for(let e of l){let t=0,r=50;for(let a of e){let e=i.get(a);e&&(n.set(a,{x:d,y:r}),r+=e.height+40,t=Math.max(t,e.width))}d+=t+200}return n})(e,t),a=Date.now(),o=0,i=()=>`a${(o++).toString().padStart(6,"0")}`,l=new Map;for(let o of e){let e=r.get(o.id)??{x:0,y:0},s=`rect-${o.id}`,u=`text-${o.id}`,c=A(o);l.set(o.id,s);let d=Math.max(o.width+32,120),f=Math.max((o.text?.length??1)*24+32,50),h=[{id:u,type:"text"}];for(let e of t)(e.from===o.id||e.to===o.id)&&h.push({id:`arrow-${e.id}`,type:"arrow"});let m={id:s,type:"rectangle",x:e.x,y:e.y,width:d,height:f,angle:0,strokeColor:"#1e1e1e",backgroundColor:"transparent",fillStyle:"solid",strokeWidth:1,roughness:1,opacity:100,groupIds:[],roundness:{type:3},seed:b(),version:1,versionNonce:w(),isDeleted:!1,boundElements:h,index:i(),updated:a,link:null,locked:!1,frameId:null};n.push(m);let p={id:u,type:"text",x:e.x+16,y:e.y+16,width:d-32,height:f-32,angle:0,strokeColor:"#1e1e1e",backgroundColor:"transparent",fillStyle:"solid",strokeWidth:1,roughness:1,opacity:100,groupIds:[],roundness:null,seed:b(),version:1,versionNonce:w(),isDeleted:!1,boundElements:null,index:i(),updated:a,link:null,locked:!1,frameId:null,text:c,fontSize:16,fontFamily:E.F2R.Excalifont,textAlign:"left",verticalAlign:"top",containerId:s,originalText:c,autoResize:!0,lineHeight:1.25};n.push(p)}for(let o of t){let t=l.get(o.from),s=l.get(o.to);if(!t||!s)continue;let u=r.get(o.from),c=r.get(o.to);if(!u||!c)continue;let d=e.find(e=>e.id===o.from),f=e.find(e=>e.id===o.to);if(!d||!f)continue;let h=Math.max(d.width+32,120),m=Math.max((d.text?.length??1)*24+32,50),p=Math.max((f.text?.length??1)*24+32,50),g=u.x+h,E=u.y+m/2,A=c.x,v=c.y+p/2,y={id:`arrow-${o.id}`,type:"arrow",x:g,y:E,width:Math.abs(A-g),height:Math.abs(v-E),angle:0,strokeColor:"#1e1e1e",backgroundColor:"transparent",fillStyle:"solid",strokeWidth:1,roughness:1,opacity:100,groupIds:[],roundness:{type:2},seed:b(),version:1,versionNonce:w(),isDeleted:!1,boundElements:null,index:i(),updated:a,link:null,locked:!1,frameId:null,points:[[0,0],[A-g,v-E]],startBinding:{elementId:t,focus:0,gap:5,fixedPoint:[1,.5]},endBinding:{elementId:s,focus:0,gap:5,fixedPoint:[0,.5]},startArrowhead:null,endArrowhead:"arrow",elbowed:!1};n.push(y)}return n},y=i.Ay.div.withConfig({componentId:"sc-4fee60e-0"})(["width:100%;height:100%;position:relative;.jsondraw-wrapper{width:100%;height:100%;}"]),M=()=>{let e=(0,g.A)(e=>e.nodes),t=(0,g.A)(e=>e.edges),o=(0,p.A)(e=>e.darkmodeEnabled),[i,l]=a.useState(null),E=a.useRef(null),b=a.useRef(!1),w=a.useRef(!1),[A,M]=a.useState(!1),S=a.useCallback((e,t,n)=>{w.current=!0;try{localStorage.setItem("jsondraw-autosave",JSON.stringify({elements:e,appState:{theme:t.theme,zoom:t.zoom}}))}catch(e){console.warn("Failed to save to localStorage:",e)}},[]);a.useEffect(()=>{window.JSONDRAW_ASSET_PATH="/jsondraw-fonts/"},[]),a.useEffect(()=>{Promise.all([n.e(54155),n.e(87290),n.e(82909),n.e(58831),n.e(72875)]).then(n.bind(n,70952)).then(e=>{l({JsonDraw:e.JsonDraw})})},[]),a.useEffect(()=>{let n=E.current;if(!n||0===e.length||w.current)return;let r=v(e,t);n.updateScene({elements:r}),requestAnimationFrame(()=>{setTimeout(()=>{n.scrollToContent(void 0,{fitToViewport:!0,viewportZoomFactor:.8})},50)})},[e,t]);let x=a.useCallback(n=>{E.current=n;let r=localStorage.getItem("jsondraw-autosave");if(r)try{let{elements:e,appState:t}=JSON.parse(r);w.current=!0,requestAnimationFrame(()=>{n.updateScene({elements:e,appState:t}),setTimeout(()=>{n.scrollToContent(void 0,{fitToViewport:!0,viewportZoomFactor:.8})},100)});return}catch(e){console.warn("Failed to restore from localStorage:",e)}if(e.length>0&&!b.current){b.current=!0;let r=v(e,t);requestAnimationFrame(()=>{n.updateScene({elements:r}),setTimeout(()=>{n.scrollToContent(void 0,{fitToViewport:!0,viewportZoomFactor:.8})},300)})}},[e,t]),O=a.useCallback(()=>{if(!E.current)return;localStorage.removeItem("jsondraw-autosave"),w.current=!1,b.current=!1;let n=v(e,t);E.current.updateScene({elements:n}),setTimeout(()=>{E.current.scrollToContent(void 0,{fitToViewport:!0,viewportZoomFactor:.8})},100),M(!1),m.oR.success("Drawing cleared! Loaded JSON visualization.")},[e,t]);if(!i)return(0,r.jsx)(s.a,{pos:"relative",h:"100%",w:"100%",children:(0,r.jsx)(u.p,{visible:!0})});let{JsonDraw:T}=i;return(0,r.jsxs)(s.a,{pos:"relative",h:"100%",w:"100%",children:[(0,r.jsx)(c.a,{opened:A,onClose:()=>M(!1),title:"Clear Drawing Session",centered:!0,children:(0,r.jsxs)(d.B,{gap:"md",children:[(0,r.jsxs)(f.E,{children:["This will ",(0,r.jsx)("strong",{children:"permanently delete"})," your current drawing session and load a fresh visualization from the JSON data."]}),(0,r.jsx)(f.E,{c:"dimmed",size:"sm",children:"Make sure to save your work first. Your current drawing will be lost and cannot be recovered."}),(0,r.jsxs)(s.a,{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,r.jsx)(h.$,{variant:"default",onClick:()=>M(!1),children:"Cancel"}),(0,r.jsx)(h.$,{color:"red",onClick:O,children:"Clear & Load JSON"})]})]})}),(0,r.jsx)(y,{children:(0,r.jsx)("div",{className:"jsondraw-wrapper",children:(0,r.jsx)(T,{jsondrawAPI:x,onChange:S,viewModeEnabled:!1,zenModeEnabled:!1,gridModeEnabled:!1,theme:o?"dark":"light",UIOptions:{canvasActions:{export:{saveFileToDisk:!0},clearDrawing:()=>M(!0)}},initialData:{appState:{activeTool:{type:"hand",customType:null,lastActiveTool:null,locked:!1,fromSelection:!1}}}})})})]})};var S=n(70671),x=n(83126),O=n(18512);let T=i.I4.span.withConfig({componentId:"sc-65e7364-0"})(["color:",";&:hover{filter:brightness(1.5);transition:filter 0.2s ease-in-out;}"],({theme:e,$nodeType:t})=>(function({$type:e,theme:t}){return"Object"===e?t.NODE_COLORS.PARENT_OBJ:"Array"===e?t.NODE_COLORS.PARENT_ARR:t.NODE_COLORS.PARENT_OBJ})({theme:e,$type:t})),C=({keyPath:e,nodeType:t})=>(0,r.jsxs)(T,{$nodeType:t,children:[e[0],":"]});var R=n(6340);let N=e=>{let t=(0,i.DP)(),{valueAsString:n,value:a}=e;return(0,r.jsx)("span",{style:{color:function({$value:e,theme:t}){return e&&!Number.isNaN(+e)?t.NODE_COLORS.INTEGER:"true"===e?t.NODE_COLORS.BOOL.TRUE:"false"===e?t.NODE_COLORS.BOOL.FALSE:"null"===e?t.NODE_COLORS.NULL:t.NODE_COLORS.NODE_VALUE}({theme:t,$value:n})},children:(0,r.jsx)(R.J,{children:JSON.stringify(a)})})},k=()=>{let e=(0,i.DP)(),t=(0,O.A)(e=>e.json);return(0,r.jsx)(x.d,{hideRoot:!0,data:JSON.parse(t),valueRenderer:(e,t)=>(0,r.jsx)(N,{valueAsString:e,value:t}),labelRenderer:(e,t)=>(0,r.jsx)(C,{keyPath:e,nodeType:t}),theme:{extend:{overflow:"scroll",height:"100%",scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:e.GRID_BG_COLOR}}})},U=i.Ay.div.withConfig({componentId:"sc-8827178b-0"})(["position:relative;height:100%;background:",';overflow:auto;cursor:url("/assets/cursor.svg"),auto;& > ul{margin-top:0 !important;padding:12px !important;font-family:monospace;font-size:14px;font-weight:500;}.tab-group{position:absolute;top:10px;left:10px;z-index:2;}'],({theme:e})=>e.GRID_BG_COLOR),I=()=>{let[e]=(0,o.F)({key:"viewMode",defaultValue:l.n.Graph});return e===l.n.Graph?(0,r.jsx)(S.GraphView,{}):e===l.n.Tree?(0,r.jsx)(k,{}):e===l.n.JsonDraw?(0,r.jsx)(M,{}):null},D=()=>(0,r.jsx)(U,{onContextMenuCapture:e=>e.preventDefault(),children:(0,r.jsx)(I,{})})},70528:(e,t,n)=>{n.d(t,{w8z:()=>eE,C39:()=>R,btI:()=>eH,$kD:()=>eF,jWW:()=>e8,umX:()=>tn,BW1:()=>e_,Uiw:()=>r,uz1:()=>eZ,RwU:()=>K,Nv:()=>V,Lpk:()=>tx,OJz:()=>d,O7c:()=>ed,En2:()=>x,yK4:()=>p,gYk:()=>ef,uLN:()=>ec,MBo:()=>F,gS3:()=>ee,sNE:()=>eW,JkE:()=>w,Kvf:()=>f,PlL:()=>eu,ds7:()=>m,CH3:()=>v,BxN:()=>b,CWZ:()=>ez,jN1:()=>h,qbJ:()=>A,n_W:()=>E,x3G:()=>eU,IKO:()=>e2,zs0:()=>ea,gIs:()=>er,bFe:()=>eh,g8m:()=>em,koE:()=>_,Mdp:()=>eI,fwN:()=>eV,sLF:()=>e4,Fmi:()=>eQ,ux9:()=>eo,y7J:()=>el,A7N:()=>eR,FnV:()=>ei,cFN:()=>tt,eyD:()=>k,VS8:()=>e1,iA8:()=>e9,qlq:()=>eG,kG2:()=>D,viI:()=>j,lll:()=>$,yhg:()=>ew,JfX:()=>eb,BVg:()=>ek,vli:()=>n2,F2R:()=>J,jhS:()=>Z,c5O:()=>ta,$N6:()=>W,cJQ:()=>et,wE2:()=>to,Nwk:()=>eC,fT1:()=>ep,PE:()=>ev,Rkl:()=>tO,Jh2:()=>eX,n4S:()=>eY,U3N:()=>I,iH4:()=>te,XPw:()=>ti,RY5:()=>eD,frb:()=>c,_bN:()=>eN,nDQ:()=>eT,Z$T:()=>eg,HKz:()=>U,v0U:()=>en,_d6:()=>e5,DQk:()=>eO,NhD:()=>tr,E7H:()=>td,nXs:()=>tf,K2q:()=>e7,fuY:()=>H,Mu1:()=>B,KAI:()=>t_,oph:()=>tu,bT:()=>eq,aoe:()=>eK,umS:()=>eS,ZiC:()=>L,Uj4:()=>es,WVf:()=>e3,AMv:()=>eJ,oLX:()=>eP,RcO:()=>ej,haA:()=>ey,Ehm:()=>e$,SK7:()=>N,D48:()=>P,CVM:()=>X,ERw:()=>e0,G2B:()=>eM,$rm:()=>e6,S8t:()=>eL,n9U:()=>eB,a3Y:()=>q,n70:()=>G,bLU:()=>ex,q2B:()=>nj,Kvi:()=>u,VxE:()=>nm,PeE:()=>nd,xM_:()=>nf,Ga7:()=>nh,xbG:()=>nR,Bre:()=>nu,caZ:()=>tG,bgj:()=>n$,ivT:()=>t2,W_2:()=>nI,mKv:()=>nC,kiw:()=>ty,sg1:()=>tZ,xqS:()=>tv,IoC:()=>t3,vTE:()=>tX,vHJ:()=>t1,oOL:()=>nB,SLp:()=>nr,Klq:()=>na,jQv:()=>ns,Nle:()=>y,csi:()=>t$,mst:()=>eA,jjo:()=>nq,vDo:()=>Q,fM3:()=>tJ,Dy6:()=>tz,w28:()=>tA,CC9:()=>nM,JBc:()=>t7,rK6:()=>tj,kss:()=>ts,pml:()=>nl,vZu:()=>tI,opH:()=>nP,QON:()=>nc,keL:()=>tl,V1S:()=>nN,RYN:()=>nH,PnV:()=>tR,z3Q:()=>tw,sN9:()=>O,iTV:()=>th,LQV:()=>nb,gml:()=>tg,un6:()=>tb,EVG:()=>tW,b4D:()=>tK,MZp:()=>n0,ci:()=>nU,ln4:()=>nw,$XS:()=>nS,V8t:()=>ne,nrF:()=>tE,EBs:()=>t5,NSI:()=>nA,hwb:()=>nT,SiS:()=>nE,Ms_:()=>tV,tyf:()=>S,uFH:()=>tm,B15:()=>tq,lTL:()=>tM,qhc:()=>no,LJj:()=>tC,BjF:()=>nk,x3z:()=>nn,hnC:()=>tY,I1O:()=>nL,nuV:()=>T,obq:()=>nX,j09:()=>nF,gne:()=>nx,zEH:()=>nZ,MnC:()=>nY,wB3:()=>nV,pOF:()=>tD,Hn0:()=>ni,Ob8:()=>M,AF:()=>t9,Yjp:()=>tS,g0e:()=>tk,vmA:()=>tN,Lvr:()=>tU,$dg:()=>nG,dhs:()=>C,G7P:()=>tQ,$rL:()=>ng,cHA:()=>n_,iNY:()=>np,PcD:()=>n1,ARs:()=>nt,QP8:()=>t8,jqO:()=>ny,JNR:()=>nD,Gxe:()=>t4,dNF:()=>nv});class r{constructor(e){this.scoreFunction=e,this.content=[]}sinkDown(e){let t=this.content[e],n=this.scoreFunction(t);for(;e>0;){let t=(e+1>>1)-1,r=this.content[t];if(n<this.scoreFunction(r))this.content[e]=r,e=t;else break}this.content[e]=t}bubbleUp(e){let t=this.content.length,n=this.content[e],r=this.scoreFunction(n);for(;;){let n=(e+1<<1)-1,a=n+1,o=e,i=r;if(n<t){let e=this.scoreFunction(this.content[n]);e<i&&(o=n,i=e)}if(a<t&&this.scoreFunction(this.content[a])<i&&(o=a),o===e)break;this.content[e]=this.content[o],e=o}this.content[e]=n}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){if(0===this.content.length)return null;let e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e}remove(e){if(0===this.content.length)return;let t=this.content.indexOf(e),n=this.content.pop();t<this.content.length&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}}var a,o,i=n(62465),l=n(4861);let s=new Map,u=e=>{var t,n,r,a,o,u;let c,d,f,h,m,p,g,E,b,w,A=s?.get(e);if(A)return A;let v=(0,i.A)(e),y=v.getAlpha(),S=v.toRgb(),x=(t=S.r,n=S.g,r=S.b,c=(0,l.qE)(93,0,100)/100,f=(d=e=>Math.round((0,l.qE)(e*(1-c)+(255-e)*c,0,255)))(t),{r:f,g:d(n),b:d(r)}),O=(a=x.r,o=x.g,u=x.b,h=a/255,m=o/255,p=u/255,E=Math.cos(g=(0,l.tR)(180)),{r:Math.round(255*Math.max(0,Math.min(1,h*(w=[.213+.787*E-.213*(b=Math.sin(g)),.715-.715*E-.715*b,.072-.072*E+.928*b,.213-.213*E+.143*b,.715+.285*E+.14*b,.072-.072*E-.283*b,.213-.213*E-.787*b,.715-.715*E+.715*b,.072+.928*E+.072*b])[0]+m*w[1]+p*w[2]))),g:Math.round(255*Math.max(0,Math.min(1,h*w[3]+m*w[4]+p*w[5]))),b:Math.round(255*Math.max(0,Math.min(1,h*w[6]+m*w[7]+p*w[8])))}),T=M(O.r,O.g,O.b,y);return s&&s.set(e,T),T},c=5,d=5,f=4,h=4,m=1,p={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:["#f8f9fa","#e9ecef","#ced4da","#868e96","#343a40"],red:["#fff5f5","#ffc9c9","#ff8787","#fa5252","#e03131"],pink:["#fff0f6","#fcc2d7","#f783ac","#e64980","#c2255c"],grape:["#f8f0fc","#eebefa","#da77f2","#be4bdb","#9c36b5"],violet:["#f3f0ff","#d0bfff","#9775fa","#7950f2","#6741d9"],blue:["#e7f5ff","#a5d8ff","#4dabf7","#228be6","#1971c2"],cyan:["#e3fafc","#99e9f2","#3bc9db","#15aabf","#0c8599"],teal:["#e6fcf5","#96f2d7","#38d9a9","#12b886","#099268"],green:["#ebfbee","#b2f2bb","#69db7c","#40c057","#2f9e44"],yellow:["#fff9db","#ffec99","#ffd43b","#fab005","#f08c00"],orange:["#fff4e6","#ffd8a8","#ffa94d","#fd7e14","#e8590c"],bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},g=["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"].reduce((e,t)=>(t in p&&(e[t]=p[t]),e),{}),E=[p.black,p.red[h],p.green[h],p.blue[h],p.yellow[h]],b=[p.transparent,p.red[m],p.green[m],p.blue[m],p.yellow[m]],w=[p.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],A={transparent:p.transparent,white:p.white,gray:p.gray,black:p.black,bronze:p.bronze,...g},v={transparent:p.transparent,white:p.white,gray:p.gray,black:p.black,bronze:p.bronze,...g},y=e=>[p.cyan[e],p.blue[e],p.violet[e],p.grape[e],p.pink[e],p.green[e],p.teal[e],p.yellow[e],p.orange[e],p.red[e]],M=(e,t,n,r)=>{let a=`#${(0x1000000+(e<<16)+(t<<8)+n).toString(16).slice(1)}`;if(void 0!==r&&r<1){let e=Math.round(255*r).toString(16).padStart(2,"0");return`${a}${e}`}return a},S=e=>0===(0,i.A)(e).getAlpha(),x=240,O=(e,t=160)=>{if(!e)return!0;if(S(e))return!1;let n=(0,i.A)(e);if(!n.isValid())return!0;let{r,g:a,b:o}=n.toRgb();return(299*r+587*a+114*o)/1e3<t},T=e=>{if(S(e=e.trim()))return e;let t=(0,i.A)(e);return t.isValid()?"hex"!==t.getFormat()||e.startsWith("#")?e:`#${e}`:null},C="ResizeObserver"in window,R="JsonDraw",N=36,k=10,U=20,I=8,D=5,j=1,P=30,L=Math.PI/12,_="red",F={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},H={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},B={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var $=((a={}).COPY="copy",a.PASTE="paste",a.CUT="cut",a.KEYDOWN="keydown",a.KEYUP="keyup",a.MOUSE_MOVE="mousemove",a.RESIZE="resize",a.UNLOAD="unload",a.FOCUS="focus",a.BLUR="blur",a.DRAG_OVER="dragover",a.DROP="drop",a.GESTURE_END="gestureend",a.BEFORE_UNLOAD="beforeunload",a.GESTURE_START="gesturestart",a.GESTURE_CHANGE="gesturechange",a.POINTER_MOVE="pointermove",a.POINTER_DOWN="pointerdown",a.POINTER_UP="pointerup",a.STATE_CHANGE="statechange",a.WHEEL="wheel",a.TOUCH_START="touchstart",a.TOUCH_END="touchend",a.HASHCHANGE="hashchange",a.VISIBILITY_CHANGE="visibilitychange",a.SCROLL="scroll",a.JSONDRAW_LINK="jsondraw-link",a.MENU_ITEM_SELECT="menu.itemSelect",a.MESSAGE="message",a.FULLSCREENCHANGE="fullscreenchange",a);let G={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},V={SIDEBAR:"sidebar",SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup",SHAPE_ACTIONS_THEME_SCOPE:"shape-actions-theme-scope",FRAME_NAME:"frame-name",DROPDOWN_MENU_EVENT_WRAPPER:"dropdown-menu-event-wrapper"},W={sm:16,md:20,lg:28,xl:36},K="Xiaolai",q="Segoe UI Emoji",J={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},z="sans-serif",Y="monospace",Z={[K]:100,...{[z]:998,[Y]:999},[q]:1e3},Q=e=>{let t=function(e){switch(e){case J.Cascadia:case J["Comic Shanns"]:return Y;default:return z}}(e);return e===J.Excalifont?[K,t,q]:[t,q]},X={LIGHT:"light",DARK:"dark"},ee="invert(93%) hue-rotate(180deg)",et={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},en=1,er=20,ea=J.Excalifont,eo="left",ei="top",el=2,es=4,eu=7.99999,ec="#ffffff",ed="#1e1e1e",ef="#a2f1a6",eh=20,em=5,ep={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},eg={text:"text/plain",html:"text/html",json:"application/json",jsondraw:"application/vnd.jsondraw+json",jsondrawClipboard:"application/vnd.jsondraw.clipboard+json",jsondrawlib:"application/vnd.jsondrawlib+json",jsondrawlibIds:"application/vnd.jsondrawlib.ids+json","jsondraw.svg":"image/svg+xml","jsondraw.png":"image/png",binary:"application/octet-stream",...ep},eE=[eg.text,eg.html,...Object.values(ep)],eb={png:"png",svg:"svg",clipboard:"clipboard"},ew={jsondraw:"jsondraw",jsondrawClipboard:"jsondraw/clipboard",jsondrawLibrary:"jsondrawlib",jsondrawClipboardWithAPI:"jsondraw-api/clipboard"},eA=()=>window.JSONDRAW_EXPORT_SOURCE||window.location.origin,ev=500,ey=300,eM=500,eS=100,ex=.1,eO=.1,eT=30,eC=300,eR={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},eN=2,ek=[1,2,3],eU=10,eI=1440,eD=4194304,ej="http://www.w3.org/2000/svg",eP=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,eL={jsondraw:2,jsondrawLibrary:2},e_=5,eF=.7,eH=11,eB={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},e$={LEFT:"left",CENTER:"center",RIGHT:"right"},eG=20,eV=.25,eW=32,eK={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},eq={architect:0,artist:1,cartoonist:2},eJ={thin:1,bold:2,extraBold:4},ez={strokeColor:p.black,backgroundColor:p.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:eq.artist,opacity:100,locked:!1},eY="library",eZ="search",eQ={name:"default",defaultTab:eY},eX=new Set(["iframe","embeddable","image"]),e0={selection:"selection",lasso:"lasso",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},e1={OAI_API_KEY:"jsondraw-oai-api-key",MERMAID_TO_JSONDRAW:"mermaid-to-jsondraw",PUBLISH_LIBRARY:"publish-library-data"},e2="Untitled",e3={generalStats:1,elementProperties:2},e5=1,e8={sharp:"sharp",round:"round",elbow:"elbow"},e4=.3,e9="element",e7=Symbol.for("__test__originalId__");var e6=((o={}).ACTIVE="active",o.AWAY="away",o.IDLE="idle",o);let te=20,tt=35,tn=700,tr={background:"var(--mobile-action-button-bg)"},ta={[J.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[J.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[J["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[J["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[J.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[J.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[J.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[J["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[J.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[Z.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[Z["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},to={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},ti="local:",tl=(e,t,n)=>{let{unitsPerEm:r,ascender:a,descender:o}=ta[e]?.metrics||ta[J.Excalifont].metrics,i=t/r;return i*a+(n-i*a+i*o)/2},ts=e=>{let{lineHeight:t}=ta[e]?.metrics||ta[J.Excalifont].metrics;return t};class tu{tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(nF(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=ni();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}constructor(){this.jobs=[],this.running=!1}}let tc="jsondraw.desktopUIMode",td=1440,tf=1229,th=/Mac|iPod|iPhone|iPad/.test(navigator.platform),tm=/^Win/.test(navigator.platform),tp=/\b(android)\b/i.test(navigator.userAgent),tg="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,tE=-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari"),tb=/iPad|iPhone/i.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,tw=()=>navigator.brave?.isBrave?.name==="isBrave",tA=(e,t)=>{let n,r;return e<=599||t<500&&e<1e3?"phone":(n=Math.min(e,t),r=Math.max(e,t),n>=600&&r<=1180)?"tablet":"desktop"},tv=e=>"phone"===e.formFactor?"mobile":"tablet"===e.formFactor?"compact":e.desktopUIMode,ty=e=>{let t="unknown";return tb?t="ios":tp?t="android":e&&(t="other"),{isMobileDevice:(()=>{let e=navigator.userAgent||"",t=navigator.platform||"",n=navigator.userAgentData;if(n){let e=(n.platform||"").toLowerCase();if(!0===n.mobile)return!0;if(!1===n.mobile&&"android"===e)return matchMedia?.("(hover: none)").matches&&matchMedia?.("(pointer: coarse)").matches;if("windows"===e||"macos"===e||"linux"===e||"chrome os"===e)return!1}if(tb)return!0;if(tp){let t=/Mobile/i.test(e);if(t||!t)return matchMedia?.("(hover: none)").matches&&matchMedia?.("(pointer: coarse)").matches}return/Win|Linux|CrOS|Mac/.test(t)||/Windows NT|X11|CrOS|Macintosh/.test(e),!1})(),platform:t}},tM=()=>{try{let e=window.localStorage.getItem(tc);if("compact"===e||"full"===e)return e}catch(e){}return null},tS=e=>{if("compact"===e||"full"===e){try{window.localStorage.setItem(tc,e)}catch(e){}return e}},tx={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},tO={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:th?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},tT=new Map([[tO.Z,tx.Z],[tO.Y,tx.Y]]),tC=(e,t)=>{let n;if(t===e.key.toLowerCase())return!0;let r=tT.get(t);return!!(r&&(n=e.key,!/^[a-z]$/.test(n.toLowerCase()))&&e.code===r)},tR=e=>e===tO.ARROW_LEFT||e===tO.ARROW_RIGHT||e===tO.ARROW_DOWN||e===tO.ARROW_UP,tN=e=>e.altKey,tk=e=>e.shiftKey,tU=e=>e.shiftKey,tI=e=>{let t=e.map(e=>e[0]),n=e.map(e=>e[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},tD=(e,t,n,r)=>{let a=n.map(t=>t[e]),o=Math.max(...a),i=Math.min(...a),s=o-i,u=0===s?1:t/s,c=1/0,d=n.map(t=>{let n=t[e]*u,r=[...t];return r[e]=n,n<c&&(c=n),r});if(!r||2===d.length)return d;let f=i-c;return d.map(t=>(0,l.$p)(t.map((t,n)=>n===e?t+f:t)))},tj=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var tP=n(32671),tL=n.n(tP);class t_{constructor(e,t){this.entries={},this.pool=new(tL())(e,t)}all(){let e=e=>{if(e.data.result){let[t,n]=e.data.result;this.entries[t]=n}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}}var tF=n(48449),tH=n(23055),tB=n(65364);let t$=()=>{let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),a=`${e.getHours()}`.padStart(2,"0"),o=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${a}${o}`},tG=e=>e.charAt(0).toUpperCase()+e.slice(1),tV=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),tW=e=>e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,tK=e=>tW(e)||e instanceof Element&&!!e.closest("label, button"),tq=e=>e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&("text"===e.type||"number"===e.type||"password"===e.type||"search"===e.type),tJ=({fontFamily:e})=>{for(let[t,n]of Object.entries(J))if(n===e)return`${t}${Q(n).map(e=>`, ${e}`).join("")}`;return q},tz=({fontSize:e,fontFamily:t})=>`${e}px ${tJ({fontFamily:t})}`,tY=async e=>{requestAnimationFrame(()=>requestAnimationFrame(e))},tZ=(e,t)=>{let n=0,r=null,a=(...a)=>{r=a,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...a)},t)};return a.flush=()=>{if(clearTimeout(n),r){let t=r;r=null,e(...t)}},a.cancel=()=>{r=null,clearTimeout(n)},a},tQ=(e,t)=>{let n=null,r=null,a=null,o=t=>{n=window.requestAnimationFrame(()=>{n=null,e(...t),r=null,a&&(r=a,a=null,o(r))})},i=(...i)=>{nE()?e(...i):(r=i,null===n?o(r):t?.trailing&&(a=i))};return i.flush=()=>{null!==n&&(cancelAnimationFrame(n),n=null),r&&(e(...a||r),r=a=null)},i.cancel=()=>{r=a=null,null!==n&&(cancelAnimationFrame(n),n=null)},i},tX=e=>1-Math.pow(1-e,4),t0=(e,t,n)=>(t-e)*tX(n)+e,t1=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:a,onStart:o,onEnd:i,onCancel:l})=>{let s,u=!1,c=0;return c=window.requestAnimationFrame(function l(d){if(u)return;void 0===s&&(s=d,o?.());let f=Math.min(d-s,r),h=tX(f/r),m={};if(Object.keys(e).forEach(n=>{let r=(t[n]-e[n])*h+e[n];m[n]=r}),n(m),f<r){let o=f/r,i={};Object.keys(e).forEach(n=>{let r,l=e[n],s=t[n];null==(r=a?a(l,s,o,n):t0(l,s,o))&&(r=t0(l,s,o)),i[n]=r}),n(i),c=window.requestAnimationFrame(l)}else n(t),i?.()}),()=>{l?.(),u=!0,window.cancelAnimationFrame(c)}},t2=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,a=Array(Math.ceil(e.length/t));for(;n<e.length;)a[r++]=e.slice(n,n+=t);return a},t3=(e,t)=>Math.abs(e-t),t5=e=>"selection"===e||"lasso"===e,t8=(e,t)=>"custom"===t.type?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:void 0===t.lastActiveToolBeforeEraser?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},t4=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:a,scrollX:o,scrollY:i})=>({x:(e-r)/n.value-o,y:(t-a)/n.value-i}),t9=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:a,scrollX:o,scrollY:i})=>({x:(e+o)*n.value+r,y:(t+i)*n.value+a}),t7=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),t6=RegExp(`^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]`),ne=e=>t6.test(e),nt=e=>{let[t,n]=e;return{x:t,y:n}},nn=e=>{if(e?.name==="AbortError")return void console.warn(e);throw e},nr=(e,t,n=0)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length,Math.max(n,0)))-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return -1},na=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length-1,Math.max(n,0)))+1;for(;--r>-1;)if(t(e[r],r,e))return r;return -1},no=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(null!=r)return r}},ni=()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},nl=e=>{let t=e.parentElement;for(;t&&t!==document.body;){let{overflowY:e}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&("auto"===e||"scroll"===e||"overlay"===e))return t;t=t.parentElement}return document},ns=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1)return void t.focus();t=t.parentElement}},nu=e=>Array.from(e).map(e=>`0${e.toString(16)}`.slice(-2)).join(""),nc=()=>nE()?1:Date.now(),nd=e=>e instanceof Map?e:e.reduce((e,t)=>(e.set("string"==typeof t?t:t.id,t),e),new Map),nf=e=>e.reduce((e,t,n)=>(e.set(t.id,[t,n]),e),new Map),nh=(e,t)=>e.reduce((e,n,r)=>(e[t?t(n):r]=n,e),{}),nm=e=>e.reduce((t,n,r)=>{let a={...n,prev:null,next:null};if(0!==r){let n=t[r-1];if(a.prev=n,n.next=a,r===e.length-1){let e=t[0];a.next=e,e.prev=a}}return t.push(a),t},[]),np=e=>Array.isArray(e)?e:e.values(),ng=e=>Array.isArray(e)?e:Array.from(np(e)),nE=()=>false,nb=()=>false,nw=()=>true,nA=()=>void 0!==tB,nv=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),ny=(e,t)=>{let n=!1;for(let r in t){let a=t[r];if(void 0!==a){if(e[r]===a&&("object"!=typeof a||null===a))continue;n=!0}}return n?{...e,...t}:e},nM=()=>{try{return window.self===window.top?"top":"iframe"}catch(e){return"iframe"}},nS=e=>!!e&&"object"==typeof e&&"then"in e&&"catch"in e&&"finally"in e,nx=e=>{let t=e?.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(e=>e.tabIndex>-1&&!e.disabled):[]},nO=(e,t)=>!!(Array.isArray(e)&&Array.isArray(t))&&0===e.length&&0===t.length||e===t,nT=(e,t,n,r=!1)=>{let a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let a of n)if(!(e[a]===t[a]||nO(e[a],t[a])))return r&&console.warn(`%cisShallowEqual: ${a} not equal ->`,"color: #8B4000",e[a],t[a]),!1;return!0}return a.every(a=>{let o=n?.[a],i=o?o(e[a],t[a]):e[a]===t[a]||nO(e[a],t[a]);return!i&&r&&console.warn(`%cisShallowEqual: ${a} not equal ->`,"color: #8B4000",e[a],t[a]),i})},nC=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e?.(r),!n||!r?.defaultPrevented)return t?.(r)},nR=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw Error(t)};function nN(e,t){if(!e)throw Error(t)}let nk=e=>{let t,n,r=function(r){let a=Object.entries(r);if(t){let e=!0;for(let[n,r]of a)if(t.get(n)!==r){e=!1;break}if(e)return n}let o=e(r);return t=new Map(a),n=o,o};return r.clear=()=>{t=void 0,n=void 0},r},nU=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),nI=e=>JSON.parse(JSON.stringify(e)),nD=(e,t)=>nT(e,t)?e:t;function nj(e,t,n,r){return e?(e?.addEventListener?.(t,n,r),()=>{e?.removeEventListener?.(t,n,r)}):()=>{}}function nP(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],a=e[1],o=e[2],i=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${a[0].toFixed(2)},${a[1].toFixed(2)} ${(0,l.G8)(a[0],o[0]).toFixed(2)},${(0,l.G8)(a[1],o[1]).toFixed(2)} T`;for(let t=2,o=n-1;t<o;t++)r=e[t],a=e[t+1],i+=`${(0,l.G8)(r[0],a[0]).toFixed(2)},${(0,l.G8)(r[1],a[1]).toFixed(2)} `;return t&&(i+="Z"),i}let nL=e=>e.replace(/\r?\n|\r/g,"\n");function n_(e){return e}let nF=async(e,...t)=>new Promise(n=>{n(e(...t))}),nH=(...e)=>Math.max(...e.map(e=>+!!e))>0,nB=e=>e.replace(/"/g,"&quot;"),n$=e=>Array.isArray(e)?e:[e],nG=e=>Array.isArray(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,nV=(e,t)=>{if(0===nG(e))return null;let n=t||(e=>e),r=null;for(let t of e){let e=n(t);if(null!==r&&r!==e||null==e)return null;r=e}return r},nW={COMPLEX_BINDINGS:!1},nK=null,nq=e=>{if(!nK)try{let e=localStorage.getItem("jsondraw-feature-flags");e&&(nK=JSON.parse(e)??nW)}catch{}return(nK||nW)[e]},nJ=new tH.o(Date.now()),nz=0,nY=()=>Math.floor(0x80000000*nJ.next()),nZ=()=>nE()?`id${nz++}`:(0,tF.Ak)();var nQ=n(24200);let nX=e=>(e=e.trim())?(0,nQ.J)(nB(e)):e,n0=e=>!!(e?.includes(location.origin)||e?.startsWith("/")),n1=e=>{if((e=nX(e)).startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class n2{on(...e){let t=e.flat().filter(e=>"function"==typeof e);return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(e=>"function"==typeof e);t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(e=>!t.includes(e))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}constructor(){this.subscribers=[]}}},91139:(e,t,n)=>{n.d(t,{$p:()=>l,A:()=>c,B7:()=>g,E4:()=>u,Hx:()=>o,O$:()=>s,PU:()=>p,SM:()=>f,VM:()=>d,cK:()=>h,ks:()=>m,m3:()=>i});var r=n(42212),a=n(4368);function o(e,t){return[e,t]}function i(e){return 2===e.length?[e[0],e[1]]:void 0}function l(e){return e}function s(e,t=function(e,t){return[0,0]}(0,0)){return[t[0]+e[0],t[1]+e[1]]}function u(e,t,n=r.Pk){let a=Math.abs;return a(e[0]-t[0])<n&&a(e[1]-t[1])<n}function c([e,t],[n,r],a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}function d(e,t=[0,0]){return[e[0]+t[0],e[1]+t[1]]}function f(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function h(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function m(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}let p=(e,t,n)=>d(t,(0,a.cb)((0,a.Yj)(e,t),n)),g=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])}}]);
//# sourceMappingURL=60157.9c09806892cc8943.js.map