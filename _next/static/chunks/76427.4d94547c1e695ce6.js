"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76427],{4368:(e,t,n)=>{function r(e,t,n=0,a=0){return[e-n,t-a]}function a(e,t=[0,0],n,i=[0,1]){let o=r(e[0]-t[0],e[1]-t[1]);return n&&u(o)<n*n?i:o}function i(e,t){return e[0]*t[1]-t[0]*e[1]}function o(e,t){return e[0]*t[0]+e[1]*t[1]}function l(e,t){return[e[0]+t[0],e[1]+t[1]]}function s(e,t){return[e[0]-t[0],e[1]-t[1]]}function c(e,t){return r(e[0]*t,e[1]*t)}function u(e){return e[0]*e[0]+e[1]*e[1]}n.d(t,{Lb:()=>d,No:()=>o,Yj:()=>a,_J:()=>i,at:()=>s,cb:()=>c,dC:()=>l,i1:()=>r,zN:()=>f});let d=e=>{let t=Math.sqrt(u(e));return 0===t?r(0,0):r(e[0]/t,e[1]/t)},f=e=>r(e[1],-e[0])},4861:(e,t,n)=>{n.d(t,{Pk:()=>r.Pk,G8:()=>r.G8,OY:()=>m,qE:()=>r.qE,e8:()=>p,PN:()=>A,SG:()=>E,cb:()=>x,Ok:()=>v,Dy:()=>S,H7:()=>w,tR:()=>i,MQ:()=>P,yl:()=>r.yl,Bf:()=>r.Bf,B7:()=>u.B7,cH:()=>l,wd:()=>D,_r:()=>F,Q4:()=>_,AI:()=>a,SM:()=>u.SM,cK:()=>u.cK,ks:()=>u.ks,_U:()=>u.Hx,m3:()=>u.m3,$p:()=>u.$p,O$:()=>u.O$,V5:()=>L,A:()=>u.A,PU:()=>u.PU,VM:()=>u.VM,E4:()=>u.E4,n1:()=>M,Ao:()=>O,f:()=>C,VV:()=>s,M6:()=>c,nv:()=>o,_s:()=>j,UB:()=>R,$C:()=>U,g6:()=>N,YC:()=>I,LI:()=>r.LI,yw:()=>r.yw,iD:()=>H,i1:()=>d.i1,dC:()=>d.dC,_J:()=>d._J,No:()=>d.No,Yj:()=>d.Yj,Lb:()=>d.Lb,LP:()=>d.cb,at:()=>d.at});var r=n(42212);let a=e=>e<0?e%(2*Math.PI)+2*Math.PI:e%(2*Math.PI);function i(e){return e*Math.PI/180}function o(e){return 180*e/Math.PI}function l(e){return Math.abs(Math.sin(2*e))<r.Pk}function s(e,t,n){return(e=a(e),(t=a(t))<(n=a(n)))?e>=t&&e<=n:e>=t||e<=n}function c(e,t){let n=(e=a(e))-(t=a(t));return n<-Math.PI?n+=2*Math.PI:n>Math.PI&&(n-=2*Math.PI),Math.abs(n)}var u=n(91139),d=n(4368);let f=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],h=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function p(e,t,n,r){return[e,t,n,r]}let m=(e,t)=>(0,u.Hx)((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]),g=[[.5,0],[.2,0],[.8,0]],b=([e,t],n,r)=>{let a=function(e,t,n,r,a=.001,i=10){let o=1/0,l=0;for(;o>=a;){if(l>=i)return null;let s=1-n,c=s*s,u=c*s,d=n*n,f=d*n,h=u*e[0][0]+3*c*n*e[1][0]+3*s*d*e[2][0]+f*e[3][0],p=u*e[0][1]+3*c*n*e[1][1]+3*s*d*e[2][1]+f*e[3][1],m=t[0][0]+r*(t[1][0]-t[0][0]),g=t[0][1]+r*(t[1][1]-t[0][1]),b=h-m,E=p-g;if((o=Math.abs(b)+Math.abs(E))<a)break;let w=-3*c*e[0][0]+3*c*e[1][0]-6*s*n*e[1][0]-3*d*e[2][0]+6*s*n*e[2][0]+3*d*e[3][0],y=-3*c*e[0][1]+3*c*e[1][1]-6*s*n*e[1][1]-3*d*e[2][1]+6*s*n*e[2][1]+3*d*e[3][1],A=-(t[1][0]-t[0][0]),v=-(t[1][1]-t[0][1]),x=w*v-A*y;if(1e-12>Math.abs(x))return null;let S=1/x,M=S*(-(v*b)- -(A*E)),O=S*(-(-y*b)+-(w*E));n+=M,r+=O,l+=1}return[n,r]}(r,n,e,t,.01,4);if(!a)return null;let[i,o]=a;return i<0||i>1||o<0||o>1?null:m(r,i)};function E(e,t){let n=b(g[0],t,e);return n||(n=b(g[1],t,e))||(n=b(g[2],t,e))?[n]:[]}function w(e,t){let n=function(e,t,n=.001){let r=0;for(let n=1/0,a=0;a<30;a++){let i=(0,u.cK)(t,m(e,a/30));i<n&&(n=i,r=a)}let a=((e,t,r,a=n)=>{let i,o=e,l=t;for(;l-o>a;)r((i=(l+o)/2)-a)<r(i+a)?l=i:o=i;return i})(Math.max((r-1)/30,0),Math.min((r+1)/30,1),n=>(0,u.cK)(t,m(e,n)));return a?m(e,a):null}(e,t);return n?(0,u.cK)(t,n):0}function y([e,t,n,r],a){return(0,d.i1)(-3*(1-a)*(1-a)*e[0]+3*(1-a)*(1-a)*t[0]-6*a*(1-a)*t[0]-3*a*a*n[0]+6*a*(1-a)*n[0]+3*a*a*r[0],-3*(1-a)*(1-a)*e[1]+3*(1-a)*(1-a)*t[1]-6*a*(1-a)*t[1]-3*a*a*n[1]+6*a*(1-a)*n[1]+3*a*a*r[1])}function A(e,t=.5){if(e.length<2)return;let n=[];for(let i=0;i<e.length-1;i++){var r,a;let o=e[i-1<0?0:i-1],l=e[i],s=e[i+1>=e.length?e.length-1:i+1],c=e[i+2>=e.length?e.length-1:i+2],d=[(s[0]-o[0])*t,(s[1]-o[1])*t],f=[(c[0]-l[0])*t,(c[1]-l[1])*t],h=l[0]+d[0]/3,p=l[1]+d[1]/3,m=s[0]-f[0]/3,g=s[1]-f[1]/3;n.push((r=(0,u.Hx)(l[0],l[1]),a=(0,u.Hx)(h,p),[r,a,(0,u.Hx)(m,g),(0,u.Hx)(s[0],s[1])]))}return n}function v([e,t,n,r],a,i=50){let o=[];for(let l=0;l<=i;l++){let s=l/i,c=[e,t,n,r],f=m(c,s),h=(0,d.Lb)(y(c,s)),p=(0,d.zN)(h);o.push((0,u.O$)((0,d.cb)(p,a),f))}return o}function x(e){let t=0;for(let n=0;n<24;n++){let r=y(e,.5*f[n]+.5),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);t+=h[n]*a}return .5*t}function S(e,t){if(t<=0)return m(e,0);if(t>=1)return m(e,1);let n=x(e),r=n*t,a=0,i=1,o=t,l=0,s=1e-4*n;for(let t=0;t<20&&!(Math.abs((l=function(e,t){if(t<=0)return 0;if(t>=1)return x(e);let n=t/2,r=t/2,a=0;for(let t=0;t<24;t++){let i=y(e,n*f[t]+r),o=Math.sqrt(i[0]*i[0]+i[1]*i[1]);a+=h[t]*o}return n*a}(e,o))-r)<s);t++)l<r?a=o:i=o,o=(a+i)/2;return m(e,o)}function M(...e){return T(e)}function O(e){return T(e)}let C=(e,t)=>{let[n,r]=e,a=0;for(let e=0;e<t.length;e++){let i=(e+1)%t.length,[o,l]=t[e],[s,c]=t[i];l<=r?c>r&&(s-o)*(r-l)-(n-o)*(c-l)>0&&a++:c<=r&&(s-o)*(r-l)-(n-o)*(c-l)<0&&a--}return 0!==a};function T(e){var t;return(t=e,(0,u.E4)(t[0],t[t.length-1]))?e:[...e,e[0]]}var k=n(70528);function R(e,t){return(0,k.cHA)([e,t])}let N=([e,t],[n,r])=>e<=n?t>=n:e>=n&&r>=e,U=([e,t],[n,r])=>{let a=Math.max(e,n),i=Math.min(t,r);return a<=i?(0,k.cHA)([a,i]):null},j=(e,[t,n])=>e>=t&&e<=n;function I(e,t){return[e,t]}function D(e,t){return[e,t]}let L=(e,t,n=r.Pk)=>{let a=P(e,t);return 0===a||a<n},P=(e,t)=>{let n,r,[a,i]=e,[[o,l],[s,c]]=t,u=s-o,d=c-l,f=u*u+d*d,h=-1;0!==f&&(h=((a-o)*u+(i-l)*d)/f),h<0?(n=o,r=l):h>1?(n=s,r=c):(n=o+h*u,r=l+h*d);let p=a-n,m=i-r;return Math.sqrt(p*p+m*m)};function F(e,t,n){let r=function(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],a=t[1][1]-t[0][1],i=t[0][0]-t[1][0],o=n*i-a*r;if(0!==o){let l=n*e[0][0]+r*e[0][1],s=a*t[0][0]+i*t[0][1];return(0,u.Hx)((l*i-s*r)/o,(n*s-a*l)/o)}return null}([e[0],e[1]],[t[0],t[1]]);return r&&L(r,t,n)&&L(r,e,n)?r:null}function _(e,t){return F(e,t)?0:Math.min(P(e[0],t),P(e[1],t),P(t[0],e),P(t[1],e))}function H([e,t,n],r){let a=(e,t,n)=>(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1]),i=a(r,e,t),o=a(r,t,n),l=a(r,n,e);return!((i<0||o<0||l<0)&&(i>0||o>0||l>0))}},42212:(e,t,n)=>{n.d(t,{Bf:()=>s,G8:()=>l,LI:()=>i,Pk:()=>r,qE:()=>a,yl:()=>c,yw:()=>o});let r=1e-4,a=(e,t,n)=>Math.min(Math.max(e,t),n),i=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},o=(e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r},l=(e,t)=>(e+t)/2,s=e=>"number"==typeof e&&Number.isFinite(e),c=(e,t,n=r)=>Math.abs(e-t)<n},70528:(e,t,n)=>{n.d(t,{w8z:()=>eb,C39:()=>k,btI:()=>eH,$kD:()=>e_,jWW:()=>e8,umX:()=>tn,BW1:()=>eF,Uiw:()=>r,uz1:()=>eZ,RwU:()=>V,Nv:()=>W,Lpk:()=>tM,OJz:()=>d,O7c:()=>ed,En2:()=>M,yK4:()=>m,gYk:()=>ef,uLN:()=>eu,MBo:()=>_,gS3:()=>ee,sNE:()=>ez,JkE:()=>w,Kvf:()=>f,PlL:()=>ec,ds7:()=>p,CH3:()=>A,BxN:()=>E,CWZ:()=>eJ,jN1:()=>h,qbJ:()=>y,n_W:()=>b,x3G:()=>eU,IKO:()=>e2,zs0:()=>ea,gIs:()=>er,bFe:()=>eh,g8m:()=>ep,koE:()=>F,Mdp:()=>ej,fwN:()=>eW,sLF:()=>e4,Fmi:()=>eQ,ux9:()=>ei,y7J:()=>el,A7N:()=>ek,FnV:()=>eo,cFN:()=>tt,eyD:()=>N,VS8:()=>e1,iA8:()=>e9,qlq:()=>eG,kG2:()=>I,viI:()=>D,lll:()=>B,yhg:()=>ew,JfX:()=>eE,BVg:()=>eN,vli:()=>n2,F2R:()=>q,jhS:()=>Z,c5O:()=>ta,$N6:()=>z,cJQ:()=>et,wE2:()=>ti,Nwk:()=>eT,fT1:()=>em,PE:()=>eA,Rkl:()=>tO,Jh2:()=>eX,n4S:()=>eY,U3N:()=>j,iH4:()=>te,XPw:()=>to,RY5:()=>eI,frb:()=>u,_bN:()=>eR,nDQ:()=>eC,Z$T:()=>eg,HKz:()=>U,v0U:()=>en,_d6:()=>e5,DQk:()=>eO,NhD:()=>tr,E7H:()=>td,nXs:()=>tf,K2q:()=>e6,fuY:()=>H,Mu1:()=>$,KAI:()=>tF,oph:()=>tc,bT:()=>eK,aoe:()=>eV,umS:()=>eS,ZiC:()=>P,Uj4:()=>es,WVf:()=>e3,AMv:()=>eq,oLX:()=>eL,RcO:()=>eD,haA:()=>ev,Ehm:()=>eB,SK7:()=>R,D48:()=>L,CVM:()=>X,ERw:()=>e0,G2B:()=>ex,$rm:()=>e7,S8t:()=>eP,n9U:()=>e$,a3Y:()=>K,n70:()=>G,bLU:()=>eM,q2B:()=>nD,Kvi:()=>c,VxE:()=>np,PeE:()=>nd,xM_:()=>nf,Ga7:()=>nh,xbG:()=>nk,Bre:()=>nc,caZ:()=>tG,bgj:()=>nB,ivT:()=>t2,W_2:()=>nj,mKv:()=>nT,kiw:()=>tv,sg1:()=>tZ,xqS:()=>tA,IoC:()=>t3,vTE:()=>tX,vHJ:()=>t1,oOL:()=>n$,SLp:()=>nr,Klq:()=>na,jQv:()=>ns,Nle:()=>v,csi:()=>tB,mst:()=>ey,jjo:()=>nK,vDo:()=>Q,fM3:()=>tq,Dy6:()=>tJ,w28:()=>ty,CC9:()=>nx,JBc:()=>t6,rK6:()=>tD,kss:()=>ts,pml:()=>nl,vZu:()=>tj,opH:()=>nL,QON:()=>nu,keL:()=>tl,V1S:()=>nR,RYN:()=>nH,PnV:()=>tk,z3Q:()=>tw,sN9:()=>O,iTV:()=>th,LQV:()=>nE,gml:()=>tg,un6:()=>tE,EVG:()=>tz,b4D:()=>tV,MZp:()=>n0,ci:()=>nU,ln4:()=>nw,$XS:()=>nS,V8t:()=>ne,nrF:()=>tb,EBs:()=>t5,NSI:()=>ny,hwb:()=>nC,SiS:()=>nb,Ms_:()=>tW,tyf:()=>S,uFH:()=>tp,B15:()=>tK,lTL:()=>tx,qhc:()=>ni,LJj:()=>tT,BjF:()=>nN,x3z:()=>nn,hnC:()=>tY,I1O:()=>nP,nuV:()=>C,obq:()=>nX,j09:()=>n_,gne:()=>nM,zEH:()=>nZ,MnC:()=>nY,wB3:()=>nW,pOF:()=>tI,Hn0:()=>no,Ob8:()=>x,AF:()=>t9,Yjp:()=>tS,g0e:()=>tN,vmA:()=>tR,Lvr:()=>tU,$dg:()=>nG,dhs:()=>T,G7P:()=>tQ,$rL:()=>ng,cHA:()=>nF,iNY:()=>nm,PcD:()=>n1,ARs:()=>nt,QP8:()=>t8,jqO:()=>nv,JNR:()=>nI,Gxe:()=>t4,dNF:()=>nA});class r{constructor(e){this.scoreFunction=e,this.content=[]}sinkDown(e){let t=this.content[e],n=this.scoreFunction(t);for(;e>0;){let t=(e+1>>1)-1,r=this.content[t];if(n<this.scoreFunction(r))this.content[e]=r,e=t;else break}this.content[e]=t}bubbleUp(e){let t=this.content.length,n=this.content[e],r=this.scoreFunction(n);for(;;){let n=(e+1<<1)-1,a=n+1,i=e,o=r;if(n<t){let e=this.scoreFunction(this.content[n]);e<o&&(i=n,o=e)}if(a<t&&this.scoreFunction(this.content[a])<o&&(i=a),i===e)break;this.content[e]=this.content[i],e=i}this.content[e]=n}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){if(0===this.content.length)return null;let e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e}remove(e){if(0===this.content.length)return;let t=this.content.indexOf(e),n=this.content.pop();t<this.content.length&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}}var a,i,o=n(62465),l=n(4861);let s=new Map,c=e=>{var t,n,r,a,i,c;let u,d,f,h,p,m,g,b,E,w,y=s?.get(e);if(y)return y;let A=(0,o.A)(e),v=A.getAlpha(),S=A.toRgb(),M=(t=S.r,n=S.g,r=S.b,u=(0,l.qE)(93,0,100)/100,f=(d=e=>Math.round((0,l.qE)(e*(1-u)+(255-e)*u,0,255)))(t),{r:f,g:d(n),b:d(r)}),O=(a=M.r,i=M.g,c=M.b,h=a/255,p=i/255,m=c/255,b=Math.cos(g=(0,l.tR)(180)),{r:Math.round(255*Math.max(0,Math.min(1,h*(w=[.213+.787*b-.213*(E=Math.sin(g)),.715-.715*b-.715*E,.072-.072*b+.928*E,.213-.213*b+.143*E,.715+.285*b+.14*E,.072-.072*b-.283*E,.213-.213*b-.787*E,.715-.715*b+.715*E,.072+.928*b+.072*E])[0]+p*w[1]+m*w[2]))),g:Math.round(255*Math.max(0,Math.min(1,h*w[3]+p*w[4]+m*w[5]))),b:Math.round(255*Math.max(0,Math.min(1,h*w[6]+p*w[7]+m*w[8])))}),C=x(O.r,O.g,O.b,v);return s&&s.set(e,C),C},u=5,d=5,f=4,h=4,p=1,m={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:["#f8f9fa","#e9ecef","#ced4da","#868e96","#343a40"],red:["#fff5f5","#ffc9c9","#ff8787","#fa5252","#e03131"],pink:["#fff0f6","#fcc2d7","#f783ac","#e64980","#c2255c"],grape:["#f8f0fc","#eebefa","#da77f2","#be4bdb","#9c36b5"],violet:["#f3f0ff","#d0bfff","#9775fa","#7950f2","#6741d9"],blue:["#e7f5ff","#a5d8ff","#4dabf7","#228be6","#1971c2"],cyan:["#e3fafc","#99e9f2","#3bc9db","#15aabf","#0c8599"],teal:["#e6fcf5","#96f2d7","#38d9a9","#12b886","#099268"],green:["#ebfbee","#b2f2bb","#69db7c","#40c057","#2f9e44"],yellow:["#fff9db","#ffec99","#ffd43b","#fab005","#f08c00"],orange:["#fff4e6","#ffd8a8","#ffa94d","#fd7e14","#e8590c"],bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},g=["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"].reduce((e,t)=>(t in m&&(e[t]=m[t]),e),{}),b=[m.black,m.red[h],m.green[h],m.blue[h],m.yellow[h]],E=[m.transparent,m.red[p],m.green[p],m.blue[p],m.yellow[p]],w=[m.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],y={transparent:m.transparent,white:m.white,gray:m.gray,black:m.black,bronze:m.bronze,...g},A={transparent:m.transparent,white:m.white,gray:m.gray,black:m.black,bronze:m.bronze,...g},v=e=>[m.cyan[e],m.blue[e],m.violet[e],m.grape[e],m.pink[e],m.green[e],m.teal[e],m.yellow[e],m.orange[e],m.red[e]],x=(e,t,n,r)=>{let a=`#${(0x1000000+(e<<16)+(t<<8)+n).toString(16).slice(1)}`;if(void 0!==r&&r<1){let e=Math.round(255*r).toString(16).padStart(2,"0");return`${a}${e}`}return a},S=e=>0===(0,o.A)(e).getAlpha(),M=240,O=(e,t=160)=>{if(!e)return!0;if(S(e))return!1;let n=(0,o.A)(e);if(!n.isValid())return!0;let{r,g:a,b:i}=n.toRgb();return(299*r+587*a+114*i)/1e3<t},C=e=>{if(S(e=e.trim()))return e;let t=(0,o.A)(e);return t.isValid()?"hex"!==t.getFormat()||e.startsWith("#")?e:`#${e}`:null},T="ResizeObserver"in window,k="JsonDraw",R=36,N=10,U=20,j=8,I=5,D=1,L=30,P=Math.PI/12,F="red",_={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},H={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},$={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var B=((a={}).COPY="copy",a.PASTE="paste",a.CUT="cut",a.KEYDOWN="keydown",a.KEYUP="keyup",a.MOUSE_MOVE="mousemove",a.RESIZE="resize",a.UNLOAD="unload",a.FOCUS="focus",a.BLUR="blur",a.DRAG_OVER="dragover",a.DROP="drop",a.GESTURE_END="gestureend",a.BEFORE_UNLOAD="beforeunload",a.GESTURE_START="gesturestart",a.GESTURE_CHANGE="gesturechange",a.POINTER_MOVE="pointermove",a.POINTER_DOWN="pointerdown",a.POINTER_UP="pointerup",a.STATE_CHANGE="statechange",a.WHEEL="wheel",a.TOUCH_START="touchstart",a.TOUCH_END="touchend",a.HASHCHANGE="hashchange",a.VISIBILITY_CHANGE="visibilitychange",a.SCROLL="scroll",a.JSONDRAW_LINK="jsondraw-link",a.MENU_ITEM_SELECT="menu.itemSelect",a.MESSAGE="message",a.FULLSCREENCHANGE="fullscreenchange",a);let G={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},W={SIDEBAR:"sidebar",SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup",SHAPE_ACTIONS_THEME_SCOPE:"shape-actions-theme-scope",FRAME_NAME:"frame-name",DROPDOWN_MENU_EVENT_WRAPPER:"dropdown-menu-event-wrapper"},z={sm:16,md:20,lg:28,xl:36},V="Xiaolai",K="Segoe UI Emoji",q={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},J="sans-serif",Y="monospace",Z={[V]:100,...{[J]:998,[Y]:999},[K]:1e3},Q=e=>{let t=function(e){switch(e){case q.Cascadia:case q["Comic Shanns"]:return Y;default:return J}}(e);return e===q.Excalifont?[V,t,K]:[t,K]},X={LIGHT:"light",DARK:"dark"},ee="invert(93%) hue-rotate(180deg)",et={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},en=1,er=20,ea=q.Excalifont,ei="left",eo="top",el=2,es=4,ec=7.99999,eu="#ffffff",ed="#1e1e1e",ef="#a2f1a6",eh=20,ep=5,em={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},eg={text:"text/plain",html:"text/html",json:"application/json",jsondraw:"application/vnd.jsondraw+json",jsondrawClipboard:"application/vnd.jsondraw.clipboard+json",jsondrawlib:"application/vnd.jsondrawlib+json",jsondrawlibIds:"application/vnd.jsondrawlib.ids+json","jsondraw.svg":"image/svg+xml","jsondraw.png":"image/png",binary:"application/octet-stream",...em},eb=[eg.text,eg.html,...Object.values(em)],eE={png:"png",svg:"svg",clipboard:"clipboard"},ew={jsondraw:"jsondraw",jsondrawClipboard:"jsondraw/clipboard",jsondrawLibrary:"jsondrawlib",jsondrawClipboardWithAPI:"jsondraw-api/clipboard"},ey=()=>window.JSONDRAW_EXPORT_SOURCE||window.location.origin,eA=500,ev=300,ex=500,eS=100,eM=.1,eO=.1,eC=30,eT=300,ek={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},eR=2,eN=[1,2,3],eU=10,ej=1440,eI=4194304,eD="http://www.w3.org/2000/svg",eL=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,eP={jsondraw:2,jsondrawLibrary:2},eF=5,e_=.7,eH=11,e$={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},eB={LEFT:"left",CENTER:"center",RIGHT:"right"},eG=20,eW=.25,ez=32,eV={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},eK={architect:0,artist:1,cartoonist:2},eq={thin:1,bold:2,extraBold:4},eJ={strokeColor:m.black,backgroundColor:m.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:eK.artist,opacity:100,locked:!1},eY="library",eZ="search",eQ={name:"default",defaultTab:eY},eX=new Set(["iframe","embeddable","image"]),e0={selection:"selection",lasso:"lasso",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},e1={OAI_API_KEY:"jsondraw-oai-api-key",MERMAID_TO_JSONDRAW:"mermaid-to-jsondraw",PUBLISH_LIBRARY:"publish-library-data"},e2="Untitled",e3={generalStats:1,elementProperties:2},e5=1,e8={sharp:"sharp",round:"round",elbow:"elbow"},e4=.3,e9="element",e6=Symbol.for("__test__originalId__");var e7=((i={}).ACTIVE="active",i.AWAY="away",i.IDLE="idle",i);let te=20,tt=35,tn=700,tr={background:"var(--mobile-action-button-bg)"},ta={[q.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[q.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[q["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[q["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[q.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[q.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[q.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[q["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[q.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[Z.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[Z["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},ti={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},to="local:",tl=(e,t,n)=>{let{unitsPerEm:r,ascender:a,descender:i}=ta[e]?.metrics||ta[q.Excalifont].metrics,o=t/r;return o*a+(n-o*a+o*i)/2},ts=e=>{let{lineHeight:t}=ta[e]?.metrics||ta[q.Excalifont].metrics;return t};class tc{tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(n_(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=no();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}constructor(){this.jobs=[],this.running=!1}}let tu="jsondraw.desktopUIMode",td=1440,tf=1229,th=/Mac|iPod|iPhone|iPad/.test(navigator.platform),tp=/^Win/.test(navigator.platform),tm=/\b(android)\b/i.test(navigator.userAgent),tg="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,tb=-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari"),tE=/iPad|iPhone/i.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,tw=()=>navigator.brave?.isBrave?.name==="isBrave",ty=(e,t)=>{let n,r;return e<=599||t<500&&e<1e3?"phone":(n=Math.min(e,t),r=Math.max(e,t),n>=600&&r<=1180)?"tablet":"desktop"},tA=e=>"phone"===e.formFactor?"mobile":"tablet"===e.formFactor?"compact":e.desktopUIMode,tv=e=>{let t="unknown";return tE?t="ios":tm?t="android":e&&(t="other"),{isMobileDevice:(()=>{let e=navigator.userAgent||"",t=navigator.platform||"",n=navigator.userAgentData;if(n){let e=(n.platform||"").toLowerCase();if(!0===n.mobile)return!0;if(!1===n.mobile&&"android"===e)return matchMedia?.("(hover: none)").matches&&matchMedia?.("(pointer: coarse)").matches;if("windows"===e||"macos"===e||"linux"===e||"chrome os"===e)return!1}if(tE)return!0;if(tm){let t=/Mobile/i.test(e);if(t||!t)return matchMedia?.("(hover: none)").matches&&matchMedia?.("(pointer: coarse)").matches}return/Win|Linux|CrOS|Mac/.test(t)||/Windows NT|X11|CrOS|Macintosh/.test(e),!1})(),platform:t}},tx=()=>{try{let e=window.localStorage.getItem(tu);if("compact"===e||"full"===e)return e}catch(e){}return null},tS=e=>{if("compact"===e||"full"===e){try{window.localStorage.setItem(tu,e)}catch(e){}return e}},tM={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},tO={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:th?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},tC=new Map([[tO.Z,tM.Z],[tO.Y,tM.Y]]),tT=(e,t)=>{let n;if(t===e.key.toLowerCase())return!0;let r=tC.get(t);return!!(r&&(n=e.key,!/^[a-z]$/.test(n.toLowerCase()))&&e.code===r)},tk=e=>e===tO.ARROW_LEFT||e===tO.ARROW_RIGHT||e===tO.ARROW_DOWN||e===tO.ARROW_UP,tR=e=>e.altKey,tN=e=>e.shiftKey,tU=e=>e.shiftKey,tj=e=>{let t=e.map(e=>e[0]),n=e.map(e=>e[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},tI=(e,t,n,r)=>{let a=n.map(t=>t[e]),i=Math.max(...a),o=Math.min(...a),s=i-o,c=0===s?1:t/s,u=1/0,d=n.map(t=>{let n=t[e]*c,r=[...t];return r[e]=n,n<u&&(u=n),r});if(!r||2===d.length)return d;let f=o-u;return d.map(t=>(0,l.$p)(t.map((t,n)=>n===e?t+f:t)))},tD=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var tL=n(32671),tP=n.n(tL);class tF{constructor(e,t){this.entries={},this.pool=new(tP())(e,t)}all(){let e=e=>{if(e.data.result){let[t,n]=e.data.result;this.entries[t]=n}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}}var t_=n(48449),tH=n(23055),t$=n(65364);let tB=()=>{let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),a=`${e.getHours()}`.padStart(2,"0"),i=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${a}${i}`},tG=e=>e.charAt(0).toUpperCase()+e.slice(1),tW=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),tz=e=>e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,tV=e=>tz(e)||e instanceof Element&&!!e.closest("label, button"),tK=e=>e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&("text"===e.type||"number"===e.type||"password"===e.type||"search"===e.type),tq=({fontFamily:e})=>{for(let[t,n]of Object.entries(q))if(n===e)return`${t}${Q(n).map(e=>`, ${e}`).join("")}`;return K},tJ=({fontSize:e,fontFamily:t})=>`${e}px ${tq({fontFamily:t})}`,tY=async e=>{requestAnimationFrame(()=>requestAnimationFrame(e))},tZ=(e,t)=>{let n=0,r=null,a=(...a)=>{r=a,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...a)},t)};return a.flush=()=>{if(clearTimeout(n),r){let t=r;r=null,e(...t)}},a.cancel=()=>{r=null,clearTimeout(n)},a},tQ=(e,t)=>{let n=null,r=null,a=null,i=t=>{n=window.requestAnimationFrame(()=>{n=null,e(...t),r=null,a&&(r=a,a=null,i(r))})},o=(...o)=>{nb()?e(...o):(r=o,null===n?i(r):t?.trailing&&(a=o))};return o.flush=()=>{null!==n&&(cancelAnimationFrame(n),n=null),r&&(e(...a||r),r=a=null)},o.cancel=()=>{r=a=null,null!==n&&(cancelAnimationFrame(n),n=null)},o},tX=e=>1-Math.pow(1-e,4),t0=(e,t,n)=>(t-e)*tX(n)+e,t1=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:a,onStart:i,onEnd:o,onCancel:l})=>{let s,c=!1,u=0;return u=window.requestAnimationFrame(function l(d){if(c)return;void 0===s&&(s=d,i?.());let f=Math.min(d-s,r),h=tX(f/r),p={};if(Object.keys(e).forEach(n=>{let r=(t[n]-e[n])*h+e[n];p[n]=r}),n(p),f<r){let i=f/r,o={};Object.keys(e).forEach(n=>{let r,l=e[n],s=t[n];null==(r=a?a(l,s,i,n):t0(l,s,i))&&(r=t0(l,s,i)),o[n]=r}),n(o),u=window.requestAnimationFrame(l)}else n(t),o?.()}),()=>{l?.(),c=!0,window.cancelAnimationFrame(u)}},t2=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,a=Array(Math.ceil(e.length/t));for(;n<e.length;)a[r++]=e.slice(n,n+=t);return a},t3=(e,t)=>Math.abs(e-t),t5=e=>"selection"===e||"lasso"===e,t8=(e,t)=>"custom"===t.type?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:void 0===t.lastActiveToolBeforeEraser?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},t4=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:a,scrollX:i,scrollY:o})=>({x:(e-r)/n.value-i,y:(t-a)/n.value-o}),t9=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:a,scrollX:i,scrollY:o})=>({x:(e+i)*n.value+r,y:(t+o)*n.value+a}),t6=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),t7=RegExp(`^[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿]*[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]`),ne=e=>t7.test(e),nt=e=>{let[t,n]=e;return{x:t,y:n}},nn=e=>{if(e?.name==="AbortError")return void console.warn(e);throw e},nr=(e,t,n=0)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length,Math.max(n,0)))-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return -1},na=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n);let r=(n=Math.min(e.length-1,Math.max(n,0)))+1;for(;--r>-1;)if(t(e[r],r,e))return r;return -1},ni=(e,t)=>{for(let n=0;n<e.length;n++){let r=t(e[n],n);if(null!=r)return r}},no=()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},nl=e=>{let t=e.parentElement;for(;t&&t!==document.body;){let{overflowY:e}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&("auto"===e||"scroll"===e||"overlay"===e))return t;t=t.parentElement}return document},ns=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1)return void t.focus();t=t.parentElement}},nc=e=>Array.from(e).map(e=>`0${e.toString(16)}`.slice(-2)).join(""),nu=()=>nb()?1:Date.now(),nd=e=>e instanceof Map?e:e.reduce((e,t)=>(e.set("string"==typeof t?t:t.id,t),e),new Map),nf=e=>e.reduce((e,t,n)=>(e.set(t.id,[t,n]),e),new Map),nh=(e,t)=>e.reduce((e,n,r)=>(e[t?t(n):r]=n,e),{}),np=e=>e.reduce((t,n,r)=>{let a={...n,prev:null,next:null};if(0!==r){let n=t[r-1];if(a.prev=n,n.next=a,r===e.length-1){let e=t[0];a.next=e,e.prev=a}}return t.push(a),t},[]),nm=e=>Array.isArray(e)?e:e.values(),ng=e=>Array.isArray(e)?e:Array.from(nm(e)),nb=()=>false,nE=()=>false,nw=()=>true,ny=()=>void 0!==t$,nA=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),nv=(e,t)=>{let n=!1;for(let r in t){let a=t[r];if(void 0!==a){if(e[r]===a&&("object"!=typeof a||null===a))continue;n=!0}}return n?{...e,...t}:e},nx=()=>{try{return window.self===window.top?"top":"iframe"}catch(e){return"iframe"}},nS=e=>!!e&&"object"==typeof e&&"then"in e&&"catch"in e&&"finally"in e,nM=e=>{let t=e?.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(e=>e.tabIndex>-1&&!e.disabled):[]},nO=(e,t)=>!!(Array.isArray(e)&&Array.isArray(t))&&0===e.length&&0===t.length||e===t,nC=(e,t,n,r=!1)=>{let a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let a of n)if(!(e[a]===t[a]||nO(e[a],t[a])))return r&&console.warn(`%cisShallowEqual: ${a} not equal ->`,"color: #8B4000",e[a],t[a]),!1;return!0}return a.every(a=>{let i=n?.[a],o=i?i(e[a],t[a]):e[a]===t[a]||nO(e[a],t[a]);return!o&&r&&console.warn(`%cisShallowEqual: ${a} not equal ->`,"color: #8B4000",e[a],t[a]),o})},nT=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e?.(r),!n||!r?.defaultPrevented)return t?.(r)},nk=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw Error(t)};function nR(e,t){if(!e)throw Error(t)}let nN=e=>{let t,n,r=function(r){let a=Object.entries(r);if(t){let e=!0;for(let[n,r]of a)if(t.get(n)!==r){e=!1;break}if(e)return n}let i=e(r);return t=new Map(a),n=i,i};return r.clear=()=>{t=void 0,n=void 0},r},nU=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),nj=e=>JSON.parse(JSON.stringify(e)),nI=(e,t)=>nC(e,t)?e:t;function nD(e,t,n,r){return e?(e?.addEventListener?.(t,n,r),()=>{e?.removeEventListener?.(t,n,r)}):()=>{}}function nL(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],a=e[1],i=e[2],o=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${a[0].toFixed(2)},${a[1].toFixed(2)} ${(0,l.G8)(a[0],i[0]).toFixed(2)},${(0,l.G8)(a[1],i[1]).toFixed(2)} T`;for(let t=2,i=n-1;t<i;t++)r=e[t],a=e[t+1],o+=`${(0,l.G8)(r[0],a[0]).toFixed(2)},${(0,l.G8)(r[1],a[1]).toFixed(2)} `;return t&&(o+="Z"),o}let nP=e=>e.replace(/\r?\n|\r/g,"\n");function nF(e){return e}let n_=async(e,...t)=>new Promise(n=>{n(e(...t))}),nH=(...e)=>Math.max(...e.map(e=>+!!e))>0,n$=e=>e.replace(/"/g,"&quot;"),nB=e=>Array.isArray(e)?e:[e],nG=e=>Array.isArray(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,nW=(e,t)=>{if(0===nG(e))return null;let n=t||(e=>e),r=null;for(let t of e){let e=n(t);if(null!==r&&r!==e||null==e)return null;r=e}return r},nz={COMPLEX_BINDINGS:!1},nV=null,nK=e=>{if(!nV)try{let e=localStorage.getItem("jsondraw-feature-flags");e&&(nV=JSON.parse(e)??nz)}catch{}return(nV||nz)[e]},nq=new tH.o(Date.now()),nJ=0,nY=()=>Math.floor(0x80000000*nq.next()),nZ=()=>nb()?`id${nJ++}`:(0,t_.Ak)();var nQ=n(24200);let nX=e=>(e=e.trim())?(0,nQ.J)(n$(e)):e,n0=e=>!!(e?.includes(location.origin)||e?.startsWith("/")),n1=e=>{if((e=nX(e)).startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class n2{on(...e){let t=e.flat().filter(e=>"function"==typeof e);return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(e=>"function"==typeof e);t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(e=>!t.includes(e))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}constructor(){this.subscribers=[]}}},76427:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var r=n(37876),a=n(14232),i=n(38335),o=n(33686),l=n(68371),s=n(95171),c=n(99649),u=n(44969),d=n(79021),f=n(45050),h=n(44193),p=n(11210),m=n(31408),g=n(97685),b=n(18571),E=n(66480),w=n(9456),y=n(70528);let A=()=>Math.floor(2e9*Math.random()),v=()=>Math.floor(2e9*Math.random()),x=e=>e.text&&0!==e.text.length?e.text.map(e=>null!==e.key&&void 0!==e.key?"object"===e.type?`${e.key}: {${e.childrenCount??0} keys}`:"array"===e.type?`${e.key}: [${e.childrenCount??0} items]`:null===e.value?`${e.key}: null`:`${e.key}: ${e.value}`:`${e.value??""}`).join("\n"):"",S=(e,t)=>{let n=[],r=((e,t)=>{let n=new Map;if(0===e.length)return n;let r=new Map,a=new Set;for(let e of t){let t=r.get(e.from)??[];t.push(e.to),r.set(e.from,t),a.add(e.to)}let i=e.filter(e=>!a.has(e.id)).map(e=>e.id);0===i.length&&e.length>0&&i.push(e[0].id);let o=new Map(e.map(e=>[e.id,e])),l=[],s=new Set,c=[...i];for(;c.length>0;){let e=[],t=[];for(let n of c)if(!s.has(n))for(let a of(s.add(n),e.push(n),r.get(n)??[]))s.has(a)||t.push(a);e.length>0&&l.push(e),c=t}let u=e.filter(e=>!s.has(e.id)).map(e=>e.id);u.length>0&&l.push(u);let d=50;for(let e of l){let t=0,r=50;for(let a of e){let e=o.get(a);e&&(n.set(a,{x:d,y:r}),r+=e.height+40,t=Math.max(t,e.width))}d+=t+200}return n})(e,t),a=Date.now(),i=0,o=()=>`a${(i++).toString().padStart(6,"0")}`,l=new Map;for(let i of e){let e=r.get(i.id)??{x:0,y:0},s=`rect-${i.id}`,c=`text-${i.id}`,u=x(i);l.set(i.id,s);let d=Math.max(i.width+32,120),f=Math.max((i.text?.length??1)*24+32,50),h=[{id:c,type:"text"}];for(let e of t)(e.from===i.id||e.to===i.id)&&h.push({id:`arrow-${e.id}`,type:"arrow"});let p={id:s,type:"rectangle",x:e.x,y:e.y,width:d,height:f,angle:0,strokeColor:"#1e1e1e",backgroundColor:"transparent",fillStyle:"solid",strokeWidth:1,roughness:1,opacity:100,groupIds:[],roundness:{type:3},seed:A(),version:1,versionNonce:v(),isDeleted:!1,boundElements:h,index:o(),updated:a,link:null,locked:!1,frameId:null};n.push(p);let m={id:c,type:"text",x:e.x+16,y:e.y+16,width:d-32,height:f-32,angle:0,strokeColor:"#1e1e1e",backgroundColor:"transparent",fillStyle:"solid",strokeWidth:1,roughness:1,opacity:100,groupIds:[],roundness:null,seed:A(),version:1,versionNonce:v(),isDeleted:!1,boundElements:null,index:o(),updated:a,link:null,locked:!1,frameId:null,text:u,fontSize:16,fontFamily:y.F2R.Excalifont,textAlign:"left",verticalAlign:"top",containerId:s,originalText:u,autoResize:!0,lineHeight:1.25};n.push(m)}for(let i of t){let t=l.get(i.from),s=l.get(i.to);if(!t||!s)continue;let c=r.get(i.from),u=r.get(i.to);if(!c||!u)continue;let d=e.find(e=>e.id===i.from),f=e.find(e=>e.id===i.to);if(!d||!f)continue;let h=Math.max(d.width+32,120),p=Math.max((d.text?.length??1)*24+32,50),m=Math.max((f.text?.length??1)*24+32,50),g=c.x+h,b=c.y+p/2,E=u.x,w=u.y+m/2,y={id:`arrow-${i.id}`,type:"arrow",x:g,y:b,width:Math.abs(E-g),height:Math.abs(w-b),angle:0,strokeColor:"#1e1e1e",backgroundColor:"transparent",fillStyle:"solid",strokeWidth:1,roughness:1,opacity:100,groupIds:[],roundness:{type:2},seed:A(),version:1,versionNonce:v(),isDeleted:!1,boundElements:null,index:o(),updated:a,link:null,locked:!1,frameId:null,points:[[0,0],[E-g,w-b]],startBinding:{elementId:t,focus:0,gap:5,fixedPoint:[1,.5]},endBinding:{elementId:s,focus:0,gap:5,fixedPoint:[0,.5]},startArrowhead:null,endArrowhead:"arrow",elbowed:!1};n.push(y)}return n};var M=n(278);let O=o.Ay.div.withConfig({componentId:"sc-3a5472cd-0"})(["width:100%;height:100%;position:relative;opacity:",";transition:opacity 0.2s ease;.jsondraw-wrapper{width:100%;height:100%;}"],({$ready:e})=>+!!e),C=()=>{let e=(0,w.A)(e=>e.nodes),t=(0,w.A)(e=>e.edges),i=(0,E.A)(e=>e.darkmodeEnabled),[o,l]=a.useState(null),[y,A]=a.useState(!1),v=a.useRef(null),x=a.useRef(!1),C=a.useRef(!1),[T,k]=a.useState(!1),[R,N]=a.useState(!1),[U,j]=a.useState(!1),[I,D]=a.useState(""),[L,P]=a.useState(!1),F=a.useRef(null),_=a.useCallback((e,t,n)=>{C.current=!0;let r=e.some(e=>"image"===e.type&&!e.isDeleted);N(e=>e!==r?r:e);try{localStorage.setItem("jsondraw-autosave",JSON.stringify({elements:e,appState:{theme:t.theme,zoom:t.zoom}}))}catch(e){console.warn("Failed to save to localStorage:",e)}},[]);a.useEffect(()=>{window.JSONDRAW_ASSET_PATH="/jsondraw-fonts/"},[]),a.useEffect(()=>{Promise.all([n.e(87290),n.e(82909),n.e(58831),n.e(22046)]).then(n.bind(n,85369)).then(e=>{l({JsonDraw:e.JsonDraw}),A(!1)})},[]);let H=a.useCallback((e,t=120)=>{requestAnimationFrame(()=>{setTimeout(()=>{e.scrollToContent(void 0,{fitToViewport:!0,viewportZoomFactor:.8}),A(!0)},t)})},[]);a.useEffect(()=>{let n=v.current;if(!n||0===e.length||C.current)return;let r=S(e,t);n.updateScene({elements:r}),H(n,80)},[e,t,H]);let $=a.useCallback(n=>{if(v.current=n,window.location.hash.startsWith("#data=")){let e=(e=>{try{let t=decodeURIComponent(e.replace("#data=","")),n=window.atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);let a=M.Ay.inflate(r,{to:"string"});return JSON.parse(a)}catch(e){return console.error("Failed to decode sharelink data",e),null}})(window.location.hash);if(e&&e.elements){C.current=!0,x.current=!0,A(!1),requestAnimationFrame(()=>{n.updateScene({elements:e.elements,appState:e.appState}),H(n,120)});return}}let r=localStorage.getItem("jsondraw-autosave");if(r)try{let{elements:e,appState:t}=JSON.parse(r);C.current=!0,A(!1),requestAnimationFrame(()=>{n.updateScene({elements:e,appState:t}),H(n,120)});return}catch(e){console.warn("Failed to restore from localStorage:",e)}if(e.length>0&&!x.current){x.current=!0;let r=S(e,t);A(!1),requestAnimationFrame(()=>{n.updateScene({elements:r}),H(n,200)})}},[e,t,H]),B=a.useCallback(()=>{if(!v.current)return;localStorage.removeItem("jsondraw-autosave"),C.current=!1,x.current=!1;let n=S(e,t);v.current.updateScene({elements:n}),A(!1),H(v.current,120),k(!1),g.oR.success("Drawing cleared! Loaded JSON visualization.")},[e,t,H]),G=a.useCallback(()=>{navigator.clipboard.writeText(I).then(()=>{P(!0),F.current&&window.clearTimeout(F.current),F.current=window.setTimeout(()=>P(!1),3e3)}).catch(()=>g.oR.error("Failed to copy link."))},[I]),W=a.useCallback(()=>{let e=v.current;if(!e)return;let t=((e,t)=>{let n=JSON.stringify({elements:e.filter(e=>!e.isDeleted).map(e=>({...e,isDeleted:void 0})),appState:{viewBackgroundColor:t.viewBackgroundColor,theme:t.theme}}),r=M.Ay.deflate(n),a="";for(let e=0;e<r.length;e+=8e3)a+=String.fromCharCode.apply(null,Array.from(r.slice(e,e+8e3)));let i=window.btoa(a);return`#data=${encodeURIComponent(i)}`})(e.getSceneElementsIncludingDeleted(),e.getAppState()),n=`${window.location.origin}${window.location.pathname}${t}`;D(n),j(!0),n.length>8e3&&g.oR.error("Shareable link is too large! Tr\xecnh duyệt c\xf3 thể sẽ kh\xf4ng mở được đầy đủ.",{duration:5e3})},[]);if(!o)return(0,r.jsx)(s.a,{pos:"relative",h:"100%",w:"100%",children:(0,r.jsx)(c.p,{visible:!0})});let{JsonDraw:z}=o;return(0,r.jsxs)(s.a,{pos:"relative",h:"100%",w:"100%",children:[(0,r.jsx)(c.p,{visible:!y}),(0,r.jsx)(u.a,{opened:T,onClose:()=>k(!1),title:"Clear Drawing Session",centered:!0,children:(0,r.jsxs)(d.B,{gap:"md",children:[(0,r.jsxs)(f.E,{children:["This will ",(0,r.jsx)("strong",{children:"permanently delete"})," your current drawing session and load a fresh visualization from the JSON data."]}),(0,r.jsx)(f.E,{c:"dimmed",size:"sm",children:"Make sure to save your work first. Your current drawing will be lost and cannot be recovered."}),(0,r.jsxs)(s.a,{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,r.jsx)(h.$,{variant:"default",onClick:()=>k(!1),children:"Cancel"}),(0,r.jsx)(h.$,{color:"red",onClick:B,children:"Clear & Load JSON"})]})]})}),(0,r.jsx)(u.a,{opened:U,onClose:()=>j(!1),title:null,withCloseButton:!1,centered:!0,size:"md",padding:"xl",radius:"lg",styles:{content:{backgroundColor:i?"#121212":"#ffffff"}},children:(0,r.jsxs)(d.B,{gap:"lg",children:[(0,r.jsxs)(s.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(f.E,{fw:700,size:"xl",style:{fontFamily:"Assistant, sans-serif"},children:"Shareable link"}),(0,r.jsx)(p.M,{variant:"subtle",color:"gray",onClick:()=>j(!1),children:(0,r.jsx)(b.yGN,{size:20})})]}),(0,r.jsxs)(s.a,{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[(0,r.jsx)(m.k,{label:"Link",readOnly:!0,value:I,style:{flex:1},styles:{input:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f3f4f6",border:"none",boxShadow:"none",height:40},label:{marginBottom:8,fontSize:12,fontWeight:600,color:i?"#a3a3a3":"#4b5563"}},onClick:e=>e.target.select()}),(0,r.jsx)(h.$,{size:"md",leftSection:L?(0,r.jsx)(b.YrT,{size:18}):(0,r.jsx)(b.nxz,{size:18}),color:L?"teal":"violet",onClick:G,style:{height:40,minWidth:120,transition:"background-color 0.2s"},children:"Copy link"})]}),(0,r.jsx)(s.a,{style:{borderTop:`1px solid ${i?"#333":"#e5e7eb"}`,paddingTop:16},children:(0,r.jsxs)(f.E,{size:"sm",c:"dimmed",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)(b.F5$,{size:16})," Dữ liệu được n\xe9n v\xe0 bảo mật trong URL"]})})]})}),(0,r.jsx)(O,{$ready:y,children:(0,r.jsx)("div",{className:"jsondraw-wrapper",children:(0,r.jsx)(z,{jsondrawAPI:$,onChange:_,viewModeEnabled:!1,zenModeEnabled:!1,gridModeEnabled:!1,theme:i?"dark":"light",UIOptions:{canvasActions:{export:{saveFileToDisk:!0},clearDrawing:()=>k(!0)}},initialData:{appState:{activeTool:{type:"hand",customType:null,lastActiveTool:null,locked:!1,fromSelection:!1}}},renderTopRightUI:e=>(0,r.jsx)(s.a,{px:"md",children:(0,r.jsx)(h.$,{size:"sm",color:"violet",disabled:R,onClick:W,title:R?"Can't share locally when an image is present due to URL size limits.":"Tạo link chia sẻ miễn ph\xed qua URL",children:"Share View"})})})})})]})};var T=n(70671),k=n(83126),R=n(18512);let N=o.I4.span.withConfig({componentId:"sc-65e7364-0"})(["color:",";&:hover{filter:brightness(1.5);transition:filter 0.2s ease-in-out;}"],({theme:e,$nodeType:t})=>(function({$type:e,theme:t}){return"Object"===e?t.NODE_COLORS.PARENT_OBJ:"Array"===e?t.NODE_COLORS.PARENT_ARR:t.NODE_COLORS.PARENT_OBJ})({theme:e,$type:t})),U=({keyPath:e,nodeType:t})=>(0,r.jsxs)(N,{$nodeType:t,children:[e[0],":"]});var j=n(6340);let I=e=>{let t=(0,o.DP)(),{valueAsString:n,value:a}=e;return(0,r.jsx)("span",{style:{color:function({$value:e,theme:t}){return e&&!Number.isNaN(+e)?t.NODE_COLORS.INTEGER:"true"===e?t.NODE_COLORS.BOOL.TRUE:"false"===e?t.NODE_COLORS.BOOL.FALSE:"null"===e?t.NODE_COLORS.NULL:t.NODE_COLORS.NODE_VALUE}({theme:t,$value:n})},children:(0,r.jsx)(j.J,{children:JSON.stringify(a)})})},D=()=>{let e=(0,o.DP)(),t=(0,R.A)(e=>e.json);return(0,r.jsx)(k.d,{hideRoot:!0,data:JSON.parse(t),valueRenderer:(e,t)=>(0,r.jsx)(I,{valueAsString:e,value:t}),labelRenderer:(e,t)=>(0,r.jsx)(U,{keyPath:e,nodeType:t}),theme:{extend:{overflow:"scroll",height:"100%",scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:e.GRID_BG_COLOR}}})},L=o.Ay.div.withConfig({componentId:"sc-8827178b-0"})(["position:relative;height:100%;background:",';overflow:auto;cursor:url("/assets/cursor.svg"),auto;& > ul{margin-top:0 !important;padding:12px !important;font-family:monospace;font-size:14px;font-weight:500;}.tab-group{position:absolute;top:10px;left:10px;z-index:2;}'],({theme:e})=>e.GRID_BG_COLOR),P=()=>{let[e]=(0,i.F)({key:"viewMode",defaultValue:l.n.Graph});return e===l.n.Graph?(0,r.jsx)(T.GraphView,{}):e===l.n.Tree?(0,r.jsx)(D,{}):e===l.n.JsonDraw?(0,r.jsx)(C,{}):null},F=()=>(0,r.jsx)(L,{onContextMenuCapture:e=>e.preventDefault(),children:(0,r.jsx)(P,{})})},91139:(e,t,n)=>{n.d(t,{$p:()=>l,A:()=>u,B7:()=>g,E4:()=>c,Hx:()=>i,O$:()=>s,PU:()=>m,SM:()=>f,VM:()=>d,cK:()=>h,ks:()=>p,m3:()=>o});var r=n(42212),a=n(4368);function i(e,t){return[e,t]}function o(e){return 2===e.length?[e[0],e[1]]:void 0}function l(e){return e}function s(e,t=function(e,t){return[0,0]}(0,0)){return[t[0]+e[0],t[1]+e[1]]}function c(e,t,n=r.Pk){let a=Math.abs;return a(e[0]-t[0])<n&&a(e[1]-t[1])<n}function u([e,t],[n,r],a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}function d(e,t=[0,0]){return[e[0]+t[0],e[1]+t[1]]}function f(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function h(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function p(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}let m=(e,t,n)=>d(t,(0,a.cb)((0,a.Yj)(e,t),n)),g=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])}}]);
//# sourceMappingURL=76427.4d94547c1e695ce6.js.map