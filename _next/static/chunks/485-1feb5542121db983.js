"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{158:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(73022),a=r(29380);let l={json:"{}",loading:!0},o=(0,n.v)()((e,t)=>({...l,getJson:()=>t().json,setJson:t=>{e({json:t,loading:!1}),a.A.getState().setGraph(t)},clear:()=>{e({json:"",loading:!1}),a.A.getState().clearGraph()}}))},21419:(e,t,r)=>{r.d(t,{O:()=>i,R:()=>l});var n=r(40795),a=r(82338);let l=e=>{if("string"!=typeof e)return!1;let t=/(https?:\/\/.*\.(?:png|jpg|gif|svg))/i.test(e),r=e.startsWith("data:image/")&&e.includes("base64");return t||r},o=new Map;setInterval(()=>o.clear(),12e4);let i=(e,t=!1)=>{let{imagePreviewEnabled:r}=a.A.getState(),i=l(e)&&r,s=[e,t].toString();if(o.has(s)){let e=o.get(s);if(e)return e}let c=((e,t=!1)=>{if(!e)return{width:45,height:45};let r=document.createElement("div");r.style.whiteSpace=t?"nowrap":"pre-wrap",r.innerText=e,r.style.fontSize="12px",r.style.width="fit-content",r.style.padding="0 10px",r.style.fontWeight="500",r.style.fontFamily="monospace",document.body.appendChild(r);let a=r.getBoundingClientRect(),l=e.split("\n").length,o=a.width+4,i=t?n.d.PARENT_HEIGHT:l*n.d.ROW_HEIGHT;return document.body.removeChild(r),{width:o,height:i}})(Array.isArray(e)?e.map(([e,t])=>`${e}: ${JSON.stringify(t).slice(0,80)}`).join("\n"):`${e}`,"string"==typeof e);return i&&(c.width=80,c.height=80),t&&(c.width+=80),c.width>700&&(c.width=700),o.set(s,c),c}},29380:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(73022),a=r(40795),l=r(158),o=r(45094),i=r(21419);let s={viewPort:null,direction:"RIGHT",loading:!0,fullscreen:!1,nodes:[],edges:[],selectedNode:null,path:"",aboveSupportedLimit:!1},c=(0,n.v)((e,t)=>({...s,clearGraph:()=>e({nodes:[],edges:[],loading:!1}),setSelectedNode:t=>e({selectedNode:t}),setGraph:(t,r)=>{let{nodes:n,edges:s}=(e=>{let t=(0,o.cZ)(e);if(!t)return{nodes:[],edges:[]};let r=[],n=[],a=1,l=1;return!function e(t,s){let c=String(a++),u=[];void 0!==s&&t.parent?.type==="array"&&n.push({id:String(l++),from:s,to:c,text:""});let p="array"===t.type,d=!t.parent||"array"===t.parent.type;if(p&&d){let{width:n,height:a}=(0,i.O)(`[${t.children?.length??"0"} items]`);return r.push({id:c,text:[{key:null,value:`[${t.children?.length??0} items]`,type:"array",childrenCount:t.children?.length}],width:n,height:a,path:[]}),t.children?.forEach(t=>{e(t,c)}),c}t.children?.forEach(t=>{if(!t.children||!t.children[1])return e(t,c);let r=t.children[0].value??null,a=t.children[1],o=a.type;if("array"===o){let t=[];a.children?.forEach(r=>{let n=e(r,void 0);n&&t.push(n)}),u.push({key:r,value:a.value,type:o,to:t.length>0?t:void 0,childrenCount:a.children?.length}),t.forEach(e=>{n.push({id:String(l++),from:c,to:e,text:r??null})})}else if("object"===o){let t=e(a,c);u.push({key:r,value:a.value,type:o,childrenCount:Object.keys(a.children??{}).length,...t&&{to:[t]}}),t&&n.push({id:String(l++),from:c,to:t,text:r??null})}else u.push({key:r,value:a.value,type:o})}),t.parent?.type==="array"&&"object"===t.type&&t.children?.length===0&&u.push({key:null,value:"{0 keys}",type:"object",childrenCount:0});let g=()=>{let e=e=>{let t=(0,o.eY)(e);return t?.pop()?.toString()};return t.parent?"array"===t.parent.type?{parentKey:e(t.parent),parentType:"array"}:"property"===t.parent.type?{parentKey:e(t),parentType:"object"}:{parentKey:e(t),parentType:t.parent.type.replace("property","object")}:{parentKey:e(t),parentType:t.type}};if(0===u.length){if(void 0===t.value)return;let{width:e,height:n}=(0,i.O)(t.value);r.push({id:c,text:[{key:null,value:t.value,type:t.type}],width:e,height:n,path:(0,o.eY)(t),...g()})}else{let e="";e=u.some(e=>null!==e.key)?u.map(e=>{let t=null===e.key?"":e.key;return"object"===e.type?[t,`{${e.childrenCount??0} keys}`]:"array"===e.type?[t,`[${e.childrenCount??0} items]`]:null===e.value?[t,"null"]:[t,`${e.value}`]}):`${u[0].value}`;let{width:n,height:a}=(0,i.O)(e);r.push({id:c,text:u,width:n,height:a,path:(0,o.eY)(t),...g()})}return c}(t),{nodes:r,edges:n}})(t??l.A.getState().json);if(n.length>a.F)return e({aboveSupportedLimit:!0,...r,loading:!1});e({nodes:n,edges:s,aboveSupportedLimit:!1,...r})},setDirection:(r="RIGHT")=>{e({direction:r}),setTimeout(()=>t().centerView(),200)},setLoading:t=>e({loading:t}),focusFirstNode:()=>{let e=document.querySelector("g[id$='node-1']");t().viewPort?.camera?.centerFitElementIntoView(e,{elementExtraMarginForZoom:100})},setZoomFactor:e=>{let r=t().viewPort;r?.camera?.recenter(r.centerX,r.centerY,e)},zoomIn:()=>{let e=t().viewPort;e?.camera?.recenter(e.centerX,e.centerY,e.zoomFactor+.1)},zoomOut:()=>{let e=t().viewPort;e?.camera?.recenter(e.centerX,e.centerY,e.zoomFactor-.1)},centerView:()=>{let e=t().viewPort;e?.updateContainerSize();let r=document.querySelector(".jsoncrack-canvas");r&&e?.camera?.centerFitElementIntoView(r)},toggleFullscreen:t=>e({fullscreen:t}),setViewPort:t=>e({viewPort:t})}))},40795:(e,t,r)=>{r.d(t,{F:()=>a,d:()=>n});let n={ROW_HEIGHT:30,PARENT_HEIGHT:36},a=800},57062:(e,t,r)=>{r.d(t,{r:()=>a,x:()=>l});var n=r(94941);let a=(e,t=n.o5.JSON)=>new Promise(async(a,l)=>{try{if(!e)return a({});if(t===n.o5.JSON){let{parse:t}=await r.e(5094).then(r.bind(r,45094)),n=[],l=t(e,n);return n.length>0&&JSON.parse(e),a(l)}if(t===n.o5.YAML){let{load:t}=await r.e(3423).then(r.bind(r,83423));return a(t(e))}if(t===n.o5.XML){let{XMLParser:t}=await r.e(5417).then(r.bind(r,55417)),n=new t({attributeNamePrefix:"$",ignoreAttributes:!1,allowBooleanAttributes:!0,parseAttributeValue:!0,trimValues:!0,parseTagValue:!0});return a(n.parse(e))}if(t===n.o5.CSV){let{csv2json:t}=await r.e(4223).then(r.bind(r,44223)),n=t(e,{trimFieldValues:!0,trimHeaderFields:!0,wrapBooleans:!0,excelBOM:!0});return a(n)}return a({})}catch(e){return l(e instanceof Error?e.message:"Failed to parse content")}}),l=async(e,t)=>new Promise(async a=>{try{if(!e)return a("");if(t===n.o5.JSON){let t=JSON.parse(e);return a(JSON.stringify(t,null,2))}if(t===n.o5.YAML){let{dump:t}=await r.e(3423).then(r.bind(r,83423)),{parse:n}=await r.e(5094).then(r.bind(r,45094));return a(t(n(e)))}if(t===n.o5.XML){let{XMLBuilder:t}=await r.e(5417).then(r.bind(r,55417)),n=new t({format:!0,attributeNamePrefix:"$",ignoreAttributes:!1});return a(n.build(JSON.parse(e)))}if(t===n.o5.CSV){let{json2csv:t}=await r.e(4223).then(r.bind(r,44223)),n=JSON.parse(e),l=Array.isArray(n)?n:[n];return a(t(l,{expandArrayObjects:!0,expandNestedObjects:!0,excelBOM:!0,wrapBooleans:!0,trimFieldValues:!0,trimHeaderFields:!0}))}return a(e)}catch(t){return console.error(e,t),a(e)}})},60485:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(39149),a=r.n(n),l=r(47607),o=r(97685),i=r(73022);let s=JSON.parse('{"fruits":[{"name":"Apple","color":"#FF0000","details":{"type":"Pome","season":"Fall"},"nutrients":{"calories":52,"fiber":"2.4g","vitaminC":"4.6mg"}},{"name":"Banana","color":"#FFFF00","details":{"type":"Berry","season":"Year-round"},"nutrients":{"calories":89,"fiber":"2.6g","potassium":"358mg"}},{"name":"Orange","color":"#FFA500","details":{"type":"Citrus","season":"Winter"},"nutrients":{"calories":47,"fiber":"2.4g","vitaminC":"53.2mg"}}]}');var c=r(94941),u=r(29380),p=r(57062),d=r(82338),g=r(158);let h=JSON.stringify(s,null,2),m={fileData:null,format:c.o5.JSON,contents:h,error:null,hasChanges:!1,jsonSchema:null},y=a()(e=>{u.A.getState().setLoading(!0),g.A.getState().setJson(JSON.stringify(e,null,2))},400),f=(0,i.v)()((e,t)=>({...m,clear:()=>{e({contents:""}),g.A.getState().clear()},setJsonSchema:t=>e({jsonSchema:t}),setFile:r=>{e({fileData:r,format:r.format||c.o5.JSON}),t().setContents({contents:r.content,hasChanges:!1}),(0,l.f0)("set_content",{label:r.format})},getContents:()=>t().contents,getFormat:()=>t().format,getHasChanges:()=>t().hasChanges,setFormat:async r=>{try{let n=t().format;e({format:r});let a=await (0,p.r)(t().contents,n),l=await (0,p.x)(JSON.stringify(a,null,2),r);t().setContents({contents:l})}catch{t().clear(),console.warn("The content was unable to be converted, so it was cleared instead.")}},setContents:async({contents:r,hasChanges:n=!0,skipUpdate:a=!1,format:l})=>{try{e({...r&&{contents:r},error:null,hasChanges:n,format:l??t().format});let o=window.location.href.includes("?"),i=await (0,p.r)(t().contents,t().format);if(!d.A.getState().liveTransformEnabled&&a)return;t().hasChanges&&r&&r.length<8e4&&!function(){try{return window.self!==window.top}catch{return!0}}()&&!o&&(sessionStorage.setItem("content",r),sessionStorage.setItem("format",t().format),e({hasChanges:!0})),y(i)}catch(t){if(t?.mark?.snippet)return e({error:t.mark.snippet});t?.message&&e({error:t.message}),g.A.setState({loading:!1}),u.A.setState({loading:!1})}},setError:t=>e({error:t}),setHasChanges:t=>e({hasChanges:t}),fetchUrl:async e=>{try{let r=await fetch(e),n=await r.json(),a=JSON.stringify(n,null,2);return t().setContents({contents:a}),g.A.setState({json:a,loading:!1})}catch{t().clear(),o.oR.error("Failed to fetch document from URL!")}},checkEditorSession:(r,n)=>{if(r&&"string"==typeof r&&/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi.test(r))return t().fetchUrl(r);let a=h,l=sessionStorage.getItem("content"),o=sessionStorage.getItem("format");l&&!n&&(a=l),o&&e({format:o}),t().setContents({contents:a,hasChanges:!1})}}))},82338:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(73022),a=r(4319),l=r(29380);let o={darkmodeEnabled:!0,imagePreviewEnabled:!0,liveTransformEnabled:!0,gesturesEnabled:!1,rulersEnabled:!0},i=(0,n.v)((0,a.Zr)(e=>({...o,toggleRulers:t=>e({rulersEnabled:t}),toggleGestures:t=>e({gesturesEnabled:t}),toggleLiveTransform:t=>e({liveTransformEnabled:t}),toggleDarkMode:t=>e({darkmodeEnabled:t}),toggleImagePreview:t=>{e({imagePreviewEnabled:t}),l.A.getState().setGraph()}}),{name:"config"}))},94941:(e,t,r)=>{r.d(t,{Fx:()=>o,R9:()=>i,o5:()=>l,xW:()=>s});var n,a,l=((n={}).JSON="json",n.YAML="yaml",n.XML="xml",n.CSV="csv",n);let o=[{value:"json",label:"JSON"},{value:"yaml",label:"YAML"},{value:"xml",label:"XML"},{value:"csv",label:"CSV"}];var i=((a={}).TypeScript="typescript",a.TypeScript_Combined="typescript/typealias",a.Go="go",a.JSON_SCHEMA="json_schema",a.Kotlin="kotlin",a.Rust="rust",a);let s=[{label:"TypeScript",value:"typescript",lang:"typescript"},{label:"TypeScript (merged)",value:"typescript/typealias",lang:"typescript"},{label:"Go",value:"go",lang:"go"},{label:"JSON Schema",value:"json_schema",lang:"json"},{label:"Kotlin",value:"kotlin",lang:"kotlin"},{label:"Rust",value:"rust",lang:"rust"}]}}]);
//# sourceMappingURL=485-1feb5542121db983.js.map